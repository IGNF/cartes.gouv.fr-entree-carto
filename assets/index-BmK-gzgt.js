var an=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ln=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var Xt=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)};var Nt=(t,e,n)=>(ln(t,e,"access private method"),n);var cn=an(exports=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}})();/**
* @vue/shared v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(t,e){const n=new Set(t.split(","));return i=>n.has(i)}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),isModelListener=t=>t.startsWith("onUpdate:"),extend$4=Object.assign,remove=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(t,e)=>hasOwnProperty$1.call(t,e),isArray$1=Array.isArray,isMap=t=>toTypeString(t)==="[object Map]",isSet=t=>toTypeString(t)==="[object Set]",isFunction=t=>typeof t=="function",isString=t=>typeof t=="string",isSymbol=t=>typeof t=="symbol",isObject=t=>t!==null&&typeof t=="object",isPromise=t=>(isObject(t)||isFunction(t))&&isFunction(t.then)&&isFunction(t.catch),objectToString=Object.prototype.toString,toTypeString=t=>objectToString.call(t),toRawType=t=>toTypeString(t).slice(8,-1),isPlainObject=t=>toTypeString(t)==="[object Object]",isIntegerKey=t=>isString(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(t=>t.replace(camelizeRE,(e,n)=>n?n.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(t=>t.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(t=>t.charAt(0).toUpperCase()+t.slice(1)),toHandlerKey=cacheStringFunction(t=>t?`on${capitalize(t)}`:""),hasChanged=(t,e)=>!Object.is(t,e),invokeArrayFns=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},def=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},looseToNumber=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],s=isString(i)?parseStringStyle(i):normalizeStyle(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(isString(t)||isObject(t))return t}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(t){const e={};return t.replace(styleCommentRE,"").split(listDelimiterRE).forEach(n=>{if(n){const i=n.split(propertyDelimiterRE);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function normalizeClass(t){let e="";if(isString(t))e=t;else if(isArray$1(t))for(let n=0;n<t.length;n++){const i=normalizeClass(t[n]);i&&(e+=i+" ")}else if(isObject(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function normalizeProps(t){if(!t)return null;let{class:e,style:n}=t;return e&&!isString(e)&&(t.class=normalizeClass(e)),n&&(t.style=normalizeStyle(n)),t}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(t){return!!t||t===""}const toDisplayString=t=>isString(t)?t:t==null?"":isArray$1(t)||isObject(t)&&(t.toString===objectToString||!isFunction(t.toString))?JSON.stringify(t,replacer,2):String(t),replacer=(t,e)=>e&&e.__v_isRef?replacer(t,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[i,s],r)=>(n[stringifySymbol(i,r)+" =>"]=s,n),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>stringifySymbol(n))}:isSymbol(e)?stringifySymbol(e):isObject(e)&&!isArray$1(e)&&!isPlainObject(e)?String(e):e,stringifySymbol=(t,e="")=>{var n;return isSymbol(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};/**
* @vue/reactivity v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const n=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=n}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){let n,i;for(n=0,i=this.effects.length;n<i;n++)this.effects[n].stop();for(n=0,i=this.cleanups.length;n<i;n++)this.cleanups[n]();if(this.scopes)for(n=0,i=this.scopes.length;n<i;n++)this.scopes[n].stop(!0);if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(t,e=activeEffectScope){e&&e.active&&e.effects.push(t)}function getCurrentScope(){return activeEffectScope}let activeEffect;class ReactiveEffect{constructor(e,n,i,s){this.fn=e,this.trigger=n,this.scheduler=i,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,recordEffectScope(this,s)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,pauseTracking();for(let e=0;e<this._depsLength;e++){const n=this.deps[e];if(n.computed&&(triggerComputed(n.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),resetTracking()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=shouldTrack,n=activeEffect;try{return shouldTrack=!0,activeEffect=this,this._runnings++,preCleanupEffect(this),this.fn()}finally{postCleanupEffect(this),this._runnings--,activeEffect=n,shouldTrack=e}}stop(){var e;this.active&&(preCleanupEffect(this),postCleanupEffect(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function triggerComputed(t){return t.value}function preCleanupEffect(t){t._trackId++,t._depsLength=0}function postCleanupEffect(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)cleanupDepEffect(t.deps[e],t);t.deps.length=t._depsLength}}function cleanupDepEffect(t,e){const n=t.get(e);n!==void 0&&e._trackId!==n&&(t.delete(e),t.size===0&&t.cleanup())}let shouldTrack=!0,pauseScheduleStack=0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const t=trackStack.pop();shouldTrack=t===void 0?!0:t}function pauseScheduling(){pauseScheduleStack++}function resetScheduling(){for(pauseScheduleStack--;!pauseScheduleStack&&queueEffectSchedulers.length;)queueEffectSchedulers.shift()()}function trackEffect(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const i=t.deps[t._depsLength];i!==e?(i&&cleanupDepEffect(i,t),t.deps[t._depsLength++]=e):t._depsLength++}}const queueEffectSchedulers=[];function triggerEffects(t,e,n){pauseScheduling();for(const i of t.keys()){let s;i._dirtyLevel<e&&(s??(s=t.get(i)===i._trackId))&&(i._shouldSchedule||(i._shouldSchedule=i._dirtyLevel===0),i._dirtyLevel=e),i._shouldSchedule&&(s??(s=t.get(i)===i._trackId))&&(i.trigger(),(!i._runnings||i.allowRecurse)&&i._dirtyLevel!==2&&(i._shouldSchedule=!1,i.scheduler&&queueEffectSchedulers.push(i.scheduler)))}resetScheduling()}const createDep=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");function track(t,e,n){if(shouldTrack&&activeEffect){let i=targetMap.get(t);i||targetMap.set(t,i=new Map);let s=i.get(n);s||i.set(n,s=createDep(()=>i.delete(n))),trackEffect(activeEffect,s)}}function trigger(t,e,n,i,s,r){const o=targetMap.get(t);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(n==="length"&&isArray$1(t)){const d=Number(i);o.forEach((_,C)=>{(C==="length"||!isSymbol(C)&&C>=d)&&a.push(_)})}else switch(n!==void 0&&a.push(o.get(n)),e){case"add":isArray$1(t)?isIntegerKey(n)&&a.push(o.get("length")):(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray$1(t)||(a.push(o.get(ITERATE_KEY)),isMap(t)&&a.push(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(t)&&a.push(o.get(ITERATE_KEY));break}pauseScheduling();for(const d of a)d&&triggerEffects(d,4);resetScheduling()}function getDepFromReactive(t,e){var n;return(n=targetMap.get(t))==null?void 0:n.get(e)}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(isSymbol)),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const t={};return["includes","indexOf","lastIndexOf"].forEach(e=>{t[e]=function(...n){const i=toRaw(this);for(let r=0,o=this.length;r<o;r++)track(i,"get",r+"");const s=i[e](...n);return s===-1||s===!1?i[e](...n.map(toRaw)):s}}),["push","pop","shift","unshift","splice"].forEach(e=>{t[e]=function(...n){pauseTracking(),pauseScheduling();const i=toRaw(this)[e].apply(this,n);return resetScheduling(),resetTracking(),i}}),t}function hasOwnProperty(t){isSymbol(t)||(t=String(t));const e=toRaw(this);return track(e,"has",t),e.hasOwnProperty(t)}class BaseReactiveHandler{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,i){const s=this._isReadonly,r=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return r;if(n==="__v_raw")return i===(s?r?shallowReadonlyMap:readonlyMap:r?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=isArray$1(e);if(!s){if(o&&hasOwn(arrayInstrumentations,n))return Reflect.get(arrayInstrumentations,n,i);if(n==="hasOwnProperty")return hasOwnProperty}const a=Reflect.get(e,n,i);return(isSymbol(n)?builtInSymbols.has(n):isNonTrackableKeys(n))||(s||track(e,"get",n),r)?a:isRef(a)?o&&isIntegerKey(n)?a:a.value:isObject(a)?s?readonly(a):reactive(a):a}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,n,i,s){let r=e[n];if(!this._isShallow){const d=isReadonly(r);if(!isShallow(i)&&!isReadonly(i)&&(r=toRaw(r),i=toRaw(i)),!isArray$1(e)&&isRef(r)&&!isRef(i))return d?!1:(r.value=i,!0)}const o=isArray$1(e)&&isIntegerKey(n)?Number(n)<e.length:hasOwn(e,n),a=Reflect.set(e,n,i,s);return e===toRaw(s)&&(o?hasChanged(i,r)&&trigger(e,"set",n,i):trigger(e,"add",n,i)),a}deleteProperty(e,n){const i=hasOwn(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&i&&trigger(e,"delete",n,void 0),s}has(e,n){const i=Reflect.has(e,n);return(!isSymbol(n)||!builtInSymbols.has(n))&&track(e,"has",n),i}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),toShallow=t=>t,getProto=t=>Reflect.getPrototypeOf(t);function get$5(t,e,n=!1,i=!1){t=t.__v_raw;const s=toRaw(t),r=toRaw(e);n||(hasChanged(e,r)&&track(s,"get",e),track(s,"get",r));const{has:o}=getProto(s),a=i?toShallow:n?toReadonly:toReactive;if(o.call(s,e))return a(t.get(e));if(o.call(s,r))return a(t.get(r));t!==s&&t.get(e)}function has(t,e=!1){const n=this.__v_raw,i=toRaw(n),s=toRaw(t);return e||(hasChanged(t,s)&&track(i,"has",t),track(i,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function size(t,e=!1){return t=t.__v_raw,!e&&track(toRaw(t),"iterate",ITERATE_KEY),Reflect.get(t,"size",t)}function add$4(t){t=toRaw(t);const e=toRaw(this);return getProto(e).has.call(e,t)||(e.add(t),trigger(e,"add",t,t)),this}function set$1(t,e){e=toRaw(e);const n=toRaw(this),{has:i,get:s}=getProto(n);let r=i.call(n,t);r||(t=toRaw(t),r=i.call(n,t));const o=s.call(n,t);return n.set(t,e),r?hasChanged(e,o)&&trigger(n,"set",t,e):trigger(n,"add",t,e),this}function deleteEntry(t){const e=toRaw(this),{has:n,get:i}=getProto(e);let s=n.call(e,t);s||(t=toRaw(t),s=n.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return s&&trigger(e,"delete",t,void 0),r}function clear$2(){const t=toRaw(this),e=t.size!==0,n=t.clear();return e&&trigger(t,"clear",void 0,void 0),n}function createForEach(t,e){return function(i,s){const r=this,o=r.__v_raw,a=toRaw(o),d=e?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",ITERATE_KEY),o.forEach((_,C)=>i.call(s,d(_),d(C),r))}}function createIterableMethod(t,e,n){return function(...i){const s=this.__v_raw,r=toRaw(s),o=isMap(r),a=t==="entries"||t===Symbol.iterator&&o,d=t==="keys"&&o,_=s[t](...i),C=n?toShallow:e?toReadonly:toReactive;return!e&&track(r,"iterate",d?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:y,done:v}=_.next();return v?{value:y,done:v}:{value:a?[C(y[0]),C(y[1])]:C(y),done:v}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function createInstrumentations(){const t={get(r){return get$5(this,r)},get size(){return size(this)},has,add:add$4,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!1)},e={get(r){return get$5(this,r,!1,!0)},get size(){return size(this)},has,add:add$4,set:set$1,delete:deleteEntry,clear:clear$2,forEach:createForEach(!1,!0)},n={get(r){return get$5(this,r,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},i={get(r){return get$5(this,r,!0,!0)},get size(){return size(this,!0)},has(r){return has.call(this,r,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{t[r]=createIterableMethod(r,!1,!1),n[r]=createIterableMethod(r,!0,!1),e[r]=createIterableMethod(r,!1,!0),i[r]=createIterableMethod(r,!0,!0)}),[t,n,e,i]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(t,e){const n=e?t?shallowReadonlyInstrumentations:shallowInstrumentations:t?readonlyInstrumentations:mutableInstrumentations;return(i,s,r)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?i:Reflect.get(hasOwn(n,s)&&s in i?n:i,s,r)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(t){return t.__v_skip||!Object.isExtensible(t)?0:targetTypeMap(toRawType(t))}function reactive(t){return isReadonly(t)?t:createReactiveObject(t,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(t){return createReactiveObject(t,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(t){return createReactiveObject(t,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(t,e,n,i,s){if(!isObject(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const r=s.get(t);if(r)return r;const o=getTargetType(t);if(o===0)return t;const a=new Proxy(t,o===2?i:n);return s.set(t,a),a}function isReactive(t){return isReadonly(t)?isReactive(t.__v_raw):!!(t&&t.__v_isReactive)}function isReadonly(t){return!!(t&&t.__v_isReadonly)}function isShallow(t){return!!(t&&t.__v_isShallow)}function isProxy(t){return t?!!t.__v_raw:!1}function toRaw(t){const e=t&&t.__v_raw;return e?toRaw(e):t}function markRaw(t){return Object.isExtensible(t)&&def(t,"__v_skip",!0),t}const toReactive=t=>isObject(t)?reactive(t):t,toReadonly=t=>isObject(t)?readonly(t):t;class ComputedRefImpl{constructor(e,n,i,s){this.getter=e,this._setter=n,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new ReactiveEffect(()=>e(this._value),()=>triggerRefValue(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!s,this.__v_isReadonly=i}get value(){const e=toRaw(this);return(!e._cacheable||e.effect.dirty)&&hasChanged(e._value,e._value=e.effect.run())&&triggerRefValue(e,4),trackRefValue(e),e.effect._dirtyLevel>=2&&triggerRefValue(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function computed$1(t,e,n=!1){let i,s;const r=isFunction(t);return r?(i=t,s=NOOP):(i=t.get,s=t.set),new ComputedRefImpl(i,s,r||!s,n)}function trackRefValue(t){var e;shouldTrack&&activeEffect&&(t=toRaw(t),trackEffect(activeEffect,(e=t.dep)!=null?e:t.dep=createDep(()=>t.dep=void 0,t instanceof ComputedRefImpl?t:void 0)))}function triggerRefValue(t,e=4,n){t=toRaw(t);const i=t.dep;i&&triggerEffects(i,e)}function isRef(t){return!!(t&&t.__v_isRef===!0)}function ref(t){return createRef(t,!1)}function shallowRef(t){return createRef(t,!0)}function createRef(t,e){return isRef(t)?t:new RefImpl(t,e)}class RefImpl{constructor(e,n){this.__v_isShallow=n,this.dep=void 0,this.__v_isRef=!0,this._rawValue=n?e:toRaw(e),this._value=n?e:toReactive(e)}get value(){return trackRefValue(this),this._value}set value(e){const n=this.__v_isShallow||isShallow(e)||isReadonly(e);e=n?e:toRaw(e),hasChanged(e,this._rawValue)&&(this._rawValue=e,this._value=n?e:toReactive(e),triggerRefValue(this,4))}}function unref(t){return isRef(t)?t.value:t}const shallowUnwrapHandlers={get:(t,e,n)=>unref(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const s=t[e];return isRef(s)&&!isRef(n)?(s.value=n,!0):Reflect.set(t,e,n,i)}};function proxyRefs(t){return isReactive(t)?t:new Proxy(t,shallowUnwrapHandlers)}function toRefs(t){const e=isArray$1(t)?new Array(t.length):{};for(const n in t)e[n]=propertyToRef(t,n);return e}class ObjectRefImpl{constructor(e,n,i){this._object=e,this._key=n,this._defaultValue=i,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function toRef(t,e,n){return isRef(t)?t:isFunction(t)?new GetterRefImpl(t):isObject(t)&&arguments.length>1?propertyToRef(t,e,n):ref(t)}function propertyToRef(t,e,n){const i=t[e];return isRef(i)?i:new ObjectRefImpl(t,e,n)}/**
* @vue/runtime-core v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function warn$1(t,...e){pauseTracking();const n=stack.length?stack[stack.length-1].component:null,i=n&&n.appContext.config.warnHandler,s=getComponentTrace();if(i)callWithErrorHandling(i,n,11,[t+e.map(r=>{var o,a;return(a=(o=r.toString)==null?void 0:o.call(r))!=null?a:JSON.stringify(r)}).join(""),n&&n.proxy,s.map(({vnode:r})=>`at <${formatComponentName(n,r.type)}>`).join(`
`),s]);else{const r=[`[Vue warn]: ${t}`,...e];s.length&&r.push(`
`,...formatTrace(s)),console.warn(...r)}resetTracking()}function getComponentTrace(){let t=stack[stack.length-1];if(!t)return[];const e=[];for(;t;){const n=e[0];n&&n.vnode===t?n.recurseCount++:e.push({vnode:t,recurseCount:0});const i=t.component&&t.component.parent;t=i&&i.vnode}return e}function formatTrace(t){const e=[];return t.forEach((n,i)=>{e.push(...i===0?[]:[`
`],...formatTraceEntry(n))}),e}function formatTraceEntry({vnode:t,recurseCount:e}){const n=e>0?`... (${e} recursive calls)`:"",i=t.component?t.component.parent==null:!1,s=` at <${formatComponentName(t.component,t.type,i)}`,r=">"+n;return t.props?[s,...formatProps(t.props),r]:[s+r]}function formatProps(t){const e=[],n=Object.keys(t);return n.slice(0,3).forEach(i=>{e.push(...formatProp(i,t[i]))}),n.length>3&&e.push(" ..."),e}function formatProp(t,e,n){return isString(e)?(e=JSON.stringify(e),n?e:[`${t}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?n?e:[`${t}=${e}`]:isRef(e)?(e=formatProp(t,toRaw(e.value),!0),n?e:[`${t}=Ref<`,e,">"]):isFunction(e)?[`${t}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),n?e:[`${t}=`,e])}function callWithErrorHandling(t,e,n,i){try{return i?t(...i):t()}catch(s){handleError(s,e,n)}}function callWithAsyncErrorHandling(t,e,n,i){if(isFunction(t)){const s=callWithErrorHandling(t,e,n,i);return s&&isPromise(s)&&s.catch(r=>{handleError(r,e,n)}),s}if(isArray$1(t)){const s=[];for(let r=0;r<t.length;r++)s.push(callWithAsyncErrorHandling(t[r],e,n,i));return s}}function handleError(t,e,n,i=!0){const s=e?e.vnode:null;if(e){let r=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){const _=r.ec;if(_){for(let C=0;C<_.length;C++)if(_[C](t,o,a)===!1)return}r=r.parent}const d=e.appContext.config.errorHandler;if(d){pauseTracking(),callWithErrorHandling(d,null,10,[t,o,a]),resetTracking();return}}logError(t,n,s,i)}function logError(t,e,n,i=!0){console.error(t)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(t){const e=currentFlushPromise||resolvedPromise;return t?e.then(this?t.bind(this):t):e}function findInsertionIndex(t){let e=flushIndex+1,n=queue.length;for(;e<n;){const i=e+n>>>1,s=queue[i],r=getId(s);r<t||r===t&&s.pre?e=i+1:n=i}return e}function queueJob(t){(!queue.length||!queue.includes(t,isFlushing&&t.allowRecurse?flushIndex+1:flushIndex))&&(t.id==null?queue.push(t):queue.splice(findInsertionIndex(t.id),0,t),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(t){const e=queue.indexOf(t);e>flushIndex&&queue.splice(e,1)}function queuePostFlushCb(t){isArray$1(t)?pendingPostFlushCbs.push(...t):(!activePostFlushCbs||!activePostFlushCbs.includes(t,t.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(t),queueFlush()}function flushPreFlushCbs(t,e,n=isFlushing?flushIndex+1:0){for(;n<queue.length;n++){const i=queue[n];if(i&&i.pre){if(t&&i.id!==t.uid)continue;queue.splice(n,1),n--,i()}}}function flushPostFlushCbs(t){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((n,i)=>getId(n)-getId(i));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=t=>t.id==null?1/0:t.id,comparator=(t,e)=>{const n=getId(t)-getId(e);if(n===0){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function flushJobs(t){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&e.active!==!1&&callWithErrorHandling(e,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||EMPTY_OBJ;let s=n;const r=e.startsWith("update:"),o=r&&e.slice(7);if(o&&o in i){const C=`${o==="modelValue"?"model":o}Modifiers`,{number:y,trim:v}=i[C]||EMPTY_OBJ;v&&(s=n.map(E=>isString(E)?E.trim():E)),y&&(s=n.map(looseToNumber))}let a,d=i[a=toHandlerKey(e)]||i[a=toHandlerKey(camelize(e))];!d&&r&&(d=i[a=toHandlerKey(hyphenate(e))]),d&&callWithAsyncErrorHandling(d,t,6,s);const _=i[a+"Once"];if(_){if(!t.emitted)t.emitted={};else if(t.emitted[a])return;t.emitted[a]=!0,callWithAsyncErrorHandling(_,t,6,s)}}function normalizeEmitsOptions(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(s!==void 0)return s;const r=t.emits;let o={},a=!1;if(!isFunction(t)){const d=_=>{const C=normalizeEmitsOptions(_,e,!0);C&&(a=!0,extend$4(o,C))};!n&&e.mixins.length&&e.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!r&&!a?(isObject(t)&&i.set(t,null),null):(isArray$1(r)?r.forEach(d=>o[d]=null):extend$4(o,r),isObject(t)&&i.set(t,o),o)}function isEmitListener(t,e){return!t||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(t,e[0].toLowerCase()+e.slice(1))||hasOwn(t,hyphenate(e))||hasOwn(t,e))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(t){const e=currentRenderingInstance;return currentRenderingInstance=t,currentScopeId=t&&t.type.__scopeId||null,e}function withCtx(t,e=currentRenderingInstance,n){if(!e||t._n)return t;const i=(...s)=>{i._d&&setBlockTracking(-1);const r=setCurrentRenderingInstance(e);let o;try{o=t(...s)}finally{setCurrentRenderingInstance(r),i._d&&setBlockTracking(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function markAttrsAccessed(){}function renderComponentRoot(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:r,propsOptions:[o],slots:a,attrs:d,emit:_,render:C,renderCache:y,data:v,setupState:E,ctx:S,inheritAttrs:R}=t;let x,T;const b=setCurrentRenderingInstance(t);try{if(n.shapeFlag&4){const N=s||i,k=N;x=normalizeVNode(C.call(k,N,y,r,E,v,S)),T=d}else{const N=e;x=normalizeVNode(N.length>1?N(r,{attrs:d,slots:a,emit:_}):N(r,null)),T=e.props?d:getFunctionalFallthrough(d)}}catch(N){blockStack.length=0,handleError(N,t,1),x=createVNode(Comment)}let M=x;if(T&&R!==!1){const N=Object.keys(T),{shapeFlag:k}=M;N.length&&k&7&&(o&&N.some(isModelListener)&&(T=filterModelListeners(T,o)),M=cloneVNode(M,T))}return n.dirs&&(M=cloneVNode(M),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&(M.transition=n.transition),x=M,setCurrentRenderingInstance(b),x}const getFunctionalFallthrough=t=>{let e;for(const n in t)(n==="class"||n==="style"||isOn(n))&&((e||(e={}))[n]=t[n]);return e},filterModelListeners=(t,e)=>{const n={};for(const i in t)(!isModelListener(i)||!(i.slice(9)in e))&&(n[i]=t[i]);return n};function shouldUpdateComponent(t,e,n){const{props:i,children:s,component:r}=t,{props:o,children:a,patchFlag:d}=e,_=r.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&d>=0){if(d&1024)return!0;if(d&16)return i?hasPropsChanged(i,o,_):!!o;if(d&8){const C=e.dynamicProps;for(let y=0;y<C.length;y++){const v=C[y];if(o[v]!==i[v]&&!isEmitListener(_,v))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?hasPropsChanged(i,o,_):!0:!!o;return!1}function hasPropsChanged(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==t[r]&&!isEmitListener(n,r))return!0}return!1}function updateHOCHostEl({vnode:t,parent:e},n){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i===t)(t=e.vnode).el=n,e=e.parent;else break}}const COMPONENTS="components";function resolveComponent(t,e){return resolveAsset(COMPONENTS,t,!0,e)||t}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(t){return isString(t)?resolveAsset(COMPONENTS,t,!1)||t:t||NULL_DYNAMIC_COMPONENT}function resolveAsset(t,e,n=!0,i=!1){const s=currentRenderingInstance||currentInstance;if(s){const r=s.type;{const a=getComponentName(r,!1);if(a&&(a===e||a===camelize(e)||a===capitalize(camelize(e))))return r}const o=resolve(s[t]||r[t],e)||resolve(s.appContext[t],e);return!o&&i?r:o}}function resolve(t,e){return t&&(t[e]||t[camelize(e)]||t[capitalize(camelize(e))])}const isSuspense=t=>t.__isSuspense;function queueEffectWithSuspense(t,e){e&&e.pendingBranch?isArray$1(t)?e.effects.push(...t):e.effects.push(t):queuePostFlushCb(t)}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(t,e){return doWatch(t,null,e)}const INITIAL_WATCHER_VALUE={};function watch(t,e,n){return doWatch(t,e,n)}function doWatch(t,e,{immediate:n,deep:i,flush:s,once:r,onTrack:o,onTrigger:a}=EMPTY_OBJ){if(e&&r){const G=e;e=(...Y)=>{G(...Y),k()}}const d=currentInstance,_=G=>i===!0?G:traverse(G,i===!1?1:void 0);let C,y=!1,v=!1;if(isRef(t)?(C=()=>t.value,y=isShallow(t)):isReactive(t)?(C=()=>_(t),y=!0):isArray$1(t)?(v=!0,y=t.some(G=>isReactive(G)||isShallow(G)),C=()=>t.map(G=>{if(isRef(G))return G.value;if(isReactive(G))return _(G);if(isFunction(G))return callWithErrorHandling(G,d,2)})):isFunction(t)?e?C=()=>callWithErrorHandling(t,d,2):C=()=>(E&&E(),callWithAsyncErrorHandling(t,d,3,[S])):C=NOOP,e&&i){const G=C;C=()=>traverse(G())}let E,S=G=>{E=M.onStop=()=>{callWithErrorHandling(G,d,4),E=M.onStop=void 0}},R;if(isInSSRComponentSetup)if(S=NOOP,e?n&&callWithAsyncErrorHandling(e,d,3,[C(),v?[]:void 0,S]):C(),s==="sync"){const G=useSSRContext();R=G.__watcherHandles||(G.__watcherHandles=[])}else return NOOP;let x=v?new Array(t.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const T=()=>{if(!(!M.active||!M.dirty))if(e){const G=M.run();(i||y||(v?G.some((Y,q)=>hasChanged(Y,x[q])):hasChanged(G,x)))&&(E&&E(),callWithAsyncErrorHandling(e,d,3,[G,x===INITIAL_WATCHER_VALUE?void 0:v&&x[0]===INITIAL_WATCHER_VALUE?[]:x,S]),x=G)}else M.run()};T.allowRecurse=!!e;let b;s==="sync"?b=T:s==="post"?b=()=>queuePostRenderEffect(T,d&&d.suspense):(T.pre=!0,d&&(T.id=d.uid),b=()=>queueJob(T));const M=new ReactiveEffect(C,NOOP,b),N=getCurrentScope(),k=()=>{M.stop(),N&&remove(N.effects,M)};return e?n?T():x=M.run():s==="post"?queuePostRenderEffect(M.run.bind(M),d&&d.suspense):M.run(),R&&R.push(k),k}function instanceWatch(t,e,n){const i=this.proxy,s=isString(t)?t.includes(".")?createPathGetter(i,t):()=>i[t]:t.bind(i,i);let r;isFunction(e)?r=e:(r=e.handler,n=e);const o=setCurrentInstance(this),a=doWatch(s,r.bind(i),n);return o(),a}function createPathGetter(t,e){const n=e.split(".");return()=>{let i=t;for(let s=0;s<n.length&&i;s++)i=i[n[s]];return i}}function traverse(t,e,n=0,i){if(!isObject(t)||t.__v_skip)return t;if(e&&e>0){if(n>=e)return t;n++}if(i=i||new Set,i.has(t))return t;if(i.add(t),isRef(t))traverse(t.value,e,n,i);else if(isArray$1(t))for(let s=0;s<t.length;s++)traverse(t[s],e,n,i);else if(isSet(t)||isMap(t))t.forEach(s=>{traverse(s,e,n,i)});else if(isPlainObject(t))for(const s in t)traverse(t[s],e,n,i);return t}function invokeDirectiveHook(t,e,n,i){const s=t.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let d=a.dir[i];d&&(pauseTracking(),callWithAsyncErrorHandling(d,n,8,[t.el,a,t,e]),resetTracking())}}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(t,e){return isFunction(t)?extend$4({name:t.name},e,{setup:t}):t}const isAsyncWrapper=t=>!!t.type.__asyncLoader,isKeepAlive=t=>t.type.__isKeepAlive;function onActivated(t,e){registerKeepAliveHook(t,"a",e)}function onDeactivated(t,e){registerKeepAliveHook(t,"da",e)}function registerKeepAliveHook(t,e,n=currentInstance){const i=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(injectHook(e,i,n),n){let s=n.parent;for(;s&&s.parent;)isKeepAlive(s.parent.vnode)&&injectToKeepAliveRoot(i,e,n,s),s=s.parent}}function injectToKeepAliveRoot(t,e,n,i){const s=injectHook(e,t,i,!0);onUnmounted(()=>{remove(i[e],s)},n)}function injectHook(t,e,n=currentInstance,i=!1){if(n){const s=n[t]||(n[t]=[]),r=e.__weh||(e.__weh=(...o)=>{if(n.isUnmounted)return;pauseTracking();const a=setCurrentInstance(n),d=callWithAsyncErrorHandling(e,n,t,o);return a(),resetTracking(),d});return i?s.unshift(r):s.push(r),r}}const createHook=t=>(e,n=currentInstance)=>(!isInSSRComponentSetup||t==="sp")&&injectHook(t,(...i)=>e(...i),n),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(t,e=currentInstance){injectHook("ec",t,e)}function renderList(t,e,n,i){let s;const r=n;if(isArray$1(t)||isString(t)){s=new Array(t.length);for(let o=0,a=t.length;o<a;o++)s[o]=e(t[o],o,void 0,r)}else if(typeof t=="number"){s=new Array(t);for(let o=0;o<t;o++)s[o]=e(o+1,o,void 0,r)}else if(isObject(t))if(t[Symbol.iterator])s=Array.from(t,(o,a)=>e(o,a,void 0,r));else{const o=Object.keys(t);s=new Array(o.length);for(let a=0,d=o.length;a<d;a++){const _=o[a];s[a]=e(t[_],_,a,r)}}else s=[];return s}function renderSlot(t,e,n={},i,s){if(currentRenderingInstance.isCE||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.isCE)return e!=="default"&&(n.name=e),createVNode("slot",n,i&&i());let r=t[e];r&&r._c&&(r._d=!1),openBlock();const o=r&&ensureValidVNode(r(n)),a=createBlock(Fragment,{key:n.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),r&&r._c&&(r._d=!0),a}function ensureValidVNode(t){return t.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?t:null}const getPublicInstance=t=>t?isStatefulComponent(t)?getExposeProxy(t)||t.proxy:getPublicInstance(t.parent):null,publicPropertiesMap=extend$4(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>getPublicInstance(t.parent),$root:t=>getPublicInstance(t.root),$emit:t=>t.emit,$options:t=>resolveMergedOptions(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,queueJob(t.update)}),$nextTick:t=>t.n||(t.n=nextTick.bind(t.proxy)),$watch:t=>instanceWatch.bind(t)}),hasSetupBinding=(t,e)=>t!==EMPTY_OBJ&&!t.__isScriptSetup&&hasOwn(t,e),PublicInstanceProxyHandlers={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:d}=t;let _;if(e[0]!=="$"){const E=o[e];if(E!==void 0)switch(E){case 1:return i[e];case 2:return s[e];case 4:return n[e];case 3:return r[e]}else{if(hasSetupBinding(i,e))return o[e]=1,i[e];if(s!==EMPTY_OBJ&&hasOwn(s,e))return o[e]=2,s[e];if((_=t.propsOptions[0])&&hasOwn(_,e))return o[e]=3,r[e];if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];shouldCacheAccess&&(o[e]=0)}}const C=publicPropertiesMap[e];let y,v;if(C)return e==="$attrs"&&track(t.attrs,"get",""),C(t);if((y=a.__cssModules)&&(y=y[e]))return y;if(n!==EMPTY_OBJ&&hasOwn(n,e))return o[e]=4,n[e];if(v=d.config.globalProperties,hasOwn(v,e))return v[e]},set({_:t},e,n){const{data:i,setupState:s,ctx:r}=t;return hasSetupBinding(s,e)?(s[e]=n,!0):i!==EMPTY_OBJ&&hasOwn(i,e)?(i[e]=n,!0):hasOwn(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(r[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:r}},o){let a;return!!n[o]||t!==EMPTY_OBJ&&hasOwn(t,o)||hasSetupBinding(e,o)||(a=r[0])&&hasOwn(a,o)||hasOwn(i,o)||hasOwn(publicPropertiesMap,o)||hasOwn(s.config.globalProperties,o)},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:hasOwn(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const t=getCurrentInstance();return t.setupContext||(t.setupContext=createSetupContext(t))}function normalizePropsOrEmits(t){return isArray$1(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let shouldCacheAccess=!0;function applyOptions(t){const e=resolveMergedOptions(t),n=t.proxy,i=t.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook(e.beforeCreate,t,"bc");const{data:s,computed:r,methods:o,watch:a,provide:d,inject:_,created:C,beforeMount:y,mounted:v,beforeUpdate:E,updated:S,activated:R,deactivated:x,beforeDestroy:T,beforeUnmount:b,destroyed:M,unmounted:N,render:k,renderTracked:G,renderTriggered:Y,errorCaptured:q,serverPrefetch:le,expose:B,inheritAttrs:D,components:X,directives:ce,filters:Me}=e;if(_&&resolveInjections(_,i,null),o)for(const J in o){const oe=o[J];isFunction(oe)&&(i[J]=oe.bind(n))}if(s){const J=s.call(n,n);isObject(J)&&(t.data=reactive(J))}if(shouldCacheAccess=!0,r)for(const J in r){const oe=r[J],Be=isFunction(oe)?oe.bind(n,n):isFunction(oe.get)?oe.get.bind(n,n):NOOP,je=!isFunction(oe)&&isFunction(oe.set)?oe.set.bind(n):NOOP,qe=computed({get:Be,set:je});Object.defineProperty(i,J,{enumerable:!0,configurable:!0,get:()=>qe.value,set:ee=>qe.value=ee})}if(a)for(const J in a)createWatcher(a[J],i,n,J);if(d){const J=isFunction(d)?d.call(n):d;Reflect.ownKeys(J).forEach(oe=>{provide(oe,J[oe])})}C&&callHook(C,t,"c");function ie(J,oe){isArray$1(oe)?oe.forEach(Be=>J(Be.bind(n))):oe&&J(oe.bind(n))}if(ie(onBeforeMount,y),ie(onMounted,v),ie(onBeforeUpdate,E),ie(onUpdated,S),ie(onActivated,R),ie(onDeactivated,x),ie(onErrorCaptured,q),ie(onRenderTracked,G),ie(onRenderTriggered,Y),ie(onBeforeUnmount,b),ie(onUnmounted,N),ie(onServerPrefetch,le),isArray$1(B))if(B.length){const J=t.exposed||(t.exposed={});B.forEach(oe=>{Object.defineProperty(J,oe,{get:()=>n[oe],set:Be=>n[oe]=Be})})}else t.exposed||(t.exposed={});k&&t.render===NOOP&&(t.render=k),D!=null&&(t.inheritAttrs=D),X&&(t.components=X),ce&&(t.directives=ce)}function resolveInjections(t,e,n=NOOP){isArray$1(t)&&(t=normalizeInject(t));for(const i in t){const s=t[i];let r;isObject(s)?"default"in s?r=inject(s.from||i,s.default,!0):r=inject(s.from||i):r=inject(s),isRef(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function callHook(t,e,n){callWithAsyncErrorHandling(isArray$1(t)?t.map(i=>i.bind(e.proxy)):t.bind(e.proxy),e,n)}function createWatcher(t,e,n,i){const s=i.includes(".")?createPathGetter(n,i):()=>n[i];if(isString(t)){const r=e[t];isFunction(r)&&watch(s,r)}else if(isFunction(t))watch(s,t.bind(n));else if(isObject(t))if(isArray$1(t))t.forEach(r=>createWatcher(r,e,n,i));else{const r=isFunction(t.handler)?t.handler.bind(n):e[t.handler];isFunction(r)&&watch(s,r,t)}}function resolveMergedOptions(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=t.appContext,a=r.get(e);let d;return a?d=a:!s.length&&!n&&!i?d=e:(d={},s.length&&s.forEach(_=>mergeOptions$1(d,_,o,!0)),mergeOptions$1(d,e,o)),isObject(e)&&r.set(e,d),d}function mergeOptions$1(t,e,n,i=!1){const{mixins:s,extends:r}=e;r&&mergeOptions$1(t,r,n,!0),s&&s.forEach(o=>mergeOptions$1(t,o,n,!0));for(const o in e)if(!(i&&o==="expose")){const a=internalOptionMergeStrats[o]||n&&n[o];t[o]=a?a(t[o],e[o]):e[o]}return t}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(t,e){return e?t?function(){return extend$4(isFunction(t)?t.call(this,this):t,isFunction(e)?e.call(this,this):e)}:e:t}function mergeInject(t,e){return mergeObjectOptions(normalizeInject(t),normalizeInject(e))}function normalizeInject(t){if(isArray$1(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mergeAsArray(t,e){return t?[...new Set([].concat(t,e))]:e}function mergeObjectOptions(t,e){return t?extend$4(Object.create(null),t,e):e}function mergeEmitsOrPropsOptions(t,e){return t?isArray$1(t)&&isArray$1(e)?[...new Set([...t,...e])]:extend$4(Object.create(null),normalizePropsOrEmits(t),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(t,e){if(!t)return e;if(!e)return t;const n=extend$4(Object.create(null),t);for(const i in e)n[i]=mergeAsArray(t[i],e[i]);return n}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(t,e){return function(i,s=null){isFunction(i)||(i=extend$4({},i)),s!=null&&!isObject(s)&&(s=null);const r=createAppContext(),o=new WeakSet;let a=!1;const d=r.app={_uid:uid$1++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:version$1,get config(){return r.config},set config(_){},use(_,...C){return o.has(_)||(_&&isFunction(_.install)?(o.add(_),_.install(d,...C)):isFunction(_)&&(o.add(_),_(d,...C))),d},mixin(_){return r.mixins.includes(_)||r.mixins.push(_),d},component(_,C){return C?(r.components[_]=C,d):r.components[_]},directive(_,C){return C?(r.directives[_]=C,d):r.directives[_]},mount(_,C,y){if(!a){const v=createVNode(i,s);return v.appContext=r,y===!0?y="svg":y===!1&&(y=void 0),C&&e?e(v,_):t(v,_,y),a=!0,d._container=_,_.__vue_app__=d,getExposeProxy(v.component)||v.component.proxy}},unmount(){a&&(t(null,d._container),delete d._container.__vue_app__)},provide(_,C){return r.provides[_]=C,d},runWithContext(_){const C=currentApp;currentApp=d;try{return _()}finally{currentApp=C}}};return d}}let currentApp=null;function provide(t,e){if(currentInstance){let n=currentInstance.provides;const i=currentInstance.parent&&currentInstance.parent.provides;i===n&&(n=currentInstance.provides=Object.create(i)),n[t]=e}}function inject(t,e,n=!1){const i=currentInstance||currentRenderingInstance;if(i||currentApp){const s=i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:currentApp._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&isFunction(e)?e.call(i&&i.proxy):e}}const internalObjectProto=Object.create(null),createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=t=>Object.getPrototypeOf(t)===internalObjectProto;function initProps(t,e,n,i=!1){const s={},r=createInternalObject();t.propsDefaults=Object.create(null),setFullProps(t,e,s,r);for(const o in t.propsOptions[0])o in s||(s[o]=void 0);n?t.props=i?s:shallowReactive(s):t.type.props?t.props=s:t.props=r,t.attrs=r}function updateProps(t,e,n,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=t,a=toRaw(s),[d]=t.propsOptions;let _=!1;if((i||o>0)&&!(o&16)){if(o&8){const C=t.vnode.dynamicProps;for(let y=0;y<C.length;y++){let v=C[y];if(isEmitListener(t.emitsOptions,v))continue;const E=e[v];if(d)if(hasOwn(r,v))E!==r[v]&&(r[v]=E,_=!0);else{const S=camelize(v);s[S]=resolvePropValue(d,a,S,E,t,!1)}else E!==r[v]&&(r[v]=E,_=!0)}}}else{setFullProps(t,e,s,r)&&(_=!0);let C;for(const y in a)(!e||!hasOwn(e,y)&&((C=hyphenate(y))===y||!hasOwn(e,C)))&&(d?n&&(n[y]!==void 0||n[C]!==void 0)&&(s[y]=resolvePropValue(d,a,y,void 0,t,!0)):delete s[y]);if(r!==a)for(const y in r)(!e||!hasOwn(e,y))&&(delete r[y],_=!0)}_&&trigger(t.attrs,"set","")}function setFullProps(t,e,n,i){const[s,r]=t.propsOptions;let o=!1,a;if(e)for(let d in e){if(isReservedProp(d))continue;const _=e[d];let C;s&&hasOwn(s,C=camelize(d))?!r||!r.includes(C)?n[C]=_:(a||(a={}))[C]=_:isEmitListener(t.emitsOptions,d)||(!(d in i)||_!==i[d])&&(i[d]=_,o=!0)}if(r){const d=toRaw(n),_=a||EMPTY_OBJ;for(let C=0;C<r.length;C++){const y=r[C];n[y]=resolvePropValue(s,d,y,_[y],t,!hasOwn(_,y))}}return o}function resolvePropValue(t,e,n,i,s,r){const o=t[n];if(o!=null){const a=hasOwn(o,"default");if(a&&i===void 0){const d=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction(d)){const{propsDefaults:_}=s;if(n in _)i=_[n];else{const C=setCurrentInstance(s);i=_[n]=d.call(null,e),C()}}else i=d}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===hyphenate(n))&&(i=!0))}return i}function normalizePropsOptions(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const r=t.props,o={},a=[];let d=!1;if(!isFunction(t)){const C=y=>{d=!0;const[v,E]=normalizePropsOptions(y,e,!0);extend$4(o,v),E&&a.push(...E)};!n&&e.mixins.length&&e.mixins.forEach(C),t.extends&&C(t.extends),t.mixins&&t.mixins.forEach(C)}if(!r&&!d)return isObject(t)&&i.set(t,EMPTY_ARR),EMPTY_ARR;if(isArray$1(r))for(let C=0;C<r.length;C++){const y=camelize(r[C]);validatePropName(y)&&(o[y]=EMPTY_OBJ)}else if(r)for(const C in r){const y=camelize(C);if(validatePropName(y)){const v=r[C],E=o[y]=isArray$1(v)||isFunction(v)?{type:v}:extend$4({},v);if(E){const S=getTypeIndex(Boolean,E.type),R=getTypeIndex(String,E.type);E[0]=S>-1,E[1]=R<0||S<R,(S>-1||hasOwn(E,"default"))&&a.push(y)}}}const _=[o,a];return isObject(t)&&i.set(t,_),_}function validatePropName(t){return t[0]!=="$"&&!isReservedProp(t)}function getType(t){return t===null?"null":typeof t=="function"?t.name||"":typeof t=="object"&&t.constructor&&t.constructor.name||""}function isSameType(t,e){return getType(t)===getType(e)}function getTypeIndex(t,e){return isArray$1(e)?e.findIndex(n=>isSameType(n,t)):isFunction(e)&&isSameType(e,t)?0:-1}const isInternalKey=t=>t[0]==="_"||t==="$stable",normalizeSlotValue=t=>isArray$1(t)?t.map(normalizeVNode):[normalizeVNode(t)],normalizeSlot$1=(t,e,n)=>{if(e._n)return e;const i=withCtx((...s)=>normalizeSlotValue(e(...s)),n);return i._c=!1,i},normalizeObjectSlots=(t,e,n)=>{const i=t._ctx;for(const s in t){if(isInternalKey(s))continue;const r=t[s];if(isFunction(r))e[s]=normalizeSlot$1(s,r,i);else if(r!=null){const o=normalizeSlotValue(r);e[s]=()=>o}}},normalizeVNodeSlots=(t,e)=>{const n=normalizeSlotValue(e);t.slots.default=()=>n},initSlots=(t,e)=>{if(t.vnode.shapeFlag&32){const n=e._;n?(t.slots=toRaw(e),def(t.slots,"_",n)):normalizeObjectSlots(e,t.slots=createInternalObject())}else t.slots=createInternalObject(),e&&normalizeVNodeSlots(t,e)},updateSlots=(t,e,n)=>{const{vnode:i,slots:s}=t;let r=!0,o=EMPTY_OBJ;if(i.shapeFlag&32){const a=e._;a?n&&a===1?r=!1:(extend$4(s,e),!n&&a===1&&delete s._):(r=!e.$stable,normalizeObjectSlots(e,s)),o=e}else e&&(normalizeVNodeSlots(t,e),o={default:1});if(r)for(const a in s)!isInternalKey(a)&&o[a]==null&&delete s[a]};function setRef(t,e,n,i,s=!1){if(isArray$1(t)){t.forEach((v,E)=>setRef(v,e&&(isArray$1(e)?e[E]:e),n,i,s));return}if(isAsyncWrapper(i)&&!s)return;const r=i.shapeFlag&4?getExposeProxy(i.component)||i.component.proxy:i.el,o=s?null:r,{i:a,r:d}=t,_=e&&e.r,C=a.refs===EMPTY_OBJ?a.refs={}:a.refs,y=a.setupState;if(_!=null&&_!==d&&(isString(_)?(C[_]=null,hasOwn(y,_)&&(y[_]=null)):isRef(_)&&(_.value=null)),isFunction(d))callWithErrorHandling(d,a,12,[o,C]);else{const v=isString(d),E=isRef(d);if(v||E){const S=()=>{if(t.f){const R=v?hasOwn(y,d)?y[d]:C[d]:d.value;s?isArray$1(R)&&remove(R,r):isArray$1(R)?R.includes(r)||R.push(r):v?(C[d]=[r],hasOwn(y,d)&&(y[d]=C[d])):(d.value=[r],t.k&&(C[t.k]=d.value))}else v?(C[d]=o,hasOwn(y,d)&&(y[d]=o)):E&&(d.value=o,t.k&&(C[t.k]=o))};o?(S.id=-1,queuePostRenderEffect(S,n)):S()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(t){return baseCreateRenderer(t)}function baseCreateRenderer(t,e){const n=getGlobalThis();n.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:d,setText:_,setElementText:C,parentNode:y,nextSibling:v,setScopeId:E=NOOP,insertStaticContent:S}=t,R=(P,L,U,$=null,K=null,de=null,ve=void 0,ae=null,se=!!L.dynamicChildren)=>{if(P===L)return;P&&!isSameVNodeType(P,L)&&($=H(P),ee(P,K,de,!0),P=null),L.patchFlag===-2&&(se=!1,L.dynamicChildren=null);const{type:Q,ref:F,shapeFlag:z}=L;switch(Q){case Text$1:x(P,L,U,$);break;case Comment:T(P,L,U,$);break;case Static:P==null&&b(L,U,$,ve);break;case Fragment:X(P,L,U,$,K,de,ve,ae,se);break;default:z&1?k(P,L,U,$,K,de,ve,ae,se):z&6?ce(P,L,U,$,K,de,ve,ae,se):(z&64||z&128)&&Q.process(P,L,U,$,K,de,ve,ae,se,ke)}F!=null&&K&&setRef(F,P&&P.ref,de,L||P,!L)},x=(P,L,U,$)=>{if(P==null)i(L.el=a(L.children),U,$);else{const K=L.el=P.el;L.children!==P.children&&_(K,L.children)}},T=(P,L,U,$)=>{P==null?i(L.el=d(L.children||""),U,$):L.el=P.el},b=(P,L,U,$)=>{[P.el,P.anchor]=S(P.children,L,U,$,P.el,P.anchor)},M=({el:P,anchor:L},U,$)=>{let K;for(;P&&P!==L;)K=v(P),i(P,U,$),P=K;i(L,U,$)},N=({el:P,anchor:L})=>{let U;for(;P&&P!==L;)U=v(P),s(P),P=U;s(L)},k=(P,L,U,$,K,de,ve,ae,se)=>{L.type==="svg"?ve="svg":L.type==="math"&&(ve="mathml"),P==null?G(L,U,$,K,de,ve,ae,se):le(P,L,K,de,ve,ae,se)},G=(P,L,U,$,K,de,ve,ae)=>{let se,Q;const{props:F,shapeFlag:z,transition:W,dirs:te}=P;if(se=P.el=o(P.type,de,F&&F.is,F),z&8?C(se,P.children):z&16&&q(P.children,se,null,$,K,resolveChildrenNamespace(P,de),ve,ae),te&&invokeDirectiveHook(P,null,$,"created"),Y(se,P,P.scopeId,ve,$),F){for(const Re in F)Re!=="value"&&!isReservedProp(Re)&&r(se,Re,null,F[Re],de,P.children,$,K,He);"value"in F&&r(se,"value",null,F.value,de),(Q=F.onVnodeBeforeMount)&&invokeVNodeHook(Q,$,P)}te&&invokeDirectiveHook(P,null,$,"beforeMount");const pe=needTransition(K,W);pe&&W.beforeEnter(se),i(se,L,U),((Q=F&&F.onVnodeMounted)||pe||te)&&queuePostRenderEffect(()=>{Q&&invokeVNodeHook(Q,$,P),pe&&W.enter(se),te&&invokeDirectiveHook(P,null,$,"mounted")},K)},Y=(P,L,U,$,K)=>{if(U&&E(P,U),$)for(let de=0;de<$.length;de++)E(P,$[de]);if(K){let de=K.subTree;if(L===de){const ve=K.vnode;Y(P,ve,ve.scopeId,ve.slotScopeIds,K.parent)}}},q=(P,L,U,$,K,de,ve,ae,se=0)=>{for(let Q=se;Q<P.length;Q++){const F=P[Q]=ae?cloneIfMounted(P[Q]):normalizeVNode(P[Q]);R(null,F,L,U,$,K,de,ve,ae)}},le=(P,L,U,$,K,de,ve)=>{const ae=L.el=P.el;let{patchFlag:se,dynamicChildren:Q,dirs:F}=L;se|=P.patchFlag&16;const z=P.props||EMPTY_OBJ,W=L.props||EMPTY_OBJ;let te;if(U&&toggleRecurse(U,!1),(te=W.onVnodeBeforeUpdate)&&invokeVNodeHook(te,U,L,P),F&&invokeDirectiveHook(L,P,U,"beforeUpdate"),U&&toggleRecurse(U,!0),Q?B(P.dynamicChildren,Q,ae,U,$,resolveChildrenNamespace(L,K),de):ve||oe(P,L,ae,null,U,$,resolveChildrenNamespace(L,K),de,!1),se>0){if(se&16)D(ae,L,z,W,U,$,K);else if(se&2&&z.class!==W.class&&r(ae,"class",null,W.class,K),se&4&&r(ae,"style",z.style,W.style,K),se&8){const pe=L.dynamicProps;for(let Re=0;Re<pe.length;Re++){const De=pe[Re],dt=z[De],ht=W[De];(ht!==dt||De==="value")&&r(ae,De,dt,ht,K,P.children,U,$,He)}}se&1&&P.children!==L.children&&C(ae,L.children)}else!ve&&Q==null&&D(ae,L,z,W,U,$,K);((te=W.onVnodeUpdated)||F)&&queuePostRenderEffect(()=>{te&&invokeVNodeHook(te,U,L,P),F&&invokeDirectiveHook(L,P,U,"updated")},$)},B=(P,L,U,$,K,de,ve)=>{for(let ae=0;ae<L.length;ae++){const se=P[ae],Q=L[ae],F=se.el&&(se.type===Fragment||!isSameVNodeType(se,Q)||se.shapeFlag&70)?y(se.el):U;R(se,Q,F,null,$,K,de,ve,!0)}},D=(P,L,U,$,K,de,ve)=>{if(U!==$){if(U!==EMPTY_OBJ)for(const ae in U)!isReservedProp(ae)&&!(ae in $)&&r(P,ae,U[ae],null,ve,L.children,K,de,He);for(const ae in $){if(isReservedProp(ae))continue;const se=$[ae],Q=U[ae];se!==Q&&ae!=="value"&&r(P,ae,Q,se,ve,L.children,K,de,He)}"value"in $&&r(P,"value",U.value,$.value,ve)}},X=(P,L,U,$,K,de,ve,ae,se)=>{const Q=L.el=P?P.el:a(""),F=L.anchor=P?P.anchor:a("");let{patchFlag:z,dynamicChildren:W,slotScopeIds:te}=L;te&&(ae=ae?ae.concat(te):te),P==null?(i(Q,U,$),i(F,U,$),q(L.children||[],U,F,K,de,ve,ae,se)):z>0&&z&64&&W&&P.dynamicChildren?(B(P.dynamicChildren,W,U,K,de,ve,ae),(L.key!=null||K&&L===K.subTree)&&traverseStaticChildren(P,L,!0)):oe(P,L,U,F,K,de,ve,ae,se)},ce=(P,L,U,$,K,de,ve,ae,se)=>{L.slotScopeIds=ae,P==null?L.shapeFlag&512?K.ctx.activate(L,U,$,ve,se):Me(L,U,$,K,de,ve,se):re(P,L,se)},Me=(P,L,U,$,K,de,ve)=>{const ae=P.component=createComponentInstance(P,$,K);if(isKeepAlive(P)&&(ae.ctx.renderer=ke),setupComponent(ae),ae.asyncDep){if(K&&K.registerDep(ae,ie),!P.el){const se=ae.subTree=createVNode(Comment);T(null,se,L,U)}}else ie(ae,P,L,U,K,de,ve)},re=(P,L,U)=>{const $=L.component=P.component;if(shouldUpdateComponent(P,L,U))if($.asyncDep&&!$.asyncResolved){J($,L,U);return}else $.next=L,invalidateJob($.update),$.effect.dirty=!0,$.update();else L.el=P.el,$.vnode=L},ie=(P,L,U,$,K,de,ve)=>{const ae=()=>{if(P.isMounted){let{next:F,bu:z,u:W,parent:te,vnode:pe}=P;{const ft=locateNonHydratedAsyncRoot(P);if(ft){F&&(F.el=pe.el,J(P,F,ve)),ft.asyncDep.then(()=>{P.isUnmounted||ae()});return}}let Re=F,De;toggleRecurse(P,!1),F?(F.el=pe.el,J(P,F,ve)):F=pe,z&&invokeArrayFns(z),(De=F.props&&F.props.onVnodeBeforeUpdate)&&invokeVNodeHook(De,te,F,pe),toggleRecurse(P,!0);const dt=renderComponentRoot(P),ht=P.subTree;P.subTree=dt,R(ht,dt,y(ht.el),H(ht),P,K,de),F.el=dt.el,Re===null&&updateHOCHostEl(P,dt.el),W&&queuePostRenderEffect(W,K),(De=F.props&&F.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(De,te,F,pe),K)}else{let F;const{el:z,props:W}=L,{bm:te,m:pe,parent:Re}=P,De=isAsyncWrapper(L);if(toggleRecurse(P,!1),te&&invokeArrayFns(te),!De&&(F=W&&W.onVnodeBeforeMount)&&invokeVNodeHook(F,Re,L),toggleRecurse(P,!0),z&&ct){const dt=()=>{P.subTree=renderComponentRoot(P),ct(z,P.subTree,P,K,null)};De?L.type.__asyncLoader().then(()=>!P.isUnmounted&&dt()):dt()}else{const dt=P.subTree=renderComponentRoot(P);R(null,dt,U,$,P,K,de),L.el=dt.el}if(pe&&queuePostRenderEffect(pe,K),!De&&(F=W&&W.onVnodeMounted)){const dt=L;queuePostRenderEffect(()=>invokeVNodeHook(F,Re,dt),K)}(L.shapeFlag&256||Re&&isAsyncWrapper(Re.vnode)&&Re.vnode.shapeFlag&256)&&P.a&&queuePostRenderEffect(P.a,K),P.isMounted=!0,L=U=$=null}},se=P.effect=new ReactiveEffect(ae,NOOP,()=>queueJob(Q),P.scope),Q=P.update=()=>{se.dirty&&se.run()};Q.id=P.uid,toggleRecurse(P,!0),Q()},J=(P,L,U)=>{L.component=P;const $=P.vnode.props;P.vnode=L,P.next=null,updateProps(P,L.props,$,U),updateSlots(P,L.children,U),pauseTracking(),flushPreFlushCbs(P),resetTracking()},oe=(P,L,U,$,K,de,ve,ae,se=!1)=>{const Q=P&&P.children,F=P?P.shapeFlag:0,z=L.children,{patchFlag:W,shapeFlag:te}=L;if(W>0){if(W&128){je(Q,z,U,$,K,de,ve,ae,se);return}else if(W&256){Be(Q,z,U,$,K,de,ve,ae,se);return}}te&8?(F&16&&He(Q,K,de),z!==Q&&C(U,z)):F&16?te&16?je(Q,z,U,$,K,de,ve,ae,se):He(Q,K,de,!0):(F&8&&C(U,""),te&16&&q(z,U,$,K,de,ve,ae,se))},Be=(P,L,U,$,K,de,ve,ae,se)=>{P=P||EMPTY_ARR,L=L||EMPTY_ARR;const Q=P.length,F=L.length,z=Math.min(Q,F);let W;for(W=0;W<z;W++){const te=L[W]=se?cloneIfMounted(L[W]):normalizeVNode(L[W]);R(P[W],te,U,null,K,de,ve,ae,se)}Q>F?He(P,K,de,!0,!1,z):q(L,U,$,K,de,ve,ae,se,z)},je=(P,L,U,$,K,de,ve,ae,se)=>{let Q=0;const F=L.length;let z=P.length-1,W=F-1;for(;Q<=z&&Q<=W;){const te=P[Q],pe=L[Q]=se?cloneIfMounted(L[Q]):normalizeVNode(L[Q]);if(isSameVNodeType(te,pe))R(te,pe,U,null,K,de,ve,ae,se);else break;Q++}for(;Q<=z&&Q<=W;){const te=P[z],pe=L[W]=se?cloneIfMounted(L[W]):normalizeVNode(L[W]);if(isSameVNodeType(te,pe))R(te,pe,U,null,K,de,ve,ae,se);else break;z--,W--}if(Q>z){if(Q<=W){const te=W+1,pe=te<F?L[te].el:$;for(;Q<=W;)R(null,L[Q]=se?cloneIfMounted(L[Q]):normalizeVNode(L[Q]),U,pe,K,de,ve,ae,se),Q++}}else if(Q>W)for(;Q<=z;)ee(P[Q],K,de,!0),Q++;else{const te=Q,pe=Q,Re=new Map;for(Q=pe;Q<=W;Q++){const gt=L[Q]=se?cloneIfMounted(L[Q]):normalizeVNode(L[Q]);gt.key!=null&&Re.set(gt.key,Q)}let De,dt=0;const ht=W-pe+1;let ft=!1,Pt=0;const Ot=new Array(ht);for(Q=0;Q<ht;Q++)Ot[Q]=0;for(Q=te;Q<=z;Q++){const gt=P[Q];if(dt>=ht){ee(gt,K,de,!0);continue}let pt;if(gt.key!=null)pt=Re.get(gt.key);else for(De=pe;De<=W;De++)if(Ot[De-pe]===0&&isSameVNodeType(gt,L[De])){pt=De;break}pt===void 0?ee(gt,K,de,!0):(Ot[pt-pe]=Q+1,pt>=Pt?Pt=pt:ft=!0,R(gt,L[pt],U,null,K,de,ve,ae,se),dt++)}const Bt=ft?getSequence(Ot):EMPTY_ARR;for(De=Bt.length-1,Q=ht-1;Q>=0;Q--){const gt=pe+Q,pt=L[gt],Ut=gt+1<F?L[gt+1].el:$;Ot[Q]===0?R(null,pt,U,Ut,K,de,ve,ae,se):ft&&(De<0||Q!==Bt[De]?qe(pt,U,Ut,2):De--)}}},qe=(P,L,U,$,K=null)=>{const{el:de,type:ve,transition:ae,children:se,shapeFlag:Q}=P;if(Q&6){qe(P.component.subTree,L,U,$);return}if(Q&128){P.suspense.move(L,U,$);return}if(Q&64){ve.move(P,L,U,ke);return}if(ve===Fragment){i(de,L,U);for(let z=0;z<se.length;z++)qe(se[z],L,U,$);i(P.anchor,L,U);return}if(ve===Static){M(P,L,U);return}if($!==2&&Q&1&&ae)if($===0)ae.beforeEnter(de),i(de,L,U),queuePostRenderEffect(()=>ae.enter(de),K);else{const{leave:z,delayLeave:W,afterLeave:te}=ae,pe=()=>i(de,L,U),Re=()=>{z(de,()=>{pe(),te&&te()})};W?W(de,pe,Re):Re()}else i(de,L,U)},ee=(P,L,U,$=!1,K=!1)=>{const{type:de,props:ve,ref:ae,children:se,dynamicChildren:Q,shapeFlag:F,patchFlag:z,dirs:W}=P;if(ae!=null&&setRef(ae,null,U,P,!0),F&256){L.ctx.deactivate(P);return}const te=F&1&&W,pe=!isAsyncWrapper(P);let Re;if(pe&&(Re=ve&&ve.onVnodeBeforeUnmount)&&invokeVNodeHook(Re,L,P),F&6)We(P.component,U,$);else{if(F&128){P.suspense.unmount(U,$);return}te&&invokeDirectiveHook(P,null,L,"beforeUnmount"),F&64?P.type.remove(P,L,U,K,ke,$):Q&&(de!==Fragment||z>0&&z&64)?He(Q,L,U,!1,!0):(de===Fragment&&z&384||!K&&F&16)&&He(se,L,U),$&&et(P)}(pe&&(Re=ve&&ve.onVnodeUnmounted)||te)&&queuePostRenderEffect(()=>{Re&&invokeVNodeHook(Re,L,P),te&&invokeDirectiveHook(P,null,L,"unmounted")},U)},et=P=>{const{type:L,el:U,anchor:$,transition:K}=P;if(L===Fragment){Ue(U,$);return}if(L===Static){N(P);return}const de=()=>{s(U),K&&!K.persisted&&K.afterLeave&&K.afterLeave()};if(P.shapeFlag&1&&K&&!K.persisted){const{leave:ve,delayLeave:ae}=K,se=()=>ve(U,de);ae?ae(P.el,de,se):se()}else de()},Ue=(P,L)=>{let U;for(;P!==L;)U=v(P),s(P),P=U;s(L)},We=(P,L,U)=>{const{bum:$,scope:K,update:de,subTree:ve,um:ae}=P;$&&invokeArrayFns($),K.stop(),de&&(de.active=!1,ee(ve,P,L,U)),ae&&queuePostRenderEffect(ae,L),queuePostRenderEffect(()=>{P.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},He=(P,L,U,$=!1,K=!1,de=0)=>{for(let ve=de;ve<P.length;ve++)ee(P[ve],L,U,$,K)},H=P=>P.shapeFlag&6?H(P.component.subTree):P.shapeFlag&128?P.suspense.next():v(P.anchor||P.el);let ye=!1;const fe=(P,L,U)=>{P==null?L._vnode&&ee(L._vnode,null,null,!0):R(L._vnode||null,P,L,null,null,null,U),ye||(ye=!0,flushPreFlushCbs(),flushPostFlushCbs(),ye=!1),L._vnode=P},ke={p:R,um:ee,m:qe,r:et,mt:Me,mc:q,pc:oe,pbc:B,n:H,o:t};let Qe,ct;return{render:fe,hydrate:Qe,createApp:createAppAPI(fe,Qe)}}function resolveChildrenNamespace({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function toggleRecurse({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function needTransition(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(t,e,n=!1){const i=t.children,s=e.children;if(isArray$1(i)&&isArray$1(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=cloneIfMounted(s[r]),a.el=o.el),n||traverseStaticChildren(o,a)),a.type===Text$1&&(a.el=o.el)}}function getSequence(t){const e=t.slice(),n=[0];let i,s,r,o,a;const d=t.length;for(i=0;i<d;i++){const _=t[i];if(_!==0){if(s=n[n.length-1],t[s]<_){e[i]=s,n.push(i);continue}for(r=0,o=n.length-1;r<o;)a=r+o>>1,t[n[a]]<_?r=a+1:o=a;_<t[n[r]]&&(r>0&&(e[i]=n[r-1]),n[r]=i)}}for(r=n.length,o=n[r-1];r-- >0;)n[r]=o,o=e[o];return n}function locateNonHydratedAsyncRoot(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}const isTeleport=t=>t.__isTeleport,Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(t=!1){blockStack.push(currentBlock=t?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(t){isBlockTreeEnabled+=t}function setupBlock(t){return t.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(t),t}function createElementBlock(t,e,n,i,s,r){return setupBlock(createBaseVNode(t,e,n,i,s,r,!0))}function createBlock(t,e,n,i,s){return setupBlock(createVNode(t,e,n,i,s,!0))}function isVNode(t){return t?t.__v_isVNode===!0:!1}function isSameVNodeType(t,e){return t.type===e.type&&t.key===e.key}const normalizeKey=({key:t})=>t??null,normalizeRef=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?isString(t)||isRef(t)||isFunction(t)?{i:currentRenderingInstance,r:t,k:e,f:!!n}:t:null);function createBaseVNode(t,e=null,n=null,i=0,s=null,r=t===Fragment?0:1,o=!1,a=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return a?(normalizeChildren(d,n),r&128&&t.normalize(d)):n&&(d.shapeFlag|=isString(n)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(d.patchFlag>0||r&6)&&d.patchFlag!==32&&currentBlock.push(d),d}const createVNode=_createVNode;function _createVNode(t,e=null,n=null,i=0,s=null,r=!1){if((!t||t===NULL_DYNAMIC_COMPONENT)&&(t=Comment),isVNode(t)){const a=cloneVNode(t,e,!0);return n&&normalizeChildren(a,n),isBlockTreeEnabled>0&&!r&&currentBlock&&(a.shapeFlag&6?currentBlock[currentBlock.indexOf(t)]=a:currentBlock.push(a)),a.patchFlag|=-2,a}if(isClassComponent(t)&&(t=t.__vccOpts),e){e=guardReactiveProps(e);let{class:a,style:d}=e;a&&!isString(a)&&(e.class=normalizeClass(a)),isObject(d)&&(isProxy(d)&&!isArray$1(d)&&(d=extend$4({},d)),e.style=normalizeStyle(d))}const o=isString(t)?1:isSuspense(t)?128:isTeleport(t)?64:isObject(t)?4:isFunction(t)?2:0;return createBaseVNode(t,e,n,i,s,o,r,!0)}function guardReactiveProps(t){return t?isProxy(t)||isInternalObject(t)?extend$4({},t):t:null}function cloneVNode(t,e,n=!1){const{props:i,ref:s,patchFlag:r,children:o}=t,a=e?mergeProps(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:a,key:a&&normalizeKey(a),ref:e&&e.ref?n&&s?isArray$1(s)?s.concat(normalizeRef(e)):[s,normalizeRef(e)]:normalizeRef(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:o,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Fragment?r===-1?16:r|16:r,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&cloneVNode(t.ssContent),ssFallback:t.ssFallback&&cloneVNode(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce}}function createTextVNode(t=" ",e=0){return createVNode(Text$1,null,t,e)}function createCommentVNode(t="",e=!1){return e?(openBlock(),createBlock(Comment,null,t)):createVNode(Comment,null,t)}function normalizeVNode(t){return t==null||typeof t=="boolean"?createVNode(Comment):isArray$1(t)?createVNode(Fragment,null,t.slice()):typeof t=="object"?cloneIfMounted(t):createVNode(Text$1,null,String(t))}function cloneIfMounted(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:cloneVNode(t)}function normalizeChildren(t,e){let n=0;const{shapeFlag:i}=t;if(e==null)e=null;else if(isArray$1(e))n=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),normalizeChildren(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!isInternalObject(e)?e._ctx=currentRenderingInstance:s===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},n=32):(e=String(e),i&64?(n=16,e=[createTextVNode(e)]):n=8);t.children=e,t.shapeFlag|=n}function mergeProps(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=normalizeClass([e.class,i.class]));else if(s==="style")e.style=normalizeStyle([e.style,i.style]);else if(isOn(s)){const r=e[s],o=i[s];o&&r!==o&&!(isArray$1(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function invokeVNodeHook(t,e,n,i=null){callWithAsyncErrorHandling(t,e,7,[n,i])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(t,e,n){const i=t.type,s=(e?e.appContext:t.appContext)||emptyAppContext,r={uid:uid++,vnode:t,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(i,s),emitsOptions:normalizeEmitsOptions(i,s),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:i.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=emit.bind(null,r),t.ce&&t.ce(r),r}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const t=getGlobalThis(),e=(n,i)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",n=>currentInstance=n),setInSSRSetupState=e("__VUE_SSR_SETTERS__",n=>isInSSRComponentSetup=n)}const setCurrentInstance=t=>{const e=currentInstance;return internalSetCurrentInstance(t),t.scope.on(),()=>{t.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(t){return t.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(t,e=!1){e&&setInSSRSetupState(e);const{props:n,children:i}=t.vnode,s=isStatefulComponent(t);initProps(t,n,s,e),initSlots(t,i);const r=s?setupStatefulComponent(t,e):void 0;return e&&setInSSRSetupState(!1),r}function setupStatefulComponent(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,PublicInstanceProxyHandlers);const{setup:i}=n;if(i){const s=t.setupContext=i.length>1?createSetupContext(t):null,r=setCurrentInstance(t);pauseTracking();const o=callWithErrorHandling(i,t,0,[t.props,s]);if(resetTracking(),r(),isPromise(o)){if(o.then(unsetCurrentInstance,unsetCurrentInstance),e)return o.then(a=>{handleSetupResult(t,a,e)}).catch(a=>{handleError(a,t,0)});t.asyncDep=o}else handleSetupResult(t,o,e)}else finishComponentSetup(t,e)}function handleSetupResult(t,e,n){isFunction(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:isObject(e)&&(t.setupState=proxyRefs(e)),finishComponentSetup(t,n)}let compile;function finishComponentSetup(t,e,n){const i=t.type;if(!t.render){if(!e&&compile&&!i.render){const s=i.template||resolveMergedOptions(t).template;if(s){const{isCustomElement:r,compilerOptions:o}=t.appContext.config,{delimiters:a,compilerOptions:d}=i,_=extend$4(extend$4({isCustomElement:r,delimiters:a},o),d);i.render=compile(s,_)}}t.render=i.render||NOOP}{const s=setCurrentInstance(t);pauseTracking();try{applyOptions(t)}finally{resetTracking(),s()}}}const attrsProxyHandlers={get(t,e){return track(t,"get",""),t[e]}};function createSetupContext(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,attrsProxyHandlers),slots:t.slots,emit:t.emit,expose:e}}function getExposeProxy(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(proxyRefs(markRaw(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in publicPropertiesMap)return publicPropertiesMap[n](t)},has(e,n){return n in e||n in publicPropertiesMap}}))}const classifyRE=/(?:^|[-_])(\w)/g,classify=t=>t.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(t,e=!0){return isFunction(t)?t.displayName||t.name:t.name||e&&t.__name}function formatComponentName(t,e,n=!1){let i=getComponentName(e);if(!i&&e.__file){const s=e.__file.match(/([^/\\]+)\.\w+$/);s&&(i=s[1])}if(!i&&t&&t.parent){const s=r=>{for(const o in r)if(r[o]===e)return o};i=s(t.components||t.parent.type.components)||s(t.appContext.components)}return i?classify(i):n?"App":"Anonymous"}function isClassComponent(t){return isFunction(t)&&"__vccOpts"in t}const computed=(t,e)=>computed$1(t,e,isInSSRComponentSetup);function h$1(t,e,n){const i=arguments.length;return i===2?isObject(e)&&!isArray$1(e)?isVNode(e)?createVNode(t,null,[e]):createVNode(t,e):createVNode(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):i===3&&isVNode(n)&&(n=[n]),createVNode(t,e,n))}const version$1="3.4.23";/**
* @vue/runtime-dom v3.4.23
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const s=e==="svg"?doc.createElementNS(svgNS,t):e==="mathml"?doc.createElementNS(mathmlNS,t):doc.createElement(t,n?{is:n}:void 0);return t==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:t=>doc.createTextNode(t),createComment:t=>doc.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>doc.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,s,r){const o=n?n.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===r||!(s=s.nextSibling)););else{templateContainer.innerHTML=i==="svg"?`<svg>${t}</svg>`:i==="mathml"?`<math>${t}</math>`:t;const a=templateContainer.content;if(i==="svg"||i==="mathml"){const d=a.firstChild;for(;d.firstChild;)a.appendChild(d.firstChild);a.removeChild(d)}e.insertBefore(a,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(t,e,n){const i=t[vtcKey];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(t,e,n){const i=t.style,s=isString(n);let r=!1;if(n&&!s){if(e)if(isString(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();n[a]==null&&setStyle(i,a,"")}else for(const o in e)n[o]==null&&setStyle(i,o,"");for(const o in n)o==="display"&&(r=!0),setStyle(i,o,n[o])}else if(s){if(e!==n){const o=i[CSS_VAR_TEXT];o&&(n+=";"+o),i.cssText=n,r=displayRE.test(n)}}else e&&t.removeAttribute("style");vShowOriginalDisplay in t&&(t[vShowOriginalDisplay]=r?i.display:"",t[vShowHidden]&&(i.display="none"))}const importantRE=/\s*!important$/;function setStyle(t,e,n){if(isArray$1(n))n.forEach(i=>setStyle(t,e,i));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=autoPrefix(t,e);importantRE.test(n)?t.setProperty(hyphenate(i),n.replace(importantRE,""),"important"):t[i]=n}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(t,e){const n=prefixCache[e];if(n)return n;let i=camelize(e);if(i!=="filter"&&i in t)return prefixCache[e]=i;i=capitalize(i);for(let s=0;s<prefixes.length;s++){const r=prefixes[s]+i;if(r in t)return prefixCache[e]=r}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(t,e,n,i,s){if(i&&e.startsWith("xlink:"))n==null?t.removeAttributeNS(xlinkNS,e.slice(6,e.length)):t.setAttributeNS(xlinkNS,e,n);else{const r=isSpecialBooleanAttr(e);n==null||r&&!includeBooleanAttr(n)?t.removeAttribute(e):t.setAttribute(e,r?"":n)}}function patchDOMProp(t,e,n,i,s,r,o){if(e==="innerHTML"||e==="textContent"){i&&o(i,s,r),t[e]=n??"";return}const a=t.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const _=a==="OPTION"?t.getAttribute("value")||"":t.value,C=n??"";(_!==C||!("_value"in t))&&(t.value=C),n==null&&t.removeAttribute(e),t._value=n;return}let d=!1;if(n===""||n==null){const _=typeof t[e];_==="boolean"?n=includeBooleanAttr(n):n==null&&_==="string"?(n="",d=!0):_==="number"&&(n=0,d=!0)}try{t[e]=n}catch{}d&&t.removeAttribute(e)}function addEventListener(t,e,n,i){t.addEventListener(e,n,i)}function removeEventListener(t,e,n,i){t.removeEventListener(e,n,i)}const veiKey=Symbol("_vei");function patchEvent(t,e,n,i,s=null){const r=t[veiKey]||(t[veiKey]={}),o=r[e];if(i&&o)o.value=i;else{const[a,d]=parseName(e);if(i){const _=r[e]=createInvoker(i,s);addEventListener(t,a,_,d)}else o&&(removeEventListener(t,a,o,d),r[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(t){let e;if(optionsModifierRE.test(t)){e={};let i;for(;i=t.match(optionsModifierRE);)t=t.slice(0,t.length-i[0].length),e[i[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):hyphenate(t.slice(2)),e]}let cachedNow=0;const p$1=Promise.resolve(),getNow=()=>cachedNow||(p$1.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(t,e){const n=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=n.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(i,n.value),e,5,[i])};return n.value=t,n.attached=getNow(),n}function patchStopImmediatePropagation(t,e){if(isArray$1(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const isNativeOn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,patchProp=(t,e,n,i,s,r,o,a,d)=>{const _=s==="svg";e==="class"?patchClass(t,i,_):e==="style"?patchStyle(t,n,i):isOn(e)?isModelListener(e)||patchEvent(t,e,n,i,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(t,e,i,_))?patchDOMProp(t,e,i,r,o,a,d):(e==="true-value"?t._trueValue=i:e==="false-value"&&(t._falseValue=i),patchAttr(t,e,i,_))};function shouldSetAsProp(t,e,n,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in t&&isNativeOn(e)&&isFunction(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return isNativeOn(e)&&isString(n)?!1:e in t}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>systemModifiers.some(n=>t[`${n}Key`]&&!e.includes(n))},withModifiers=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(s,...r)=>{for(let o=0;o<e.length;o++){const a=modifierGuards[e[o]];if(a&&a(s,e))return}return t(s,...r)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=s=>{if(!("key"in s))return;const r=hyphenate(s.key);if(e.some(o=>o===r||keyNames[o]===r))return t(s)})},rendererOptions=extend$4({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...t)=>{const e=ensureRenderer().createApp(...t),{mount:n}=e;return e.mount=i=>{const s=normalizeContainer(i);if(!s)return;const r=e._component;!isFunction(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.innerHTML="";const o=n(s,!1,resolveRootNamespace(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function resolveRootNamespace(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function normalizeContainer(t){return isString(t)?document.querySelector(t):t}const l={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","&":"&amp;"};let h=0;var f=t=>t.replace(/[<>"&]/g,e=>l[e]||e),p=t=>t+h++;const u={},m=t=>{const{name:e,paths:n=[],d:i,polygons:s=[],points:r}=t;i&&n.push({d:i}),r&&s.push({points:r}),u[e]=Object.assign({},t,{paths:n,polygons:s}),u[e].minX||(u[e].minX=0),u[e].minY||(u[e].minY=0)},c=(...t)=>{for(const e of t)m(e)},g=defineComponent({name:"OhVueIcon",props:{name:{type:String,validator:t=>!t||t in u||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".
Please make sure you have imported this icon before using it.`),!1)},title:String,fill:String,scale:{type:[Number,String],default:1},animation:{validator:t=>["spin","spin-pulse","wrench","ring","pulse","flash","float"].includes(t)},hover:Boolean,flip:{validator:t=>["horizontal","vertical","both"].includes(t)},speed:{validator:t=>t==="fast"||t==="slow"},label:String,inverse:Boolean},setup(t){const e=ref([]),n=reactive({outerScale:1.2,x:null,y:null}),i=reactive({width:0,height:0}),s=computed(()=>{const R=Number(t.scale);return isNaN(R)||R<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),n.outerScale):R*n.outerScale}),r=computed(()=>({"ov-icon":!0,"ov-inverse":t.inverse,"ov-flip-horizontal":t.flip==="horizontal","ov-flip-vertical":t.flip==="vertical","ov-flip-both":t.flip==="both","ov-spin":t.animation==="spin","ov-spin-pulse":t.animation==="spin-pulse","ov-wrench":t.animation==="wrench","ov-ring":t.animation==="ring","ov-pulse":t.animation==="pulse","ov-flash":t.animation==="flash","ov-float":t.animation==="float","ov-hover":t.hover,"ov-fast":t.speed==="fast","ov-slow":t.speed==="slow"})),o=computed(()=>t.name?u[t.name]:null),a=computed(()=>o.value?`${o.value.minX} ${o.value.minY} ${o.value.width} ${o.value.height}`:`0 0 ${_.value} ${C.value}`),d=computed(()=>{if(!o.value)return 1;const{width:R,height:x}=o.value;return Math.max(R,x)/16}),_=computed(()=>i.width||o.value&&o.value.width/d.value*s.value||0),C=computed(()=>i.height||o.value&&o.value.height/d.value*s.value||0),y=computed(()=>s.value!==1&&{fontSize:s.value+"em"}),v=computed(()=>{if(!o.value||!o.value.raw)return null;const R={};let x=o.value.raw;return x=x.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(T,b,M)=>{const N=p("vat-");return R[M]=N,` id="${N}"`}),x=x.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(T,b,M,N)=>{const k=b||N;return k&&R[k]?`#${R[k]}`:T}),x}),E=computed(()=>o.value&&o.value.attr?o.value.attr:{}),S=()=>{if(!t.name&&t.name!==null&&e.value.length===0)return void console.warn('Invalid prop: prop "name" is required.');if(o.value)return;let R=0,x=0;e.value.forEach(T=>{T.outerScale=s.value,R=Math.max(R,T.width),x=Math.max(x,T.height)}),i.width=R,i.height=x,e.value.forEach(T=>{T.x=(R-T.width)/2,T.y=(x-T.height)/2})};return onMounted(()=>{S()}),onUpdated(()=>{S()}),{...toRefs(n),children:e,icon:o,klass:r,style:y,width:_,height:C,box:a,attribs:E,raw:v}},created(){const t=this.$parent;t&&t.children&&t.children.push(this)},render(){const t=Object.assign({role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),width:this.width,height:this.height,viewBox:this.box},this.attribs);this.attribs.stroke?t.stroke=this.fill?this.fill:"currentColor":t.fill=this.fill?this.fill:"currentColor",this.x&&(t.x=this.x.toString()),this.y&&(t.y=this.y.toString());let e={class:this.klass,style:this.style};if(e=Object.assign(e,t),this.raw){const s=this.title?`<title>${f(this.title)}</title>${this.raw}`:this.raw;e.innerHTML=s}const n=this.title?[h$1("title",this.title)]:[],i=(s,r,o)=>h$1(s,{...r,key:`${s}-${o}`});return h$1("svg",e,this.raw?void 0:n.concat([this.$slots.default?this.$slots.default():this.icon?[...this.icon.paths.map((s,r)=>i("path",s,r)),...this.icon.polygons.map((s,r)=>i("polygon",s,r))]:[]]))}});function w(t,e){if(e={},e.insertAt,t&&typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}w(`.ov-icon {
  display: inline-block;
  overflow: visible;
  vertical-align: -0.2em;
}
`);w(`/* ---------------- spin ---------------- */
.ov-spin:not(.ov-hover),
.ov-spin.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin {
  animation: ov-spin 1s linear infinite;
}

.ov-spin:not(.ov-hover).ov-fast,
.ov-spin.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-fast {
  animation: ov-spin 0.7s linear infinite;
}

.ov-spin:not(.ov-hover).ov-slow,
.ov-spin.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-slow {
  animation: ov-spin 2s linear infinite;
}

/* ---------------- spin-pulse ---------------- */

.ov-spin-pulse:not(.ov-hover),
.ov-spin-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse {
  animation: ov-spin 1s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-fast,
.ov-spin-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-fast {
  animation: ov-spin 0.7s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-slow,
.ov-spin-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-slow {
  animation: ov-spin 2s infinite steps(8);
}

@keyframes ov-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ---------------- wrench ---------------- */
.ov-wrench:not(.ov-hover),
.ov-wrench.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-wrench {
  animation: ov-wrench 2.5s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-fast,
.ov-wrench.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-fast {
  animation: ov-wrench 1.2s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-slow,
.ov-wrench.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-slow {
  animation: ov-wrench 3.7s ease infinite;
}

@keyframes ov-wrench {
  0% {
    transform: rotate(-12deg);
  }

  8% {
    transform: rotate(12deg);
  }

  10%, 28%, 30%, 48%, 50%, 68% {
    transform: rotate(24deg);
  }

  18%, 20%, 38%, 40%, 58%, 60% {
    transform: rotate(-24deg);
  }

  75%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- ring ---------------- */
.ov-ring:not(.ov-hover),
.ov-ring.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-ring {
  animation: ov-ring 2s ease infinite;
}

.ov-ring:not(.ov-hover).ov-fast,
.ov-ring.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-fast {
  animation: ov-ring 1s ease infinite;
}

.ov-ring:not(.ov-hover).ov-slow,
.ov-ring.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-slow {
  animation: ov-ring 3s ease infinite;
}

@keyframes ov-ring {
  0% {
    transform: rotate(-15deg);
  }

  2% {
    transform: rotate(15deg);
  }

  4%, 12% {
    transform: rotate(-18deg);
  }

  6% {
    transform: rotate(18deg);
  }

  8% {
    transform: rotate(-22deg);
  }

  10% {
    transform: rotate(22deg);
  }

  12% {
    transform: rotate(-18deg);
  }

  14% {
    transform: rotate(18deg);
  }

  16% {
    transform: rotate(-12deg);
  }

  18% {
    transform: rotate(12deg);
  }

  20%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- pulse ---------------- */
.ov-pulse:not(.ov-hover),
.ov-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-pulse {
  animation: ov-pulse 2s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-fast,
.ov-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-fast {
  animation: ov-pulse 1s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-slow,
.ov-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-slow {
  animation: ov-pulse 3s linear infinite;
}

@keyframes ov-pulse {
  0% {
    transform: scale(1.1);
  }

  50% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1.1);
  }
}

/* ---------------- flash ---------------- */
.ov-flash:not(.ov-hover),
.ov-flash.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-flash {
  animation: ov-flash 2s ease infinite;
}

.ov-flash:not(.ov-hover).ov-fast,
.ov-flash.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-fast {
  animation: ov-flash 1s ease infinite;
}

.ov-flash:not(.ov-hover).ov-slow,
.ov-flash.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-slow {
  animation: ov-flash 3s ease infinite;
}

@keyframes ov-flash {
  0%, 100%, 50%{
    opacity: 1;
  }
  25%, 75%{
    opacity: 0;
  }
}

/* ---------------- float ---------------- */
.ov-float:not(.ov-hover),
.ov-float.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-float {
  animation: ov-float 2s linear infinite;
}

.ov-float:not(.ov-hover).ov-fast,
.ov-float.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-fast {
  animation: ov-float 1s linear infinite;
}

.ov-float:not(.ov-hover).ov-slow,
.ov-float.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-slow {
  animation: ov-float 3s linear infinite;
}

@keyframes ov-float {
  0%, 100% {
    transform: translateY(-3px);
  }
  50% {
    transform: translateY(3px);
  }
}
`);w(`.ov-flip-horizontal {
  transform: scale(-1, 1);
}

.ov-flip-vertical {
  transform: scale(1, -1);
}

.ov-flip-both {
  transform: scale(-1, -1);
}

.ov-inverse {
  color: #fff;
}
`);const ra="abcdefghijklmnopqrstuvwyz0123456789",Ze=ra.repeat(10),la=()=>{const t=Math.floor(Math.random()*Ze.length);return Ze[t]},j=(t="",e="")=>(t?t+"-":"")+sa(5)+(e?"-"+e:""),sa=t=>Array.from({length:t}).map(la).join(""),ia="(prefers-color-scheme: dark)",ze="vue-dsfr-scheme",Ie="light",_e="dark",be="system",Je="data-fr-theme",Pe=t=>{const e=t??(localStorage.getItem(ze)||be);return[Ie,_e,be].includes(e)?e:be},xe=(t,e)=>(t=Pe(t),t===be?e!=null&&e.matches?_e:Ie:t),bc=t=>{if(typeof window>"u")return;const e={scheme:localStorage.getItem(ze)||be,dataThemeAttribute:Je,...t},n=window.matchMedia&&window.matchMedia(ia),i=ref(Pe(e.scheme));localStorage.setItem(ze,i.value);const s=ref(xe(i.value,n)),r=ref(i.value!==be);watchEffect(()=>{var C;(C=document.body.parentElement)==null||C.setAttribute(e.dataThemeAttribute||Je,s.value)}),n==null||n.addEventListener("change",C=>{r.value||(C.matches?s.value=_e:s.value=Ie)}),!r.value&&n!=null&&n.matches&&(s.value=_e);const o=C=>{if(i.value=Pe(C),localStorage.setItem(ze,i.value),[Ie,_e].includes(i.value)){s.value=i.value,r.value=!0;return}s.value=xe(i.value,n),r.value=!1},a=document.documentElement,d={subtree:!1,childList:!1,attributes:!0},_=new MutationObserver(C=>{for(const y of C)if(y.type==="attributes"&&y.attributeName==="data-fr-theme"){const v=y.target.getAttribute(y.attributeName);v!==i.value&&(console.log("mutation:",v,"<-",i.value),o(v))}});return _.observe(a,d),window.addEventListener("unload",()=>_.disconnect()),o(i.value),{setScheme:o,theme:computed(()=>s.value),scheme:computed(()=>i.value)}},ue=()=>{const t=ref(),e=ref(!1),n=ref(!1),i=()=>{if(!t.value)return;t.value.style.setProperty("--collapser","none");const s=t.value.offsetHeight;t.value.style.setProperty("--collapse",-s+"px"),t.value.style.setProperty("--collapser","")};return{collapse:t,collapsing:e,cssExpanded:n,doExpand:s=>{t.value&&(s===!0&&t.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,i(),window.requestAnimationFrame(()=>{n.value=s})}))},adjust:i,onTransitionEnd:s=>{e.value=!1,t.value&&s===!1&&t.value.style.removeProperty("--collapse-max-height")}}},Ma=["title","disabled","aria-disabled"],Ca={key:1},za=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(t,{expose:e}){const n=t,i=computed(()=>["sm","small"].includes(n.size)),s=computed(()=>["md","medium"].includes(n.size)),r=computed(()=>["lg","large"].includes(n.size)),o=ref(null);e({focus:()=>{var C;(C=o.value)==null||C.focus()}});const a=computed(()=>typeof n.icon=="string"&&n.icon.startsWith("fr-icon-")),d=computed(()=>n.iconOnly?1.25:.8325),_=computed(()=>typeof n.icon=="string"?{scale:d.value,name:n.icon}:{scale:d.value,...n.icon});return(C,y)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:o,class:normalizeClass({"fr-btn":!0,"fr-btn--secondary":C.secondary&&!C.tertiary,"fr-btn--tertiary":C.tertiary&&!C.secondary&&!C.noOutline,"fr-btn--tertiary-no-outline":C.tertiary&&!C.secondary&&C.noOutline,"fr-btn--sm":i.value,"fr-btn--md":s.value,"fr-btn--lg":r.value,"fr-btn--icon-right":!C.iconOnly&&a.value&&C.iconRight,"fr-btn--icon-left":!C.iconOnly&&a.value&&!C.iconRight,"inline-flex":!a.value,reverse:C.iconRight&&!a.value,"justify-center":!a.value&&C.iconOnly,[C.icon]:a.value}),title:C.iconOnly?C.label:void 0,disabled:C.disabled,"aria-disabled":C.disabled,style:normalizeStyle(!a.value&&C.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:y[0]||(y[0]=v=>C.onClick?C.onClick(v):()=>{})},[C.icon&&!a.value?(openBlock(),createBlock(unref(g),normalizeProps(mergeProps({key:0},_.value)),null,16)):createCommentVNode("",!0),C.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",Ca,[createTextVNode(toDisplayString(C.label)+" ",1),renderSlot(C.$slots,"default",{},void 0,!0)]))],14,Ma))}}),ne=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},Ae=ne(za,[["__scopeId","data-v-7fc52401"]]),tr=["innerHTML"],Ge=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(t){const e=t,n=computed(()=>e.logoText instanceof Array?e.logoText.join("<br>"):e.logoText);return(i,s)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":i.small&&!i.large,"fr-logo--lg":i.large&&!i.small}]),innerHTML:n.value},null,10,tr))}}),ar={class:"fr-footer__partners"},nr={key:0,class:"fr-footer__partners-title"},rr={class:"fr-footer__partners-logos"},lr={key:0,class:"fr-footer__partners-main"},sr=["href"],ir=["src","alt"],or={class:"fr-footer__partners-sub"},dr=["href"],ur=["src","alt"],yt=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(t){return(e,n)=>(openBlock(),createElementBlock("div",ar,[e.title?(openBlock(),createElementBlock("h4",nr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",rr,[e.mainPartner?(openBlock(),createElementBlock("div",lr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,ir)],8,sr)])):createCommentVNode("",!0),createBaseVNode("div",or,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(i,s)=>(openBlock(),createElementBlock("li",{key:s},[createBaseVNode("a",{class:"fr-footer__partners-link",href:i.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:i.logo,alt:i.name},null,8,ur)],8,dr)]))),128))])])])]))}}),tt=1,cr=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(t){const e=t,n=computed(()=>e.button?"button":i.value||s.value?"a":"RouterLink"),i=computed(()=>{var C;return(C=e.href)==null?void 0:C.startsWith("http")}),s=computed(()=>{var C;return(C=e.href)==null?void 0:C.startsWith("mailto")}),r=computed(()=>{if(!(!i.value&&!s.value))return e.href}),o=computed(()=>{if(!(i.value||s.value))return e.to}),a=computed(()=>o.value?{to:o.value}:{href:r.value}),d=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),_=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:tt,...e.iconAttrs??{}}:{scale:tt,...e.icon??{},...e.iconAttrs??{}});return(C,y)=>(openBlock(),createBlock(resolveDynamicComponent(n.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":d.value&&C.iconRight,"fr-btn--icon-left":d.value&&!C.iconRight,[String(C.icon)]:d.value}]},a.value,{target:C.target,onClick:withModifiers(C.onClick,["stop"])}),{default:withCtx(()=>{var v,E;return[!d.value&&(C.icon||(v=C.iconAttrs)!=null&&v.name)&&!C.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:0,class:"fr-mr-1w"},_.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(C.label)+" ",1),!d.value&&(C.icon||(E=C.iconAttrs)!=null&&E.name)&&C.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:1,class:"fr-ml-1w"},_.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),fr={id:"footer",class:"fr-footer",role:"contentinfo"},pr={key:0,class:"fr-footer__top"},hr={class:"fr-container"},vr={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},mr={class:"fr-container"},gr={class:"fr-footer__body"},br={class:"fr-footer__brand fr-enlarge-link"},yr=["src","alt"],kr={class:"fr-footer__content"},wr={class:"fr-footer__content-desc"},_r={class:"fr-footer__content-list"},$r=["href"],Dr={class:"fr-footer__bottom"},Mr={class:"fr-footer__bottom-list"},Cr={key:0,class:"fr-footer__bottom-copy"},zr=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:t=>[{label:`Accessibilité : ${t.a11yCompliance}`,to:t.a11yComplianceLink},{label:"Mentions légales",to:t.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:t.personalDataLink},{label:"Gestion des cookies",to:t.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"gouvernement.fr",href:"https://gouvernement.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention contraire, tous les textes de ce site sont sous"},licenceName:{default:"licence etalab-2.0"}},setup(t){const e=t,n=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),i=useSlots(),s=computed(()=>{var d;return(d=i["footer-link-lists"])==null?void 0:d.call(i).length}),r=computed(()=>{const d=e.licenceTo||e.licenceLinkProps.to;return d&&typeof d=="string"&&d.startsWith("http")}),o=computed(()=>r.value?"":e.licenceTo),a=computed(()=>r.value?e.licenceTo:"");return(d,_)=>{const C=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",fr,[s.value?(openBlock(),createElementBlock("div",pr,[createBaseVNode("div",hr,[createBaseVNode("div",vr,[renderSlot(d.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",mr,[createBaseVNode("div",gr,[createBaseVNode("div",br,[createVNode(C,{to:d.homeLink,title:"Retour à l’accueil"},{default:withCtx(()=>[createVNode(Ge,{"logo-text":d.logoText},null,8,["logo-text"])]),_:1},8,["to"]),d.operatorImgSrc?(openBlock(),createBlock(C,{key:0,class:"fr-footer__brand-link",to:d.operatorTo,title:d.operatorLinkText},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo fr-responsive-img",style:normalizeStyle([typeof d.operatorImgStyle=="string"?d.operatorImgStyle:"",{"margin-left":"0.5px",padding:"1rem",...typeof d.operatorImgStyle=="object"?d.operatorImgStyle:{},"max-width":"12.5rem"}]),src:d.operatorImgSrc,alt:d.operatorImgAlt},null,12,yr)]),_:1},8,["to","title"])):createCommentVNode("",!0)]),createBaseVNode("div",kr,[createBaseVNode("p",wr,[renderSlot(d.$slots,"description",{},()=>[createTextVNode(toDisplayString(d.descText),1)],!0)]),createBaseVNode("ul",_r,[(openBlock(!0),createElementBlock(Fragment,null,renderList(d.ecosystemLinks,(y,v)=>(openBlock(),createElementBlock("li",{key:v,class:"fr-footer__content-item"},[createBaseVNode("a",{class:"fr-footer__content-link",href:y.href,target:"_blank",rel:"noopener noreferrer"},toDisplayString(y.label),9,$r)]))),128))])])]),d.partners?(openBlock(),createBlock(yt,normalizeProps(mergeProps({key:0},d.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",Dr,[createBaseVNode("ul",Mr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(n.value,(y,v)=>(openBlock(),createElementBlock("li",{key:v,class:"fr-footer__bottom-item"},[createVNode(cr,normalizeProps(guardReactiveProps(y)),null,16)]))),128))]),d.licenceText?(openBlock(),createElementBlock("div",Cr,[createBaseVNode("p",null,[createTextVNode(toDisplayString(d.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(r.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:r.value?null:o.value,href:a.value,target:r.value?"_blank":void 0,rel:"noopener noreferrer"},d.licenceLinkProps),{default:withCtx(()=>[createTextVNode(toDisplayString(d.licenceName),1)]),_:1},16,["to","href","target"]))])])):createCommentVNode("",!0)])])])}}}),Ir=ne(zr,[["__scopeId","data-v-884531a5"]]),Fr=["for"],Pr={key:0,class:"required"},Nr={key:0,class:"fr-hint-text"},Xr=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>j("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(t,{expose:e}){const n=t,i=useAttrs(),s=ref(null),r=()=>{var _;return(_=s.value)==null?void 0:_.focus()},o=computed(()=>n.isTextarea?"textarea":"input"),a=computed(()=>n.isWithWrapper||i.type==="date"||!!n.wrapperClass),d=computed(()=>["fr-label",{invisible:!n.labelVisible},n.labelClass]);return e({focus:r}),(_,C)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(d.value),for:_.id},[renderSlot(_.$slots,"label",{},()=>[createTextVNode(toDisplayString(_.label)+" ",1),renderSlot(_.$slots,"required-tip",{},()=>["required"in _.$attrs&&_.$attrs.required!==!1?(openBlock(),createElementBlock("span",Pr,"*")):createCommentVNode("",!0)],!0)],!0),_.hint?(openBlock(),createElementBlock("span",Nr,toDisplayString(_.hint),1)):createCommentVNode("",!0)],10,Fr),a.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":_.isWithWrapper||_.$attrs.type==="date"},_.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(o.value),mergeProps({id:_.id},_.$attrs,{ref_key:"__input",ref:s,class:["fr-input",{"fr-input--error":_.isInvalid,"fr-input--valid":_.isValid}],value:_.modelValue,"aria-describedby":_.descriptionId||void 0,onInput:C[1]||(C[1]=y=>_.$emit("update:modelValue",y.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(o.value),mergeProps({key:0,id:_.id},_.$attrs,{ref_key:"__input",ref:s,class:["fr-input",{"fr-input--error":_.isInvalid,"fr-input--valid":_.isValid}],value:_.modelValue,"aria-describedby":_.descriptionId||void 0,onInput:C[0]||(C[0]=y=>_.$emit("update:modelValue",y.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),Ke=ne(Xr,[["__scopeId","data-v-0171a9ee"]]),Ne=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>j("search","input")},label:{default:""},labelVisible:{type:Boolean},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(t,{emit:e}){const n=e;return(i,s)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":i.large}]),role:"search"},[createVNode(Ke,{id:i.id,type:"search",placeholder:i.placeholder,"model-value":i.modelValue,"label-visible":i.labelVisible,label:i.label,disabled:i.disabled,"aria-disabled":i.disabled,"onUpdate:modelValue":s[0]||(s[0]=r=>n("update:modelValue",r)),onKeydown:s[1]||(s[1]=withKeys(r=>n("search",i.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label-visible","label","disabled","aria-disabled"]),createVNode(Ae,{title:"Rechercher",disabled:i.disabled,"aria-disabled":i.disabled,onClick:s[2]||(s[2]=r=>n("search",i.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(i.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),at=1,kt=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(t){const e=t,n=computed(()=>e.button?"button":s.value||r.value?"a":"RouterLink"),i=computed(()=>typeof e.path=="string"),s=computed(()=>{var y;return((y=e.href)==null?void 0:y.startsWith("http"))||i.value&&e.path.startsWith("http")}),r=computed(()=>{var y;return((y=e.href)==null?void 0:y.startsWith("mailto"))||i.value&&e.path.startsWith("mailto")}),o=computed(()=>{if(!(!s.value&&!r.value))return e.href!==void 0?e.href:e.path}),a=computed(()=>{if(!(s.value||r.value))return e.to||e.path}),d=computed(()=>a.value?{to:a.value}:{href:o.value}),_=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),C=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:at,...e.iconAttrs??{}}:{scale:at,...e.icon??{},...e.iconAttrs??{}});return(y,v)=>(openBlock(),createBlock(resolveDynamicComponent(n.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":_.value&&y.iconRight,"fr-btn--icon-left":_.value&&!y.iconRight,[String(y.icon)]:_.value}]},d.value,{target:y.target,onClick:withModifiers(y.onClick,["stop"])}),{default:withCtx(()=>{var E,S;return[!_.value&&(y.icon||(E=y.iconAttrs)!=null&&E.name)&&!y.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:0,class:"fr-mr-1w"},C.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(y.label)+" ",1),!_.value&&(y.icon||(S=y.iconAttrs)!=null&&S.name)&&y.iconRight?(openBlock(),createBlock(unref(g),mergeProps({key:1,class:"fr-ml-1w"},C.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Yr=["aria-label"],Or={class:"fr-btns-group"},Xe=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(t,{emit:e}){const n=e;return(i,s)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":i.navAriaLabel},[createBaseVNode("ul",Or,[(openBlock(!0),createElementBlock(Fragment,null,renderList(i.links,(r,o)=>(openBlock(),createElementBlock("li",{key:o},[createVNode(kt,mergeProps(r,{"on-click":a=>{var d;n("linkClick",a),(d=r.onClick)==null||d.call(r,a)}}),null,16,["on-click"])]))),128))])],8,Yr))}}),jr={role:"navigation",class:"fr-translate fr-nav"},qr={class:"fr-nav__item"},Qr=["aria-controls","aria-expanded"],Gr={class:"fr-hidden-lg"},Kr=["id"],Wr={class:"fr-menu__list"},Ur=["hreflang","lang","aria-current","href","onClick"],Ye=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>j("translate")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(t,{emit:e}){const{collapse:n,collapsing:i,cssExpanded:s,doExpand:r,onTransitionEnd:o}=ue(),a=t,d=ref(!1),_=e;function C(v){d.value=!1,_("select",v)}const y=computed(()=>a.languages.find(({codeIso:v})=>v===a.currentLanguage));return watch(d,(v,E)=>{v!==E&&r(v)}),(v,E)=>{var S,R;return openBlock(),createElementBlock("nav",jr,[createBaseVNode("div",qr,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":v.id,"aria-expanded":d.value,title:"Sélectionner une langue",type:"button",onClick:E[0]||(E[0]=withModifiers(x=>d.value=!d.value,["prevent","stop"]))},[createTextVNode(toDisplayString((S=y.value)==null?void 0:S.codeIso.toUpperCase()),1),createBaseVNode("span",Gr," - "+toDisplayString((R=y.value)==null?void 0:R.label),1)],8,Qr),createBaseVNode("div",{id:v.id,ref_key:"collapse",ref:n,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(s),"fr-collapsing":unref(i)}]),onTransitionend:E[1]||(E[1]=x=>unref(o)(d.value))},[createBaseVNode("ul",Wr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(v.languages,(x,T)=>(openBlock(),createElementBlock("li",{key:T},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:x.codeIso,lang:x.codeIso,"aria-current":v.currentLanguage===x.codeIso?!0:void 0,href:`#${x.codeIso}`,onClick:withModifiers(b=>C(x),["prevent","stop"])},toDisplayString(x.codeIso.toUpperCase()+" - "+x.label),9,Ur)]))),128))])],42,Kr)])])}}}),Zr={role:"banner",class:"fr-header"},Jr={class:"fr-header__body"},xr={class:"fr-container width-inherit"},el={class:"fr-header__body-row"},tl={class:"fr-header__brand fr-enlarge-link"},al={class:"fr-header__brand-top"},nl={class:"fr-header__logo"},rl={key:0,class:"fr-header__operator"},ll=["src","alt"],sl={key:1,class:"fr-header__navbar"},il=["data-fr-opened"],ol={key:0,class:"fr-header__service"},dl={class:"fr-header__service-title"},ul={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},cl={key:0,class:"fr-header__service-tagline"},fl={key:1,class:"fr-header__service"},pl=createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1),hl=[pl],vl={class:"fr-header__tools"},ml={key:0,class:"fr-header__tools-links"},gl={key:1,class:"fr-header__search fr-modal"},bl={class:"fr-container"},yl={class:"fr-header__menu-links"},kl={role:"navigation"},wl={key:1,class:"flex justify-center items-center"},_l={key:1,class:"fr-hidden fr-unhidden-lg"},$l=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showBeta:{type:Boolean}},emits:["update:modelValue","search","language-select"],setup(t,{emit:e}){const n=t,i=toRef(n,"languageSelector"),s=x=>{x.key==="Escape"&&d()};onMounted(()=>{document.addEventListener("keydown",s)}),onUnmounted(()=>{document.removeEventListener("keydown",s)});const r=ref(!1),o=ref(!1),a=ref(!1),d=()=>{var x;a.value=!1,r.value=!1,o.value=!1,(x=document.getElementById("button-menu"))==null||x.focus()},_=()=>{var x;a.value=!0,r.value=!0,o.value=!1,(x=document.getElementById("close-button"))==null||x.focus()},C=()=>{a.value=!0,r.value=!1,o.value=!0},y=d,v=useSlots(),E=computed(()=>{var x;return!!((x=v.operator)!=null&&x.call(v).length)||!!n.operatorImgSrc}),S=computed(()=>!!v.mainnav),R=e;return(x,T)=>{var b,M,N;const k=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",Zr,[createBaseVNode("div",Jr,[createBaseVNode("div",xr,[createBaseVNode("div",el,[createBaseVNode("div",tl,[createBaseVNode("div",al,[createBaseVNode("div",nl,[createVNode(Ge,{"logo-text":x.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),E.value?(openBlock(),createElementBlock("div",rl,[renderSlot(x.$slots,"operator",{},()=>[x.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:x.operatorImgSrc,alt:x.operatorImgAlt,style:normalizeStyle(x.operatorImgStyle)},null,12,ll)):createCommentVNode("",!0)])])):createCommentVNode("",!0),x.showSearch||S.value||(b=x.quickLinks)!=null&&b.length?(openBlock(),createElementBlock("div",sl,[x.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":"Recherche",title:"Recherche","data-fr-opened":o.value,onClick:T[0]||(T[0]=withModifiers(G=>C(),["prevent","stop"]))},null,8,il)):createCommentVNode("",!0),S.value||(M=x.quickLinks)!=null&&M.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":_,"aria-controls":"header-navigation","aria-haspopup":"menu","aria-label":"Menu",title:"Menu","data-testid":"open-menu-btn",onClick:T[1]||(T[1]=withModifiers(G=>_(),["prevent","stop"]))})):createCommentVNode("",!0)])):createCommentVNode("",!0)]),x.serviceTitle?(openBlock(),createElementBlock("div",ol,[createVNode(k,mergeProps({to:x.homeTo,title:`Accueil - ${x.serviceTitle}`},x.$attrs),{default:withCtx(()=>[createBaseVNode("p",dl,[createTextVNode(toDisplayString(x.serviceTitle)+" ",1),x.showBeta?(openBlock(),createElementBlock("span",ul," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),x.serviceDescription?(openBlock(),createElementBlock("p",cl,toDisplayString(x.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!x.serviceTitle&&x.showBeta?(openBlock(),createElementBlock("div",fl,hl)):createCommentVNode("",!0)]),createBaseVNode("div",vl,[(N=x.quickLinks)!=null&&N.length||i.value?(openBlock(),createElementBlock("div",ml,[r.value?createCommentVNode("",!0):(openBlock(),createBlock(Xe,{key:0,links:x.quickLinks,"nav-aria-label":x.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),i.value?(openBlock(),createBlock(Ye,mergeProps({key:1},i.value,{onSelect:T[2]||(T[2]=G=>R("language-select",G))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),x.showSearch?(openBlock(),createElementBlock("div",gl,[createVNode(Ne,{"searchbar-id":x.searchbarId,label:x.searchLabel,"model-value":x.modelValue,placeholder:x.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":T[3]||(T[3]=G=>R("update:modelValue",G)),onSearch:T[4]||(T[4]=G=>R("search",G))},null,8,["searchbar-id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),x.showSearch||S.value||x.quickLinks&&x.quickLinks.length||i.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":a.value}]),"aria-label":"Menu modal",role:"dialog","aria-modal":"true"},[createBaseVNode("div",bl,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:T[5]||(T[5]=withModifiers(G=>d(),["prevent","stop"]))}," Fermer "),createBaseVNode("div",yl,[i.value?(openBlock(),createBlock(Ye,mergeProps({key:0},i.value,{onSelect:T[6]||(T[6]=G=>i.value.currentLanguage=G.codeIso)}),null,16)):createCommentVNode("",!0),createBaseVNode("nav",kl,[r.value?(openBlock(),createBlock(Xe,{key:0,role:"navigation",links:x.quickLinks,"nav-aria-label":x.quickLinksAriaLabel,onLinkClick:unref(y)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0)])]),a.value?renderSlot(x.$slots,"mainnav",{key:0,hidemodal:d}):createCommentVNode("",!0),o.value?(openBlock(),createElementBlock("div",wl,[createVNode(Ne,{"searchbar-id":x.searchbarId,"model-value":x.modelValue,placeholder:x.placeholder,"onUpdate:modelValue":T[7]||(T[7]=G=>R("update:modelValue",G)),onSearch:T[8]||(T[8]=G=>R("search",G))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],2)):createCommentVNode("",!0),S.value&&!a.value?(openBlock(),createElementBlock("div",_l,[renderSlot(x.$slots,"mainnav",{hidemodal:d})])):createCommentVNode("",!0),renderSlot(x.$slots,"default")])])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var wt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Le=wt.join(","),_t=typeof Element>"u",me=_t?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Se=!_t&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},Te=function t(e,n){var i;n===void 0&&(n=!0);var s=e==null||(i=e.getAttribute)===null||i===void 0?void 0:i.call(e,"inert"),r=s===""||s==="true",o=r||n&&e&&t(e.parentNode);return o},Ll=function(t){var e,n=t==null||(e=t.getAttribute)===null||e===void 0?void 0:e.call(t,"contenteditable");return n===""||n==="true"},$t=function(t,e,n){if(Te(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(Le));return e&&me.call(t,Le)&&i.unshift(t),i=i.filter(n),i},Dt=function t(e,n,i){for(var s=[],r=Array.from(e);r.length;){var o=r.shift();if(!Te(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),d=a.length?a:o.children,_=t(d,!0,i);i.flatten?s.push.apply(s,_):s.push({scopeParent:o,candidates:_})}else{var C=me.call(o,Le);C&&i.filter(o)&&(n||!e.includes(o))&&s.push(o);var y=o.shadowRoot||typeof i.getShadowRoot=="function"&&i.getShadowRoot(o),v=!Te(y,!1)&&(!i.shadowRootFilter||i.shadowRootFilter(o));if(y&&v){var E=t(y===!0?o.children:y.children,!0,i);i.flatten?s.push.apply(s,E):s.push({scopeParent:o,candidates:E})}else r.unshift.apply(r,o.children)}}return s},Mt=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},he=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||Ll(t))&&!Mt(t)?0:t.tabIndex},Sl=function(t,e){var n=he(t);return n<0&&e&&!Mt(t)?0:n},Tl=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},Ct=function(t){return t.tagName==="INPUT"},El=function(t){return Ct(t)&&t.type==="hidden"},Al=function(t){var e=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(n){return n.tagName==="SUMMARY"});return e},Hl=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]},Vl=function(t){if(!t.name)return!0;var e=t.form||Se(t),n=function(r){return e.querySelectorAll('input[type="radio"][name="'+r+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=n(window.CSS.escape(t.name));else try{i=n(t.name)}catch(r){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",r.message),!1}var s=Hl(i,t.form);return!s||s===t},Bl=function(t){return Ct(t)&&t.type==="radio"},Rl=function(t){return Bl(t)&&!Vl(t)},Fl=function(t){var e,n=t&&Se(t),i=(e=n)===null||e===void 0?void 0:e.host,s=!1;if(n&&n!==t){var r,o,a;for(s=!!((r=i)!==null&&r!==void 0&&(o=r.ownerDocument)!==null&&o!==void 0&&o.contains(i)||t!=null&&(a=t.ownerDocument)!==null&&a!==void 0&&a.contains(t));!s&&i;){var d,_,C;n=Se(i),i=(d=n)===null||d===void 0?void 0:d.host,s=!!((_=i)!==null&&_!==void 0&&(C=_.ownerDocument)!==null&&C!==void 0&&C.contains(i))}}return s},nt=function(t){var e=t.getBoundingClientRect(),n=e.width,i=e.height;return n===0&&i===0},Pl=function(t,e){var n=e.displayCheck,i=e.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var s=me.call(t,"details>summary:first-of-type"),r=s?t.parentElement:t;if(me.call(r,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof i=="function"){for(var o=t;t;){var a=t.parentElement,d=Se(t);if(a&&!a.shadowRoot&&i(a)===!0)return nt(t);t.assignedSlot?t=t.assignedSlot:!a&&d!==t.ownerDocument?t=d.host:t=a}t=o}if(Fl(t))return!t.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return nt(t);return!1},Nl=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var n=0;n<e.children.length;n++){var i=e.children.item(n);if(i.tagName==="LEGEND")return me.call(e,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}e=e.parentElement}return!1},Ee=function(t,e){return!(e.disabled||Te(e)||El(e)||Pl(e,t)||Al(e)||Nl(e))},Oe=function(t,e){return!(Rl(e)||he(e)<0||!Ee(t,e))},Xl=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Yl=function t(e){var n=[],i=[];return e.forEach(function(s,r){var o=!!s.scopeParent,a=o?s.scopeParent:s,d=Sl(a,o),_=o?t(s.candidates):a;d===0?o?n.push.apply(n,_):n.push(a):i.push({documentOrder:r,tabIndex:d,item:s,isScope:o,content:_})}),i.sort(Tl).reduce(function(s,r){return r.isScope?s.push.apply(s,r.content):s.push(r.content),s},[]).concat(n)},Ol=function(t,e){e=e||{};var n;return e.getShadowRoot?n=Dt([t],e.includeContainer,{filter:Oe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Xl}):n=$t(t,e.includeContainer,Oe.bind(null,e)),Yl(n)},jl=function(t,e){e=e||{};var n;return e.getShadowRoot?n=Dt([t],e.includeContainer,{filter:Ee.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):n=$t(t,e.includeContainer,Ee.bind(null,e)),n},ge=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return me.call(t,Le)===!1?!1:Oe(e,t)},ql=wt.concat("iframe").join(","),Fe=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return me.call(t,ql)===!1?!1:Ee(e,t)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,i)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rt(Object(n),!0).forEach(function(i){Ql(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function Ql(t,e,n){return e=Kl(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gl(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Kl(t){var e=Gl(t,"string");return typeof e=="symbol"?e:String(e)}var st={activateTrap:function(t,e){if(t.length>0){var n=t[t.length-1];n!==e&&n.pause()}var i=t.indexOf(e);i===-1||t.splice(i,1),t.push(e)},deactivateTrap:function(t,e){var n=t.indexOf(e);n!==-1&&t.splice(n,1),t.length>0&&t[t.length-1].unpause()}},Wl=function(t){return t.tagName&&t.tagName.toLowerCase()==="input"&&typeof t.select=="function"},Ul=function(t){return(t==null?void 0:t.key)==="Escape"||(t==null?void 0:t.key)==="Esc"||(t==null?void 0:t.keyCode)===27},$e=function(t){return(t==null?void 0:t.key)==="Tab"||(t==null?void 0:t.keyCode)===9},Zl=function(t){return $e(t)&&!t.shiftKey},Jl=function(t){return $e(t)&&t.shiftKey},it=function(t){return setTimeout(t,0)},ot=function(t,e){var n=-1;return t.every(function(i,s){return e(i)?(n=s,!1):!0}),n},we=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return typeof t=="function"?t.apply(void 0,n):t},Ce=function(t){return t.target.shadowRoot&&typeof t.composedPath=="function"?t.composedPath()[0]:t.target},xl=[],es=function(t,e){var n=(e==null?void 0:e.document)||document,i=(e==null?void 0:e.trapStack)||xl,s=lt({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Zl,isKeyBackward:Jl},e),r={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,a=function(B,D,X){return B&&B[D]!==void 0?B[D]:s[X||D]},d=function(B,D){var X=typeof(D==null?void 0:D.composedPath)=="function"?D.composedPath():void 0;return r.containerGroups.findIndex(function(ce){var Me=ce.container,re=ce.tabbableNodes;return Me.contains(B)||(X==null?void 0:X.includes(Me))||re.find(function(ie){return ie===B})})},_=function(B){var D=s[B];if(typeof D=="function"){for(var X=arguments.length,ce=new Array(X>1?X-1:0),Me=1;Me<X;Me++)ce[Me-1]=arguments[Me];D=D.apply(void 0,ce)}if(D===!0&&(D=void 0),!D){if(D===void 0||D===!1)return D;throw new Error("`".concat(B,"` was specified but was not a node, or did not return a node"))}var re=D;if(typeof D=="string"&&(re=n.querySelector(D),!re))throw new Error("`".concat(B,"` as selector refers to no known node"));return re},C=function(){var B=_("initialFocus");if(B===!1)return!1;if(B===void 0||!Fe(B,s.tabbableOptions))if(d(n.activeElement)>=0)B=n.activeElement;else{var D=r.tabbableGroups[0],X=D&&D.firstTabbableNode;B=X||_("fallbackFocus")}if(!B)throw new Error("Your focus-trap needs to have at least one focusable element");return B},y=function(){if(r.containerGroups=r.containers.map(function(B){var D=Ol(B,s.tabbableOptions),X=jl(B,s.tabbableOptions),ce=D.length>0?D[0]:void 0,Me=D.length>0?D[D.length-1]:void 0,re=X.find(function(oe){return ge(oe)}),ie=X.slice().reverse().find(function(oe){return ge(oe)}),J=!!D.find(function(oe){return he(oe)>0});return{container:B,tabbableNodes:D,focusableNodes:X,posTabIndexesFound:J,firstTabbableNode:ce,lastTabbableNode:Me,firstDomTabbableNode:re,lastDomTabbableNode:ie,nextTabbableNode:function(oe){var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,je=D.indexOf(oe);return je<0?Be?X.slice(X.indexOf(oe)+1).find(function(qe){return ge(qe)}):X.slice(0,X.indexOf(oe)).reverse().find(function(qe){return ge(qe)}):D[je+(Be?1:-1)]}}}),r.tabbableGroups=r.containerGroups.filter(function(B){return B.tabbableNodes.length>0}),r.tabbableGroups.length<=0&&!_("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(r.containerGroups.find(function(B){return B.posTabIndexesFound})&&r.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},v=function B(D){var X=D.activeElement;if(X)return X.shadowRoot&&X.shadowRoot.activeElement!==null?B(X.shadowRoot):X},E=function B(D){if(D!==!1&&D!==v(document)){if(!D||!D.focus){B(C());return}D.focus({preventScroll:!!s.preventScroll}),r.mostRecentlyFocusedNode=D,Wl(D)&&D.select()}},S=function(B){var D=_("setReturnFocus",B);return D||(D===!1?!1:B)},R=function(B){var D=B.target,X=B.event,ce=B.isBackward,Me=ce===void 0?!1:ce;D=D||Ce(X),y();var re=null;if(r.tabbableGroups.length>0){var ie=d(D,X),J=ie>=0?r.containerGroups[ie]:void 0;if(ie<0)Me?re=r.tabbableGroups[r.tabbableGroups.length-1].lastTabbableNode:re=r.tabbableGroups[0].firstTabbableNode;else if(Me){var oe=ot(r.tabbableGroups,function(Ue){var We=Ue.firstTabbableNode;return D===We});if(oe<0&&(J.container===D||Fe(D,s.tabbableOptions)&&!ge(D,s.tabbableOptions)&&!J.nextTabbableNode(D,!1))&&(oe=ie),oe>=0){var Be=oe===0?r.tabbableGroups.length-1:oe-1,je=r.tabbableGroups[Be];re=he(D)>=0?je.lastTabbableNode:je.lastDomTabbableNode}else $e(X)||(re=J.nextTabbableNode(D,!1))}else{var qe=ot(r.tabbableGroups,function(Ue){var We=Ue.lastTabbableNode;return D===We});if(qe<0&&(J.container===D||Fe(D,s.tabbableOptions)&&!ge(D,s.tabbableOptions)&&!J.nextTabbableNode(D))&&(qe=ie),qe>=0){var ee=qe===r.tabbableGroups.length-1?0:qe+1,et=r.tabbableGroups[ee];re=he(D)>=0?et.firstTabbableNode:et.firstDomTabbableNode}else $e(X)||(re=J.nextTabbableNode(D))}}else re=_("fallbackFocus");return re},x=function(B){var D=Ce(B);if(!(d(D,B)>=0)){if(we(s.clickOutsideDeactivates,B)){o.deactivate({returnFocus:s.returnFocusOnDeactivate});return}we(s.allowOutsideClick,B)||B.preventDefault()}},T=function(B){var D=Ce(B),X=d(D,B)>=0;if(X||D instanceof Document)X&&(r.mostRecentlyFocusedNode=D);else{B.stopImmediatePropagation();var ce,Me=!0;if(r.mostRecentlyFocusedNode)if(he(r.mostRecentlyFocusedNode)>0){var re=d(r.mostRecentlyFocusedNode),ie=r.containerGroups[re].tabbableNodes;if(ie.length>0){var J=ie.findIndex(function(oe){return oe===r.mostRecentlyFocusedNode});J>=0&&(s.isKeyForward(r.recentNavEvent)?J+1<ie.length&&(ce=ie[J+1],Me=!1):J-1>=0&&(ce=ie[J-1],Me=!1))}}else r.containerGroups.some(function(oe){return oe.tabbableNodes.some(function(Be){return he(Be)>0})})||(Me=!1);else Me=!1;Me&&(ce=R({target:r.mostRecentlyFocusedNode,isBackward:s.isKeyBackward(r.recentNavEvent)})),E(ce||r.mostRecentlyFocusedNode||C())}r.recentNavEvent=void 0},b=function(B){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;r.recentNavEvent=B;var X=R({event:B,isBackward:D});X&&($e(B)&&B.preventDefault(),E(X))},M=function(B){if(Ul(B)&&we(s.escapeDeactivates,B)!==!1){B.preventDefault(),o.deactivate();return}(s.isKeyForward(B)||s.isKeyBackward(B))&&b(B,s.isKeyBackward(B))},N=function(B){var D=Ce(B);d(D,B)>=0||we(s.clickOutsideDeactivates,B)||we(s.allowOutsideClick,B)||(B.preventDefault(),B.stopImmediatePropagation())},k=function(){if(r.active)return st.activateTrap(i,o),r.delayInitialFocusTimer=s.delayInitialFocus?it(function(){E(C())}):E(C()),n.addEventListener("focusin",T,!0),n.addEventListener("mousedown",x,{capture:!0,passive:!1}),n.addEventListener("touchstart",x,{capture:!0,passive:!1}),n.addEventListener("click",N,{capture:!0,passive:!1}),n.addEventListener("keydown",M,{capture:!0,passive:!1}),o},G=function(){if(r.active)return n.removeEventListener("focusin",T,!0),n.removeEventListener("mousedown",x,!0),n.removeEventListener("touchstart",x,!0),n.removeEventListener("click",N,!0),n.removeEventListener("keydown",M,!0),o},Y=function(B){var D=B.some(function(X){var ce=Array.from(X.removedNodes);return ce.some(function(Me){return Me===r.mostRecentlyFocusedNode})});D&&E(C())},q=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(Y):void 0,le=function(){q&&(q.disconnect(),r.active&&!r.paused&&r.containers.map(function(B){q.observe(B,{subtree:!0,childList:!0})}))};return o={get active(){return r.active},get paused(){return r.paused},activate:function(B){if(r.active)return this;var D=a(B,"onActivate"),X=a(B,"onPostActivate"),ce=a(B,"checkCanFocusTrap");ce||y(),r.active=!0,r.paused=!1,r.nodeFocusedBeforeActivation=n.activeElement,D==null||D();var Me=function(){ce&&y(),k(),le(),X==null||X()};return ce?(ce(r.containers.concat()).then(Me,Me),this):(Me(),this)},deactivate:function(B){if(!r.active)return this;var D=lt({onDeactivate:s.onDeactivate,onPostDeactivate:s.onPostDeactivate,checkCanReturnFocus:s.checkCanReturnFocus},B);clearTimeout(r.delayInitialFocusTimer),r.delayInitialFocusTimer=void 0,G(),r.active=!1,r.paused=!1,le(),st.deactivateTrap(i,o);var X=a(D,"onDeactivate"),ce=a(D,"onPostDeactivate"),Me=a(D,"checkCanReturnFocus"),re=a(D,"returnFocus","returnFocusOnDeactivate");X==null||X();var ie=function(){it(function(){re&&E(S(r.nodeFocusedBeforeActivation)),ce==null||ce()})};return re&&Me?(Me(S(r.nodeFocusedBeforeActivation)).then(ie,ie),this):(ie(),this)},pause:function(B){if(r.paused||!r.active)return this;var D=a(B,"onPause"),X=a(B,"onPostPause");return r.paused=!0,D==null||D(),G(),le(),X==null||X(),this},unpause:function(B){if(!r.paused||!r.active)return this;var D=a(B,"onUnpause"),X=a(B,"onPostUnpause");return r.paused=!1,D==null||D(),y(),k(),le(),X==null||X(),this},updateContainerElements:function(B){var D=[].concat(B).filter(Boolean);return r.containers=D.map(function(X){return typeof X=="string"?n.querySelector(X):X}),r.active&&y(),le(),this}},o.updateContainerElements(t),o};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const ts={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object};Object.assign({active:{type:Boolean,default:!0}},ts);const ms=["id","aria-current"],gs=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>j("nav","item")},active:{type:Boolean}},setup(t){return(e,n)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,ms))}}),zt=ne(gs,[["__scopeId","data-v-5909c19f"]]),bs=["href"],ut=2,Ve=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>j("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggle-id"],setup(t){const e=t,n=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),i=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),s=computed(()=>i.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ut,name:e.icon}:{scale:ut,...e.icon||{}});return(r,o)=>{const a=resolveComponent("RouterLink");return n.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:r.to,onClick:o[0]||(o[0]=d=>r.$emit("toggle-id",r.id))},toDisplayString(r.text),9,bs)):(openBlock(),createBlock(a,{key:1,class:normalizeClass(["fr-nav__link",{[String(r.icon)]:i.value}]),"data-testid":"nav-router-link",to:r.to,onClick:o[1]||(o[1]=d=>r.$emit("toggle-id",r.id))},{default:withCtx(()=>[s.value?(openBlock(),createBlock(unref(g),normalizeProps(mergeProps({key:0},s.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(r.text),1)]),_:1},8,["to","class"]))}}}),ys=["id","aria-current"],It=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>j("menu","item")},active:{type:Boolean}},setup(t){return(e,n)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,ys))}}),ks=["aria-expanded","aria-current","aria-controls"],ws=["id"],_s={ref:"menuList",class:"fr-menu__list"},Lt=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>j("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggle-id"],setup(t){const{collapse:e,collapsing:n,cssExpanded:i,doExpand:s,onTransitionEnd:r}=ue(),o=t,a=computed(()=>o.id===o.expandedId);return watch(a,(d,_)=>{d!==_&&s(d)}),onMounted(()=>{a.value&&s(!0)}),(d,_)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":d.active||void 0,"aria-controls":d.id,onClick:_[0]||(_[0]=C=>d.$emit("toggle-id",d.id))},[createBaseVNode("span",null,toDisplayString(d.title),1)],8,ks),createBaseVNode("div",{id:d.id,ref_key:"collapse",ref:e,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(i),"fr-collapsing":unref(n)}]),"data-testid":"navigation-menu",onTransitionend:_[2]||(_[2]=C=>unref(r)(a.value))},[createBaseVNode("ul",_s,[renderSlot(d.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.links,(C,y)=>(openBlock(),createBlock(It,{key:y},{default:withCtx(()=>[createVNode(Ve,mergeProps(C,{onToggleId:_[1]||(_[1]=v=>d.$emit("toggle-id",d.expandedId))}),null,16)]),_:2},1024))),128))],512)],42,ws)],64))}}),$s={class:"fr-col-12 fr-col-lg-3"},Ds={class:"fr-mega-menu__category"},Ms={class:"fr-mega-menu__list"},St=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(t){return(e,n)=>(openBlock(),createElementBlock("div",$s,[createBaseVNode("h5",Ds,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:n[0]||(n[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Ms,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(i,s)=>(openBlock(),createElementBlock("li",{key:s,class:"fr-nav__link"},[createVNode(Ve,normalizeProps(guardReactiveProps(i)),null,16)]))),128))])]))}}),Cs=["aria-expanded","aria-current","aria-controls"],zs=["id"],Is={class:"fr-container fr-container--fluid fr-container-lg"},Ls={ref:"megaMenuList",class:"fr-grid-row fr-grid-row-lg--gutters"},Ss={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Ts={class:"fr-mega-menu__leader"},Es={class:"fr-h4 fr-mb-2v"},As={class:"fr-hidden fr-displayed-lg"},Hs=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>j("menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggle-id"],setup(t){const e=t,{collapse:n,collapsing:i,cssExpanded:s,doExpand:r,onTransitionEnd:o}=ue(),a=computed(()=>e.id===e.expandedId);return watch(a,(d,_)=>{d!==_&&r(d)}),onMounted(()=>{a.value&&r(!0)}),(d,_)=>{const C=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":d.active||void 0,"aria-controls":d.id,onClick:_[0]||(_[0]=y=>d.$emit("toggle-id",d.id))},toDisplayString(d.title),9,Cs),createBaseVNode("div",{id:d.id,ref_key:"collapse",ref:n,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(s),"fr-collapsing":unref(i)}]),tabindex:"-1",onTransitionend:_[2]||(_[2]=y=>unref(o)(a.value))},[createBaseVNode("div",Is,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:_[1]||(_[1]=y=>d.$emit("toggle-id",d.id))}," Fermer "),createBaseVNode("div",Ls,[createBaseVNode("div",Ss,[createBaseVNode("div",Ts,[createBaseVNode("h4",Es,toDisplayString(d.title),1),createBaseVNode("p",As,[createTextVNode(toDisplayString(d.description)+" ",1),renderSlot(d.$slots,"description",{},void 0,!0)]),createVNode(C,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:d.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(d.link.text),1)]),_:1},8,["to"])])]),renderSlot(d.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(d.menus,(y,v)=>(openBlock(),createBlock(St,mergeProps({key:v},y),null,16))),128))],512)])],42,zs)],64)}}}),Tt=ne(Hs,[["__scopeId","data-v-3ee9b678"]]),Vs=["id","aria-label"],Bs={class:"fr-nav__list"},Rs=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>j("menu")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(t){const e=t,n=ref(void 0),i=a=>{if(a===n.value){n.value=void 0;return}n.value=a},s=a=>{o(a.target)},r=a=>{a.key==="Escape"&&i(n.value)},o=a=>{if(a!==document.getElementById(e.id)){if(!(a!=null&&a.parentNode)){i(n.value);return}o(a.parentNode)}};return onMounted(()=>{document.addEventListener("click",s),document.addEventListener("keydown",r)}),onUnmounted(()=>{document.removeEventListener("click",s),document.removeEventListener("keydown",r)}),(a,d)=>(openBlock(),createElementBlock("nav",{id:a.id,class:"fr-nav",role:"navigation","aria-label":a.label},[createBaseVNode("ul",Bs,[renderSlot(a.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(a.navItems,(_,C)=>(openBlock(),createBlock(zt,{key:C},{default:withCtx(()=>[_.to&&_.text?(openBlock(),createBlock(Ve,mergeProps({key:0},_,{"expanded-id":n.value,onToggleId:d[0]||(d[0]=y=>i(y))}),null,16,["expanded-id"])):_.title&&_.links?(openBlock(),createBlock(Lt,mergeProps({key:1},_,{"expanded-id":n.value,onToggleId:d[1]||(d[1]=y=>i(y))}),null,16,["expanded-id"])):_.title&&_.menus?(openBlock(),createBlock(Tt,mergeProps({key:2},_,{"expanded-id":n.value,onToggleId:d[2]||(d[2]=y=>i(y))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1024))),128))])],8,Vs))}});/*!
  * vue-router v4.3.2
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isESModule(t){return t.__esModule||t[Symbol.toStringTag]==="Module"}const assign=Object.assign;function applyToParams(t,e){const n={};for(const i in e){const s=e[i];n[i]=isArray(s)?s.map(t):t(s)}return n}const noop=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(t){return encodeURI(""+t).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(t){return commonEncode(t).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(t){return commonEncode(t).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(t){return encodeQueryValue(t).replace(EQUAL_RE,"%3D")}function encodePath(t){return commonEncode(t).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(t){return t==null?"":encodePath(t).replace(SLASH_RE,"%2F")}function decode$1(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=t=>t.replace(TRAILING_SLASH_RE,"");function parseURL(t,e,n="/"){let i,s={},r="",o="";const a=e.indexOf("#");let d=e.indexOf("?");return a<d&&a>=0&&(d=-1),d>-1&&(i=e.slice(0,d),r=e.slice(d+1,a>-1?a:e.length),s=t(r)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=resolveRelativePath(i??e,n),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:decode$1(o)}}function stringifyURL(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function stripBase(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function isSameRouteLocation(t,e,n){const i=e.matched.length-1,s=n.matched.length-1;return i>-1&&i===s&&isSameRouteRecord(e.matched[i],n.matched[s])&&isSameRouteLocationParams(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function isSameRouteRecord(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function isSameRouteLocationParams(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!isSameRouteLocationParamsValue(t[n],e[n]))return!1;return!0}function isSameRouteLocationParamsValue(t,e){return isArray(t)?isEquivalentArray(t,e):isArray(e)?isEquivalentArray(e,t):t===e}function isEquivalentArray(t,e){return isArray(e)?t.length===e.length&&t.every((n,i)=>n===e[i]):t.length===1&&t[0]===e}function resolveRelativePath(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=n.length-1,o,a;for(o=0;o<i.length;o++)if(a=i[o],a!==".")if(a==="..")r>1&&r--;else break;return n.slice(0,r).join("/")+"/"+i.slice(o).join("/")}var NavigationType;(function(t){t.pop="pop",t.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(t){t.back="back",t.forward="forward",t.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(t){if(!t)if(isBrowser){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),removeTrailingSlash(t)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(t,e){return t.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(t){let e;if("el"in t){const n=t.el,i=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=getElementPosition(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(t,e){return(history.state?history.state.position-e:-1)+t}const scrollPositions=new Map;function saveScrollPosition(t,e){scrollPositions.set(t,e)}function getSavedScrollPosition(t){const e=scrollPositions.get(t);return scrollPositions.delete(t),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(t,e){const{pathname:n,search:i,hash:s}=e,r=t.indexOf("#");if(r>-1){let a=s.includes(t.slice(r))?t.slice(r).length:1,d=s.slice(a);return d[0]!=="/"&&(d="/"+d),stripBase(d,"")}return stripBase(n,t)+i+s}function useHistoryListeners(t,e,n,i){let s=[],r=[],o=null;const a=({state:v})=>{const E=createCurrentLocation(t,location),S=n.value,R=e.value;let x=0;if(v){if(n.value=E,e.value=v,o&&o===S){o=null;return}x=R?v.position-R.position:0}else i(E);s.forEach(T=>{T(n.value,S,{delta:x,type:NavigationType.pop,direction:x?x>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function d(){o=n.value}function _(v){s.push(v);const E=()=>{const S=s.indexOf(v);S>-1&&s.splice(S,1)};return r.push(E),E}function C(){const{history:v}=window;v.state&&v.replaceState(assign({},v.state,{scroll:computeScrollPosition()}),"")}function y(){for(const v of r)v();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",C)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",C,{passive:!0}),{pauseListeners:d,listen:_,destroy:y}}function buildState(t,e,n,i=!1,s=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:s?computeScrollPosition():null}}function useHistoryStateNavigation(t){const{history:e,location:n}=window,i={value:createCurrentLocation(t,n)},s={value:e.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function r(d,_,C){const y=t.indexOf("#"),v=y>-1?(n.host&&document.querySelector("base")?t:t.slice(y))+d:createBaseLocation()+t+d;try{e[C?"replaceState":"pushState"](_,"",v),s.value=_}catch(E){console.error(E),n[C?"replace":"assign"](v)}}function o(d,_){const C=assign({},e.state,buildState(s.value.back,d,s.value.forward,!0),_,{position:s.value.position});r(d,C,!0),i.value=d}function a(d,_){const C=assign({},s.value,e.state,{forward:d,scroll:computeScrollPosition()});r(C.current,C,!0);const y=assign({},buildState(i.value,d,null),{position:C.position+1},_);r(d,y,!1),i.value=d}return{location:i,state:s,push:a,replace:o}}function createWebHistory(t){t=normalizeBase(t);const e=useHistoryStateNavigation(t),n=useHistoryListeners(t,e.state,e.location,e.replace);function i(r,o=!0){o||n.pauseListeners(),history.go(r)}const s=assign({location:"",base:t,go:i,createHref:createHref.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function isRouteLocation(t){return typeof t=="string"||t&&typeof t=="object"}function isRouteName(t){return typeof t=="string"||typeof t=="symbol"}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(t,e){return assign(new Error,{type:t,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(t,e){return t instanceof Error&&NavigationFailureSymbol in t&&(e==null||!!(t.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(t,e){const n=assign({},BASE_PATH_PARSER_OPTIONS,e),i=[];let s=n.start?"^":"";const r=[];for(const _ of t){const C=_.length?[]:[90];n.strict&&!_.length&&(s+="/");for(let y=0;y<_.length;y++){const v=_[y];let E=40+(n.sensitive?.25:0);if(v.type===0)y||(s+="/"),s+=v.value.replace(REGEX_CHARS_RE,"\\$&"),E+=40;else if(v.type===1){const{value:S,repeatable:R,optional:x,regexp:T}=v;r.push({name:S,repeatable:R,optional:x});const b=T||BASE_PARAM_PATTERN;if(b!==BASE_PARAM_PATTERN){E+=10;try{new RegExp(`(${b})`)}catch(N){throw new Error(`Invalid custom RegExp for param "${S}" (${b}): `+N.message)}}let M=R?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;y||(M=x&&_.length<2?`(?:/${M})`:"/"+M),x&&(M+="?"),s+=M,E+=20,x&&(E+=-8),R&&(E+=-20),b===".*"&&(E+=-50)}C.push(E)}i.push(C)}if(n.strict&&n.end){const _=i.length-1;i[_][i[_].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&(s+="(?:/|$)");const o=new RegExp(s,n.sensitive?"":"i");function a(_){const C=_.match(o),y={};if(!C)return null;for(let v=1;v<C.length;v++){const E=C[v]||"",S=r[v-1];y[S.name]=E&&S.repeatable?E.split("/"):E}return y}function d(_){let C="",y=!1;for(const v of t){(!y||!C.endsWith("/"))&&(C+="/"),y=!1;for(const E of v)if(E.type===0)C+=E.value;else if(E.type===1){const{value:S,repeatable:R,optional:x}=E,T=S in _?_[S]:"";if(isArray(T)&&!R)throw new Error(`Provided param "${S}" is an array but it is not repeatable (* or + modifiers)`);const b=isArray(T)?T.join("/"):T;if(!b)if(x)v.length<2&&(C.endsWith("/")?C=C.slice(0,-1):y=!0);else throw new Error(`Missing required param "${S}"`);C+=b}}return C||"/"}return{re:o,score:i,keys:r,parse:a,stringify:d}}function compareScoreArray(t,e){let n=0;for(;n<t.length&&n<e.length;){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?t.length===1&&t[0]===80?-1:1:t.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(t,e){let n=0;const i=t.score,s=e.score;for(;n<i.length&&n<s.length;){const r=compareScoreArray(i[n],s[n]);if(r)return r;n++}if(Math.abs(s.length-i.length)===1){if(isLastScoreNegative(i))return 1;if(isLastScoreNegative(s))return-1}return s.length-i.length}function isLastScoreNegative(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(t){if(!t)return[[]];if(t==="/")return[[ROOT_TOKEN]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(E){throw new Error(`ERR (${n})/"${_}": ${E}`)}let n=0,i=n;const s=[];let r;function o(){r&&s.push(r),r=[]}let a=0,d,_="",C="";function y(){_&&(n===0?r.push({type:0,value:_}):n===1||n===2||n===3?(r.length>1&&(d==="*"||d==="+")&&e(`A repeatable param (${_}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:_,regexp:C,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):e("Invalid state to consume buffer"),_="")}function v(){_+=d}for(;a<t.length;){if(d=t[a++],d==="\\"&&n!==2){i=n,n=4;continue}switch(n){case 0:d==="/"?(_&&y(),o()):d===":"?(y(),n=1):v();break;case 4:v(),n=i;break;case 1:d==="("?n=2:VALID_PARAM_RE.test(d)?v():(y(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&a--);break;case 2:d===")"?C[C.length-1]=="\\"?C=C.slice(0,-1)+d:n=3:C+=d;break;case 3:y(),n=0,d!=="*"&&d!=="?"&&d!=="+"&&a--,C="";break;default:e("Unknown state");break}}return n===2&&e(`Unfinished custom RegExp for param "${_}"`),y(),o(),s}function createRouteRecordMatcher(t,e,n){const i=tokensToParser(tokenizePath(t.path),n),s=assign(i,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function createRouterMatcher(t,e){const n=[],i=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function s(C){return i.get(C)}function r(C,y,v){const E=!v,S=normalizeRouteRecord(C);S.aliasOf=v&&v.record;const R=mergeOptions(e,C),x=[S];if("alias"in C){const M=typeof C.alias=="string"?[C.alias]:C.alias;for(const N of M)x.push(assign({},S,{components:v?v.record.components:S.components,path:N,aliasOf:v?v.record:S}))}let T,b;for(const M of x){const{path:N}=M;if(y&&N[0]!=="/"){const k=y.record.path,G=k[k.length-1]==="/"?"":"/";M.path=y.record.path+(N&&G+N)}if(T=createRouteRecordMatcher(M,y,R),v?v.alias.push(T):(b=b||T,b!==T&&b.alias.push(T),E&&C.name&&!isAliasRecord(T)&&o(C.name)),S.children){const k=S.children;for(let G=0;G<k.length;G++)r(k[G],T,v&&v.children[G])}v=v||T,(T.record.components&&Object.keys(T.record.components).length||T.record.name||T.record.redirect)&&d(T)}return b?()=>{o(b)}:noop}function o(C){if(isRouteName(C)){const y=i.get(C);y&&(i.delete(C),n.splice(n.indexOf(y),1),y.children.forEach(o),y.alias.forEach(o))}else{const y=n.indexOf(C);y>-1&&(n.splice(y,1),C.record.name&&i.delete(C.record.name),C.children.forEach(o),C.alias.forEach(o))}}function a(){return n}function d(C){let y=0;for(;y<n.length&&comparePathParserScore(C,n[y])>=0&&(C.record.path!==n[y].record.path||!isRecordChildOf(C,n[y]));)y++;n.splice(y,0,C),C.record.name&&!isAliasRecord(C)&&i.set(C.record.name,C)}function _(C,y){let v,E={},S,R;if("name"in C&&C.name){if(v=i.get(C.name),!v)throw createRouterError(1,{location:C});R=v.record.name,E=assign(paramsFromLocation(y.params,v.keys.filter(b=>!b.optional).concat(v.parent?v.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),C.params&&paramsFromLocation(C.params,v.keys.map(b=>b.name))),S=v.stringify(E)}else if(C.path!=null)S=C.path,v=n.find(b=>b.re.test(S)),v&&(E=v.parse(S),R=v.record.name);else{if(v=y.name?i.get(y.name):n.find(b=>b.re.test(y.path)),!v)throw createRouterError(1,{location:C,currentLocation:y});R=v.record.name,E=assign({},y.params,C.params),S=v.stringify(E)}const x=[];let T=v;for(;T;)x.unshift(T.record),T=T.parent;return{name:R,path:S,params:E,matched:x,meta:mergeMetaFields(x)}}return t.forEach(C=>r(C)),{addRoute:r,resolve:_,removeRoute:o,getRoutes:a,getRecordMatcher:s}}function paramsFromLocation(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function normalizeRouteRecord(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:normalizeRecordProps(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function normalizeRecordProps(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]=typeof n=="object"?n[i]:n;return e}function isAliasRecord(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function mergeMetaFields(t){return t.reduce((e,n)=>assign(e,n.meta),{})}function mergeOptions(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function isRecordChildOf(t,e){return e.children.some(n=>n===t||isRecordChildOf(t,n))}function parseQuery(t){const e={};if(t===""||t==="?")return e;const i=(t[0]==="?"?t.slice(1):t).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(PLUS_RE," "),o=r.indexOf("="),a=decode$1(o<0?r:r.slice(0,o)),d=o<0?null:decode$1(r.slice(o+1));if(a in e){let _=e[a];isArray(_)||(_=e[a]=[_]),_.push(d)}else e[a]=d}return e}function stringifyQuery(t){let e="";for(let n in t){const i=t[n];if(n=encodeQueryKey(n),i==null){i!==void 0&&(e+=(e.length?"&":"")+n);continue}(isArray(i)?i.map(r=>r&&encodeQueryValue(r)):[i&&encodeQueryValue(i)]).forEach(r=>{r!==void 0&&(e+=(e.length?"&":"")+n,r!=null&&(e+="="+r))})}return e}function normalizeQuery(t){const e={};for(const n in t){const i=t[n];i!==void 0&&(e[n]=isArray(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let t=[];function e(i){return t.push(i),()=>{const s=t.indexOf(i);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function guardToPromiseFn(t,e,n,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((a,d)=>{const _=v=>{v===!1?d(createRouterError(4,{from:n,to:e})):v instanceof Error?d(v):isRouteLocation(v)?d(createRouterError(2,{from:e,to:v})):(o&&i.enterCallbacks[s]===o&&typeof v=="function"&&o.push(v),a())},C=r(()=>t.call(i&&i.instances[s],e,n,_));let y=Promise.resolve(C);t.length<3&&(y=y.then(_)),y.catch(v=>d(v))})}function extractComponentsGuards(t,e,n,i,s=r=>r()){const r=[];for(const o of t)for(const a in o.components){let d=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(isRouteComponent(d)){const C=(d.__vccOpts||d)[e];C&&r.push(guardToPromiseFn(C,n,i,o,a,s))}else{let _=d();r.push(()=>_.then(C=>{if(!C)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const y=isESModule(C)?C.default:C;o.components[a]=y;const E=(y.__vccOpts||y)[e];return E&&guardToPromiseFn(E,n,i,o,a,s)()}))}}return r}function isRouteComponent(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function useLink(t){const e=inject(routerKey),n=inject(routeLocationKey),i=computed(()=>{const d=unref(t.to);return e.resolve(d)}),s=computed(()=>{const{matched:d}=i.value,{length:_}=d,C=d[_-1],y=n.matched;if(!C||!y.length)return-1;const v=y.findIndex(isSameRouteRecord.bind(null,C));if(v>-1)return v;const E=getOriginalPath(d[_-2]);return _>1&&getOriginalPath(C)===E&&y[y.length-1].path!==E?y.findIndex(isSameRouteRecord.bind(null,d[_-2])):v}),r=computed(()=>s.value>-1&&includesParams(n.params,i.value.params)),o=computed(()=>s.value>-1&&s.value===n.matched.length-1&&isSameRouteLocationParams(n.params,i.value.params));function a(d={}){return guardEvent(d)?e[unref(t.replace)?"replace":"push"](unref(t.to)).catch(noop):Promise.resolve()}return{route:i,href:computed(()=>i.value.href),isActive:r,isExactActive:o,navigate:a}}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(t,{slots:e}){const n=reactive(useLink(t)),{options:i}=inject(routerKey),s=computed(()=>({[getLinkClass(t.activeClass,i.linkActiveClass,"router-link-active")]:n.isActive,[getLinkClass(t.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const r=e.default&&e.default(n);return t.custom?r:h$1("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},r)}}}),RouterLink=RouterLinkImpl;function guardEvent(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function includesParams(t,e){for(const n in e){const i=e[n],s=t[n];if(typeof i=="string"){if(i!==s)return!1}else if(!isArray(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function getOriginalPath(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const getLinkClass=(t,e,n)=>t??e??n,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const i=inject(routerViewLocationKey),s=computed(()=>t.route||i.value),r=inject(viewDepthKey,0),o=computed(()=>{let _=unref(r);const{matched:C}=s.value;let y;for(;(y=C[_])&&!y.components;)_++;return _}),a=computed(()=>s.value.matched[o.value]);provide(viewDepthKey,computed(()=>o.value+1)),provide(matchedRouteKey,a),provide(routerViewLocationKey,s);const d=ref();return watch(()=>[d.value,a.value,t.name],([_,C,y],[v,E,S])=>{C&&(C.instances[y]=_,E&&E!==C&&_&&_===v&&(C.leaveGuards.size||(C.leaveGuards=E.leaveGuards),C.updateGuards.size||(C.updateGuards=E.updateGuards))),_&&C&&(!E||!isSameRouteRecord(C,E)||!v)&&(C.enterCallbacks[y]||[]).forEach(R=>R(_))},{flush:"post"}),()=>{const _=s.value,C=t.name,y=a.value,v=y&&y.components[C];if(!v)return normalizeSlot(n.default,{Component:v,route:_});const E=y.props[C],S=E?E===!0?_.params:typeof E=="function"?E(_):E:null,x=h$1(v,assign({},S,e,{onVnodeUnmounted:T=>{T.component.isUnmounted&&(y.instances[C]=null)},ref:d}));return normalizeSlot(n.default,{Component:x,route:_})||x}}});function normalizeSlot(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const RouterView=RouterViewImpl;function createRouter(t){const e=createRouterMatcher(t.routes,t),n=t.parseQuery||parseQuery,i=t.stringifyQuery||stringifyQuery,s=t.history,r=useCallbacks(),o=useCallbacks(),a=useCallbacks(),d=shallowRef(START_LOCATION_NORMALIZED);let _=START_LOCATION_NORMALIZED;isBrowser&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const C=applyToParams.bind(null,H=>""+H),y=applyToParams.bind(null,encodeParam),v=applyToParams.bind(null,decode$1);function E(H,ye){let fe,ke;return isRouteName(H)?(fe=e.getRecordMatcher(H),ke=ye):ke=H,e.addRoute(ke,fe)}function S(H){const ye=e.getRecordMatcher(H);ye&&e.removeRoute(ye)}function R(){return e.getRoutes().map(H=>H.record)}function x(H){return!!e.getRecordMatcher(H)}function T(H,ye){if(ye=assign({},ye||d.value),typeof H=="string"){const L=parseURL(n,H,ye.path),U=e.resolve({path:L.path},ye),$=s.createHref(L.fullPath);return assign(L,U,{params:v(U.params),hash:decode$1(L.hash),redirectedFrom:void 0,href:$})}let fe;if(H.path!=null)fe=assign({},H,{path:parseURL(n,H.path,ye.path).path});else{const L=assign({},H.params);for(const U in L)L[U]==null&&delete L[U];fe=assign({},H,{params:y(L)}),ye.params=y(ye.params)}const ke=e.resolve(fe,ye),Qe=H.hash||"";ke.params=C(v(ke.params));const ct=stringifyURL(i,assign({},H,{hash:encodeHash(Qe),path:ke.path})),P=s.createHref(ct);return assign({fullPath:ct,hash:Qe,query:i===stringifyQuery?normalizeQuery(H.query):H.query||{}},ke,{redirectedFrom:void 0,href:P})}function b(H){return typeof H=="string"?parseURL(n,H,d.value.path):assign({},H)}function M(H,ye){if(_!==H)return createRouterError(8,{from:ye,to:H})}function N(H){return Y(H)}function k(H){return N(assign(b(H),{replace:!0}))}function G(H){const ye=H.matched[H.matched.length-1];if(ye&&ye.redirect){const{redirect:fe}=ye;let ke=typeof fe=="function"?fe(H):fe;return typeof ke=="string"&&(ke=ke.includes("?")||ke.includes("#")?ke=b(ke):{path:ke},ke.params={}),assign({query:H.query,hash:H.hash,params:ke.path!=null?{}:H.params},ke)}}function Y(H,ye){const fe=_=T(H),ke=d.value,Qe=H.state,ct=H.force,P=H.replace===!0,L=G(fe);if(L)return Y(assign(b(L),{state:typeof L=="object"?assign({},Qe,L.state):Qe,force:ct,replace:P}),ye||fe);const U=fe;U.redirectedFrom=ye;let $;return!ct&&isSameRouteLocation(i,ke,fe)&&($=createRouterError(16,{to:U,from:ke}),qe(ke,ke,!0,!1)),($?Promise.resolve($):B(U,ke)).catch(K=>isNavigationFailure(K)?isNavigationFailure(K,2)?K:je(K):oe(K,U,ke)).then(K=>{if(K){if(isNavigationFailure(K,2))return Y(assign({replace:P},b(K.to),{state:typeof K.to=="object"?assign({},Qe,K.to.state):Qe,force:ct}),ye||U)}else K=X(U,ke,!0,P,Qe);return D(U,ke,K),K})}function q(H,ye){const fe=M(H,ye);return fe?Promise.reject(fe):Promise.resolve()}function le(H){const ye=Ue.values().next().value;return ye&&typeof ye.runWithContext=="function"?ye.runWithContext(H):H()}function B(H,ye){let fe;const[ke,Qe,ct]=extractChangingRecords(H,ye);fe=extractComponentsGuards(ke.reverse(),"beforeRouteLeave",H,ye);for(const L of ke)L.leaveGuards.forEach(U=>{fe.push(guardToPromiseFn(U,H,ye))});const P=q.bind(null,H,ye);return fe.push(P),He(fe).then(()=>{fe=[];for(const L of r.list())fe.push(guardToPromiseFn(L,H,ye));return fe.push(P),He(fe)}).then(()=>{fe=extractComponentsGuards(Qe,"beforeRouteUpdate",H,ye);for(const L of Qe)L.updateGuards.forEach(U=>{fe.push(guardToPromiseFn(U,H,ye))});return fe.push(P),He(fe)}).then(()=>{fe=[];for(const L of ct)if(L.beforeEnter)if(isArray(L.beforeEnter))for(const U of L.beforeEnter)fe.push(guardToPromiseFn(U,H,ye));else fe.push(guardToPromiseFn(L.beforeEnter,H,ye));return fe.push(P),He(fe)}).then(()=>(H.matched.forEach(L=>L.enterCallbacks={}),fe=extractComponentsGuards(ct,"beforeRouteEnter",H,ye,le),fe.push(P),He(fe))).then(()=>{fe=[];for(const L of o.list())fe.push(guardToPromiseFn(L,H,ye));return fe.push(P),He(fe)}).catch(L=>isNavigationFailure(L,8)?L:Promise.reject(L))}function D(H,ye,fe){a.list().forEach(ke=>le(()=>ke(H,ye,fe)))}function X(H,ye,fe,ke,Qe){const ct=M(H,ye);if(ct)return ct;const P=ye===START_LOCATION_NORMALIZED,L=isBrowser?history.state:{};fe&&(ke||P?s.replace(H.fullPath,assign({scroll:P&&L&&L.scroll},Qe)):s.push(H.fullPath,Qe)),d.value=H,qe(H,ye,fe,P),je()}let ce;function Me(){ce||(ce=s.listen((H,ye,fe)=>{if(!We.listening)return;const ke=T(H),Qe=G(ke);if(Qe){Y(assign(Qe,{replace:!0}),ke).catch(noop);return}_=ke;const ct=d.value;isBrowser&&saveScrollPosition(getScrollKey(ct.fullPath,fe.delta),computeScrollPosition()),B(ke,ct).catch(P=>isNavigationFailure(P,12)?P:isNavigationFailure(P,2)?(Y(P.to,ke).then(L=>{isNavigationFailure(L,20)&&!fe.delta&&fe.type===NavigationType.pop&&s.go(-1,!1)}).catch(noop),Promise.reject()):(fe.delta&&s.go(-fe.delta,!1),oe(P,ke,ct))).then(P=>{P=P||X(ke,ct,!1),P&&(fe.delta&&!isNavigationFailure(P,8)?s.go(-fe.delta,!1):fe.type===NavigationType.pop&&isNavigationFailure(P,20)&&s.go(-1,!1)),D(ke,ct,P)}).catch(noop)}))}let re=useCallbacks(),ie=useCallbacks(),J;function oe(H,ye,fe){je(H);const ke=ie.list();return ke.length?ke.forEach(Qe=>Qe(H,ye,fe)):console.error(H),Promise.reject(H)}function Be(){return J&&d.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((H,ye)=>{re.add([H,ye])})}function je(H){return J||(J=!H,Me(),re.list().forEach(([ye,fe])=>H?fe(H):ye()),re.reset()),H}function qe(H,ye,fe,ke){const{scrollBehavior:Qe}=t;if(!isBrowser||!Qe)return Promise.resolve();const ct=!fe&&getSavedScrollPosition(getScrollKey(H.fullPath,0))||(ke||!fe)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Qe(H,ye,ct)).then(P=>P&&scrollToPosition(P)).catch(P=>oe(P,H,ye))}const ee=H=>s.go(H);let et;const Ue=new Set,We={currentRoute:d,listening:!0,addRoute:E,removeRoute:S,hasRoute:x,getRoutes:R,resolve:T,options:t,push:N,replace:k,go:ee,back:()=>ee(-1),forward:()=>ee(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:ie.add,isReady:Be,install(H){const ye=this;H.component("RouterLink",RouterLink),H.component("RouterView",RouterView),H.config.globalProperties.$router=ye,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(d)}),isBrowser&&!et&&d.value===START_LOCATION_NORMALIZED&&(et=!0,N(s.location).catch(Qe=>{}));const fe={};for(const Qe in START_LOCATION_NORMALIZED)Object.defineProperty(fe,Qe,{get:()=>d.value[Qe],enumerable:!0});H.provide(routerKey,ye),H.provide(routeLocationKey,shallowReactive(fe)),H.provide(routerViewLocationKey,d);const ke=H.unmount;Ue.add(H),H.unmount=function(){Ue.delete(H),Ue.size<1&&(_=START_LOCATION_NORMALIZED,ce&&ce(),ce=null,d.value=START_LOCATION_NORMALIZED,et=!1,J=!1),ke()}}};function He(H){return H.reduce((ye,fe)=>ye.then(()=>le(fe)),Promise.resolve())}return We}function extractChangingRecords(t,e){const n=[],i=[],s=[],r=Math.max(e.matched.length,t.matched.length);for(let o=0;o<r;o++){const a=e.matched[o];a&&(t.matched.find(_=>isSameRouteRecord(_,a))?i.push(a):n.push(a));const d=t.matched[o];d&&(e.matched.find(_=>isSameRouteRecord(_,d))||s.push(d))}return[n,i,s]}function useRoute(){return inject(routeLocationKey)}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAABaCAYAAAA/xl1SAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA7NSURBVHgB7Z1pcFXlGcf/d8vNchOSkH0nYQuETZSlCFJErSiyI5uKW1vbb+2M/dJppx860w+dznTaL86oBZVNkFUFFBREQShbICwJYUlIQvb1brlrn+cNYaia3Bu45557kvfnHAPJ4dybc/73ed5nOc/RnTlzxp+VlQWJJNzU1dXBmJKSgoyMDEgk4cblckEPiURFpAAlqiIFKFEVKUCJqkgBSlRFClCiKlKAElWRApSoihSgRFWkACWqIgUoURUpQImqSAFKVEUKUKIqUoASVZEClKiKFKBEVYwYorg9HnR2dKLLZoPNboPL5YbH44Xf74PBoIfJaILZbIbFEofEYcMQFxsLpSm7cgVWqw2PTJqEqCgThgJDRoB2ux3Xb1Xhdm0dbtfUoLm5BW6fFz6PD37+z++Hz+e7t79er4dep4PeYICO/h4XF4u8nBwU5uehsKAAyclJCDWnTp9D5c2buHb9BpYufF685mBHMQF2dnXhvQ830YV39LtfLFmWt15bj+hoM0KNw+HEpatXUVp2CbV36tHd3S1EpiNh8fZD7v8eC9LL211Ruto70NrWLo5lMhmRnpqKSRNKMH7sGAxLSEBI0PW8h8vlFeh27cS6lcvpvERDaVra2vCvd94jq2/ocx83eYc3XlqNnOxshBLFBEiXWLg5u6N/Afr8PdYnlLS0tuH0ufM4eeYMup3d4KP3iost24PSewy329NjSWn76ugxFI8ejZnTH0NWRjpCAb/HG2St3/9oM15Z/SJZwjgoCV8rh8MOt7FvOXjoWvp8ob1OzKBywQ4S+7ET3+Ns6QWywNYewbC1Q+jpFaPD6cSZ0lKcLyvDpJLx+MX8ebCEQDB8/Jq6O+RFNuP1l9eGZQ2qBoMiCma3yuumdzZ8gGPHv0cXLeR/ysUqBb8WvwcWfunFSwgVfNz6xkZ8tG27cP+DEc0LkK3e4SNHsXHrx2hsahYuXU3MIY5eWYRVt2vwyd5P0UVWfbChaQGy+PYd+AJHjp+A/25woSZsBWMUcJX8e92sqsLGLVvRTqmjwYRm14C89tq+ey8qyPVigEaPhcKbxWJBIkWwnOszR0VR/s9w9+deOJ0u2pxo6+hAp7VLfN+gN/R7XA6mLAqt1ViEdfUN+Ojj7Vi7YhmSEhMxGNCsAHfu+wxXKq4NKKpl0XEub1TRCNqKkEwXkZPNfAxOPt9vQdmVeyja5dSN1WrFdbJAFdcqcaOq+l4q50fHp38TE6Nc2kSIkNJJGzZtxapli5E5CEaqaE6AfPE59XHpSnlQ4mOrxPuNKirEvDmzkZaagiiTKaC75iQ0VyN4i4+3IDMzAzMenYrm1lacPH2G0jwX4PV6fpQ7ZEErCb9eU0uLWBOuWrYUKcOToWU0twa8VV2NYydPIZjlHos1KzMTr65ZLdxWbnaWcLUPulY0Up4sIy0NixY8i9/95lcoKR4r8mO9CAHS8ZWm1x3/Z9NmNFCUrGU0JcAuqq7sP/QV3C5XwH25gjFx/Di8smoFigoLhHhCSVJSIlmgJVi1fCmiyepx8G0gSxsVBgEyLEIOSD6g6L+hsQlaRVMCPHXmnPjkB2PBSqhEtmLxC+Q+46EU7NonU/KZqxUJ8XH31pPhpI1KhBs2bxEpKC2iGQFyl8ips+dEuqU/2O3m5+ZixZJFIbd6PwV/GPJyc/Dm+peRkxX+oIBfv6OzCx9s2YY79fXQGpoRYCmVurqs1oDWj5sb5s+dE5a12P1wRL3ouQVQAz4n3FCw+7P9ostHS2hGgBcvXQkoPp+f1n3jijEiPw/hht8bByhqwa6fmyO2fLIT9Q0N0AqaEKDVZsOtmpqA+5mjzJgyaYLqFRG14N/7TkMjVUy2iRqyFtCEAK9cLQ+qo6WoIB9ZD5Gc9fu98Pgc6PZ0ic3ltdH3OM2ibn15IPSuCbft3C2S1pFOxCeiObcWTMXDS+UzTjYHG3j4SGwdjlu0laPFVo42exkc7iq4fU7Rls/odJRW0UcjypiOxJhxSI4bi2ExI5EQXQizUbno+mFhEXJqZuvOXVi+aKGo/kQqES9ATvTyJzoQXq+PEs2Bu3Wt3bWoav0Ct1r3oMNeAaenUVhXnY67WPoS+SXUth8UdtBsGI646DSkWR5HfvKzSLFMCZsY+cPIneN8/0qgJl4WYXNLq6iXczoqUkUY8QJ0ud0iAR2I+LhYysVZ+vw5u9TzNf/AjebtcLob7wqOS27BlM64TmwWQnX7rGi3W8liluNa01YkxRShKHUdCkiMcebQdET3BYtuNNWwE4cl4ASVA7lW3R8iOm5to8BkFyXkVyKdgqRIWx9H/BqQTzJ3vvQHX5h4S7y4gagvfLSWq2zaTBav5Z74HgYdTPS6LrTar+DUrbdx4MoyXL7zPq0hnVCS2JhoPPXzuaIuHUzSmwXXSR6EA5Nb1bcRaUS+AKng7/F6A+7HN+8Y+rkgMaYkTCv4G0z60LtLFnSX8zq+JyEeKn8VjV3noWTgwm1j85+Yg3lzHg96zcvLmH37D6CishKRhAYE6A2qy5kdS6DdilIWYkzGetpZCXHohTuv7/gaR6+tF66eAx2lMJlMmD1zBp58YnZQbrWnvb8JO/d9jqsU1EUKES9AfR+3UP4QXiv6ApTp9DojHsn5PSZmvQ1AqbWQATZXE47f+AMu1v0TSlpCtn7sip97+qmg9hfumNbT2/fsxU3R16h+einiBcjuxmgwBNyvy9oVlKs26M2YkPVLTM39M/05iuThgxJ4fC6crf4rrQs3Krou5O6bmdMexYKnngxqmgKL0OnsFp3V5deuhfyW2IGiAQEaAzZ59iZfnd3BXWiTIRYTst/E3FEbkBI3WTER6nTROF39J9xu+xJKJ7N/Nn0a5s1+nAKT4Cw7i3Dv/oOUY62AmkS8AHkKQYLFEnA/0Sk8wJak3KQnMHf0u5ic80cKUobfrXqEFl4Hltb8nVI3N6Ak/PvPmjEdi59bAFPQgUmnaGC4UHYp7G1kvUS8ALl9PpiePnbVlTdvDdilxJuzMTn7LTxTvAvFmb9GfPQIYRFDIUY+hkFvosR1PqWIlG3VZ0R/4oQSrFyySAQpwSSrrTY7jn53XDUBRnwimhfamelpqLxxo99ghH9WXVOL9o6OAd8xxiW3xNgizCj4Czqdr6Oh8yRVS/ZRia6UAorann0ouNDp+j9dLDg/vBTsGJAQMwJp8bMwOnUtfZ0C5YKe/4c/iOPGjhHDjT49eAA2W/+jUfhdcQCnFpq4KWlC8Vh8/e13AV3LnYZ6Wlhfx4zHpuJBSYjOE1tR6mLYXS1U8ShFq60SzbbzJMbrcHsdVHd2wE+1Z56qpdcbYaD0i9EYi7iofKST6NJJcAnRoxBtGga1mDi+WGQQdn/2ecBEvppoQoBZWZlIThxGKQRbvzcj8RSY/549i7GjqFz1kPfN6im5bDFniC036RlwEMHVFJfHTiK0C/Hx9zi1YzREi8DGcF+Fhe9J4cFMsTExUIuScWMpgIvCjj37REtbJKKJdixen7BbCZQO7E22fnvyFEKPToiSrVp8dCZZuCzaskmg6TDpLHA5PaL4X1F5HYePfoN3N36Iw0e+gdqMLByBZS88LzrE1U65/BSauS942iNTUHb5Kmx2e8B9z18sQ152DiaWjIMS3K6txecHD7GZhM/rg8fjRrfLTakNB7m7nhmEfKmTk0I/xHKg8Idy9MgirF6xFHso4uUhR5HUkKCZlvyM9HT6NBcErHYwPBRzF619eMaeEp/67m4XblZXo/p2DWrq6oTVbWtvF+Jj2GJHWk/2qMJCLHh6PoYnJ0WUJdTUbZmPTpkSdE7Q5XKJruDLVyuCEu1QYNyYMXhx6RIxHSJSRKgpAfLNRnNnzwpaULzw5q7gL786IgYNSYAcCuhWkQjN4mZ6WQseEGzZJk+YgPy8nKBPHov16PETYnglW0O35+ESzGJ2tDf0FZNwkkF5VW5QjYtVL0LvRXOzYXj61IpFL4hxGMHCwuXJATzG4t/vvItDXx+lnGGDCGgCWVMWnLO7WwyH5Bl9PI/w4OEjqlUOQkUBeZM1K1cglkSopiXU5Hi24cnJYjzZlh07KYsfvDXiEWw83erwN8fw5ZGjSBk+nCLVRPEckCTKM8bHxcHIJSxfj+hsNivt34ZOq1UMAbJR2YorDbogW8QinRF5uVi/ZhU+prVyE6WQ1PidNDsfcPTIkZTfWogdez8VAcdATp54BghtXLbjjfGLaf24m2Du6UNk7j9uOEZ9hJvszEwsI4/Ca+X29o6wi1DTfqRkXDFeWb0SKWQRH9aN8InnViZu6+dtsFi5YMjLycbr69YgLSX80bHmh5SPyM/H6uVLUUDuJJLSLf77/q8FeFmzjgKT1DCLcFA8piEzIx2v0Sf42flPivYtNRfVvRNZ2ZqMpOSvlkihJPX6tavEtK9wncNBs6jh9dmcWTNRMr4YR459J6ZpcYCiD4MbFc+Z8/sQZYwSKSJ+2OCYkYViUpfWSKKAbMWihdi2aw9qausUX4YoKEC/mOUXTJojlPCYtCXPL8DPpj8mZjlfKLt8rx0pVCfz/vdsNkeLTp3xxWOo0jBalAwfFF+A8yV+HgbLxO74ZXLH73+4WaSrlEw56aqqqvx5eaEfZ8YjNfji2x39Nw/wTTVTJ0+694iEUGN3OEUza3nldVTSZicx9s51DhRo9ApNfKXd+BGuRqMBltg4sXDPp/M2Ij9XXLBQiJtvl2xu6Xu+H7+b7MwM8bTOcMB50o2bt4qxbyz+377xmnDPoaKa6umKCTASYeFxQppHl/HXFsoJtra1weZwUHXD2/P4BfQ8D4Rb2vk5IkmJCUhI6MkTsqVLS00VT8ccKhEy50M3bduB6toavPnSOuTkhO5pmUNOgP3RU2Lz3k3H6IeMwIKh99z05k9DBQtwyD4x/Yew4AZjojkUKHluBkUaRqJdpAAlqiIFKFEVKUCJqkgBSlRFClCiKlKAElWRApSoihSgRFWkACWqIgUoURUpQImqSAFKVEUKUKIqUoASVZEClKiKFKBEVaQAJaoiBShRFWNzc7O4NVIiCTesvf8BRszs4ygq3yAAAAAASUVORK5CYII=",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-PG_cYzD-.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-kWtoxYnD.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png",serviceTitle="Carte.gouv.fr",serviceDescription="Portail Cartographique",a11yCompliance="partiellement conforme",legalLink="/mentions-legales",personalDataLink="/donnees-personnelles",cookiesLink="/cookies",a11yComplianceLink="/a11y-conformite",descText="Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink="/",_sfc_main$b=defineComponent({__name:"App",setup(t){bc();const e=["RÉPUBLIQUE","FRANÇAISE"],n=[{label:serviceDescription,to:"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Accueil",to:"/accueil",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",icon:"ri-arrow-right-line",iconRight:!0},{label:"Se Connecter",to:"/login",icon:"fa-user-circle"}],i=ref(""),s=[{label:"Before",to:"/before"}],r=[{label:"After",to:"/after"},{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings"}],o=void 0,a=void 0,d=void 0,_=void 0,C=[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"gouvernement.fr",href:"https://gouvernement.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],y={title:"Nos partenaires",mainPartner:{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},subPartners:[{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},v=useRoute(),E=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation Géoplateforme","Questions fréquanetes","Nous écrire"].includes(v.name)},links:[{href:"",text:"Documentation Géoplateforme"},{href:"",text:"Questions fréquanetes"},{href:"",text:"Nous écrire"}]},{to:{href:""},text:"Actualités"},{to:{href:""},text:"A propos"}];return(S,R)=>{const x=Rs,T=$l,b=resolveComponent("router-view"),M=Ir;return openBlock(),createElementBlock(Fragment,null,[createVNode(T,{modelValue:unref(i),"onUpdate:modelValue":R[0]||(R[0]=N=>isRef(i)?i.value=N:null),"service-title":serviceTitle,"service-description":serviceDescription,"logo-text":e,"quick-links":n,"show-search":""},{default:withCtx(()=>[createVNode(x,{"nav-items":E})]),_:1},8,["modelValue"]),createBaseVNode("div",null,[createVNode(b)]),createVNode(M,{"before-mandatory-links":s,"after-mandatory-links":r,"a11y-compliance":a11yCompliance,"logo-text":e,"legal-link":legalLink,"personal-data-link":personalDataLink,"cookies-link":cookiesLink,"a11y-compliance-link":a11yComplianceLink,"desc-text":descText,"home-link":homeLink,partners:y,"licence-text":unref(o),"licence-to":unref(a),"licence-name":unref(d),"licence-link-props":unref(_),"ecosystem-links":C},null,8,["licence-text","licence-to","licence-name","licence-link-props"])],64)}}}),EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function binarySearch(t,e,n){let i,s;n=n||ascending;let r=0,o=t.length,a=!1;for(;r<o;)i=r+(o-r>>1),s=+n(t[i],e),s<0?r=i+1:(o=i,a=!s);return a?r:~r}function ascending(t,e){return t>e?1:t<e?-1:0}function linearFindNearest(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let s=1;s<i;++s){const r=t[s];if(r===e)return s;if(r<e)return n(e,t[s-1],r)>0?s-1:s}return i-1}if(n>0){for(let s=1;s<i;++s)if(t[s]<e)return s-1;return i-1}if(n<0){for(let s=1;s<i;++s)if(t[s]<=e)return s;return i-1}for(let s=1;s<i;++s){if(t[s]==e)return s;if(t[s]<e)return t[s-1]-e<e-t[s]?s-1:s}return i-1}function reverseSubArray(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function extend$3(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let s=0;s<i;s++)t[t.length]=n[s]}function equals$2(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function isSorted(t,e,n){const i=e||ascending;return t.every(function(s,r){if(r===0)return!0;const o=i(t[r-1],s);return!(o>0||o===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(t){let e=!1,n,i,s;return function(){const r=Array.prototype.slice.call(arguments);return(!e||this!==s||!equals$2(r,i))&&(e=!0,s=this,i=r,n=t.apply(this,arguments)),n}}function clear$1(t){for(const e in t)delete t[e]}function isEmpty$1(t){let e;for(e in t)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;const i=this.listeners_||(this.listeners_={}),s=i[e]||(i[e]=[]);s.includes(n)||s.push(n)}dispatchEvent(e){const n=typeof e=="string",i=n?e:e.type,s=this.listeners_&&this.listeners_[i];if(!s)return;const r=n?new BaseEvent(e):e;r.target||(r.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let d;for(let _=0,C=s.length;_<C;++_)if("handleEvent"in s[_]?d=s[_].handleEvent(r):d=s[_].call(this,r),d===!1||r.propagationStopped){d=!1;break}if(--o[i]===0){let _=a[i];for(delete a[i];_--;)this.removeEventListener(i,VOID);delete o[i]}return d}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;const i=this.listeners_[e];if(!i)return;const s=i.indexOf(n);s!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[s]=VOID,++this.pendingRemovals_[e]):(i.splice(s,1),i.length===0&&delete this.listeners_[e]))}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(t){return t.ol_uid||(t.ol_uid=String(++uidCounter_))}function easeIn(t){return Math.pow(t,3)}function easeOut(t){return 1-easeIn(1-t)}function inAndOut(t){return 3*t*t-2*t*t*t}function linear(t){return t}class Tile extends Target{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?n=e:e.getState()==TileState.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;const s=n-i+1e3/60;return s>=this.transition_?1:easeIn(s/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,PASSIVE_EVENT_LISTENERS=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function createCanvasContext2D(t,e,n,i){let s;return n&&n.length?s=n.shift():WORKER_OFFSCREEN_CANVAS?s=new OffscreenCanvas(t||300,e||300):s=document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",i)}function releaseCanvas(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function outerWidth(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function outerHeight(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function replaceNode(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function removeNode(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function removeChildren(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function replaceChildren(t,e){const n=t.childNodes;for(let i=0;;++i){const s=n[i],r=e[i];if(!s&&!r)break;if(s!==r){if(!s){t.appendChild(r);continue}if(!r){t.removeChild(s),--i;continue}t.insertBefore(r,s)}}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function listen(t,e,n,i,s){if(i&&i!==t&&(n=n.bind(i)),s){const o=n;n=function(){t.removeEventListener(e,n),o.apply(this,arguments)}}const r={target:t,type:e,listener:n};return t.addEventListener(e,n),r}function listenOnce(t,e,n,i){return listen(t,e,n,i,!0)}function unlistenByKey(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),clear$1(t))}function listenImage(t,e,n){const i=t;let s=!0,r=!1,o=!1;const a=[listenOnce(i,EventType.LOAD,function(){o=!0,r||e()})];return i.src&&IMAGE_DECODE?(r=!0,i.decode().then(function(){s&&e()}).catch(function(d){s&&(o?e():n())})):a.push(listenOnce(i,EventType.ERROR,n)),function(){s=!1,a.forEach(unlistenByKey)}}function load(t,e){return new Promise((n,i)=>{function s(){o(),n(t)}function r(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",s),t.removeEventListener("error",r)}t.addEventListener("load",s),t.addEventListener("error",r)})}function decodeFallback(t,e){return e&&(t.src=e),t.src&&IMAGE_DECODE?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(s=>t.complete&&t.width?n(t):i(s))):load(t)}class ImageTile extends Tile{constructor(e,n,i,s,r,o){super(e,n,o),this.crossOrigin_=s,this.src_=i,this.key=i,this.image_=new Image,s!==null&&(this.image_.crossOrigin=s),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const t=createCanvasContext2D(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}const ERROR_THRESHOLD=.5,Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(t){const e=createEmpty();for(let n=0,i=t.length;n<i;++n)extendCoordinate(e,t[n]);return e}function _boundingExtentXYs(t,e,n){const i=Math.min.apply(null,t),s=Math.min.apply(null,e),r=Math.max.apply(null,t),o=Math.max.apply(null,e);return createOrUpdate$2(i,s,r,o,n)}function buffer(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function clone(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function closestSquaredDistanceXY(t,e,n){let i,s;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?s=t[1]-n:t[3]<n?s=n-t[3]:s=0,i*i+s*s}function containsCoordinate(t,e){return containsXY(t,e[0],e[1])}function containsExtent(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function containsXY(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function coordinateRelationship(t,e){const n=t[0],i=t[1],s=t[2],r=t[3],o=e[0],a=e[1];let d=Relationship.UNKNOWN;return o<n?d=d|Relationship.LEFT:o>s&&(d=d|Relationship.RIGHT),a<i?d=d|Relationship.BELOW:a>r&&(d=d|Relationship.ABOVE),d===Relationship.UNKNOWN&&(d=Relationship.INTERSECTING),d}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(t,e,n,i,s){return s?(s[0]=t,s[1]=e,s[2]=n,s[3]=i,s):[t,e,n,i]}function createOrUpdateEmpty(t){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,t)}function createOrUpdateFromCoordinate(t,e){const n=t[0],i=t[1];return createOrUpdate$2(n,i,n,i,e)}function createOrUpdateFromFlatCoordinates(t,e,n,i,s){const r=createOrUpdateEmpty(s);return extendFlatCoordinates(r,t,e,n,i)}function equals$1(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function extend$2(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function extendCoordinate(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function extendFlatCoordinates(t,e,n,i,s){for(;n<i;n+=s)extendXY(t,e[n],e[n+1]);return t}function extendXY(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function forEachCorner(t,e){let n;return n=e(getBottomLeft(t)),n||(n=e(getBottomRight(t)),n)||(n=e(getTopRight(t)),n)||(n=e(getTopLeft(t)),n)?n:!1}function getArea(t){let e=0;return isEmpty(t)||(e=getWidth(t)*getHeight(t)),e}function getBottomLeft(t){return[t[0],t[1]]}function getBottomRight(t){return[t[2],t[1]]}function getCenter(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function getCorner(t,e){let n;if(e==="bottom-left")n=getBottomLeft(t);else if(e==="bottom-right")n=getBottomRight(t);else if(e==="top-left")n=getTopLeft(t);else if(e==="top-right")n=getTopRight(t);else throw new Error("Invalid corner");return n}function getForViewAndSize(t,e,n,i,s){const[r,o,a,d,_,C,y,v]=getRotatedViewport(t,e,n,i);return createOrUpdate$2(Math.min(r,a,_,y),Math.min(o,d,C,v),Math.max(r,a,_,y),Math.max(o,d,C,v),s)}function getRotatedViewport(t,e,n,i){const s=e*i[0]/2,r=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),d=s*o,_=s*a,C=r*o,y=r*a,v=t[0],E=t[1];return[v-d+y,E-_-C,v-d-y,E-_+C,v+d-y,E+_+C,v+d+y,E+_-C,v-d+y,E-_-C]}function getHeight(t){return t[3]-t[1]}function getIntersection(t,e,n){const i=createEmpty();return intersects$1(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):createOrUpdateEmpty(i),i}function getTopLeft(t){return[t[0],t[3]]}function getTopRight(t){return[t[2],t[3]]}function getWidth(t){return t[2]-t[0]}function intersects$1(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function isEmpty(t){return t[2]<t[0]||t[3]<t[1]}function returnOrUpdate(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function scaleFromCenter(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function intersectsSegment(t,e,n){let i=!1;const s=coordinateRelationship(t,e),r=coordinateRelationship(t,n);if(s===Relationship.INTERSECTING||r===Relationship.INTERSECTING)i=!0;else{const o=t[0],a=t[1],d=t[2],_=t[3],C=e[0],y=e[1],v=n[0],E=n[1],S=(E-y)/(v-C);let R,x;r&Relationship.ABOVE&&!(s&Relationship.ABOVE)&&(R=v-(E-_)/S,i=R>=o&&R<=d),!i&&r&Relationship.RIGHT&&!(s&Relationship.RIGHT)&&(x=E-(v-d)*S,i=x>=a&&x<=_),!i&&r&Relationship.BELOW&&!(s&Relationship.BELOW)&&(R=v-(E-a)/S,i=R>=o&&R<=d),!i&&r&Relationship.LEFT&&!(s&Relationship.LEFT)&&(x=E-(v-o)*S,i=x>=a&&x<=_)}return i}function applyTransform(t,e,n,i){if(isEmpty(t))return createOrUpdateEmpty(n);let s=[];s=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]],e(s,s,2);const r=[],o=[];for(let a=0,d=s.length;a<d;a+=2)r.push(s[a]),o.push(s[a+1]);return _boundingExtentXYs(r,o,n)}function wrapX$2(t,e){const n=e.getExtent(),i=getCenter(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const s=getWidth(n),o=Math.floor((i[0]-n[0])/s)*s;t[0]-=o,t[2]-=o}return t}function wrapAndSliceX(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];wrapX$2(t,e);const i=getWidth(n);if(getWidth(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$1=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$1,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(n,i){return n/Math.cosh(i[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=n){e[s]=HALF_SIZE*t[s]/180;let r=RADIUS$1*Math.log(Math.tan(Math.PI*(+t[s+1]+90)/360));r>MAX_SAFE_Y?r=MAX_SAFE_Y:r<-MAX_SAFE_Y&&(r=-MAX_SAFE_Y),e[s+1]=r}return e}function toEPSG4326(t,e,n){const i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let s=0;s<i;s+=n)e[s]=180*t[s]/HALF_SIZE,e[s+1]=360*Math.atan(Math.exp(t[s+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,n){super({code:e,units:"degrees",extent:EXTENT,axisOrientation:n,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$4(t){return cache$1[t]||cache$1[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(t,e){cache$1[t]=e}let transforms={};function add$2(t,e,n){const i=t.getCode(),s=e.getCode();i in transforms||(transforms[i]={}),transforms[i][s]=n}function get$3(t,e){let n;return t in transforms&&e in transforms[t]&&(n=transforms[t][e]),n}function clamp(t,e,n){return Math.min(Math.max(t,e),n)}function squaredSegmentDistance(t,e,n,i,s,r){const o=s-n,a=r-i;if(o!==0||a!==0){const d=((t-n)*o+(e-i)*a)/(o*o+a*a);d>1?(n=s,i=r):d>0&&(n+=o*d,i+=a*d)}return squaredDistance$1(t,e,n,i)}function squaredDistance$1(t,e,n,i){const s=n-t,r=i-e;return s*s+r*r}function solveLinearSystem(t){const e=t.length;for(let i=0;i<e;i++){let s=i,r=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){const d=Math.abs(t[a][i]);d>r&&(r=d,s=a)}if(r===0)return null;const o=t[s];t[s]=t[i],t[i]=o;for(let a=i+1;a<e;a++){const d=-t[a][i]/t[i][i];for(let _=i;_<e+1;_++)i==_?t[a][_]=0:t[a][_]+=d*t[i][_]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let s=i-1;s>=0;s--)t[s][e]-=t[s][i]*n[i]}return n}function toRadians(t){return t*Math.PI/180}function modulo(t,e){const n=t%e;return n*e<0?n+e:n}function lerp(t,e,n){return t+n*(e-t)}function toFixed(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function floor(t,e){return Math.floor(toFixed(t,e))}function ceil(t,e){return Math.ceil(toFixed(t,e))}function add$1(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function closestOnSegment(t,e){const n=t[0],i=t[1],s=e[0],r=e[1],o=s[0],a=s[1],d=r[0],_=r[1],C=d-o,y=_-a,v=C===0&&y===0?0:(C*(n-o)+y*(i-a))/(C*C+y*y||0);let E,S;return v<=0?(E=o,S=a):v>=1?(E=d,S=_):(E=o+v*C,S=a+v*y),[E,S]}function equals(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function rotate$1(t,e){const n=Math.cos(e),i=Math.sin(e),s=t[0]*n-t[1]*i,r=t[1]*n+t[0]*i;return t[0]=s,t[1]=r,t}function scale$2(t,e){return t[0]*=e,t[1]*=e,t}function squaredDistance(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function distance(t,e){return Math.sqrt(squaredDistance(t,e))}function squaredDistanceToSegment(t,e){return squaredDistance(t,closestOnSegment(t,e))}function wrapX$1(t,e){if(e.canWrapX()){const n=getWidth(e.getExtent()),i=getWorldsAway(t,e,n);i&&(t[0]-=i*n)}return t}function getWorldsAway(t,e,n){const i=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||getWidth(i),s=Math.floor((t[0]-i[0])/n)),s}const DEFAULT_RADIUS=63710088e-1;function getDistance(t,e,n){n=n||DEFAULT_RADIUS;const i=toRadians(t[1]),s=toRadians(e[1]),r=(s-i)/2,o=toRadians(e[0]-t[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(s);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function warn(...t){console.warn(...t)}let showCoordinateWarning=!0;function disableCoordinateWarning(t){showCoordinateWarning=!1}function cloneTransform(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function identityTransform(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function addProjection(t){add$3(t.getCode(),t),add$2(t,t,cloneTransform)}function addProjections(t){t.forEach(addProjection)}function get$2(t){return typeof t=="string"?get$4(t):t||null}function getPointResolution(t,e,n,i){t=get$2(t);let s;const r=t.getPointResolutionFunc();if(r){if(s=r(e,n),i&&i!==t.getUnits()){const o=t.getMetersPerUnit();o&&(s=s*o/METERS_PER_UNIT$1[i])}}else{const o=t.getUnits();if(o=="degrees"&&!i||i=="degrees")s=e;else{const a=getTransformFromProjections(t,get$2("EPSG:4326"));if(a===identityTransform&&o!=="degrees")s=e*t.getMetersPerUnit();else{let _=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];_=a(_,_,2);const C=getDistance(_.slice(0,2),_.slice(2,4)),y=getDistance(_.slice(4,6),_.slice(6,8));s=(C+y)/2}const d=i?METERS_PER_UNIT$1[i]:t.getMetersPerUnit();d!==void 0&&(s/=d)}}return s}function addEquivalentProjections(t){addProjections(t),t.forEach(function(e){t.forEach(function(n){e!==n&&add$2(e,n,cloneTransform)})})}function addEquivalentTransforms(t,e,n,i){t.forEach(function(s){e.forEach(function(r){add$2(s,r,n),add$2(r,s,i)})})}function createProjection(t,e){return t?typeof t=="string"?get$2(t):t:get$2(e)}function createTransformFromCoordinateTransform(t){return function(e,n,i){const s=e.length;i=i!==void 0?i:2,n=n!==void 0?n:new Array(s);for(let r=0;r<s;r+=i){const o=t(e.slice(r,r+i)),a=o.length;for(let d=0,_=i;d<_;++d)n[r+d]=d>=a?e[r+d]:o[d]}return n}}function addCoordinateTransforms(t,e,n,i){const s=get$2(t),r=get$2(e);add$2(s,r,createTransformFromCoordinateTransform(n)),add$2(r,s,createTransformFromCoordinateTransform(i))}function equivalent(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||getTransformFromProjections(t,e)===cloneTransform)&&n}function getTransformFromProjections(t,e){const n=t.getCode(),i=e.getCode();let s=get$3(n,i);return s||(s=identityTransform),s}function getTransform(t,e){const n=get$2(t),i=get$2(e);return getTransformFromProjections(n,i)}function transform$1(t,e,n){return getTransform(e,n)(t,void 0,t.length)}function toUserCoordinate(t,e){return t}function fromUserCoordinate(t,e){return showCoordinateWarning&&!equals(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function toUserExtent(t,e){return t}function fromUserExtent(t,e){return t}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();const MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,n,i,s,r,o){this.sourceProj_=e,this.targetProj_=n;let a={};const d=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(b){const M=b[0]+"/"+b[1];return a[M]||(a[M]=d(b)),a[M]},this.maxSourceExtent_=s,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&getWidth(s)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const _=getTopLeft(i),C=getTopRight(i),y=getBottomRight(i),v=getBottomLeft(i),E=this.transformInv_(_),S=this.transformInv_(C),R=this.transformInv_(y),x=this.transformInv_(v),T=MAX_SUBDIVISION+(o?Math.max(0,Math.ceil(Math.log2(getArea(i)/(o*o*256*256)))):0);if(this.addQuad_(_,C,y,v,E,S,R,x,T),this.wrapsXInSource_){let b=1/0;this.triangles_.forEach(function(M,N,k){b=Math.min(b,M.source[0][0],M.source[1][0],M.source[2][0])}),this.triangles_.forEach(M=>{if(Math.max(M.source[0][0],M.source[1][0],M.source[2][0])-b>this.sourceWorldWidth_/2){const N=[[M.source[0][0],M.source[0][1]],[M.source[1][0],M.source[1][1]],[M.source[2][0],M.source[2][1]]];N[0][0]-b>this.sourceWorldWidth_/2&&(N[0][0]-=this.sourceWorldWidth_),N[1][0]-b>this.sourceWorldWidth_/2&&(N[1][0]-=this.sourceWorldWidth_),N[2][0]-b>this.sourceWorldWidth_/2&&(N[2][0]-=this.sourceWorldWidth_);const k=Math.min(N[0][0],N[1][0],N[2][0]);Math.max(N[0][0],N[1][0],N[2][0])-k<this.sourceWorldWidth_/2&&(M.source=N)}})}a={}}addTriangle_(e,n,i,s,r,o){this.triangles_.push({source:[s,r,o],target:[e,n,i]})}addQuad_(e,n,i,s,r,o,a,d,_){const C=boundingExtent([r,o,a,d]),y=this.sourceWorldWidth_?getWidth(C)/this.sourceWorldWidth_:null,v=this.sourceWorldWidth_,E=this.sourceProj_.canWrapX()&&y>.5&&y<1;let S=!1;if(_>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const x=boundingExtent([e,n,i,s]);S=getWidth(x)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||S}!E&&this.sourceProj_.isGlobal()&&y&&(S=y>MAX_TRIANGLE_WIDTH||S)}if(!S&&this.maxSourceExtent_&&isFinite(C[0])&&isFinite(C[1])&&isFinite(C[2])&&isFinite(C[3])&&!intersects$1(C,this.maxSourceExtent_))return;let R=0;if(!S&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(d[0])||!isFinite(d[1]))){if(_>0)S=!0;else if(R=(!isFinite(r[0])||!isFinite(r[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(d[0])||!isFinite(d[1])?1:0),R!=1&&R!=2&&R!=4&&R!=8)return}if(_>0){if(!S){const x=[(e[0]+i[0])/2,(e[1]+i[1])/2],T=this.transformInv_(x);let b;E?b=(modulo(r[0],v)+modulo(a[0],v))/2-modulo(T[0],v):b=(r[0]+a[0])/2-T[0];const M=(r[1]+a[1])/2-T[1];S=b*b+M*M>this.errorThresholdSquared_}if(S){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){const x=[(n[0]+i[0])/2,(n[1]+i[1])/2],T=this.transformInv_(x),b=[(s[0]+e[0])/2,(s[1]+e[1])/2],M=this.transformInv_(b);this.addQuad_(e,n,x,b,r,o,T,M,_-1),this.addQuad_(b,x,i,s,M,T,a,d,_-1)}else{const x=[(e[0]+n[0])/2,(e[1]+n[1])/2],T=this.transformInv_(x),b=[(i[0]+s[0])/2,(i[1]+s[1])/2],M=this.transformInv_(b);this.addQuad_(e,x,b,s,r,T,M,d,_-1),this.addQuad_(x,n,i,b,T,o,a,M,_-1)}return}}if(E){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}R&11||this.addTriangle_(e,i,s,r,a,d),R&14||this.addTriangle_(e,i,n,r,a,o),R&&(R&13||this.addTriangle_(n,s,e,o,d,r),R&7||this.addTriangle_(n,s,i,o,d,a))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(n,i,s){const r=n.source;extendCoordinate(e,r[0]),extendCoordinate(e,r[1]),extendCoordinate(e,r[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(t,e,n,i,s){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,s),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,s)),t.restore()}function verifyBrokenDiagonalRendering(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const t=createCanvasContext2D(6,6,canvasPool$1);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(t,4,5,4,0),drawTestTriangle(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(t),canvasPool$1.push(t.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(t,e,n,i){const s=transform$1(n,e,t);let r=getPointResolution(e,i,n);const o=e.getMetersPerUnit();o!==void 0&&(r*=o);const a=t.getMetersPerUnit();a!==void 0&&(r/=a);const d=t.getExtent();if(!d||containsCoordinate(d,s)){const _=getPointResolution(t,r,s)/r;isFinite(_)&&_>0&&(r/=_)}return r}function calculateSourceExtentResolution(t,e,n,i){const s=getCenter(n);let r=calculateSourceResolution(t,e,s,i);return(!isFinite(r)||r<=0)&&forEachCorner(n,function(o){return r=calculateSourceResolution(t,e,o,i),isFinite(r)&&r>0}),r}function render(t,e,n,i,s,r,o,a,d,_,C,y,v){const E=createCanvasContext2D(Math.round(n*t),Math.round(n*e),canvasPool$1);if(y||(E.imageSmoothingEnabled=!1),d.length===0)return E.canvas;E.scale(n,n);function S(b){return Math.round(b*n)/n}E.globalCompositeOperation="lighter";const R=createEmpty();d.forEach(function(b,M,N){extend$2(R,b.extent)});let x;{const b=getWidth(R),M=getHeight(R);x=createCanvasContext2D(Math.round(n*b/i),Math.round(n*M/i),canvasPool$1),y||(x.imageSmoothingEnabled=!1);const N=n/i;d.forEach(function(k,G,Y){const q=k.extent[0]-R[0],le=-(k.extent[3]-R[3]),B=getWidth(k.extent),D=getHeight(k.extent);k.image.width>0&&k.image.height>0&&x.drawImage(k.image,_,_,k.image.width-2*_,k.image.height-2*_,q*N,le*N,B*N,D*N)})}const T=getTopLeft(o);return a.getTriangles().forEach(function(b,M,N){const k=b.source,G=b.target;let Y=k[0][0],q=k[0][1],le=k[1][0],B=k[1][1],D=k[2][0],X=k[2][1];const ce=S((G[0][0]-T[0])/r),Me=S(-(G[0][1]-T[1])/r),re=S((G[1][0]-T[0])/r),ie=S(-(G[1][1]-T[1])/r),J=S((G[2][0]-T[0])/r),oe=S(-(G[2][1]-T[1])/r),Be=Y,je=q;Y=0,q=0,le-=Be,B-=je,D-=Be,X-=je;const qe=[[le,B,0,0,re-ce],[D,X,0,0,J-ce],[0,0,le,B,ie-Me],[0,0,D,X,oe-Me]],ee=solveLinearSystem(qe);if(!ee)return;if(E.save(),E.beginPath(),isBrokenDiagonalRendering()||!y){E.moveTo(re,ie);const Ue=4,We=ce-re,He=Me-ie;for(let H=0;H<Ue;H++)E.lineTo(re+S((H+1)*We/Ue),ie+S(H*He/(Ue-1))),H!=Ue-1&&E.lineTo(re+S((H+1)*We/Ue),ie+S((H+1)*He/(Ue-1)));E.lineTo(J,oe)}else E.moveTo(re,ie),E.lineTo(ce,Me),E.lineTo(J,oe);E.clip(),E.transform(ee[0],ee[2],ee[1],ee[3],ce,Me),E.translate(R[0]-Be,R[3]-je);let et;if(x)et=x.canvas,E.scale(i/n,-i/n);else{const Ue=d[0],We=Ue.extent;et=Ue.image,E.scale(getWidth(We)/et.width,-getHeight(We)/et.height)}E.drawImage(et,0,0),E.restore()}),x&&(releaseCanvas(x),canvasPool$1.push(x.canvas)),C&&(E.save(),E.globalCompositeOperation="source-over",E.strokeStyle="black",E.lineWidth=1,a.getTriangles().forEach(function(b,M,N){const k=b.target,G=(k[0][0]-T[0])/r,Y=-(k[0][1]-T[1])/r,q=(k[1][0]-T[0])/r,le=-(k[1][1]-T[1])/r,B=(k[2][0]-T[0])/r,D=-(k[2][1]-T[1])/r;E.beginPath(),E.moveTo(q,le),E.lineTo(G,Y),E.lineTo(B,D),E.closePath(),E.stroke()}),E.restore()),E.canvas}class ReprojTile extends Tile{constructor(e,n,i,s,r,o,a,d,_,C,y,v){super(r,TileState.IDLE,v),this.renderEdges_=y!==void 0?y:!1,this.pixelRatio_=a,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=s,this.wrappedTileCoord_=o||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const E=s.getTileCoordExtent(this.wrappedTileCoord_),S=this.targetTileGrid_.getExtent();let R=this.sourceTileGrid_.getExtent();const x=S?getIntersection(E,S):E;if(getArea(x)===0){this.state=TileState.EMPTY;return}const T=e.getExtent();T&&(R?R=getIntersection(R,T):R=T);const b=s.getResolution(this.wrappedTileCoord_[0]),M=calculateSourceExtentResolution(e,i,x,b);if(!isFinite(M)||M<=0){this.state=TileState.EMPTY;return}const N=C!==void 0?C:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,i,x,R,M*N,b),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=n.getZForResolution(M);let k=this.triangulation_.calculateSourceExtent();if(R&&(e.canWrapX()?(k[1]=clamp(k[1],R[1],R[3]),k[3]=clamp(k[3],R[1],R[3])):k=getIntersection(k,R)),!getArea(k))this.state=TileState.EMPTY;else{const G=n.getTileRangeForExtentAndZ(k,this.sourceZ_);for(let Y=G.minX;Y<=G.maxX;Y++)for(let q=G.minY;q<=G.maxY;q++){const le=_(this.sourceZ_,Y,q,a);le&&this.sourceTiles_.push(le)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(n=>{n&&n.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(n.tileCoord),image:n.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),s=typeof i=="number"?i:i[0],r=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),d=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(s,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,d,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(n=>{const i=n.getState();if(i==TileState.IDLE||i==TileState.LOADING){e++;const s=listen(n,EventType.CHANGE,function(r){const o=n.getState();(o==TileState.LOADED||o==TileState.ERROR||o==TileState.EMPTY)&&(unlistenByKey(s),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(s)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,i,s){n.getState()==TileState.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}function assert(t,e){if(!t)throw new Error(e)}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){const i=this.entries_[e];return assert(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){const n=this.entries_[e];return assert(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){const e=new Array(this.count_);let n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var n;return(n=this.entries_[e])==null?void 0:n.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate$1(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function getKeyZXY(t,e,n){return t+"/"+e+"/"+n}function getKey$1(t){return getKeyZXY(t[0],t[1],t[2])}function fromKey(t){return t.split("/").map(Number)}function hash(t){return(t[1]<<t[0])+t[2]}function withinExtentAndZ(t,e){const n=t[0],i=t[1],s=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const r=e.getFullTileRange(n);return r?r.containsXY(i,s):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),i=fromKey(e)[0];this.forEach(s=>{s.tileCoord[0]!==i&&(this.remove(getKey$1(s.tileCoord)),s.release())})}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ObjectEventType={PROPERTYCHANGE:"propertychange"};class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){const i=e.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=listen(this,e[r],n);return s}return listen(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){const s=e.length;i=new Array(s);for(let r=0;r<s;++r)i[r]=listenOnce(this,e[r],n)}else i=listenOnce(this,e,n);return n.ol_key=i,i}unInternal(e,n){const i=n.ol_key;if(i)unByKey(i);else if(Array.isArray(e))for(let s=0,r=e.length;s<r;++s)this.removeEventListener(e[s],n);else this.removeEventListener(e,n)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)unlistenByKey(t[e]);else unlistenByKey(t)}class ObjectEvent extends BaseEvent{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,n)),i=ObjectEventType.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new ObjectEvent(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){const s=this.values_||(this.values_={});if(i)s[e]=n;else{const r=s[e];s[e]=n,r!==n&&this.notify(e,r)}}setProperties(e,n){for(const i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){const i=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),n||this.notify(e,i)}}}class Source extends BaseObject{constructor(e){super(),this.projection=get$2(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const n=this;this.viewPromise_=new Promise(function(i,s){n.viewResolver=i,n.viewRejector=s})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}class TileRange{constructor(e,n,i,s){this.minX=e,this.maxX=n,this.minY=i,this.maxY=s}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate(t,e,n,i,s){return s!==void 0?(s.minX=t,s.maxX=e,s.minY=n,s.maxY=i,s):new TileRange(t,e,n,i)}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function forEach(t,e,n,i,s){let r;for(e+=i;e<n;e+=i)if(r=s(t.slice(e-i,e),t.slice(e,e+i)),r)return r;return!1}function linearRingContainsExtent(t,e,n,i,s){return!forEachCorner(s,function(o){return!linearRingContainsXY(t,e,n,i,o[0],o[1])})}function linearRingContainsXY(t,e,n,i,s,r){let o=0,a=t[n-i],d=t[n-i+1];for(;e<n;e+=i){const _=t[e],C=t[e+1];d<=r?C>r&&(_-a)*(r-d)-(s-a)*(C-d)>0&&o++:C<=r&&(_-a)*(r-d)-(s-a)*(C-d)<0&&o--,a=_,d=C}return o!==0}function linearRingsContainsXY(t,e,n,i,s,r){if(n.length===0||!linearRingContainsXY(t,e,n[0],i,s,r))return!1;for(let o=1,a=n.length;o<a;++o)if(linearRingContainsXY(t,n[o-1],n[o],i,s,r))return!1;return!0}function linearRingssContainsXY(t,e,n,i,s,r){if(n.length===0)return!1;for(let o=0,a=n.length;o<a;++o){const d=n[o];if(linearRingsContainsXY(t,e,d,i,s,r))return!0;e=d[d.length-1]}return!1}function intersectsLineString(t,e,n,i,s){const r=extendFlatCoordinates(createEmpty(),t,e,n,i);return intersects$1(s,r)?containsExtent(s,r)||r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:forEach(t,e,n,i,function(o,a){return intersectsSegment(s,o,a)}):!1}function intersectsLineStringArray(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){if(intersectsLineString(t,e,n[r],i,s))return!0;e=n[r]}return!1}function intersectsLinearRing(t,e,n,i,s){return!!(intersectsLineString(t,e,n,i,s)||linearRingContainsXY(t,e,n,i,s[0],s[1])||linearRingContainsXY(t,e,n,i,s[0],s[3])||linearRingContainsXY(t,e,n,i,s[2],s[1])||linearRingContainsXY(t,e,n,i,s[2],s[3]))}function intersectsLinearRingArray(t,e,n,i,s){if(!intersectsLinearRing(t,e,n[0],i,s))return!1;if(n.length===1)return!0;for(let r=1,o=n.length;r<o;++r)if(linearRingContainsExtent(t,n[r-1],n[r],i,s)&&!intersectsLineString(t,n[r-1],n[r],i,s))return!1;return!0}function intersectsLinearRingMultiArray(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(intersectsLinearRingArray(t,e,a,i,s))return!0;e=a[a.length-1]}return!1}function hasArea(t){return t[0]>0&&t[1]>0}function scale$1(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function toSize(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}const tmpTileCoord=[0,0,0],DECIMALS=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(s,r)=>r-s),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let s=0,r=this.resolutions_.length-1;s<r;++s)if(!n)n=this.resolutions_[s]/this.resolutions_[s+1];else if(this.resolutions_[s]/this.resolutions_[s+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(i)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((s,r)=>{const o=new TileRange(Math.min(0,s[0]),Math.max(s[0]-1,-1),Math.min(0,s[1]),Math.max(s[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,r);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){const s=this.getTileRangeForExtentAndZ(e,n);for(let r=s.minX,o=s.maxX;r<=o;++r)for(let a=s.minY,d=s.maxY;a<=d;++a)i([n,r,a])}forEachTileCoordParentTileRange(e,n,i,s){let r,o,a,d=null,_=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):d=this.getTileCoordExtent(e,s);_>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),r=createOrUpdate(o,o,a,a,i)):r=this.getTileRangeForExtentAndZ(d,_,i),n(_,r))return!0;--_}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const r=e[1]*2,o=e[2]*2;return createOrUpdate(r,r+1,o,o+1,n)}const s=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;const s=e[0],r=e[1],o=e[2];if(n===s)return createOrUpdate(r,o,r,o,i);if(this.zoomFactor_){const d=Math.pow(this.zoomFactor_,n-s),_=Math.floor(r*d),C=Math.floor(o*d);if(n<s)return createOrUpdate(_,_,C,C,i);const y=Math.floor(d*(r+1))-1,v=Math.floor(d*(o+1))-1;return createOrUpdate(_,y,C,v,i)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,tmpTileCoord);const s=tmpTileCoord[1],r=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,tmpTileCoord);const o=tmpTileCoord[1],a=tmpTileCoord[2];return createOrUpdate(s,o,r,a,i)}getTileCoordCenter(e){const n=this.getOrigin(e[0]),i=this.getResolution(e[0]),s=toSize(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*s[0]*i,n[1]-(e[2]+.5)*s[1]*i]}getTileCoordExtent(e,n){const i=this.getOrigin(e[0]),s=this.getResolution(e[0]),r=toSize(this.getTileSize(e[0]),this.tmpSize_),o=i[0]+e[1]*r[0]*s,a=i[1]-(e[2]+1)*r[1]*s,d=o+r[0]*s,_=a+r[1]*s;return createOrUpdate$2(o,a,d,_,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,s,r){const o=this.getZForResolution(i),a=i/this.getResolution(o),d=this.getOrigin(o),_=toSize(this.getTileSize(o),this.tmpSize_);let C=a*(e-d[0])/i/_[0],y=a*(d[1]-n)/i/_[1];return s?(C=ceil(C,DECIMALS)-1,y=ceil(y,DECIMALS)-1):(C=floor(C,DECIMALS),y=floor(y,DECIMALS)),createOrUpdate$1(o,C,y,r)}getTileCoordForXYAndZ_(e,n,i,s,r){const o=this.getOrigin(i),a=this.getResolution(i),d=toSize(this.getTileSize(i),this.tmpSize_);let _=(e-o[0])/a/d[0],C=(o[1]-n)/a/d[1];return s?(_=ceil(_,DECIMALS)-1,C=ceil(C,DECIMALS)-1):(_=floor(_,DECIMALS),C=floor(C,DECIMALS)),createOrUpdate$1(i,_,C,r)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){const i=linearFindNearest(this.resolutions_,e,n||0);return clamp(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return intersectsLinearRing(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const n=this.resolutions_.length,i=new Array(n);for(let s=this.minZoom;s<n;++s)i[s]=this.getTileRangeForExtentAndZ(e,s);this.fullTileRanges_=i}}function getForProjection(t){let e=t.getDefaultTileGrid();return e||(e=createForProjection(t),t.setDefaultTileGrid(e)),e}function wrapX(t,e,n){const i=e[0],s=t.getTileCoordCenter(e),r=extentFromProjection(n);if(!containsCoordinate(r,s)){const o=getWidth(r),a=Math.ceil((r[0]-s[0])/o);return s[0]+=o*a,t.getTileCoordForCoordAndZ(s,i)}return e}function createForExtent(t,e,n,i){i=i!==void 0?i:"top-left";const s=resolutionsFromExtent(t,e,n);return new TileGrid({extent:t,origin:getCorner(t,i),resolutions:s,tileSize:n})}function createXYZ(t){const e=t||{},n=e.extent||get$2("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(n,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(i)}function resolutionsFromExtent(t,e,n,i){e=e!==void 0?e:DEFAULT_MAX_ZOOM,n=toSize(n!==void 0?n:DEFAULT_TILE_SIZE);const s=getHeight(t),r=getWidth(t);i=i>0?i:Math.max(r/n[0],s/n[1]);const o=e+1,a=new Array(o);for(let d=0;d<o;++d)a[d]=i/Math.pow(2,d);return a}function createForProjection(t,e,n,i){const s=extentFromProjection(t);return createForExtent(s,e,n,i)}function extentFromProjection(t){t=get$2(t);let e=t.getExtent();if(!e){const n=180*METERS_PER_UNIT$1.degrees/t.getMetersPerUnit();e=createOrUpdate$2(-n,-n,n,n)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const n=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){const i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}forEachLoadedTile(e,n,i,s){const r=this.getTileCacheForProjection(e);if(!r)return!1;let o=!0,a,d,_;for(let C=i.minX;C<=i.maxX;++C)for(let y=i.minY;y<=i.maxY;++y)d=getKeyZXY(n,C,y),_=!1,r.containsKey(d)&&(a=r.get(d),_=a.getState()===TileState.LOADED,_&&(_=s(a)!==!1)),_||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,s,r){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const n=this.getProjection();return assert(n===null||equivalent(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){const s=this.getTileGridForProjection(i),r=this.getTilePixelRatio(n),o=toSize(s.getTileSize(e),this.tmpSize);return r==1?o:scale$1(o,r,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();const i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=wrapX(i,e,n)),withinExtentAndZ(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){const i=this.getTileCacheForProjection(n);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,n,i,s){}}class TileSourceEvent extends BaseEvent{constructor(e,n){super(e),this.tile=n}}function createFromTemplate(t,e){const n=/\{z\}/g,i=/\{x\}/g,s=/\{y\}/g,r=/\{-y\}/g;return function(o,a,d){if(o)return t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(s,o[2].toString()).replace(r,function(){const _=o[0],C=e.getFullTileRange(_);if(!C)throw new Error("The {-y} placeholder requires a tile grid with extent");return(C.getHeight()-o[2]-1).toString()})}}function createFromTemplates(t,e){const n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=createFromTemplate(t[s],e);return createFromTileUrlFunctions(i)}function createFromTileUrlFunctions(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;const s=hash(e),r=modulo(s,t.length);return t[r](e,n,i)}}function expandUrl(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),s=n[2].charCodeAt(0);let r;for(r=i;r<=s;++r)e.push(t.replace(n[0],String.fromCharCode(r)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let s=parseInt(n[1],10);s<=i;s++)e.push(t.replace(n[0],s.toString()));return e}return e.push(t),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const n=e.target,i=getUid(n),s=n.getState();let r;s==TileState.LOADING?(this.tileLoadingKeys_[i]=!0,r=TileEventType.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=s==TileState.ERROR?TileEventType.TILELOADERROR:s==TileState.LOADED?TileEventType.TILELOADEND:void 0),r!=null&&this.dispatchEvent(new TileSourceEvent(r,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){const n=expandUrl(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;const n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){const s=getKeyZXY(e,n,i);this.tileCache.containsKey(s)&&this.tileCache.get(s)}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){const i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(const s in this.tileCacheForProjection){const r=this.tileCacheForProjection[s];r.expireCache(r==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const n=this.getProjection();if(this.tileGrid&&(!n||equivalent(n,e)))return this.tileGrid;const i=getUid(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=getForProjection(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){const n=this.getProjection();if(!n||equivalent(n,e))return this.tileCache;const i=getUid(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,s,r,o){const a=[e,n,i],d=this.getTileCoordForTileUrlFunction(a,r),_=d?this.tileUrlFunction(d,s,r):void 0,C=new this.tileClass(a,_!==void 0?TileState.IDLE:TileState.EMPTY,_!==void 0?_:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return C.key=o,C.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),C}getTile(e,n,i,s,r){const o=this.getProjection();if(!o||!r||equivalent(o,r))return this.getTileInternal(e,n,i,s,o||r);const a=this.getTileCacheForProjection(r),d=[e,n,i];let _;const C=getKey$1(d);a.containsKey(C)&&(_=a.get(C));const y=this.getKey();if(_&&_.key==y)return _;const v=this.getTileGridForProjection(o),E=this.getTileGridForProjection(r),S=this.getTileCoordForTileUrlFunction(d,r),R=new ReprojTile(o,v,r,E,d,S,this.getTilePixelRatio(s),this.getGutter(),(x,T,b,M)=>this.getTileInternal(x,T,b,M,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return R.key=y,_?(R.interimTile=_,R.refreshInterimChain(),a.replace(C,R)):a.set(C,R),R}getTileInternal(e,n,i,s,r){let o=null;const a=getKeyZXY(e,n,i),d=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,n,i,s,r,d),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=d){const _=o;o=this.createTile_(e,n,i,s,r,d),_.getState()==TileState.IDLE?o.interimTile=_.interimTile:o.interimTile=_,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){const i=get$2(e);if(i){const s=getUid(i);s in this.tileGridForProjection||(this.tileGridForProjection[s]=n)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(t,e){t.getImage().src=e}class XYZ extends TileImage{constructor(e){e=e||{};const n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:createXYZ({extent:extentFromProjection(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const ATTRIBUTION='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class OSM extends XYZ{constructor(e){e=e||{};let n;e.attributions!==void 0?n=e.attributions:n=[ATTRIBUTION];const i=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",s=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:n,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:i,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:s,wrapX:e.wrapX,zDirection:e.zDirection})}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof n[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),n[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,n[LayerProperty.Z_INDEX]=e.zIndex,n[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(t,e,n){return function(i,s,r,o,a){if(!i)return;if(!s&&!e)return i;const d=e?0:r[0]*s,_=e?0:r[1]*s,C=a?a[0]:0,y=a?a[1]:0;let v=t[0]+d/2+C,E=t[2]-d/2+C,S=t[1]+_/2+y,R=t[3]-_/2+y;v>E&&(v=(E+v)/2,E=v),S>R&&(S=(R+S)/2,R=S);let x=clamp(i[0],v,E),T=clamp(i[1],S,R);if(o&&n&&s){const b=30*s;x+=-b*Math.log(1+Math.max(0,v-i[0])/b)+b*Math.log(1+Math.max(0,i[0]-E)/b),T+=-b*Math.log(1+Math.max(0,S-i[1])/b)+b*Math.log(1+Math.max(0,i[1]-R)/b)}return[x,T]}}function none$1(t){return t}function getViewportClampedResolution(t,e,n,i){const s=getWidth(e)/n[0],r=getHeight(e)/n[1];return i?Math.min(t,Math.max(s,r)):Math.min(t,Math.min(s,r))}function getSmoothClampedResolution(t,e,n){let i=Math.min(t,e);const s=50;return i*=Math.log(1+s*Math.max(0,t/e-1))/s+1,n&&(i=Math.max(i,n),i/=Math.log(1+s*Math.max(0,n/t-1))/s+1),clamp(i,n/2,e*2)}function createSnapToResolutions(t,e,n,i){return e=e!==void 0?e:!0,function(s,r,o,a){if(s!==void 0){const d=t[0],_=t[t.length-1],C=n?getViewportClampedResolution(d,n,o,i):d;if(a)return e?getSmoothClampedResolution(s,C,_):clamp(s,_,C);const y=Math.min(C,s),v=Math.floor(linearFindNearest(t,y,r));return t[v]>C&&v<t.length-1?t[v+1]:t[v]}}}function createSnapToPower(t,e,n,i,s,r){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(o,a,d,_){if(o!==void 0){const C=s?getViewportClampedResolution(e,s,d,r):e;if(_)return i?getSmoothClampedResolution(o,C,n):clamp(o,n,C);const y=1e-9,v=Math.ceil(Math.log(e/C)/Math.log(t)-y),E=-a*(.5-y)+.5,S=Math.min(C,o),R=Math.floor(Math.log(e/S)/Math.log(t)+E),x=Math.max(v,R),T=e/Math.pow(t,x);return clamp(T,n,C)}}}function createMinMaxResolution(t,e,n,i,s){return n=n!==void 0?n:!0,function(r,o,a,d){if(r!==void 0){const _=i?getViewportClampedResolution(t,i,a,s):t;return!n||!d?clamp(r,e,_):getSmoothClampedResolution(r,_,e)}}}function disable(t){if(t!==void 0)return 0}function none(t){if(t!==void 0)return t}function createSnapToN(t){const e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function createSnapToZero(t){const e=toRadians(5);return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}new Array(6);function create(){return[1,0,0,1,0,0]}function set(t,e,n,i,s,r,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=s,t[4]=r,t[5]=o,t}function setFromArray(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function apply(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function makeScale(t,e,n){return set(t,e,0,0,n,0,0)}function compose(t,e,n,i,s,r,o,a){const d=Math.sin(r),_=Math.cos(r);return t[0]=i*_,t[1]=s*d,t[2]=-i*d,t[3]=s*_,t[4]=o*i*_-a*i*d+e,t[5]=o*s*d+a*s*_+n,t}function makeInverse(t,e){const n=determinant(e);assert(n!==0,"Transformation matrix cannot be inverted");const i=e[0],s=e[1],r=e[2],o=e[3],a=e[4],d=e[5];return t[0]=o/n,t[1]=-s/n,t[2]=-r/n,t[3]=i/n,t[4]=(r*d-o*a)/n,t[5]=-(i*d-s*a)/n,t}function determinant(t){return t[0]*t[3]-t[1]*t[2]}let transformStringDiv;function toString$1(t){const e="matrix("+t.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const n=transformStringDiv||(transformStringDiv=document.createElement("div"));return n.style.transform=e,n.style.transform}function transform2D(t,e,n,i,s,r){r=r||[];let o=0;for(let a=e;a<n;a+=i){const d=t[a],_=t[a+1];r[o++]=s[0]*d+s[2]*_+s[4],r[o++]=s[1]*d+s[3]*_+s[5]}return r&&r.length!=o&&(r.length=o),r}function rotate(t,e,n,i,s,r,o){o=o||[];const a=Math.cos(s),d=Math.sin(s),_=r[0],C=r[1];let y=0;for(let v=e;v<n;v+=i){const E=t[v]-_,S=t[v+1]-C;o[y++]=_+E*a-S*d,o[y++]=C+E*d+S*a;for(let R=v+2;R<v+i;++R)o[y++]=t[R]}return o&&o.length!=y&&(o.length=y),o}function scale(t,e,n,i,s,r,o,a){a=a||[];const d=o[0],_=o[1];let C=0;for(let y=e;y<n;y+=i){const v=t[y]-d,E=t[y+1]-_;a[C++]=d+s*v,a[C++]=_+r*E;for(let S=y+2;S<y+i;++S)a[C++]=t[S]}return a&&a.length!=C&&(a.length=C),a}function translate(t,e,n,i,s,r,o){o=o||[];let a=0;for(let d=e;d<n;d+=i){o[a++]=t[d]+s,o[a++]=t[d+1]+r;for(let _=d+2;_<d+i;++_)o[a++]=t[_]}return o&&o.length!=a&&(o.length=a),o}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);const s=this.clone();return s.applyTransform(i),s.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return abstract()}closestPointXY(e,n,i,s){return abstract()}containsXY(e,n){const i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&createOrUpdateEmpty(n),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,n){abstract()}scale(e,n,i){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,n){abstract()}transform(e,n){const i=get$2(e),s=i.getUnits()=="tile-pixels"?function(r,o,a){const d=i.getExtent(),_=i.getWorldExtent(),C=getHeight(_)/getHeight(d);return compose(tmpTransform$1,_[0],_[3],C,-C,0,0,0),transform2D(r,0,r.length,a,tmpTransform$1,o),getTransform(i,n)(r,o,a)}:getTransform(i,n);return this.applyTransform(s),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){abstract()}setLayout(e,n,i){let s;if(e)s=getStrideForLayout(e);else{for(let r=0;r<i;++r){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}s=n.length,e=getLayoutForStride(s)}this.layout=e,this.stride=s}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();rotate(i,0,i.length,s,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=getCenter(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();scale(s,0,s.length,r,e,n,i,s),this.changed()}}translate(e,n){const i=this.getFlatCoordinates();if(i){const s=this.getStride();translate(i,0,i.length,s,e,n,i),this.changed()}}}function getLayoutForStride(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function getStrideForLayout(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function transformGeom2D(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const s=t.getStride();return transform2D(i,0,i.length,s,e,n)}function assignClosest(t,e,n,i,s,r,o){const a=t[e],d=t[e+1],_=t[n]-a,C=t[n+1]-d;let y;if(_===0&&C===0)y=e;else{const v=((s-a)*_+(r-d)*C)/(_*_+C*C);if(v>1)y=n;else if(v>0){for(let E=0;E<i;++E)o[E]=lerp(t[e+E],t[n+E],v);o.length=i;return}else y=e}for(let v=0;v<i;++v)o[v]=t[y+v];o.length=i}function maxSquaredDelta(t,e,n,i,s){let r=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const a=t[e],d=t[e+1],_=squaredDistance$1(r,o,a,d);_>s&&(s=_),r=a,o=d}return s}function arrayMaxSquaredDelta(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=maxSquaredDelta(t,e,a,i,s),e=a}return s}function multiArrayMaxSquaredDelta(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];s=arrayMaxSquaredDelta(t,e,a,i,s),e=a[a.length-1]}return s}function assignClosestPoint(t,e,n,i,s,r,o,a,d,_,C){if(e==n)return _;let y,v;if(s===0){if(v=squaredDistance$1(o,a,t[e],t[e+1]),v<_){for(y=0;y<i;++y)d[y]=t[e+y];return d.length=i,v}return _}C=C||[NaN,NaN];let E=e+i;for(;E<n;)if(assignClosest(t,E-i,E,i,o,a,C),v=squaredDistance$1(o,a,C[0],C[1]),v<_){for(_=v,y=0;y<i;++y)d[y]=C[y];d.length=i,E+=i}else E+=i*Math.max((Math.sqrt(v)-Math.sqrt(_))/s|0,1);if(r&&(assignClosest(t,n-i,e,i,o,a,C),v=squaredDistance$1(o,a,C[0],C[1]),v<_)){for(_=v,y=0;y<i;++y)d[y]=C[y];d.length=i}return _}function assignClosestArrayPoint(t,e,n,i,s,r,o,a,d,_,C){C=C||[NaN,NaN];for(let y=0,v=n.length;y<v;++y){const E=n[y];_=assignClosestPoint(t,e,E,i,s,r,o,a,d,_,C),e=E}return _}function assignClosestMultiArrayPoint(t,e,n,i,s,r,o,a,d,_,C){C=C||[NaN,NaN];for(let y=0,v=n.length;y<v;++y){const E=n[y];_=assignClosestArrayPoint(t,e,E,i,s,r,o,a,d,_,C),e=E[E.length-1]}return _}function deflateCoordinate(t,e,n,i){for(let s=0,r=n.length;s<r;++s)t[e++]=n[s];return e}function deflateCoordinates(t,e,n,i){for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0;a<i;++a)t[e++]=o[a]}return e}function deflateCoordinatesArray(t,e,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const d=deflateCoordinates(t,e,n[o],i);s[r++]=d,e=d}return s.length=r,s}function deflateMultiCoordinatesArray(t,e,n,i,s){s=s||[];let r=0;for(let o=0,a=n.length;o<a;++o){const d=deflateCoordinatesArray(t,e,n[o],i,s[r]);d.length===0&&(d[0]=e),s[r++]=d,e=d[d.length-1]}return s.length=r,s}function douglasPeucker(t,e,n,i,s,r,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)r[o++]=t[e],r[o++]=t[e+1];return o}const d=new Array(a);d[0]=1,d[a-1]=1;const _=[e,n-i];let C=0;for(;_.length>0;){const y=_.pop(),v=_.pop();let E=0;const S=t[v],R=t[v+1],x=t[y],T=t[y+1];for(let b=v+i;b<y;b+=i){const M=t[b],N=t[b+1],k=squaredSegmentDistance(M,N,S,R,x,T);k>E&&(C=b,E=k)}E>s&&(d[(C-e)/i]=1,v+i<C&&_.push(v,C),C+i<y&&_.push(C,y))}for(let y=0;y<a;++y)d[y]&&(r[o++]=t[e+y*i],r[o++]=t[e+y*i+1]);return o}function douglasPeuckerArray(t,e,n,i,s,r,o,a){for(let d=0,_=n.length;d<_;++d){const C=n[d];o=douglasPeucker(t,e,C,i,s,r,o),a.push(o),e=C}return o}function snap(t,e){return e*Math.round(t/e)}function quantize(t,e,n,i,s,r,o){if(e==n)return o;let a=snap(t[e],s),d=snap(t[e+1],s);e+=i,r[o++]=a,r[o++]=d;let _,C;do if(_=snap(t[e],s),C=snap(t[e+1],s),e+=i,e==n)return r[o++]=_,r[o++]=C,o;while(_==a&&C==d);for(;e<n;){const y=snap(t[e],s),v=snap(t[e+1],s);if(e+=i,y==_&&v==C)continue;const E=_-a,S=C-d,R=y-a,x=v-d;if(E*x==S*R&&(E<0&&R<E||E==R||E>0&&R>E)&&(S<0&&x<S||S==x||S>0&&x>S)){_=y,C=v;continue}r[o++]=_,r[o++]=C,a=_,d=C,_=y,C=v}return r[o++]=_,r[o++]=C,o}function quantizeArray(t,e,n,i,s,r,o,a){for(let d=0,_=n.length;d<_;++d){const C=n[d];o=quantize(t,e,C,i,s,r,o),a.push(o),e=C}return o}function quantizeMultiArray(t,e,n,i,s,r,o,a){for(let d=0,_=n.length;d<_;++d){const C=n[d],y=[];o=quantizeArray(t,e,C,i,s,r,o,y),a.push(y),e=C[C.length-1]}return o}function inflateCoordinates(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=e;o<n;o+=i)s[r++]=t.slice(o,o+i);return s.length=r,s}function inflateCoordinatesArray(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const d=n[o];s[r++]=inflateCoordinates(t,e,d,i,s[r]),e=d}return s.length=r,s}function inflateMultiCoordinatesArray(t,e,n,i,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=n.length;o<a;++o){const d=n[o];s[r++]=d.length===1&&d[0]===e?[]:inflateCoordinatesArray(t,e,d,i,s[r]),e=d[d.length-1]}return s.length=r,s}function linearRing(t,e,n,i){let s=0,r=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],d=t[e+1];s+=o*a-r*d,r=a,o=d}return s/2}function linearRings(t,e,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=linearRing(t,e,a,i),e=a}return s}function linearRingss$1(t,e,n,i){let s=0;for(let r=0,o=n.length;r<o;++r){const a=n[r];s+=linearRings(t,e,a,i),e=a[a.length-1]}return s}class LinearRing extends SimpleGeometry{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,s){return s<closestSquaredDistanceXY(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,s))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const n=[];return n.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new LinearRing(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}let Point$1=class tn extends SimpleGeometry{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){const e=new tn(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){const r=this.flatCoordinates,o=squaredDistance$1(e,n,r[0],r[1]);if(o<s){const a=this.stride;for(let d=0;d<a;++d)i[d]=r[d];return i.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};function getInteriorPointOfArray(t,e,n,i,s,r,o){let a,d,_,C,y,v,E;const S=s[r+1],R=[];for(let b=0,M=n.length;b<M;++b){const N=n[b];for(C=t[N-i],v=t[N-i+1],a=e;a<N;a+=i)y=t[a],E=t[a+1],(S<=v&&E<=S||v<=S&&S<=E)&&(_=(S-v)/(E-v)*(y-C)+C,R.push(_)),C=y,v=E}let x=NaN,T=-1/0;for(R.sort(ascending),C=R[0],a=1,d=R.length;a<d;++a){y=R[a];const b=Math.abs(y-C);b>T&&(_=(C+y)/2,linearRingsContainsXY(t,e,n,i,_,S)&&(x=_,T=b)),C=y}return isNaN(x)&&(x=s[r]),o?(o.push(x,S,T),o):[x,S,T]}function getInteriorPointsOfMultiArray(t,e,n,i,s){let r=[];for(let o=0,a=n.length;o<a;++o){const d=n[o];r=getInteriorPointOfArray(t,e,d,i,s,2*o,r),e=d[d.length-1]}return r}function coordinates(t,e,n,i){for(;e<n-i;){for(let s=0;s<i;++s){const r=t[e+s];t[e+s]=t[n-i+s],t[n-i+s]=r}e+=i,n-=i}}function linearRingIsClockwise(t,e,n,i){let s=0,r=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const a=t[e],d=t[e+1];s+=(a-r)*(d+o),r=a,o=d}return s===0?void 0:s>0}function linearRingsAreOriented(t,e,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],d=linearRingIsClockwise(t,e,a,i);if(r===0){if(s&&d||!s&&!d)return!1}else if(s&&!d||!s&&d)return!1;e=a}return!0}function linearRingssAreOriented(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r){const a=n[r];if(!linearRingsAreOriented(t,e,a,i,s))return!1;a.length&&(e=a[a.length-1])}return!0}function orientLinearRings(t,e,n,i,s){s=s!==void 0?s:!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],d=linearRingIsClockwise(t,e,a,i);(r===0?s&&d||!s&&!d:s&&!d||!s&&d)&&coordinates(t,e,a,i),e=a}return e}function orientLinearRingsArray(t,e,n,i,s){for(let r=0,o=n.length;r<o;++r)e=orientLinearRings(t,e,n[r],i,s);return e}function inflateEnds(t,e){const n=[];let i=0,s=0,r;for(let o=0,a=e.length;o<a;++o){const d=e[o],_=linearRingIsClockwise(t,i,d,2);if(r===void 0&&(r=_),_===r)n.push(e.slice(s,o+1));else{if(n.length===0)continue;n[n.length-1].push(e[s])}s=o+1,i=d}return n}class Polygon extends SimpleGeometry{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?extend$3(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,s){return s<closestSquaredDistanceXY(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,s))}containsXY(e,n){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),orientLinearRings(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,inflateCoordinatesArray(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,n=this.flatCoordinates,i=this.ends_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const d=i[o],_=new LinearRing(n.slice(r,d),e);s.push(_),r=d}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new Polygon(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function fromExtent(t){if(isEmpty(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],s=t[3],r=[e,n,e,s,i,s,i,n,e,n];return new Polygon(r,"XY",[r.length])}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const n=Object.assign({},e);for(const a in ViewProperty)delete n[a];this.setProperties(n,!0);const i=createResolutionConstraint(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;const s=createCenterConstraint(e),r=i.constraint,o=createRotationConstraint(e);this.constraints_={center:s,resolution:r,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;const i=this.getCenterInternal();if(i){const s=e||[0,0,0,0];n=n||[0,0,0,0];const r=this.getResolution(),o=r/2*(s[3]-n[3]+n[1]-s[1]),a=r/2*(s[0]-n[0]+n[2]-s[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(e){const n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const n=new Array(arguments.length);for(let i=0;i<n.length;++i){let s=arguments[i];s.center&&(s=Object.assign({},s),s.center=fromUserCoordinate(s.center,this.getProjection())),s.anchor&&(s=Object.assign({},s),s.anchor=fromUserCoordinate(s.anchor,this.getProjection())),n[i]=s}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let s=0;for(;s<n&&!this.isDef();++s){const C=arguments[s];C.center&&this.setCenterInternal(C.center),C.zoom!==void 0?this.setZoom(C.zoom):C.resolution&&this.setResolution(C.resolution),C.rotation!==void 0&&this.setRotation(C.rotation)}if(s===n){i&&animationCallback(i,!0);return}let r=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,d=this.targetRotation_;const _=[];for(;s<n;++s){const C=arguments[s],y={start:r,complete:!1,anchor:C.anchor,duration:C.duration!==void 0?C.duration:1e3,easing:C.easing||inAndOut,callback:i};if(C.center&&(y.sourceCenter=o,y.targetCenter=C.center.slice(),o=y.targetCenter),C.zoom!==void 0?(y.sourceResolution=a,y.targetResolution=this.getResolutionForZoom(C.zoom),a=y.targetResolution):C.resolution&&(y.sourceResolution=a,y.targetResolution=C.resolution,a=y.targetResolution),C.rotation!==void 0){y.sourceRotation=d;const v=modulo(C.rotation-d+Math.PI,2*Math.PI)-Math.PI;y.targetRotation=d+v,d=y.targetRotation}isNoopAnimation(y)?y.complete=!0:r+=y.duration,_.push(y)}this.animations_.push(_),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){const s=this.animations_[n];if(s[0].callback&&animationCallback(s[0].callback,!1),!e)for(let r=0,o=s.length;r<o;++r){const a=s[r];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let n=!1;for(let i=this.animations_.length-1;i>=0;--i){const s=this.animations_[i];let r=!0;for(let o=0,a=s.length;o<a;++o){const d=s[o];if(d.complete)continue;const _=e-d.start;let C=d.duration>0?_/d.duration:1;C>=1?(d.complete=!0,C=1):r=!1;const y=d.easing(C);if(d.sourceCenter){const v=d.sourceCenter[0],E=d.sourceCenter[1],S=d.targetCenter[0],R=d.targetCenter[1];this.nextCenter_=d.targetCenter;const x=v+y*(S-v),T=E+y*(R-E);this.targetCenter_=[x,T]}if(d.sourceResolution&&d.targetResolution){const v=y===1?d.targetResolution:d.sourceResolution+y*(d.targetResolution-d.sourceResolution);if(d.anchor){const E=this.getViewportSize_(this.getRotation()),S=this.constraints_.resolution(v,0,E,!0);this.targetCenter_=this.calculateCenterZoom(S,d.anchor)}this.nextResolution_=d.targetResolution,this.targetResolution_=v,this.applyTargetState_(!0)}if(d.sourceRotation!==void 0&&d.targetRotation!==void 0){const v=y===1?modulo(d.targetRotation+Math.PI,2*Math.PI)-Math.PI:d.sourceRotation+y*(d.targetRotation-d.sourceRotation);if(d.anchor){const E=this.constraints_.rotation(v,!0);this.targetCenter_=this.calculateCenterRotate(E,d.anchor)}this.nextRotation_=d.targetRotation,this.targetRotation_=v}if(this.applyTargetState_(!0),n=!0,!d.complete)break}if(r){this.animations_[i]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=s[0].callback;o&&animationCallback(o,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i;const s=this.getCenterInternal();return s!==void 0&&(i=[s[0]-n[0],s[1]-n[1]],rotate$1(i,e-this.getRotation()),add$1(i,n)),i}calculateCenterZoom(e,n){let i;const s=this.getCenterInternal(),r=this.getResolution();if(s!==void 0&&r!==void 0){const o=n[0]-e*(n[0]-s[0])/r,a=n[1]-e*(n[1]-s[1])/r;i=[o,a]}return i}getViewportSize_(e){const n=this.viewportSize_;if(e){const i=n[0],s=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(s*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(s*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const n=this.calculateExtentInternal(e);return toUserExtent(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const n=this.getCenterInternal();assert(n,"The view center is not defined");const i=this.getResolution();assert(i!==void 0,"The view resolution is not defined");const s=this.getRotation();return assert(s!==void 0,"The view rotation is not defined"),getForViewAndSize(n,i,s,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();const i=getWidth(e)/n[0],s=getHeight(e)/n[1];return Math.max(i,s)}getResolutionForValueFunction(e){e=e||2;const n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,s=Math.log(n/i)/Math.log(e);return function(r){return n/Math.pow(e,r*s)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),s=this.minResolution_,r=Math.log(i/s)/n;return function(o){return Math.log(i/o)/n/r}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e);const i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){const e=this.getProjection(),n=this.getResolution(),i=this.getRotation();let s=this.getCenterInternal();const r=this.padding_;if(r){const o=this.getViewportSizeMinusPadding_();s=calculateCenterOn(s,this.getViewportSize_(),[o[0]/2+r[3],o[1]/2+r[0]],n,i)}return{center:s.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,s;if(this.resolutions_){const r=linearFindNearest(this.resolutions_,e,1);n=r,i=this.resolutions_[r],r==this.resolutions_.length-1?s=2:s=i/this.resolutions_[r+1]}else i=this.maxResolution_,s=this.zoomFactor_;return n+Math.log(i/e)/Math.log(s)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const n=clamp(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,clamp(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const s=fromUserExtent(e,this.getProjection());i=fromExtent(s)}else if(e.getType()==="Circle"){const s=fromUserExtent(e.getExtent(),this.getProjection());i=fromExtent(s),i.rotate(this.getRotation(),getCenter(s))}else i=e;this.fitInternal(i,n)}rotatedExtentForGeometry(e){const n=this.getRotation(),i=Math.cos(n),s=Math.sin(-n),r=e.getFlatCoordinates(),o=e.getStride();let a=1/0,d=1/0,_=-1/0,C=-1/0;for(let y=0,v=r.length;y<v;y+=o){const E=r[y]*i-r[y+1]*s,S=r[y]*s+r[y+1]*i;a=Math.min(a,E),d=Math.min(d,S),_=Math.max(_,E),C=Math.max(C,S)}return[a,d,_,C]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());const s=n.padding!==void 0?n.padding:[0,0,0,0],r=n.nearest!==void 0?n.nearest:!1;let o;n.minResolution!==void 0?o=n.minResolution:n.maxZoom!==void 0?o=this.getResolutionForZoom(n.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let d=this.getResolutionForExtentInternal(a,[i[0]-s[1]-s[3],i[1]-s[0]-s[2]]);d=isNaN(d)?o:Math.max(d,o),d=this.getConstrainedResolution(d,r?0:1);const _=this.getRotation(),C=Math.sin(_),y=Math.cos(_),v=getCenter(a);v[0]+=(s[1]-s[3])/2*d,v[1]+=(s[0]-s[2])/2*d;const E=v[0]*y-v[1]*C,S=v[1]*y+v[0]*C,R=this.getConstrainedCenter([E,S],d),x=n.callback?n.callback:VOID;n.duration!==void 0?this.animateInternal({resolution:d,center:R,duration:n.duration,easing:n.easing},x):(this.targetResolution_=d,this.targetCenter_=R,this.applyTargetState_(!1,!0),animationCallback(x,!0))}centerOn(e,n,i){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(calculateCenterOn(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,s){let r;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-i),d=calculateCenterOn(e,s,[a[0]/2+o[3],a[1]/2+o[0]],n,i);r=[e[0]-d[0],e[1]-d[1]]}return r}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const n=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){const n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&fromUserCoordinate(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){const i=this.getAnimating()||this.getInteracting(),s=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*e,0,s,i);n&&(this.targetCenter_=this.calculateCenterZoom(r,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=fromUserCoordinate(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){const i=this.getAnimating()||this.getInteracting(),s=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(s,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){const i=this.getAnimating()||this.getInteracting()||n,s=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(s),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,s,r));this.get(ViewProperty.ROTATION)!==s&&this.set(ViewProperty.ROTATION,s),this.get(ViewProperty.RESOLUTION)!==o&&(this.set(ViewProperty.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),a))&&this.set(ViewProperty.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;const s=n||0,r=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(r),a=this.constraints_.resolution(this.targetResolution_,s,o),d=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,r,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=r,this.targetCenter_=d,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==r||!this.getCenterInternal()||!equals(this.getCenterInternal(),d))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:d,resolution:a,duration:e,easing:easeOut,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,n,i){i=i&&fromUserCoordinate(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){const i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}}function animationCallback(t,e){setTimeout(function(){t(e)},0)}function createCenterConstraint(t){if(t.extent!==void 0){const n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return createExtent(t.extent,t.constrainOnlyCenter,n)}const e=createProjection(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){const n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,createExtent(n,!1,!1)}return none$1}function createResolutionConstraint(t){let e,n,i,o=t.minZoom!==void 0?t.minZoom:DEFAULT_MIN_ZOOM,a=t.maxZoom!==void 0?t.maxZoom:28;const d=t.zoomFactor!==void 0?t.zoomFactor:2,_=t.multiWorld!==void 0?t.multiWorld:!1,C=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,y=t.showFullExtent!==void 0?t.showFullExtent:!1,v=createProjection(t.projection,"EPSG:3857"),E=v.getExtent();let S=t.constrainOnlyCenter,R=t.extent;if(!_&&!R&&v.isGlobal()&&(S=!1,R=E),t.resolutions!==void 0){const x=t.resolutions;n=x[o],i=x[a]!==void 0?x[a]:x[x.length-1],t.constrainResolution?e=createSnapToResolutions(x,C,!S&&R,y):e=createMinMaxResolution(n,i,C,!S&&R,y)}else{const T=(E?Math.max(getWidth(E),getHeight(E)):360*METERS_PER_UNIT$1.degrees/v.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),b=T/Math.pow(2,28-DEFAULT_MIN_ZOOM);n=t.maxResolution,n!==void 0?o=0:n=T/Math.pow(d,o),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(d,a):i=T/Math.pow(d,a):i=b),a=o+Math.floor(Math.log(n/i)/Math.log(d)),i=n/Math.pow(d,a-o),t.constrainResolution?e=createSnapToPower(d,n,i,C,!S&&R,y):e=createMinMaxResolution(n,i,C,!S&&R,y)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:d}}function createRotationConstraint(t){if(t.enableRotation!==void 0?t.enableRotation:!0){const n=t.constrainRotation;return n===void 0||n===!0?createSnapToZero():n===!1?none:typeof n=="number"?createSnapToN(n):none}return disable}function isNoopAnimation(t){return!(t.sourceCenter&&t.targetCenter&&!equals(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function calculateCenterOn(t,e,n,i,s){const r=Math.cos(-s);let o=Math.sin(-s),a=t[0]*r-t[1]*o,d=t[1]*r+t[0]*o;a+=(e[0]/2-n[0])*i,d+=(n[1]-e[1]/2)*i,o=-o;const _=a*r-d*o,C=d*r+a*o;return[_,C]}class Layer extends BaseLayer{constructor(e){const n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n;const i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof View?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let s;n.layerStatesArray?s=n.layerStatesArray.find(o=>o.layer===this):s=this.getLayerState();const r=this.getExtent();return inView(s,n.viewState)&&(!r||intersects$1(r,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n;const i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];const s=e instanceof View?e.getViewStateAndExtent():e;let r=n(s);return Array.isArray(r)||(r=[r]),r}render(e,n){const i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(n){const s=n.frameState.layerStatesArray,r=this.getLayerState(!1);assert(!s.some(function(o){return o.layer===r.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),s.push(r)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function inView(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer{constructor(e){e=e||{};const n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,n){return abstract()}loadedTileCallback(e,n,i){e[n]||(e[n]={}),e[n][i.tileCoord.toString()]=i}createLoadedTileFinder(e,n,i){return(s,r)=>{const o=this.loadedTileCallback.bind(this,i,s);return e.forEachLoadedTile(n,s,r,o)}}forEachFeatureAtCoordinate(e,n,i,s,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const n=e.target;(n.getState()===ImageState.LOADED||n.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=ImageState.LOADED&&n!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),n==ImageState.IDLE&&(e.load(),n=e.getState()),n==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,n,i,s){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=s}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(t,e){e=e||xyz.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],s=t[2]/e[2],r,o,a;return r=n*3.240969941904521+i*-1.537383177570093+s*-.498610760293,o=n*-.96924363628087+i*1.87596750150772+s*.041555057407175,a=n*.055630079696993+i*-.20397695888897+s*1.056971514242878,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=r*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,r=Math.min(Math.max(0,r),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[r*255,o*255,a*255]};rgb.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,s=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92;var r=n*.41239079926595+i*.35758433938387+s*.18048078840183,o=n*.21263900587151+i*.71516867876775+s*.072192315360733,a=n*.019330818715591+i*.11919477979462+s*.95053215224966;return e=e||xyz.whitepoint[2].E,[r*e[0],o*e[1],a*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,s,r,o,a,d,_,C,y,v,E,S,R;if(r=t[0],o=t[1],a=t[2],r===0)return[0,0,0];var x=.0011070564598794539;return e=e||"D65",n=n||2,y=xyz.whitepoint[n][e][0],v=xyz.whitepoint[n][e][1],E=xyz.whitepoint[n][e][2],S=4*y/(y+15*v+3*E),R=9*v/(y+15*v+3*E),i=o/(13*r)+S||0,s=a/(13*r)+R||0,_=r>8?v*Math.pow((r+16)/116,3):v*r*x,d=_*9*i/(4*s)||0,C=_*(12-3*i-20*s)/(4*s)||0,[d,_,C]}};xyz.luv=function(t,e,n){var i,s,r,o,a,d,_,C,y,v,E,S,R,x=.008856451679035631,T=903.2962962962961;e=e||"D65",n=n||2,y=xyz.whitepoint[n][e][0],v=xyz.whitepoint[n][e][1],E=xyz.whitepoint[n][e][2],S=4*y/(y+15*v+3*E),R=9*v/(y+15*v+3*E),d=t[0],_=t[1],C=t[2],i=4*d/(d+15*_+3*C)||0,s=9*_/(d+15*_+3*C)||0;var b=_/v;return r=b<=x?T*b:116*Math.pow(b,1/3)-16,o=13*r*(i-S),a=13*r*(s-R),[r,o,a]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],s,r,o;return o=i/360*2*Math.PI,s=n*Math.cos(o),r=n*Math.sin(o),[e,s,r]},xyz:function(t){return luv.xyz(lchuv.luv(t))}};luv.lchuv=function(t){var e=t[0],n=t[1],i=t[2],s=Math.sqrt(n*n+i*i),r=Math.atan2(i,n),o=r*360/2/Math.PI;return o<0&&(o+=360),[e,s,o]};xyz.lchuv=function(t){return luv.lchuv(xyz.luv(t))};const names$x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$2(t){var C,y;var e,n=[],i=1,s;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),names$x[t])n=names$x[t].slice(),s="rgb";else if(t==="transparent")i=0,s="rgb",n=[0,0,0];else if(t[0]==="#"){var r=t.slice(1),o=r.length,a=o<=4;i=1,a?(n=[parseInt(r[0]+r[0],16),parseInt(r[1]+r[1],16),parseInt(r[2]+r[2],16)],o===4&&(i=parseInt(r[3]+r[3],16)/255)):(n=[parseInt(r[0]+r[1],16),parseInt(r[2]+r[3],16),parseInt(r[4]+r[5],16)],o===8&&(i=parseInt(r[6]+r[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),s="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var d=e[1];s=d.replace(/a$/,"");var _=s==="cmyk"?4:s==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),s==="color"&&(s=n.shift()),n=n.map(function(v,E){if(v[v.length-1]==="%")return v=parseFloat(v)/100,E===3?v:s==="rgb"?v*255:s[0]==="h"||s[0]==="l"&&!E?v*100:s==="lab"?v*125:s==="lch"?E<2?v*150:v*360:s[0]==="o"&&!E?v:s==="oklab"?v*.4:s==="oklch"?E<2?v*.4:v*360:v;if(s[E]==="h"||E===2&&s[s.length-1]==="h"){if(baseHues[v]!==void 0)return baseHues[v];if(v.endsWith("deg"))return parseFloat(v);if(v.endsWith("turn"))return parseFloat(v)*360;if(v.endsWith("grad"))return parseFloat(v)*360/400;if(v.endsWith("rad"))return parseFloat(v)*180/Math.PI}return v==="none"?0:parseFloat(v)}),i=n.length>_?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(v){return parseFloat(v)}),s=((y=(C=t.match(/([a-z])/ig))==null?void 0:C.join(""))==null?void 0:y.toLowerCase())||"rgb");return{space:s,values:n,alpha:i}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,s,r,o,a,d,_=0;if(n===0)return d=i*255,[d,d,d];for(r=i<.5?i*(1+n):i+n-i*n,s=2*i-r,a=[0,0,0];_<3;)o=e+1/3*-(_-1),o<0?o++:o>1&&o--,d=6*o<1?s+(r-s)*6*o:2*o<1?r:3*o<2?s+(r-s)*(2/3-o)*6:s,a[_++]=d*255;return a}};rgb.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,s=Math.min(e,n,i),r=Math.max(e,n,i),o=r-s,a,d,_;return r===s?a=0:e===r?a=(n-i)/o:n===r?a=2+(i-e)/o:i===r&&(a=4+(e-n)/o),a=Math.min(a*60,360),a<0&&(a+=360),_=(s+r)/2,r===s?d=0:_<=.5?d=o/(r+s):d=o/(2-r-s),[a,d*100,_*100]};function rgba(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n=parse$2(t);if(!n.space)return[];const i=n.space[0]==="h"?hsl.min:rgb.min,s=n.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),s[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),s[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),s[2]),n.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function asString(t){return typeof t=="string"?t:toString(t)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(t){if(t.length===4)return t;const e=t.slice();return e[3]=1,e}function rgbaToLcha(t){const e=xyz.lchuv(rgb.xyz(t));return e[3]=t[3],e}function lchaToRgba(t){const e=xyz.rgb(lchuv.xyz(t));return e[3]=t[3],e}function fromString(t){if(cache.hasOwnProperty(t))return cache[t];if(cacheSize>=MAX_CACHE_SIZE){let n=0;for(const i in cache)n++&3||(delete cache[i],--cacheSize)}const e=rgba(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return normalize(e),cache[t]=e,++cacheSize,e}function asArray(t){return Array.isArray(t)?t:fromString(t)}function normalize(t){return t[0]=clamp(t[0]+.5|0,0,255),t[1]=clamp(t[1]+.5|0,0,255),t[2]=clamp(t[2]+.5|0,0,255),t[3]=clamp(t[3],0,1),t}function toString(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);const s=t[3]===void 0?1:Math.round(t[3]*100)/100;return"rgba("+e+","+n+","+i+","+s+")"}function isStringColor(t){try{return fromString(t),!0}catch{return!1}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,i){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let s;try{pixelContext.drawImage(e,n,i,1,1,0,0,1,1),s=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return s}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){const s=this.getLayer().getClassName();let r,o;if(e&&e.className===s&&(!i||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(i)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===n?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=s;let a=r.style;a.position="absolute",a.width="100%",a.height="100%",o=createCanvasContext2D();const d=o.canvas;r.appendChild(d),a=d.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=r,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){const s=getTopLeft(i),r=getTopRight(i),o=getBottomRight(i),a=getBottomLeft(i);apply(n.coordinateToPixelTransform,s),apply(n.coordinateToPixelTransform,r),apply(n.coordinateToPixelTransform,o),apply(n.coordinateToPixelTransform,a);const d=this.inversePixelTransform;apply(d,s),apply(d,r),apply(d,o),apply(d,a),e.save(),e.beginPath(),e.moveTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,n,i){const s=this.getLayer();if(s.hasListener(e)){const r=new RenderEvent(e,this.inversePixelTransform,i,n);s.dispatchEvent(r)}}preRender(e,n){this.frameState=n,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,n)}postRender(e,n){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,n)}getRenderTransform(e,n,i,s,r,o,a){const d=r/2,_=o/2,C=s/n,y=-C,v=-e[0]+a,E=-e[1];return compose(this.tempTransform,d,_,C,y,-i,v,E)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const n=this.getLayer(),i=e.getState(),s=n.getUseInterimTilesOnError();return i==TileState.LOADED||i==TileState.EMPTY||i==TileState.ERROR&&!s}getTile(e,n,i,s){const r=s.pixelRatio,o=s.viewState.projection,a=this.getLayer();let _=a.getSource().getTile(e,n,i,r,o);return _.getState()==TileState.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(_)||(_=_.getInterimTile()),_}getData(e){const n=this.frameState;if(!n)return null;const i=this.getLayer(),s=apply(n.pixelToCoordinateTransform,e.slice()),r=i.getExtent();if(r&&!containsCoordinate(r,s))return null;const o=n.pixelRatio,a=n.viewState.projection,d=n.viewState,_=i.getRenderSource(),C=_.getTileGridForProjection(d.projection),y=_.getTilePixelRatio(n.pixelRatio);for(let v=C.getZForResolution(d.resolution);v>=C.getMinZoom();--v){const E=C.getTileCoordForCoordAndZ(s,v),S=_.getTile(v,E[1],E[2],o,a);if(!(S instanceof ImageTile||S instanceof ReprojTile)||S instanceof ReprojTile&&S.getState()===TileState.EMPTY)return null;if(S.getState()!==TileState.LOADED)continue;const R=C.getOrigin(v),x=toSize(C.getTileSize(v)),T=C.getResolution(v),b=Math.floor(y*((s[0]-R[0])/T-E[1]*x[0])),M=Math.floor(y*((R[1]-s[1])/T-E[2]*x[1])),N=Math.round(y*_.getGutterForProjection(d.projection));return this.getImageData(S.getImage(),b+N,M+N)}return null}loadedTileCallback(e,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,n,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){const i=e.layerStatesArray[e.layerIndex],s=e.viewState,r=s.projection,o=s.resolution,a=s.center,d=s.rotation,_=e.pixelRatio,C=this.getLayer(),y=C.getSource(),v=y.getRevision(),E=y.getTileGridForProjection(r),S=E.getZForResolution(o,y.zDirection),R=E.getResolution(S);let x=e.extent;const T=e.viewState.resolution,b=y.getTilePixelRatio(_),M=Math.round(getWidth(x)/T*_),N=Math.round(getHeight(x)/T*_),k=i.extent&&fromUserExtent(i.extent);k&&(x=getIntersection(x,fromUserExtent(i.extent)));const G=R*M/2/b,Y=R*N/2/b,q=[a[0]-G,a[1]-Y,a[0]+G,a[1]+Y],le=E.getTileRangeForExtentAndZ(x,S),B={};B[S]={};const D=this.createLoadedTileFinder(y,r,B),X=this.tmpExtent,ce=this.tmpTileRange_;this.newTiles_=!1;const Me=d?getRotatedViewport(s.center,T,d,e.size):void 0;for(let et=le.minX;et<=le.maxX;++et)for(let Ue=le.minY;Ue<=le.maxY;++Ue){if(d&&!E.tileCoordIntersectsViewport([S,et,Ue],Me))continue;const We=this.getTile(S,et,Ue,e);if(this.isDrawableTile(We)){const ye=getUid(this);if(We.getState()==TileState.LOADED){B[S][We.tileCoord.toString()]=We;let fe=We.inTransition(ye);fe&&i.opacity!==1&&(We.endTransition(ye),fe=!1),!this.newTiles_&&(fe||!this.renderedTiles.includes(We))&&(this.newTiles_=!0)}if(We.getAlpha(ye,e.time)===1)continue}const He=E.getTileCoordChildTileRange(We.tileCoord,ce,X);let H=!1;He&&(H=D(S+1,He)),H||E.forEachTileCoordParentTileRange(We.tileCoord,D,ce,X)}const re=R/o*_/b;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/_,1/_,d,-M/2,-N/2);const ie=toString$1(this.pixelTransform);this.useContainer(n,ie,this.getBackground(e));const J=this.context,oe=J.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,M/2,N/2,re,re,0,-M/2,-N/2),oe.width!=M||oe.height!=N?(oe.width=M,oe.height=N):this.containerReused||J.clearRect(0,0,M,N),k&&this.clipUnrotated(J,e,k),y.getInterpolate()||(J.imageSmoothingEnabled=!1),this.preRender(J,e),this.renderedTiles.length=0;let Be=Object.keys(B).map(Number);Be.sort(ascending);let je,qe,ee;i.opacity===1&&(!this.containerReused||y.getOpaque(e.viewState.projection))?Be=Be.reverse():(je=[],qe=[]);for(let et=Be.length-1;et>=0;--et){const Ue=Be[et],We=y.getTilePixelSize(Ue,_,r),H=E.getResolution(Ue)/R,ye=We[0]*H*re,fe=We[1]*H*re,ke=E.getTileCoordForCoordAndZ(getTopLeft(q),Ue),Qe=E.getTileCoordExtent(ke),ct=apply(this.tempTransform,[b*(Qe[0]-q[0])/R,b*(q[3]-Qe[3])/R]),P=b*y.getGutterForProjection(r),L=B[Ue];for(const U in L){const $=L[U],K=$.tileCoord,de=ke[1]-K[1],ve=Math.round(ct[0]-(de-1)*ye),ae=ke[2]-K[2],se=Math.round(ct[1]-(ae-1)*fe),Q=Math.round(ct[0]-de*ye),F=Math.round(ct[1]-ae*fe),z=ve-Q,W=se-F,te=S===Ue,pe=te&&$.getAlpha(getUid(this),e.time)!==1;let Re=!1;if(!pe)if(je){ee=[Q,F,Q+z,F,Q+z,F+W,Q,F+W];for(let De=0,dt=je.length;De<dt;++De)if(S!==Ue&&Ue<qe[De]){const ht=je[De];intersects$1([Q,F,Q+z,F+W],[ht[0],ht[3],ht[4],ht[7]])&&(Re||(J.save(),Re=!0),J.beginPath(),J.moveTo(ee[0],ee[1]),J.lineTo(ee[2],ee[3]),J.lineTo(ee[4],ee[5]),J.lineTo(ee[6],ee[7]),J.moveTo(ht[6],ht[7]),J.lineTo(ht[4],ht[5]),J.lineTo(ht[2],ht[3]),J.lineTo(ht[0],ht[1]),J.clip())}je.push(ee),qe.push(Ue)}else J.clearRect(Q,F,z,W);this.drawTileImage($,e,Q,F,z,W,P,te),je&&!pe?(Re&&J.restore(),this.renderedTiles.unshift($)):this.renderedTiles.push($),this.updateUsedTiles(e.usedTiles,y,$)}}return this.renderedRevision=v,this.renderedResolution=R,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,q),this.renderedExtent_=q,this.renderedPixelRatio=_,this.renderedProjection=r,this.manageTilePyramid(e,y,E,_,r,x,S,C.getPreload()),this.scheduleExpireCache(e,y),this.postRender(J,e),i.extent&&J.restore(),J.imageSmoothingEnabled=!0,ie!==oe.style.transform&&(oe.style.transform=ie),this.container}drawTileImage(e,n,i,s,r,o,a,d){const _=this.getTileImage(e);if(!_)return;const C=getUid(this),y=n.layerStatesArray[n.layerIndex],v=y.opacity*(d?e.getAlpha(C,n.time):1),E=v!==this.context.globalAlpha;E&&(this.context.save(),this.context.globalAlpha=v),this.context.drawImage(_,a,a,_.width-2*a,_.height-2*a,i,s,r,o),E&&this.context.restore(),v!==y.opacity?n.animate=!0:d&&e.endTransition(C)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){const i=(function(s,r,o){const a=getUid(s);a in o.usedTiles&&s.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(i)}}updateUsedTiles(e,n,i){const s=getUid(n);s in e||(e[s]={}),e[s][i.getKey()]=!0}manageTilePyramid(e,n,i,s,r,o,a,d,_){const C=getUid(n);C in e.wantedTiles||(e.wantedTiles[C]={});const y=e.wantedTiles[C],v=e.tileQueue,E=i.getMinZoom(),S=e.viewState.rotation,R=S?getRotatedViewport(e.viewState.center,e.viewState.resolution,S,e.size):void 0;let x=0,T,b,M,N,k,G;for(G=E;G<=a;++G)for(b=i.getTileRangeForExtentAndZ(o,G,b),M=i.getResolution(G),N=b.minX;N<=b.maxX;++N)for(k=b.minY;k<=b.maxY;++k)S&&!i.tileCoordIntersectsViewport([G,N,k],R)||(a-G<=d?(++x,T=n.getTile(G,N,k,s,r),T.getState()==TileState.IDLE&&(y[T.getKey()]=!0,v.isKeyQueued(T.getKey())||v.enqueue([T,C,i.getTileCoordCenter(T.tileCoord),M])),_!==void 0&&_(T)):n.useTile(G,N,k,r));n.updateCacheSize(x,r)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$3={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,n,i){super(e),this.element=n,this.index=i}}class Collection extends BaseObject{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,s=this.array_.length;i<s;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){const n=this.array_;for(let i=0,s=n.length;i<s;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$3.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){const n=this.array_;for(let i=0,s=n.length;i<s;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;const n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,n,e)),n}setAt(e,n){const i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);const s=this.array_[e];this.array_[e]=n,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,s,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,n,e))}updateLength_(){this.set(Property$3.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,s=this.array_.length;i<s;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const n in this.cache_){const i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],--this.cacheSize_)}}}get(e,n,i){const s=getKey(e,n,i);return s in this.cache_?this.cache_[s]:null}set(e,n,i,s){const r=getKey(e,n,i);this.cache_[r]=s,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey(t,e,n){const i=n?asString(n):"null";return e+":"+t+":"+i}const shared=new IconImageCache;class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){abstract()}calculateMatrices2D(e){const n=e.viewState,i=e.coordinateToPixelTransform,s=e.pixelToCoordinateTransform;compose(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),makeInverse(s,i)}forEachFeatureAtCoordinate(e,n,i,s,r,o,a,d){let _;const C=n.viewState;function y(N,k,G,Y){return r.call(o,k,N?G:null,Y)}const v=C.projection,E=wrapX$1(e.slice(),v),S=[[0,0]];if(v.canWrapX()&&s){const N=v.getExtent(),k=getWidth(N);S.push([-k,0],[k,0])}const R=n.layerStatesArray,x=R.length,T=[],b=[];for(let N=0;N<S.length;N++)for(let k=x-1;k>=0;--k){const G=R[k],Y=G.layer;if(Y.hasRenderer()&&inView(G,C)&&a.call(d,Y)){const q=Y.getRenderer(),le=Y.getSource();if(q&&le){const B=le.getWrapX()?E:e,D=y.bind(null,G.managed);b[0]=B[0]+S[N][0],b[1]=B[1]+S[N][1],_=q.forEachFeatureAtCoordinate(b,n,i,D,T)}if(_)return _}}if(T.length===0)return;const M=1/T.length;return T.forEach((N,k)=>N.distanceSq+=k*M),T.sort((N,k)=>N.distanceSq-k.distanceSq),T.some(N=>_=N.callback(N.feature,N.layer,N.geometry)),_}hasFeatureAtCoordinate(e,n,i,s,r,o){return this.forEachFeatureAtCoordinate(e,n,i,s,TRUE,this,r,o)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(t,e){shared.expire()}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(t){const e=t.match(fontRegEx);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,s=fontRegExMatchIndex.length;i<s;++i){const r=e[i+1];r!==void 0&&(n[fontRegExMatchIndex[i]]=r)}return n.families=n.family.split(/,\s?/),n},defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",n=["monospace","serif"],i=n.length,s="wmytzilWMYTZIL@#/&?$%10";let r,o;function a(_,C,y){let v=!0;for(let E=0;E<i;++E){const S=n[E];if(o=measureTextWidth(_+" "+C+" "+e+S,s),y!=S){const R=measureTextWidth(_+" "+C+" "+e+y+","+S,s);v=v&&R!=o}}return!!v}function d(){let _=!0;const C=checkedFonts.getKeys();for(let y=0,v=C.length;y<v;++y){const E=C[y];checkedFonts.get(E)<100&&(a.apply(this,E.split(`
`))?(clear$1(textHeights),measureContext=null,measureFont=void 0,checkedFonts.set(E,100)):(checkedFonts.set(E,checkedFonts.get(E)+1,!0),_=!1))}_&&(clearInterval(r),r=void 0)}return function(_){const C=getFontParameters(_);if(!C)return;const y=C.families;for(let v=0,E=y.length;v<E;++v){const S=y[v],R=C.style+`
`+C.weight+`
`+S;checkedFonts.get(R)===void 0&&(checkedFonts.set(R,100,!0),a(C.style,C.weight,S)||(checkedFonts.set(R,0,!0),r===void 0&&(r=setInterval(d,32))))}}}(),measureTextHeight=function(){let t;return function(e){let n=textHeights[e];if(n==null){if(WORKER_OFFSCREEN_CANVAS){const i=getFontParameters(e),s=measureText(e,"Žg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);textHeights[e]=n}return n}}();function measureText(t,e){return measureContext||(measureContext=createCanvasContext2D(1,1)),t!=measureFont&&(measureContext.font=t,measureFont=measureContext.font),measureContext.measureText(e)}function measureTextWidth(t,e){return measureText(t,e).width}function measureAndCacheTextWidth(t,e,n){if(e in n)return n[e];const i=e.split(`
`).reduce((s,r)=>Math.max(s,measureTextWidth(t,r)),0);return n[e]=i,i}function getTextDimensions(t,e){const n=[],i=[],s=[];let r=0,o=0,a=0,d=0;for(let _=0,C=e.length;_<=C;_+=2){const y=e[_];if(y===`
`||_===C){r=Math.max(r,o),s.push(o),o=0,a+=d;continue}const v=e[_+1]||t.font,E=measureTextWidth(v,y);n.push(E),o+=E;const S=measureTextHeight(v);i.push(S),d=Math.max(d,S)}return{width:r,height:a,widths:n,heights:i,lineWidths:s}}function drawImageOrLabel(t,e,n,i,s,r,o,a,d,_,C){t.save(),n!==1&&(t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(d,_),t.scale(C[0],C[1]),executeLabelInstructions(i,t)):C[0]<0||C[1]<0?(t.translate(d,_),t.scale(C[0],C[1]),t.drawImage(i,s,r,o,a,0,0,o,a)):t.drawImage(i,s,r,o,a,d,_,o*C[0],a*C[1]),t.restore()}function executeLabelInstructions(t,e){const n=t.contextInstructions;for(let i=0,s=n.length;i<s;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,n){const i=this.getMap();if(i.hasListener(e)){const s=new RenderEvent(e,void 0,n);i.dispatchEvent(s)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const n=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),i=e.viewState;this.children_.length=0;const s=this.declutterLayers_;s.length=0;let r=null;for(let o=0,a=n.length;o<a;++o){const d=n[o];e.layerIndex=o;const _=d.layer,C=_.getSourceState();if(!inView(d,i)||C!="ready"&&C!="undefined"){_.unrender();continue}const y=_.render(e,r);y&&(y!==r&&(this.children_.push(y),r=y),"getDeclutter"in _&&s.push(_))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const n=this.declutterLayers_;for(let i=n.length-1;i>=0;--i)n[i].renderDeclutter(e);n.length=0}}class GroupEvent extends BaseEvent{constructor(e,n){super(e),this.layer=n}}const Property$2={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property$2.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Collection(i.slice(),{unique:!0}):assert(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Collection(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(unlistenByKey);clear$1(this.listenerKeys_);const n=e.getArray();for(let i=0,s=n.length;i<s;i++){const r=n[i];this.registerLayerListeners_(r),this.dispatchEvent(new GroupEvent("addlayer",r))}this.changed()}registerLayerListeners_(e){const n=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&n.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new GroupEvent("addlayer",n)),this.changed()}handleLayersRemove_(e){const n=e.element,i=getUid(n);this.listenerKeys_[i].forEach(unlistenByKey),delete this.listenerKeys_[i],this.dispatchEvent(new GroupEvent("removelayer",n)),this.changed()}getLayers(){return this.get(Property$2.LAYERS)}setLayers(e){const n=this.getLayers();if(n){const i=n.getArray();for(let s=0,r=i.length;s<r;++s)this.dispatchEvent(new GroupEvent("removelayer",i[s]))}this.set(Property$2.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){const n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(n)});const s=this.getLayerState();let r=s.zIndex;!e&&s.zIndex===void 0&&(r=0);for(let o=i,a=n.length;o<a;o++){const d=n[o];d.opacity*=s.opacity,d.visible=d.visible&&s.visible,d.maxResolution=Math.min(d.maxResolution,s.maxResolution),d.minResolution=Math.max(d.minResolution,s.minResolution),d.minZoom=Math.max(d.minZoom,s.minZoom),d.maxZoom=Math.min(d.maxZoom,s.maxZoom),s.extent!==void 0&&(d.extent!==void 0?d.extent=getIntersection(d.extent,s.extent):d.extent=s.extent),d.zIndex===void 0&&(d.zIndex=r)}return n}getSourceState(){return"ready"}}class MapEvent extends BaseEvent{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}}class MapBrowserEvent extends MapEvent{constructor(e,n,i,s,r,o){super(e,n,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=s!==void 0?s:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=listen(i,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(i,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let n=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){const n=e,i=n.pointerId;if(n.type==MapBrowserEventType.POINTERUP||n.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[i];for(const s in this.trackedTouches_)if(this.trackedTouches_[s].target!==n.target){delete this.trackedTouches_[s];break}}else(n.type==MapBrowserEventType.POINTERDOWN||n.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const n=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const n=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(i,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(i,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const n=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){const n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));const s=this.keyFunction_(i);return delete this.queuedElements_[s],i}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const n=this.priorityFunction_(e);return n!=DROP?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const n=this.elements_,i=this.priorities_,s=n.length,r=n[e],o=i[e],a=e;for(;e<s>>1;){const d=this.getLeftChildIndex_(e),_=this.getRightChildIndex_(e),C=_<s&&i[_]<i[d]?_:d;n[e]=n[C],i[e]=i[C],e=C}n[e]=r,i[e]=o,this.siftDown_(a,e)}siftDown_(e,n){const i=this.elements_,s=this.priorities_,r=i[n],o=s[n];for(;n>e;){const a=this.getParentIndex_(n);if(s[a]>o)i[n]=i[a],s[n]=s[a],n=a;else break}i[n]=r,s[n]=o}reprioritize(){const e=this.priorityFunction_,n=this.elements_,i=this.priorities_;let s=0;const r=n.length;let o,a,d;for(a=0;a<r;++a)o=n[a],d=e(o),d==DROP?delete this.queuedElements_[this.keyFunction_(o)]:(i[s]=d,n[s++]=o);n.length=s,i.length=s,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const n=super.enqueue(e);return n&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const n=e.target,i=n.getState();if(i===TileState.LOADED||i===TileState.ERROR||i===TileState.EMPTY){i!==TileState.ERROR&&n.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const s=n.getKey();s in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[s],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0,s,r,o;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;)r=this.dequeue()[0],o=r.getKey(),s=r.getState(),s===TileState.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++i,r.load())}}function getTilePriority(t,e,n,i,s){if(!t||!(n in t.wantedTiles)||!t.wantedTiles[n][e.getKey()])return DROP;const r=t.viewState.center,o=i[0]-r[0],a=i[1]-r[1];return 65536*Math.log(s)+Math.sqrt(o*o+a*a)/s}class Control extends BaseObject{constructor(e){super();const n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)unlistenByKey(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",s=e.expandClassName!==void 0?e.expandClassName:n+"-expand",r=e.collapseLabel!==void 0?e.collapseLabel:"›",o=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=o):this.collapseLabel_=r;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=s):this.label_=a;const d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(d),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const _=n+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),C=this.element;C.className=_,C.appendChild(this.toggleButton_),C.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const n=Array.from(new Set(this.getMap().getAllLayers().flatMap(s=>s.getAttributions(e)))),i=!this.getMap().getAllLayers().some(s=>s.getSource()&&s.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=this.collectSourceAttributions_(e),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!equals$2(n,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let s=0,r=n.length;s<r;++s){const o=document.createElement("li");o.innerHTML=n[s],this.ulElement_.appendChild(o)}this.renderedAttributions_=n}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"⇧",s=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=s,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(s));const r=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=n+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const a=n+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,d=this.element;d.className=a,d.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const n=this.getMap().getView();if(!n)return;const i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:easeOut}):n.setRotation(0))}render(e){const n=e.frameState;if(!n)return;const i=n.viewState.rotation;if(i!=this.rotation_){const s="rotate("+i+"rad)";if(this.autoHide_){const r=this.element.classList.contains(CLASS_HIDDEN);!r&&i===0?this.element.classList.add(CLASS_HIDDEN):r&&i!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=s}this.rotation_=i}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,s=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",r=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",d=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",_=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",C=document.createElement("button");C.className=s,C.setAttribute("type","button"),C.title=d,C.appendChild(typeof o=="string"?document.createTextNode(o):o),C.addEventListener(EventType.CLICK,this.handleClick_.bind(this,i),!1);const y=document.createElement("button");y.className=r,y.setAttribute("type","button"),y.title=_,y.appendChild(typeof a=="string"?document.createTextNode(a):a),y.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-i),!1);const v=n+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,E=this.element;E.className=v,E.appendChild(C),E.appendChild(y),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const i=this.getMap().getView();if(!i)return;const s=i.getZoom();if(s!==void 0){const r=i.getConstrainedZoom(s+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:r,duration:this.duration_,easing:easeOut})):i.setZoom(r)}}}function defaults$1(t){t=t||{};const e=new Collection;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Zoom(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Rotate(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Attribution(t.attributionOptions)),e}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(t,e,n){const i=t.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:linear,center:t.getConstrainedCenter(s)})}}function zoomByDelta(t,e,n,i){const s=t.getZoom();if(s===void 0)return;const r=t.getConstrainedZoom(s+e),o=t.getResolutionForZoom(r);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:i!==void 0?i:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==MapBrowserEventType.DBLCLICK){const i=e.originalEvent,s=e.map,r=e.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=s.getView();zoomByDelta(a,o,r,this.duration_),i.preventDefault(),n=!0}return!n}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(t){const e=t.length;let n=0,i=0;for(let s=0;s<e;s++)n+=t[s].clientX,i+=t[s].clientY;return{clientX:n/e,clientY:i/e}}function all$1(t){const e=arguments;return function(n){let i=!0;for(let s=0,r=e.length;s<r&&(i=i&&e[s](n),!!i);++s);return i}}const altKeyOnly=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},focusWithTabindex=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?focus(t):!0},always$1=TRUE,mouseActionButton=function(t){const e=t.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,singleClick=function(t){return t.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(t){const e=t.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(t){const e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(t){const e=t.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(t){const e=t.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const n=e.condition?e.condition:all$1(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all$1(focusWithTabindex,n):n,this.noKinetic_=!1}handleDragEvent(e){const n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());const i=this.targetPointers,s=n.getEventPixel(centroid(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(s[0],s[1]),this.lastCentroid){const r=[this.lastCentroid[0]-s[0],s[1]-this.lastCentroid[1]],a=e.map.getView();scale$2(r,a.getResolution()),rotate$1(r,a.getRotation()),a.adjustCenterInternal(r)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=s,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){const n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const s=this.kinetic_.getDistance(),r=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(o),d=n.getCoordinateFromPixelInternal([a[0]-s*Math.cos(r),a[1]-s*Math.sin(r)]);i.animateInternal({center:i.getConstrainedCenter(d),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const n=e.map,i=n.getView();if(i.getConstraints().rotation===disable)return;const s=n.getSize(),r=e.pixel,o=Math.atan2(s[1]/2-r[1],r[0]-s[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,n=this.endPixel_,i="px",s=this.element_.style;s.left=Math.min(e[0],n[0])+i,s.top=Math.min(e[1],n[1])+i,s.width=Math.abs(n[0]-e[0])+i,s.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,n=this.endPixel_,s=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);s[4]=s[0].slice(),this.geometry_?this.geometry_.setCoordinates([s]):this.geometry_=new Polygon([s])}getGeometry(){return this.geometry_}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){const s=i[0]-n[0],r=i[1]-n[1];return s*s+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(n?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragZoom extends DragBox{constructor(e){e=e||{};const n=e.condition?e.condition:shiftKeyOnly;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const i=this.getMap().getView();let s=this.getGeometry();if(this.out_){const r=i.rotatedExtentForGeometry(s),o=i.getResolutionForExtentInternal(r),a=i.getResolution()/o;s=s.clone(),s.scale(a*a)}i.fitInternal(s,{duration:this.duration_,easing:easeOut})}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return noModifierKeys(n)&&targetNotEditable(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==EventType.KEYDOWN){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==Key.DOWN||s==Key.LEFT||s==Key.RIGHT||s==Key.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let d=0,_=0;s==Key.DOWN?_=-a:s==Key.LEFT?d=-a:s==Key.RIGHT?d=a:_=a;const C=[d,_];rotate$1(C,o.getRotation()),pan(o,C,this.duration_),i.preventDefault(),n=!0}}return!n}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!platformModifierKey(n)&&targetNotEditable(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const i=e.originalEvent,s=i.key;if(this.condition_(e)&&(s==="+"||s==="-")){const r=e.map,o=s==="+"?this.delta_:-this.delta_,a=r.getView();zoomByDelta(a,o,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}}class Kinetic{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;const s=this.points_[n+2]-this.points_[i+2];if(s<1e3/60)return!1;const r=this.points_[n]-this.points_[i],o=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(o,r),this.initialVelocity_=Math.sqrt(r*r+o*o)/s,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const n=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all$1(focusWithTabindex,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const i=e.map,s=e.originalEvent;s.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let r;if(e.type==EventType.WHEEL&&(r=s.deltaY,FIREFOX&&s.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=DEVICE_PIXEL_RATIO),s.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),r===0)return!1;this.lastDelta_=r;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const d=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),d),!1}handleWheelZoom_(e){const n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),zoomByDelta(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=FALSE),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0;const i=this.targetPointers[0],s=this.targetPointers[1],r=Math.atan2(s.clientY-i.clientY,s.clientX-i.clientX);if(this.lastAngle_!==void 0){const d=r-this.lastAngle_;this.rotationDelta_+=d,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=d}this.lastAngle_=r;const o=e.map,a=o.getView();a.getConstraints().rotation!==disable&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const n=e;n.stopDown||(n.stopDown=FALSE),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1;const i=this.targetPointers[0],s=this.targetPointers[1],r=i.clientX-s.clientX,o=i.clientY-s.clientY,a=Math.sqrt(r*r+o*o);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;const d=e.map,_=d.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=d.getCoordinateFromPixelInternal(d.getEventPixel(centroid(this.targetPointers))),d.render(),_.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const i=e.map.getView(),s=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,s),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}}function defaults(t){t=t||{};const e=new Collection,n=new Kinetic(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new DragRotate),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new DragPan({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new PinchRotate),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new PinchZoom({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new DragZoom({duration:t.zoomDuration})),e}function removeLayerMapProperty(t){if(t instanceof Layer){t.setMapInternal(null);return}t instanceof LayerGroup&&t.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(t,e){if(t instanceof Layer){t.setMapInternal(e);return}if(t instanceof LayerGroup){const n=t.getLayers().getArray();for(let i=0,s=n.length;i<s;++i)setLayerMapProperty(n[i],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const n=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||defaults$1(),this.interactions=n.interactions||defaults({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(n.values);const i=this;e.view&&!(e.view instanceof View)&&e.view.then(function(s){i.setView(new View(s))}),this.controls.addEventListener(CollectionEventType.ADD,s=>{s.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,s=>{s.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,s=>{s.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,s=>{s.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,s=>{this.addOverlayInternal_(s.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,s=>{const r=s.element.getId();r!==void 0&&delete this.overlayIdIndex_[r.toString()],s.element.setMap(null)}),this.controls.forEach(s=>{s.setMap(this)}),this.interactions.forEach(s=>{s.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;const s=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};const r=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:TRUE,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(s,this.frameState_,r,a,n,null,o,null)}getFeaturesAtPixel(e,n){const i=[];return this.forEachFeatureAtPixel(e,function(s){i.push(s)},n),i}getAllLayers(){const e=[];function n(i){i.forEach(function(s){s instanceof LayerGroup?n(s.getLayers()):e.push(s)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.layerFilter!==void 0?n.layerFilter:TRUE,r=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,o,s,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const i=this.viewport_.getBoundingClientRect(),s=this.getSize(),r=i.width/s[0],o=i.height/s[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/r,(a.clientY-i.top)/o]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const n=this.frameState_;return n?apply(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const n=this.getLayerGroup();if(e instanceof Collection){n.setLayers(e);return}const i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const s=e[n];if(!s.visible)continue;const r=s.layer.getRenderer();if(r&&!r.ready)return!0;const o=s.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const n=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){const n=this.frameState_;return n?apply(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,s){return getTilePriority(this.frameState_,e,n,i,s)}handleBrowserEvent(e,n){n=n||e.type;const i=new MapBrowserEvent(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;const n=e.originalEvent,i=n.type;if(i===PointerEventType.POINTERDOWN||i===EventType.WHEEL||i===EventType.KEYDOWN){const s=this.getOwnerDocument(),r=this.viewport_.getRootNode?this.viewport_.getRootNode():s,o=n.target;if(this.overlayContainerStopEvent_.contains(o)||!(r===s?s.documentElement:r).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const s=this.getInteractions().getArray().slice();for(let r=s.length-1;r>=0;r--){const o=s[r];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let s=this.maxTilesLoading_,r=s;if(e){const o=e.viewHints;if(o[ViewHint.ANIMATING]||o[ViewHint.INTERACTING]){const a=Date.now()-e.time>8;s=a?0:8,r=a?0:2}}n.getTilesLoading()<s&&(n.reprioritize(),n.loadMoreTiles(s,r))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const i=this.postRenderFunctions_;for(let s=0,r=i.length;s<r;++s)i[s](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,s=this.targetChangeHandlerKeys_.length;i<s;++i)unlistenByKey(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const r in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[r],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[listen(i,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(i,EventType.KEYPRESS,this.handleBrowserEvent,this)];const s=n.getRootNode();s instanceof ShadowRoot&&this.resizeObserver_.observe(s.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){const s=e[n].layer;s.hasRenderer()&&s.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const n=this.getSize(),i=this.getView(),s=this.frameState_;let r=null;if(n!==void 0&&hasArea(n)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:getUid(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const d=isNaN(a.nextRotation)?a.rotation:a.nextRotation;r.nextExtent=getForViewAndSize(a.nextCenter,a.nextResolution,d,n)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),s&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(r.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,s)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!r.viewHints[ViewHint.ANIMATING]&&!r.viewHints[ViewHint.INTERACTING]&&!equals$1(r.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,r)),clone(r.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const n=this.getLayerGroup();n&&this.handleLayerRemove_(new GroupEvent("removelayer",n)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const n=this;e.then(function(i){n.setView(new View(i))})}updateSize(){const e=this.getTargetElement();let n;if(e){const s=getComputedStyle(e),r=e.offsetWidth-parseFloat(s.borderLeftWidth)-parseFloat(s.paddingLeft)-parseFloat(s.paddingRight)-parseFloat(s.borderRightWidth),o=e.offsetHeight-parseFloat(s.borderTopWidth)-parseFloat(s.paddingTop)-parseFloat(s.paddingBottom)-parseFloat(s.borderBottomWidth);!isNaN(r)&&!isNaN(o)&&(n=[r,o],!hasArea(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const i=this.getSize();n&&(!i||!equals$2(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){const n=this.getView();n&&n.setViewportSize(e)}};function createOptionsInternal(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new LayerGroup({layers:t.layers});n[MapProperty.LAYERGROUP]=i,n[MapProperty.TARGET]=t.target,n[MapProperty.VIEW]=t.view instanceof View?t.view:new View;let s;t.controls!==void 0&&(Array.isArray(t.controls)?s=new Collection(t.controls.slice()):(assert(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),s=t.controls));let r;t.interactions!==void 0&&(Array.isArray(t.interactions)?r=new Collection(t.interactions.slice()):(assert(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),r=t.interactions));let o;return t.overlays!==void 0?Array.isArray(t.overlays)?o=new Collection(t.overlays.slice()):(assert(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Collection,{controls:s,interactions:r,keyboardEventTarget:e,overlays:o,values:n}}const _sfc_main$a={__name:"Map",setup(t){const e=ref(0),n=new Map$1;onMounted(()=>{n.setTarget(e.value);const s=document.getElementById("map").getElementsByTagName("canvas");s.length&&(s[0].tabIndex=0)});function i(){e.value.focus()}return provide("map",n),(s,r)=>(openBlock(),createElementBlock("div",{id:"map",ref_key:"mapRef",ref:e,tabindex:"0",onMouseover:i},[renderSlot(s.$slots,"default")],544))}},_sfc_main$9={__name:"View",props:{zoom:Number,center:Array,layers:Array},setup(t){const e=t,n=inject("map"),i={zoom:e.zoom,center:e.center},s=new View(i);return onMounted(()=>{n&&(e.layers.forEach(r=>{n.addLayer(r)}),n.setView(s))}),(r,o)=>(openBlock(),createElementBlock("div"))}};var ControlExtended=class extends Control{constructor(e){super(e)}setPosition(e){var n=new PositionFactory(this);n.set(e)}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Kt,nn,Gt,Ht,Zt,sn;class PositionFactory{constructor(e){Xt(this,Kt);Xt(this,Gt);Xt(this,Zt);return this.caller=e,Nt(this,Gt,Ht).call(this,"top-left"),Nt(this,Gt,Ht).call(this,"top-right"),Nt(this,Gt,Ht).call(this,"bottom-left"),Nt(this,Gt,Ht).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Nt(this,Zt,sn).call(this,e),document.getElementById("position-container-"+e).appendChild(this.caller.element))}}Kt=new WeakSet,nn=function(e){var n=document.getElementById("position-container-"+e);return!!n},Gt=new WeakSet,Ht=function(e){if(!Nt(this,Kt,nn).call(this,e)){var n=document.createElement("div");n.id="position-container-"+e,n.className="position-container-"+e;var i=this.caller.getMap().getOverlayContainerStopEvent();i.appendChild(n)}},Zt=new WeakSet,sn=function(e){const n=o=>{var a=document.getElementById("position-container-"+o),d=a.offsetWidth;return d},i=o=>{o.style.top="unset",o.style.bottom="unset",o.style.left="unset",o.style.right="unset"};i(this.caller.element),this.caller.element.style.position="unset";var s=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(s.length!==0){s.forEach(o=>{i(o)});var r=s[0];switch(e.toLowerCase()){case"top-left":r.style.top="0px",r.style.left=n(e)+"px";break;case"bottom-left":r.style.bottom="0px",r.style.left=n(e)+"px";break;case"top-right":r.style.top="0px",r.style.right=n(e)+"px";break;case"bottom-right":r.style.bottom="0px",r.style.right=n(e)+"px";break}}};const Property$1={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$1.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$1.MAP,this.handleMapChanged),this.addChangeListener(Property$1.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$1.POSITION,this.handlePositionChanged),this.addChangeListener(Property$1.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$1.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$1.MAP)||null}getOffset(){return this.get(Property$1.OFFSET)}getPosition(){return this.get(Property$1.POSITION)}getPositioning(){return this.get(Property$1.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const n=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?n.insertBefore(this.element,n.childNodes[0]||null):n.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$1.ELEMENT,e)}setMap(e){this.set(Property$1.MAP,e)}setOffset(e){this.set(Property$1.OFFSET,e)}setPosition(e){this.set(Property$1.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const n=this.getMap();if(!n||!n.getTargetElement()||!this.get(Property$1.POSITION))return;const i=this.getRect(n.getTargetElement(),n.getSize()),s=this.getElement(),r=this.getRect(s,[outerWidth(s),outerHeight(s)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!containsExtent(i,r)){const a=r[0]-i[0],d=i[2]-r[2],_=r[1]-i[1],C=i[3]-r[3],y=[0,0];if(a<0?y[0]=a-o:d<0&&(y[0]=Math.abs(d)+o),_<0?y[1]=_-o:C<0&&(y[1]=Math.abs(C)+o),y[0]!==0||y[1]!==0){const v=n.getView().getCenterInternal(),E=n.getPixelFromCoordinateInternal(v);if(!E)return;const S=[E[0]+y[0],E[1]+y[1]],R=e.animation||{};n.getView().animateInternal({center:n.getCoordinateFromPixelInternal(S),duration:R.duration,easing:R.easing})}}}getRect(e,n){const i=e.getBoundingClientRect(),s=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[s,r,s+n[0],r+n[1]]}setPositioning(e){this.set(Property$1.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),n=this.getPosition();if(!e||!e.isRendered()||!n){this.setVisible(!1);return}const i=e.getPixelFromCoordinate(n),s=e.getSize();this.updateRenderedPosition(i,s)}updateRenderedPosition(e,n){const i=this.element.style,s=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+s[0])+"px",a=Math.round(e[1]+s[1])+"px";let d="0%",_="0%";r=="bottom-right"||r=="center-right"||r=="top-right"?d="-100%":(r=="bottom-center"||r=="center-center"||r=="top-center")&&(d="-50%"),r=="bottom-left"||r=="bottom-center"||r=="bottom-right"?_="-100%":(r=="center-left"||r=="center-center"||r=="center-right")&&(_="-50%");const C=`translate(${d}, ${_}) translate(${o}, ${a})`;this.rendered.transform_!=C&&(this.rendered.transform_=C,i.transform=C)}getOptions(){return this.options}}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var loglevel={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(commonjsGlobal,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),s=["trace","debug","info","warn","error"],r={},o=null;function a(R,x){var T=R[x];if(typeof T.bind=="function")return T.bind(R);try{return Function.prototype.bind.call(T,R)}catch{return function(){return Function.prototype.apply.apply(T,[R,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function _(R){return R==="debug"&&(R="log"),typeof console===n?!1:R==="trace"&&i?d:console[R]!==void 0?a(console,R):console.log!==void 0?a(console,"log"):e}function C(){for(var R=this.getLevel(),x=0;x<s.length;x++){var T=s[x];this[T]=x<R?e:this.methodFactory(T,R,this.name)}if(this.log=this.debug,typeof console===n&&R<this.levels.SILENT)return"No console available for logging"}function y(R){return function(){typeof console!==n&&(C.call(this),this[R].apply(this,arguments))}}function v(R,x,T){return _(R)||y.apply(this,arguments)}function E(R,x){var T=this,b,M,N,k="loglevel";typeof R=="string"?k+=":"+R:typeof R=="symbol"&&(k=void 0);function G(D){var X=(s[D]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=X;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+X+";"}catch{}}}function Y(){var D;if(!(typeof window===n||!k)){try{D=window.localStorage[k]}catch{}if(typeof D===n)try{var X=window.document.cookie,ce=encodeURIComponent(k),Me=X.indexOf(ce+"=");Me!==-1&&(D=/^([^;]+)/.exec(X.slice(Me+ce.length+1))[1])}catch{}return T.levels[D]===void 0&&(D=void 0),D}}function q(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function le(D){var X=D;if(typeof X=="string"&&T.levels[X.toUpperCase()]!==void 0&&(X=T.levels[X.toUpperCase()]),typeof X=="number"&&X>=0&&X<=T.levels.SILENT)return X;throw new TypeError("log.setLevel() called with invalid level: "+D)}T.name=R,T.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},T.methodFactory=x||v,T.getLevel=function(){return N??M??b},T.setLevel=function(D,X){return N=le(D),X!==!1&&G(N),C.call(T)},T.setDefaultLevel=function(D){M=le(D),Y()||T.setLevel(D,!1)},T.resetLevel=function(){N=null,q(),C.call(T)},T.enableAll=function(D){T.setLevel(T.levels.TRACE,D)},T.disableAll=function(D){T.setLevel(T.levels.SILENT,D)},T.rebuild=function(){if(o!==T&&(b=le(o.getLevel())),C.call(T),o===T)for(var D in r)r[D].rebuild()},b=le(o?o.getLevel():"WARN");var B=Y();B!=null&&(N=le(B)),C.call(T)}o=new E,o.getLogger=function(x){if(typeof x!="symbol"&&typeof x!="string"||x==="")throw new TypeError("You must supply a name when creating a logger.");var T=r[x];return T||(T=r[x]=new E(x,o.methodFactory)),T};var S=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=S),o},o.getLoggers=function(){return r},o.default=o,o})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(t){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var n=t||"default";return loglevelExports.getLogger(n)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(t,e){if(Object.keys(arguments).length===0)return"Message indefined !";var n=Array.prototype.slice.call(arguments),i=n.shift(),s=n,r=this[i];try{Array.isArray(s)&&s.length>0?r=r.replace("%var%",s.join(" - ")):r=r.replace("%var%","%var% (not specified)")}catch{}return r}},Helper$1={normalyzeParameters:function(t){var e=null;if(t){var n=[];for(var i in t)if(t.hasOwnProperty(i)){var s=t[i];s||(s=""),n.push(i+"="+s)}e=n.join("&")}return e},normalyzeUrl:function(t,e,n){var i=t;if(t){var s=t.indexOf("?");s===-1&&(i+="?"),s!==-1&&s!==t.length-1&&(i+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),i+=e):i+=this.normalyzeParameters(e)),n&&(i=encodeURIComponent(i)),i},indent:function(t,e){var n=t||0;return new Array(n+1).join("	")+e}};function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(t,e){(function(n,i){t.exports=i()})(commonjsGlobal,function(){function n(F){var z=typeof F;return F!==null&&(z==="object"||z==="function")}function i(F){return typeof F=="function"}var s=void 0;Array.isArray?s=Array.isArray:s=function(F){return Object.prototype.toString.call(F)==="[object Array]"};var r=s,o=0,a=void 0,d=void 0,_=function(z,W){G[o]=z,G[o+1]=W,o+=2,o===2&&(d?d(Y):le())};function C(F){d=F}function y(F){_=F}var v=typeof window<"u"?window:void 0,E=v||{},S=E.MutationObserver||E.WebKitMutationObserver,R=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",x=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function T(){return function(){return process.nextTick(Y)}}function b(){return typeof a<"u"?function(){a(Y)}:k()}function M(){var F=0,z=new S(Y),W=document.createTextNode("");return z.observe(W,{characterData:!0}),function(){W.data=F=++F%2}}function N(){var F=new MessageChannel;return F.port1.onmessage=Y,function(){return F.port2.postMessage(0)}}function k(){var F=setTimeout;return function(){return F(Y,1)}}var G=new Array(1e3);function Y(){for(var F=0;F<o;F+=2){var z=G[F],W=G[F+1];z(W),G[F]=void 0,G[F+1]=void 0}o=0}function q(){try{var F=Function("return this")().require("vertx");return a=F.runOnLoop||F.runOnContext,b()}catch{return k()}}var le=void 0;R?le=T():S?le=M():x?le=N():v===void 0&&typeof commonjsRequire=="function"?le=q():le=k();function B(F,z){var W=this,te=new this.constructor(ce);te[X]===void 0&&P(te);var pe=W._state;if(pe){var Re=arguments[pe-1];_(function(){return fe(pe,te,Re,W._result)})}else H(W,te,F,z);return te}function D(F){var z=this;if(F&&typeof F=="object"&&F.constructor===z)return F;var W=new z(ce);return et(W,F),W}var X=Math.random().toString(36).substring(2);function ce(){}var Me=void 0,re=1,ie=2;function J(){return new TypeError("You cannot resolve a promise with itself")}function oe(){return new TypeError("A promises callback cannot return that same promise.")}function Be(F,z,W,te){try{F.call(z,W,te)}catch(pe){return pe}}function je(F,z,W){_(function(te){var pe=!1,Re=Be(W,z,function(De){pe||(pe=!0,z!==De?et(te,De):We(te,De))},function(De){pe||(pe=!0,He(te,De))},"Settle: "+(te._label||" unknown promise"));!pe&&Re&&(pe=!0,He(te,Re))},F)}function qe(F,z){z._state===re?We(F,z._result):z._state===ie?He(F,z._result):H(z,void 0,function(W){return et(F,W)},function(W){return He(F,W)})}function ee(F,z,W){z.constructor===F.constructor&&W===B&&z.constructor.resolve===D?qe(F,z):W===void 0?We(F,z):i(W)?je(F,z,W):We(F,z)}function et(F,z){if(F===z)He(F,J());else if(n(z)){var W=void 0;try{W=z.then}catch(te){He(F,te);return}ee(F,z,W)}else We(F,z)}function Ue(F){F._onerror&&F._onerror(F._result),ye(F)}function We(F,z){F._state===Me&&(F._result=z,F._state=re,F._subscribers.length!==0&&_(ye,F))}function He(F,z){F._state===Me&&(F._state=ie,F._result=z,_(Ue,F))}function H(F,z,W,te){var pe=F._subscribers,Re=pe.length;F._onerror=null,pe[Re]=z,pe[Re+re]=W,pe[Re+ie]=te,Re===0&&F._state&&_(ye,F)}function ye(F){var z=F._subscribers,W=F._state;if(z.length!==0){for(var te=void 0,pe=void 0,Re=F._result,De=0;De<z.length;De+=3)te=z[De],pe=z[De+W],te?fe(W,te,pe,Re):pe(Re);F._subscribers.length=0}}function fe(F,z,W,te){var pe=i(W),Re=void 0,De=void 0,dt=!0;if(pe){try{Re=W(te)}catch(ht){dt=!1,De=ht}if(z===Re){He(z,oe());return}}else Re=te;z._state!==Me||(pe&&dt?et(z,Re):dt===!1?He(z,De):F===re?We(z,Re):F===ie&&He(z,Re))}function ke(F,z){try{z(function(te){et(F,te)},function(te){He(F,te)})}catch(W){He(F,W)}}var Qe=0;function ct(){return Qe++}function P(F){F[X]=Qe++,F._state=void 0,F._result=void 0,F._subscribers=[]}function L(){return new Error("Array Methods must be provided an Array")}var U=function(){function F(z,W){this._instanceConstructor=z,this.promise=new z(ce),this.promise[X]||P(this.promise),r(W)?(this.length=W.length,this._remaining=W.length,this._result=new Array(this.length),this.length===0?We(this.promise,this._result):(this.length=this.length||0,this._enumerate(W),this._remaining===0&&We(this.promise,this._result))):He(this.promise,L())}return F.prototype._enumerate=function(W){for(var te=0;this._state===Me&&te<W.length;te++)this._eachEntry(W[te],te)},F.prototype._eachEntry=function(W,te){var pe=this._instanceConstructor,Re=pe.resolve;if(Re===D){var De=void 0,dt=void 0,ht=!1;try{De=W.then}catch(Pt){ht=!0,dt=Pt}if(De===B&&W._state!==Me)this._settledAt(W._state,te,W._result);else if(typeof De!="function")this._remaining--,this._result[te]=W;else if(pe===se){var ft=new pe(ce);ht?He(ft,dt):ee(ft,W,De),this._willSettleAt(ft,te)}else this._willSettleAt(new pe(function(Pt){return Pt(W)}),te)}else this._willSettleAt(Re(W),te)},F.prototype._settledAt=function(W,te,pe){var Re=this.promise;Re._state===Me&&(this._remaining--,W===ie?He(Re,pe):this._result[te]=pe),this._remaining===0&&We(Re,this._result)},F.prototype._willSettleAt=function(W,te){var pe=this;H(W,void 0,function(Re){return pe._settledAt(re,te,Re)},function(Re){return pe._settledAt(ie,te,Re)})},F}();function $(F){return new U(this,F).promise}function K(F){var z=this;return r(F)?new z(function(W,te){for(var pe=F.length,Re=0;Re<pe;Re++)z.resolve(F[Re]).then(W,te)}):new z(function(W,te){return te(new TypeError("You must pass an array to race."))})}function de(F){var z=this,W=new z(ce);return He(W,F),W}function ve(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function ae(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var se=function(){function F(z){this[X]=ct(),this._result=this._state=void 0,this._subscribers=[],ce!==z&&(typeof z!="function"&&ve(),this instanceof F?ke(this,z):ae())}return F.prototype.catch=function(W){return this.then(null,W)},F.prototype.finally=function(W){var te=this,pe=te.constructor;return i(W)?te.then(function(Re){return pe.resolve(W()).then(function(){return Re})},function(Re){return pe.resolve(W()).then(function(){throw Re})}):te.then(W,W)},F}();se.prototype.then=B,se.all=$,se.race=K,se.resolve=D,se.reject=de,se._setScheduler=C,se._setAsap=y,se._asap=_;function Q(){var F=void 0;if(typeof commonjsGlobal<"u")F=commonjsGlobal;else if(typeof self<"u")F=self;else try{F=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var z=F.Promise;if(z){var W=null;try{W=Object.prototype.toString.call(z.resolve())}catch{}if(W==="[object Promise]"&&!z.cast)return}F.Promise=se}return se.polyfill=Q,se.Promise=se,se})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs(es6PromiseExports);var XHR={call:function(t){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!t.url)throw new Error("missing parameter : url is not defined !");if(!t.method)throw new Error("missing parameter : method is not defined !");t.format||(t.format="text");var n={};switch(n.url=t.url,n.data=t.data?t.data:null,n.method=t.method,n.timeOut=t.timeOut||0,n.scope=t.scope||this,n.proxy=t.proxy||null,n.content=t.content||null,n.headers=t.headers||{referer:"http://localhost"},t.method){case"DELETE":case"GET":break;case"PUT":case"POST":n.content=t.content?t.content:"application/x-www-form-urlencoded",n.headers=t.headers?t.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(t.format){case"text":this.__call(n).then(function(i){e.trace(i),t.onResponse.call(this,i)}).catch(function(i){t.onFailure.call(this,i)});break;case"json":this.__callJSON(n).then(function(i){e.trace(i),t.onResponse.call(this,i)}).catch(function(i){t.onFailure.call(this,i)});break;case"xml":this.__callXML(n).then(function(i){e.trace(i),t.onResponse.call(this,i)}).catch(function(i){t.onFailure.call(this,i)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(t){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var n=new Promise(function(i,s){var r=t.method==="POST"||t.method==="PUT"?1:0;t.data&&(typeof t.data=="object"&&Object.keys(t.data).length||typeof t.data=="string"&&t.data.length)&&!r&&(t.url=Helper$1.normalyzeUrl(t.url,t.data)),e.trace("URL = ",t.url);var o=null;if(typeof window>"u"){var a=require("node-fetch"),d={headers:{Referer:"https://localhost"}};return t.data&&typeof t.data=="string"&&r&&(d={method:t.method,body:t.data,headers:{"Content-Type":t.content,Referer:"https://localhost"}}),a(t.url,d).then(function(v){if(v.ok)i(v.text());else{var E="Errors Occured on Http Request (status : '"+v.statusText+"' | url : '"+v.url+"')",S=v.status;s({message:E,status:S})}}).catch(function(v){s({message:v,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),o=new XMLHttpRequest,o.open(t.method,t.url,!0),o.overrideMimeType=t.content;var _=null;t.timeOut>0&&(e.trace("XHR - TimeOut actif !"),_=window.setTimeout(function(){var v="TimeOut Occured on Http Request with XMLHttpRequest !";s({message:v,status:-1})},t.timeOut)),r&&(e.trace("data = ",t.data),o.setRequestHeader("Content-type",t.content)),o.onerror=function(v){console.log(v),s(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(v){console.log(v),s(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onreadystatechange=function(v){if(o.readyState===4)if(o.status===200)window.clearTimeout(_),i(o.response);else{var E="Errors Occured on Http Request (status : '"+v.target.statusText+"' | url : '"+v.target.responseURL+"' | response : '"+v.target.response+"')",S=v.target.status;s({message:E,status:S})}};var C=t.data&&r?t.data:null;o.send(C)}else if(window.XDomainRequest){e.trace("XDomainRequest"),o=new XDomainRequest,o.open(t.method,t.url),o.overrideMimeType=t.content,t.timeOut>0&&(o.timeout=t.timeout,e.trace("XHR - TimeOut actif !")),r&&o.setRequestHeader("Content-type",t.content),o.onerror=function(){s(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(){s(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onload=function(v){if(o.status===200)i(o.responseText);else{var E="Errors Occured on Http Request (status : '"+v.target.statusText+"' | url : '"+v.target.responseURL+"')",S=v.target.status;s({message:E,status:S})}};var y=t.data&&r?t.data:null;o.send(y)}else throw new Error("CORS not supported")});return n},__callJSON:function(t){return this.__call(t).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",t.url,e)})},__callXML:function(t){return this.__call(t).then(function(e){var n;if(typeof window>"u"){var i=require("@xmldom/xmldom").DOMParser;n=new i().parseFromString(e,"text/xml")}else if(window.DOMParser){var s=new window.DOMParser;n=s.parseFromString(e,"text/xml")}else n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(e);return n}).catch(function(e){console.log("__callXML failed on : ",t.url,e)})}},JSONP={uuid:function(){var t=Math.floor(Date.now());return function(){return t++}}(),call:function(t){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!t)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!t.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(t.timeOut||(e.info("setting 'options.timeOut' default value"),t.timeOut=0),!t.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var n=typeof t.callbackSuffix=="string"?t.callbackSuffix:this.uuid(),i=!1,s=!1,r=t.url.indexOf("callback=");if(r!==-1){i=!0;var o=t.url.indexOf("&",r);o===-1&&(o=t.url.length);var a=t.url.substring(r+9,o);a&&(s=!0,t.callbackName=a,e.info("setting 'options.callbackName' value ("+t.callbackName+") from 'options.url' parameter"))}if(!i){var d=t.url.indexOf("?");d===-1?t.url=t.url+"?callback=":d===t.url.length?t.url=t.url+"callback=":t.url=t.url+"&callback=",e.info("setting callback default key in 'options.url' : "+t.url)}var _=t.callbackName?!0:s;if(s||(t.callbackName||(e.info("setting 'options.callbackName' default value"),t.callbackName="callback",(n||n==="")&&(t.callbackName+=n)),t.url=t.url.replace("callback=","callback="+t.callbackName),e.info("setting callback function name in 'options.url' : "+t.url)),t.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),t.onTimeOut=function(){console.log("TimeOut while invoking url : "+t.url)}),!_){var C=this,y=null;t.timeOut>0&&(y=window.setTimeout(function(){window[t.callbackName]=function(){},t.onTimeOut(),C._deleteScript(n)},t.timeOut)),window[t.callbackName]=function(v){window.clearTimeout(y),t.onResponse(v),C._deleteScript(n)}}this._createScript(n,t.url)},_createScript:function(t,e){var n,i=document.getElementById("results"+t);n=document.createElement("script"),n.setAttribute("type","text/javascript"),n.setAttribute("src",e),n.setAttribute("charset","UTF-8"),n.setAttribute("id","results"+t),n.setAttribute("async","true");var s=document.documentElement||document.getElementsByTagName("head")[0];i===null?s.appendChild(n):s.replaceChild(n,i)},_deleteScript:function(t){var e=document.getElementById("results"+t);if(e){var n=e.parentNode||document.documentElement;if(!n)return;n.removeChild(e)}}},Protocol={send:function(t){var e=t||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&t.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(t.protocol==="XHR"||t.format==="json"?e.wrap=!1:t.protocol==="JSONP"&&t.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var n={};n.output=e.output,n.callback=e.callback,delete n.callback,e.url=Helper$1.normalyzeUrl(t.url,n)}switch(e.protocol){case"XHR":t.method==="GET"&&t.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(t){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=t;typeof t=="string"||t instanceof String?(this.message=t,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name="geoportal-access-lib",version="3.4.1",date="16/04/2024",description="French Geoportal resources access library",module="src/Gp.js",main="dist/GpServices-src.js",homepage="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords=["geoplateforme","geoportail","webservice","javascript","es6"],author="IGNF",license="CECILL-B",dependencies={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg={name,version,date,description,module,main,homepage,scripts,nyc,repository,keywords,author,license,dependencies,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(t){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(i){console.log("onSuccess - la reponse est la suivante : ",i)},onFailure:function(i){i.status===200||!i.status?console.log("onFailure : ",i.message):console.log("onFailure - Erreur (",i.status,") : ",i.message)}};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(i){console.log("onSuccess - la réponse brute du service est la suivante : ",i)});var n=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!n)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof t.httpMethod=="string"?t.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof t.protocol=="string"?t.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=t.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var t=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(t,r,n)}e.call(t);function n(o){this.logger.trace("CommonService::onBuildRequest : ",o),this.callService.call(t,r,i)}function i(o){this.logger.trace("CommonService::onCallService : ",o),this.analyzeResponse.call(t,r,s)}function s(o){if(this.logger.trace("CommonService::onAnalyzeResponse : ",o),o)this.options.onSuccess.call(this,o);else return r.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function r(o){this.logger.trace("CommonService::onError()");var a=o;a instanceof ErrorService||(a=new ErrorService(o.message)),this.options.onFailure.call(this,a)}},buildRequest:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(t,e){var n=null,i=this.request,s=!!(this.options.proxyURL&&this.options.protocol==="XHR"),r={"gp-access-lib":Pkg.version};this.options.apiKey&&(r.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,r,!1),s&&(this.options.httpMethod==="GET"&&(n=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),i=null),this.options.httpMethod==="POST"&&(n=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),i=this.request));var o=this,a={url:n||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:i,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(d){o.logger.trace("callService::onResponse()");var _=null;if(o.options.protocol==="XHR"&&(o.logger.trace("Response XHR",d),_=d),o.options.protocol==="JSONP")if(o.logger.trace("Response JSON",d),d)if(d.http)if(d.http.status!==200){t.call(o,new ErrorService({status:d.http.status,message:d.http.error,type:ErrorService.TYPE_SRVERR}));return}else _=d.xml,o.options.rawResponse&&(_=d);else _=d;else{t.call(o,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof o.options.onBeforeParse=="function"){var C=o.options.onBeforeParse(_);typeof C=="string"&&(_=C)}o.response=_,e.call(o,_)},onFailure:function(d){o.logger.trace("callService::onFailure()"),d.type=ErrorService.TYPE_SRVERR,t.call(o,new ErrorService(d))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),t.call(o,new ErrorService("TimeOut!"))}};Protocol.send(a)},analyzeResponse:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(t){var e="data.geopf.fr",n;return DefaultUrlService.ssl===!1?n="http://":n="https://",n+e+t},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(t){Array.isArray(t)||(t=t.split(","));for(var e=[],n=0;n<t.length;n++)e[n]=this._key+t[n]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(t){if(t)return!!this.generalOptions.apiKeys[t]},getLayersId:function(t){return this.generalOptions.apiKeys[t]},getLayerId:function(t,e){if(!(!t||!e)){var n=null;if(this.layers){var i=this.layers;for(var s in i)if(i.hasOwnProperty(s)){var r=s.split("$");if(t===r[0]&&r[1]){var o=r[1].split(":"),a=r[1].split(";");if(a[1]===e.toUpperCase()){n=s;break}if(o[2]===e.toUpperCase()){n=s;break}}}}if(n)return n}},getLayersConf:function(t){var e={},n=this.getLayersId(t);if(n)for(var i=0;i<n.length;i++){var s=n[i];e[s]=this.layers[s]}return e},getLayerConf:function(t){if(this.layers)return this.layers[t]},getLayerParams:function(t,e){var n={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var i=this.getLayerId(t,e);if(i){var s=this.getLayerConf(i),r=this.getLayerKey(i);if(r.length===0)return;for(var o=0;o<r.length;o++)s.serviceParams.serverUrl[r[o]]&&(n.url=s.serviceParams.serverUrl[r[o]]);if(/\/v\//.test(n.url)?n.styles=" ":n.styles=s.styles[0].name,n.version=s.serviceParams.version,n.format=s.formats[0].name,n.projection=s.defaultProjection,n.minScale=s.globalConstraint.minScaleDenominator,n.maxScale=s.globalConstraint.maxScaleDenominator,n.extent=s.globalConstraint.bbox,n.legends=s.legends,n.title=s.title,n.description=s.description,e==="WMS"&&(n.metadata=s.metadata),s.wmtsOptions){n.tileMatrixSetLimits=s.wmtsOptions.tileMatrixSetLimits;var a=s.wmtsOptions.tileMatrixSetLink;if(a){n.TMSLink=a;var d=this.getTMSConf(a);n.matrixIds=Object.keys(d.tileMatrices),n.tileMatrices=d.tileMatrices,n.nativeResolutions=d.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return n},getLayerKey:function(t){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var n=this.generalOptions.apiKeys;for(var i in n){var s=n[i];s.forEach(function(r){r===t&&e.push(i)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(t){if(this.tileMatrixSets)return this.tileMatrixSets[t]},getGlobalConstraints:function(t){var e={};if(t){var n=this.getLayerConf(t);e.projection=n.defaultProjection,e.minScale=n.globalConstraint.minScaleDenominator,e.maxScale=n.globalConstraint.maxScaleDenominator,e.extent=n.globalConstraint.bbox}return e}};function Config(t){if(!(this instanceof Config))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=t.onSuccess!==null&&typeof t.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!t.apiKey&&!t.customConfigFile&&(t.apiKey="full"),this.options={},this.options.onSuccess=t.onSuccess,this.options.onFailure=t.onFailure,this.options.sync=t.sync||!1,this.options.listConfigUrls=t.customConfigFile?[t.customConfigFile]:Array.isArray(t.apiKey)?DefaultUrlService.Config.url(t.apiKey):DefaultUrlService.Config.url(t.apiKey.split(","))}Config.prototype=Object.create(CommonService.prototype,{});Config.prototype.constructor=Config;Config.prototype.buildRequest=function(t,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){t.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config.prototype.callService=function(t,e){this.options.sync?__callServiceSync.call(this,t,e):__callService.call(this,t,e)};var __callService=function(t,e){this.listConfigResults=[];let n=null;if(typeof window>"u"){var i=require("node-fetch");n=i}else n=window.fetch;var s=o=>n(o,{credentials:"same-origin"}).then(a=>{if(a.ok)return a.json().then(d=>d).catch(d=>{throw new Error("Exception Json : "+d)});throw new Error("Exception HTTP : "+a.status+" (status code) !")}).catch(a=>new Promise((d,_)=>{_(a)})),r=[];for(let o=0;o<this.listConfigUrls.length;o++){const a=this.listConfigUrls[o];r.push(s(a))}Promise.all(r).then(o=>{if(!o)throw new Error("results config empty !?");o.forEach(a=>{this.listConfigResults.push(a)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(o=>{t.call(this,o)})},__callServiceSync=function(t,e){this.listConfigResults=[];for(var n=0;n<this.listConfigUrls.length;n++){const s=this.listConfigUrls[n],r=new XMLHttpRequest;if(r.open("GET",s,!1),r.send(null),r.status===200){var i=JSON.parse(r.responseText);this.listConfigResults.push(i)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):t.call(this,new Error("..."))};Config.prototype.analyzeResponse=function(t,e){var n=function(a){for(var d={},_={},C={},y=0;y<a.length;y++){if(!a[y].generalOptions||!a[y].layers)return;_={..._,...a[y].generalOptions.apiKeys},d={...d,...a[y].layers},C={...C,...a[y].tileMatrixSets}}var v={generalOptions:{apiKeys:_},layers:d,tileMatrixSets:C};return v},i=n(this.listConfigResults);if(!i){t.call(this,new Error("configuration structure not conforme !"));return}var s=new ConfigInterface;Object.assign(s,i);var r=typeof window<"u"?window:{};if(r.Gp||(r.Gp={}),r.Gp.Config){Object.assign(r.Gp.Config,s);for(var o in s)r.Gp.Config[o]=s[o]}else r.Gp.Config=s;e.call(this,r.Gp.Config)};function AltiRequest(t){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=t||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];i.lon&&i.lat&&e.push(i)}this.positions=e},getPositions:function(t){if(!t)return this.positions;var e=this.positions.length-1;return t>e||t<e?(this.logger.warn("index out of range !"),this.positions):this.positions[t]},addPositions:function(t){for(var e=0;e<t.length;e++){var n=t[e];n.lon&&n.lat&&this.positions.push(t[e])}},getLon:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lon);return this.logger.trace(t),t.join(this.delimiter)},getLat:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lat);return this.logger.trace(t),t.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"delimiter",v:this.delimiter}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"format",v:this.format}),t};function AltiElevationRequest(t){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(t){this._zonly=t}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"zonly",v:this.zonly}),t.push({k:"format",v:this.format}),t.push({k:"resource",v:this.resource}),t};function AltiProfilRequest(t){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(t){this._sampling=t}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"sampling",v:this.sampling}),t.push({k:"format",v:this.format}),t.push({k:"resource",v:this.resource}),t};function AltiRequestREST(t){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=t||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var t="";return this.method==="POST"?t=this.template.post.value:this.method==="GET"&&(t=this.template.get.value),t=t.replace(/__LON__/g,this.DataObject.getLon()),t=t.replace(/__LAT__/g,this.DataObject.getLat()),t=t.replace(/__INDENT__/g,this.DataObject.indent),t=t.replace(/__CRS__/g,this.DataObject.crs),t=t.replace(/__RESOURCE__/g,this.DataObject.resource),t=t.replace(/__MEASURES__/g,this.DataObject.measures),t=t+this.__addDataInputs(),this.logger.trace("traduction tmpl",t),this.requestString=t,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var t;if(this.method==="POST")t=this.template.post;else if(this.method==="GET")t=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=t.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=t.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(t){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=t||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var t=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return t.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var t="";if(this.method==="POST")t=this.template.post.value;else if(this.method==="GET")t=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return t=t.replace(/__SERVICE__/g,this.paramservice),t=t.replace(/__VERSION__/g,this.paramversion),t=t.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),t=t.replace(/__IDENTIFIER__/g,this.paramidentifier),t=t.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(t=t.replace(/__NAMESPACE__/g,this.namespaceByDefault),t=t.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),t=t.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),t?(this.requestString=t,this.logger.trace("traduction tmpl",t),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var t=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",n="",i=this,s=this.DataObject.getData(),r=0;r<s.length;r++)(function(o){e&&(e=o===s.length-1?"":";"),n=n.concat(i.__addDataInput(t,s[o].k,s[o].v),e)})(r);return n},__addDataInput:function(t,e,n){var i=t;return i=i.replace(/__KEY__/g,e),i=i.replace(/__DATA__/g,n),i},setMethod:function(t){t==="GET"||t==="POST"?this.method=t:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(t){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!t)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!t.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var n=null;switch(t.type){case"Elevation":t.wps.identifier="gs:WPSElevation",n=new AltiElevationRequest(t.param);break;case"Profil":t.wps.identifier="gs:WPSLineElevation",n=new AltiProfilRequest(t.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var i={data:n,method:t.method,param:t.wps},s=new WPS(i);if(!s.processRequestString())throw new Error("Enable to process request !");return s.requestString}},AltiRequestFactory={build:function(t){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var n=null,i={type:t.sampling?"Profil":"Elevation",method:t.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};i.param.positions=t.positions,i.param.format=t.outputFormat,i.param.sampling=t.sampling,i.param.zonly=t.zonly,i.param.measures=t.measures,i.param.resource=t.resource;var s=t.onError!==null&&typeof t.onError=="function",r=t.onSuccess!==null&&typeof t.onSuccess=="function",o=null;switch(t.api){case"REST":var a=new AltiRequestREST(i);if(!a.processRequestString()){if(o="Error in process request (rest) !",s){t.onError.call(t.scope,new ErrorService(o));return}throw new Error(o)}n=a.requestString;break;case"WPS":if(i.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},n=AltiRequestWPS.build(i),!n){if(o="Error in process request (wps) !",s){t.onError.call(t.scope,new ErrorService(o));return}throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or WPS) !",s){t.onError.call(t.scope,new ErrorService(o));return}throw new Error(o)}return r&&t.onSuccess.call(t.scope,n),n}};function XML(t){if(!(this instanceof XML))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,t&&(t.xmlString&&typeof t.xmlString=="string"&&(this.xmlString=t.xmlString,this.xmlDoc=__getXMLDOC(t.xmlString)),t.reader&&this.setReader(t.reader))}XML.prototype={constructor:XML,getXMLString:function(){return this.xmlString},setXMLString:function(t){t&&typeof t=="string"&&(this.xmlString=t,this.xmlDoc=__getXMLDOC(t))},getReader:function(){return this.reader},setReader:function(t){t&&t.read&&typeof t.read=="function"&&(this.reader=t)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(t){this.xmlDoc=t},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var t=__getRootNode(this.xmlDoc);if(t){var e;return this.reader&&this.reader.read?e=this.reader.read(t):(e={},e[t.nodeName]=__readDefault(t)),e}else return{}}}};function __getXMLDOC(t){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(t,"text/xml")}else{var n,i,s="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t);var r=i.parseError;if(r.errorCode)throw r.line&&r.linepos&&(s+="( ligne "+r.line+", colonne "+r.linepos),r.reason&&(s+=":  "+r.reason+")"),new Error(s);return i}else if(window.DOMParser){n=new window.DOMParser;try{i=n.parseFromString(t,"text/xml")}catch(_){throw _.message==="SyntaxError"?new Error(s):new Error("Erreur lors du parsing de la réponse du service : "+_.message)}if(i.getElementsByTagName("parsererror").length>0)for(var o=i.getElementsByTagName("parsererror"),a=0;a<o.length;a++){var d=o[a].innerHTML;if(d.indexOf("Huge input lookup")===-1)throw s+="("+d+")",new Error(s)}else if(!i.documentElement)throw new Error(s);return i}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(t){var e;return t.nodeType===9?e=t.documentElement:t.nodeType===1&&(e=t),e}function __readDefault(t){var e={};if(t.attributes.length>0){var n=__getAttributes(t);e.attributes=n}if(t.hasChildNodes()){for(var i={},s,r=t.childNodes,o=0;o<r.length;o++)if(s=r[o],s.nodeType===3)e.textContent=s.nodeValue;else if(s.nodeType===1)if(i=__readDefault(s),!e[s.nodeName])e[s.nodeName]=i;else{if(!Array.isArray(e[s.nodeName])){var a=e[s.nodeName];e[s.nodeName]=[],e[s.nodeName].push(a)}e[s.nodeName].push(i)}}return e}function __getAttributes(t){if(t.attributes.length>0){for(var e={},n=t.attributes,i=0;i<n.length;i++){var s=n[i];e[s.nodeName]=s.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(t){var e=new AltiResponse;if(t.hasChildNodes())for(var n=t.childNodes,i,s,r=0;r<n.length;r++)i=n[r],AltiResponseReader.READERS[i.nodeName]&&(s=AltiResponseReader.READERS[i.nodeName](i),e.elevations.push(s));return e},elevation:function(t){var e=new Elevation;if(t.hasChildNodes())for(var n=t.childNodes,i,s=0;s<n.length;s++)i=n[s],AltiResponseReader.READERS[i.nodeName]&&AltiResponseReader.READERS[i.nodeName](i,e);return e},lat:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)e.lat=parseFloat(n.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)e.lon=parseFloat(n.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)if(e)e.z=parseFloat(n.nodeValue);else return e=new Elevation,e.z=parseFloat(n.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)e.acc=parseFloat(n.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)e.source_name=n.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(t,e){var n=t.firstChild;if(n&&n.nodeType===3)e.source_measure=n.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(t,e){e.measures=[];var n;if(t.hasChildNodes())for(var i=t.childNodes,s,r,o=0;o<i.length;o++){n=new Measure,s=i[o],r=s.childNodes;for(var a=0;a<r.length;a++)if(AltiResponseReader.READERS[r[a].nodeName])AltiResponseReader.READERS[r[a].nodeName](r[a],n);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(n)}},exceptionreport:function(t){var e={};if(t.hasChildNodes())for(var n=t.childNodes,i,s=0;s<n.length;s++)i=n[s],i.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(i));return e},exception:function(t){var e={},n=t.getAttribute("exceptionCode");n&&(e.exceptionCode=n);var i=t.firstChild;return i&&i.nodeType===3&&(e.exception=i.nodeValue),e},error:function(t){var e={error:{}};if(t.hasChildNodes())for(var n=t.childNodes,i,s=0;s<n.length;s++){i=n[s];var r;i.nodeType===1&&i.nodeName==="code"&&(r=i.firstChild,r&&r.nodeType===3&&(e.error.code=r.nodeValue)),i.nodeType===1&&i.nodeName==="description"&&(r=i.firstChild,r&&r.nodeType===3&&(e.error.description=r.nodeValue))}return e}};AltiResponseReader.read=function(t){if(t.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(t);return e}else if(t.nodeName==="ExceptionReport"){var n=AltiResponseReader.READERS.exceptionreport(t);return n}else if(t.nodeName==="error"){var i=AltiResponseReader.READERS.error(t);return i}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(t){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var n=null;if(t.response)if(t.rawResponse)e.trace("analyze response : raw"),n=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");try{var i=new XML({reader:AltiResponseReader});if(typeof t.response=="string"?i.setXMLString(t.response):i.setXMLDoc(t.response),n=i.parse(),!n)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(y){var s=y.message;t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",s),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof t.response);var r=null;if(typeof t.response=="string"?r=JSON.parse(t.response):r=t.response,r&&r.error){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",r.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(r){var o=r.elevations,a=new AltiResponse,d;if(Array.isArray(o)&&o.length)for(var _=0;_<o.length;_++)d=new Elevation,typeof o[_]=="object"?(o[_].lon&&(d.lon=o[_].lon),o[_].lat&&(d.lat=o[_].lat),o[_].z&&(d.z=o[_].z),o[_].acc&&(d.acc=o[_].acc),o[_].measures&&(d.measures=o[_].measures)):typeof o[_]=="number"&&(d.z=o[_]),Array.isArray(a.elevations)&&a.elevations.push(d);n=a}if(!n){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(n.exceptionReport){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",n.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(n.error){var C=n.error.description;t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",C),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}t.onSuccess.call(t.scope,n)}};function Alti(t){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!t.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(t.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=t.positions,this.options.outputFormat=typeof t.outputFormat=="string"?t.outputFormat.toLowerCase():"xml",this.options.resource=t.resource||"ign_rge_alti_wld",this.options.sampling=t.sampling||null,this.options.api=typeof t.api=="string"?t.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=t.zonly||!1,this.options.measures=t.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),n=null;switch(this.options.api){case"WPS":n=e.wps;break;case"REST":var i=(t.sampling?"profil":"elevation")+"-"+this.options.outputFormat;n=e[i];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!n)throw new Error("Url by default not found !");this.options.serverUrl=n,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var s=this.options.serverUrl.lastIndexOf(".");if(s!==-1){var r=this.options.serverUrl.substring(s+1);if(r&&r.length<5)switch(this.logger.trace("Server Extension URL : "+r),r.toLowerCase()){case"json":case"xml":this.options.outputFormat=r.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(t,e){var n={httpMethod:this.options.httpMethod,onSuccess:function(i){this.request=i,e.call(this,this.request)},onError:t,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(n)};Alti.prototype.analyzeResponse=function(t,e){if(this.response){var n={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};AltiResponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(t){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=t||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var t={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(t[e]=this.filters[e]);return t},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var t=[];this.geocodeMethod==="search"&&t.push({k:"q",v:this.query}),this.index&&t.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&t.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(t.push({k:"lon",v:this.lon}),t.push({k:"lat",v:this.lat})),this.maxResp&&t.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&t.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var n in e)t.push({k:n,v:e[n]});return t};function GeocodeRequestREST(t){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!t)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=t}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var t="";const n=new GeocodeParamREST(this.settings).getParams();for(var i=0;i<n.length;i++){var s=n[i];t&&(t+="&"),t+=s.k+"="+s.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+t,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(t){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var n=t||{},i=new GeocodeRequestREST(n);if(!i.processRequestString())throw new Error("Error process request (rest) !");var s=i.requestString;return e.trace(s),s}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(t){var e=new GeocodeResponse;const n=JSON.parse(t);if(n.type==="FeatureCollection")for(var i=0;i<n.features.length;++i)_parseFeature(n.features[i],e);else if(n.type==="Feature")_parseFeature(n,e);else{if(n.type==="SERVICE_ERROR")return _parseError(n);var s=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",n.type);throw new ErrorService({message:s,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(t,e){var n=new GeocodedLocation;if(t.geometry&&t.geometry.type==="Point"&&(n.position={lon:t.geometry.coordinates[0],lat:t.geometry.coordinates[1]}),t.properties){for(var i in t.properties)i==="score"?n.accuracy=t.properties[i]:i==="_type"?t.properties[i]==="address"?n.type="StreetAddress":t.properties[i]==="poi"?n.type="PositionOfInterest":(t.properties[i]==="parcel"||t.properties[i]==="cadastral")&&(n.type="CadastralParcel"):n.placeAttributes[i]=t.properties[i];t.properties._type==="address"&&(n.matchType=t.properties.number!==void 0&&t.properties.number!==null?"street number":"street")}e.locations.push(n)}function _parseError(t){return{exceptionReport:t}}var GeocodeReponseFactory={build:function(t){var e=null;if(t.response)if(t.rawResponse)e=t.response;else{try{if(e=new GeocodeResponseParser().parse(t.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(i){var n=i.message;typeof t.response=="string"?n+="('"+t.response+"')":n+="('"+t.response.documentElement.innerHTML+"')",t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",n),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}t.onSuccess.call(t.scope,e)}};function Geocode(t){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(t);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var n=Object.keys(e.filters),i=0;i<n.length;i++){var s=n[i];(typeof e.filters[s]>"u"||typeof e.filters[s]=="object"&&Object.keys(e.filters[s]).length===0||typeof e.filters[s]=="string"&&e.filters[s].length===0||Array.isArray(e.filters[s])&&e.filters[s].length===0)&&delete this.options.filters[s]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(t){const e=t;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(t,e){var n={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(n),this.request?e.call(this,this.request):t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(t,e){if(this.response){var n={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};GeocodeReponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode(t){if(!(this instanceof ReverseGeocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(t);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var n=Object.keys(e.filters),i=0;i<n.length;i++){var s=n[i];(typeof e.filters[s]>"u"||typeof e.filters[s]=="object"&&Object.keys(e.filters[s]).length===0||typeof e.filters[s]=="string"&&e.filters[s].length===0||Array.isArray(e.filters[s])&&e.filters[s].length===0)&&delete this.options.filters[s]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode.prototype=Object.create(CommonService.prototype,{});ReverseGeocode.prototype.constructor=ReverseGeocode;ReverseGeocode.prototype.patchOptionConvertor=function(t){var e=t;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode.prototype.buildRequest=function(t,e){var n={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(n),this.request?e.call(this,this.request):t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode.prototype.analyzeResponse=function(t,e){if(this.response){var n={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};GeocodeReponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode.prototype.bbox2Json=function(t){return{type:"Polygon",coordinates:[[[t.left,t.top],[t.right,t.top],[t.right,t.bottom],[t.left,t.bottom],[t.left,t.top]]]}};ReverseGeocode.prototype.circle2Json=function(t){return{type:"Circle",radius:t.radius,coordinates:[t.x,t.y]}};ReverseGeocode.prototype.polygon2Json=function(t){for(var e={type:"Polygon",coordinates:[[]]},n=0;n<t.length;++n)e.coordinates[0].push([t[n].x,t[n].y]);return e};ReverseGeocode.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(t){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var n=null;if(t.response)if(t.rawResponse)e.trace("analyze response : raw"),n=t.response;else{var i=null;if(typeof t.response=="string"?i=JSON.parse(t.response):i=t.response,i){if(i.error){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",i.error.description),status:i.error.code,type:ErrorService.TYPE_SRVERR}));return}if(n=new AutoCompleteResponse,i.results&&Array.isArray(i.results))for(var s=null,r=0;r<i.results.length;r++){var o=i.results[r];s=new SuggestedLocation,o&&(o.country==="StreetAddress"?(s.street=o.street,s.type="StreetAddress"):o.country==="PositionOfInterest"&&(s.poi=o.street,s.type="PositionOfInterest",s.poiType=o.poiType),s.position&&(s.position.x=o.x,s.position.y=o.y),s.kind=o.kind,s.commune=o.city,s.fullText=o.fulltext,s.postalCode=o.zipcode,s.classification=o.classification),n.suggestedLocations.push(s)}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!n.suggestedLocations.length){t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!n){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(n.exceptionReport){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",n.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}t.onSuccess.call(t.scope,n)}};function AutoComplete(t){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(t);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(t){const e=t;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(t,e){var n="";this.options.territory&&(n=this.options.territory);var i="";this.options.type&&(i=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:i,terr:n,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(t,e){if(this.response){var n={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};AutoCompleteResponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(t){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=t||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var t=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var n=this.intermediates[e];t.push(n.x+","+n.y)}return t.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var t=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)t.push(JSON.stringify(this.constraints[e]));return t.join("|")}};RouteParamREST.prototype.getParams=function(){var t=[];return t.push({k:"resource",v:this.resource}),t.push({k:"start",v:this.start}),t.push({k:"end",v:this.end}),t.push({k:"geometryFormat",v:"geojson"}),this.optimization&&t.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&t.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&t.push({k:"profile",v:this.getProfile()}),this.constraints&&t.push({k:"constraints",v:this.getConstraints()}),this.crs&&t.push({k:"crs",v:this.crs}),this.distanceUnit&&t.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&t.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&t.push({k:"waysAttributes",v:this.getWaysAttributes()}),t};function RouteRequestREST(t){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!t)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=t}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var t=new RouteParamREST(this.settings),e=t.getParams(),n="",i=0;i<e.length;i++){var s=e[i];n&&(n+="&"),n+=s.k+"="+s.v}return this.logger.trace(n),this.requestString=n,this.requestString}};var RouteRequestFactory={build:function(t){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var n=null,i=t||{},s=t.onError!==null&&typeof t.onError=="function",r=null,o=new RouteRequestREST(i);if(!o.processRequestString()){if(r="Error process request (rest) !",s){t.onError.call(t.scope,new ErrorService(r));return}throw new Error(r)}return n=o.requestString,n}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(t){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var n=null;if(t.response)if(t.rawResponse)e.trace("analyze response : raw"),n=t.response;else{e.trace("analyze response : json");var i;if(typeof t.response=="string"?i=JSON.parse(t.response):i=t.response,i){if(i.message){t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",i.message)));return}var s=[],r=[],o=[];if(n=new RouteResponse,n.hasOwnProperty("totalTime")&&(n.totalTime=parseFloat(i.duration)),n.hasOwnProperty("totalDistance")&&(n.totalDistance=parseFloat(i.distance)),n.hasOwnProperty("bbox")&&(n.bbox.left=parseFloat(i.bbox[0]),n.bbox.bottom=parseFloat(i.bbox[1]),n.bbox.right=parseFloat(i.bbox[2]),n.bbox.top=parseFloat(i.bbox[3])),n.hasOwnProperty("routeGeometry")&&!t.geometryInInstructions&&(n.routeGeometry=i.geometry),n.hasOwnProperty("routeInstructions")&&t.geometryInInstructions){var a=i.portions,d;if(Array.isArray(a)&&a.length)for(d=0;d<a.length;d++)s.push(a[d]);if(s.length)for(d=0;d<s.length;d++)r.push(s[d].steps);if(r.length)for(d=0;d<r.length;d++)o=o.concat(r[d]);o.forEach(function(_){switch(n.routeInstructions.push(new RouteInstruction),n.routeInstructions[n.routeInstructions.length-1].duration=_.duration,n.routeInstructions[n.routeInstructions.length-1].distance=_.distance,n.routeInstructions[n.routeInstructions.length-1].code="",n.routeInstructions[n.routeInstructions.length-1].instruction="",n.routeInstructions[n.routeInstructions.length-1].geometry=_.geometry,_.name==="Valeur non renseignée"&&(_.name=""),_.instruction.type){case"turn":n.routeInstructions[n.routeInstructions.length-1].instruction+="Tourner";break;case"new name":n.routeInstructions[n.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":n.routeInstructions[n.routeInstructions.length-1].instruction+="Départ";break;case"arrive":n.routeInstructions[n.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":n.routeInstructions[n.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":n.routeInstructions[n.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":n.routeInstructions[n.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":n.routeInstructions[n.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":n.routeInstructions[n.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":n.routeInstructions[n.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":n.routeInstructions[n.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":n.routeInstructions[n.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":n.routeInstructions[n.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":n.routeInstructions[n.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":n.routeInstructions[n.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":n.routeInstructions[n.routeInstructions.length-1].instruction+="";break;default:n.routeInstructions[n.routeInstructions.length-1].instruction+="?"+_.instruction.type+"?";break}if(_.instruction.modifier)switch(_.instruction.modifier){case"uturn":n.routeInstructions[n.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":n.routeInstructions[n.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":n.routeInstructions[n.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":n.routeInstructions[n.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":n.routeInstructions[n.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":n.routeInstructions[n.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":n.routeInstructions[n.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":n.routeInstructions[n.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:n.routeInstructions[n.routeInstructions.length-1].instruction+=" ?"+_.instruction.modifier+"?";break}_.instruction.exit&&(n.routeInstructions[n.routeInstructions.length-1].instruction+=`${_.instruction.exit}e sortie`),_.attributes.name&&((_.attributes.name.nom_1_droite||_.attributes.name.toponyme)&&(n.routeInstructions[n.routeInstructions.length-1].instruction+=" sur"),_.attributes.name.nom_1_droite&&(n.routeInstructions[n.routeInstructions.length-1].instruction+=` ${_.attributes.name.nom_1_droite}`),_.attributes.name.toponyme&&(n.routeInstructions[n.routeInstructions.length-1].instruction+=` ${_.attributes.name.toponyme}`))})}}if(!n){t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(n.exceptionReport){t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}t.onSuccess.call(t.scope,n)}};function Route(t){if(!(this instanceof Route))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!t.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(t.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(t.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!t.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(t.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(t.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(t.outputFormat&&t.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=t.resource||"bdtopo-osrm",this.options.startPoint=t.startPoint,this.options.endPoint=t.endPoint,this.options.viaPoints=t.viaPoints||[],this.options.routePreference=t.routePreference||"fastest",t.graph?(t.graph==="Voiture"&&(this.options.graph="car"),t.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],t.constraints)if(Array.isArray(t.constraints))for(var e=0;e<t.constraints.length;e++)this.options.constraints.push(t.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var n={},i={},s={};if(t.exclusions&&t.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var r=0;r<t.exclusions.length;r++){if(typeof t.exclusions[r]=="string")t.exclusions[r]=t.exclusions[r].toLowerCase();else continue;t.exclusions[r]==="toll"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="autoroute",this.options.constraints.push(s)),t.exclusions[r]==="tunnel"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="tunnel",this.options.constraints.push(n)),t.exclusions[r]==="bridge"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="pont",this.options.constraints.push(i))}}if(this.options.geometryInInstructions=t.geometryInInstructions||!1,this.options.provideBbox=t.provideBbox||!0,this.options.distanceUnit=t.distanceUnit||"m",this.options.timeUnit=t.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=t.srs||"EPSG:4326",this.options.waysAttributes=t.waysAttributes||[],!this.options.serverUrl){var o=DefaultUrlService.Route.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route.prototype=Object.create(CommonService.prototype,{});Route.prototype.constructor=Route;Route.prototype.buildRequest=function(t,e){var n={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(n),this.request?e.call(this,this.request):t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route.prototype.analyzeResponse=function(t,e){if(this.response){var n={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(t){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=t||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var t=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)t.push(JSON.stringify(this.constraints[e]));return t.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var t=[];return t.push({k:"resource",v:this.resource}),t.push({k:"point",v:this.getLocation()}),t.push({k:"direction",v:this.getDirection()}),t.push({k:"costType",v:this.costType}),t.push({k:"costValue",v:this.costValue}),t.push({k:"profile",v:this.profile}),t.push({k:"timeUnit",v:this.timeUnit}),t.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&t.push({k:"crs",v:this.crs}),this.constraints&&t.push({k:"constraints",v:this.getConstraints()}),t};function ProcessIsoCurveRequest(t){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!t)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=t,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var t="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var n=new ProcessIsoCurveParam(this.settings),i=n.getParams();for(e=0;e<i.length;e++){var s=i[e];t&&(t+="&"),t+=s.k+"="+s.v}break;case"POST":this.logger.trace("Process POST Request");var r={};r.resource=this.settings.resource,r.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(r.costType="distance",r.costValue=this.settings.distance):(r.costType="time",r.costValue=this.settings.time),r.profile=this.settings.graph,this.settings.reverse?r.direction="arrival":r.direction="departure",r.constraints=this.settings.constraints,r.distanceUnit=this.settings.distanceUnit,r.timeUnit=this.settings.timeUnit,r.crs=this.settings.srs,t=JSON.stringify(r);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(t),this.requestString=t,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(t){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var n=null;if(t.response)if(t.rawResponse)e.trace("analyze response : raw"),n=t.response;else{e.trace("analyze response : json");var i;if(typeof t.response=="string"?i=JSON.parse(t.response):i=t.response,n=new ProcessIsoCurveResponse,i){i.costType==="distance"?(n.time="",n.distance=i.costValue):(n.time=i.costValue,n.distance=""),n.message="",n.id="",n.srs=i.crs,n.geometry=i.geometry;var s=i.point.split(",");n.location&&(n.location.x=s[0],n.location.y=s[1])}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)));return}if(n.exceptionReport){t.onError.call(t.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",n.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{t.onError.call(t.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}t.onSuccess.call(t.scope,n)}};function ProcessIsoCurve(t){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!t.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(t.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(t.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!t.time&&!t.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!t.time&&t.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),t.time&&!t.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=t.resource||"bdtopo-valhalla",this.options.exclusions=t.exclusions||[],this.options.reverse=t.reverse||!1,this.options.srs=t.srs||"EPSG:4326",this.options.distanceUnit=t.distanceUnit||"m",this.options.timeUnit=t.timeUnit||"second",t.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,t.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,t.graph?(t.graph==="Voiture"&&(this.options.graph="car"),t.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],t.constraints)if(Array.isArray(t.constraints))for(var e=0;e<t.constraints.length;e++)this.options.constraints.push(t.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var n={},i={},s={};if(t.exclusions&&t.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var r=0;r<t.exclusions.length;r++){if(typeof t.exclusions[r]=="string")t.exclusions[r]=t.exclusions[r].toLowerCase();else continue;t.exclusions[r]==="toll"&&(s.constraintType="banned",s.key="wayType",s.operator="=",s.value="autoroute",this.options.constraints.push(s)),t.exclusions[r]==="tunnel"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="tunnel",this.options.constraints.push(n)),t.exclusions[r]==="bridge"&&(i.constraintType="banned",i.key="wayType",i.operator="=",i.value="pont",this.options.constraints.push(i))}}if(this.options.outputFormat=typeof t.outputFormat=="string"?t.outputFormat.toLowerCase():"json",t.outputFormat&&t.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var o=DefaultUrlService.ProcessIsoCurve.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(t,e){try{var n=new ProcessIsoCurveRequest(this.options);if(!n.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=n.requestString}catch(i){t.call(this,new ErrorService(i.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(t,e){if(this.response){var n={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};ProcessIsoCurveResponseFactory.build(n)}else t.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(t){var e=new Config(t);e.call()},getAltitude:function(t){var e=new Alti(t);e.call()},geocode:function(t){var e=new Geocode(t);e.call()},reverseGeocode:function(t){var e=new ReverseGeocode(t);e.call()},autoComplete:function(t){var e=new AutoComplete(t);e.call()},route:function(t){var e=new Route(t);e.call()},isoCurve:function(t){var e=new ProcessIsoCurve(t);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(t){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var n=t||"default";return loglevelExports.getLogger(n)},disableAll:function(){var t=loglevelExports.getLoggers();for(const e in t)Object.hasOwnProperty.call(t,e)&&t[e].disableAll()},enableAll:function(){var t=loglevelExports.getLoggers();for(const e in t)Object.hasOwnProperty.call(t,e)&&t[e].enableAll()}},Helper={detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(t=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(t=!0),t},assign:function(t,e){t=t||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},mergeParams:function(t,e,n){if(!(!t||!e)){typeof n>"u"&&(n=!0);for(var i in e)e.hasOwnProperty(i)&&(typeof e[i]=="object"?t.hasOwnProperty(i)?this.mergeParams(t[i],e[i],n):t[i]=e[i]:t.hasOwnProperty(i)?n&&(t[i]=e[i]):t[i]=e[i])}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class Circle extends SimpleGeometry{constructor(e,n,i){super(),i!==void 0&&n===void 0?this.setFlatCoordinates(i,e):(n=n||0,this.setCenterAndRadius(e,n,i))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){const r=this.flatCoordinates,o=e-r[0],a=n-r[1],d=o*o+a*a;if(d<s){if(d===0)for(let _=0;_<this.stride;++_)i[_]=r[_];else{const _=this.getRadius()/Math.sqrt(d);i[0]=r[0]+_*o,i[1]=r[1]+_*a;for(let C=2;C<this.stride;++C)i[C]=r[C]}return i.length=this.stride,d}return s}containsXY(e,n){const i=this.flatCoordinates,s=e-i[0],r=n-i[1];return s*s+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const n=this.flatCoordinates,i=n[this.stride]-n[0];return createOrUpdate$2(n[0]-i,n[1]-i,n[0]+i,n[1]+i,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],n=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+n*n}getType(){return"Circle"}intersectsExtent(e){const n=this.getExtent();if(intersects$1(e,n)){const i=this.getCenter();return e[0]<=i[0]&&e[2]>=i[0]||e[1]<=i[1]&&e[3]>=i[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const n=this.stride,i=this.flatCoordinates[n]-this.flatCoordinates[0],s=e.slice();s[n]=s[0]+i;for(let r=1;r<n;++r)s[n+r]=e[r];this.setFlatCoordinates(this.layout,s),this.changed()}setCenterAndRadius(e,n,i){this.setLayout(i,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const s=this.flatCoordinates;let r=deflateCoordinate(s,0,e,this.stride);s[r++]=s[0]+n;for(let o=1,a=this.stride;o<a;++o)s[r++]=s[o];s.length=r,this.changed()}getCoordinates(){return null}setCoordinates(e,n){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,n){const i=this.getCenter(),s=this.getStride();this.setCenter(rotate(i,0,i.length,s,e,n,i)),this.changed()}}Circle.prototype.transform;class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const n=e;this.setGeometry(n)}else{const n=e;this.setProperties(n)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const n=this.getGeometry();n&&e.setGeometry(n.clone());const i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(assert(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,n=this.geometries_.length;e<n;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,n,i,s){if(s<closestSquaredDistanceXY(this.getExtent(),e,n))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(e,n,i,s);return s}containsXY(e,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)if(i[s].containsXY(e,n))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)extend$2(e,n[i].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].getType()===this.getType()?e=e.concat(n[i].getGeometriesArrayRecursive()):e.push(n[i]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const n=[],i=this.geometries_;let s=!1;for(let r=0,o=i.length;r<o;++r){const a=i[r],d=a.getSimplifiedGeometry(e);n.push(d),d!==a&&(s=!0)}if(s){const r=new GeometryCollection(null);return r.setGeometriesArray(n),r}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)if(n[i].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].rotate(e,n);this.changed()}scale(e,n,i){i||(i=getCenter(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(e,n,i);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const n=this.geometries_;for(let i=0,s=n.length;i<s;++i)n[i].applyTransform(e);this.changed()}translate(e,n){const i=this.geometries_;for(let s=0,r=i.length;s<r;++s)i[s].translate(e,n);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(t){const e=[];for(let n=0,i=t.length;n<i;++n)e.push(t[n].clone());return e}function interpolatePoint(t,e,n,i,s,r,o){let a,d;const _=(n-e)/i;if(_===1)a=e;else if(_===2)a=e,d=s;else if(_!==0){let C=t[e],y=t[e+1],v=0;const E=[0];for(let x=e+i;x<n;x+=i){const T=t[x],b=t[x+1];v+=Math.sqrt((T-C)*(T-C)+(b-y)*(b-y)),E.push(v),C=T,y=b}const S=s*v,R=binarySearch(E,S);R<0?(d=(S-E[-R-2])/(E[-R-1]-E[-R-2]),a=e+(-R-2)*i):a=e+R*i}o=o>1?o:2,r=r||new Array(o);for(let C=0;C<o;++C)r[C]=a===void 0?NaN:d===void 0?t[a+C]:lerp(t[a+C],t[a+i+C],d);return r}function lineStringCoordinateAtM(t,e,n,i,s,r){if(n==e)return null;let o;if(s<t[e+i-1])return r?(o=t.slice(e,e+i),o[i-1]=s,o):null;if(t[n-1]<s)return r?(o=t.slice(n-i,n),o[i-1]=s,o):null;if(s==t[e+i-1])return t.slice(e,e+i);let a=e/i,d=n/i;for(;a<d;){const v=a+d>>1;s<t[(v+1)*i-1]?d=v:a=v+1}const _=t[a*i-1];if(s==_)return t.slice((a-1)*i,(a-1)*i+i);const C=t[(a+1)*i-1],y=(s-_)/(C-_);o=[];for(let v=0;v<i-1;++v)o.push(lerp(t[(a-1)*i+v],t[a*i+v],y));return o.push(s),o}function lineStringsCoordinateAtM(t,e,n,i,s,r,o){if(o)return lineStringCoordinateAtM(t,e,n[n.length-1],i,s,r);let a;if(s<t[i-1])return r?(a=t.slice(0,i),a[i-1]=s,a):null;if(t[t.length-1]<s)return r?(a=t.slice(t.length-i),a[i-1]=s,a):null;for(let d=0,_=n.length;d<_;++d){const C=n[d];if(e!=C){if(s<t[e+i-1])return null;if(s<=t[C-1])return lineStringCoordinateAtM(t,e,C,i,s,!1);e=C}}return null}function lineStringLength(t,e,n,i){let s=t[e],r=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const d=t[a],_=t[a+1];o+=Math.sqrt((d-s)*(d-s)+(_-r)*(_-r)),s=d,r=_}return o}class LineString extends SimpleGeometry{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){extend$3(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){return s<closestSquaredDistanceXY(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,s))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const n=[];return n.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new LineString(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,n,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,n);else if(n!==void 0&&i)this.setFlatCoordinates(n,e),this.ends_=i;else{const s=e,r=[],o=[];for(let d=0,_=s.length;d<_;++d){const C=s[d];extend$3(r,C.getFlatCoordinates()),o.push(r.length)}const a=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=o}}appendLineString(e){extend$3(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,s){return s<closestSquaredDistanceXY(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,n,i,s))}getCoordinateAtM(e,n,i){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(n=n!==void 0?n:!1,i=i!==void 0?i:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,n,i))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,n=this.ends_,i=this.layout,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const d=n[o],_=new LineString(e.slice(r,d),i);s.push(_),r=d}return s}getFlatMidpoints(){const e=[],n=this.flatCoordinates;let i=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const d=s[o],_=interpolatePoint(n,i,d,r,.5);extend$3(e,_),i=d}return e}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,n,0,i),new MultiLineString(n,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}class MultiPoint extends SimpleGeometry{constructor(e,n){super(),n&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendPoint(e){extend$3(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,s){if(s<closestSquaredDistanceXY(this.getExtent(),e,n))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,d=r.length;a<d;a+=o){const _=squaredDistance$1(e,n,r[a],r[a+1]);if(_<s){s=_;for(let C=0;C<o;++C)i[C]=r[a+C];i.length=o}}return s}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const n=this.flatCoordinates.length/this.stride;return e<0||n<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,n=this.layout,i=this.stride,s=[];for(let r=0,o=e.length;r<o;r+=i){const a=new Point$1(e.slice(r,r+i),n);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(e){const n=this.flatCoordinates,i=this.stride;for(let s=0,r=n.length;s<r;s+=i){const o=n[s],a=n[s+1];if(containsXY(e,o,a))return!0}return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function linearRingss(t,e,n,i){const s=[];let r=createEmpty();for(let o=0,a=n.length;o<a;++o){const d=n[o];r=createOrUpdateFromFlatCoordinates(t,e,d[0],i),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),e=d[d.length-1]}return s}class MultiPolygon extends SimpleGeometry{constructor(e,n,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(e[0])){const s=e,r=[],o=[];for(let a=0,d=s.length;a<d;++a){const _=s[a],C=r.length,y=_.getEnds();for(let v=0,E=y.length;v<E;++v)y[v]+=C;extend$3(r,_.getFlatCoordinates()),o.push(y)}n=s.length===0?this.getLayout():s[0].getLayout(),e=r,i=o}n!==void 0&&i?(this.setFlatCoordinates(n,e),this.endss_=i):this.setCoordinates(e,n)}appendPolygon(e){let n;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),n=e.getEnds().slice(),this.endss_.push();else{const i=this.flatCoordinates.length;extend$3(this.flatCoordinates,e.getFlatCoordinates()),n=e.getEnds().slice();for(let s=0,r=n.length;s<r;++s)n[s]+=i}this.endss_.push(n),this.changed()}clone(){const e=this.endss_.length,n=new Array(e);for(let s=0;s<e;++s)n[s]=this.endss_[s].slice();const i=new MultiPolygon(this.flatCoordinates.slice(),this.layout,n);return i.applyProperties(this),i}closestPointXY(e,n,i,s){return s<closestSquaredDistanceXY(this.getExtent(),e,n)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,n,i,s))}containsXY(e,n){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,n)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(n,0,this.endss_,this.stride,e)):n=this.flatCoordinates,inflateMultiCoordinatesArray(n,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const n=[],i=[];return n.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),n,0,i),new MultiPolygon(n,"XY",i)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let n;if(e===0)n=0;else{const r=this.endss_[e-1];n=r[r.length-1]}const i=this.endss_[e].slice(),s=i[i.length-1];if(n!==0)for(let r=0,o=i.length;r<o;++r)i[r]-=n;return new Polygon(this.flatCoordinates.slice(n,s),this.layout,i)}getPolygons(){const e=this.layout,n=this.flatCoordinates,i=this.endss_,s=[];let r=0;for(let o=0,a=i.length;o<a;++o){const d=i[o].slice(),_=d[d.length-1];if(r!==0)for(let y=0,v=d.length;y<v;++y)d[y]-=r;const C=new Polygon(n.slice(r,_),e,d);s.push(C),r=_}return s}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(i.length===0)this.flatCoordinates.length=0;else{const s=i[i.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}function quickselect(t,e,n,i,s){quickselectStep(t,e,n||0,i||t.length-1,s||defaultCompare)}function quickselectStep(t,e,n,i,s){for(;i>n;){if(i-n>600){var r=i-n+1,o=e-n+1,a=Math.log(r),d=.5*Math.exp(2*a/3),_=.5*Math.sqrt(a*d*(r-d)/r)*(o-r/2<0?-1:1),C=Math.max(n,Math.floor(e-o*d/r+_)),y=Math.min(i,Math.floor(e+(r-o)*d/r+_));quickselectStep(t,e,C,y,s)}var v=t[e],E=n,S=i;for(swap(t,n,e),s(t[i],v)>0&&swap(t,n,i);E<S;){for(swap(t,E,S),E++,S--;s(t[E],v)<0;)E++;for(;s(t[S],v)>0;)S--}s(t[n],v)===0?swap(t,n,S):(S++,swap(t,S,i)),S<=e&&(n=S+1),e<=S&&(i=S-1)}}function swap(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function defaultCompare(t,e){return t<e?-1:t>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let n=this.data;const i=[];if(!intersects(e,n))return i;const s=this.toBBox,r=[];for(;n;){for(let o=0;o<n.children.length;o++){const a=n.children[o],d=n.leaf?s(a):a;intersects(e,d)&&(n.leaf?i.push(a):contains(e,d)?this._all(a,i):r.push(a))}n=r.pop()}return i}collides(e){let n=this.data;if(!intersects(e,n))return!1;const i=[];for(;n;){for(let s=0;s<n.children.length;s++){const r=n.children[s],o=n.leaf?this.toBBox(r):r;if(intersects(e,o)){if(n.leaf||contains(e,o))return!0;i.push(r)}}n=i.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let i=0;i<e.length;i++)this.insert(e[i]);return this}let n=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=n;else if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){const i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,n){if(!e)return this;let i=this.data;const s=this.toBBox(e),r=[],o=[];let a,d,_;for(;i||r.length;){if(i||(i=r.pop(),d=r[r.length-1],a=o.pop(),_=!0),i.leaf){const C=findItem(e,i.children,n);if(C!==-1)return i.children.splice(C,1),r.push(i),this._condense(r),this}!_&&!i.leaf&&contains(i,s)?(r.push(i),o.push(a),a=0,d=i,i=i.children[0]):d?(a++,i=d.children[a],_=!1):i=null}return this}toBBox(e){return e}compareMinX(e,n){return e.minX-n.minX}compareMinY(e,n){return e.minY-n.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,n){const i=[];for(;e;)e.leaf?n.push(...e.children):i.push(...e.children),e=i.pop();return n}_build(e,n,i,s){const r=i-n+1;let o=this._maxEntries,a;if(r<=o)return a=createNode(e.slice(n,i+1)),calcBBox(a,this.toBBox),a;s||(s=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,s-1))),a=createNode([]),a.leaf=!1,a.height=s;const d=Math.ceil(r/o),_=d*Math.ceil(Math.sqrt(o));multiSelect(e,n,i,_,this.compareMinX);for(let C=n;C<=i;C+=_){const y=Math.min(C+_-1,i);multiSelect(e,C,y,d,this.compareMinY);for(let v=C;v<=y;v+=d){const E=Math.min(v+d-1,y);a.children.push(this._build(e,v,E,s-1))}}return calcBBox(a,this.toBBox),a}_chooseSubtree(e,n,i,s){for(;s.push(n),!(n.leaf||s.length-1===i);){let r=1/0,o=1/0,a;for(let d=0;d<n.children.length;d++){const _=n.children[d],C=bboxArea(_),y=enlargedArea(e,_)-C;y<o?(o=y,r=C<r?C:r,a=_):y===o&&C<r&&(r=C,a=_)}n=a||n.children[0]}return n}_insert(e,n,i){const s=i?e:this.toBBox(e),r=[],o=this._chooseSubtree(s,this.data,n,r);for(o.children.push(e),extend$1(o,s);n>=0&&r[n].children.length>this._maxEntries;)this._split(r,n),n--;this._adjustParentBBoxes(s,r,n)}_split(e,n){const i=e[n],s=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,s);const o=this._chooseSplitIndex(i,r,s),a=createNode(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,calcBBox(i,this.toBBox),calcBBox(a,this.toBBox),n?e[n-1].children.push(a):this._splitRoot(i,a)}_splitRoot(e,n){this.data=createNode([e,n]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,n,i){let s,r=1/0,o=1/0;for(let a=n;a<=i-n;a++){const d=distBBox(e,0,a,this.toBBox),_=distBBox(e,a,i,this.toBBox),C=intersectionArea(d,_),y=bboxArea(d)+bboxArea(_);C<r?(r=C,s=a,o=y<o?y:o):C===r&&y<o&&(o=y,s=a)}return s||i-n}_chooseSplitAxis(e,n,i){const s=e.leaf?this.compareMinX:compareNodeMinX,r=e.leaf?this.compareMinY:compareNodeMinY,o=this._allDistMargin(e,n,i,s),a=this._allDistMargin(e,n,i,r);o<a&&e.children.sort(s)}_allDistMargin(e,n,i,s){e.children.sort(s);const r=this.toBBox,o=distBBox(e,0,n,r),a=distBBox(e,i-n,i,r);let d=bboxMargin(o)+bboxMargin(a);for(let _=n;_<i-n;_++){const C=e.children[_];extend$1(o,e.leaf?r(C):C),d+=bboxMargin(o)}for(let _=i-n-1;_>=n;_--){const C=e.children[_];extend$1(a,e.leaf?r(C):C),d+=bboxMargin(a)}return d}_adjustParentBBoxes(e,n,i){for(let s=i;s>=0;s--)extend$1(n[s],e)}_condense(e){for(let n=e.length-1,i;n>=0;n--)e[n].children.length===0?n>0?(i=e[n-1].children,i.splice(i.indexOf(e[n]),1)):this.clear():calcBBox(e[n],this.toBBox)}};function findItem(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function calcBBox(t,e){distBBox(t,0,t.children.length,e,t)}function distBBox(t,e,n,i,s){s||(s=createNode(null)),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0;for(let r=e;r<n;r++){const o=t.children[r];extend$1(s,t.leaf?i(o):o)}return s}function extend$1(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function compareNodeMinX(t,e){return t.minX-e.minX}function compareNodeMinY(t,e){return t.minY-e.minY}function bboxArea(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function bboxMargin(t){return t.maxX-t.minX+(t.maxY-t.minY)}function enlargedArea(t,e){return(Math.max(e.maxX,t.maxX)-Math.min(e.minX,t.minX))*(Math.max(e.maxY,t.maxY)-Math.min(e.minY,t.minY))}function intersectionArea(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),s=Math.min(t.maxX,e.maxX),r=Math.min(t.maxY,e.maxY);return Math.max(0,s-n)*Math.max(0,r-i)}function contains(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function intersects(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function createNode(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(t,e,n,i,s){const r=[e,n];for(;r.length;){if(n=r.pop(),e=r.pop(),n-e<=i)continue;const o=e+Math.ceil((n-e)/i/2)*i;quickselect(t,o,e,n,s),r.push(e,o,o,n)}}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}function asColorLike(t){return Array.isArray(t)?toString(t):t}class RegularShape extends ImageStyle{constructor(e){const n=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:n,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),n=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){const e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){const i=this.renderOptions_,s=createCanvasContext2D(i.size*e,i.size*e);this.draw_(i,s,e),n=s.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let s=this.radius_,r=this.radius2_===void 0?s:this.radius2_;if(s<r){const G=s;s=r,r=G}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,d=r*Math.sin(a),_=Math.sqrt(r*r-d*d),C=s-_,y=Math.sqrt(d*d+C*C),v=y/d;if(e==="miter"&&v<=i)return v*n;const E=n/2/v,S=n/2*(C/y),x=Math.sqrt((s+E)*(s+E)+S*S)-s;if(this.radius2_===void 0||e==="bevel")return x*2;const T=s*Math.sin(a),b=Math.sqrt(s*s-T*T),M=r-b,k=Math.sqrt(T*T+M*M)/T;if(k<=i){const G=k*n/2-r-s;return 2*Math.max(x,G)}return x*2}createRenderOptions(){let e=defaultLineCap,n=defaultLineJoin,i=0,s=null,r=0,o,a=0;this.stroke_&&(o=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),a=this.stroke_.getWidth()??defaultLineWidth,s=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,i=this.stroke_.getMiterLimit()??defaultMiterLimit);const d=this.calculateLineJoinSize_(n,a,i),_=Math.max(this.radius_,this.radius2_||0),C=Math.ceil(2*_+d);return{strokeStyle:o,strokeWidth:a,size:C,lineCap:e,lineDash:s,lineDashOffset:r,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let s=this.fill_.getColor();s===null&&(s=defaultFillStyle),n.fillStyle=asColorLike(s),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),s=0;typeof i=="string"&&(i=asArray(i)),i===null?s=1:Array.isArray(i)&&(s=i.length===4?i[3]:1),s===0&&(n=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_;const i=this.radius_;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{const s=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);const r=this.angle_-Math.PI/2,o=2*Math.PI/n;for(let a=0;a<n;a++){const d=r+a*o,_=a%2===0?i:s;e.lineTo(_*Math.cos(d),_*Math.sin(d))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=defaultFillStyle,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),n=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}class Style{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Style({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}}function toFunction(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(assert(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}let defaultStyles=null;function createDefaultStyle(t,e){if(!defaultStyles){const n=new Fill({color:"rgba(255,255,255,0.4)"}),i=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style({image:new CircleStyle({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return defaultStyles}function createEditingStyle(){const t={},e=[255,255,255,1],n=[0,153,255,1],i=3;return t.Polygon=[new Style({fill:new Fill({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Style({stroke:new Stroke({color:e,width:i+2})}),new Style({stroke:new Stroke({color:n,width:i})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Style({image:new CircleStyle({radius:i*2,fill:new Fill({color:n}),stroke:new Stroke({color:e,width:i/2})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function defaultGeometryFunction(t){return t.getGeometry()}let taintedTestContext=null;class IconImage extends Target{constructor(e,n,i,s,r){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=r,this.imageState_=s===void 0?ImageState.IDLE:s,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],n=this.size_[1],i=createCanvasContext2D(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);const s=i.getContext("2d");s.scale(e,e),s.drawImage(n,0,0),s.globalCompositeOperation="multiply",s.fillStyle=asString(this.color_),s.fillRect(0,0,i.width/e,i.height/e),s.globalCompositeOperation="destination-in",s.drawImage(n,0,0),this.canvas_[e]=i}}function get$1(t,e,n,i,s){let r=e===void 0?void 0:shared.get(e,n,s);return r||(r=new IconImage(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,s),shared.set(e,n,s,r)),r}function calculateScale(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,s=e.scale!==void 0?e.scale:1,r=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:s,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:r,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;assert(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||getUid(o)),assert(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let d;if(e.src!==void 0?d=ImageState.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?d=o.src?ImageState.LOADED:ImageState.IDLE:d=ImageState.LOADING:d=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$1(o,a,this.crossOrigin_,d,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let _,C;if(e.size)[_,C]=e.size;else{const y=this.getImage(1);if(y.width&&y.height)_=y.width,C=y.height;else if(y instanceof HTMLImageElement){this.initialOptions_=e;const v=()=>{if(this.unlistenImageChange(v),!this.initialOptions_)return;const E=this.iconImage_.getSize();this.setScale(calculateScale(E[0],E[1],e.width,e.height))};this.listenImageChange(v);return}}_!==void 0&&this.setScale(calculateScale(_,C,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const s=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!s)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=s[0]),this.anchorYUnits_=="fraction"&&(e[1]*=s[1])}if(this.anchorOrigin_!="top-left"){if(!s)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+s[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+s[1])}this.normalizedAnchor_=e}const n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const NoneType=0,BooleanType=1<<numTypes++,NumberType=1<<numTypes++,StringType=1<<numTypes++,ColorType=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType]:"boolean",[NumberType]:"number",[StringType]:"string",[ColorType]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(t){const e=[];for(const n of namedTypes)includesType(t,n)&&e.push(typeNames[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(t,e){return(t&e)===e}function overlapsType(t,e){return!!(t&e)}function isType(t,e){return t===e}class LiteralExpression{constructor(e,n){this.type=e,this.value=n}}class CallExpression{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(t){switch(t){case"string":return StringType;case"color":return ColorType;case"number":return NumberType;case"boolean":return BooleanType;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${t}`)}}function parse$1(t,e,n){switch(typeof t){case"boolean":return new LiteralExpression(BooleanType,t);case"number":return new LiteralExpression(NumberType,t);case"string":{let s=StringType;return isStringColor(t)&&(s|=ColorType),isType(s&n,NoneType)||(s&=n),new LiteralExpression(s,t)}}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return parseCallExpression(t,e,n);for(const s of t)if(typeof s!="number")throw new Error("Expected an array of numbers");let i=NumberArrayType;return(t.length===3||t.length===4)&&(i|=ColorType),n&&(i&=n),new LiteralExpression(i,t)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([t,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([t])=>t.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType|StringType,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType,withNoArgs),[Ops.Resolution]:createParser(NumberType,withNoArgs),[Ops.Zoom]:createParser(NumberType,withNoArgs),[Ops.Time]:createParser(NumberType,withNoArgs),[Ops.Any]:createParser(BooleanType,withArgsCount(2,1/0),parseArgsOfType(BooleanType)),[Ops.All]:createParser(BooleanType,withArgsCount(2,1/0),parseArgsOfType(BooleanType)),[Ops.Not]:createParser(BooleanType,withArgsCount(1,1),parseArgsOfType(BooleanType)),[Ops.Equal]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(t=>{let e=NumberType|ColorType;for(let n=0;n<t.length;n++)e&=t[n].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType|ColorType),narrowArgsType),[Ops.Divide]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Add]:createParser(NumberType,withArgsCount(2,1/0),parseArgsOfType(NumberType)),[Ops.Subtract]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Clamp]:createParser(NumberType,withArgsCount(3,3),parseArgsOfType(NumberType)),[Ops.Mod]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Pow]:createParser(NumberType,withArgsCount(2,2),parseArgsOfType(NumberType)),[Ops.Abs]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Floor]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Ceil]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Round]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Sin]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Cos]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Atan]:createParser(NumberType,withArgsCount(1,2),parseArgsOfType(NumberType)),[Ops.Sqrt]:createParser(NumberType,withArgsCount(1,1),parseArgsOfType(NumberType)),[Ops.Match]:createParser(t=>{let e=AnyType;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType,withArgsCount(3,3),parseArgsOfType(NumberType)),[Ops.Interpolate]:createParser(t=>{let e=ColorType|NumberType;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(t=>{let e=AnyType;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(t=>t.length===3||t.length===4?NumberArrayType|ColorType:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType)),[Ops.Color]:createParser(ColorType,withArgsCount(3,4),parseArgsOfType(NumberType)),[Ops.Band]:createParser(NumberType,withArgsCount(1,3),parseArgsOfType(NumberType)),[Ops.Palette]:createParser(ColorType,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(t,e){const n=parse$1(t[1],e);if(!(n instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){const i=parse$1(t[2],e);return[n,i]}return[n]}function withVarArgs(t,e,n,i){const s=t[1];if(typeof s!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(s),!("variables"in e.style)||e.style.variables[s]===void 0)return[new LiteralExpression(AnyType,s)];const r=e.style.variables[s],o=parse$1(r,e);if(o.value=s,i&&!overlapsType(i,o.type))throw new Error(`The variable ${s} has type ${typeName(o.type)} but the following type was expected: ${typeName(i)}`);return[o]}function usesFeatureId(t,e){e.featureId=!0}function withNoArgs(t,e){const n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function withArgsCount(t,e){return function(n,i){const s=n[0],r=n.length-1;if(t===e){if(r!==t){const o=t===1?"":"s";throw new Error(`Expected ${t} argument${o} for ${s}, got ${r}`)}}else if(r<t||r>e){const o=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${o} arguments for ${s}, got ${r}`)}}}function parseArgsOfType(t){return function(e,n){const i=e[0],s=e.length-1,r=new Array(s);for(let o=0;o<s;++o){const a=parse$1(e[o+1],n);if(!overlapsType(t,a.type)){const d=typeName(t),_=typeName(a.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${d} but expected ${_}`)}a.type&=t,r[o]=a}return r}}function narrowArgsType(t,e,n){const i=t[0],s=t.length-1;let r=AnyType;for(let a=0;a<n.length;++a)r&=n[a].type;if(r===NoneType)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(s);for(let a=0;a<s;++a)o[a]=parse$1(t[a+1],e,r);return o}function withOddArgs(t,e){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function withEvenArgs(t,e){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function parseMatchArgs(t,e,n,i){const s=t.length-1;let o=parse$1(t[1],e).type;const a=parse$1(t[t.length-1],e);let d=i!==void 0?i&a.type:a.type;const _=new Array(s-2);for(let y=0;y<s-2;y+=2){const v=parse$1(t[y+2],e),E=parse$1(t[y+3],e);o&=v.type,d&=E.type,_[y]=v,_[y+1]=E}const C=StringType|NumberType|BooleanType;if(!overlapsType(C,o))throw new Error(`Expected an input of type ${typeName(C)} for the interpolate operation, got ${typeName(o)} instead`);if(isType(d,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let y=0;y<s-2;y+=2){const v=parse$1(t[y+2],e,o),E=parse$1(t[y+3],e,d);_[y]=v,_[y+1]=E}return[parse$1(t[1],e,o),..._,parse$1(t[t.length-1],e,d)]}function parseInterpolateArgs(t,e,n,i){const s=t[1];let r;switch(s[0]){case"linear":r=1;break;case"exponential":if(r=s[1],typeof r!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(r)} instead`);break;default:r=null}if(!r)throw new Error(`Invalid interpolation type: ${JSON.stringify(s)}`);r=parse$1(r,e);let o=parse$1(t[2],e);if(!overlapsType(NumberType,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(o.type)} instead`);o=parse$1(t[2],e,NumberType);const a=new Array(t.length-3);for(let d=0;d<a.length;d+=2){let _=parse$1(t[d+3],e);if(!overlapsType(NumberType,_.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(_.type)} at position ${d+2} instead`);let C=parse$1(t[d+4],e);if(!overlapsType(NumberType|ColorType,C.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(C.type)} at position ${d+3} instead`);_=parse$1(t[d+3],e,NumberType),C=parse$1(t[d+4],e,NumberType|ColorType),a[d]=_,a[d+1]=C}return[r,o,...a]}function parseCaseArgs(t,e,n,i){const s=parse$1(t[t.length-1],e);let r=i!==void 0?i&s.type:s.type;const o=new Array(t.length-1);for(let a=0;a<o.length-1;a+=2){const d=parse$1(t[a+1],e),_=parse$1(t[a+2],e);if(!overlapsType(BooleanType,d.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(d.type)} at position ${a} instead`);r&=_.type,o[a]=d,o[a+1]=_}if(isType(r,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<o.length-1;a+=2)o[a+1]=parse$1(t[a+2],e,r);return o[o.length-1]=parse$1(t[t.length-1],e,r),o}function parseInArgs(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=StringType|NumberType;const s=new Array(n.length);for(let o=0;o<s.length;o++){const a=parse$1(n[o],e);i&=a.type,s[o]=a}if(isType(i,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[parse$1(t[1],e,i),...s]}function parsePaletteArgs(t,e){const n=parse$1(t[1],e,NumberType);if(n.type!==NumberType)throw new Error(`The first argument of palette must be an number, got ${typeName(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const s=new Array(i.length);for(let r=0;r<s.length;r++){const o=parse$1(i[r],e,ColorType);if(!(o instanceof LiteralExpression))throw new Error(`The palette color at index ${r} must be a literal value`);if(!overlapsType(o.type,ColorType))throw new Error(`The palette color at index ${r} should be of type color, got ${typeName(o.type)} instead`);s[r]=o}return[n,...s]}function createParser(t,...e){return function(n,i,s){const r=n[0];let o=[];for(let d=0;d<e.length;d++)o=e[d](n,i,o,s)||o;let a=typeof t=="function"?t(o):t;if(s!==void 0){if(!overlapsType(a,s))throw new Error(`The following expression was expected to return ${typeName(s)}, but returns ${typeName(a)} instead: ${JSON.stringify(n)}`);a&=s}if(a===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new CallExpression(a,r,...o)}}function parseCallExpression(t,e,n){const i=t[0],s=parsers[i];if(!s)throw new Error(`Unknown operator: ${i}`);return s(t,e,n)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(t,e,n){const i=parse$1(t,n);if(!overlapsType(e,i.type)){const s=typeName(e),r=typeName(i.type);throw new Error(`Expected expression to be of type ${s}, got ${r}`)}return compileExpression(i)}function compileExpression(t,e){if(t instanceof LiteralExpression){if(t.type===ColorType&&typeof t.value=="string"){const i=fromString(t.value);return function(){return i}}return function(){return t.value}}const n=t.operator;switch(n){case Ops.Number:case Ops.String:return compileAssertionExpression(t);case Ops.Get:case Ops.Var:return compileAccessorExpression(t);case Ops.Id:return i=>i.featureId;case Ops.Concat:{const i=t.args.map(s=>compileExpression(s));return s=>"".concat(...i.map(r=>r(s).toString()))}case Ops.Resolution:return i=>i.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(t);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(t);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(t);case Ops.Match:return compileMatchExpression(t);case Ops.Interpolate:return compileInterpolateExpression(t);default:throw new Error(`Unsupported operator ${n}`)}}function compileAssertionExpression(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=compileExpression(t.args[r]);switch(n){case Ops.Number:case Ops.String:return r=>{for(let o=0;o<i;++o){const a=s[o](r);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function compileAccessorExpression(t,e){const i=t.args[0].value;switch(t.operator){case Ops.Get:return s=>s.properties[i];case Ops.Var:return s=>s.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function compileComparisonExpression(t,e){const n=t.operator,i=compileExpression(t.args[0]),s=compileExpression(t.args[1]);switch(n){case Ops.Equal:return r=>i(r)===s(r);case Ops.NotEqual:return r=>i(r)!==s(r);case Ops.LessThan:return r=>i(r)<s(r);case Ops.LessThanOrEqualTo:return r=>i(r)<=s(r);case Ops.GreaterThan:return r=>i(r)>s(r);case Ops.GreaterThanOrEqualTo:return r=>i(r)>=s(r);default:throw new Error(`Unsupported comparison operator ${n}`)}}function compileLogicalExpression(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=compileExpression(t.args[r]);switch(n){case Ops.Any:return r=>{for(let o=0;o<i;++o)if(s[o](r))return!0;return!1};case Ops.All:return r=>{for(let o=0;o<i;++o)if(!s[o](r))return!1;return!0};case Ops.Not:return r=>!s[0](r);default:throw new Error(`Unsupported logical operator ${n}`)}}function compileNumericExpression(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let r=0;r<i;++r)s[r]=compileExpression(t.args[r]);switch(n){case Ops.Multiply:return r=>{let o=1;for(let a=0;a<i;++a)o*=s[a](r);return o};case Ops.Divide:return r=>s[0](r)/s[1](r);case Ops.Add:return r=>{let o=0;for(let a=0;a<i;++a)o+=s[a](r);return o};case Ops.Subtract:return r=>s[0](r)-s[1](r);case Ops.Clamp:return r=>{const o=s[0](r),a=s[1](r);if(o<a)return a;const d=s[2](r);return o>d?d:o};case Ops.Mod:return r=>s[0](r)%s[1](r);case Ops.Pow:return r=>Math.pow(s[0](r),s[1](r));case Ops.Abs:return r=>Math.abs(s[0](r));case Ops.Floor:return r=>Math.floor(s[0](r));case Ops.Ceil:return r=>Math.ceil(s[0](r));case Ops.Round:return r=>Math.round(s[0](r));case Ops.Sin:return r=>Math.sin(s[0](r));case Ops.Cos:return r=>Math.cos(s[0](r));case Ops.Atan:return i===2?r=>Math.atan2(s[0](r),s[1](r)):r=>Math.atan(s[0](r));case Ops.Sqrt:return r=>Math.sqrt(s[0](r));default:throw new Error(`Unsupported numeric operator ${n}`)}}function compileMatchExpression(t,e){const n=t.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=compileExpression(t.args[s]);return s=>{const r=i[0](s);for(let o=1;o<n;o+=2)if(r===i[o](s))return i[o+1](s);return i[n-1](s)}}function compileInterpolateExpression(t,e){const n=t.args.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=compileExpression(t.args[s]);return s=>{const r=i[0](s),o=i[1](s);let a,d;for(let _=2;_<n;_+=2){const C=i[_](s);let y=i[_+1](s);const v=Array.isArray(y);if(v&&(y=withAlpha(y)),C>=o)return _===2?y:v?interpolateColor(r,o,a,d,C,y):interpolateNumber(r,o,a,d,C,y);a=C,d=y}return d}}function interpolateNumber(t,e,n,i,s,r){const o=s-n;if(o===0)return i;const a=e-n,d=t===1?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+d*(r-i)}function interpolateColor(t,e,n,i,s,r){if(s-n===0)return i;const a=rgbaToLcha(i),d=rgbaToLcha(r);let _=d[2]-a[2];_>180?_-=360:_<-180&&(_+=360);const C=[interpolateNumber(t,e,n,a[0],s,d[0]),interpolateNumber(t,e,n,a[1],s,d[1]),a[2]+interpolateNumber(t,e,n,0,s,_),interpolateNumber(t,e,n,i[3],s,r[3])];return normalize(lchaToRgba(C))}function always(t){return!0}function rulesToStyleFunction(t){const e=newParsingContext(),n=buildRuleSet(t,e),i=newEvaluationContext();return function(s,r){if(i.properties=s.getPropertiesInternal(),i.resolution=r,e.featureId){const o=s.getId();o!==void 0?i.featureId=o:i.featureId=null}return n(i)}}function flatStylesToStyleFunction(t){const e=newParsingContext(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=buildStyle(t[o],e);const s=newEvaluationContext(),r=new Array(n);return function(o,a){if(s.properties=o.getPropertiesInternal(),s.resolution=a,e.featureId){const _=o.getId();_!==void 0?s.featureId=_:s.featureId=null}let d=0;for(let _=0;_<n;++_){const C=i[_](s);C&&(r[d]=C,d+=1)}return r.length=d,r}}function buildRuleSet(t,e){const n=t.length,i=new Array(n);for(let s=0;s<n;++s){const r=t[s],o="filter"in r?buildExpression(r.filter,BooleanType,e):always;let a;if(Array.isArray(r.style)){const d=r.style.length;a=new Array(d);for(let _=0;_<d;++_)a[_]=buildStyle(r.style[_],e)}else a=[buildStyle(r.style,e)];i[s]={filter:o,styles:a}}return function(s){const r=[];let o=!1;for(let a=0;a<n;++a){const d=i[a].filter;if(d(s)&&!(t[a].else&&o)){o=!0;for(const _ of i[a].styles){const C=_(s);C&&r.push(C)}}}return r}}function buildStyle(t,e){const n=buildFill(t,"",e),i=buildStroke(t,"",e),s=buildText(t,e),r=buildImage(t,e),o=numberEvaluator(t,"z-index",e);if(!n&&!i&&!s&&!r&&!isEmpty$1(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Style;return function(d){let _=!0;if(n){const C=n(d);C&&(_=!1),a.setFill(C)}if(i){const C=i(d);C&&(_=!1),a.setStroke(C)}if(s){const C=s(d);C&&(_=!1),a.setText(C)}if(r){const C=r(d);C&&(_=!1),a.setImage(C)}return o&&a.setZIndex(o(d)),_?null:a}}function buildFill(t,e,n){const i=colorLikeEvaluator(t,e+"fill-color",n);if(!i)return null;const s=new Fill;return function(r){const o=i(r);return o==="none"?null:(s.setColor(o),s)}}function buildStroke(t,e,n){const i=numberEvaluator(t,e+"stroke-width",n),s=colorLikeEvaluator(t,e+"stroke-color",n);if(!i&&!s)return null;const r=stringEvaluator(t,e+"stroke-line-cap",n),o=stringEvaluator(t,e+"stroke-line-join",n),a=numberArrayEvaluator(t,e+"stroke-line-dash",n),d=numberEvaluator(t,e+"stroke-line-dash-offset",n),_=numberEvaluator(t,e+"stroke-miter-limit",n),C=new Stroke;return function(y){if(s){const v=s(y);if(v==="none")return null;C.setColor(v)}if(i&&C.setWidth(i(y)),r){const v=r(y);if(v!=="butt"&&v!=="round"&&v!=="square")throw new Error("Expected butt, round, or square line cap");C.setLineCap(v)}if(o){const v=o(y);if(v!=="bevel"&&v!=="round"&&v!=="miter")throw new Error("Expected bevel, round, or miter line join");C.setLineJoin(v)}return a&&C.setLineDash(a(y)),d&&C.setLineDashOffset(d(y)),_&&C.setMiterLimit(_(y)),C}}function buildText(t,e){const n="text-",i=stringEvaluator(t,n+"value",e);if(!i)return null;const s=buildFill(t,n,e),r=buildFill(t,n+"background-",e),o=buildStroke(t,n,e),a=buildStroke(t,n+"background-",e),d=stringEvaluator(t,n+"font",e),_=numberEvaluator(t,n+"max-angle",e),C=numberEvaluator(t,n+"offset-x",e),y=numberEvaluator(t,n+"offset-y",e),v=booleanEvaluator(t,n+"overflow",e),E=stringEvaluator(t,n+"placement",e),S=numberEvaluator(t,n+"repeat",e),R=sizeLikeEvaluator(t,n+"scale",e),x=booleanEvaluator(t,n+"rotate-with-view",e),T=numberEvaluator(t,n+"rotation",e),b=stringEvaluator(t,n+"align",e),M=stringEvaluator(t,n+"justify",e),N=stringEvaluator(t,n+"baseline",e),k=numberArrayEvaluator(t,n+"padding",e),G=new Text({});return function(Y){if(G.setText(i(Y)),s&&G.setFill(s(Y)),r&&G.setBackgroundFill(r(Y)),o&&G.setStroke(o(Y)),a&&G.setBackgroundStroke(a(Y)),d&&G.setFont(d(Y)),_&&G.setMaxAngle(_(Y)),C&&G.setOffsetX(C(Y)),y&&G.setOffsetY(y(Y)),v&&G.setOverflow(v(Y)),E){const q=E(Y);if(q!=="point"&&q!=="line")throw new Error("Expected point or line for text-placement");G.setPlacement(q)}if(S&&G.setRepeat(S(Y)),R&&G.setScale(R(Y)),x&&G.setRotateWithView(x(Y)),T&&G.setRotation(T(Y)),b){const q=b(Y);if(q!=="left"&&q!=="center"&&q!=="right"&&q!=="end"&&q!=="start")throw new Error("Expected left, right, center, start, or end for text-align");G.setTextAlign(q)}if(M){const q=M(Y);if(q!=="left"&&q!=="right"&&q!=="center")throw new Error("Expected left, right, or center for text-justify");G.setJustify(q)}if(N){const q=N(Y);if(q!=="bottom"&&q!=="top"&&q!=="middle"&&q!=="alphabetic"&&q!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");G.setTextBaseline(q)}return k&&G.setPadding(k(Y)),G}}function buildImage(t,e){return"icon-src"in t?buildIcon(t,e):"shape-points"in t?buildShape(t,e):"circle-radius"in t?buildCircle(t,e):null}function buildIcon(t,e){const n="icon-",i=n+"src",s=requireString(t[i],i),r=coordinateEvaluator(t,n+"anchor",e),o=sizeLikeEvaluator(t,n+"scale",e),a=numberEvaluator(t,n+"opacity",e),d=coordinateEvaluator(t,n+"displacement",e),_=numberEvaluator(t,n+"rotation",e),C=booleanEvaluator(t,n+"rotate-with-view",e),y=optionalIconOrigin(t,n+"anchor-origin"),v=optionalIconAnchorUnits(t,n+"anchor-x-units"),E=optionalIconAnchorUnits(t,n+"anchor-y-units"),S=optionalColorLike(t,n+"color"),R=optionalString(t,n+"cross-origin"),x=optionalNumberArray(t,n+"offset"),T=optionalIconOrigin(t,n+"offset-origin"),b=optionalNumber(t,n+"width"),M=optionalNumber(t,n+"height"),N=optionalSize(t,n+"size"),k=optionalDeclutterMode(t,n+"declutter"),G=new Icon({src:s,anchorOrigin:y,anchorXUnits:v,anchorYUnits:E,color:S,crossOrigin:R,offset:x,offsetOrigin:T,height:M,width:b,size:N,declutterMode:k});return function(Y){return a&&G.setOpacity(a(Y)),d&&G.setDisplacement(d(Y)),_&&G.setRotation(_(Y)),C&&G.setRotateWithView(C(Y)),o&&G.setScale(o(Y)),r&&G.setAnchor(r(Y)),G}}function buildShape(t,e){const n="shape-",i=n+"points",s=requireNumber(t[i],i),r=buildFill(t,n,e),o=buildStroke(t,n,e),a=sizeLikeEvaluator(t,n+"scale",e),d=coordinateEvaluator(t,n+"displacement",e),_=numberEvaluator(t,n+"rotation",e),C=booleanEvaluator(t,n+"rotate-with-view",e),y=optionalNumber(t,n+"radius"),v=optionalNumber(t,n+"radius1"),E=optionalNumber(t,n+"radius2"),S=optionalNumber(t,n+"angle"),R=optionalDeclutterMode(t,n+"declutter-mode"),x=new RegularShape({points:s,radius:y,radius1:v,radius2:E,angle:S,declutterMode:R});return function(T){return r&&x.setFill(r(T)),o&&x.setStroke(o(T)),d&&x.setDisplacement(d(T)),_&&x.setRotation(_(T)),C&&x.setRotateWithView(C(T)),a&&x.setScale(a(T)),x}}function buildCircle(t,e){const n="circle-",i=buildFill(t,n,e),s=buildStroke(t,n,e),r=numberEvaluator(t,n+"radius",e),o=sizeLikeEvaluator(t,n+"scale",e),a=coordinateEvaluator(t,n+"displacement",e),d=numberEvaluator(t,n+"rotation",e),_=booleanEvaluator(t,n+"rotate-with-view",e),C=optionalDeclutterMode(t,n+"declutter-mode"),y=new CircleStyle({radius:5,declutterMode:C});return function(v){return r&&y.setRadius(r(v)),i&&y.setFill(i(v)),s&&y.setStroke(s(v)),a&&y.setDisplacement(a(v)),d&&y.setRotation(d(v)),_&&y.setRotateWithView(_(v)),o&&y.setScale(o(v)),y}}function numberEvaluator(t,e,n){if(!(e in t))return;const i=buildExpression(t[e],NumberType,n);return function(s){return requireNumber(i(s),e)}}function stringEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],StringType,n);return function(s){return requireString(i(s),e)}}function booleanEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],BooleanType,n);return function(s){const r=i(s);if(typeof r!="boolean")throw new Error(`Expected a boolean for ${e}`);return r}}function colorLikeEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],ColorType|StringType,n);return function(s){return requireColorLike(i(s),e)}}function numberArrayEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],NumberArrayType,n);return function(s){return requireNumberArray(i(s),e)}}function coordinateEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],NumberArrayType,n);return function(s){const r=requireNumberArray(i(s),e);if(r.length!==2)throw new Error(`Expected two numbers for ${e}`);return r}}function sizeLikeEvaluator(t,e,n){if(!(e in t))return null;const i=buildExpression(t[e],NumberArrayType|NumberType,n);return function(s){return requireSizeLike(i(s),e)}}function optionalNumber(t,e){const n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function optionalSize(t,e){const n=t[e];if(n!==void 0){if(typeof n=="number")return toSize(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function optionalString(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function optionalIconOrigin(t,e){const n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function optionalIconAnchorUnits(t,e){const n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function optionalNumberArray(t,e){const n=t[e];if(n!==void 0)return requireNumberArray(n,e)}function optionalDeclutterMode(t,e){const n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function optionalColorLike(t,e){const n=t[e];if(n!==void 0)return requireColorLike(n,e)}function requireNumberArray(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function requireString(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function requireNumber(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function requireColorLike(t,e){if(typeof t=="string")return t;const n=requireNumberArray(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function requireSizeLike(t,e){if(typeof t=="number")return t;const n=requireNumberArray(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}const Property={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer{constructor(e){e=e||{};const n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(t){if(t===void 0)return createDefaultStyle;if(!t)return null;if(typeof t=="function"||t instanceof Style)return t;if(!Array.isArray(t))return flatStylesToStyleFunction([t]);if(t.length===0)return[];const e=t.length,n=t[0];if(n instanceof Style){const s=new Array(e);for(let r=0;r<e;++r){const o=t[r];if(!(o instanceof Style))throw new Error("Expected a list of style instances");s[r]=o}return s}if("style"in n){const s=new Array(e);for(let r=0;r<e;++r){const o=t[r];if(!("style"in o))throw new Error("Expected a list of rules with a style property");s[r]=o}return rulesToStyleFunction(s)}return flatStylesToStyleFunction(t)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,n,i,s){}drawGeometry(e){}setStyle(e){}drawCircle(e,n){}drawFeature(e,n){}drawGeometryCollection(e,n){}drawLineString(e,n){}drawMultiLineString(e,n){}drawMultiPoint(e,n){}drawMultiPolygon(e,n){}drawPoint(e,n){}drawPolygon(e,n){}drawText(e,n){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}}class CanvasBuilder extends VectorContext{constructor(e,n,i,s){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=s,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){const i=this.getBufferedMaxExtent(),s=this.tmpCoordinate_,r=this.coordinates;let o=r.length;for(let a=0,d=e.length;a<d;a+=n)s[0]=e[a],s[1]=e[a+1],containsCoordinate(i,s)&&(r[o++]=s[0],r[o++]=s[1]);return o}appendFlatLineCoordinates(e,n,i,s,r,o){const a=this.coordinates;let d=a.length;const _=this.getBufferedMaxExtent();o&&(n+=s);let C=e[n],y=e[n+1];const v=this.tmpCoordinate_;let E=!0,S,R,x;for(S=n+s;S<i;S+=s)v[0]=e[S],v[1]=e[S+1],x=coordinateRelationship(_,v),x!==R?(E&&(a[d++]=C,a[d++]=y,E=!1),a[d++]=v[0],a[d++]=v[1]):x===Relationship.INTERSECTING?(a[d++]=v[0],a[d++]=v[1],E=!1):E=!0,C=v[0],y=v[1],R=x;return(r&&E||S===n+s)&&(a[d++]=C,a[d++]=y),d}drawCustomCoordinates_(e,n,i,s,r){for(let o=0,a=i.length;o<a;++o){const d=i[o],_=this.appendFlatLineCoordinates(e,n,d,s,!1,!1);r.push(_),n=d}return n}drawCustom(e,n,i,s){this.beginGeometry(e,n);const r=e.getType(),o=e.getStride(),a=this.coordinates.length;let d,_,C,y,v;switch(r){case"MultiPolygon":d=e.getOrientedFlatCoordinates(),y=[];const E=e.getEndss();v=0;for(let S=0,R=E.length;S<R;++S){const x=[];v=this.drawCustomCoordinates_(d,v,E[S],o,x),y.push(x)}this.instructions.push([Instruction.CUSTOM,a,y,e,i,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,y,e,s||i,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":C=[],d=r=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),v=this.drawCustomCoordinates_(d,0,e.getEnds(),o,C),this.instructions.push([Instruction.CUSTOM,a,C,e,i,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,C,e,s||i,inflateCoordinatesArray]);break;case"LineString":case"Circle":d=e.getFlatCoordinates(),_=this.appendFlatLineCoordinates(d,0,d.length,o,!1,!1),this.instructions.push([Instruction.CUSTOM,a,_,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,_,e,s||i,inflateCoordinates]);break;case"MultiPoint":d=e.getFlatCoordinates(),_=this.appendFlatPointCoordinates(d,o),_>a&&(this.instructions.push([Instruction.CUSTOM,a,_,e,i,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,_,e,s||i,inflateCoordinates]));break;case"Point":d=e.getFlatCoordinates(),this.coordinates.push(d[0],d[1]),_=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,a,_,e,i]),this.hitDetectionInstructions.push([Instruction.CUSTOM,a,_,e,s||i]);break}this.endGeometry(n)}beginGeometry(e,n){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,n,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,n,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let n;const i=e.length;let s,r,o=-1;for(n=0;n<i;++n)s=e[n],r=s[0],r==Instruction.END_GEOMETRY?o=n:r==Instruction.BEGIN_GEOMETRY&&(s[2]=n,reverseSubArray(this.hitDetectionInstructions,o,n),o=-1)}setFillStrokeStyle(e,n){const i=this.state;if(e){const s=e.getColor();i.fillStyle=asColorLike(s||defaultFillStyle)}else i.fillStyle=void 0;if(n){const s=n.getColor();i.strokeStyle=asColorLike(s||defaultStrokeStyle);const r=n.getLineCap();i.lineCap=r!==void 0?r:defaultLineCap;const o=n.getLineDash();i.lineDash=o?o.slice():defaultLineDash;const a=n.getLineDashOffset();i.lineDashOffset=a||defaultLineDashOffset;const d=n.getLineJoin();i.lineJoin=d!==void 0?d:defaultLineJoin;const _=n.getWidth();i.lineWidth=_!==void 0?_:defaultLineWidth;const C=n.getMiterLimit();i.miterLimit=C!==void 0?C:defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){const n=e.fillStyle,i=[Instruction.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(!0),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){const i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){const i=e.strokeStyle,s=e.lineCap,r=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,d=e.lineWidth,_=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=s||r!=e.currentLineDash&&!equals$2(e.currentLineDash,r)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=d||e.currentMiterLimit!=_)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=s,e.currentLineDash=r,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=d,e.currentMiterLimit=_)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const n=[Instruction.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,n,i,s){super(e,n,i,s),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n){if(!this.image_)return;this.beginGeometry(e,n);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Instruction.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n){if(!this.image_)return;this.beginGeometry(e,n);const i=e.getFlatCoordinates(),s=e.getStride(),r=this.coordinates.length,o=this.appendFlatPointCoordinates(i,s);this.instructions.push([Instruction.DRAW_IMAGE,r,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,r,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){const i=e.getAnchor(),s=e.getSize(),r=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=s[1],this.opacity_=e.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=s[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,n,i,s){super(e,n,i,s)}drawFlatCoordinates_(e,n,i,s){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(e,n,i,s,!1,!1),a=[Instruction.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(n)}drawMultiLineString(e,n){const i=this.state,s=i.strokeStyle,r=i.lineWidth;if(s===void 0||r===void 0)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(e,n),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const o=e.getEnds(),a=e.getFlatCoordinates(),d=e.getStride();let _=0;for(let C=0,y=o.length;C<y;++C)_=this.drawFlatCoordinates_(a,_,o[C],d);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(n)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,n,i,s){super(e,n,i,s)}drawFlatCoordinatess_(e,n,i,s){const r=this.state,o=r.fillStyle!==void 0,a=r.strokeStyle!==void 0,d=i.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let _=0;_<d;++_){const C=i[_],y=this.coordinates.length,v=this.appendFlatLineCoordinates(e,n,C,s,!0,!a),E=[Instruction.MOVE_TO_LINE_TO,y,v];this.instructions.push(E),this.hitDetectionInstructions.push(E),a&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),n=C}return o&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),a&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),n}drawCircle(e,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getFlatCoordinates(),a=e.getStride(),d=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const _=[Instruction.CIRCLE,d];this.instructions.push(beginPathInstruction,_),this.hitDetectionInstructions.push(beginPathInstruction,_),i.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),i.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(n)}drawPolygon(e,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),d=e.getStride();this.drawFlatCoordinatess_(a,0,o,d),this.endGeometry(n)}drawMultiPolygon(e,n){const i=this.state,s=i.fillStyle,r=i.strokeStyle;if(s===void 0&&r===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n),i.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),i.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,defaultLineDash,defaultLineDashOffset]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),d=e.getStride();let _=0;for(let C=0,y=o.length;C<y;++C)_=this.drawFlatCoordinatess_(a,_,o[C],d);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const n=this.coordinates;for(let i=0,s=n.length;i<s;++i)n[i]=snap(n[i],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(t,e,n,i,s){const r=[];let o=n,a=0,d=e.slice(n,2);for(;a<t&&o+s<i;){const[_,C]=d.slice(-2),y=e[o+s],v=e[o+s+1],E=Math.sqrt((y-_)*(y-_)+(v-C)*(v-C));if(a+=E,a>=t){const S=(t-a+E)/E,R=lerp(_,y,S),x=lerp(C,v,S);d.push(R,x),r.push(d),d=[R,x],a==t&&(o+=s),a=0}else if(a<t)d.push(e[o+s],e[o+s+1]),o+=s;else{const S=E-a,R=lerp(_,y,S/E),x=lerp(C,v,S/E);d.push(R,x),r.push(d),d=[R,x],a=0,o+=s}}return a>0&&r.push(d),r}function matchingChunk(t,e,n,i,s){let r=n,o=n,a=0,d=0,_=n,C,y,v,E,S,R,x,T,b,M;for(y=n;y<i;y+=s){const N=e[y],k=e[y+1];S!==void 0&&(b=N-S,M=k-R,E=Math.sqrt(b*b+M*M),x!==void 0&&(d+=v,C=Math.acos((x*b+T*M)/(v*E)),C>t&&(d>a&&(a=d,r=_,o=y),d=0,_=y-s)),v=E,x=b,T=M),S=N,R=k}return d+=E,d>a?[_,y]:[r,o]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,n,i,s){super(e,n,i,s),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n){const i=this.textFillState_,s=this.textStrokeState_,r=this.textState_;if(this.text_===""||!r||!i&&!s)return;const o=this.coordinates;let a=o.length;const d=e.getType();let _=null,C=e.getStride();if(r.placement==="line"&&(d=="LineString"||d=="MultiLineString"||d=="Polygon"||d=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let y;if(_=e.getFlatCoordinates(),d=="LineString")y=[_.length];else if(d=="MultiLineString")y=e.getEnds();else if(d=="Polygon")y=e.getEnds().slice(0,1);else if(d=="MultiPolygon"){const R=e.getEndss();y=[];for(let x=0,T=R.length;x<T;++x)y.push(R[x][0])}this.beginGeometry(e,n);const v=r.repeat,E=v?void 0:r.textAlign;let S=0;for(let R=0,x=y.length;R<x;++R){let T;v?T=lineChunk(v*this.resolution,_,S,y[R],C):T=[_.slice(S,y[R])];for(let b=0,M=T.length;b<M;++b){const N=T[b];let k=0,G=N.length;if(E==null){const q=matchingChunk(r.maxAngle,N,0,N.length,2);k=q[0],G=q[1]}for(let q=k;q<G;q+=C)o.push(N[q],N[q+1]);const Y=o.length;S=y[R],this.drawChars_(a,Y),a=Y}}this.endGeometry(n)}else{let y=r.overflow?null:[];switch(d){case"Point":case"MultiPoint":_=e.getFlatCoordinates();break;case"LineString":_=e.getFlatMidpoint();break;case"Circle":_=e.getCenter();break;case"MultiLineString":_=e.getFlatMidpoints(),C=2;break;case"Polygon":_=e.getFlatInteriorPoint(),r.overflow||y.push(_[2]/this.resolution),C=3;break;case"MultiPolygon":const T=e.getFlatInteriorPoints();_=[];for(let b=0,M=T.length;b<M;b+=3)r.overflow||y.push(T[b+2]/this.resolution),_.push(T[b],T[b+1]);if(_.length===0)return;C=2;break}const v=this.appendFlatPointCoordinates(_,C);if(v===a)return;if(y&&(v-a)/2!==_.length/C){let T=a/2;y=y.filter((b,M)=>{const N=o[(T+M)*2]===_[M*C]&&o[(T+M)*2+1]===_[M*C+1];return N||--T,N})}this.saveTextStates_(),(r.backgroundFill||r.backgroundStroke)&&(this.setFillStrokeStyle(r.backgroundFill,r.backgroundStroke),r.backgroundFill&&this.updateFillStyle(this.state,this.createFill),r.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n);let E=r.padding;if(E!=defaultPadding&&(r.scale[0]<0||r.scale[1]<0)){let T=r.padding[0],b=r.padding[1],M=r.padding[2],N=r.padding[3];r.scale[0]<0&&(b=-b,N=-N),r.scale[1]<0&&(T=-T,M=-M),E=[T,b,M,N]}const S=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,a,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,E==defaultPadding?defaultPadding:E.map(function(T){return T*S}),!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]);const R=1/S,x=this.state.fillStyle;r.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,a,v,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[R,R],NaN,void 0,this.declutterImageWithText_,E,!!r.backgroundFill,!!r.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,y]),r.backgroundFill&&(this.state.fillStyle=x,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){const e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,s=this.strokeKey_;e&&(s in this.strokeStates||(this.strokeStates[s]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:n.font,textAlign:n.textAlign||defaultTextAlign,justify:n.justify,textBaseline:n.textBaseline||defaultTextBaseline,scale:n.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(e,n){const i=this.textStrokeState_,s=this.textState_,r=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const d=this.pixelRatio,_=TEXT_ALIGN[s.textBaseline],C=this.textOffsetY_*d,y=this.text_,v=i?i.lineWidth*Math.abs(s.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,n,_,s.overflow,a,s.maxAngle,d,C,r,v*d,y,o,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,n,_,s.overflow,a&&defaultFillStyle,s.maxAngle,d,C,r,v*d,y,o,1/d])}setTextStyle(e,n){let i,s,r;if(!e)this.text_="";else{const o=e.getFill();o?(s=this.textFillState_,s||(s={},this.textFillState_=s),s.fillStyle=asColorLike(o.getColor()||defaultFillStyle)):(s=null,this.textFillState_=s);const a=e.getStroke();if(!a)r=null,this.textStrokeState_=r;else{r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const S=a.getLineDash(),R=a.getLineDashOffset(),x=a.getWidth(),T=a.getMiterLimit();r.lineCap=a.getLineCap()||defaultLineCap,r.lineDash=S?S.slice():defaultLineDash,r.lineDashOffset=R===void 0?defaultLineDashOffset:R,r.lineJoin=a.getLineJoin()||defaultLineJoin,r.lineWidth=x===void 0?defaultLineWidth:x,r.miterLimit=T===void 0?defaultMiterLimit:T,r.strokeStyle=asColorLike(a.getColor()||defaultStrokeStyle)}i=this.textState_;const d=e.getFont()||defaultFont;registerFont(d);const _=e.getScaleArray();i.overflow=e.getOverflow(),i.font=d,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||defaultTextBaseline,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||defaultPadding,i.scale=_===void 0?[1,1]:_;const C=e.getOffsetX(),y=e.getOffsetY(),v=e.getRotateWithView(),E=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=C===void 0?0:C,this.textOffsetY_=y===void 0?0:y,this.textRotateWithView_=v===void 0?!1:v,this.textRotation_=E===void 0?0:E,this.strokeKey_=r?(typeof r.strokeStyle=="string"?r.strokeStyle:getUid(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=s?typeof s.fillStyle=="string"?s.fillStyle:"|"+getUid(s.fillStyle):""}this.declutterImageWithText_=n}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,n,i,s){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=s,this.resolution_=i,this.buildersByZIndex_={}}finish(){const e={};for(const n in this.buildersByZIndex_){e[n]=e[n]||{};const i=this.buildersByZIndex_[n];for(const s in i){const r=i[s].finish();e[n][s]=r}}return e}getBuilder(e,n){const i=e!==void 0?e.toString():"0";let s=this.buildersByZIndex_[i];s===void 0&&(s={},this.buildersByZIndex_[i]=s);let r=s[n];if(r===void 0){const o=BATCH_CONSTRUCTORS[n];r=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),s[n]=r}return r}}function drawTextOnPath(t,e,n,i,s,r,o,a,d,_,C,y){let v=t[e],E=t[e+1],S=0,R=0,x=0,T=0;function b(){S=v,R=E,e+=i,v=t[e],E=t[e+1],T+=x,x=Math.sqrt((v-S)*(v-S)+(E-R)*(E-R))}do b();while(e<n-i&&T+x<r);let M=x===0?0:(r-T)/x;const N=lerp(S,v,M),k=lerp(R,E,M),G=e-i,Y=T,q=r+a*d(_,s,C);for(;e<n-i&&T+x<q;)b();M=x===0?0:(q-T)/x;const le=lerp(S,v,M),B=lerp(R,E,M);let D;if(y){const ie=[N,k,le,B];rotate(ie,0,4,2,y,ie,ie),D=ie[0]>ie[2]}else D=N>le;const X=Math.PI,ce=[],Me=G+i===e;e=G,x=0,T=Y,v=t[e],E=t[e+1];let re;if(Me){b(),re=Math.atan2(E-R,v-S),D&&(re+=re>0?-X:X);const ie=(le+N)/2,J=(B+k)/2;return ce[0]=[ie,J,(q-r)/2,re,s],ce}s=s.replace(/\n/g," ");for(let ie=0,J=s.length;ie<J;){b();let oe=Math.atan2(E-R,v-S);if(D&&(oe+=oe>0?-X:X),re!==void 0){let Ue=oe-re;if(Ue+=Ue>X?-2*X:Ue<-X?2*X:0,Math.abs(Ue)>o)return null}re=oe;const Be=ie;let je=0;for(;ie<J;++ie){const Ue=D?J-ie-1:ie,We=a*d(_,s[Ue],C);if(e+i<n&&T+x<r+je+We/2)break;je+=We}if(ie===Be)continue;const qe=D?s.substring(J-Be,J-ie):s.substring(Be,ie);M=x===0?0:(r+je/2-T)/x;const ee=lerp(S,v,M),et=lerp(R,E,M);ce.push([ee,et,je/2,oe,qe]),r+=je}return ce}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(t){return t[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(t,e){return e==="start"?e=rtlRegEx.test(t)?"right":"left":e==="end"&&(e=rtlRegEx.test(t)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}class Executor{constructor(e,n,i,s){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignFill_,this.instructions=s.instructions,this.coordinates=s.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=s.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=s.fillStates||{},this.strokeStates=s.strokeStates||{},this.textStates=s.textStates||{},this.widths_={},this.labels_={}}createLabel(e,n,i,s){const r=e+n+i+s;if(this.labels_[r])return this.labels_[r];const o=s?this.strokeStates[s]:null,a=i?this.fillStates[i]:null,d=this.textStates[n],_=this.pixelRatio,C=[d.scale[0]*_,d.scale[1]*_],y=Array.isArray(e),v=d.justify?TEXT_ALIGN[d.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,d.textAlign||defaultTextAlign),E=s&&o.lineWidth?o.lineWidth:0,S=y?e:e.split(`
`).reduce(createTextChunks,[]),{width:R,height:x,widths:T,heights:b,lineWidths:M}=getTextDimensions(d,S),N=R+E,k=[],G=(N+2)*C[0],Y=(x+E)*C[1],q={width:G<0?Math.floor(G):Math.ceil(G),height:Y<0?Math.floor(Y):Math.ceil(Y),contextInstructions:k};(C[0]!=1||C[1]!=1)&&k.push("scale",C),s&&(k.push("strokeStyle",o.strokeStyle),k.push("lineWidth",E),k.push("lineCap",o.lineCap),k.push("lineJoin",o.lineJoin),k.push("miterLimit",o.miterLimit),k.push("setLineDash",[o.lineDash]),k.push("lineDashOffset",o.lineDashOffset)),i&&k.push("fillStyle",a.fillStyle),k.push("textBaseline","middle"),k.push("textAlign","center");const le=.5-v;let B=v*N+le*E;const D=[],X=[];let ce=0,Me=0,re=0,ie=0,J;for(let oe=0,Be=S.length;oe<Be;oe+=2){const je=S[oe];if(je===`
`){Me+=ce,ce=0,B=v*N+le*E,++ie;continue}const qe=S[oe+1]||d.font;qe!==J&&(s&&D.push("font",qe),i&&X.push("font",qe),J=qe),ce=Math.max(ce,b[re]);const ee=[je,B+le*T[re]+v*(T[re]-M[ie]),.5*(E+ce)+Me];B+=T[re],s&&D.push("strokeText",ee),i&&X.push("fillText",ee),++re}return Array.prototype.push.apply(k,D),Array.prototype.push.apply(k,X),this.labels_[r]=q,q}replayTextBackground_(e,n,i,s,r,o,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,s),e.lineTo.apply(e,r),e.lineTo.apply(e,n),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,s,r,o,a,d,_,C,y,v,E,S,R,x){a*=v[0],d*=v[1];let T=i-a,b=s-d;const M=r+_>e?e-_:r,N=o+C>n?n-C:o,k=S[3]+M*v[0]+S[1],G=S[0]+N*v[1]+S[2],Y=T-S[3],q=b-S[0];(R||y!==0)&&(p1[0]=Y,p4[0]=Y,p1[1]=q,p2[1]=q,p2[0]=Y+k,p3[0]=p2[0],p3[1]=q+G,p4[1]=p3[1]);let le;return y!==0?(le=compose(create(),i,s,1,1,y,-i,-s),apply(le,p1),apply(le,p2),apply(le,p3),apply(le,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(Y,Y+k),Math.min(q,q+G),Math.max(Y,Y+k),Math.max(q,q+G),tmpExtent),E&&(T=Math.round(T),b=Math.round(b)),{drawImageX:T,drawImageY:b,drawImageW:M,drawImageH:N,originX:_,originY:C,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:x},canvasTransform:le,scale:v}}replayImageOrLabel_(e,n,i,s,r,o,a){const d=!!(o||a),_=s.declutterBox,C=e.canvas,y=a?a[2]*s.scale[0]/2:0;return _.minX-y<=C.width/n&&_.maxX+y>=0&&_.minY-y<=C.height/n&&_.maxY+y>=0&&(d&&this.replayTextBackground_(e,p1,p2,p3,p4,o,a),drawImageOrLabel(e,s.canvasTransform,r,i,s.originX,s.originY,s.drawImageW,s.drawImageH,s.drawImageX,s.drawImageY,s.scale)),!0}fill_(e){if(this.alignFill_){const n=apply(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;e.save(),e.translate(n[0]%i,n[1]%i),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,s){const r=this.textStates[n],o=this.createLabel(e,n,s,i),a=this.strokeStates[i],d=this.pixelRatio,_=horizontalTextAlign(Array.isArray(e)?e[0]:e,r.textAlign||defaultTextAlign),C=TEXT_ALIGN[r.textBaseline||defaultTextBaseline],y=a&&a.lineWidth?a.lineWidth:0,v=o.width/d-2*r.scale[0],E=_*v+2*(.5-_)*y,S=C*o.height/d+2*(.5-C)*y;return{label:o,anchorX:E,anchorY:S}}execute_(e,n,i,s,r,o,a,d){let _;this.pixelCoordinates_&&equals$2(i,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=transform2D(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),setFromArray(this.renderedTransform_,i));let C=0;const y=s.length;let v=0,E,S,R,x,T,b,M,N,k,G,Y,q,le=0,B=0,D=null,X=null;const ce=this.coordinateCache_,Me=this.viewRotation_,re=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,ie={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Me},J=this.instructions!=s||this.overlaps?0:200;let oe,Be,je,qe;for(;C<y;){const ee=s[C];switch(ee[0]){case Instruction.BEGIN_GEOMETRY:oe=ee[1],qe=ee[3],oe.getGeometry()?a!==void 0&&!intersects$1(a,qe.getExtent())?C=ee[2]+1:++C:C=ee[2];break;case Instruction.BEGIN_PATH:le>J&&(this.fill_(e),le=0),B>J&&(e.stroke(),B=0),!le&&!B&&(e.beginPath(),x=NaN,T=NaN),++C;break;case Instruction.CIRCLE:v=ee[1];const Ue=_[v],We=_[v+1],He=_[v+2],H=_[v+3],ye=He-Ue,fe=H-We,ke=Math.sqrt(ye*ye+fe*fe);e.moveTo(Ue+ke,We),e.arc(Ue,We,ke,0,2*Math.PI,!0),++C;break;case Instruction.CLOSE_PATH:e.closePath(),++C;break;case Instruction.CUSTOM:v=ee[1],E=ee[2];const Qe=ee[3],ct=ee[4],P=ee.length==6?ee[5]:void 0;ie.geometry=Qe,ie.feature=oe,C in ce||(ce[C]=[]);const L=ce[C];P?P(_,v,E,2,L):(L[0]=_[v],L[1]=_[v+1],L.length=2),ct(L,ie),++C;break;case Instruction.DRAW_IMAGE:v=ee[1],E=ee[2],N=ee[3],S=ee[4],R=ee[5];let U=ee[6];const $=ee[7],K=ee[8],de=ee[9],ve=ee[10];let ae=ee[11];const se=ee[12];let Q=ee[13];const F=ee[14],z=ee[15];if(!N&&ee.length>=20){k=ee[19],G=ee[20],Y=ee[21],q=ee[22];const vt=this.drawLabelWithPointPlacement_(k,G,Y,q);N=vt.label,ee[3]=N;const Ft=ee[23];S=(vt.anchorX-Ft)*this.pixelRatio,ee[4]=S;const Et=ee[24];R=(vt.anchorY-Et)*this.pixelRatio,ee[5]=R,U=N.height,ee[6]=U,Q=N.width,ee[13]=Q}let W;ee.length>25&&(W=ee[25]);let te,pe,Re;ee.length>17?(te=ee[16],pe=ee[17],Re=ee[18]):(te=defaultPadding,pe=!1,Re=!1),ve&&re?ae+=Me:!ve&&!re&&(ae-=Me);let De=0;for(;v<E;v+=2){if(W&&W[De++]<Q/this.pixelRatio)continue;const vt=this.calculateImageOrLabelDimensions_(N.width,N.height,_[v],_[v+1],Q,U,S,R,K,de,ae,se,r,te,pe||Re,oe),Ft=[e,n,N,vt,$,pe?D:null,Re?X:null];if(d){if(F==="none")continue;if(F==="obstacle"){d.insert(vt.declutterBox);continue}else{let Et,xt;if(z){const At=E-v;if(!z[At]){z[At]=Ft;continue}if(Et=z[At],delete z[At],xt=getDeclutterBox(Et),d.collides(xt))continue}if(d.collides(vt.declutterBox))continue;Et&&(d.insert(xt),this.replayImageOrLabel_.apply(this,Et)),d.insert(vt.declutterBox)}}this.replayImageOrLabel_.apply(this,Ft)}++C;break;case Instruction.DRAW_CHARS:const dt=ee[1],ht=ee[2],ft=ee[3],Pt=ee[4];q=ee[5];const Ot=ee[6],Bt=ee[7],gt=ee[8];Y=ee[9];const pt=ee[10];k=ee[11],G=ee[12];const Ut=[ee[13],ee[13]],Jt=this.textStates[G],jt=Jt.font,Wt=[Jt.scale[0]*Bt,Jt.scale[1]*Bt];let Vt;jt in this.widths_?Vt=this.widths_[jt]:(Vt={},this.widths_[jt]=Vt);const Qt=lineStringLength(_,dt,ht,2),en=Math.abs(Wt[0])*measureAndCacheTextWidth(jt,k,Vt);if(Pt||en<=Qt){const vt=this.textStates[G].textAlign,Ft=(Qt-en)*horizontalTextAlign(k,vt),Et=drawTextOnPath(_,dt,ht,2,k,Ft,Ot,Math.abs(Wt[0]),measureAndCacheTextWidth,jt,Vt,re?0:this.viewRotation_);e:if(Et){const xt=[];let At,qt,Yt,mt,Rt;if(Y)for(At=0,qt=Et.length;At<qt;++At){Rt=Et[At],Yt=Rt[4],mt=this.createLabel(Yt,G,"",Y),S=Rt[2]+(Wt[0]<0?-pt:pt),R=ft*mt.height+(.5-ft)*2*pt*Wt[1]/Wt[0]-gt;const bt=this.calculateImageOrLabelDimensions_(mt.width,mt.height,Rt[0],Rt[1],mt.width,mt.height,S,R,0,0,Rt[3],Ut,!1,defaultPadding,!1,oe);if(d&&d.collides(bt.declutterBox))break e;xt.push([e,n,mt,bt,1,null,null])}if(q)for(At=0,qt=Et.length;At<qt;++At){Rt=Et[At],Yt=Rt[4],mt=this.createLabel(Yt,G,q,""),S=Rt[2],R=ft*mt.height-gt;const bt=this.calculateImageOrLabelDimensions_(mt.width,mt.height,Rt[0],Rt[1],mt.width,mt.height,S,R,0,0,Rt[3],Ut,!1,defaultPadding,!1,oe);if(d&&d.collides(bt.declutterBox))break e;xt.push([e,n,mt,bt,1,null,null])}d&&d.load(xt.map(getDeclutterBox));for(let bt=0,on=xt.length;bt<on;++bt)this.replayImageOrLabel_.apply(this,xt[bt])}}++C;break;case Instruction.END_GEOMETRY:if(o!==void 0){oe=ee[1];const vt=o(oe,qe);if(vt)return vt}++C;break;case Instruction.FILL:J?le++:this.fill_(e),++C;break;case Instruction.MOVE_TO_LINE_TO:for(v=ee[1],E=ee[2],Be=_[v],je=_[v+1],b=Be+.5|0,M=je+.5|0,(b!==x||M!==T)&&(e.moveTo(Be,je),x=b,T=M),v+=2;v<E;v+=2)Be=_[v],je=_[v+1],b=Be+.5|0,M=je+.5|0,(v==E-2||b!==x||M!==T)&&(e.lineTo(Be,je),x=b,T=M);++C;break;case Instruction.SET_FILL_STYLE:D=ee,this.alignFill_=ee[2],le&&(this.fill_(e),le=0,B&&(e.stroke(),B=0)),e.fillStyle=ee[1],++C;break;case Instruction.SET_STROKE_STYLE:X=ee,B&&(e.stroke(),B=0),this.setStrokeStyle_(e,ee),++C;break;case Instruction.STROKE:J?B++:e.stroke(),++C;break;default:++C;break}}le&&this.fill_(e),B&&e.stroke()}execute(e,n,i,s,r,o){this.viewRotation_=s,this.execute_(e,n,i,this.instructions,r,void 0,void 0,o)}executeHitDetection(e,n,i,s,r){return this.viewRotation_=i,this.execute_(e,1,n,this.hitDetectionInstructions,!0,s,r)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,n,i,s,r,o){this.maxExtent_=e,this.overlaps_=s,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(r)}clip(e,n){const i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e){for(const n in e){let i=this.executorsByZIndex_[n];i===void 0&&(i={},this.executorsByZIndex_[n]=i);const s=e[n];for(const r in s){const o=s[r];i[r]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const n in this.executorsByZIndex_){const i=this.executorsByZIndex_[n];for(let s=0,r=e.length;s<r;++s)if(e[s]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,s,r,o){s=Math.round(s);const a=s*2+1,d=compose(this.hitDetectionTransform_,s+.5,s+.5,1/n,-1/n,-i,-e[0],-e[1]),_=!this.hitDetectionContext_;_&&(this.hitDetectionContext_=createCanvasContext2D(a,a,void 0,{willReadFrequently:!0}));const C=this.hitDetectionContext_;C.canvas.width!==a||C.canvas.height!==a?(C.canvas.width=a,C.canvas.height=a):_||C.clearRect(0,0,a,a);let y;this.renderBuffer_!==void 0&&(y=createEmpty(),extendCoordinate(y,e),buffer(y,n*(this.renderBuffer_+s),y));const v=getPixelIndexArray(s);let E;function S(k,G){const Y=C.getImageData(0,0,a,a).data;for(let q=0,le=v.length;q<le;q++)if(Y[v[q]]>0){if(!o||E!=="Image"&&E!=="Text"||o.includes(k)){const B=(v[q]-3)/4,D=s-B%a,X=s-(B/a|0),ce=r(k,G,D*D+X*X);if(ce)return ce}C.clearRect(0,0,a,a);break}}const R=Object.keys(this.executorsByZIndex_).map(Number);R.sort(ascending);let x,T,b,M,N;for(x=R.length-1;x>=0;--x){const k=R[x].toString();for(b=this.executorsByZIndex_[k],T=ORDER.length-1;T>=0;--T)if(E=ORDER[T],M=b[E],M!==void 0&&(N=M.executeHitDetection(C,d,i,S,y),N))return N}}getClipCoords(e){const n=this.maxExtent_;if(!n)return null;const i=n[0],s=n[1],r=n[2],o=n[3],a=[i,s,i,o,r,o,r,s];return transform2D(a,0,8,2,e,a),a}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,n,i,s,r,o,a){const d=Object.keys(this.executorsByZIndex_).map(Number);d.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,i)),o=o||ORDER;let _,C,y,v,E,S;for(a&&d.reverse(),_=0,C=d.length;_<C;++_){const R=d[_].toString();for(E=this.executorsByZIndex_[R],y=0,v=o.length;y<v;++y){const x=o[y];S=E[x],S!==void 0&&S.execute(e,n,i,s,r,a)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(t){if(circlePixelIndexArrayCache[t]!==void 0)return circlePixelIndexArrayCache[t];const e=t*2+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let o=0;o<=t;++o){const a=r*r+o*o;if(a>n)break;let d=i[a];d||(d=[],i[a]=d),d.push(((t+r)*e+(t+o))*4+3),r>0&&d.push(((t-r)*e+(t+o))*4+3),o>0&&(d.push(((t+r)*e+(t-o))*4+3),r>0&&d.push(((t-r)*e+(t-o))*4+3))}const s=[];for(let r=0,o=i.length;r<o;++r)i[r]&&s.push(...i[r]);return circlePixelIndexArrayCache[t]=s,s}class CanvasImmediateRenderer extends VectorContext{constructor(e,n,i,s,r,o,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=s,this.transformRotation_=s?toFixed(Math.atan2(s[1],s[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,n,i,s){if(!this.image_)return;const r=transform2D(e,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,d=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=d*this.imageOpacity_);let _=this.imageRotation_;this.transformRotation_===0&&(_-=this.viewRotation_),this.imageRotateWithView_&&(_+=this.viewRotation_);for(let C=0,y=r.length;C<y;C+=2){const v=r[C]-this.imageAnchorX_,E=r[C+1]-this.imageAnchorY_;if(_!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const S=v+this.imageAnchorX_,R=E+this.imageAnchorY_;compose(a,S,R,1,1,_,-S,-R),o.save(),o.transform.apply(o,a),o.translate(S,R),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,v,E,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=d)}drawText_(e,n,i,s){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=transform2D(e,n,i,s,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=s){const d=r[n]+this.textOffsetX_,_=r[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(d-this.textOffsetX_,_-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,d,_),this.textFillState_&&o.fillText(this.text_,d,_))}}moveToLineTo_(e,n,i,s,r){const o=this.context_,a=transform2D(e,n,i,s,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let d=a.length;r&&(d-=2);for(let _=2;_<d;_+=2)o.lineTo(a[_],a[_+1]);return r&&o.closePath(),i}drawRings_(e,n,i,s){for(let r=0,o=i.length;r<o;++r)n=this.moveToLineTo_(e,n,i[r],s,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=transformGeom2D(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],s=n[3]-n[1],r=Math.sqrt(i*i+s*s),o=this.context_;o.beginPath(),o.arc(n[0],n[1],r,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,n){const i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){const n=e.getGeometriesArray();for(let i=0,s=n.length;i<s;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const n=e.getExtent();if(intersects$1(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,s=e.getFlatCoordinates();let r=0;const o=e.getEnds(),a=e.getStride();i.beginPath();for(let d=0,_=o.length;d<_;++d)r=this.moveToLineTo_(s,r,o[d],a,!1);i.stroke()}if(this.text_!==""){const i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const n=this.context_,i=e.getOrientedFlatCoordinates();let s=0;const r=e.getEndss(),o=e.getStride();n.beginPath();for(let a=0,d=r.length;a<d;++a){const _=r[a];s=this.drawRings_(i,s,_,o)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){const n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){const n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),equals$2(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const n=this.context_,i=this.contextTextState_,s=e.textAlign?e.textAlign:defaultTextAlign;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=s&&(i.textAlign=s,n.textAlign=s),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=s,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:s,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{const i=e.getColor();this.fillState_={fillStyle:asColorLike(i||defaultFillStyle)}}if(!n)this.strokeState_=null;else{const i=n.getColor(),s=n.getLineCap(),r=n.getLineDash(),o=n.getLineDashOffset(),a=n.getLineJoin(),d=n.getWidth(),_=n.getMiterLimit(),C=r||defaultLineDash;this.strokeState_={lineCap:s!==void 0?s:defaultLineCap,lineDash:this.pixelRatio_===1?C:C.map(y=>y*this.pixelRatio_),lineDashOffset:(o||defaultLineDashOffset)*this.pixelRatio_,lineJoin:a!==void 0?a:defaultLineJoin,lineWidth:(d!==void 0?d:defaultLineWidth)*this.pixelRatio_,miterLimit:_!==void 0?_:defaultMiterLimit,strokeStyle:asColorLike(i||defaultStrokeStyle)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}const i=e.getPixelRatio(this.pixelRatio_),s=e.getAnchor(),r=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=s[0]*i,this.imageAnchorY_=s[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{const n=e.getFill();if(!n)this.textFillState_=null;else{const E=n.getColor();this.textFillState_={fillStyle:asColorLike(E||defaultFillStyle)}}const i=e.getStroke();if(!i)this.textStrokeState_=null;else{const E=i.getColor(),S=i.getLineCap(),R=i.getLineDash(),x=i.getLineDashOffset(),T=i.getLineJoin(),b=i.getWidth(),M=i.getMiterLimit();this.textStrokeState_={lineCap:S!==void 0?S:defaultLineCap,lineDash:R||defaultLineDash,lineDashOffset:x||defaultLineDashOffset,lineJoin:T!==void 0?T:defaultLineJoin,lineWidth:b!==void 0?b:defaultLineWidth,miterLimit:M!==void 0?M:defaultMiterLimit,strokeStyle:asColorLike(E||defaultStrokeStyle)}}const s=e.getFont(),r=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),d=e.getRotation(),_=e.getScaleArray(),C=e.getText(),y=e.getTextAlign(),v=e.getTextBaseline();this.textState_={font:s!==void 0?s:defaultFont,textAlign:y!==void 0?y:defaultTextAlign,textBaseline:v!==void 0?v:defaultTextBaseline},this.text_=C!==void 0?Array.isArray(C)?C.reduce((E,S,R)=>E+=R%2?" ":S,""):C:"",this.textOffsetX_=r!==void 0?this.pixelRatio_*r:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=d!==void 0?d:0,this.textScale_=[this.pixelRatio_*_[0],this.pixelRatio_*_[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(t,e,n,i,s,r,o){const a=t[0]*HIT_DETECT_RESOLUTION,d=t[1]*HIT_DETECT_RESOLUTION,_=createCanvasContext2D(a,d);_.imageSmoothingEnabled=!1;const C=_.canvas,y=new CanvasImmediateRenderer(_,HIT_DETECT_RESOLUTION,s,null,o),v=n.length,E=Math.floor((256*256*256-1)/v),S={};for(let x=1;x<=v;++x){const T=n[x-1],b=T.getStyleFunction()||i;if(!b)continue;let M=b(T,r);if(!M)continue;Array.isArray(M)||(M=[M]);const k=(x*E).toString(16).padStart(7,"#00000");for(let G=0,Y=M.length;G<Y;++G){const q=M[G],le=q.getGeometryFunction()(T);if(!le||!intersects$1(s,le.getExtent()))continue;const B=q.clone(),D=B.getFill();D&&D.setColor(k);const X=B.getStroke();X&&(X.setColor(k),X.setLineDash(null)),B.setText(void 0);const ce=q.getImage();if(ce){const J=ce.getImageSize();if(!J)continue;const oe=createCanvasContext2D(J[0],J[1],void 0,{alpha:!1}),Be=oe.canvas;oe.fillStyle=k,oe.fillRect(0,0,Be.width,Be.height),B.setImage(new Icon({img:Be,anchor:ce.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:ce.getOrigin(),opacity:1,size:ce.getSize(),scale:ce.getScale(),rotation:ce.getRotation(),rotateWithView:ce.getRotateWithView()}))}const Me=B.getZIndex()||0;let re=S[Me];re||(re={},S[Me]=re,re.Polygon=[],re.Circle=[],re.LineString=[],re.Point=[]);const ie=le.getType();if(ie==="GeometryCollection"){const J=le.getGeometriesArrayRecursive();for(let oe=0,Be=J.length;oe<Be;++oe){const je=J[oe];re[je.getType().replace("Multi","")].push(je,B)}}else re[ie.replace("Multi","")].push(le,B)}}const R=Object.keys(S).map(Number).sort(ascending);for(let x=0,T=R.length;x<T;++x){const b=S[R[x]];for(const M in b){const N=b[M];for(let k=0,G=N.length;k<G;k+=2){y.setStyle(N[k+1]);for(let Y=0,q=e.length;Y<q;++Y)y.setTransform(e[Y]),y.drawGeometry(N[k])}}}return _.getImageData(0,0,C.width,C.height)}function hitDetect(t,e,n){const i=[];if(n){const s=Math.floor(Math.round(t[0])*HIT_DETECT_RESOLUTION),r=Math.floor(Math.round(t[1])*HIT_DETECT_RESOLUTION),o=(clamp(s,0,n.width-1)+clamp(r,0,n.height-1)*n.width)*4,a=n.data[o],d=n.data[o+1],C=n.data[o+2]+256*(d+256*a),y=Math.floor((256*256*256-1)/e.length);C&&C%y===0&&i.push(e[C/y-1])}return i}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(t,e){return parseInt(getUid(t),10)-parseInt(getUid(e),10)}function getSquaredTolerance(t,e){const n=getTolerance(t,e);return n*n}function getTolerance(t,e){return SIMPLIFY_TOLERANCE*t/e}function renderCircleGeometry(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const d=t.getBuilder(n.getZIndex(),"Circle");d.setFillStrokeStyle(r,o),d.drawCircle(e,i)}const a=n.getText();if(a&&a.getText()){const d=(s||t).getBuilder(n.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}function renderFeature(t,e,n,i,s,r,o){let a=!1;const d=n.getImage();if(d){const _=d.getImageState();_==ImageState.LOADED||_==ImageState.ERROR?d.unlistenImageChange(s):(_==ImageState.IDLE&&d.load(),d.listenImageChange(s),a=!0)}return renderFeatureInternal(t,e,n,i,r,o),a}function renderFeatureInternal(t,e,n,i,s,r){const o=n.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(i,s);if(n.getRenderer())renderGeometry(t,a,n,e);else{const _=GEOMETRY_RENDERERS[a.getType()];_(t,a,n,e,r)}}function renderGeometry(t,e,n,i){if(e.getType()=="GeometryCollection"){const r=e.getGeometries();for(let o=0,a=r.length;o<a;++o)renderGeometry(t,r[o],n,i);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(t,e,n,i,s){const r=e.getGeometriesArray();let o,a;for(o=0,a=r.length;o<a;++o){const d=GEOMETRY_RENDERERS[r[o].getType()];d(t,r[o],n,i,s)}}function renderLineStringGeometry(t,e,n,i,s){const r=n.getStroke();if(r){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawLineString(e,i)}const o=n.getText();if(o&&o.getText()){const a=(s||t).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiLineStringGeometry(t,e,n,i,s){const r=n.getStroke();if(r){const a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,r),a.drawMultiLineString(e,i)}const o=n.getText();if(o&&o.getText()){const a=(s||t).getBuilder(n.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,i)}}function renderMultiPolygonGeometry(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(o||r){const d=t.getBuilder(n.getZIndex(),"Polygon");d.setFillStrokeStyle(r,o),d.drawMultiPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const d=(s||t).getBuilder(n.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}function renderPointGeometry(t,e,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=ImageState.LOADED)return;let d=t;if(s){const C=r.getDeclutterMode();if(C!=="none")if(d=s,C==="obstacle"){const y=t.getBuilder(n.getZIndex(),"Image");y.setImageStyle(r,a),y.drawPoint(e,i)}else o&&o.getText()&&(a={})}const _=d.getBuilder(n.getZIndex(),"Image");_.setImageStyle(r,a),_.drawPoint(e,i)}if(o&&o.getText()){let d=t;s&&(d=s);const _=d.getBuilder(n.getZIndex(),"Text");_.setTextStyle(o,a),_.drawText(e,i)}}function renderMultiPointGeometry(t,e,n,i,s){const r=n.getImage(),o=n.getText();let a;if(r){if(r.getImageState()!=ImageState.LOADED)return;let d=t;if(s){const C=r.getDeclutterMode();if(C!=="none")if(d=s,C==="obstacle"){const y=t.getBuilder(n.getZIndex(),"Image");y.setImageStyle(r,a),y.drawMultiPoint(e,i)}else o&&o.getText()&&(a={})}const _=d.getBuilder(n.getZIndex(),"Image");_.setImageStyle(r,a),_.drawMultiPoint(e,i)}if(o&&o.getText()){let d=t;s&&(d=s);const _=d.getBuilder(n.getZIndex(),"Text");_.setTextStyle(o,a),_.drawText(e,i)}}function renderPolygonGeometry(t,e,n,i,s){const r=n.getFill(),o=n.getStroke();if(r||o){const d=t.getBuilder(n.getZIndex(),"Polygon");d.setFillStrokeStyle(r,o),d.drawPolygon(e,i)}const a=n.getText();if(a&&a.getText()){const d=(s||t).getBuilder(n.getZIndex(),"Text");d.setTextStyle(a),d.drawText(e,i)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,n,i){const s=n.extent,r=n.viewState,o=r.center,a=r.resolution,d=r.projection,_=r.rotation,C=d.getExtent(),y=this.getLayer().getSource(),v=n.pixelRatio,E=n.viewHints,S=!(E[ViewHint.ANIMATING]||E[ViewHint.INTERACTING]),R=this.compositionContext_,x=Math.round(n.size[0]*v),T=Math.round(n.size[1]*v),b=y.getWrapX()&&d.canWrapX(),M=b?getWidth(C):null,N=b?Math.ceil((s[2]-C[2])/M)+1:1;let k=b?Math.floor((s[0]-C[0])/M):0;do{const G=this.getRenderTransform(o,a,_,v,x,T,k*M);e.execute(R,1,G,_,S,void 0,i)}while(++k<N)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,n){const i=e.pixelRatio,s=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/i,1/i),makeInverse(this.inversePixelTransform,this.pixelTransform);const r=toString$1(this.pixelTransform);this.useContainer(n,r,this.getBackground(e));const o=this.context,a=o.canvas,d=this.replayGroup_,_=this.declutterExecutorGroup;let C=d&&!d.isEmpty()||_&&!_.isEmpty();if(!C&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;const y=Math.round(e.size[0]*i),v=Math.round(e.size[1]*i);a.width!=y||a.height!=v?(a.width=y,a.height=v,a.style.transform!==r&&(a.style.transform=r)):this.containerReused||o.clearRect(0,0,y,v),this.preRender(o,e);const E=e.viewState;E.projection,this.opacity_=s.opacity,this.setupCompositionContext_();let S=!1;if(C&&s.extent&&this.clipping){const R=fromUserExtent(s.extent);C=intersects$1(R,e.extent),S=C&&!containsExtent(R,e.extent),S&&this.clipUnrotated(this.compositionContext_,e,R)}return C&&this.renderWorlds(d,e),S&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==E.rotation&&(this.renderedRotation_=E.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(n=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=[this.context.canvas.width,this.context.canvas.height];apply(this.pixelTransform,i);const s=this.renderedCenter_,r=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,d=this.wrappedRenderedExtent_,_=this.getLayer(),C=[],y=i[0]*HIT_DETECT_RESOLUTION,v=i[1]*HIT_DETECT_RESOLUTION;C.push(this.getRenderTransform(s,r,o,HIT_DETECT_RESOLUTION,y,v,0).slice());const E=_.getSource(),S=a.getExtent();if(E.getWrapX()&&a.canWrapX()&&!containsExtent(S,d)){let R=d[0];const x=getWidth(S);let T=0,b;for(;R<S[0];)--T,b=x*T,C.push(this.getRenderTransform(s,r,o,HIT_DETECT_RESOLUTION,y,v,b).slice()),R+=x;for(T=0,R=d[2];R>S[2];)++T,b=x*T,C.push(this.getRenderTransform(s,r,o,HIT_DETECT_RESOLUTION,y,v,b).slice()),R-=x}this.hitDetectionImageData_=createHitDetectionImageData(i,C,this.renderedFeatures_,_.getStyleFunction(),d,r,o)}n(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,s,r){if(!this.replayGroup_)return;const o=n.viewState.resolution,a=n.viewState.rotation,d=this.getLayer(),_={},C=function(E,S,R){const x=getUid(E),T=_[x];if(T){if(T!==!0&&R<T.distanceSq){if(R===0)return _[x]=!0,r.splice(r.lastIndexOf(T),1),s(E,d,S);T.geometry=S,T.distanceSq=R}}else{if(R===0)return _[x]=!0,s(E,d,S);r.push(_[x]={feature:E,layer:d,geometry:S,distanceSq:R,callback:s})}};let y;const v=[this.replayGroup_];return this.declutterExecutorGroup&&v.push(this.declutterExecutorGroup),v.some(E=>y=E.forEachFeatureAtCoordinate(e,o,a,i,C,E===this.declutterExecutorGroup&&n.declutterTree?n.declutterTree.all().map(S=>S.value):null)),y}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const n=this.getLayer(),i=n.getSource();if(!i)return!1;const s=e.viewHints[ViewHint.ANIMATING],r=e.viewHints[ViewHint.INTERACTING],o=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!o&&s||!a&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const d=e.extent,_=e.viewState,C=_.projection,y=_.resolution,v=e.pixelRatio,E=n.getRevision(),S=n.getRenderBuffer();let R=n.getRenderOrder();R===void 0&&(R=defaultOrder);const x=_.center.slice(),T=buffer(d,S*y),b=T.slice(),M=[T.slice()],N=C.getExtent();if(i.getWrapX()&&C.canWrapX()&&!containsExtent(N,e.extent)){const re=getWidth(N),ie=Math.max(getWidth(T)/2,re);T[0]=N[0]-ie,T[2]=N[2]+ie,wrapX$1(x,C);const J=wrapX$2(M[0],C);J[0]<N[0]&&J[2]<N[2]?M.push([J[0]+re,J[1],J[2]+re,J[3]]):J[0]>N[0]&&J[2]>N[2]&&M.push([J[0]-re,J[1],J[2]-re,J[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==E&&this.renderedRenderOrder_==R&&containsExtent(this.wrappedRenderedExtent_,T))return equals$2(this.renderedExtent_,b)||(this.hitDetectionImageData_=null,this.renderedExtent_=b),this.renderedCenter_=x,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const k=new BuilderGroup(getTolerance(y,v),T,y,v);let G;this.getLayer().getDeclutter()&&(G=new BuilderGroup(getTolerance(y,v),T,y,v));let Y;for(let re=0,ie=M.length;re<ie;++re)i.loadFeatures(M[re],y,C);const q=getSquaredTolerance(y,v);let le=!0;const B=re=>{let ie;const J=re.getStyleFunction()||n.getStyleFunction();if(J&&(ie=J(re,y)),ie){const oe=this.renderFeature(re,q,ie,k,Y,G);le=le&&!oe}},D=toUserExtent(T),X=i.getFeaturesInExtent(D);R&&X.sort(R);for(let re=0,ie=X.length;re<ie;++re)B(X[re]);this.renderedFeatures_=X,this.ready=le;const ce=k.finish(),Me=new ExecutorGroup(T,y,v,i.getOverlaps(),ce,n.getRenderBuffer());return G&&(this.declutterExecutorGroup=new ExecutorGroup(T,y,v,i.getOverlaps(),G.finish(),n.getRenderBuffer())),this.renderedResolution_=y,this.renderedRevision_=E,this.renderedRenderOrder_=R,this.renderedExtent_=b,this.wrappedRenderedExtent_=T,this.renderedCenter_=x,this.renderedProjection_=C,this.replayGroup_=Me,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,s,r,o){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let d=0,_=i.length;d<_;++d)a=renderFeature(s,e,i[d],n,this.boundHandleStyleImageChange_,r,o)||a;else a=renderFeature(s,e,i,n,this.boundHandleStyleImageChange_,r,o);return a}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,n){const i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[getUid(n)]=i}load(e,n){const i=new Array(n.length);for(let s=0,r=n.length;s<r;s++){const o=e[s],a=n[s],d={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[s]=d,this.items_[getUid(a)]=d}this.rbush_.load(i)}remove(e){const n=getUid(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){const i=this.items_[getUid(n)],s=[i.minX,i.minY,i.maxX,i.maxY];equals$1(s,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(s){return s.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let s=0,r=e.length;s<r;s++)if(i=n(e[s]),i)return i;return i}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const n=this.rbush_.toJSON();return createOrUpdate$2(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const n in e.items_)this.items_[n]=e.items_[n]}}const tmpTransform=create();class RenderFeature{constructor(e,n,i,s,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=r,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),n=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let n=0;const i=this.ends_;for(let s=0,r=i.length;s<r;++s){const o=i[s],a=interpolatePoint(e,n,o,2,.5);extend$3(this.flatMidpoints_,a),n=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$2(e);const n=e.getExtent(),i=e.getWorldExtent();if(n&&i){const s=getHeight(i)/getHeight(n);compose(tmpTransform,i[0],i[3],s,-s,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);const i=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":i.length=douglasPeucker(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),s=[i.length];break;case"MultiLineString":s=[],i.length=douglasPeuckerArray(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,s);break;case"Polygon":s=[],i.length=quantizeArray(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,s);break}return s&&(this.simplifiedGeometry_=new RenderFeature(this.type_,i,s,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all(t,e){return[[-1/0,-1/0,1/0,1/0]]}let withCredentials=!1;function loadFeaturesXhr(t,e,n,i,s,r,o){const a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,s):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=withCredentials,a.onload=function(d){if(!a.status||a.status>=200&&a.status<300){const _=e.getType();let C;_=="json"?C=JSON.parse(a.responseText):_=="text"?C=a.responseText:_=="xml"?(C=a.responseXML,C||(C=new DOMParser().parseFromString(a.responseText,"application/xml"))):_=="arraybuffer"&&(C=a.response),C?r(e.readFeatures(C,{extent:n,featureProjection:s}),e.readProjection(C)):o()}else o()},a.onerror=o,a.send()}function xhr(t,e){return function(n,i,s,r,o){const a=this;loadFeaturesXhr(t,e,n,i,s,function(d,_){a.addFeatures(d),r!==void 0&&r(d)},o||VOID)}}class VectorSourceEvent extends BaseEvent{constructor(e,n,i){super(e),this.feature=n,this.features=i}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all;const n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,s;Array.isArray(e.features)?s=e.features:e.features&&(i=e.features,s=i.getArray()),!n&&i===void 0&&(i=new Collection(s)),s!==void 0&&this.addFeaturesInternal(s),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const n=getUid(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);const i=e.getGeometry();if(i){const s=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(s,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(n,EventType.CHANGE,this.handleFeatureChange_,this),listen(n,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){const s=String(n.getId());if(!(s in this.idIndex_))this.idIndex_[s]=n;else if(n instanceof RenderFeature){const r=this.idIndex_[s];r instanceof RenderFeature?Array.isArray(r)?r.push(n):this.idIndex_[s]=[r,n]:i=!1}else i=!1}return i&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const n=[],i=[],s=[];for(let r=0,o=e.length;r<o;r++){const a=e[r],d=getUid(a);this.addToIndex_(d,a)&&i.push(a)}for(let r=0,o=i.length;r<o;r++){const a=i[r],d=getUid(a);this.setupChangeEvents_(d,a);const _=a.getGeometry();if(_){const C=_.getExtent();n.push(C),s.push(a)}else this.nullGeometryFeatures_[d]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,s),this.hasListener(VectorEventType.ADDFEATURE))for(let r=0,o=i.length;r<o;r++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,i[r]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(CollectionEventType.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(CollectionEventType.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const i=s=>{this.removeFeatureInternal(s)};this.featuresRtree_.forEach(i);for(const s in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[s])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const n=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){const i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(s){const r=s.getGeometry();if(r instanceof RenderFeature||r.intersectsCoordinate(e))return n(s)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){const s=i.getGeometry();if(s instanceof RenderFeature||s.intersectsExtent(e)){const r=n(i);if(r)return r}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$3(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const s=wrapAndSliceX(e,n);return[].concat(...s.map(r=>this.featuresRtree_.getInExtent(r)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){const i=e[0],s=e[1];let r=null;const o=[NaN,NaN];let a=1/0;const d=[-1/0,-1/0,1/0,1/0];return n=n||TRUE,this.featuresRtree_.forEachInExtent(d,function(_){if(n(_)){const C=_.getGeometry(),y=a;if(a=C instanceof RenderFeature?0:C.closestPointXY(i,s,o,a),a<y){r=_;const v=Math.sqrt(a);d[0]=i-v,d[1]=s-v,d[2]=i+v,d[3]=s+v}}}),r}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){const n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const n=e.target,i=getUid(n),s=n.getGeometry();if(!s)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{const o=s.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,n)):this.featuresRtree_&&this.featuresRtree_.update(o,n)}const r=n.getId();if(r!==void 0){const o=r.toString();this.idIndex_[o]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[o]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,n))}hasFeature(e){const n=e.getId();return n!==void 0?n in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){const s=this.loadedExtentsRtree_,r=this.strategy_(e,n,i);for(let o=0,a=r.length;o<a;++o){const d=r[o];s.forEachInExtent(d,function(C){return containsExtent(C.extent,d)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,d,n,i,C=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,C))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),s.insert(d,{extent:d.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const n=this.loadedExtentsRtree_;let i;n.forEachInExtent(e,function(s){if(equals$1(s.extent,e))return i=s,!0}),i&&n.remove(i)}removeFeature(e){if(!e)return;const n=getUid(e);n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const n=getUid(e),i=this.featureChangeKeys_[n];if(!i)return;i.forEach(unlistenByKey),delete this.featureChangeKeys_[n];const s=e.getId();return s!==void 0&&delete this.idIndex_[s.toString()],delete this.uidIndex_[n],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(const i in this.idIndex_){const s=this.idIndex_[i];if(e instanceof RenderFeature&&Array.isArray(s)&&s.includes(e))s.splice(s.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,n){super(e),this.feature=n}}function getTraceTargets(t,e){const n=[];for(let i=0;i<e.length;++i){const r=e[i].getGeometry();appendGeometryTraceTargets(t,r,n)}return n}function getSquaredDistance(t,e){return squaredDistance$1(t[0],t[1],e[0],e[1])}function getCoordinate(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function getCumulativeSquaredDistance(t,e,n){let i,s;e<n?(i=e,s=n):(i=n,s=e);const r=Math.ceil(i),o=Math.floor(s);if(r>o){const d=interpolateCoordinate(t,i),_=interpolateCoordinate(t,s);return getSquaredDistance(d,_)}let a=0;if(i<r){const d=interpolateCoordinate(t,i),_=getCoordinate(t,r);a+=getSquaredDistance(d,_)}if(o<s){const d=getCoordinate(t,o),_=interpolateCoordinate(t,s);a+=getSquaredDistance(d,_)}for(let d=r;d<o-1;++d){const _=getCoordinate(t,d),C=getCoordinate(t,d+1);a+=getSquaredDistance(_,C)}return a}function appendGeometryTraceTargets(t,e,n){if(e instanceof LineString){appendTraceTarget(t,e.getCoordinates(),!1,n);return}if(e instanceof MultiLineString){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s)appendTraceTarget(t,i[s],!1,n);return}if(e instanceof Polygon){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s)appendTraceTarget(t,i[s],!0,n);return}if(e instanceof MultiPolygon){const i=e.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0,d=o.length;a<d;++a)appendTraceTarget(t,o[a],!0,n)}return}if(e instanceof GeometryCollection){const i=e.getGeometries();for(let s=0;s<i.length;++s)appendGeometryTraceTargets(t,i[s],n);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(t,e,n,i){const s=t[0],r=t[1];let o=1/0,a=-1,d=NaN;for(let y=0;y<e.targets.length;++y){const v=e.targets[y],E=v.coordinates;let S=1/0,R;for(let x=0;x<E.length-1;++x){const T=E[x],b=E[x+1],M=getPointSegmentRelationship(s,r,T,b);M.squaredDistance<S&&(S=M.squaredDistance,R=x+M.along)}S<o&&(o=S,v.ring&&e.targetIndex===y&&(v.endIndex>v.startIndex?R<v.startIndex&&(R+=E.length):v.endIndex<v.startIndex&&R>v.startIndex&&(R-=E.length)),d=R,a=y)}const _=e.targets[a];let C=_.ring;if(e.targetIndex===a&&C){const y=interpolateCoordinate(_.coordinates,d),v=n.getPixelFromCoordinate(y);distance(v,e.startPx)>i&&(C=!1)}if(C){const y=_.coordinates,v=y.length,E=_.startIndex,S=d;if(E<S){const R=getCumulativeSquaredDistance(y,E,S);getCumulativeSquaredDistance(y,E,S-v)<R&&(d-=v)}else{const R=getCumulativeSquaredDistance(y,E,S);getCumulativeSquaredDistance(y,E,S+v)<R&&(d+=v)}}return sharedUpdateInfo.index=a,sharedUpdateInfo.endIndex=d,sharedUpdateInfo}function appendTraceTarget(t,e,n,i){const s=t[0],r=t[1];for(let o=0,a=e.length-1;o<a;++o){const d=e[o],_=e[o+1],C=getPointSegmentRelationship(s,r,d,_);if(C.squaredDistance===0){const y=o+C.along;i.push({coordinates:e,ring:n,startIndex:y,endIndex:y});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(t,e,n,i){const s=n[0],r=n[1],o=i[0],a=i[1],d=o-s,_=a-r;let C=0,y=s,v=r;return(d!==0||_!==0)&&(C=clamp(((t-s)*d+(e-r)*_)/(d*d+_*_),0,1),y+=d*C,v+=_*C),sharedRel.along=C,sharedRel.squaredDistance=toFixed(squaredDistance$1(t,e,y,v),10),sharedRel}function interpolateCoordinate(t,e){const n=t.length;let i=Math.floor(e);const s=e-i;i>=n?i-=n:i<0&&(i+=n);let r=i+1;r>=n&&(r-=n);const o=t[i],a=o[0],d=o[1],_=t[r],C=_[0]-a,y=_[1]-d;return[a+C*s,d+y*s]}class Draw extends PointerInteraction{constructor(e){const n=e;n.stopDown||(n.stopDown=FALSE),super(n),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let i=e.geometryFunction;if(!i){const s=this.mode_;if(s==="Circle")i=function(r,o,a){const d=o||new Circle([NaN,NaN]),_=fromUserCoordinate(r[0]),C=squaredDistance(_,fromUserCoordinate(r[r.length-1]));return d.setCenterAndRadius(_,Math.sqrt(C),this.geometryLayout_),d};else{let r;s==="Point"?r=Point$1:s==="LineString"?r=LineString:s==="Polygon"&&(r=Polygon),i=function(o,a,d){return a?s==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new r(o,this.geometryLayout_),a}}}this.geometryFunction_=i,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let n;e?e===!0?n=always$1:n=e:n=never,this.traceCondition_=n}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let n=e.type===MapBrowserEventType.POINTERMOVE,i=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,n=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),i=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?i=!1:n&&this.getPointerCount()<2?(i=e.type===MapBrowserEventType.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(i=!1),super.handleEvent(e)&&i}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const n=this.getMap(),i=n.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),s=n.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),r=boundingExtent([i,s]),o=this.traceSource_.getFeaturesInExtent(r);if(o.length===0)return;const a=getTraceTargets(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,n){const i=e.startIndex<=e.endIndex,s=e.startIndex<=n;i===s?i&&n>e.endIndex||!i&&n<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,n):(i&&n<e.endIndex||!i&&n>e.endIndex)&&this.removeTracedCoordinates_(n,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,n))}removeTracedCoordinates_(e,n){if(e===n)return;let i=0;if(e<n){const s=Math.ceil(e);let r=Math.floor(n);r===n&&(r-=1),i=r-s+1}else{const s=Math.floor(e);let r=Math.ceil(n);r===n&&(r+=1),i=s-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(e,n,i){if(n===i)return;const s=[];if(n<i){const r=Math.ceil(n);let o=Math.floor(i);o===i&&(o-=1);for(let a=r;a<=o;++a)s.push(getCoordinate(e.coordinates,a))}else{const r=Math.floor(n);let o=Math.ceil(i);o===i&&(o+=1);for(let a=r;a>=o;--a)s.push(getCoordinate(e.coordinates,a))}s.length&&this.appendCoordinates(s)}updateTrace_(e){const n=this.traceState_;if(!n.active||n.targetIndex===-1&&distance(n.startPx,e.pixel)<this.snapTolerance_)return;const i=getTraceTargetUpdate(e.coordinate,n,this.getMap(),this.snapTolerance_);if(n.targetIndex!==i.index){if(n.targetIndex!==-1){const d=n.targets[n.targetIndex];this.removeTracedCoordinates_(d.startIndex,d.endIndex)}const a=n.targets[i.index];this.addTracedCoordinates_(a,a.startIndex,i.endIndex)}else{const a=n.targets[n.targetIndex];this.addOrRemoveTracedCoordinates_(a,i.endIndex)}n.targetIndex=i.index;const s=n.targets[n.targetIndex];s.endIndex=i.endIndex;const r=interpolateCoordinate(s.coordinates,s.endIndex),o=this.getMap().getPixelFromCoordinate(r);e.coordinate=r,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let n=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const i=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const s=!this.finishCoordinate_;s&&this.startDrawing_(e.coordinate),!s&&this.freehand_?this.finishDrawing():!this.freehand_&&(!s||this.mode_==="Point")&&(this.atFinish_(e.pixel,i)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),n=!1}else this.freehand_&&this.abortDrawing()}return!n&&this.stopClick_&&e.preventDefault(),n}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const n=this.downPx_,i=e.pixel,s=n[0]-i[0],r=n[1]-i[1],o=s*s+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,n){let i=!1;if(this.sketchFeature_){let s=!1,r=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")i=!0;else if(o==="Circle")i=this.sketchCoords_.length===2;else if(o==="LineString")s=!n&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;s=a[0].length>this.minPoints_,r=[a[0][0],a[0][a[0].length-2]],n?r=[a[0][0]]:r=[a[0][0],a[0][a[0].length-2]]}if(s){const a=this.getMap();for(let d=0,_=r.length;d<_;d++){const C=r[d],y=a.getPixelFromCoordinate(C),v=e[0]-y[0],E=e[1]-y[1],S=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(v*v+E*E)<=S,i){this.finishCoordinate_=C;break}}}}return i}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const n=e.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(n.getLayout(),n.getFlatCoordinates()),i.changed()):(i=new LineString(n.getFlatCoordinates(),n.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(e){const n=this.getMap().getView().getProjection(),i=getStrideForLayout(this.geometryLayout_);for(;e.length<i;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const s=this.geometryFunction_(this.sketchCoords_,void 0,n);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(s),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const n=this.getMap(),i=this.sketchFeature_.getGeometry(),s=n.getView().getProjection(),r=getStrideForLayout(this.geometryLayout_);let o,a;for(;e.length<r;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(n.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,i,s),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),i.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(i):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let s,r;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),this.geometryFunction_(r,n,i)):o==="Polygon"&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():s=!0),r.push(e.slice()),s&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,n,i)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),s&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const n=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),s=this.mode_;for(let r=0;r<e;++r){let o;if(s==="LineString"||s==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,n,i),n.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(n)}else if(s==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const d=o[o.length-2].slice();o[o.length-1]=d,this.createOrUpdateSketchPoint_(d)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,n,i)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let n=this.sketchCoords_;const i=e.getGeometry(),s=this.getMap().getView().getProjection();this.mode_==="LineString"?(n.pop(),this.geometryFunction_(n,i,s)):this.mode_==="Polygon"&&(n[0].pop(),this.geometryFunction_(n,i,s),n=i.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([n])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([n])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([n])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const n=this.mode_,i=!this.sketchFeature_;i&&this.startDrawing_(e[0]);let s;if(n==="LineString"||n==="Circle")s=this.sketchCoords_;else if(n==="Polygon")s=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;i&&s.shift(),s.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const r=e[e.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(e){const i=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=i.getCoordinates();const s=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=s.slice(),this.sketchCoords_.push(s.slice()),this.sketchPoint_=new Feature(new Point$1(s)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const n=this.overlay_.getSource();n.clear(!0),n.addFeatures(e)}updateState_(){const e=this.getMap(),n=this.getActive();(!e||!n)&&this.abortDrawing(),this.overlay_.setMap(n?e:null)}}function getDefaultStyleFunction$2(){const t=createEditingStyle();return function(e,n){return t[e.getGeometry().getType()]}}function getMode(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,n,i){super(e),this.features=n,this.mapBrowserEvent=i}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(i){return altKeyOnly(i)&&singleClick(i)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let n;if(e.features?n=e.features:e.source&&(this.source_=e.source,n=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!n)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=n,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const n=e.getGeometry();if(n){const s=this.SEGMENT_WRITERS_[n.getType()];s&&s(e,n)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,n){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const i=this.featuresBeingModified_.getArray();for(let s=0,r=n.length;s<r;++s){const o=n[s];for(let a=0,d=o.length;a<d;++a){const _=o[a].feature;_&&!i.includes(_)&&this.featuresBeingModified_.push(_)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const n=this.rBush_,i=[];n.forEach(function(s){e===s.feature&&i.push(s)});for(let s=i.length-1;s>=0;--s){const r=i[s];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);n.remove(r)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const n=e.target;this.removeFeature_(n),this.addFeature_(n)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,n){const i=n.getCoordinates(),s={feature:e,geometry:n,segment:[i,i]};this.rBush_.insert(n.getExtent(),s)}writeMultiPointGeometry_(e,n){const i=n.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s],a={feature:e,geometry:n,depth:[s],index:s,segment:[o,o]};this.rBush_.insert(n.getExtent(),a)}}writeLineStringGeometry_(e,n){const i=n.getCoordinates();for(let s=0,r=i.length-1;s<r;++s){const o=i.slice(s,s+2),a={feature:e,geometry:n,index:s,segment:o};this.rBush_.insert(boundingExtent(o),a)}}writeMultiLineStringGeometry_(e,n){const i=n.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0,d=o.length-1;a<d;++a){const _=o.slice(a,a+2),C={feature:e,geometry:n,depth:[s],index:a,segment:_};this.rBush_.insert(boundingExtent(_),C)}}}writePolygonGeometry_(e,n){const i=n.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0,d=o.length-1;a<d;++a){const _=o.slice(a,a+2),C={feature:e,geometry:n,depth:[s],index:a,segment:_};this.rBush_.insert(boundingExtent(_),C)}}}writeMultiPolygonGeometry_(e,n){const i=n.getCoordinates();for(let s=0,r=i.length;s<r;++s){const o=i[s];for(let a=0,d=o.length;a<d;++a){const _=o[a];for(let C=0,y=_.length-1;C<y;++C){const v=_.slice(C,C+2),E={feature:e,geometry:n,depth:[a,s],index:C,segment:v};this.rBush_.insert(boundingExtent(v),E)}}}}writeCircleGeometry_(e,n){const i=n.getCenter(),s={feature:e,geometry:n,index:CIRCLE_CENTER_INDEX,segment:[i,i]},r={feature:e,geometry:n,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[i,i]},o=[s,r];s.featureSegments=o,r.featureSegments=o,this.rBush_.insert(createOrUpdateFromCoordinate(i),s);let a=n;this.rBush_.insert(a.getExtent(),r)}writeGeometryCollectionGeometry_(e,n){const i=n.getGeometriesArray();for(let s=0;s<i.length;++s){const r=i[s],o=this.SEGMENT_WRITERS_[r.getType()];o(e,r)}}createOrUpdateVertexFeature_(e,n,i){let s=this.vertexFeature_;return s?s.getGeometry().setCoordinates(e):(s=new Feature(new Point$1(e)),this.vertexFeature_=s,this.overlay_.getSource().addFeature(s)),s.set("features",n),s.set("geometries",i),s}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let n;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?n=this.removePoint():n=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!n}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const n=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],i=[],s=[];for(let r=0,o=this.dragSegments_.length;r<o;++r){const a=this.dragSegments_[r],d=a[0],_=d.feature;i.includes(_)||i.push(_);const C=d.geometry;s.includes(C)||s.push(C);const y=d.depth;let v;const E=d.segment,S=a[1];for(;n.length<C.getStride();)n.push(E[S][n.length]);switch(C.getType()){case"Point":v=n,E[0]=n,E[1]=n;break;case"MultiPoint":v=C.getCoordinates(),v[d.index]=n,E[0]=n,E[1]=n;break;case"LineString":v=C.getCoordinates(),v[d.index+S]=n,E[S]=n;break;case"MultiLineString":v=C.getCoordinates(),v[y[0]][d.index+S]=n,E[S]=n;break;case"Polygon":v=C.getCoordinates(),v[y[0]][d.index+S]=n,E[S]=n;break;case"MultiPolygon":v=C.getCoordinates(),v[y[1]][y[0]][d.index+S]=n,E[S]=n;break;case"Circle":if(E[0]=n,E[1]=n,d.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,C.setCenter(n),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let R=distance(fromUserCoordinate(C.getCenter()),fromUserCoordinate(n));C.setRadius(R),this.changingFeature_=!1}break}v&&this.setGeometryCoordinates_(C,v)}this.createOrUpdateVertexFeature_(n,i,s)}handleDownEvent(e){if(!this.condition_(e))return!1;const n=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,n),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){e.map.getView().getProjection();const s=[],r=i.getGeometry().getCoordinates(),o=boundingExtent([r]),a=this.rBush_.getInExtent(o),d={};a.sort(compareIndexes);for(let _=0,C=a.length;_<C;++_){const y=a[_],v=y.segment;let E=getUid(y.geometry);const S=y.depth;if(S&&(E+="-"+S.join("-")),d[E]||(d[E]=new Array(2)),y.geometry.getType()==="Circle"&&y.index===CIRCLE_CIRCUMFERENCE_INDEX){const R=closestOnSegmentData(n,y);equals(R,r)&&!d[E][0]&&(this.dragSegments_.push([y,0]),d[E][0]=y);continue}if(equals(v[0],r)&&!d[E][0]){this.dragSegments_.push([y,0]),d[E][0]=y;continue}if(equals(v[1],r)&&!d[E][1]){if(d[E][0]&&d[E][0].index===0){let R=y.geometry.getCoordinates();switch(y.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":R=R[S[1]];case"Polygon":if(y.index!==R[S[0]].length-2)continue;break}}this.dragSegments_.push([y,1]),d[E][1]=y;continue}getUid(v)in this.vertexSegments_&&!d[E][0]&&!d[E][1]&&this.insertVertexCondition_(e)&&s.push(y)}s.length&&this.willModifyFeatures_(e,[s]);for(let _=s.length-1;_>=0;--_)this.insertVertex_(s[_],r)}return!!this.vertexFeature_}handleUpEvent(e){for(let n=this.dragSegments_.length-1;n>=0;--n){const i=this.dragSegments_[n][0],s=i.geometry;if(s.getType()==="Circle"){const r=s.getCenter(),o=i.featureSegments[0],a=i.featureSegments[1];o.segment[0]=r,o.segment[1]=r,a.segment[0]=r,a.segment[1]=r,this.rBush_.update(createOrUpdateFromCoordinate(r),o);let d=s;this.rBush_.update(d.getExtent(),a)}else this.rBush_.update(boundingExtent(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,n,i){const s=i||n.getCoordinateFromPixel(e);n.getView().getProjection();const r=function(d,_){return projectedDistanceToSegmentDataSquared(s,d)-projectedDistanceToSegmentDataSquared(s,_)};let o,a;if(this.hitDetection_){const d=typeof this.hitDetection_=="object"?_=>_===this.hitDetection_:void 0;n.forEachFeatureAtPixel(e,(_,C,y)=>{y&&y.getType()==="Point"&&(y=new Point$1(toUserCoordinate(y.getCoordinates())));const v=y||_.getGeometry();if(_ instanceof Feature&&this.features_.getArray().includes(_)){a=v;const E=_.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:_,geometry:a,segment:[E,E]}]}return!0},{layerFilter:d})}if(!o){const d=fromUserExtent(createOrUpdateFromCoordinate(s,tempExtent)),_=n.getView().getResolution()*this.pixelTolerance_,C=toUserExtent(buffer(d,_,tempExtent));o=this.rBush_.getInExtent(C)}if(o&&o.length>0){const d=o.sort(r)[0],_=d.segment;let C=closestOnSegmentData(s,d);const y=n.getPixelFromCoordinate(C);let v=distance(e,y);if(a||v<=this.pixelTolerance_){const E={};if(E[getUid(_)]=!0,this.snapToPointer_||(this.delta_[0]=C[0]-s[0],this.delta_[1]=C[1]-s[1]),d.geometry.getType()==="Circle"&&d.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(C,[d.feature],[d.geometry]);else{const S=n.getPixelFromCoordinate(_[0]),R=n.getPixelFromCoordinate(_[1]),x=squaredDistance(y,S),T=squaredDistance(y,R);v=Math.sqrt(Math.min(x,T)),this.snappedToVertex_=v<=this.pixelTolerance_,this.snappedToVertex_&&(C=x>T?_[1]:_[0]),this.createOrUpdateVertexFeature_(C,[d.feature],[d.geometry]);const b={};b[getUid(d.geometry)]=!0;for(let M=1,N=o.length;M<N;++M){const k=o[M].segment;if(equals(_[0],k[0])&&equals(_[1],k[1])||equals(_[0],k[1])&&equals(_[1],k[0])){const G=getUid(o[M].geometry);G in b||(b[G]=!0,E[getUid(k)]=!0)}else break}}this.vertexSegments_=E;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,n){const i=e.segment,s=e.feature,r=e.geometry,o=e.depth,a=e.index;let d;for(;n.length<r.getStride();)n.push(0);switch(r.getType()){case"MultiLineString":d=r.getCoordinates(),d[o[0]].splice(a+1,0,n);break;case"Polygon":d=r.getCoordinates(),d[o[0]].splice(a+1,0,n);break;case"MultiPolygon":d=r.getCoordinates(),d[o[1]][o[0]].splice(a+1,0,n);break;case"LineString":d=r.getCoordinates(),d.splice(a+1,0,n);break;default:return}this.setGeometryCoordinates_(r,d);const _=this.rBush_;_.remove(e),this.updateSegmentIndices_(r,a,o,1);const C={segment:[i[0],n],feature:s,geometry:r,depth:o,index:a};_.insert(boundingExtent(C.segment),C),this.dragSegments_.push([C,1]);const y={segment:[n,i[1]],feature:s,geometry:r,depth:o,index:a+1};_.insert(boundingExtent(y.segment),y),this.dragSegments_.push([y,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const n=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,n}return!1}removeVertex_(){const e=this.dragSegments_,n={};let i=!1,s,r,o,a,d,_,C,y,v,E,S;for(d=e.length-1;d>=0;--d)o=e[d],E=o[0],S=getUid(E.feature),E.depth&&(S+="-"+E.depth.join("-")),S in n||(n[S]={}),o[1]===0?(n[S].right=E,n[S].index=E.index):o[1]==1&&(n[S].left=E,n[S].index=E.index+1);for(S in n){switch(v=n[S].right,C=n[S].left,_=n[S].index,y=_-1,C!==void 0?E=C:E=v,y<0&&(y=0),a=E.geometry,r=a.getCoordinates(),s=r,i=!1,a.getType()){case"MultiLineString":r[E.depth[0]].length>2&&(r[E.depth[0]].splice(_,1),i=!0);break;case"LineString":r.length>2&&(r.splice(_,1),i=!0);break;case"MultiPolygon":s=s[E.depth[1]];case"Polygon":s=s[E.depth[0]],s.length>4&&(_==s.length-1&&(_=0),s.splice(_,1),i=!0,_===0&&(s.pop(),s.push(s[0]),y=s.length-1));break}if(i){this.setGeometryCoordinates_(a,r);const R=[];if(C!==void 0&&(this.rBush_.remove(C),R.push(C.segment[0])),v!==void 0&&(this.rBush_.remove(v),R.push(v.segment[1])),C!==void 0&&v!==void 0){const x={depth:E.depth,feature:E.feature,geometry:E.geometry,index:y,segment:R};this.rBush_.insert(boundingExtent(x.segment),x)}this.updateSegmentIndices_(a,_,E.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return i}setGeometryCoordinates_(e,n){this.changingFeature_=!0,e.setCoordinates(n),this.changingFeature_=!1}updateSegmentIndices_(e,n,i,s){this.rBush_.forEachInExtent(e.getExtent(),function(r){r.geometry===e&&(i===void 0||r.depth===void 0||equals$2(r.depth,i))&&r.index>n&&(r.index+=s)})}}function compareIndexes(t,e){return t.index-e.index}function projectedDistanceToSegmentDataSquared(t,e,n){const i=e.geometry;if(i.getType()==="Circle"){let r=i;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const o=squaredDistance(r.getCenter(),fromUserCoordinate(t)),a=Math.sqrt(o)-r.getRadius();return a*a}}const s=fromUserCoordinate(t);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(s,tempSegment)}function closestOnSegmentData(t,e,n){const i=e.geometry;if(i.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(i.getClosestPoint(fromUserCoordinate(t)));const s=fromUserCoordinate(t);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(s,tempSegment))}function getDefaultStyleFunction$1(){const t=createEditingStyle();return function(e,n){return t.Point}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,n,i,s){super(e),this.selected=n,this.deselected=i,this.mapBrowserEvent=s}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let n;if(e.layers)if(typeof e.layers=="function")n=e.layers;else{const i=e.layers;n=function(s){return i.includes(s)}}else n=TRUE;this.layerFilter_=n,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,n){this.featureLayerAssociation_[getUid(e)]=n}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const n=e.element;if(this.style_&&this.applySelectedStyle_(n),!this.getLayer(n)){const i=this.getMap().getAllLayers().find(function(s){if(s instanceof VectorLayer&&s.getSource()&&s.getSource().hasFeature(n))return s});i&&this.addFeatureLayerAssociation_(n,i)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const n=getUid(e);n in originalFeatureStyles||(originalFeatureStyles[n]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const n=this.getMap().getInteractions().getArray();for(let s=n.length-1;s>=0;--s){const r=n[s];if(r!==this&&r instanceof Select&&r.getStyle()&&r.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(r.getStyle());return}}const i=getUid(e);e.setStyle(originalFeatureStyles[i]),delete originalFeatureStyles[i]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const n=this.addCondition_(e),i=this.removeCondition_(e),s=this.toggleCondition_(e),r=!n&&!i&&!s,o=e.map,a=this.getFeatures(),d=[],_=[];if(r){clear$1(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(C,y)=>{if(!(!(C instanceof Feature)||!this.filter_(C,y)))return this.addFeatureLayerAssociation_(C,y),_.push(C),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let C=a.getLength()-1;C>=0;--C){const y=a.item(C),v=_.indexOf(y);v>-1?_.splice(v,1):(a.remove(y),d.push(y))}_.length!==0&&a.extend(_)}else{o.forEachFeatureAtPixel(e.pixel,(C,y)=>{if(!(!(C instanceof Feature)||!this.filter_(C,y)))return(n||s)&&!a.getArray().includes(C)?(this.addFeatureLayerAssociation_(C,y),_.push(C)):(i||s)&&a.getArray().includes(C)&&(d.push(C),this.removeFeatureLayerAssociation_(C)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let C=d.length-1;C>=0;--C)a.remove(d[C]);a.extend(_)}return(_.length>0||d.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,_,d,e)),!0}}function getDefaultStyleFunction(){const t=createEditingStyle();return extend$3(t.Polygon,t.LineString),extend$3(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var logger$3=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(t,e){logger$3.trace("unset()");var n={};Helper.mergeParams(n,this._options),Helper.mergeParams(n,e);for(var i=t.getInteractions().getArray(),s=0;s<i.length;s++)if(i[s].getActive()&&(i[s]instanceof Draw||i[s]instanceof Select||i[s]instanceof Modify)){var r=i[s].getProperties(),o=r.name;if(typeof o<"u"&&this._extensions.indexOf(o)>-1){if(n.current&&n.current===o)continue;i[s].setActive(!1);var a=r.source;if(typeof a<"u"&&a instanceof Control){for(var d in n)if(n.hasOwnProperty(d)){if(d==="current")continue;if(typeof a[d]=="function"){var _=Array.isArray(n[d])?n[d]:[n[d]];a[d].apply(a,_)}}}}else i[s].setActive(!1)}}},SelectorID={generate:function(){var t=Math.floor(Date.now());return function(){return t++}}(),name:function(t){var e=null,n=t.lastIndexOf("-");return n===-1?e=t:e=t.substring(0,n),e},index:function(t){var e=null,n=this.name(t),i=n.lastIndexOf("_");return i!==-1&&(e=n.substring(i+1)),e},uuid:function(t){var e=null,n=t.lastIndexOf("-");return n!==-1&&(e=parseInt(t.substring(n+1),10)),e}},MathUtils={modulo:function(t,e){var n=t%e;return n*e<0?n+e:n},decimalToDMS:function(t,e,n){var i=this.modulo(t+180,360)-180,s=Math.abs(3600*i),r=n||0,o=Math.pow(10,r),a=Math.floor(s/3600),d=Math.floor((s-a*3600)/60),_=s-a*3600-d*60;_=Math.ceil(_*o)/o,_>=60&&(_=0,d+=1),d>=60&&(d=0,a+=1);var C=e.charAt(i<0?1:0);return{d:a,m:d,s:_,direction:C}},dmsToDecimal(t,e,n,i){var s=t+e/60+n/3600;return(i=="S"||i=="O")&&(s=s*-1),s},coordinateToDecimal(t){var e={};return e.lat=t[1].toFixed(6),e.lng=t[0].toFixed(6),e.unit="°",e},coordinateToDMS(t){return{lng:MathUtils.decimalToDMS(t[0],"EO",2),lat:MathUtils.decimalToDMS(t[1],"NS",2),unit:"DMS"}},coordinateToRad(t){var e={},n=.017453292519943295;return e.lng=t[0]*n,e.lng=e.lng.toFixed(8),e.lat=t[1]*n,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(t){var e={},n=1.1111111111111112;return e.lng=t[0]*n,e.lng=e.lng.toFixed(8),e.lat=t[1]*n,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(t){var e={};return e.x=t[0].toFixed(2),e.y=t[1].toFixed(2),e.unit="m",e},coordinateToKMeter(t){var e={};return e.x=(t[0]/1e3).toFixed(2),e.y=(t[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(t,e){var n=e||10,i=parseInt(t,n);return!isNaN(i)&&isFinite(i)?i:null},isInteger:function(t){if(isNaN(t))return!1;var e=parseFloat(t);return(e|0)===e},toFloat:function(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"city",title:"Nom commune",description:"Nom de la commune"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(t){var e=15,n=t.service,i=t.fields,s=t.type,r={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return n==="SuggestedLocation"&&s==="PositionOfInterest"&&(e=r[i.classification]),n==="GeocodedLocation"&&s==="PositionOfInterest"&&(e=r[i.importance]||14),s==="StreetAddress"&&(e=17),s==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(t){var e=t.placeAttributes;if(e.label)return e.label;if(t.type==="PositionOfInterest"){var n=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?n=n+", "+e.category[1]:e.postcode&&(n=n+", "+e.postcode[0],e.city&&(n=n+" "+e.city[0])),n}else return t.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:t.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(t){if(t.fullText)return t.fullText;var e=[];return e.push(t.street||""),e.push(t.postalCode||""),e.push(t.commune||""),t.type==="PositionOfInterest"&&(e.push(t.poi||""),e.push(t.kind||"")),e.join(" - ")}};function globals(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(t,e){if(t[e])return t[e];for(var n=Object.keys(t),i=e.toLowerCase().replace(ignoredChar,""),s=-1,r,o;++s<n.length;)if(r=n[s],o=r.toLowerCase().replace(ignoredChar,""),o===i)return t[r]}function projStr(t){var e={},n=t.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,d){var _=d.split("=");return _.push(!0),a[_[0].toLowerCase()]=_[1],a},{}),i,s,r,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*D2R$1},lat_1:function(a){e.lat1=a*D2R$1},lat_2:function(a){e.lat2=a*D2R$1},lat_ts:function(a){e.lat_ts=a*D2R$1},lon_0:function(a){e.long0=a*D2R$1},lon_1:function(a){e.long1=a*D2R$1},lon_2:function(a){e.long2=a*D2R$1},alpha:function(a){e.alpha=parseFloat(a)*D2R$1},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*D2R$1},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(d){return parseFloat(d)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var d=match(units,a);d&&(e.to_meter=d.to_meter)},from_greenwich:function(a){e.from_greenwich=a*D2R$1},pm:function(a){var d=match(exports$2,a);e.from_greenwich=(d||parseFloat(a))*D2R$1},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var d="ewnsud";a.length===3&&d.indexOf(a.substr(0,1))!==-1&&d.indexOf(a.substr(1,1))!==-1&&d.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(i in n)s=n[i],i in o?(r=o[i],typeof r=="function"?r(s):e[r]=s):e[i]=s;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(t){if(typeof t!="string")throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(t);case KEYWORD:return this.keyword(t);case QUOTED:return this.quoted(t);case AFTERQUOTE:return this.afterquote(t);case NUMBER:return this.number(t);case ENDED:return}};Parser.prototype.afterquote=function(t){if(t==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(t){if(t===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(t==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(t){if(digets.test(t)){this.word+=t;return}if(endThings.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(t){if(t==='"'){this.state=AFTERQUOTE;return}this.word+=t};Parser.prototype.keyword=function(t){if(keyword.test(t)){this.word+=t;return}if(t==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(t){if(latin.test(t)){this.word=t,this.state=KEYWORD;return}if(t==='"'){this.word="",this.state=QUOTED;return}if(digets.test(t)){this.word=t,this.state=NUMBER;return}if(endThings.test(t)){this.afterItem(t);return}throw new Error(`havn't handled "`+t+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(t){var e=new Parser(t);return e.output()}function mapit(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,s=n.reduce(function(r,o){return sExpr(o,r),r},i);e&&(t[e]=s)}function sExpr(t,e){if(!Array.isArray(t)){e[t]=!0;return}var n=t.shift();if(n==="PARAMETER"&&(n=t.shift()),t.length===1){if(Array.isArray(t[0])){e[n]={},sExpr(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if(n==="TOWGS84"){e[n]=t;return}if(n==="AXIS"){n in e||(e[n]=[]),e[n].push(t);return}Array.isArray(n)||(e[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},t.length===3&&sExpr(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},t.length===4&&sExpr(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],mapit(e,n,t);return;default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return sExpr(t,e[n]);return mapit(e,n,t)}}var D2R=.017453292519943295;function rename(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],e.length===3&&(t[n]=e[2](t[n])))}function d2r(t){return t*D2R}function cleanWKT(t){if(t.type==="GEOGCS"?t.projName="longlat":t.type==="LOCAL_CS"?(t.projName="identity",t.local=!0):typeof t.PROJECTION=="object"?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var s=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];s[0].indexOf("north")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="north"?e+="n":s[0].indexOf("south")!==-1||(s[0]==="y"||s[0]==="lat")&&s[1]==="south"?e+="s":s[0].indexOf("east")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="east"?e+="e":(s[0].indexOf("west")!==-1||(s[0]==="x"||s[0]==="lon")&&s[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),t.units==="metre"&&(t.units="meter"),t.UNIT.convert&&(t.type==="GEOGCS"?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var r=t.GEOGCS;t.type==="GEOGCS"&&(r=t),r&&(r.DATUM?t.datumCode=r.DATUM.name.toLowerCase():t.datumCode=r.name.toLowerCase(),t.datumCode.slice(0,2)==="d_"&&(t.datumCode=t.datumCode.slice(2)),(t.datumCode==="new_zealand_geodetic_datum_1949"||t.datumCode==="new_zealand_1949")&&(t.datumCode="nzgd49"),(t.datumCode==="wgs_1984"||t.datumCode==="world_geodetic_system_1984")&&(t.PROJECTION==="Mercator_Auxiliary_Sphere"&&(t.sphere=!0),t.datumCode="wgs84"),t.datumCode.slice(-6)==="_ferro"&&(t.datumCode=t.datumCode.slice(0,-6)),t.datumCode.slice(-8)==="_jakarta"&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),r.DATUM&&r.DATUM.SPHEROID&&(t.ellps=r.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),t.ellps.toLowerCase().slice(0,13)==="international"&&(t.ellps="intl"),t.a=r.DATUM.SPHEROID.a,t.rf=parseFloat(r.DATUM.SPHEROID.rf,10)),r.DATUM&&r.DATUM.TOWGS84&&(t.datum_params=r.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),t.datumCode==="ch1903+"&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);function o(_){var C=t.to_meter||1;return _*C}var a=function(_){return rename(t,_)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];d.forEach(a),!t.long0&&t.longc&&(t.projName==="Albers_Conic_Equal_Area"||t.projName==="Lambert_Azimuthal_Equal_Area")&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&(t.projName==="Stereographic_South_Pole"||t.projName==="Polar Stereographic (variant B)")?(t.lat0=d2r(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&t.projName==="Polar_Stereographic"&&(t.lat_ts=t.lat0,t.lat0=d2r(t.lat0>0?90:-90))}function wkt(t){var e=parseString(t),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var s={};return sExpr(e,s),cleanWKT(s),s}function defs(t){var e=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?defs[t]=projStr(arguments[1]):defs[t]=wkt(arguments[1]):defs[t]=n}else if(arguments.length===1){if(Array.isArray(t))return t.map(function(i){Array.isArray(i)?defs.apply(e,i):defs(i)});if(typeof t=="string"){if(t in defs)return defs[t]}else"EPSG"in t?defs["EPSG:"+t.EPSG]=t:"ESRI"in t?defs["ESRI:"+t.ESRI]=t:"IAU2000"in t?defs["IAU2000:"+t.IAU2000]=t:console.log(t);return}}globals(defs);function testObj(t){return typeof t=="string"}function testDef(t){return t in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(t){return codeWords.some(function(e){return t.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(t){var e=match(t,"authority");if(e){var n=match(e,"epsg");return n&&codes.indexOf(n)>-1}}function checkProjStr(t){var e=match(t,"extension");if(e)return match(e,"proj4")}function testProj(t){return t[0]==="+"}function parse(t){if(testObj(t)){if(testDef(t))return defs[t];if(testWKT(t)){var e=wkt(t);if(checkMercator(e))return defs["EPSG:3857"];var n=checkProjStr(e);return n?projStr(n):e}if(testProj(t))return projStr(t)}else return t}function extend(t,e){t=t||{};var n,i;if(!e)return t;for(i in e)n=e[i],n!==void 0&&(t[i]=n);return t}function msfnz(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function sign(t){return t<0?-1:1}function adjust_lon(t){return Math.abs(t)<=SPI?t:t-sign(t)*TWO_PI}function tsfnz(t,e,n){var i=t*n,s=.5*t;return i=Math.pow((1-i)/(1+i),s),Math.tan(.5*(HALF_PI-e))/i}function phi2z(t,e){for(var n=.5*t,i,s,r=HALF_PI-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(r),s=HALF_PI-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-r,r+=s,Math.abs(s)<=1e-10)return r;return-9999}function init$v(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$u(t){var e=t.x,n=t.y;if(n*R2D>90&&n*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var i,s;if(Math.abs(Math.abs(n)-HALF_PI)<=EPSLN)return null;if(this.sphere)i=this.x0+this.a*this.k0*adjust_lon(e-this.long0),s=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*n));else{var r=Math.sin(n),o=tsfnz(this.e,n,r);i=this.x0+this.a*this.k0*adjust_lon(e-this.long0),s=this.y0-this.a*this.k0*Math.log(o)}return t.x=i,t.y=s,t}function inverse$u(t){var e=t.x-this.x0,n=t.y-this.y0,i,s;if(this.sphere)s=HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var r=Math.exp(-n/(this.a*this.k0));if(s=phi2z(this.e,r),s===-9999)return null}return i=adjust_lon(this.long0+e/(this.a*this.k0)),t.x=i,t.y=s,t}var names$w=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$v,forward:forward$u,inverse:inverse$u,names:names$w};function init$u(){}function identity(t){return t}var names$v=["longlat","identity"];const longlat={init:init$u,forward:identity,inverse:identity,names:names$v};var projs=[merc,longlat],names$u={},projStore=[];function add(t,e){var n=projStore.length;return t.names?(projStore[n]=t,t.names.forEach(function(i){names$u[i.toLowerCase()]=n}),this):(console.log(e),!0)}function get(t){if(!t)return!1;var e=t.toLowerCase();if(typeof names$u[e]<"u"&&projStore[names$u[e]])return projStore[names$u[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(t,e,n,i){var s=t*t,r=e*e,o=(s-r)/s,a=0;i?(t*=1-o*(SIXTH+o*(RA4+o*RA6)),s=t*t,o=0):a=Math.sqrt(o);var d=(s-r)/r;return{es:o,e:a,ep2:d}}function sphere(t,e,n,i,s){if(!t){var r=match(exports$1,i);r||(r=WGS84),t=r.a,e=r.b,n=r.rf}return n&&!e&&(e=(1-1/n)*t),(n===0||Math.abs(t-e)<EPSLN)&&(s=!0,e=t),{a:t,b:e,rf:n,sphere:s}}var exports={};exports.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};exports.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};exports.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};exports.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};exports.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};exports.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};exports.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};exports.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};exports.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};exports.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};exports.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};exports.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};exports.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};exports.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};exports.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};exports.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};exports.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};exports.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function datum(t,e,n,i,s,r,o){var a={};return t===void 0||t==="none"?a.datum_type=PJD_NODATUM:a.datum_type=PJD_WGS84,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=PJD_3PARAM),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=PJD_7PARAM,a.datum_params[3]*=SEC_TO_RAD,a.datum_params[4]*=SEC_TO_RAD,a.datum_params[5]*=SEC_TO_RAD,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=PJD_GRIDSHIFT,a.grids=o),a.a=n,a.b=i,a.es=s,a.ep2=r,a}var loadedNadgrids={};function nadgrid(t,e){var n=new DataView(e),i=detectLittleEndian(n),s=readHeader(n,i),r=readSubgrids(n,s,i),o={header:s,subgrids:r};return loadedNadgrids[t]=o,o}function getNadgrids(t){if(t===void 0)return null;var e=t.split(",");return e.map(parseNadgridString)}function parseNadgridString(t){if(t.length===0)return null;var e=t[0]==="@";return e&&(t=t.slice(1)),t==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:loadedNadgrids[t]||null,isNull:!1}}function secondsToRadians(t){return t/3600*Math.PI/180}function detectLittleEndian(t){var e=t.getInt32(8,!1);return e===11?!1:(e=t.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:decodeString(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function decodeString(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function readSubgrids(t,e,n){for(var i=176,s=[],r=0;r<e.nSubgrids;r++){var o=readGridHeader(t,i,n),a=readGridNodes(t,i,o,n),d=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),_=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);s.push({ll:[secondsToRadians(o.lowerLongitude),secondsToRadians(o.lowerLatitude)],del:[secondsToRadians(o.longitudeInterval),secondsToRadians(o.latitudeInterval)],lim:[d,_],count:o.gridNodeCount,cvs:mapNodes(a)}),i+=176+o.gridNodeCount*16}return s}function mapNodes(t){return t.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(t,e,n){return{name:decodeString(t,e+8,e+16).trim(),parent:decodeString(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function readGridNodes(t,e,n,i){for(var s=e+176,r=16,o=[],a=0;a<n.gridNodeCount;a++){var d={latitudeShift:t.getFloat32(s+a*r,i),longitudeShift:t.getFloat32(s+a*r+4,i),latitudeAccuracy:t.getFloat32(s+a*r+8,i),longitudeAccuracy:t.getFloat32(s+a*r+12,i)};o.push(d)}return o}function Projection(t,e){if(!(this instanceof Projection))return new Projection(t);e=e||function(_){if(_)throw _};var n=parse(t);if(typeof n!="object"){e(t);return}var i=Projection.projections.get(n.projName);if(!i){e(t);return}if(n.datumCode&&n.datumCode!=="none"){var s=match(exports,n.datumCode);s&&(n.datum_params=n.datum_params||(s.towgs84?s.towgs84.split(","):null),n.ellps=s.ellipse,n.datumName=s.datumName?s.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var r=sphere(n.a,n.b,n.rf,n.ellps,n.sphere),o=eccentricity(r.a,r.b,r.rf,n.R_A),a=getNadgrids(n.nadgrids),d=n.datum||datum(n.datumCode,n.datum_params,r.a,r.b,o.es,o.ep2,a);extend(this,n),extend(this,i),this.a=r.a,this.b=r.b,this.rf=r.rf,this.sphere=r.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=d,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(t,e){return t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11?!1:t.datum_type===PJD_3PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type===PJD_7PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(t,e,n){var i=t.x,s=t.y,r=t.z?t.z:0,o,a,d,_;if(s<-HALF_PI&&s>-1.001*HALF_PI)s=-HALF_PI;else if(s>HALF_PI&&s<1.001*HALF_PI)s=HALF_PI;else{if(s<-HALF_PI)return{x:-1/0,y:-1/0,z:t.z};if(s>HALF_PI)return{x:1/0,y:1/0,z:t.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(s),_=Math.cos(s),d=a*a,o=n/Math.sqrt(1-e*d),{x:(o+r)*_*Math.cos(i),y:(o+r)*_*Math.sin(i),z:(o*(1-e)+r)*a}}function geocentricToGeodetic(t,e,n,i){var s=1e-12,r=s*s,o=30,a,d,_,C,y,v,E,S,R,x,T,b,M,N=t.x,k=t.y,G=t.z?t.z:0,Y,q,le;if(a=Math.sqrt(N*N+k*k),d=Math.sqrt(N*N+k*k+G*G),a/n<s){if(Y=0,d/n<s)return q=HALF_PI,le=-i,{x:t.x,y:t.y,z:t.z}}else Y=Math.atan2(k,N);_=G/d,C=a/d,y=1/Math.sqrt(1-e*(2-e)*C*C),S=C*(1-e)*y,R=_*y,M=0;do M++,E=n/Math.sqrt(1-e*R*R),le=a*S+G*R-E*(1-e*R*R),v=e*E/(E+le),y=1/Math.sqrt(1-v*(2-v)*C*C),x=C*(1-v)*y,T=_*y,b=T*S-x*R,S=x,R=T;while(b*b>r&&M<o);return q=Math.atan(T/Math.abs(x)),{x:Y,y:q,z:le}}function geocentricToWgs84(t,e,n){if(e===PJD_3PARAM)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===PJD_7PARAM){var i=n[0],s=n[1],r=n[2],o=n[3],a=n[4],d=n[5],_=n[6];return{x:_*(t.x-d*t.y+a*t.z)+i,y:_*(d*t.x+t.y-o*t.z)+s,z:_*(-a*t.x+o*t.y+t.z)+r}}}function geocentricFromWgs84(t,e,n){if(e===PJD_3PARAM)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===PJD_7PARAM){var i=n[0],s=n[1],r=n[2],o=n[3],a=n[4],d=n[5],_=n[6],C=(t.x-i)/_,y=(t.y-s)/_,v=(t.z-r)/_;return{x:C+d*y-a*v,y:-d*C+y+o*v,z:a*C-o*y+v}}}function checkParams(t){return t===PJD_3PARAM||t===PJD_7PARAM}function datum_transform(t,e,n){if(compareDatums(t,e)||t.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return n;var i=t.a,s=t.es;if(t.datum_type===PJD_GRIDSHIFT){var r=applyGridShift(t,!1,n);if(r!==0)return;i=SRS_WGS84_SEMIMAJOR,s=SRS_WGS84_ESQUARED}var o=e.a,a=e.b,d=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(o=SRS_WGS84_SEMIMAJOR,a=SRS_WGS84_SEMIMINOR,d=SRS_WGS84_ESQUARED),s===d&&i===o&&!checkParams(t.datum_type)&&!checkParams(e.datum_type))return n;if(n=geodeticToGeocentric(n,s,i),checkParams(t.datum_type)&&(n=geocentricToWgs84(n,t.datum_type,t.datum_params)),checkParams(e.datum_type)&&(n=geocentricFromWgs84(n,e.datum_type,e.datum_params)),n=geocentricToGeodetic(n,d,o,a),e.datum_type===PJD_GRIDSHIFT){var _=applyGridShift(e,!0,n);if(_!==0)return}return n}function applyGridShift(t,e,n){if(t.grids===null||t.grids.length===0)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},s={x:Number.NaN,y:Number.NaN},r=[];e:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(r.push(a.name),a.isNull){s=i;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var d=a.grid.subgrids,_=0,C=d.length;_<C;_++){var y=d[_],v=(Math.abs(y.del[1])+Math.abs(y.del[0]))/1e4,E=y.ll[0]-v,S=y.ll[1]-v,R=y.ll[0]+(y.lim[0]-1)*y.del[0]+v,x=y.ll[1]+(y.lim[1]-1)*y.del[1]+v;if(!(S>i.y||E>i.x||x<i.y||R<i.x)&&(s=applySubgridShift(i,e,y),!isNaN(s.x)))break e}}return isNaN(s.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*R2D+" "+i.y*R2D+" tried: '"+r+"'"),-1):(n.x=-s.x,n.y=s.y,0)}function applySubgridShift(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var s={x:t.x,y:t.y};s.x-=n.ll[0],s.y-=n.ll[1],s.x=adjust_lon(s.x-Math.PI)+Math.PI;var r=nadInterpolate(s,n);if(e){if(isNaN(r.x))return i;r.x=s.x-r.x,r.y=s.y-r.y;var o=9,a=1e-12,d,_;do{if(_=nadInterpolate(r,n),isNaN(_.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:s.x-(_.x+r.x),y:s.y-(_.y+r.y)},r.x+=d.x,r.y+=d.y}while(o--&&Math.abs(d.x)>a&&Math.abs(d.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=adjust_lon(r.x+n.ll[0]),i.y=r.y+n.ll[1]}else isNaN(r.x)||(i.x=t.x+r.x,i.y=t.y+r.y);return i}function nadInterpolate(t,e){var n={x:t.x/e.del[0],y:t.y/e.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*i.x,y:n.y-1*i.y},r={x:Number.NaN,y:Number.NaN},o;if(i.x<0||i.x>=e.lim[0]||i.y<0||i.y>=e.lim[1])return r;o=i.y*e.lim[0]+i.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var d={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var _={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var C={x:e.cvs[o][0],y:e.cvs[o][1]},y=s.x*s.y,v=s.x*(1-s.y),E=(1-s.x)*(1-s.y),S=(1-s.x)*s.y;return r.x=E*a.x+v*d.x+S*C.x+y*_.x,r.y=E*a.y+v*d.y+S*C.y+y*_.y,r}function adjust_axis(t,e,n){var i=n.x,s=n.y,r=n.z||0,o,a,d,_={};for(d=0;d<3;d++)if(!(e&&d===2&&n.z===void 0))switch(d===0?(o=i,"ew".indexOf(t.axis[d])!==-1?a="x":a="y"):d===1?(o=s,"ns".indexOf(t.axis[d])!==-1?a="y":a="x"):(o=r,a="z"),t.axis[d]){case"e":_[a]=o;break;case"w":_[a]=-o;break;case"n":_[a]=o;break;case"s":_[a]=-o;break;case"u":n[a]!==void 0&&(_.z=o);break;case"d":n[a]!==void 0&&(_.z=-o);break;default:return null}return _}function common(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function checkSanity(t){checkCoord(t.x),checkCoord(t.y)}function checkCoord(t){if(typeof Number.isFinite=="function"){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if(typeof t!="number"||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(t,e){return(t.datum.datum_type===PJD_3PARAM||t.datum.datum_type===PJD_7PARAM||t.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&t.datumCode!=="WGS84"}function transform(t,e,n,i){var s;Array.isArray(n)?n=common(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var r=n.z!==void 0;if(checkSanity(n),t.datum&&e.datum&&checkNotWGS(t,e)&&(s=new Projection("WGS84"),n=transform(t,s,n,i),t=s),i&&t.axis!=="enu"&&(n=adjust_axis(t,!1,n)),t.projName==="longlat")n={x:n.x*D2R$1,y:n.y*D2R$1,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=datum_transform(t.datum,e.datum,n),!!n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),e.projName==="longlat"?n={x:n.x*R2D,y:n.y*R2D,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&e.axis!=="enu"?adjust_axis(e,!0,n):(n&&!r&&delete n.z,n)}var wgs84=Projection("WGS84");function transformer(t,e,n,i){var s,r,o;return Array.isArray(n)?(s=transform(t,e,n,i)||{x:NaN,y:NaN},n.length>2?typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof s.z=="number"?[s.x,s.y,s.z].concat(n.splice(3)):[s.x,s.y,n[2]].concat(n.splice(3)):[s.x,s.y].concat(n.splice(2)):[s.x,s.y]):(r=transform(t,e,n,i),o=Object.keys(n),o.length===2||o.forEach(function(a){if(typeof t.name<"u"&&t.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;r[a]=n[a]}),r)}function checkProj(t){return t instanceof Projection?t:t.oProj?t.oProj:Projection(t)}function proj4(t,e,n){t=checkProj(t);var i=!1,s;return typeof e>"u"?(e=t,t=wgs84,i=!0):(typeof e.x<"u"||Array.isArray(e))&&(n=e,e=t,t=wgs84,i=!0),e=checkProj(e),n?transformer(t,e,n):(s={forward:function(r,o){return transformer(t,e,r,o)},inverse:function(r,o){return transformer(e,t,r,o)}},i&&(s.oProj=e),s)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A=65,I=73,O=79,V=86,Z=90;const mgrs={forward:forward$t,inverse:inverse$t,toPoint};function forward$t(t,e){return e=e||5,encode(LLtoUTM({lat:t[1],lon:t[0]}),e)}function inverse$t(t){var e=UTMtoLL(decode(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(t){var e=UTMtoLL(decode(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(t){return t*(Math.PI/180)}function radToDeg(t){return 180*(t/Math.PI)}function LLtoUTM(t){var e=t.lat,n=t.lon,i=6378137,s=.00669438,r=.9996,o,a,d,_,C,y,v,E=degToRad(e),S=degToRad(n),R,x;x=Math.floor((n+180)/6)+1,n===180&&(x=60),e>=56&&e<64&&n>=3&&n<12&&(x=32),e>=72&&e<84&&(n>=0&&n<9?x=31:n>=9&&n<21?x=33:n>=21&&n<33?x=35:n>=33&&n<42&&(x=37)),o=(x-1)*6-180+3,R=degToRad(o),a=s/(1-s),d=i/Math.sqrt(1-s*Math.sin(E)*Math.sin(E)),_=Math.tan(E)*Math.tan(E),C=a*Math.cos(E)*Math.cos(E),y=Math.cos(E)*(S-R),v=i*((1-s/4-3*s*s/64-5*s*s*s/256)*E-(3*s/8+3*s*s/32+45*s*s*s/1024)*Math.sin(2*E)+(15*s*s/256+45*s*s*s/1024)*Math.sin(4*E)-35*s*s*s/3072*Math.sin(6*E));var T=r*d*(y+(1-_+C)*y*y*y/6+(5-18*_+_*_+72*C-58*a)*y*y*y*y*y/120)+5e5,b=r*(v+d*Math.tan(E)*(y*y/2+(5-_+9*C+4*C*C)*y*y*y*y/24+(61-58*_+_*_+600*C-330*a)*y*y*y*y*y*y/720));return e<0&&(b+=1e7),{northing:Math.round(b),easting:Math.round(T),zoneNumber:x,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(t){var e=t.northing,n=t.easting,i=t.zoneLetter,s=t.zoneNumber;if(s<0||s>60)return null;var r=.9996,o=6378137,a=.00669438,d,_=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),C,y,v,E,S,R,x,T,b,M=n-5e5,N=e;i<"N"&&(N-=1e7),x=(s-1)*6-180+3,d=a/(1-a),R=N/r,T=R/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),b=T+(3*_/2-27*_*_*_/32)*Math.sin(2*T)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*T)+151*_*_*_/96*Math.sin(6*T),C=o/Math.sqrt(1-a*Math.sin(b)*Math.sin(b)),y=Math.tan(b)*Math.tan(b),v=d*Math.cos(b)*Math.cos(b),E=o*(1-a)/Math.pow(1-a*Math.sin(b)*Math.sin(b),1.5),S=M/(C*r);var k=b-C*Math.tan(b)/E*(S*S/2-(5+3*y+10*v-4*v*v-9*d)*S*S*S*S/24+(61+90*y+298*v+45*y*y-252*d-3*v*v)*S*S*S*S*S*S/720);k=radToDeg(k);var G=(S-(1+2*y+v)*S*S*S/6+(5-2*v+28*y-3*v*v+8*d+24*y*y)*S*S*S*S*S/120)/Math.cos(b);G=x+radToDeg(G);var Y;if(t.accuracy){var q=UTMtoLL({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});Y={top:q.lat,right:q.lon,bottom:k,left:G}}else Y={lat:k,lon:G};return Y}function getLetterDesignator(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function encode(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+get100kID(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function get100kID(t,e,n){var i=get100kSetForZone(n),s=Math.floor(t/1e5),r=Math.floor(e/1e5)%20;return getLetter100kID(s,r,i)}function get100kSetForZone(t){var e=t%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(t,e,n){var i=n-1,s=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(i),r=SET_ORIGIN_ROW_LETTERS.charCodeAt(i),o=s+t-1,a=r+e,d=!1;o>Z&&(o=o-Z+A-1,d=!0),(o===I||s<I&&o>I||(o>I||s<I)&&d)&&o++,(o===O||s<O&&o>O||(o>O||s<O)&&d)&&(o++,o===I&&o++),o>Z&&(o=o-Z+A-1),a>V?(a=a-V+A-1,d=!0):d=!1,(a===I||r<I&&a>I||(a>I||r<I)&&d)&&a++,(a===O||r<O&&a>O||(a>O||r<O)&&d)&&(a++,a===I&&a++),a>V&&(a=a-V+A-1);var _=String.fromCharCode(o)+String.fromCharCode(a);return _}function decode(t){if(t&&t.length===0)throw"MGRSPoint coverting from nothing";for(var e=t.length,n=null,i="",s,r=0;!/[A-Z]/.test(s=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;i+=s,r++}var o=parseInt(i,10);if(r===0||r+3>e)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(r++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(r,r+=2);for(var d=get100kSetForZone(o),_=getEastingFromChar(n.charAt(0),d),C=getNorthingFromChar(n.charAt(1),d);C<getMinNorthing(a);)C+=2e6;var y=e-r;if(y%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+t;var v=y/2,E=0,S=0,R,x,T,b,M;return v>0&&(R=1e5/Math.pow(10,v),x=t.substring(r,r+v),E=parseFloat(x)*R,T=t.substring(r+v),S=parseFloat(T)*R),b=E+_,M=S+C,{easting:b,northing:M,zoneLetter:a,zoneNumber:o,accuracy:R}}function getEastingFromChar(t,e){for(var n=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),i=1e5,s=!1;n!==t.charCodeAt(0);){if(n++,n===I&&n++,n===O&&n++,n>Z){if(s)throw"Bad character: "+t;n=A,s=!0}i+=1e5}return i}function getNorthingFromChar(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var n=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),i=0,s=!1;n!==t.charCodeAt(0);){if(n++,n===I&&n++,n===O&&n++,n>V){if(s)throw"Bad character: "+t;n=A,s=!0}i+=1e5}return i}function getMinNorthing(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Point(t,e,n){if(!(this instanceof Point))return new Point(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if(typeof t=="object")this.x=t.x,this.y=t.y,this.z=t.z||0;else if(typeof t=="string"&&typeof e>"u"){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(t){return new Point(toPoint(t))};Point.prototype.toMGRS=function(t){return forward$t([this.x,this.y],t)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(t){var e=[];e[0]=C00-t*(C02+t*(C04+t*(C06+t*C08))),e[1]=t*(C22-t*(C04+t*(C06+t*C08)));var n=t*t;return e[2]=n*(C44-t*(C46+t*C48)),n*=t,e[3]=n*(C66-t*C68),e[4]=n*t*C88,e}function pj_mlfn(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(t,e,n){for(var i=1/(1-e),s=t,r=MAX_ITER$3;r;--r){var o=Math.sin(s),a=1-e*o*o;if(a=(pj_mlfn(s,o,Math.cos(s),n)-t)*(a*Math.sqrt(a))*i,s-=a,Math.abs(a)<EPSLN)return s}return s}function init$t(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$s(t){var e=t.x,n=t.y,i=adjust_lon(e-this.long0),s,r,o,a=Math.sin(n),d=Math.cos(n);if(this.es){var C=d*i,y=Math.pow(C,2),v=this.ep2*Math.pow(d,2),E=Math.pow(v,2),S=Math.abs(d)>EPSLN?Math.tan(n):0,R=Math.pow(S,2),x=Math.pow(R,2);s=1-this.es*Math.pow(a,2),C=C/Math.sqrt(s);var T=pj_mlfn(n,a,d,this.en);r=this.a*(this.k0*C*(1+y/6*(1-R+v+y/20*(5-18*R+x+14*v-58*R*v+y/42*(61+179*x-x*R-479*R)))))+this.x0,o=this.a*(this.k0*(T-this.ml0+a*i*C/2*(1+y/12*(5-R+9*v+4*E+y/30*(61+x-58*R+270*v-330*R*v+y/56*(1385+543*x-x*R-3111*R))))))+this.y0}else{var _=d*Math.sin(i);if(Math.abs(Math.abs(_)-1)<EPSLN)return 93;if(r=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,o=d*Math.cos(i)/Math.sqrt(1-Math.pow(_,2)),_=Math.abs(o),_>=1){if(_-1>EPSLN)return 93;o=0}else o=Math.acos(o);n<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return t.x=r,t.y=o,t}function inverse$s(t){var e,n,i,s,r=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=pj_inv_mlfn(e,this.es,this.en),Math.abs(n)<HALF_PI){var y=Math.sin(n),v=Math.cos(n),E=Math.abs(v)>EPSLN?Math.tan(n):0,S=this.ep2*Math.pow(v,2),R=Math.pow(S,2),x=Math.pow(E,2),T=Math.pow(x,2);e=1-this.es*Math.pow(y,2);var b=r*Math.sqrt(e)/this.k0,M=Math.pow(b,2);e=e*E,i=n-e*M/(1-this.es)*.5*(1-M/12*(5+3*x-9*S*x+S-4*R-M/30*(61+90*x-252*S*x+45*T+46*S-M/56*(1385+3633*x+4095*T+1574*T*x)))),s=adjust_lon(this.long0+b*(1-M/6*(1+2*x+S-M/20*(5+28*x+24*T+8*S*x+6*S-M/42*(61+662*x+1320*T+720*T*x))))/v)}else i=HALF_PI*sign(o),s=0;else{var a=Math.exp(r/this.k0),d=.5*(a-1/a),_=this.lat0+o/this.k0,C=Math.cos(_);e=Math.sqrt((1-Math.pow(C,2))/(1+Math.pow(d,2))),i=Math.asin(e),o<0&&(i=-i),d===0&&C===0?s=0:s=adjust_lon(Math.atan2(d,C)+this.long0)}return t.x=s,t.y=i,t}var names$t=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$t,forward:forward$s,inverse:inverse$s,names:names$t};function sinh(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function hypot(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function log1py(t){var e=1+t,n=e-1;return n===0?t:t*Math.log(e)/n}function asinhy(t){var e=Math.abs(t);return e=log1py(e*(1+e/(hypot(1,e)+1))),t<0?-e:e}function gatg(t,e){for(var n=2*Math.cos(2*e),i=t.length-1,s=t[i],r=0,o;--i>=0;)o=-r+n*s+t[i],r=s,s=o;return e+o*Math.sin(2*e)}function clens(t,e){for(var n=2*Math.cos(e),i=t.length-1,s=t[i],r=0,o;--i>=0;)o=-r+n*s+t[i],r=s,s=o;return Math.sin(e)*o}function cosh(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function clens_cmplx(t,e,n){for(var i=Math.sin(e),s=Math.cos(e),r=sinh(n),o=cosh(n),a=2*s*o,d=-2*i*r,_=t.length-1,C=t[_],y=0,v=0,E=0,S,R;--_>=0;)S=v,R=y,v=C,y=E,C=-S+a*v-d*y+t[_],E=-R+d*v+a*y;return a=i*o,d=s*r,[a*C-d*E,a*E+d*C]}function init$s(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),n=n*e,this.cgb[1]=n*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n=n*e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),n=n*e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(-12/5+e*(-24832/14175))),n=n*e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n=n*e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),n=n*e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n=n*e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n=n*e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n=n*e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(i+clens(this.gtu,2*i))}function forward$r(t){var e=adjust_lon(t.x-this.long0),n=t.y;n=gatg(this.cbg,n);var i=Math.sin(n),s=Math.cos(n),r=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*s),e=Math.atan2(r*s,hypot(i,s*o)),e=asinhy(Math.tan(e));var a=clens_cmplx(this.gtu,2*n,2*e);n=n+a[0],e=e+a[1];var d,_;return Math.abs(e)<=2.623395162778?(d=this.a*(this.Qn*e)+this.x0,_=this.a*(this.Qn*n+this.Zb)+this.y0):(d=1/0,_=1/0),t.x=d,t.y=_,t}function inverse$r(t){var e=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,e=e/this.Qn;var i,s;if(Math.abs(e)<=2.623395162778){var r=clens_cmplx(this.utg,2*n,2*e);n=n+r[0],e=e+r[1],e=Math.atan(sinh(e));var o=Math.sin(n),a=Math.cos(n),d=Math.sin(e),_=Math.cos(e);n=Math.atan2(o*_,hypot(d,_*a)),e=Math.atan2(d,_*a),i=adjust_lon(e+this.long0),s=gatg(this.cgb,n)}else i=1/0,s=1/0;return t.x=i,t.y=s,t}var names$s=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function adjust_zone(t,e){if(t===void 0){if(t=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var dependsOn="etmerc";function init$r(){var t=adjust_zone(this.zone,this.long0);if(t===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$r=["Universal Transverse Mercator System","utm"];const utm={init:init$r,names:names$r,dependsOn};function srat(t,e){return Math.pow((1-t)/(1+t),e)}var MAX_ITER$2=20;function init$q(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*t,this.ratexp))}function forward$q(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+FORTPI),this.C)*srat(this.e*Math.sin(n),this.ratexp))-HALF_PI,t.x=this.C*e,t}function inverse$q(t){for(var e=1e-14,n=t.x/this.C,i=t.y,s=Math.pow(Math.tan(.5*i+FORTPI)/this.K,1/this.C),r=MAX_ITER$2;r>0&&(i=2*Math.atan(s*srat(this.e*Math.sin(t.y),-.5*this.e))-HALF_PI,!(Math.abs(i-t.y)<e));--r)t.y=i;return r?(t.x=n,t.y=i,t):null}var names$q=["gauss"];const gauss={init:init$q,forward:forward$q,inverse:inverse$q,names:names$q};function init$p(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$p(t){var e,n,i,s;return t.x=adjust_lon(t.x-this.long0),gauss.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),s=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=s*n*Math.sin(t.x),t.y=s*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function inverse$p(t){var e,n,i,s,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=hypot(t.x,t.y)){var o=2*Math.atan2(r,this.R2);e=Math.sin(o),n=Math.cos(o),s=Math.asin(n*this.sinc0+t.y*e*this.cosc0/r),i=Math.atan2(t.x*e,r*this.cosc0*n-t.y*this.sinc0*e)}else s=this.phic0,i=0;return t.x=i,t.y=s,gauss.inverse.apply(this,[t]),t.x=adjust_lon(t.x+this.long0),t}var names$p=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$p,forward:forward$p,inverse:inverse$p,names:names$p};function ssfn_(t,e,n){return e*=n,Math.tan(.5*(HALF_PI+t))*Math.pow((1-e)/(1+e),.5*n)}function init$o(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$o(t){var e=t.x,n=t.y,i=Math.sin(n),s=Math.cos(n),r,o,a,d,_,C,y=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(n+this.lat0)<=EPSLN?(t.x=NaN,t.y=NaN,t):this.sphere?(r=2*this.k0/(1+this.sinlat0*i+this.coslat0*s*Math.cos(y)),t.x=this.a*r*s*Math.sin(y)+this.x0,t.y=this.a*r*(this.coslat0*i-this.sinlat0*s*Math.cos(y))+this.y0,t):(o=2*Math.atan(this.ssfn_(n,i,this.e))-HALF_PI,d=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=EPSLN?(_=tsfnz(this.e,n*this.con,this.con*i),C=2*this.a*this.k0*_/this.cons,t.x=this.x0+C*Math.sin(e-this.long0),t.y=this.y0-this.con*C*Math.cos(e-this.long0),t):(Math.abs(this.sinlat0)<EPSLN?(r=2*this.a*this.k0/(1+d*Math.cos(y)),t.y=r*a):(r=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*d*Math.cos(y))),t.y=r*(this.cosX0*a-this.sinX0*d*Math.cos(y))+this.y0),t.x=r*d*Math.sin(y)+this.x0,t))}function inverse$o(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,s,r,o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=EPSLN?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)):e=adjust_lon(this.long0+Math.atan2(t.x,t.y)):e=adjust_lon(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}else if(Math.abs(this.coslat0)<=EPSLN){if(o<=EPSLN)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),n=this.con*phi2z(this.e,i),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else s=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=EPSLN?r=this.X0:(r=Math.asin(Math.cos(s)*this.sinX0+t.y*Math.sin(s)*this.cosX0/o),e=adjust_lon(this.long0+Math.atan2(t.x*Math.sin(s),o*this.cosX0*Math.cos(s)-t.y*this.sinX0*Math.sin(s)))),n=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+r)));return t.x=e,t.y=n,t}var names$o=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$o,forward:forward$o,inverse:inverse$o,names:names$o,ssfn_};function init$n(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,s=1/i,r=2*s-Math.pow(s,2),o=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),d=Math.log(Math.tan(Math.PI/4+t/2)),_=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*d+this.alpha*o/2*_}function forward$n(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,s=2*(Math.atan(Math.exp(i))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(s)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(s)-Math.sin(this.b0)*Math.cos(s)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function inverse$n(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,s=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(s)+Math.sin(this.b0)*Math.cos(s)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(s))),a=this.lambda0+o/this.alpha,d=0,_=r,C=-1e3,y=0;Math.abs(_-C)>1e-7;){if(++y>20)return;d=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(_))/2)),C=_,_=2*Math.atan(Math.exp(d))-Math.PI/2}return t.x=a,t.y=_,t}var names$n=["somerc"];const somerc={init:init$n,forward:forward$n,inverse:inverse$n,names:names$n};var TOL=1e-7;function isTypeA(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof t.PROJECTION=="object"?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||e.indexOf(n)!==-1}function init$m(){var t,e,n,i,s,r,o,a,d,_,C=0,y,v=0,E=0,S=0,R=0,x=0,T=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var b=!1;"alpha"in this&&(b=!0);var M=!1;if("rectified_grid_angle"in this&&(M=!0),b&&(T=this.alpha),M&&(C=this.rectified_grid_angle*D2R$1),b||M)v=this.longc;else if(E=this.long1,R=this.lat1,S=this.long2,x=this.lat2,Math.abs(R-x)<=TOL||(t=Math.abs(R))<=TOL||Math.abs(t-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(x)-HALF_PI)<=TOL)throw new Error;var N=1-this.es;e=Math.sqrt(N),Math.abs(this.lat0)>EPSLN?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/N),this.A=this.B*this.k0*e/t,i=this.B*e/(n*Math.sqrt(t)),s=i*i-1,s<=0?s=0:(s=Math.sqrt(s),this.lat0<0&&(s=-s)),this.E=s+=i,this.E*=Math.pow(tsfnz(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=s=1),b||M?(b?(y=Math.asin(Math.sin(T)/i),M||(C=T)):(y=C,T=Math.asin(i*Math.sin(y))),this.lam0=v-Math.asin(.5*(s-1/s)*Math.tan(y))/this.B):(r=Math.pow(tsfnz(this.e,R,Math.sin(R)),this.B),o=Math.pow(tsfnz(this.e,x,Math.sin(x)),this.B),s=this.E/r,d=(o-r)/(o+r),_=this.E*this.E,_=(_-o*r)/(_+o*r),t=E-S,t<-Math.pi?S-=TWO_PI:t>Math.pi&&(S+=TWO_PI),this.lam0=adjust_lon(.5*(E+S)-Math.atan(_*Math.tan(.5*this.B*(E-S))/d)/this.B),y=Math.atan(2*Math.sin(this.B*adjust_lon(E-this.lam0))/(s-1/s)),C=T=Math.asin(i*Math.sin(y))),this.singam=Math.sin(y),this.cosgam=Math.cos(y),this.sinrot=Math.sin(C),this.cosrot=Math.cos(C),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(T))),this.lat0<0&&(this.u_0=-this.u_0)),s=.5*y,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-s)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+s))}function forward$m(t){var e={},n,i,s,r,o,a,d,_;if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-HALF_PI)>EPSLN){if(o=this.E/Math.pow(tsfnz(this.e,t.y,Math.sin(t.y)),this.B),a=1/o,n=.5*(o-a),i=.5*(o+a),r=Math.sin(this.B*t.x),s=(n*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(s)-1)<EPSLN)throw new Error;_=.5*this.ArB*Math.log((1-s)/(1+s)),a=Math.cos(this.B*t.x),Math.abs(a)<TOL?d=this.A*t.x:d=this.ArB*Math.atan2(n*this.cosgam+r*this.singam,a)}else _=t.y>0?this.v_pole_n:this.v_pole_s,d=this.ArB*t.y;return this.no_rot?(e.x=d,e.y=_):(d-=this.u_0,e.x=_*this.cosrot+d*this.sinrot,e.y=d*this.cosrot-_*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$m(t){var e,n,i,s,r,o,a,d={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),s=.5*(i-1/i),r=.5*(i+1/i),o=Math.sin(this.BrA*e),a=(o*this.cosgam+s*this.singam)/r,Math.abs(Math.abs(a)-1)<EPSLN)d.x=0,d.y=a<0?-HALF_PI:HALF_PI;else{if(d.y=this.E/Math.sqrt((1+a)/(1-a)),d.y=phi2z(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(s*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return d.x+=this.lam0,d}var names$m=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$m,forward:forward$m,inverse:inverse$m,names:names$m};function init$l(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=msfnz(this.e,e,n),s=tsfnz(this.e,this.lat1,e),r=Math.sin(this.lat2),o=Math.cos(this.lat2),a=msfnz(this.e,r,o),d=tsfnz(this.e,this.lat2,r),_=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(i/a)/Math.log(s/d):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(s,this.ns)),this.rh=this.a*this.f0*Math.pow(_,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$l(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=EPSLN&&(n=sign(n)*(HALF_PI-2*EPSLN));var i=Math.abs(Math.abs(n)-HALF_PI),s,r;if(i>EPSLN)s=tsfnz(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(s,this.ns);else{if(i=n*this.ns,i<=0)return null;r=0}var o=this.ns*adjust_lon(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t}function inverse$l(t){var e,n,i,s,r,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var d=0;if(e!==0&&(d=Math.atan2(n*o,n*a)),e!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),s=phi2z(this.e,i),s===-9999)return null}else s=-HALF_PI;return r=adjust_lon(d/this.ns+this.long0),t.x=r,t.y=s,t}var names$l=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$l,forward:forward$l,inverse:inverse$l,names:names$l};function init$k(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$k(t){var e,n,i,s,r,o,a,d=t.x,_=t.y,C=adjust_lon(d-this.long0);return e=Math.pow((1+this.e*Math.sin(_))/(1-this.e*Math.sin(_)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(_/2+this.s45),this.alfa)/e)-this.s45),i=-C*this.alfa,s=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),r=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(s)),o=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(s/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function inverse$k(t){var e,n,i,s,r,o,a,d,_=t.x;t.x=t.y,t.y=_,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x),s=r/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(s)),n=Math.asin(Math.cos(i)*Math.sin(s)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,d=0;var C=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(d=1),a=t.y,C+=1;while(d===0&&C<15);return C>=15?null:t}var names$k=["Krovak","krovak"];const krovak={init:init$k,forward:forward$k,inverse:inverse$k,names:names$k};function mlfn(t,e,n,i,s){return t*s-e*Math.sin(2*s)+n*Math.sin(4*s)-i*Math.sin(6*s)}function e0fn(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function e1fn(t){return .375*t*(1+.25*t*(1+.46875*t))}function e2fn(t){return .05859375*t*t*(1+.75*t)}function e3fn(t){return t*t*t*(35/3072)}function gN(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function adjust_lat(t){return Math.abs(t)<HALF_PI?t:t-sign(t)*Math.PI}function imlfn(t,e,n,i,s){var r,o;r=t/e;for(var a=0;a<15;a++)if(o=(t-(e*r-n*Math.sin(2*r)+i*Math.sin(4*r)-s*Math.sin(6*r)))/(e-2*n*Math.cos(2*r)+4*i*Math.cos(4*r)-6*s*Math.cos(6*r)),r+=o,Math.abs(o)<=1e-10)return r;return NaN}function init$j(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$j(t){var e,n,i=t.x,s=t.y;if(i=adjust_lon(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(s)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(s),Math.cos(i))-this.lat0);else{var r=Math.sin(s),o=Math.cos(s),a=gN(this.a,this.e,r),d=Math.tan(s)*Math.tan(s),_=i*Math.cos(s),C=_*_,y=this.es*o*o/(1-this.es),v=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,s);e=a*_*(1-C*d*(1/6-(8-d+8*y)*C/120)),n=v-this.ml0+a*r/o*C*(.5+(5-d+6*y)*C/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function inverse$j(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,i,s;if(this.sphere){var r=n+this.lat0;i=Math.asin(Math.sin(r)*Math.cos(e)),s=Math.atan2(Math.tan(e),Math.cos(r))}else{var o=this.ml0/this.a+n,a=imlfn(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-HALF_PI)<=EPSLN)return t.x=this.long0,t.y=HALF_PI,n<0&&(t.y*=-1),t;var d=gN(this.a,this.e,Math.sin(a)),_=d*d*d/this.a/this.a*(1-this.es),C=Math.pow(Math.tan(a),2),y=e*this.a/d,v=y*y;i=a-d*Math.tan(a)/_*y*y*(.5-(1+3*C)*y*y/24),s=y*(1-v*(C/3+(1+3*C)*C*v/15))/Math.cos(a)}return t.x=adjust_lon(s+this.long0),t.y=adjust_lat(i),t}var names$j=["Cassini","Cassini_Soldner","cass"];const cass={init:init$j,forward:forward$j,inverse:inverse$j,names:names$j};function qsfnz(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$i(){var t=Math.abs(this.lat0);if(Math.abs(t-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$i(t){var e,n,i,s,r,o,a,d,_,C,y=t.x,v=t.y;if(y=adjust_lon(y-this.long0),this.sphere){if(r=Math.sin(v),C=Math.cos(v),i=Math.cos(y),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+C*i:1+this.sinph0*r+this.cosph0*C*i,n<=EPSLN)return null;n=Math.sqrt(2/n),e=n*C*Math.sin(y),n*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*C*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(v+this.lat0)<EPSLN)return null;n=FORTPI-v*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(y),n*=i}}else{switch(a=0,d=0,_=0,i=Math.cos(y),s=Math.sin(y),r=Math.sin(v),o=qsfnz(this.e,r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,d=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:_=1+this.sinb1*a+this.cosb1*d*i;break;case this.EQUIT:_=1+d*i;break;case this.N_POLE:_=HALF_PI+v,o=this.qp-o;break;case this.S_POLE:_=v-HALF_PI,o=this.qp+o;break}if(Math.abs(_)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:_=Math.sqrt(2/_),this.mode===this.OBLIQ?n=this.ymf*_*(this.cosb1*a-this.sinb1*d*i):n=(_=Math.sqrt(2/(1+d*i)))*a*this.ymf,e=this.xmf*_*d*s;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(_=Math.sqrt(o))*s,n=i*(this.mode===this.S_POLE?_:-_)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function inverse$i(t){t.x-=this.x0,t.y-=this.y0;var e=t.x/this.a,n=t.y/this.a,i,s,r,o,a,d,_;if(this.sphere){var C=0,y,v=0;if(y=Math.sqrt(e*e+n*n),s=y*.5,s>1)return null;switch(s=2*Math.asin(s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(v=Math.sin(s),C=Math.cos(s)),this.mode){case this.EQUIT:s=Math.abs(y)<=EPSLN?0:Math.asin(n*v/y),e*=v,n=C*y;break;case this.OBLIQ:s=Math.abs(y)<=EPSLN?this.lat0:Math.asin(C*this.sinph0+n*v*this.cosph0/y),e*=v*this.cosph0,n=(C-Math.sin(s)*this.sinph0)*y;break;case this.N_POLE:n=-n,s=HALF_PI-s;break;case this.S_POLE:s-=HALF_PI;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,n)}else{if(_=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,n*=this.dd,d=Math.sqrt(e*e+n*n),d<EPSLN)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*d/this.rq),r=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(_=r*this.sinb1+n*o*this.cosb1/d,a=this.qp*_,n=d*this.cosb1*r-n*this.sinb1*o):(_=n*o/d,a=this.qp*_,n=d*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),a=e*e+n*n,!a)return t.x=this.long0,t.y=this.lat0,t;_=1-a/this.qp,this.mode===this.S_POLE&&(_=-_)}i=Math.atan2(e,n),s=authlat(Math.asin(_),this.apa)}return t.x=adjust_lon(this.long0+i),t.y=s,t}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(t){var e,n=[];return n[0]=t*P00,e=t*t,n[0]+=e*P01,n[1]=e*P10,e*=t,n[0]+=e*P02,n[1]+=e*P11,n[2]=e*P20,n}function authlat(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var names$i=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$i,forward:forward$i,inverse:inverse$i,names:names$i,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function init$h(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$h(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=qsfnz(this.e3,this.sin_phi),s=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,r=this.ns0*adjust_lon(e-this.long0),o=s*Math.sin(r)+this.x0,a=this.rh-s*Math.cos(r)+this.y0;return t.x=o,t.y=a,t}function inverse$h(t){var e,n,i,s,r,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),s=0,e!==0&&(s=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),r=adjust_lon(s/this.ns0+this.long0),t.x=r,t.y=o,t}function phi1z(t,e){var n,i,s,r,o,a=asinz(.5*e);if(t<EPSLN)return a;for(var d=t*t,_=1;_<=25;_++)if(n=Math.sin(a),i=Math.cos(a),s=t*n,r=1-s*s,o=.5*r*r/i*(e/(1-d)-n/r+.5/t*Math.log((1-s)/(1+s))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var names$h=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$h,forward:forward$h,inverse:inverse$h,names:names$h,phi1z};function init$g(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$g(t){var e,n,i,s,r,o,a,d,_=t.x,C=t.y;return i=adjust_lon(_-this.long0),e=Math.sin(C),n=Math.cos(C),s=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*s,r=1,o>0||Math.abs(o)<=EPSLN?(a=this.x0+this.a*r*n*Math.sin(i)/o,d=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*n*s)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),d=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*s)),t.x=a,t.y=d,t}function inverse$g(t){var e,n,i,s,r,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(s=Math.atan2(e,this.rc),n=Math.sin(s),i=Math.cos(s),o=asinz(i*this.sin_p14+t.y*n*this.cos_p14/e),r=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),r=adjust_lon(this.long0+r)):(o=this.phic0,r=0),t.x=r,t.y=o,t}var names$g=["gnom"];const gnom={init:init$g,forward:forward$g,inverse:inverse$g,names:names$g};function iqsfnz(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var i=Math.asin(.5*e),s,r,o,a,d=0;d<30;d++)if(r=Math.sin(i),o=Math.cos(i),a=t*r,s=Math.pow(1-a*a,2)/(2*o)*(e/(1-t*t)-r/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),i+=s,Math.abs(s)<=1e-10)return i;return NaN}function init$f(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$f(t){var e=t.x,n=t.y,i,s,r=adjust_lon(e-this.long0);if(this.sphere)i=this.x0+this.a*r*Math.cos(this.lat_ts),s=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var o=qsfnz(this.e,Math.sin(n));i=this.x0+this.a*this.k0*r,s=this.y0+this.a*o*.5/this.k0}return t.x=i,t.y=s,t}function inverse$f(t){t.x-=this.x0,t.y-=this.y0;var e,n;return this.sphere?(e=adjust_lon(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=iqsfnz(this.e,2*t.y*this.k0/this.a),e=adjust_lon(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var names$f=["cea"];const cea={init:init$f,forward:forward$f,inverse:inverse$f,names:names$f};function init$e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$e(t){var e=t.x,n=t.y,i=adjust_lon(e-this.long0),s=adjust_lat(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*s,t}function inverse$e(t){var e=t.x,n=t.y;return t.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=adjust_lat(this.lat0+(n-this.y0)/this.a),t}var names$e=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$e,forward:forward$e,inverse:inverse$e,names:names$e};var MAX_ITER$1=20;function init$d(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$d(t){var e=t.x,n=t.y,i,s,r,o=adjust_lon(e-this.long0);if(r=o*Math.sin(n),this.sphere)Math.abs(n)<=EPSLN?(i=this.a*o,s=-1*this.a*this.lat0):(i=this.a*Math.sin(r)/Math.tan(n),s=this.a*(adjust_lat(n-this.lat0)+(1-Math.cos(r))/Math.tan(n)));else if(Math.abs(n)<=EPSLN)i=this.a*o,s=-1*this.ml0;else{var a=gN(this.a,this.e,Math.sin(n))/Math.tan(n);i=a*Math.sin(r),s=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+a*(1-Math.cos(r))}return t.x=i+this.x0,t.y=s+this.y0,t}function inverse$d(t){var e,n,i,s,r,o,a,d,_;if(i=t.x-this.x0,s=t.y-this.y0,this.sphere)if(Math.abs(s+this.a*this.lat0)<=EPSLN)e=adjust_lon(i/this.a+this.long0),n=0;else{o=this.lat0+s/this.a,a=i*i/this.a/this.a+o*o,d=o;var C;for(r=MAX_ITER$1;r;--r)if(C=Math.tan(d),_=-1*(o*(d*C+1)-d-.5*(d*d+a)*C)/((d-o)/C-1),d+=_,Math.abs(_)<=EPSLN){n=d;break}e=adjust_lon(this.long0+Math.asin(i*Math.tan(d)/this.a)/Math.sin(n))}else if(Math.abs(s+this.ml0)<=EPSLN)n=0,e=adjust_lon(this.long0+i/this.a);else{o=(this.ml0+s)/this.a,a=i*i/this.a/this.a+o*o,d=o;var y,v,E,S,R;for(r=MAX_ITER$1;r;--r)if(R=this.e*Math.sin(d),y=Math.sqrt(1-R*R)*Math.tan(d),v=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,d),E=this.e0-2*this.e1*Math.cos(2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),S=v/this.a,_=(o*(y*S+1)-S-.5*y*(S*S+a))/(this.es*Math.sin(2*d)*(S*S+a-2*o*S)/(4*y)+(o-S)*(y*E-2/Math.sin(2*d))-E),d-=_,Math.abs(_)<=EPSLN){n=d;break}y=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=adjust_lon(this.long0+Math.asin(i*y/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var names$d=["Polyconic","poly"];const poly={init:init$d,forward:forward$d,inverse:inverse$d,names:names$d};function init$c(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$c(t){var e,n=t.x,i=t.y,s=i-this.lat0,r=n-this.long0,o=s/SEC_TO_RAD*1e-5,a=r,d=1,_=0;for(e=1;e<=10;e++)d=d*o,_=_+this.A[e]*d;var C=_,y=a,v=1,E=0,S,R,x=0,T=0;for(e=1;e<=6;e++)S=v*C-E*y,R=E*C+v*y,v=S,E=R,x=x+this.B_re[e]*v-this.B_im[e]*E,T=T+this.B_im[e]*v+this.B_re[e]*E;return t.x=T*this.a+this.x0,t.y=x*this.a+this.y0,t}function inverse$c(t){var e,n=t.x,i=t.y,s=n-this.x0,r=i-this.y0,o=r/this.a,a=s/this.a,d=1,_=0,C,y,v=0,E=0;for(e=1;e<=6;e++)C=d*o-_*a,y=_*o+d*a,d=C,_=y,v=v+this.C_re[e]*d-this.C_im[e]*_,E=E+this.C_im[e]*d+this.C_re[e]*_;for(var S=0;S<this.iterations;S++){var R=v,x=E,T,b,M=o,N=a;for(e=2;e<=6;e++)T=R*v-x*E,b=x*v+R*E,R=T,x=b,M=M+(e-1)*(this.B_re[e]*R-this.B_im[e]*x),N=N+(e-1)*(this.B_im[e]*R+this.B_re[e]*x);R=1,x=0;var k=this.B_re[1],G=this.B_im[1];for(e=2;e<=6;e++)T=R*v-x*E,b=x*v+R*E,R=T,x=b,k=k+e*(this.B_re[e]*R-this.B_im[e]*x),G=G+e*(this.B_im[e]*R+this.B_re[e]*x);var Y=k*k+G*G;v=(M*k+N*G)/Y,E=(N*k-M*G)/Y}var q=v,le=E,B=1,D=0;for(e=1;e<=9;e++)B=B*q,D=D+this.D[e]*B;var X=this.lat0+D*SEC_TO_RAD*1e5,ce=this.long0+le;return t.x=ce,t.y=X,t}var names$c=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$c,forward:forward$c,inverse:inverse$c,names:names$c};function init$b(){}function forward$b(t){var e=t.x,n=t.y,i=adjust_lon(e-this.long0),s=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=s,t.y=r,t}function inverse$b(t){t.x-=this.x0,t.y-=this.y0;var e=adjust_lon(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var names$b=["Miller_Cylindrical","mill"];const mill={init:init$b,forward:forward$b,inverse:inverse$b,names:names$b};var MAX_ITER=20;function init$a(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$a(t){var e,n,i=t.x,s=t.y;if(i=adjust_lon(i-this.long0),this.sphere){if(!this.m)s=this.n!==1?Math.asin(this.n*Math.sin(s)):s;else for(var r=this.n*Math.sin(s),o=MAX_ITER;o;--o){var a=(this.m*s+Math.sin(s)-r)/(this.m+Math.cos(s));if(s-=a,Math.abs(a)<EPSLN)break}e=this.a*this.C_x*i*(this.m+Math.cos(s)),n=this.a*this.C_y*s}else{var d=Math.sin(s),_=Math.cos(s);n=this.a*pj_mlfn(s,d,_,this.en),e=this.a*i*_/Math.sqrt(1-this.es*d*d)}return t.x=e,t.y=n,t}function inverse$a(t){var e,n,i,s;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),i=adjust_lon(i+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(t.y/this.a,this.es,this.en),s=Math.abs(e),s<HALF_PI?(s=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*s*s)/(this.a*Math.cos(e)),i=adjust_lon(n)):s-EPSLN<HALF_PI&&(i=this.long0)),t.x=i,t.y=e,t}var names$a=["Sinusoidal","sinu"];const sinu={init:init$a,forward:forward$a,inverse:inverse$a,names:names$a};function init$9(){}function forward$9(t){for(var e=t.x,n=t.y,i=adjust_lon(e-this.long0),s=n,r=Math.PI*Math.sin(n);;){var o=-(s+Math.sin(s)-r)/(1+Math.cos(s));if(s+=o,Math.abs(o)<EPSLN)break}s/=2,Math.PI/2-Math.abs(n)<EPSLN&&(i=0);var a=.900316316158*this.a*i*Math.cos(s)+this.x0,d=1.4142135623731*this.a*Math.sin(s)+this.y0;return t.x=a,t.y=d,t}function inverse$9(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=adjust_lon(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var s=Math.asin(n);return t.x=i,t.y=s,t}var names$9=["Mollweide","moll"];const moll={init:init$9,forward:forward$9,inverse:inverse$9,names:names$9};function init$8(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$8(t){var e=t.x,n=t.y,i;if(this.sphere)i=this.a*(this.g-n);else{var s=mlfn(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-s)}var r=this.ns*adjust_lon(e-this.long0),o=this.x0+i*Math.sin(r),a=this.y0+this.rh-i*Math.cos(r);return t.x=o,t.y=a,t}function inverse$8(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,n,i,s;this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var r=0;if(n!==0&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere)return s=adjust_lon(this.long0+r/this.ns),i=adjust_lat(this.g-n/this.a),t.x=s,t.y=i,t;var o=this.g-n/this.a;return i=imlfn(o,this.e0,this.e1,this.e2,this.e3),s=adjust_lon(this.long0+r/this.ns),t.x=s,t.y=i,t}var names$8=["Equidistant_Conic","eqdc"];const eqdc={init:init$8,forward:forward$8,inverse:inverse$8,names:names$8};function init$7(){this.R=this.a}function forward$7(t){var e=t.x,n=t.y,i=adjust_lon(e-this.long0),s,r;Math.abs(n)<=EPSLN&&(s=this.x0+this.R*i,r=this.y0);var o=asinz(2*Math.abs(n/Math.PI));(Math.abs(i)<=EPSLN||Math.abs(Math.abs(n)-HALF_PI)<=EPSLN)&&(s=this.x0,n>=0?r=this.y0+Math.PI*this.R*Math.tan(.5*o):r=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),d=a*a,_=Math.sin(o),C=Math.cos(o),y=C/(_+C-1),v=y*y,E=y*(2/_-1),S=E*E,R=Math.PI*this.R*(a*(y-S)+Math.sqrt(d*(y-S)*(y-S)-(S+d)*(v-S)))/(S+d);i<0&&(R=-R),s=this.x0+R;var x=d+y;return R=Math.PI*this.R*(E*x-a*Math.sqrt((S+d)*(d+1)-x*x))/(S+d),n>=0?r=this.y0+R:r=this.y0-R,t.x=s,t.y=r,t}function inverse$7(t){var e,n,i,s,r,o,a,d,_,C,y,v,E;return t.x-=this.x0,t.y-=this.y0,y=Math.PI*this.R,i=t.x/y,s=t.y/y,r=i*i+s*s,o=-Math.abs(s)*(1+r),a=o-2*s*s+i*i,d=-2*o+1+2*s*s+r*r,E=s*s/d+(2*a*a*a/d/d/d-9*o*a/d/d)/27,_=(o-a*a/3/d)/d,C=2*Math.sqrt(-_/3),y=3*E/_/C,Math.abs(y)>1&&(y>=0?y=1:y=-1),v=Math.acos(y)/3,t.y>=0?n=(-C*Math.cos(v+Math.PI/3)-a/3/d)*Math.PI:n=-(-C*Math.cos(v+Math.PI/3)-a/3/d)*Math.PI,Math.abs(i)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(i*i-s*s)+r*r))/2/i),t.x=e,t.y=n,t}var names$7=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$7,forward:forward$7,inverse:inverse$7,names:names$7};function init$6(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$6(t){var e=t.x,n=t.y,i=Math.sin(t.y),s=Math.cos(t.y),r=adjust_lon(e-this.long0),o,a,d,_,C,y,v,E,S,R,x,T,b,M,N,k,G,Y,q,le,B,D,X;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(t.x=this.x0+this.a*(HALF_PI-n)*Math.sin(r),t.y=this.y0-this.a*(HALF_PI-n)*Math.cos(r),t):Math.abs(this.sin_p12+1)<=EPSLN?(t.x=this.x0+this.a*(HALF_PI+n)*Math.sin(r),t.y=this.y0+this.a*(HALF_PI+n)*Math.cos(r),t):(Y=this.sin_p12*i+this.cos_p12*s*Math.cos(r),k=Math.acos(Y),G=k?k/Math.sin(k):1,t.x=this.x0+this.a*G*s*Math.sin(r),t.y=this.y0+this.a*G*(this.cos_p12*i-this.sin_p12*s*Math.cos(r)),t):(o=e0fn(this.es),a=e1fn(this.es),d=e2fn(this.es),_=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(C=this.a*mlfn(o,a,d,_,HALF_PI),y=this.a*mlfn(o,a,d,_,n),t.x=this.x0+(C-y)*Math.sin(r),t.y=this.y0-(C-y)*Math.cos(r),t):Math.abs(this.sin_p12+1)<=EPSLN?(C=this.a*mlfn(o,a,d,_,HALF_PI),y=this.a*mlfn(o,a,d,_,n),t.x=this.x0+(C+y)*Math.sin(r),t.y=this.y0+(C+y)*Math.cos(r),t):(v=i/s,E=gN(this.a,this.e,this.sin_p12),S=gN(this.a,this.e,i),R=Math.atan((1-this.es)*v+this.es*E*this.sin_p12/(S*s)),x=Math.atan2(Math.sin(r),this.cos_p12*Math.tan(R)-this.sin_p12*Math.cos(r)),x===0?q=Math.asin(this.cos_p12*Math.sin(R)-this.sin_p12*Math.cos(R)):Math.abs(Math.abs(x)-Math.PI)<=EPSLN?q=-Math.asin(this.cos_p12*Math.sin(R)-this.sin_p12*Math.cos(R)):q=Math.asin(Math.sin(r)*Math.cos(R)/Math.sin(x)),T=this.e*this.sin_p12/Math.sqrt(1-this.es),b=this.e*this.cos_p12*Math.cos(x)/Math.sqrt(1-this.es),M=T*b,N=b*b,le=q*q,B=le*q,D=B*q,X=D*q,k=E*q*(1-le*N*(1-N)/6+B/8*M*(1-2*N)+D/120*(N*(4-7*N)-3*T*T*(1-7*N))-X/48*M),t.x=this.x0+k*Math.sin(x),t.y=this.y0+k*Math.cos(x),t))}function inverse$6(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,s,r,o,a,d,_,C,y,v,E,S,R,x,T,b,M,N,k,G,Y,q;return this.sphere?(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*HALF_PI*this.a?void 0:(n=e/this.a,i=Math.sin(n),s=Math.cos(n),r=this.long0,Math.abs(e)<=EPSLN?o=this.lat0:(o=asinz(s*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-HALF_PI,Math.abs(a)<=EPSLN?this.lat0>=0?r=adjust_lon(this.long0+Math.atan2(t.x,-t.y)):r=adjust_lon(this.long0-Math.atan2(-t.x,t.y)):r=adjust_lon(this.long0+Math.atan2(t.x*i,e*this.cos_p12*s-t.y*this.sin_p12*i))),t.x=r,t.y=o,t)):(d=e0fn(this.es),_=e1fn(this.es),C=e2fn(this.es),y=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(v=this.a*mlfn(d,_,C,y,HALF_PI),e=Math.sqrt(t.x*t.x+t.y*t.y),E=v-e,o=imlfn(E/this.a,d,_,C,y),r=adjust_lon(this.long0+Math.atan2(t.x,-1*t.y)),t.x=r,t.y=o,t):Math.abs(this.sin_p12+1)<=EPSLN?(v=this.a*mlfn(d,_,C,y,HALF_PI),e=Math.sqrt(t.x*t.x+t.y*t.y),E=e-v,o=imlfn(E/this.a,d,_,C,y),r=adjust_lon(this.long0+Math.atan2(t.x,t.y)),t.x=r,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),x=Math.atan2(t.x,t.y),S=gN(this.a,this.e,this.sin_p12),T=Math.cos(x),b=this.e*this.cos_p12*T,M=-b*b/(1-this.es),N=3*this.es*(1-M)*this.sin_p12*this.cos_p12*T/(1-this.es),k=e/S,G=k-M*(1+M)*Math.pow(k,3)/6-N*(1+3*M)*Math.pow(k,4)/24,Y=1-M*G*G/2-k*G*G*G/6,R=Math.asin(this.sin_p12*Math.cos(G)+this.cos_p12*Math.sin(G)*T),r=adjust_lon(this.long0+Math.asin(Math.sin(x)*Math.sin(G)/Math.cos(R))),q=Math.sin(R),o=Math.atan2((q-this.es*Y*this.sin_p12)*Math.tan(R),q*(1-this.es)),t.x=r,t.y=o,t))}var names$6=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$6,forward:forward$6,inverse:inverse$6,names:names$6};function init$5(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$5(t){var e,n,i,s,r,o,a,d,_=t.x,C=t.y;return i=adjust_lon(_-this.long0),e=Math.sin(C),n=Math.cos(C),s=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*s,r=1,(o>0||Math.abs(o)<=EPSLN)&&(a=this.a*r*n*Math.sin(i),d=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*n*s)),t.x=a,t.y=d,t}function inverse$5(t){var e,n,i,s,r,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=asinz(e/this.a),i=Math.sin(n),s=Math.cos(n),o=this.long0,Math.abs(e)<=EPSLN?(a=this.lat0,t.x=o,t.y=a,t):(a=asinz(s*this.sin_p14+t.y*i*this.cos_p14/e),r=Math.abs(this.lat0)-HALF_PI,Math.abs(r)<=EPSLN?(this.lat0>=0?o=adjust_lon(this.long0+Math.atan2(t.x,-t.y)):o=adjust_lon(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=adjust_lon(this.long0+Math.atan2(t.x*i,e*this.cos_p14*s-t.y*this.sin_p14*i)),t.x=o,t.y=a,t))}var names$5=["ortho"];const ortho={init:init$5,forward:forward$5,inverse:inverse$5,names:names$5};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$4(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$4(t){var e={x:0,y:0},n,i,s,r,o,a,d={value:0};if(t.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(t.y)):n=t.y,i=t.x,this.face===FACE_ENUM.TOP)r=HALF_PI-n,i>=FORTPI&&i<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,s=i-HALF_PI):i>HALF_PI+FORTPI||i<=-(HALF_PI+FORTPI)?(d.value=AREA_ENUM.AREA_1,s=i>0?i-SPI:i+SPI):i>-(HALF_PI+FORTPI)&&i<=-FORTPI?(d.value=AREA_ENUM.AREA_2,s=i+HALF_PI):(d.value=AREA_ENUM.AREA_3,s=i);else if(this.face===FACE_ENUM.BOTTOM)r=HALF_PI+n,i>=FORTPI&&i<=HALF_PI+FORTPI?(d.value=AREA_ENUM.AREA_0,s=-i+HALF_PI):i<FORTPI&&i>=-FORTPI?(d.value=AREA_ENUM.AREA_1,s=-i):i<-FORTPI&&i>=-(HALF_PI+FORTPI)?(d.value=AREA_ENUM.AREA_2,s=-i-HALF_PI):(d.value=AREA_ENUM.AREA_3,s=i>0?-i+SPI:-i-SPI);else{var _,C,y,v,E,S,R;this.face===FACE_ENUM.RIGHT?i=qsc_shift_lon_origin(i,+HALF_PI):this.face===FACE_ENUM.BACK?i=qsc_shift_lon_origin(i,+SPI):this.face===FACE_ENUM.LEFT&&(i=qsc_shift_lon_origin(i,-HALF_PI)),v=Math.sin(n),E=Math.cos(n),S=Math.sin(i),R=Math.cos(i),_=E*R,C=E*S,y=v,this.face===FACE_ENUM.FRONT?(r=Math.acos(_),s=qsc_fwd_equat_face_theta(r,y,C,d)):this.face===FACE_ENUM.RIGHT?(r=Math.acos(C),s=qsc_fwd_equat_face_theta(r,y,-_,d)):this.face===FACE_ENUM.BACK?(r=Math.acos(-_),s=qsc_fwd_equat_face_theta(r,y,-C,d)):this.face===FACE_ENUM.LEFT?(r=Math.acos(-C),s=qsc_fwd_equat_face_theta(r,y,_,d)):(r=s=0,d.value=AREA_ENUM.AREA_0)}return a=Math.atan(12/SPI*(s+Math.acos(Math.sin(s)*Math.cos(FORTPI))-HALF_PI)),o=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(s))))),d.value===AREA_ENUM.AREA_1?a+=HALF_PI:d.value===AREA_ENUM.AREA_2?a+=SPI:d.value===AREA_ENUM.AREA_3&&(a+=1.5*SPI),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,t.x=e.x,t.y=e.y,t}function inverse$4(t){var e={lam:0,phi:0},n,i,s,r,o,a,d,_,C,y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),n=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=AREA_ENUM.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=AREA_ENUM.AREA_1,n-=HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=AREA_ENUM.AREA_2,n=n<0?n+SPI:n-SPI):(y.value=AREA_ENUM.AREA_3,n+=HALF_PI),C=SPI/12*Math.tan(n),o=Math.sin(C)/(Math.cos(C)-1/Math.sqrt(2)),a=Math.atan(o),s=Math.cos(n),r=Math.tan(i),d=1-s*s*r*r*(1-Math.cos(Math.atan(1/Math.cos(a)))),d<-1?d=-1:d>1&&(d=1),this.face===FACE_ENUM.TOP)_=Math.acos(d),e.phi=HALF_PI-_,y.value===AREA_ENUM.AREA_0?e.lam=a+HALF_PI:y.value===AREA_ENUM.AREA_1?e.lam=a<0?a+SPI:a-SPI:y.value===AREA_ENUM.AREA_2?e.lam=a-HALF_PI:e.lam=a;else if(this.face===FACE_ENUM.BOTTOM)_=Math.acos(d),e.phi=_-HALF_PI,y.value===AREA_ENUM.AREA_0?e.lam=-a+HALF_PI:y.value===AREA_ENUM.AREA_1?e.lam=-a:y.value===AREA_ENUM.AREA_2?e.lam=-a-HALF_PI:e.lam=a<0?-a-SPI:-a+SPI;else{var v,E,S;v=d,C=v*v,C>=1?S=0:S=Math.sqrt(1-C)*Math.sin(a),C+=S*S,C>=1?E=0:E=Math.sqrt(1-C),y.value===AREA_ENUM.AREA_1?(C=E,E=-S,S=C):y.value===AREA_ENUM.AREA_2?(E=-E,S=-S):y.value===AREA_ENUM.AREA_3&&(C=E,E=S,S=-C),this.face===FACE_ENUM.RIGHT?(C=v,v=-E,E=C):this.face===FACE_ENUM.BACK?(v=-v,E=-E):this.face===FACE_ENUM.LEFT&&(C=v,v=E,E=-C),e.phi=Math.acos(-S)-HALF_PI,e.lam=Math.atan2(E,v),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var R,x,T;R=e.phi<0?1:0,x=Math.tan(e.phi),T=this.b/Math.sqrt(x*x+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-T*T)/(this.one_minus_f*T)),R&&(e.phi=-e.phi)}return e.lam+=this.long0,t.x=e.lam,t.y=e.phi,t}function qsc_fwd_equat_face_theta(t,e,n,i){var s;return t<EPSLN?(i.value=AREA_ENUM.AREA_0,s=0):(s=Math.atan2(e,n),Math.abs(s)<=FORTPI?i.value=AREA_ENUM.AREA_0:s>FORTPI&&s<=HALF_PI+FORTPI?(i.value=AREA_ENUM.AREA_1,s-=HALF_PI):s>HALF_PI+FORTPI||s<=-(HALF_PI+FORTPI)?(i.value=AREA_ENUM.AREA_2,s=s>=0?s-SPI:s+SPI):(i.value=AREA_ENUM.AREA_3,s+=HALF_PI)),s}function qsc_shift_lon_origin(t,e){var n=t+e;return n<-SPI?n+=TWO_PI:n>+SPI&&(n-=TWO_PI),n}var names$4=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$4,forward:forward$4,inverse:inverse$4,names:names$4};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},poly3_der=function(t,e){return t[1]+e*(2*t[2]+e*3*t[3])};function newton_rapshon(t,e,n,i){for(var s=e;i;--i){var r=t(s);if(s-=r,Math.abs(r)<n)break}return s}function init$3(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$3(t){var e=adjust_lon(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*C1);i<0?i=0:i>=NODES&&(i=NODES-1),n=R2D*(n-RC1*i);var s={x:poly3_val(COEFS_X[i],n)*e,y:poly3_val(COEFS_Y[i],n)};return t.y<0&&(s.y=-s.y),s.x=s.x*this.a*FXC+this.x0,s.y=s.y*this.a*FYC+this.y0,s}function inverse$3(t){var e={x:(t.x-this.x0)/(this.a*FXC),y:Math.abs(t.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=t.y<0?-HALF_PI:HALF_PI;else{var n=Math.floor(e.y*NODES);for(n<0?n=0:n>=NODES&&(n=NODES-1);;)if(COEFS_Y[n][0]>e.y)--n;else if(COEFS_Y[n+1][0]<=e.y)++n;else break;var i=COEFS_Y[n],s=5*(e.y-i[0])/(COEFS_Y[n+1][0]-i[0]);s=newton_rapshon(function(r){return(poly3_val(i,r)-e.y)/poly3_der(i,r)},s,EPSLN,100),e.x/=poly3_val(COEFS_X[n],s),e.y=(5*n+s)*D2R$1,t.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$3=["Robinson","robin"];const robin={init:init$3,forward:forward$3,inverse:inverse$3,names:names$3};function init$2(){this.name="geocent"}function forward$2(t){var e=geodeticToGeocentric(t,this.es,this.a);return e}function inverse$2(t){var e=geocentricToGeodetic(t,this.es,this.a,this.b);return e}var names$2=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$2,forward:forward$2,inverse:inverse$2,names:names$2};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$1(){if(Object.keys(params).forEach((function(n){if(typeof this[n]>"u")this[n]=params[n].def;else{if(params[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);params[n].num&&(this[n]=parseFloat(this[n]))}params[n].degrees&&(this[n]=this[n]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function forward$1(t){t.x-=this.long0;var e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),s,r;switch(this.mode){case mode.OBLIQ:r=this.sinph0*e+this.cosph0*n*i;break;case mode.EQUIT:r=n*i;break;case mode.S_POLE:r=-e;break;case mode.N_POLE:r=e;break}switch(r=this.pn1/(this.p-r),s=r*n*Math.sin(t.x),this.mode){case mode.OBLIQ:r*=this.cosph0*e-this.sinph0*n*i;break;case mode.EQUIT:r*=e;break;case mode.N_POLE:r*=-(n*i);break;case mode.S_POLE:r*=n*i;break}var o,a;return o=r*this.cg+s*this.sg,a=1/(o*this.sw*this.h1+this.cw),s=(s*this.cg-r*this.sg)*this.cw*a,r=o*a,t.x=s*this.a,t.y=r*this.a,t}function inverse$1(t){t.x/=this.a,t.y/=this.a;var e={x:t.x,y:t.y},n,i,s;s=1/(this.pn1-t.y*this.sw),n=this.pn1*t.x*s,i=this.pn1*t.y*this.cw*s,t.x=n*this.cg+i*this.sg,t.y=i*this.cg-n*this.sg;var r=hypot(t.x,t.y);if(Math.abs(r)<EPSLN)e.x=0,e.y=t.y;else{var o,a;switch(a=1-r*r*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/r+r/this.pn1),o=Math.sqrt(1-a*a),this.mode){case mode.OBLIQ:e.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/r),t.y=(o-this.sinph0*Math.sin(e.y))*r,t.x*=a*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(t.y*a/r),t.y=o*r,t.x*=a;break;case mode.N_POLE:e.y=Math.asin(o),t.y=-t.y;break;case mode.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(t.x,t.y)}return t.x=e.x+this.long0,t.y=e.y,t}var names$1=["Tilted_Perspective","tpers"];const tpers={init:init$1,forward:forward$1,inverse:inverse$1,names:names$1};function init(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward(t){var e=t.x,n=t.y,i,s,r,o;if(e=e-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var a=this.radius_p/hypot(this.radius_p*Math.cos(n),Math.sin(n));if(s=a*Math.cos(e)*Math.cos(n),r=a*Math.sin(e)*Math.cos(n),o=a*Math.sin(n),(this.radius_g-s)*s-r*r-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/hypot(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(r/i),t.y=this.radius_g_1*Math.atan(o/hypot(r,i)))}else this.shape==="sphere"&&(i=Math.cos(n),s=Math.cos(e)*i,r=Math.sin(e)*i,o=Math.sin(n),i=this.radius_g-s,this.flip_axis?(t.x=this.radius_g_1*Math.atan(r/hypot(o,i)),t.y=this.radius_g_1*Math.atan(o/i)):(t.x=this.radius_g_1*Math.atan(r/i),t.y=this.radius_g_1*Math.atan(o/hypot(r,i))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function inverse(t){var e=-1,n=0,i=0,s,r,o,a;if(t.x=t.x/this.a,t.y=t.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*hypot(1,i)):(n=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*hypot(1,n));var d=i/this.radius_p;if(s=n*n+d*d+e*e,r=2*this.radius_g*e,o=r*r-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-r-Math.sqrt(o))/(2*s),e=this.radius_g+a*e,n*=a,i*=a,t.x=Math.atan2(n,e),t.y=Math.atan(i*Math.cos(t.x)/e),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(t.y/this.radius_g_1),n=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(t.x/this.radius_g_1),i=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+n*n)),s=n*n+i*i+e*e,r=2*this.radius_g*e,o=r*r-4*s*this.C,o<0)return t.x=Number.NaN,t.y=Number.NaN,t;a=(-r-Math.sqrt(o))/(2*s),e=this.radius_g+a*e,n*=a,i*=a,t.x=Math.atan2(n,e),t.y=Math.atan(i*Math.cos(t.x)/e)}return t.x=t.x+this.long0,t}var names=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init,forward,inverse,names};function includedProjections(t){t.Proj.projections.add(tmerc),t.Proj.projections.add(etmerc),t.Proj.projections.add(utm),t.Proj.projections.add(sterea),t.Proj.projections.add(stere),t.Proj.projections.add(somerc),t.Proj.projections.add(omerc),t.Proj.projections.add(lcc),t.Proj.projections.add(krovak),t.Proj.projections.add(cass),t.Proj.projections.add(laea),t.Proj.projections.add(aea),t.Proj.projections.add(gnom),t.Proj.projections.add(cea),t.Proj.projections.add(eqc),t.Proj.projections.add(poly),t.Proj.projections.add(nzmg),t.Proj.projections.add(mill),t.Proj.projections.add(sinu),t.Proj.projections.add(moll),t.Proj.projections.add(eqdc),t.Proj.projections.add(vandg),t.Proj.projections.add(aeqd),t.Proj.projections.add(ortho),t.Proj.projections.add(qsc),t.Proj.projections.add(robin),t.Proj.projections.add(geocent),t.Proj.projections.add(tpers),t.Proj.projections.add(geos)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$2=LoggerByDefault.getLogger("CRS");function register(t){const e=Object.keys(t.defs);logger$2.trace("proj. codes :",e);const n=e.length;let i,s;for(i=0;i<n;++i){const r=e[i];if(!get$2(r)){const o=t.defs(r);addProjection(new Projection$1({code:r,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:o.units}))}}for(i=0;i<n;++i){const r=e[i],o=get$2(r);for(s=0;s<n;++s){const a=e[s],d=get$2(a);if(!get$3(r,a))if(t.defs[r]===t.defs[a])addEquivalentProjections([o,d]);else{const _=t(r,a);addCoordinateTransforms(o,d,_.forward,_.inverse)}}}}var Register={isLoaded:!1,get:function(t){if(!(t===""||t===null||typeof t>"u")){var e=t.split(":");if(e.length===2){var n=e[0],i=e[1];if(this.hasOwnProperty(n)&&this[n].hasOwnProperty(i))return this[n][i]}}},exist:function(t){if(t===""||t===null||typeof t>"u")return!1;var e=t.split(":");if(e.length!==2)return!1;var n=e[0],i=e[1];return!(!this.hasOwnProperty(n)||!this[n].hasOwnProperty(i))},load:function(t){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],n=0;n<e.length;n++){var i=e[n],s=this[i];for(var r in s)if(s.hasOwnProperty(r)){var o=i+":"+r;t.defs(o,this.get(o))}}this.isLoaded=!0}},loadByDefault:function(t){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];for(var s in i)if(i.hasOwnProperty(s)){var r=n+":"+s;t.defs(r,i[s])}}},loadByName:function(t,e){if(!this.exist(e))return!1;try{t.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$1=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$1.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(t){logger$1.error(t)}}},loadByDefault:function(){if(logger$1.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(t){logger$1.error(t)}}},loadByName:function(t){if(logger$1.trace("Loading a custom definition projection : ",t),!Register.isLoaded){Register.loadByName(proj4,t);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$1.error(e)}}},overload:function(){logger$1.trace("Loading projections aera (extent)");for(var t in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(t)){var e=this.projectionsExtent[t],n=get$2(t),i=getTransform("EPSG:4326",n),s=applyTransform([e.bottom,e.right,e.top,e.left],i);n.setExtent(s),addProjection(n),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(n)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_services=["WMTS","WMS"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async t=>{clear(),controller=new AbortController;let e=new URL(m_url),n={text:t,fields:m_fields,size:m_size};Object.keys(n).forEach(a=>e.searchParams.append(a,n[a]));var i=await fetch(e,{}),s=await i.json();if(i.status!==200)throw new Error(i.message);if(!(!s||s.length===0)){for(let a=0;a<s.length;a++){const d=s[a];var r=m_services.length===0||m_services.includes(d.source.type);if(r){if(unique().length>=m_maximumResponses)break;var o={name:d.source.layer_name,title:d.source.title,description:d.source.description,service:d.source.type,url:d.source.url};m_suggestions.push(o)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((t,e,n)=>e===n.findIndex(i=>i.service===t.service&&i.name===t.name&&i.title===t.title&&i.description===t.description)),clear=()=>{controller.abort(),m_suggestions=[]},getSuggestions=()=>unique(),getNames=()=>unique().map(t=>t.name),getTitles=()=>unique().map(t=>t.title),setIndex=t=>{m_index=t},setFields=t=>{m_fields=t},setSize=t=>{m_size=parseInt(t)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=t=>{m_maximumResponses=parseInt(t)},setFiltersByService=t=>{m_services=t===""?[]:t.split(",")},Search={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService};var SearchEngineDOM={_addUID:function(t){var e=this._uid?t+"-"+this._uid:t;return e},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPsearchEngine"),t.className="GPwidget gpf-widget",t},_createShowSearchEnginePictoElement:function(t){var e=this,n=document.createElement("button");return n.id=this._addUID("GPshowSearchEnginePicto"),n.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",n.title="Afficher/masquer la recherche par lieux",n.setAttribute("tabindex","0"),n.setAttribute("aria-pressed",t),n.disabled=t,n.addEventListener("click",function(i){var s=i.target.ariaPressed==="true";i.target.setAttribute("aria-pressed",!s),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var r=document.getElementById(e._addUID("GPshowAdvancedSearch"));r&&(r.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var o=document.getElementById(e._addUID("GPshowGeolocate"));o&&(o.style.display=null);var a=document.getElementById(e._addUID("GPshowSearchByCoordinate"));a&&(a.style.display=null);var d="#GPsearchInput-"+e._uid;document.querySelector(d+" input").disabled=!1,e.onShowSearchEngineClick()}),n},_createSearchInputElement:function(t){var e=this,n=document.createElement("form");n.id=this._addUID("GPsearchInput"),n.className="gpf-panel__content fr-modal__content",n.addEventListener("submit",function(s){return s.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(s)),!1});var i=document.createElement("input");return i.id=this._addUID("GPsearchInputText"),i.className="GPsearchInputText gpf-input fr-input",i.type="text",i.placeholder=t,i.autocomplete="off",i.addEventListener("keyup",function(s){var r=s.which||s.keyCode;r===13||r===10||r===38||r===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),i.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(s))}),i.addEventListener("keydown",function(s){var r=s.which||s.keyCode,o=document.getElementById(e._addUID("GPautocompleteResults"));if(o){var a=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items current"),d=o.getElementsByClassName("GPautoCompleteProposal gpf-panel__items"),_=d.length;if(_){var C=null;if(a.length)C=a[0];else{C=d[0],C.className="GPautoCompleteProposal gpf-panel__items current",C.style.color="#000000",C.style["background-color"]="#CEDBEF";return}var y=parseInt(SelectorID.index(C.id),10),v=y===_-1?d[0]:d[y+1],E=y===0?d[_-1]:d[y-1];switch(C.style["background-color"]="",C.style.color="",E.style["background-color"]="",E.style.color="",v.style["background-color"]="",v.style.color="",r){case 38:C.className="GPautoCompleteProposal gpf-panel__items",E.className="GPautoCompleteProposal gpf-panel__items current",E.style.color="#000000",E.style["background-color"]="#CEDBEF";break;case 40:C.className="GPautoCompleteProposal gpf-panel__items",v.className="GPautoCompleteProposal gpf-panel__items current",v.style.color="#000000",v.style["background-color"]="#CEDBEF";break;case 13:s.preventDefault(),C.click(s);break}C.focus(),C.scrollIntoView()}}}),n.appendChild(i),n},_createSearchResetElement:function(){var t=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(n){document.getElementById(t._addUID("GPsearchInputText")).value="",document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),t.onSearchResetClick()}),e},_createButtonsElement:function(){var t=document.createElement("div");return t.className="GPbuttonsContainer",t},_createShowAdvancedSearchElement:function(){var t=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowAdvancedSearch gpf-btn gpf-btn-icon-search-advanced fr-btn fr-btn--secondary fr-m-1w",e.title="Ouvrir la recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(n){var i=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!i);var s="#GPsearchInput-"+t._uid;i?(document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(s+" input").disabled=!1):(document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(s+" input").disabled=!0),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var t=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary fr-m-1w",e.title="Activer la geolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(n){var i=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!i),t.onShowSearchGeolocateClick()}),e},_createShowSearchByCoordinateElement:function(){var t=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(n){var i=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!i);var s="#GPsearchInput-"+t._uid;i?(document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(s+" input").disabled=!1):(document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(s+" input").disabled=!0),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var t=document.createElement("dialog");return t.id=this._addUID("GPadvancedSearchPanel"),t.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",t},_createAdvancedSearchPanelDivElement:function(){var t=document.createElement("div");return t.className="gpf-panel__body fr-modal__body",t},_createGeocodeResultsElement:function(){var t=document.createElement("dialog");return t.id=this._addUID("GPgeocodeResultsList"),t.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",t.appendChild(this._createGeocodeResultsHeaderElement()),t},_createGeocodeResultsDivElement:function(){var t=document.createElement("div");return t.className="gpf-panel__body fr-modal__body",t},_createAutoCompleteElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPautoCompleteList"),t.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",t},_createCoordinateSearchPanelElement:function(){var t=document.createElement("dialog");return t.id=this._addUID("GPcoordinateSearchPanel"),t.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",t},_createCoordinateSearchPanelDivElement:function(){var t=document.createElement("div");return t.className="gpf-panel__body fr-modal__body",t},_createAutoCompleteListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(n){document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(n){document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var t=document.createElement("select");return t.id=this._addUID("GPautocompleteResultsLocation"),t.className="GPelementHidden gpf-hidden gpf-select",t.size=6,t.autofocus=!0,t},_createAutoCompletedLocationTitleElement(){var t=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="LIEUX & ADRESSES",t.appendChild(e)},_createAutoCompletedLocationElement:function(t,e){var n=this,i=document.getElementById(this._addUID("GPautocompleteResultsLocation")),s=document.createElement("option");s.id=this._addUID("AutoCompletedLocation_"+e),s.className="GPautoCompleteProposal gpf-panel__items";var r=GeocodeUtils.getSuggestedLocationFreeform(t);s.innerHTML=r,s.title=r,s.addEventListener?s.addEventListener("click",function(o){n.onAutoCompletedResultsItemClick(o)},!1):s.attachEvent&&s.attachEvent("onclick",function(o){n.onAutoCompletedResultsItemClick(o)}),i.appendChild(s)},_createSearchedSuggestContainer(){var t=document.createElement("select");return t.id=this._addUID("GPautocompleteResultsSuggest"),t.className="GPelementHidden gpf-hidden gpf-select",t.size=6,t.autofocus=!0,t},_createSearchedSuggestTitleElement(){var t=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="CARTES & DONNÉES",t.appendChild(e)},_createSearchedSuggestElement:function(t,e){var n=this,i=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),s=document.createElement("option");s.id=this._addUID("AutoCompletedSuggest_"+e),s.className="GPautoCompleteProposal gpf-panel__items",s.innerHTML=t.title+" ("+t.service+")",s.dataset.layer=t.name,s.title=t.description,s.addEventListener?s.addEventListener("click",function(r){n.onSearchedResultsItemClick(r)},!1):s.attachEvent&&s.attachEvent("onclick",function(r){n.onSearchedResultsItemClick(r)}),i.appendChild(s)},_createAdvancedSearchPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var n=document.createElement("div");n.className="GPpanelTitle gpf-panel__title fr-modal__title",n.innerHTML="Recherche avancée",e.appendChild(n);var i=document.createElement("button");i.id=this._addUID("GPadvancedSearchClose"),i.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",i.title="Fermer la recherche avancée",i.addEventListener?i.addEventListener("click",function(){var r="#GPsearchInput-"+t._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):i.attachEvent&&i.attachEvent("onclick",function(){var r="#GPsearchInput-"+t._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(t._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var s=document.createElement("span");return s.className="GPelementHidden gpf-visible",s.innerText="Fermer",i.appendChild(s),e.appendChild(i),e},_createAdvancedSearchPanelFormElement:function(t){var e=this,n=document.createElement("form");n.id=this._addUID("GPadvancedSearchForm"),n.className="gpf-panel__content fr-modal__content",n.addEventListener("submit",function(o){o.preventDefault();for(var a=[],d="#GPadvancedSearchFilters-"+e._uid,_=document.querySelectorAll(d+" > div > div > input"),C=0;C<_.length;C++){var y=_[C];a.push({key:y.name,value:y.value})}return e.onGeocodingAdvancedSearchSubmit(o,a),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var i=document.createElement("div");i.className="GPflexInput gpf-flex-column ";var s=document.createElement("label");s.className="GPadvancedSearchCodeLabel gpf-label fr-label",s.innerHTML="Recherche par",i.appendChild(s);var r=this._createAdvancedSearchFormCodeElement(t);return i.appendChild(r),n.appendChild(i),n},_createAdvancedSearchFormCodeElement:function(t){var e=this,n=document.createElement("select");n.id=this._addUID("GPadvancedSearchCode"),n.title="Choisir un type de recherche",n.className="GPadvancedSearchCode gpf-select fr-select",n.addEventListener("change",function(r){e.onGeocodingAdvancedSearchCodeChange(r)},!1),t||(t=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var i=0;i<t.length;i++){var s=document.createElement("option");s.value=t[i].id,s.text=t[i].title,n.appendChild(s)}return n},_createAdvancedSearchFormInputElement:function(){var t=document.createElement("input");return t.type="submit",t.id=this._addUID("GPadvancedSearchSubmit"),t.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary",t.value="Chercher",t},_createAdvancedSearchFormFiltersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchFilters"),t},_createAdvancedSearchFiltersTableElement:function(t,e){var n=document.createElement("div");return n.id=this._addUID(t),e||(n.style.display="none"),n},_createAdvancedSearchFiltersAttributElement:function(t){var e=null,n=t.name,i=t.title,s=t.description,r=t.code,o=t.value,a=document.createElement("div");a.className="GPflexInput gpf-flex-column ";var d=document.createElement("label");d.className="GPadvancedSearchFilterLabel gpf-label fr-label",d.htmlFor=n,d.title=s||i,d.innerHTML=i,a.appendChild(d);var _=document.createElement("input");if(_.id=n,_.className="GPadvancedSearchFilterInput gpf-input fr-input",_.type="text",_.name=n,o)if(Array.isArray(o)){var C=n+"_list";_.setAttribute("list",C);var y=document.createElement("datalist");y.id=C;for(var v=0;v<o.length;++v){var E=document.createElement("option");E.value=o[v],y.appendChild(E)}a.appendChild(y)}else _.value=o;return a.appendChild(_),e=document.getElementById(this._addUID(r)),e?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var n=document.createElement("div");n.className="GPpanelTitle gpf-panel__title fr-modal__title",n.innerHTML="Résultats de la recherche",e.appendChild(n);var i=document.createElement("button");i.id=this._addUID("GPgeocodeResultsClose"),i.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",i.title="Fermer la fenêtre de résultats",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var s=document.createElement("span");return s.className="GPelementHidden gpf-visible",s.innerText="Fermer",i.appendChild(s),e.appendChild(i),e},_createGeocodeResultsListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(n){n.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),t.onGeocodedResultsItemClick(n)},!1):e.attachEvent&&e.attachEvent("onclick",function(n){n.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),t.onGeocodedResultsItemClick(n)}),e},_createGeocodedLocationElement:function(t,e){var n=document.getElementById(this._addUID("GPgeocodeResults")),i=document.createElement("div");i.id=this._addUID("GeocodedLocation_"+e),i.className="GPautoCompleteProposal gpf-panel__items",typeof t=="string"?i.innerHTML=t:i.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(t),n.appendChild(i)},_createCoordinateSearchPanelHeaderElement(){var t=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var n=document.createElement("div");n.className="GPpanelTitle gpf-panel__title fr-modal__title",n.innerHTML="Recherche par coordonnées",e.appendChild(n);var i=document.createElement("button");i.id=this._addUID("GPcoordinateSearchClose"),i.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",i.title="Fermer la recherche par coordonnées",i.addEventListener?i.addEventListener("click",function(){var r="#GPsearchInput-"+t._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(t._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),t.onCoordinateSearchClose()},!1):i.attachEvent&&i.attachEvent("onclick",function(){var r="#GPsearchInput-"+t._uid;document.querySelector(r+" input").disabled=!1,document.getElementById(t._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(t._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),t.onCoordinateSearchClose()});var s=document.createElement("span");return s.className="GPelementHidden gpf-visible",s.innerText="Fermer",i.appendChild(s),e.appendChild(i),e},_createCoordinateSearchPanelFormElement(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(n){return n.preventDefault(),t.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var t=document.createElement("div");return t.className="GPflexInput gpf-flex-column ",t},_createCoordinateSearchSystemsLabelElement(){var t=document.createElement("label");return t.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",t.innerHTML="Système de référence",t},_setCoordinateSearchSystemsSelectElement(t){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,n=document.createElement("select");n.id=this._addUID("GPcoordinateSearchSystem"),n.title="Choisir un système de réference",n.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",n.addEventListener("change",function(o){e.onCoordinateSearchSystemChange(o)});for(var i=0;i<t.length;i++){var s=t[i],r=document.createElement("option");r.value=s.code,r.text=s.label||i,n.appendChild(r)}return n},_createCoordinateSearchUnitsLabelElement(){var t=document.createElement("label");return t.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",t.innerHTML="Unités",t},_setCoordinateSearchUnitsSelectElement(t){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,n=document.createElement("select");n.id=this._addUID("GPcoordinateSearchUnits"),n.title="Choisir un type d'unité",n.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",n.addEventListener("change",function(o){e.onCoordinateSearchUnitsChange(o)});for(var i=0;i<t.length;i++){var s=t[i],r=document.createElement("option");r.value=s.code?s.code:i,r.text=s.label||i,n.appendChild(r)}return n},_setCoordinateSearchLngLabelElement(t){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=t==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(t){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.required="",t){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.type="number",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)",e.type="number";break;case"KM":e.title+=" cartésiennes (en kilomètre)",e.type="number";break}return e},_setCoordinateSearchLngDMSElement(){var t=document.createElement("div");return t.id=this._addUID("GPcoordinateSearchLngDMS"),t.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1" 
                id="GPcoordinatSearchInputSexLonDeg" 
                class="gpf-input fr-input" 
                name="inputSexLonDeg" 
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number" 
                required="" 
                min="0" 
                max="180">
            <label>°</label>
            <input step="1" 
                id="GPcoordinatSearchInputSexLonMin" 
                class="gpf-input fr-input" 
                name="inputSexLonMin" 
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number" 
                required="" 
                min="0" 
                max="59">
            <label>'</label>
            <input step="any" 
                id="GPcoordinatSearchInputSexLonSec" 
                class="gpf-input fr-input" 
                name="inputSexLonSec" 
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number" 
                required="" 
                min="0" 
                max="59.9999">
            <label>"</label>
            <select 
                id="GPcoordinatSearchInputSexLonToward" 
                class="GPselect gpf-select fr-select" 
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,t},_setCoordinateSearchLatLabelElement(t){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=t==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(t){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.required="",t){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.type="number",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)",e.type="number";break;case"KM":e.title+=" cartésiennes (en kilomètre)",e.type="number";break}return e},_setCoordinateSearchLatDMSElement(){var t=document.createElement("div");return t.id=this._addUID("GPcoordinateSearchLatDMS"),t.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1" 
                id="GPcoordinatSearchInputSexLatDeg" 
                class="gpf-input fr-input" 
                name="inputSexLatDeg" 
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number" 
                required="" 
                min="0" 
                max="85">
            <label>°</label>
            <input step="1" 
                id="GPcoordinatSearchInputSexLatMin" 
                class="gpf-input fr-input" 
                name="inputSexLatMin" 
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number" 
                required="" 
                min="0" 
                max="59">
            <label>'</label>
            <input step="any" 
                id="GPcoordinatSearchInputSexLatSec" 
                class="gpf-input fr-input" 
                name="inputSexLatSec" 
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number" 
                required="" 
                min="0" 
                max="59.9999">
            <label>"</label>
            <select 
                id="GPcoordinatSearchInputSexLatToward" 
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,t},_createCoordinateSearchSubmitElement(){var t=document.createElement("input");return t.type="submit",t.id=this._addUID("GPcoordinateSearchSubmit"),t.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary",t.value="Chercher",t}},logger=LoggerByDefault.getLogger("searchengine"),SearchEngine=class rn extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof rn))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e)}getData(){return this._geocodedLocations}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,opened:!1,zoomTo:"",resources:{geocode:"",autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{serviceOptions:{}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode="poi,address"),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions.serviceOptions.url&&Search.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.services&&Search.setFiltersByService(this.options.searchOptions.serviceOptions.services),this.options.searchOptions.serviceOptions.maximumResponses&&Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses),Search.target.addEventListener("suggest",i=>{logger.debug(i),this._fillSearchedSuggestListContainer(i.detail)})),this.collapsed=this.options.collapsed,this._uid=SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var n=this.options.markerStyle;this._markerUrl=Object.keys(Marker).indexOf(n)===-1?Marker.lightOrange:Marker[n],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var n;if(e.resources)if(typeof e.resources=="object"){var i=e.resources.geocode;if(i)if(Array.isArray(i)){var s=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(n=0;n<i.length;n++)s.indexOf(i[n])===-1&&logger.log("[SearchEngine] options.resources.geocode : "+i[n]+" is not a resource for geocode")}else logger.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),i=null;var r=e.resources.autocomplete;if(r)if(Array.isArray(r)){var o=["StreetAddress","PositionOfInterest"];for(n=0;n<r.length;n++)o.indexOf(r[n])===-1&&logger.log("[SearchEngine] options.resources.autocomplete : "+r[n]+" is not a resource for autocomplete")}else logger.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),r=null}else logger.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var n=0;n<e.length;n++)switch(e[n]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],n=this.options.coordinateSearch.systems;if(n)for(var i=0;i<n.length;i++){var s=n[i];this._setSystem(s)}if(this._coordinateSearchSystems.length===0)for(var r=0;r<e.length;r++)this._setSystem(e[r])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},n=this.options.coordinateSearch.units;if(n){for(var i in e)if(e.hasOwnProperty(i)){for(var s=!1,r=0;r<e[i].length;r++)for(var o=e[i][r],a=0;a<n.length;a++){var d=n[a];o.code===d&&(s=!0,this._coordinateSearchUnits[i]||(this._coordinateSearchUnits[i]=[]),this._coordinateSearchUnits[i].push(o))}s||(this._coordinateSearchUnits[i]=e[i])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,n=document.createElement("div");n.className="gp-feature-info-div";var i=document.createElement("input");return i.type="button",i.className="gp-styling-button closer",i.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",n.appendChild(this._popupContent),n.appendChild(i),n}_initContainer(){var e=this._createMainContainerElement(),n=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.opened);e.appendChild(n),this.options.opened&&e.classList.add("gpf-widget-color","gpf-widget-padding");var i=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&i.appendChild(this._createSearchResetElement());var s=this;i.addEventListener?i.addEventListener("click",function(){s.onAutoCompleteInputClick()}):i.attachEvent&&i.attachEvent("onclick",function(){s.onAutoCompleteInputClick()}),e.appendChild(i);var r=this._createButtonsElement();if(e.appendChild(r),this.options.displayButtonAdvancedSearch){var o=this._createShowAdvancedSearchElement();r.appendChild(o);var a=this._createAdvancedSearchPanelElement(),d=this._createAdvancedSearchPanelDivElement(),_=this._createAdvancedSearchPanelHeaderElement(),C=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),y=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var v=this._createAdvancedSearchFormInputElement();C.appendChild(y),C.appendChild(v),d.appendChild(_),d.appendChild(C),a.appendChild(d),e.appendChild(a)}if(this.options.displayButtonGeolocate){var E=this._createShowGeolocateElement();r.appendChild(E)}if(this.options.displayButtonCoordinateSearch){var S=this._createShowSearchByCoordinateElement();r.appendChild(S);var R=this._createCoordinateSearchPanelElement(),x=this._createCoordinateSearchPanelDivElement(),T=this._createCoordinateSearchPanelHeaderElement(),b=this._createCoordinateSearchPanelFormElement(),M=null;M=this._containerSystems=this.__createCoordinateSearchDivElement(),b.appendChild(M);var N=this._createCoordinateSearchSystemsLabelElement(),k=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);M.appendChild(N),M.appendChild(k),M=this._containerUnits=this.__createCoordinateSearchDivElement(),b.appendChild(M);var G=this._createCoordinateSearchUnitsLabelElement(),Y=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);M.appendChild(G),M.appendChild(Y),M=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),b.appendChild(M);var q=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),le=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);M.appendChild(q),M.appendChild(le),M=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),b.appendChild(M);var B=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),D=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);M.appendChild(B),M.appendChild(D);var X=this._createCoordinateSearchSubmitElement();b.appendChild(X),x.appendChild(T),x.appendChild(b),R.appendChild(x),e.appendChild(R)}var ce=this._autocompleteContainer=this._createAutoCompleteElement(),Me=this._createAutoCompleteListElement(),re=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),ie=this._containerResultsSuggest=this._createSearchedSuggestContainer();Me.appendChild(re),Me.appendChild(ie),ce.appendChild(Me),e.appendChild(ce);var J=this._createGeocodeResultsElement(),oe=this._createGeocodeResultsDivElement();J.appendChild(oe);var Be=this._geocodedContainer=this._createGeocodeResultsListElement();return oe.appendChild(Be),e.appendChild(J),e}_setFilter(e){for(var n=this._filterContainer,i=!1,s=0;s<this._advancedSearchCodes.length;s++)if(this._advancedSearchCodes[s].id===e){i=!0;break}if(!i){for(;n.firstChild;)n.removeChild(n.firstChild);return}for(this._currentGeocodingCode=e;n.firstChild;)n.removeChild(n.firstChild);var r=this._advancedSearchFilters[e];if(!(!r||r.length===0)){for(var o=this._createAdvancedSearchFiltersTableElement(e,!0),a=0;a<r.length;a++){var d=this._createAdvancedSearchFiltersAttributElement(r[a]);o.appendChild(d)}return n.appendChild(o),n}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger.log(e);var n={};Helper.assign(n,this.options.autocompleteOptions.serviceOptions),Helper.assign(n,e);var i=this.options.resources.autocomplete;i&&Array.isArray(i)&&(n.type||(n.type=i)),n.apiKey=n.apiKey||this.options.apiKey,typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),logger.log(n),Gp.Services.autoComplete(n)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var n=this._containerResultsLocation;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);if(n.classList.add("GPelementHidden","gpf-hidden"),e.length){n.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),this._createAutoCompletedLocationTitleElement();for(var i=0;i<e.length;i++)this._createAutoCompletedLocationElement(e[i],i)}}}_fillSearchedSuggestListContainer(e){var n=this._containerResultsSuggest;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);if(n.classList.add("GPelementHidden","gpf-hidden"),e.length){n.classList.remove("GPelementHidden","gpf-hidden"),this._createSearchedSuggestTitleElement();for(let i=0;i<e.length;i++){const s=e[i];this._createSearchedSuggestElement(s,i)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger.log(e);var n={};Helper.assign(n,this.options.geocodeOptions.serviceOptions),Helper.assign(n,e);var i=this,s=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",r=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(r){var o=function(_){e.onSuccess.call(i,_),i.options.geocodeOptions.serviceOptions.onSuccess.call(i,_)};n.onSuccess=o}if(s){var a=function(_){e.onFailure.call(i,_),i.options.geocodeOptions.serviceOptions.onFailure.call(i,_)};n.onFailure=a}var d=this.options.resources.geocode;d&&(n.index||(n.index=d)),n.apiKey=n.apiKey||this.options.apiKey,typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0),logger.log(n),Gp.Services.geocode(n)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var n=this._geocodedContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var i=0;i<e.length;i++)logger.log(e[i]),this._createGeocodedLocationElement(e[i],i);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,n){var i=this.getMap().getView();i.setCenter(e),i.setZoom(n)}_setMarker(e,n){var i=this.getMap(),s=this;if(this._marker!=null&&(i.removeOverlay(this._marker),this._marker=null),e){var r=document.createElement("img");r.src=this._markerUrl,r.addEventListener?r.addEventListener("click",function(){s._onResultMarkerSelect(n)}):r.attachEvent&&r.attachEvent("onclick",function(){s._onResultMarkerSelect(n)}),this._marker=new Overlay({position:e,offset:[-25.5,-38],element:r,stopEvent:!1}),i.addOverlay(this._marker)}}_getZoom(e){var n=this.getMap(),i=this.options.zoomTo,s=null;if(typeof i=="function"&&(logger.trace("zoom function"),s=i.call(this,e)),typeof i=="number"&&(logger.trace("zoom level"),s=i),typeof i=="string")if(i==="auto")logger.trace("zoom auto"),s=SearchEngineUtils.zoomToResultsByDefault(e);else{logger.trace("zoom level parsing");var r=parseInt(i,10);isNaN(r)||(logger.trace("zoom parsing"),s=r)}Number.isInteger=Number.isInteger||function(d){return typeof d=="number"&&isFinite(d)&&Math.floor(d)===d},(!s||s===""||!Number.isInteger(s))&&(logger.trace("zoom not found, current zoom..."),s=n.getView().getZoom());var o=n.minZoom,a=n.maxZoom;return s<o&&(logger.trace("zoom level min..."),s=o),s>a&&(logger.trace("zoom level max..."),s=a),logger.trace("zoom",s),s}_onResultMarkerSelect(e){var n=this.getMap(),i="";if(typeof e!="string")if(e.service==="GeocodedLocation"){i="<ul>";var s=e.location.placeAttributes;for(var r in s)s.hasOwnProperty(r)&&r!=="trueGeometry"&&r!=="extraFields"&&r!=="houseNumberInfos"&&r!=="_count"&&(i+="<li>",i+='<span class="gp-attname-others-span">'+r.toUpperCase()+" : </span>",i+=s[r],i+=" </li>");i+=" </ul>"}else e.service==="SuggestedLocation"?i=GeocodeUtils.getSuggestedLocationFreeform(e.location):i="sans informations.";else i=e;this._popupContent.innerHTML=i,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),n.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger.error("crs not defined !");return}if(e.label||(logger.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$2(e.crs)){logger.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var n=0;n<this._coordinateSearchSystems.length;n++){var i=this._coordinateSearchSystems[n];e.crs===i.crs&&logger.info("crs '{}' already configured",i.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(){var e=this.getMap();Interactions.unset(e);var n=this._showSearchEngineButton.ariaPressed;this.collapsed=n!=="true",this.dispatchEvent("change:collapsed"),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var n=this.getMap().getView(),i=n.getProjection().getCode(),s=[e.coords.longitude,e.coords.latitude];if(i!=="EPSG:4326"&&(s=transform$1(s,"EPSG:4326",i)),isNaN(s[0])||isNaN(s[1])){this._setMarker();return}this._setPosition(s,10),this._displayMarker&&this._setMarker(s,"sans information")})}onShowSearchByCoordinateClick(){var e=null,n=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),n=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,n=this._coordinateSearchLatInput.value),!(!e||!n)){var i=[e,n],s=this.getMap().getView(),r=s.getProjection().getCode();if(r!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",r)),isNaN(i[0])||isNaN(i[1])){this._setMarker();return}this._setPosition(i,10),this._displayMarker&&this._setMarker(i,"sans information")}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var n=e.querySelectorAll("[name]");if(n){var i=MathUtils.toInteger(n[0].value),s=MathUtils.toInteger(n[1].value),r=MathUtils.toInteger(n[2].value),o=n[3].options[n[3].selectedIndex].text;return!i||!s||!r||!o?void 0:MathUtils.dmsToDecimal(i,s,r,o)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var n=e.target.value;if(n){if(this._currentGeocodingLocation=n,n.length<3){this._clearSuggestedLocation();return}var i=this.options.autocompleteOptions.triggerGeocode,s=this.options.autocompleteOptions.triggerDelay,r=this;this._requestAutoComplete({text:n,onSuccess:function(a){if(logger.log("request from AutoComplete",a),a){r._suggestedLocations=a.suggestedLocations,r._locationsToBeDisplayed=[];for(var d=0;d<r._suggestedLocations.length;d++){var _=r._suggestedLocations[d];_.position&&_.position.x===0&&_.position.y===0&&_.fullText?r._getGeocodeCoordinatesFromFullText(_,d):r._locationsToBeDisplayed.push(_)}r._fillAutoCompletedLocationListContainer(r._locationsToBeDisplayed),r._triggerHandler&&(clearTimeout(r._triggerHandler),r._triggerHandler=null,logger.warn("Cancel a geocode request !"))}},onFailure:function(a){r._clearSuggestedLocation(),logger.log(a.message),a.message==="No suggestion matching the search"&&i&&(r._triggerHandler&&(clearTimeout(r._triggerHandler),logger.warn("Cancel the last geocode request !")),r._triggerHandler=setTimeout(function(){logger.warn("Launch a geocode request !"),r._requestGeocoding({location:n,onSuccess:function(d){if(logger.log("request from Geocoding",d),d){r._locationsToBeDisplayed=[];for(var _=d.locations,C=0;C<_.length;C++){var y=_[C];y.fullText=GeocodeUtils.getGeocodedLocationFreeform(y),y.position={x:y.position.lon,y:y.position.lat},r._locationsToBeDisplayed.push(y)}r._fillAutoCompletedLocationListContainer(_)}},onFailure:function(d){logger.log(d.message)}})},s))}}),this.options.resources.search&&Search.suggest(n);var o=this.getMap();o.on("click",this._hideSuggestedLocation,this),o.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,n){var i=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(s){logger.log("request from Geocoding (coordinates null)",s),s.locations&&s.locations.length!==0&&s.locations[0].position&&i._suggestedLocations&&i._suggestedLocations[n]&&(i._suggestedLocations[n].position={lon:s.locations[0].position.y,lat:s.locations[0].position.x},i._locationsToBeDisplayed.unshift(i._suggestedLocations[n]),i._fillAutoCompletedLocationListContainer(i._locationsToBeDisplayed))},onFailure:function(){i._suggestedLocations&&i._suggestedLocations[n]&&i._createAutoCompletedLocationElement(i._suggestedLocations[n],n)}})}onAutoCompletedResultsItemClick(e){var n=SelectorID.index(e.target.id);if(logger.log(n),logger.log(this._locationsToBeDisplayed[n]),!!n){var i=[this._locationsToBeDisplayed[n].position.x,this._locationsToBeDisplayed[n].position.y],s={service:"SuggestedLocation",location:this._locationsToBeDisplayed[n]},r=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[n]);this._setLabel(r),this._currentGeocodingLocation=r;var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",a));var d=this._getZoom(s);this._setPosition(i,d),this._displayMarker&&this._setMarker(i,s),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[n]})}}onSearchedResultsItemClick(e){var n=SelectorID.index(e.target.id),i=null,s=Search.getSuggestions()[n];s||(i="No suggestions found !"),this.dispatchEvent({type:"searchengine:search:click",suggest:s,error:new Error(i)})}onGeocodingSearchSubmit(e){var n=e.target[0].value;if(n){this._currentGeocodingLocation=n;var i=this;this._requestGeocoding({query:n,onSuccess:function(s){if(logger.log("request from Geocoding",s),s){var r=s.locations;i._fillGeocodedLocationListContainer(r)}},onFailure:function(s){i._clearGeocodedLocation(),logger.log(s.message)}})}}onGeocodedResultsItemClick(e){var n=SelectorID.index(e.target.id);if(n){var i=[this._geocodedLocations[n].position.lon,this._geocodedLocations[n].position.lat],s={service:"GeocodedLocation",location:this._geocodedLocations[n]},r=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[n]);this._setLabel(r);var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(i=transform$1(i,"EPSG:4326",a));var d=this._getZoom(this.options.zoomTo);this._setPosition(i,d),this._displayMarker&&this._setMarker(i,s),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[n]})}}onGeocodingAdvancedSearchCodeChange(e){logger.log(e);var n=e.target.selectedIndex,i=e.target.options[n].value;i&&this._setFilter(i)}onGeocodingAdvancedSearchSubmit(e,n){if(logger.log(n),!(!n||n.length===0)){for(var i,s={},r=0;r<n.length;r++){var o=n[r];o.value&&(s[o.key]=o.value)}var a=document.getElementById("GPsearchInputText-"+this._uid);i=a.value,this._currentGeocodingCode==="CadastralParcel"&&(i="");var d=this;this._requestGeocoding({query:i,index:this._currentGeocodingCode,filters:s,onSuccess:function(_){if(logger.log(_),_){var C=_.locations;d._fillGeocodedLocationListContainer(C)}},onFailure:function(_){d._clearGeocodedLocation(),logger.log(_.message)}})}}_getCadastralParcelRequestParams(e){var n="",i,s=e.department;s?(i=s.length,i===2?n=s:i===1?n="0"+s:n=s.substring(0,2)):n="__";var r=e.commune;r?(i=r.length,i===3?n+=r:i===2?n+="_"+r:i===1?n+="__"+r:n+=r.substring(0,3)):n+="___";var o=e.insee;o&&o.length===5&&(n=o);var a=e.absorbedCity;a?(i=a.length,i===3?n+=a:i<3?i===2?n+="_"+a:i===1&&(n+="__"+a):n+=a.substring(0,3)):n+="___";var d=e.section;d?(i=d.length,i===2?n+=d:i===1?n+="_"+d:n+=d.substring(0,2)):n+="__";var _=e.number;return _?(i=_.length,i===4?n+=_:i===3?n+="_"+_:i===2?n+="__"+_:i===1?n+="___"+_:n+=_.substring(0,4)):n+="___",logger.log("location : "+n),n}onCoordinateSearchSystemChange(e){var n=e.target.selectedIndex,i=e.target.options[n].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var s=null,r=0;r<this._coordinateSearchSystems.length;++r)if(this._coordinateSearchSystems[r].code===Number(i)){s=this._coordinateSearchSystems[r].type;break}if(!s){logger.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(i)],s!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=s,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[s][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[s])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var n=e.target.selectedIndex,i=e.target.options[n].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=i,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),n=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(n),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),n=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(n)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);const _sfc_main$8={__name:"SearchEngine",props:{visibility:Boolean,searchEngineOptions:Object},setup(t){const e=t,n=inject("map"),i=ref(new SearchEngine(e.searchEngineOptions));return onMounted(()=>{e.visibility&&n.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility||n.removeControl(i.value)}),onUpdated(()=>{e.visibility&&n.addControl(i.value)}),(s,r)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const n=document.createElement("div");n.style.pointerEvents="none",super({element:n,render:e.render,target:e.target}),this.on,this.once,this.un;const i=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const n=e.center,i=e.projection,s=this.getUnits(),r=s=="degrees"?"degrees":"m";let o=getPointResolution(i,e.resolution,n,r);const a=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,d=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let _=a*o,C="";if(s=="degrees"){const M=METERS_PER_UNIT$1.degrees;_*=M,_<M/60?(C="″",o*=3600):_<M?(C="′",o*=60):C="°"}else if(s=="imperial")_<.9144?(C="in",o/=.0254):_<1609.344?(C="ft",o/=.3048):(C="mi",o/=1609.344);else if(s=="nautical")o/=1852,C="NM";else if(s=="metric")_<.001?(C="μm",o*=1e6):_<1?(C="mm",o*=1e3):_<1e3?C="m":(C="km",o/=1e3);else if(s=="us")_<.9144?(C="in",o*=39.37):_<1609.344?(C="ft",o/=.30480061):(C="mi",o/=1609.3472);else throw new Error("Invalid units");let y=3*Math.floor(Math.log(a*o)/Math.log(10)),v,E,S,R,x,T;for(;;){S=Math.floor(y/3);const M=Math.pow(10,S);if(v=LEADING_DIGITS[(y%3+3)%3]*M,E=Math.round(v/o),isNaN(E)){this.element.style.display="none",this.renderedVisible_=!1;return}if(d!==void 0&&E>=d){v=R,E=x,S=T;break}else if(E>=a)break;R=v,x=E,T=S,++y}const b=this.scaleBar_?this.createScaleBar(E,v,C):v.toFixed(S<0?-S:0)+" "+C;this.renderedHTML_!=b&&(this.innerElement_.innerHTML=b,this.renderedHTML_=b),this.renderedWidth_!=E&&(this.innerElement_.style.width=E+"px",this.renderedWidth_=E),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,n,i){const s=this.getScaleForResolution(),r=s<1?Math.round(1/s).toLocaleString()+" : 1":"1 : "+Math.round(s).toLocaleString(),o=this.scaleBarSteps_,a=e/o,d=[this.createMarker("absolute")];for(let C=0;C<o;++C){const y=C%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";d.push(`<div><div class="ol-scale-singlebar ${y}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(C%2===0||o===2?this.createStepText(C,e,!1,n,i):"")+"</div>")}return d.push(this.createStepText(o,e,!0,n,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+r+"</div>":"")+d.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,n,i,s,r){const a=(e===0?0:Math.round(s/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+r),d=e===0?-3:n/this.scaleBarSteps_*-1,_=e===0?0:n/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${d}px;text-align: ${e===0?"left":"center"};min-width: ${_}px;left: ${i?n+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),n=this.dpi_||DEFAULT_DPI,i=1e3/25.4;return e*i*n}render(e){const n=e.frameState;n?this.viewState_=n.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$7={__name:"ScaleLine",props:{visibility:Boolean,scaleLineOptions:Object},setup(t){const e=t,n=inject("map"),i=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&n.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility||n.removeControl(i.value)}),onUpdated(()=>{e.visibility&&n.addControl(i.value)}),(s,r)=>null}},MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const n=e.className!==void 0?e.className:"ol-overviewmap",i=e.tipLabel!==void 0?e.tipLabel:"Overview map",s=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const r=e.label!==void 0?e.label:"›";typeof r=="string"?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=i,a.appendChild(o),a.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const d=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=d,e.layers&&e.layers.forEach(function(b){d.addLayer(b)});const _=document.createElement("div");_.className="ol-overviewmap-box",_.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:_}),this.ovmap_.addOverlay(this.boxOverlay_);const C=n+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),y=this.element;y.className=C,y.appendChild(this.ovmapDiv_),y.appendChild(a);const v=this,E=this.boxOverlay_,S=this.boxOverlay_.getElement(),R=function(b){return{clientX:b.clientX,clientY:b.clientY}},x=function(b){const M=R(b),N=d.getEventCoordinateInternal(M);E.setPosition(N)},T=function(b){const M=d.getEventCoordinateInternal(b);v.getMap().getView().setCenterInternal(M),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",T)};S.addEventListener("mousedown",function(){window.addEventListener("mousemove",x),window.addEventListener("mouseup",T)})}setMap(e){const n=this.getMap();if(e!==n){if(n){const i=n.getView();i&&this.unbindView_(i),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const i=e.getView();i&&(this.bindView_(i),i.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const n=e.oldValue;n&&this.unbindView_(n);const i=this.getMap().getView();this.bindView_(i)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const n=new View({projection:e.getProjection()});this.ovmap_.setView(n)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),n=this.ovmap_;if(!e.isRendered()||!n.isRendered())return;const i=e.getSize(),r=e.getView().calculateExtentInternal(i);if(this.viewExtent_&&equals$1(r,this.viewExtent_))return;this.viewExtent_=r;const o=n.getSize(),d=n.getView().calculateExtentInternal(o),_=n.getPixelFromCoordinateInternal(getTopLeft(r)),C=n.getPixelFromCoordinateInternal(getBottomRight(r)),y=Math.abs(_[0]-C[0]),v=Math.abs(_[1]-C[1]),E=o[0],S=o[1];y<E*MIN_RATIO||v<S*MIN_RATIO||y>E*MAX_RATIO||v>S*MAX_RATIO?this.resetExtent_():containsExtent(d,r)||this.recenter_()}resetExtent_(){const e=this.getMap(),n=this.ovmap_,i=e.getSize(),r=e.getView().calculateExtentInternal(i),o=n.getView(),a=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,d=1/(Math.pow(2,a/2)*MIN_RATIO);scaleFromCenter(r,d),o.fitInternal(fromExtent(r))}recenter_(){const e=this.getMap(),n=this.ovmap_,i=e.getView();n.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const e=this.getMap(),n=this.ovmap_;if(!e.isRendered()||!n.isRendered())return;const i=e.getSize(),s=e.getView(),r=n.getView(),o=this.rotateWithView_?0:-s.getRotation(),a=this.boxOverlay_,d=this.boxOverlay_.getElement(),_=s.getCenterInternal(),C=s.getResolution(),y=r.getResolution(),v=i[0]*C/y,E=i[1]*C/y;if(a.setPosition(_),d){d.style.width=v+"px",d.style.height=E+"px";const S="rotate("+o+"rad)";d.style.transform=S}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const _sfc_main$6={__name:"OverviewMap",props:{visibility:Boolean,overviewMapOptions:Object},setup(t){const e=t,n=inject("map"),i=ref(new OverviewMap(e.overviewMapOptions));return onMounted(()=>{e.visibility&&n.addControl(i.value)}),onBeforeUpdate(()=>{e.visibility||n.removeControl(i.value)}),onUpdated(()=>{e.visibility&&n.addControl(i.value)}),(s,r)=>null}},useControls={OverviewMap:"OverviewMap",SearchEngine:"SearchEngine",ScaleLine:"ScaleLine"},_sfc_main$5={__name:"Control",props:{controlOptions:Array},setup(t){const e=t,n={units:"metric",bar:!1},i={collapsed:!1,opened:!0,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0}},s={className:"ol-overviewmap ol-custom-overviewmap",collapseLabel:"»",label:"«",collapsed:!1,layers:[new TileLayer({source:new OSM})]};return(r,o)=>(openBlock(),createElementBlock(Fragment,null,[createVNode(_sfc_main$8,{visibility:e.controlOptions.includes(unref(useControls).SearchEngine),"search-engine-options":i},null,8,["visibility"]),createVNode(_sfc_main$7,{visibility:e.controlOptions.includes(unref(useControls).ScaleLine),"scale-line-options":n},null,8,["visibility"]),createVNode(_sfc_main$6,{visibility:e.controlOptions.includes(unref(useControls).OverviewMap),"overview-map-options":s},null,8,["visibility"])],64))}},zoom=10,_sfc_main$4=defineComponent({__name:"Carto",setup(t){const e=[-234814.550892,4774562534805e-6],n=[new TileLayer({source:new OSM})],i=Object.values(useControls);return(s,r)=>(openBlock(),createBlock(_sfc_main$a,null,{default:withCtx(()=>[createVNode(_sfc_main$9,{center:e,zoom,layers:n}),createVNode(_sfc_main$5,{"control-options":unref(i)},null,8,["control-options"])]),_:1}))}}),_export_sfc=(t,e)=>{const n=t.__vccOpts||t;for(const[i,s]of e)n[i]=s;return n},_sfc_main$3={};function _sfc_render$3(t,e){return openBlock(),createElementBlock("h1",null,"Catalogue Vue")}const Catalogue=_export_sfc(_sfc_main$3,[["render",_sfc_render$3]]),_sfc_main$2={};function _sfc_render$2(t,e){return openBlock(),createElementBlock("h1",null,"Login Vue")}const Login=_export_sfc(_sfc_main$2,[["render",_sfc_render$2]]),_sfc_main$1={};function _sfc_render$1(t,e){return openBlock(),createElementBlock("h1",null,"Présentation Vue")}const Presentation=_export_sfc(_sfc_main$1,[["render",_sfc_render$1]]),_sfc_main={};function _sfc_render(t,e){return openBlock(),createElementBlock("h1",null,"Accueil Vue")}const Accueil=_export_sfc(_sfc_main,[["render",_sfc_render]]),MAIN_TITLE="Carte.gouv",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/accueil",name:"Accueil",component:Accueil},{path:"/catalogue",name:"Catalogue",component:Catalogue},{path:"/login",name:"Se connecter",component:Login},{path:"/presentation-generale",name:"Présentation générale",component:Presentation},{path:"/tuto",name:"Commencer sur cartes.gouv.fr"},{path:"/a11y-conformite",component:{template:"<div>Conformité RGAA</div>"}},{path:"/mentions-legales",component:{template:"<div>Mentions légales</div>"}},{path:"/donnees-personnelles",component:{template:"<div>Données personnelles</div>"}},{path:"/cookies",component:{template:"<div>cookies</div>"}},{path:"/after",component:{template:"<div>after</div>"}},{path:"/before",component:{template:"<div>before</div>"}},{path:"/_frame",component:{template:"<div>frame</div>"}}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(t=>{if(t.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(t.href),!1;const e=t.meta.title?`${t.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});const RiArrowRightLine={name:"ri-arrow-right-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>'},RiCloseLine={name:"ri-close-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/>'},RiFlagLine={name:"ri-flag-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 16v6H3V3h9.382a1 1 0 01.894.553L14 5h6a1 1 0 011 1v11a1 1 0 01-1 1h-6.382a1 1 0 01-.894-.553L12 16H5zM5 5v9h8.236l1 2H19V7h-6.236l-1-2H5z"/>'},RiHome2Line={name:"ri-home-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/>'},RiHome4Line={name:"ri-home-4-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zm-6-2h5V9.157l-6-5.454-6 5.454V19h5v-6h2v6z"/>'},RiQuestionMark={name:"ri-question-mark",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 19a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 0112 19zm0-17a6 6 0 016 6c0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8a6 6 0 016-6z"/>'},RiRefreshLine={name:"ri-refresh-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},FaUserCircle={name:"fa-user-circle",minX:-51.52,minY:-43.52,width:599.04,height:599.04,raw:'<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/>'},icons=Object.freeze(Object.defineProperty({__proto__:null,FaUserCircle,RiArrowRightLine,RiCloseLine,RiFlagLine,RiHome2Line,RiHome4Line,RiQuestionMark,RiRefreshLine},Symbol.toStringTag,{value:"Module"}));c(...Object.values(icons));createApp(_sfc_main$b).use(router).mount("#app")});export default cn();
