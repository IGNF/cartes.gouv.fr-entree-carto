var $p=Object.defineProperty;var Mf=Ae=>{throw TypeError(Ae)};var Hp=(Ae,e,t)=>e in Ae?$p(Ae,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Ae[e]=t;var Tc=(Ae,e,t)=>Hp(Ae,typeof e!="symbol"?e+"":e,t),tf=(Ae,e,t)=>e.has(Ae)||Mf("Cannot "+t);var hd=(Ae,e,t)=>(tf(Ae,e,"read from private field"),t?t.call(Ae):e.get(Ae)),pd=(Ae,e,t)=>e.has(Ae)?Mf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(Ae):e.set(Ae,t),gd=(Ae,e,t,Oe)=>(tf(Ae,e,"write to private field"),Oe?Oe.call(Ae,t):e.set(Ae,t),t),pc=(Ae,e,t)=>(tf(Ae,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const ke of document.querySelectorAll('link[rel="modulepreload"]'))Oe(ke);new MutationObserver(ke=>{for(const Be of ke)if(Be.type==="childList")for(const Ue of Be.addedNodes)Ue.tagName==="LINK"&&Ue.rel==="modulepreload"&&Oe(Ue)}).observe(document,{childList:!0,subtree:!0});function t(ke){const Be={};return ke.integrity&&(Be.integrity=ke.integrity),ke.referrerPolicy&&(Be.referrerPolicy=ke.referrerPolicy),ke.crossOrigin==="use-credentials"?Be.credentials="include":ke.crossOrigin==="anonymous"?Be.credentials="omit":Be.credentials="same-origin",Be}function Oe(ke){if(ke.ep)return;ke.ep=!0;const Be=t(ke);fetch(ke.href,Be)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(Ae){const e=Object.create(null);for(const t of Ae.split(","))e[t]=1;return t=>t in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=Ae=>Ae.charCodeAt(0)===111&&Ae.charCodeAt(1)===110&&(Ae.charCodeAt(2)>122||Ae.charCodeAt(2)<97),isModelListener=Ae=>Ae.startsWith("onUpdate:"),extend$5=Object.assign,remove=(Ae,e)=>{const t=Ae.indexOf(e);t>-1&&Ae.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Ae,e)=>hasOwnProperty$1.call(Ae,e),isArray$1=Array.isArray,isMap=Ae=>toTypeString(Ae)==="[object Map]",isSet=Ae=>toTypeString(Ae)==="[object Set]",isDate=Ae=>toTypeString(Ae)==="[object Date]",isRegExp=Ae=>toTypeString(Ae)==="[object RegExp]",isFunction$1=Ae=>typeof Ae=="function",isString=Ae=>typeof Ae=="string",isSymbol=Ae=>typeof Ae=="symbol",isObject$1=Ae=>Ae!==null&&typeof Ae=="object",isPromise=Ae=>(isObject$1(Ae)||isFunction$1(Ae))&&isFunction$1(Ae.then)&&isFunction$1(Ae.catch),objectToString=Object.prototype.toString,toTypeString=Ae=>objectToString.call(Ae),toRawType=Ae=>toTypeString(Ae).slice(8,-1),isPlainObject$1=Ae=>toTypeString(Ae)==="[object Object]",isIntegerKey=Ae=>isString(Ae)&&Ae!=="NaN"&&Ae[0]!=="-"&&""+parseInt(Ae,10)===Ae,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=Ae=>{const e=Object.create(null);return t=>e[t]||(e[t]=Ae(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Ae=>Ae.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Ae=>Ae.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(Ae=>Ae.charAt(0).toUpperCase()+Ae.slice(1)),toHandlerKey=cacheStringFunction(Ae=>Ae?`on${capitalize(Ae)}`:""),hasChanged=(Ae,e)=>!Object.is(Ae,e),invokeArrayFns=(Ae,...e)=>{for(let t=0;t<Ae.length;t++)Ae[t](...e)},def=(Ae,e,t,Oe=!1)=>{Object.defineProperty(Ae,e,{configurable:!0,enumerable:!1,writable:Oe,value:t})},looseToNumber=Ae=>{const e=parseFloat(Ae);return isNaN(e)?Ae:e},toNumber=Ae=>{const e=isString(Ae)?Number(Ae):NaN;return isNaN(e)?Ae:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(Ae){if(isArray$1(Ae)){const e={};for(let t=0;t<Ae.length;t++){const Oe=Ae[t],ke=isString(Oe)?parseStringStyle(Oe):normalizeStyle(Oe);if(ke)for(const Be in ke)e[Be]=ke[Be]}return e}else if(isString(Ae)||isObject$1(Ae))return Ae}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Ae){const e={};return Ae.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const Oe=t.split(propertyDelimiterRE);Oe.length>1&&(e[Oe[0].trim()]=Oe[1].trim())}}),e}function normalizeClass(Ae){let e="";if(isString(Ae))e=Ae;else if(isArray$1(Ae))for(let t=0;t<Ae.length;t++){const Oe=normalizeClass(Ae[t]);Oe&&(e+=Oe+" ")}else if(isObject$1(Ae))for(const t in Ae)Ae[t]&&(e+=t+" ");return e.trim()}function normalizeProps(Ae){if(!Ae)return null;let{class:e,style:t}=Ae;return e&&!isString(e)&&(Ae.class=normalizeClass(e)),t&&(Ae.style=normalizeStyle(t)),Ae}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(Ae){return!!Ae||Ae===""}function looseCompareArrays(Ae,e){if(Ae.length!==e.length)return!1;let t=!0;for(let Oe=0;t&&Oe<Ae.length;Oe++)t=looseEqual(Ae[Oe],e[Oe]);return t}function looseEqual(Ae,e){if(Ae===e)return!0;let t=isDate(Ae),Oe=isDate(e);if(t||Oe)return t&&Oe?Ae.getTime()===e.getTime():!1;if(t=isSymbol(Ae),Oe=isSymbol(e),t||Oe)return Ae===e;if(t=isArray$1(Ae),Oe=isArray$1(e),t||Oe)return t&&Oe?looseCompareArrays(Ae,e):!1;if(t=isObject$1(Ae),Oe=isObject$1(e),t||Oe){if(!t||!Oe)return!1;const ke=Object.keys(Ae).length,Be=Object.keys(e).length;if(ke!==Be)return!1;for(const Ue in Ae){const je=Ae.hasOwnProperty(Ue),We=e.hasOwnProperty(Ue);if(je&&!We||!je&&We||!looseEqual(Ae[Ue],e[Ue]))return!1}}return String(Ae)===String(e)}function looseIndexOf(Ae,e){return Ae.findIndex(t=>looseEqual(t,e))}const isRef$1=Ae=>!!(Ae&&Ae.__v_isRef===!0),toDisplayString=Ae=>isString(Ae)?Ae:Ae==null?"":isArray$1(Ae)||isObject$1(Ae)&&(Ae.toString===objectToString||!isFunction$1(Ae.toString))?isRef$1(Ae)?toDisplayString(Ae.value):JSON.stringify(Ae,replacer,2):String(Ae),replacer=(Ae,e)=>isRef$1(e)?replacer(Ae,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[Oe,ke],Be)=>(t[stringifySymbol(Oe,Be)+" =>"]=ke,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>stringifySymbol(t))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,stringifySymbol=(Ae,e="")=>{var t;return isSymbol(Ae)?`Symbol(${(t=Ae.description)!=null?t:e})`:Ae};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let t,Oe;for(t=0,Oe=this.effects.length;t<Oe;t++)this.effects[t].stop();for(this.effects.length=0,t=0,Oe=this.cleanups.length;t<Oe;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,Oe=this.scopes.length;t<Oe;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const ke=this.parent.scopes.pop();ke&&ke!==this&&(this.parent.scopes[this.index]=ke,ke.index=this.index)}this.parent=void 0}}}function effectScope(Ae){return new EffectScope(Ae)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Ae,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(Ae)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(Ae,e=!1){if(Ae.flags|=8,e){Ae.next=batchedComputed,batchedComputed=Ae;return}Ae.next=batchedSub,batchedSub=Ae}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let Ae;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(Oe){Ae||(Ae=Oe)}e=t}}if(Ae)throw Ae}function prepareDeps(Ae){for(let e=Ae.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(Ae){let e,t=Ae.depsTail,Oe=t;for(;Oe;){const ke=Oe.prevDep;Oe.version===-1?(Oe===t&&(t=ke),removeSub(Oe),removeDep(Oe)):e=Oe,Oe.dep.activeLink=Oe.prevActiveLink,Oe.prevActiveLink=void 0,Oe=ke}Ae.deps=e,Ae.depsTail=t}function isDirty(Ae){for(let e=Ae.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!Ae._dirty}function refreshComputed(Ae){if(Ae.flags&4&&!(Ae.flags&16)||(Ae.flags&=-17,Ae.globalVersion===globalVersion))return;Ae.globalVersion=globalVersion;const e=Ae.dep;if(Ae.flags|=2,e.version>0&&!Ae.isSSR&&Ae.deps&&!isDirty(Ae)){Ae.flags&=-3;return}const t=activeSub,Oe=shouldTrack;activeSub=Ae,shouldTrack=!0;try{prepareDeps(Ae);const ke=Ae.fn(Ae._value);(e.version===0||hasChanged(ke,Ae._value))&&(Ae._value=ke,e.version++)}catch(ke){throw e.version++,ke}finally{activeSub=t,shouldTrack=Oe,cleanupDeps(Ae),Ae.flags&=-3}}function removeSub(Ae,e=!1){const{dep:t,prevSub:Oe,nextSub:ke}=Ae;if(Oe&&(Oe.nextSub=ke,Ae.prevSub=void 0),ke&&(ke.prevSub=Oe,Ae.nextSub=void 0),t.subs===Ae&&(t.subs=Oe,!Oe&&t.computed)){t.computed.flags&=-5;for(let Be=t.computed.deps;Be;Be=Be.nextDep)removeSub(Be,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function removeDep(Ae){const{prevDep:e,nextDep:t}=Ae;e&&(e.nextDep=t,Ae.prevDep=void 0),t&&(t.prevDep=e,Ae.nextDep=void 0)}function effect(Ae,e){Ae.effect instanceof ReactiveEffect&&(Ae=Ae.effect.fn);const t=new ReactiveEffect(Ae);e&&extend$5(t,e);try{t.run()}catch(ke){throw t.stop(),ke}const Oe=t.run.bind(t);return Oe.effect=t,Oe}function stop(Ae){Ae.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Ae=trackStack.pop();shouldTrack=Ae===void 0?!0:Ae}function cleanupEffect(Ae){const{cleanup:e}=Ae;if(Ae.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const Oe=t.nextDep;Oe.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=Oe),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=Oe)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{endBatch()}}}function addSub(Ae){if(Ae.dep.sc++,Ae.sub.flags&4){const e=Ae.dep.computed;if(e&&!Ae.dep.subs){e.flags|=20;for(let Oe=e.deps;Oe;Oe=Oe.nextDep)addSub(Oe)}const t=Ae.dep.subs;t!==Ae&&(Ae.prevSub=t,t&&(t.nextSub=Ae)),Ae.dep.subs=Ae}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(Ae,e,t){if(shouldTrack&&activeSub){let Oe=targetMap.get(Ae);Oe||targetMap.set(Ae,Oe=new Map);let ke=Oe.get(t);ke||(Oe.set(t,ke=new Dep),ke.map=Oe,ke.key=t),ke.track()}}function trigger(Ae,e,t,Oe,ke,Be){const Ue=targetMap.get(Ae);if(!Ue){globalVersion++;return}const je=We=>{We&&We.trigger()};if(startBatch(),e==="clear")Ue.forEach(je);else{const We=isArray$1(Ae),Qe=We&&isIntegerKey(t);if(We&&t==="length"){const Cn=Number(Oe);Ue.forEach((An,En)=>{(En==="length"||En===ARRAY_ITERATE_KEY||!isSymbol(En)&&En>=Cn)&&je(An)})}else switch((t!==void 0||Ue.has(void 0))&&je(Ue.get(t)),Qe&&je(Ue.get(ARRAY_ITERATE_KEY)),e){case"add":We?Qe&&je(Ue.get("length")):(je(Ue.get(ITERATE_KEY)),isMap(Ae)&&je(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"delete":We||(je(Ue.get(ITERATE_KEY)),isMap(Ae)&&je(Ue.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Ae)&&je(Ue.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(Ae,e){const t=targetMap.get(Ae);return t&&t.get(e)}function reactiveReadArray(Ae){const e=toRaw(Ae);return e===Ae?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(Ae)?e:e.map(toReactive))}function shallowReadArray(Ae){return track(Ae=toRaw(Ae),"iterate",ARRAY_ITERATE_KEY),Ae}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...Ae){return reactiveReadArray(this).concat(...Ae.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",Ae=>(Ae[1]=toReactive(Ae[1]),Ae))},every(Ae,e){return apply$1(this,"every",Ae,e,void 0,arguments)},filter(Ae,e){return apply$1(this,"filter",Ae,e,t=>t.map(toReactive),arguments)},find(Ae,e){return apply$1(this,"find",Ae,e,toReactive,arguments)},findIndex(Ae,e){return apply$1(this,"findIndex",Ae,e,void 0,arguments)},findLast(Ae,e){return apply$1(this,"findLast",Ae,e,toReactive,arguments)},findLastIndex(Ae,e){return apply$1(this,"findLastIndex",Ae,e,void 0,arguments)},forEach(Ae,e){return apply$1(this,"forEach",Ae,e,void 0,arguments)},includes(...Ae){return searchProxy(this,"includes",Ae)},indexOf(...Ae){return searchProxy(this,"indexOf",Ae)},join(Ae){return reactiveReadArray(this).join(Ae)},lastIndexOf(...Ae){return searchProxy(this,"lastIndexOf",Ae)},map(Ae,e){return apply$1(this,"map",Ae,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...Ae){return noTracking(this,"push",Ae)},reduce(Ae,...e){return reduce(this,"reduce",Ae,e)},reduceRight(Ae,...e){return reduce(this,"reduceRight",Ae,e)},shift(){return noTracking(this,"shift")},some(Ae,e){return apply$1(this,"some",Ae,e,void 0,arguments)},splice(...Ae){return noTracking(this,"splice",Ae)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(Ae){return reactiveReadArray(this).toSorted(Ae)},toSpliced(...Ae){return reactiveReadArray(this).toSpliced(...Ae)},unshift(...Ae){return noTracking(this,"unshift",Ae)},values(){return iterator(this,"values",toReactive)}};function iterator(Ae,e,t){const Oe=shallowReadArray(Ae),ke=Oe[e]();return Oe!==Ae&&!isShallow(Ae)&&(ke._next=ke.next,ke.next=()=>{const Be=ke._next();return Be.value&&(Be.value=t(Be.value)),Be}),ke}const arrayProto=Array.prototype;function apply$1(Ae,e,t,Oe,ke,Be){const Ue=shallowReadArray(Ae),je=Ue!==Ae&&!isShallow(Ae),We=Ue[e];if(We!==arrayProto[e]){const An=We.apply(Ae,Be);return je?toReactive(An):An}let Qe=t;Ue!==Ae&&(je?Qe=function(An,En){return t.call(this,toReactive(An),En,Ae)}:t.length>2&&(Qe=function(An,En){return t.call(this,An,En,Ae)}));const Cn=We.call(Ue,Qe,Oe);return je&&ke?ke(Cn):Cn}function reduce(Ae,e,t,Oe){const ke=shallowReadArray(Ae);let Be=t;return ke!==Ae&&(isShallow(Ae)?t.length>3&&(Be=function(Ue,je,We){return t.call(this,Ue,je,We,Ae)}):Be=function(Ue,je,We){return t.call(this,Ue,toReactive(je),We,Ae)}),ke[e](Be,...Oe)}function searchProxy(Ae,e,t){const Oe=toRaw(Ae);track(Oe,"iterate",ARRAY_ITERATE_KEY);const ke=Oe[e](...t);return(ke===-1||ke===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),Oe[e](...t)):ke}function noTracking(Ae,e,t=[]){pauseTracking(),startBatch();const Oe=toRaw(Ae)[e].apply(Ae,t);return endBatch(),resetTracking(),Oe}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Ae=>Ae!=="arguments"&&Ae!=="caller").map(Ae=>Symbol[Ae]).filter(isSymbol));function hasOwnProperty(Ae){isSymbol(Ae)||(Ae=String(Ae));const e=toRaw(this);return track(e,"has",Ae),e.hasOwnProperty(Ae)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,Oe){if(t==="__v_skip")return e.__v_skip;const ke=this._isReadonly,Be=this._isShallow;if(t==="__v_isReactive")return!ke;if(t==="__v_isReadonly")return ke;if(t==="__v_isShallow")return Be;if(t==="__v_raw")return Oe===(ke?Be?shallowReadonlyMap:readonlyMap:Be?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(Oe)?e:void 0;const Ue=isArray$1(e);if(!ke){let We;if(Ue&&(We=arrayInstrumentations[t]))return We;if(t==="hasOwnProperty")return hasOwnProperty}const je=Reflect.get(e,t,isRef(e)?e:Oe);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(ke||track(e,"get",t),Be)?je:isRef(je)?Ue&&isIntegerKey(t)?je:je.value:isObject$1(je)?ke?readonly(je):reactive(je):je}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,Oe,ke){let Be=e[t];if(!this._isShallow){const We=isReadonly(Be);if(!isShallow(Oe)&&!isReadonly(Oe)&&(Be=toRaw(Be),Oe=toRaw(Oe)),!isArray$1(e)&&isRef(Be)&&!isRef(Oe))return We?!1:(Be.value=Oe,!0)}const Ue=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),je=Reflect.set(e,t,Oe,isRef(e)?e:ke);return e===toRaw(ke)&&(Ue?hasChanged(Oe,Be)&&trigger(e,"set",t,Oe):trigger(e,"add",t,Oe)),je}deleteProperty(e,t){const Oe=hasOwn(e,t);e[t];const ke=Reflect.deleteProperty(e,t);return ke&&Oe&&trigger(e,"delete",t,void 0),ke}has(e,t){const Oe=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),Oe}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=Ae=>Ae,getProto=Ae=>Reflect.getPrototypeOf(Ae);function createIterableMethod(Ae,e,t){return function(...Oe){const ke=this.__v_raw,Be=toRaw(ke),Ue=isMap(Be),je=Ae==="entries"||Ae===Symbol.iterator&&Ue,We=Ae==="keys"&&Ue,Qe=ke[Ae](...Oe),Cn=t?toShallow:e?toReadonly:toReactive;return!e&&track(Be,"iterate",We?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:An,done:En}=Qe.next();return En?{value:An,done:En}:{value:je?[Cn(An[0]),Cn(An[1])]:Cn(An),done:En}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Ae){return function(...e){return Ae==="delete"?!1:Ae==="clear"?void 0:this}}function createInstrumentations(Ae,e){const t={get(ke){const Be=this.__v_raw,Ue=toRaw(Be),je=toRaw(ke);Ae||(hasChanged(ke,je)&&track(Ue,"get",ke),track(Ue,"get",je));const{has:We}=getProto(Ue),Qe=e?toShallow:Ae?toReadonly:toReactive;if(We.call(Ue,ke))return Qe(Be.get(ke));if(We.call(Ue,je))return Qe(Be.get(je));Be!==Ue&&Be.get(ke)},get size(){const ke=this.__v_raw;return!Ae&&track(toRaw(ke),"iterate",ITERATE_KEY),Reflect.get(ke,"size",ke)},has(ke){const Be=this.__v_raw,Ue=toRaw(Be),je=toRaw(ke);return Ae||(hasChanged(ke,je)&&track(Ue,"has",ke),track(Ue,"has",je)),ke===je?Be.has(ke):Be.has(ke)||Be.has(je)},forEach(ke,Be){const Ue=this,je=Ue.__v_raw,We=toRaw(je),Qe=e?toShallow:Ae?toReadonly:toReactive;return!Ae&&track(We,"iterate",ITERATE_KEY),je.forEach((Cn,An)=>ke.call(Be,Qe(Cn),Qe(An),Ue))}};return extend$5(t,Ae?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(ke){!e&&!isShallow(ke)&&!isReadonly(ke)&&(ke=toRaw(ke));const Be=toRaw(this);return getProto(Be).has.call(Be,ke)||(Be.add(ke),trigger(Be,"add",ke,ke)),this},set(ke,Be){!e&&!isShallow(Be)&&!isReadonly(Be)&&(Be=toRaw(Be));const Ue=toRaw(this),{has:je,get:We}=getProto(Ue);let Qe=je.call(Ue,ke);Qe||(ke=toRaw(ke),Qe=je.call(Ue,ke));const Cn=We.call(Ue,ke);return Ue.set(ke,Be),Qe?hasChanged(Be,Cn)&&trigger(Ue,"set",ke,Be):trigger(Ue,"add",ke,Be),this},delete(ke){const Be=toRaw(this),{has:Ue,get:je}=getProto(Be);let We=Ue.call(Be,ke);We||(ke=toRaw(ke),We=Ue.call(Be,ke)),je&&je.call(Be,ke);const Qe=Be.delete(ke);return We&&trigger(Be,"delete",ke,void 0),Qe},clear(){const ke=toRaw(this),Be=ke.size!==0,Ue=ke.clear();return Be&&trigger(ke,"clear",void 0,void 0),Ue}}),["keys","values","entries",Symbol.iterator].forEach(ke=>{t[ke]=createIterableMethod(ke,Ae,e)}),t}function createInstrumentationGetter(Ae,e){const t=createInstrumentations(Ae,e);return(Oe,ke,Be)=>ke==="__v_isReactive"?!Ae:ke==="__v_isReadonly"?Ae:ke==="__v_raw"?Oe:Reflect.get(hasOwn(t,ke)&&ke in Oe?t:Oe,ke,Be)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Ae){switch(Ae){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Ae){return Ae.__v_skip||!Object.isExtensible(Ae)?0:targetTypeMap(toRawType(Ae))}function reactive(Ae){return isReadonly(Ae)?Ae:createReactiveObject(Ae,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Ae){return createReactiveObject(Ae,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Ae){return createReactiveObject(Ae,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(Ae){return createReactiveObject(Ae,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(Ae,e,t,Oe,ke){if(!isObject$1(Ae)||Ae.__v_raw&&!(e&&Ae.__v_isReactive))return Ae;const Be=ke.get(Ae);if(Be)return Be;const Ue=getTargetType(Ae);if(Ue===0)return Ae;const je=new Proxy(Ae,Ue===2?Oe:t);return ke.set(Ae,je),je}function isReactive(Ae){return isReadonly(Ae)?isReactive(Ae.__v_raw):!!(Ae&&Ae.__v_isReactive)}function isReadonly(Ae){return!!(Ae&&Ae.__v_isReadonly)}function isShallow(Ae){return!!(Ae&&Ae.__v_isShallow)}function isProxy(Ae){return Ae?!!Ae.__v_raw:!1}function toRaw(Ae){const e=Ae&&Ae.__v_raw;return e?toRaw(e):Ae}function markRaw(Ae){return!hasOwn(Ae,"__v_skip")&&Object.isExtensible(Ae)&&def(Ae,"__v_skip",!0),Ae}const toReactive=Ae=>isObject$1(Ae)?reactive(Ae):Ae,toReadonly=Ae=>isObject$1(Ae)?readonly(Ae):Ae;function isRef(Ae){return Ae?Ae.__v_isRef===!0:!1}function ref(Ae){return createRef(Ae,!1)}function shallowRef(Ae){return createRef(Ae,!0)}function createRef(Ae,e){return isRef(Ae)?Ae:new RefImpl(Ae,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,Oe=this.__v_isShallow||isShallow(e)||isReadonly(e);e=Oe?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=Oe?e:toReactive(e),this.dep.trigger())}}function triggerRef(Ae){Ae.dep&&Ae.dep.trigger()}function unref(Ae){return isRef(Ae)?Ae.value:Ae}function toValue$1(Ae){return isFunction$1(Ae)?Ae():unref(Ae)}const shallowUnwrapHandlers={get:(Ae,e,t)=>e==="__v_raw"?Ae:unref(Reflect.get(Ae,e,t)),set:(Ae,e,t,Oe)=>{const ke=Ae[e];return isRef(ke)&&!isRef(t)?(ke.value=t,!0):Reflect.set(Ae,e,t,Oe)}};function proxyRefs(Ae){return isReactive(Ae)?Ae:new Proxy(Ae,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Dep,{get:Oe,set:ke}=e(t.track.bind(t),t.trigger.bind(t));this._get=Oe,this._set=ke}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(Ae){return new CustomRefImpl(Ae)}function toRefs(Ae){const e=isArray$1(Ae)?new Array(Ae.length):{};for(const t in Ae)e[t]=propertyToRef(Ae,t);return e}class ObjectRefImpl{constructor(e,t,Oe){this._object=e,this._key=t,this._defaultValue=Oe,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(Ae,e,t){return isRef(Ae)?Ae:isFunction$1(Ae)?new GetterRefImpl(Ae):isObject$1(Ae)&&arguments.length>1?propertyToRef(Ae,e,t):ref(Ae)}function propertyToRef(Ae,e,t){const Oe=Ae[e];return isRef(Oe)?Oe:new ObjectRefImpl(Ae,e,t)}class ComputedRefImpl{constructor(e,t,Oe){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=Oe}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(Ae,e,t=!1){let Oe,ke;return isFunction$1(Ae)?Oe=Ae:(Oe=Ae.get,ke=Ae.set),new ComputedRefImpl(Oe,ke,t)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(Ae,e=!1,t=activeWatcher){if(t){let Oe=cleanupMap.get(t);Oe||cleanupMap.set(t,Oe=[]),Oe.push(Ae)}}function watch$1(Ae,e,t=EMPTY_OBJ){const{immediate:Oe,deep:ke,once:Be,scheduler:Ue,augmentJob:je,call:We}=t,Qe=oi=>ke?oi:isShallow(oi)||ke===!1||ke===0?traverse(oi,1):traverse(oi);let Cn,An,En,Sn,Tn=!1,Dn=!1;if(isRef(Ae)?(An=()=>Ae.value,Tn=isShallow(Ae)):isReactive(Ae)?(An=()=>Qe(Ae),Tn=!0):isArray$1(Ae)?(Dn=!0,Tn=Ae.some(oi=>isReactive(oi)||isShallow(oi)),An=()=>Ae.map(oi=>{if(isRef(oi))return oi.value;if(isReactive(oi))return Qe(oi);if(isFunction$1(oi))return We?We(oi,2):oi()})):isFunction$1(Ae)?e?An=We?()=>We(Ae,2):Ae:An=()=>{if(En){pauseTracking();try{En()}finally{resetTracking()}}const oi=activeWatcher;activeWatcher=Cn;try{return We?We(Ae,3,[Sn]):Ae(Sn)}finally{activeWatcher=oi}}:An=NOOP,e&&ke){const oi=An,ci=ke===!0?1/0:ke;An=()=>traverse(oi(),ci)}const ti=getCurrentScope(),ni=()=>{Cn.stop(),ti&&ti.active&&remove(ti.effects,Cn)};if(Be&&e){const oi=e;e=(...ci)=>{oi(...ci),ni()}}let ii=Dn?new Array(Ae.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const si=oi=>{if(!(!(Cn.flags&1)||!Cn.dirty&&!oi))if(e){const ci=Cn.run();if(ke||Tn||(Dn?ci.some((Pi,Ai)=>hasChanged(Pi,ii[Ai])):hasChanged(ci,ii))){En&&En();const Pi=activeWatcher;activeWatcher=Cn;try{const Ai=[ci,ii===INITIAL_WATCHER_VALUE?void 0:Dn&&ii[0]===INITIAL_WATCHER_VALUE?[]:ii,Sn];We?We(e,3,Ai):e(...Ai),ii=ci}finally{activeWatcher=Pi}}}else Cn.run()};return je&&je(si),Cn=new ReactiveEffect(An),Cn.scheduler=Ue?()=>Ue(si,!1):si,Sn=oi=>onWatcherCleanup(oi,!1,Cn),En=Cn.onStop=()=>{const oi=cleanupMap.get(Cn);if(oi){if(We)We(oi,4);else for(const ci of oi)ci();cleanupMap.delete(Cn)}},e?Oe?si(!0):ii=Cn.run():Ue?Ue(si.bind(null,!0),!0):Cn.run(),ni.pause=Cn.pause.bind(Cn),ni.resume=Cn.resume.bind(Cn),ni.stop=ni,ni}function traverse(Ae,e=1/0,t){if(e<=0||!isObject$1(Ae)||Ae.__v_skip||(t=t||new Set,t.has(Ae)))return Ae;if(t.add(Ae),e--,isRef(Ae))traverse(Ae.value,e,t);else if(isArray$1(Ae))for(let Oe=0;Oe<Ae.length;Oe++)traverse(Ae[Oe],e,t);else if(isSet(Ae)||isMap(Ae))Ae.forEach(Oe=>{traverse(Oe,e,t)});else if(isPlainObject$1(Ae)){for(const Oe in Ae)traverse(Ae[Oe],e,t);for(const Oe of Object.getOwnPropertySymbols(Ae))Object.prototype.propertyIsEnumerable.call(Ae,Oe)&&traverse(Ae[Oe],e,t)}return Ae}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(Ae){stack.push(Ae)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(Ae,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,Oe=t&&t.appContext.config.warnHandler,ke=getComponentTrace();if(Oe)callWithErrorHandling(Oe,t,11,[Ae+e.map(Be=>{var Ue,je;return(je=(Ue=Be.toString)==null?void 0:Ue.call(Be))!=null?je:JSON.stringify(Be)}).join(""),t&&t.proxy,ke.map(({vnode:Be})=>`at <${formatComponentName(t,Be.type)}>`).join(`
`),ke]);else{const Be=[`[Vue warn]: ${Ae}`,...e];ke.length&&Be.push(`
`,...formatTrace(ke)),console.warn(...Be)}resetTracking(),isWarning=!1}function getComponentTrace(){let Ae=stack[stack.length-1];if(!Ae)return[];const e=[];for(;Ae;){const t=e[0];t&&t.vnode===Ae?t.recurseCount++:e.push({vnode:Ae,recurseCount:0});const Oe=Ae.component&&Ae.component.parent;Ae=Oe&&Oe.vnode}return e}function formatTrace(Ae){const e=[];return Ae.forEach((t,Oe)=>{e.push(...Oe===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:Ae,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",Oe=Ae.component?Ae.component.parent==null:!1,ke=` at <${formatComponentName(Ae.component,Ae.type,Oe)}`,Be=">"+t;return Ae.props?[ke,...formatProps(Ae.props),Be]:[ke+Be]}function formatProps(Ae){const e=[],t=Object.keys(Ae);return t.slice(0,3).forEach(Oe=>{e.push(...formatProp(Oe,Ae[Oe]))}),t.length>3&&e.push(" ..."),e}function formatProp(Ae,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${Ae}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${Ae}=${e}`]:isRef(e)?(e=formatProp(Ae,toRaw(e.value),!0),t?e:[`${Ae}=Ref<`,e,">"]):isFunction$1(e)?[`${Ae}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${Ae}=`,e])}function assertNumber(Ae,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(Ae,e,t,Oe){try{return Oe?Ae(...Oe):Ae()}catch(ke){handleError(ke,e,t)}}function callWithAsyncErrorHandling(Ae,e,t,Oe){if(isFunction$1(Ae)){const ke=callWithErrorHandling(Ae,e,t,Oe);return ke&&isPromise(ke)&&ke.catch(Be=>{handleError(Be,e,t)}),ke}if(isArray$1(Ae)){const ke=[];for(let Be=0;Be<Ae.length;Be++)ke.push(callWithAsyncErrorHandling(Ae[Be],e,t,Oe));return ke}}function handleError(Ae,e,t,Oe=!0){const ke=e?e.vnode:null,{errorHandler:Be,throwUnhandledErrorInProduction:Ue}=e&&e.appContext.config||EMPTY_OBJ;if(e){let je=e.parent;const We=e.proxy,Qe=`https://vuejs.org/error-reference/#runtime-${t}`;for(;je;){const Cn=je.ec;if(Cn){for(let An=0;An<Cn.length;An++)if(Cn[An](Ae,We,Qe)===!1)return}je=je.parent}if(Be){pauseTracking(),callWithErrorHandling(Be,null,10,[Ae,We,Qe]),resetTracking();return}}logError(Ae,t,ke,Oe,Ue)}function logError(Ae,e,t,Oe=!0,ke=!1){if(ke)throw Ae;console.error(Ae)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Ae){const e=currentFlushPromise||resolvedPromise;return Ae?e.then(this?Ae.bind(this):Ae):e}function findInsertionIndex$1(Ae){let e=flushIndex+1,t=queue.length;for(;e<t;){const Oe=e+t>>>1,ke=queue[Oe],Be=getId(ke);Be<Ae||Be===Ae&&ke.flags&2?e=Oe+1:t=Oe}return e}function queueJob(Ae){if(!(Ae.flags&1)){const e=getId(Ae),t=queue[queue.length-1];!t||!(Ae.flags&2)&&e>=getId(t)?queue.push(Ae):queue.splice(findInsertionIndex$1(e),0,Ae),Ae.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(Ae){isArray$1(Ae)?pendingPostFlushCbs.push(...Ae):activePostFlushCbs&&Ae.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,Ae):Ae.flags&1||(pendingPostFlushCbs.push(Ae),Ae.flags|=1),queueFlush()}function flushPreFlushCbs(Ae,e,t=flushIndex+1){for(;t<queue.length;t++){const Oe=queue[t];if(Oe&&Oe.flags&2){if(Ae&&Oe.id!==Ae.uid)continue;queue.splice(t,1),t--,Oe.flags&4&&(Oe.flags&=-2),Oe(),Oe.flags&4||(Oe.flags&=-2)}}}function flushPostFlushCbs(Ae){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,Oe)=>getId(t)-getId(Oe));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=Ae=>Ae.id==null?Ae.flags&2?-1:1/0:Ae.id;function flushJobs(Ae){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(Ae,e){var t,Oe;devtools$1=Ae,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:ke,args:Be})=>devtools$1.emit(ke,...Be)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((Oe=(t=window.navigator)==null?void 0:t.userAgent)!=null&&Oe.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Be=>{setDevtoolsHook$1(Be,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Ae){const e=currentRenderingInstance;return currentRenderingInstance=Ae,currentScopeId=Ae&&Ae.type.__scopeId||null,e}function pushScopeId(Ae){currentScopeId=Ae}function popScopeId(){currentScopeId=null}const withScopeId=Ae=>withCtx;function withCtx(Ae,e=currentRenderingInstance,t){if(!e||Ae._n)return Ae;const Oe=(...ke)=>{Oe._d&&setBlockTracking(-1);const Be=setCurrentRenderingInstance(e);let Ue;try{Ue=Ae(...ke)}finally{setCurrentRenderingInstance(Be),Oe._d&&setBlockTracking(1)}return Ue};return Oe._n=!0,Oe._c=!0,Oe._d=!0,Oe}function withDirectives(Ae,e){if(currentRenderingInstance===null)return Ae;const t=getComponentPublicInstance(currentRenderingInstance),Oe=Ae.dirs||(Ae.dirs=[]);for(let ke=0;ke<e.length;ke++){let[Be,Ue,je,We=EMPTY_OBJ]=e[ke];Be&&(isFunction$1(Be)&&(Be={mounted:Be,updated:Be}),Be.deep&&traverse(Ue),Oe.push({dir:Be,instance:t,value:Ue,oldValue:void 0,arg:je,modifiers:We}))}return Ae}function invokeDirectiveHook(Ae,e,t,Oe){const ke=Ae.dirs,Be=e&&e.dirs;for(let Ue=0;Ue<ke.length;Ue++){const je=ke[Ue];Be&&(je.oldValue=Be[Ue].value);let We=je.dir[Oe];We&&(pauseTracking(),callWithAsyncErrorHandling(We,t,8,[Ae.el,je,Ae,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=Ae=>Ae.__isTeleport,isTeleportDisabled=Ae=>Ae&&(Ae.disabled||Ae.disabled===""),isTeleportDeferred=Ae=>Ae&&(Ae.defer||Ae.defer===""),isTargetSVG=Ae=>typeof SVGElement<"u"&&Ae instanceof SVGElement,isTargetMathML=Ae=>typeof MathMLElement=="function"&&Ae instanceof MathMLElement,resolveTarget=(Ae,e)=>{const t=Ae&&Ae.to;return isString(t)?e?e(t):null:t},TeleportImpl={name:"Teleport",__isTeleport:!0,process(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe){const{mc:Cn,pc:An,pbc:En,o:{insert:Sn,querySelector:Tn,createText:Dn,createComment:ti}}=Qe,ni=isTeleportDisabled(e.props);let{shapeFlag:ii,children:si,dynamicChildren:oi}=e;if(Ae==null){const ci=e.el=Dn(""),Pi=e.anchor=Dn("");Sn(ci,t,Oe),Sn(Pi,t,Oe);const Ai=(Oi,Ni)=>{ii&16&&(ke&&ke.isCE&&(ke.ce._teleportTarget=Oi),Cn(si,Oi,Ni,ke,Be,Ue,je,We))},fi=()=>{const Oi=e.target=resolveTarget(e.props,Tn),Ni=prepareAnchor(Oi,e,Dn,Sn);Oi&&(Ue!=="svg"&&isTargetSVG(Oi)?Ue="svg":Ue!=="mathml"&&isTargetMathML(Oi)&&(Ue="mathml"),ni||(Ai(Oi,Ni),updateCssVars(e,!1)))};ni&&(Ai(t,Pi),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{fi(),e.el.__isMounted=!0},Be):fi()}else{if(isTeleportDeferred(e.props)&&!Ae.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe),delete Ae.el.__isMounted},Be);return}e.el=Ae.el,e.targetStart=Ae.targetStart;const ci=e.anchor=Ae.anchor,Pi=e.target=Ae.target,Ai=e.targetAnchor=Ae.targetAnchor,fi=isTeleportDisabled(Ae.props),Oi=fi?t:Pi,Ni=fi?ci:Ai;if(Ue==="svg"||isTargetSVG(Pi)?Ue="svg":(Ue==="mathml"||isTargetMathML(Pi))&&(Ue="mathml"),oi?(En(Ae.dynamicChildren,oi,Oi,ke,Be,Ue,je),traverseStaticChildren(Ae,e,!0)):We||An(Ae,e,Oi,Ni,ke,Be,Ue,je,!1),ni)fi?e.props&&Ae.props&&e.props.to!==Ae.props.to&&(e.props.to=Ae.props.to):moveTeleport(e,t,ci,Qe,1);else if((e.props&&e.props.to)!==(Ae.props&&Ae.props.to)){const ui=e.target=resolveTarget(e.props,Tn);ui&&moveTeleport(e,ui,null,Qe,0)}else fi&&moveTeleport(e,Pi,Ai,Qe,1);updateCssVars(e,ni)}},remove(Ae,e,t,{um:Oe,o:{remove:ke}},Be){const{shapeFlag:Ue,children:je,anchor:We,targetStart:Qe,targetAnchor:Cn,target:An,props:En}=Ae;if(An&&(ke(Qe),ke(Cn)),Be&&ke(We),Ue&16){const Sn=Be||!isTeleportDisabled(En);for(let Tn=0;Tn<je.length;Tn++){const Dn=je[Tn];Oe(Dn,e,t,Sn,!!Dn.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Ae,e,t,{o:{insert:Oe},m:ke},Be=2){Be===0&&Oe(Ae.targetAnchor,e,t);const{el:Ue,anchor:je,shapeFlag:We,children:Qe,props:Cn}=Ae,An=Be===2;if(An&&Oe(Ue,e,t),(!An||isTeleportDisabled(Cn))&&We&16)for(let En=0;En<Qe.length;En++)ke(Qe[En],e,t,2);An&&Oe(je,e,t)}function hydrateTeleport(Ae,e,t,Oe,ke,Be,{o:{nextSibling:Ue,parentNode:je,querySelector:We,insert:Qe,createText:Cn}},An){const En=e.target=resolveTarget(e.props,We);if(En){const Sn=isTeleportDisabled(e.props),Tn=En._lpa||En.firstChild;if(e.shapeFlag&16)if(Sn)e.anchor=An(Ue(Ae),e,je(Ae),t,Oe,ke,Be),e.targetStart=Tn,e.targetAnchor=Tn&&Ue(Tn);else{e.anchor=Ue(Ae);let Dn=Tn;for(;Dn;){if(Dn&&Dn.nodeType===8){if(Dn.data==="teleport start anchor")e.targetStart=Dn;else if(Dn.data==="teleport anchor"){e.targetAnchor=Dn,En._lpa=e.targetAnchor&&Ue(e.targetAnchor);break}}Dn=Ue(Dn)}e.targetAnchor||prepareAnchor(En,e,Cn,Qe),An(Tn&&Ue(Tn),e,En,t,Oe,ke,Be)}updateCssVars(e,Sn)}return e.anchor&&Ue(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(Ae,e){const t=Ae.ctx;if(t&&t.ut){let Oe,ke;for(e?(Oe=Ae.el,ke=Ae.anchor):(Oe=Ae.targetStart,ke=Ae.targetAnchor);Oe&&Oe!==ke;)Oe.nodeType===1&&Oe.setAttribute("data-v-owner",t.uid),Oe=Oe.nextSibling;t.ut()}}function prepareAnchor(Ae,e,t,Oe){const ke=e.targetStart=t(""),Be=e.targetAnchor=t("");return ke[TeleportEndKey]=Be,Ae&&(Oe(ke,Ae),Oe(Be,Ae)),Be}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const Ae={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Ae.isMounted=!0}),onBeforeUnmount(()=>{Ae.isUnmounting=!0}),Ae}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=Ae=>{const e=Ae.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Ae,{slots:e}){const t=getCurrentInstance(),Oe=useTransitionState();return()=>{const ke=e.default&&getTransitionRawChildren(e.default(),!0);if(!ke||!ke.length)return;const Be=findNonCommentChild(ke),Ue=toRaw(Ae),{mode:je}=Ue;if(Oe.isLeaving)return emptyPlaceholder(Be);const We=getInnerChild$1(Be);if(!We)return emptyPlaceholder(Be);let Qe=resolveTransitionHooks(We,Ue,Oe,t,An=>Qe=An);We.type!==Comment&&setTransitionHooks(We,Qe);let Cn=t.subTree&&getInnerChild$1(t.subTree);if(Cn&&Cn.type!==Comment&&!isSameVNodeType(We,Cn)&&recursiveGetSubtree(t).type!==Comment){let An=resolveTransitionHooks(Cn,Ue,Oe,t);if(setTransitionHooks(Cn,An),je==="out-in"&&We.type!==Comment)return Oe.isLeaving=!0,An.afterLeave=()=>{Oe.isLeaving=!1,t.job.flags&8||t.update(),delete An.afterLeave,Cn=void 0},emptyPlaceholder(Be);je==="in-out"&&We.type!==Comment?An.delayLeave=(En,Sn,Tn)=>{const Dn=getLeavingNodesForType(Oe,Cn);Dn[String(Cn.key)]=Cn,En[leaveCbKey]=()=>{Sn(),En[leaveCbKey]=void 0,delete Qe.delayedLeave,Cn=void 0},Qe.delayedLeave=()=>{Tn(),delete Qe.delayedLeave,Cn=void 0}}:Cn=void 0}else Cn&&(Cn=void 0);return Be}}};function findNonCommentChild(Ae){let e=Ae[0];if(Ae.length>1){for(const t of Ae)if(t.type!==Comment){e=t;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Ae,e){const{leavingVNodes:t}=Ae;let Oe=t.get(e.type);return Oe||(Oe=Object.create(null),t.set(e.type,Oe)),Oe}function resolveTransitionHooks(Ae,e,t,Oe,ke){const{appear:Be,mode:Ue,persisted:je=!1,onBeforeEnter:We,onEnter:Qe,onAfterEnter:Cn,onEnterCancelled:An,onBeforeLeave:En,onLeave:Sn,onAfterLeave:Tn,onLeaveCancelled:Dn,onBeforeAppear:ti,onAppear:ni,onAfterAppear:ii,onAppearCancelled:si}=e,oi=String(Ae.key),ci=getLeavingNodesForType(t,Ae),Pi=(Oi,Ni)=>{Oi&&callWithAsyncErrorHandling(Oi,Oe,9,Ni)},Ai=(Oi,Ni)=>{const ui=Ni[1];Pi(Oi,Ni),isArray$1(Oi)?Oi.every(li=>li.length<=1)&&ui():Oi.length<=1&&ui()},fi={mode:Ue,persisted:je,beforeEnter(Oi){let Ni=We;if(!t.isMounted)if(Be)Ni=ti||We;else return;Oi[leaveCbKey]&&Oi[leaveCbKey](!0);const ui=ci[oi];ui&&isSameVNodeType(Ae,ui)&&ui.el[leaveCbKey]&&ui.el[leaveCbKey](),Pi(Ni,[Oi])},enter(Oi){let Ni=Qe,ui=Cn,li=An;if(!t.isMounted)if(Be)Ni=ni||Qe,ui=ii||Cn,li=si||An;else return;let Ri=!1;const Mi=Oi[enterCbKey$1]=Bi=>{Ri||(Ri=!0,Bi?Pi(li,[Oi]):Pi(ui,[Oi]),fi.delayedLeave&&fi.delayedLeave(),Oi[enterCbKey$1]=void 0)};Ni?Ai(Ni,[Oi,Mi]):Mi()},leave(Oi,Ni){const ui=String(Ae.key);if(Oi[enterCbKey$1]&&Oi[enterCbKey$1](!0),t.isUnmounting)return Ni();Pi(En,[Oi]);let li=!1;const Ri=Oi[leaveCbKey]=Mi=>{li||(li=!0,Ni(),Mi?Pi(Dn,[Oi]):Pi(Tn,[Oi]),Oi[leaveCbKey]=void 0,ci[ui]===Ae&&delete ci[ui])};ci[ui]=Ae,Sn?Ai(Sn,[Oi,Ri]):Ri()},clone(Oi){const Ni=resolveTransitionHooks(Oi,e,t,Oe,ke);return ke&&ke(Ni),Ni}};return fi}function emptyPlaceholder(Ae){if(isKeepAlive(Ae))return Ae=cloneVNode(Ae),Ae.children=null,Ae}function getInnerChild$1(Ae){if(!isKeepAlive(Ae))return isTeleport(Ae.type)&&Ae.children?findNonCommentChild(Ae.children):Ae;const{shapeFlag:e,children:t}=Ae;if(t){if(e&16)return t[0];if(e&32&&isFunction$1(t.default))return t.default()}}function setTransitionHooks(Ae,e){Ae.shapeFlag&6&&Ae.component?(Ae.transition=e,setTransitionHooks(Ae.component.subTree,e)):Ae.shapeFlag&128?(Ae.ssContent.transition=e.clone(Ae.ssContent),Ae.ssFallback.transition=e.clone(Ae.ssFallback)):Ae.transition=e}function getTransitionRawChildren(Ae,e=!1,t){let Oe=[],ke=0;for(let Be=0;Be<Ae.length;Be++){let Ue=Ae[Be];const je=t==null?Ue.key:String(t)+String(Ue.key!=null?Ue.key:Be);Ue.type===Fragment?(Ue.patchFlag&128&&ke++,Oe=Oe.concat(getTransitionRawChildren(Ue.children,e,je))):(e||Ue.type!==Comment)&&Oe.push(je!=null?cloneVNode(Ue,{key:je}):Ue)}if(ke>1)for(let Be=0;Be<Oe.length;Be++)Oe[Be].patchFlag=-2;return Oe}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(Ae,e){return isFunction$1(Ae)?extend$5({name:Ae.name},e,{setup:Ae}):Ae}function useId(){const Ae=getCurrentInstance();return Ae?(Ae.appContext.config.idPrefix||"v")+"-"+Ae.ids[0]+Ae.ids[1]++:""}function markAsyncBoundary(Ae){Ae.ids=[Ae.ids[0]+Ae.ids[2]+++"-",0,0]}function useTemplateRef(Ae){const e=getCurrentInstance(),t=shallowRef(null);if(e){const ke=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(ke,Ae,{enumerable:!0,get:()=>t.value,set:Be=>t.value=Be})}return t}function setRef(Ae,e,t,Oe,ke=!1){if(isArray$1(Ae)){Ae.forEach((Tn,Dn)=>setRef(Tn,e&&(isArray$1(e)?e[Dn]:e),t,Oe,ke));return}if(isAsyncWrapper(Oe)&&!ke){Oe.shapeFlag&512&&Oe.type.__asyncResolved&&Oe.component.subTree.component&&setRef(Ae,e,t,Oe.component.subTree);return}const Be=Oe.shapeFlag&4?getComponentPublicInstance(Oe.component):Oe.el,Ue=ke?null:Be,{i:je,r:We}=Ae,Qe=e&&e.r,Cn=je.refs===EMPTY_OBJ?je.refs={}:je.refs,An=je.setupState,En=toRaw(An),Sn=An===EMPTY_OBJ?()=>!1:Tn=>hasOwn(En,Tn);if(Qe!=null&&Qe!==We&&(isString(Qe)?(Cn[Qe]=null,Sn(Qe)&&(An[Qe]=null)):isRef(Qe)&&(Qe.value=null)),isFunction$1(We))callWithErrorHandling(We,je,12,[Ue,Cn]);else{const Tn=isString(We),Dn=isRef(We);if(Tn||Dn){const ti=()=>{if(Ae.f){const ni=Tn?Sn(We)?An[We]:Cn[We]:We.value;ke?isArray$1(ni)&&remove(ni,Be):isArray$1(ni)?ni.includes(Be)||ni.push(Be):Tn?(Cn[We]=[Be],Sn(We)&&(An[We]=Cn[We])):(We.value=[Be],Ae.k&&(Cn[Ae.k]=We.value))}else Tn?(Cn[We]=Ue,Sn(We)&&(An[We]=Ue)):Dn&&(We.value=Ue,Ae.k&&(Cn[Ae.k]=Ue))};Ue?(ti.id=-1,queuePostRenderEffect(ti,t)):ti()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=Ae=>Ae.namespaceURI.includes("svg")&&Ae.tagName!=="foreignObject",isMathMLContainer=Ae=>Ae.namespaceURI.includes("MathML"),getContainerType=Ae=>{if(Ae.nodeType===1){if(isSVGContainer(Ae))return"svg";if(isMathMLContainer(Ae))return"mathml"}},isComment=Ae=>Ae.nodeType===8;function createHydrationFunctions(Ae){const{mt:e,p:t,o:{patchProp:Oe,createText:ke,nextSibling:Be,parentNode:Ue,remove:je,insert:We,createComment:Qe}}=Ae,Cn=(si,oi)=>{if(!oi.hasChildNodes()){t(null,si,oi),flushPostFlushCbs(),oi._vnode=si;return}An(oi.firstChild,si,null,null,null),flushPostFlushCbs(),oi._vnode=si},An=(si,oi,ci,Pi,Ai,fi=!1)=>{fi=fi||!!oi.dynamicChildren;const Oi=isComment(si)&&si.data==="[",Ni=()=>Dn(si,oi,ci,Pi,Ai,Oi),{type:ui,ref:li,shapeFlag:Ri,patchFlag:Mi}=oi;let Bi=si.nodeType;oi.el=si,Mi===-2&&(fi=!1,oi.dynamicChildren=null);let er=null;switch(ui){case Text$1:Bi!==3?oi.children===""?(We(oi.el=ke(""),Ue(si),si),er=si):er=Ni():(si.data!==oi.children&&(logMismatchError(),si.data=oi.children),er=Be(si));break;case Comment:ii(si)?(er=Be(si),ni(oi.el=si.content.firstChild,si,ci)):Bi!==8||Oi?er=Ni():er=Be(si);break;case Static:if(Oi&&(si=Be(si),Bi=si.nodeType),Bi===1||Bi===3){er=si;const nr=!oi.children.length;for(let lr=0;lr<oi.staticCount;lr++)nr&&(oi.children+=er.nodeType===1?er.outerHTML:er.data),lr===oi.staticCount-1&&(oi.anchor=er),er=Be(er);return Oi?Be(er):er}else Ni();break;case Fragment:Oi?er=Tn(si,oi,ci,Pi,Ai,fi):er=Ni();break;default:if(Ri&1)(Bi!==1||oi.type.toLowerCase()!==si.tagName.toLowerCase())&&!ii(si)?er=Ni():er=En(si,oi,ci,Pi,Ai,fi);else if(Ri&6){oi.slotScopeIds=Ai;const nr=Ue(si);if(Oi?er=ti(si):isComment(si)&&si.data==="teleport start"?er=ti(si,si.data,"teleport end"):er=Be(si),e(oi,nr,null,ci,Pi,getContainerType(nr),fi),isAsyncWrapper(oi)&&!oi.type.__asyncResolved){let lr;Oi?(lr=createVNode(Fragment),lr.anchor=er?er.previousSibling:nr.lastChild):lr=si.nodeType===3?createTextVNode(""):createVNode("div"),lr.el=si,oi.component.subTree=lr}}else Ri&64?Bi!==8?er=Ni():er=oi.type.hydrate(si,oi,ci,Pi,Ai,fi,Ae,Sn):Ri&128&&(er=oi.type.hydrate(si,oi,ci,Pi,getContainerType(Ue(si)),Ai,fi,Ae,An))}return li!=null&&setRef(li,null,Pi,oi),er},En=(si,oi,ci,Pi,Ai,fi)=>{fi=fi||!!oi.dynamicChildren;const{type:Oi,props:Ni,patchFlag:ui,shapeFlag:li,dirs:Ri,transition:Mi}=oi,Bi=Oi==="input"||Oi==="option";if(Bi||ui!==-1){Ri&&invokeDirectiveHook(oi,null,ci,"created");let er=!1;if(ii(si)){er=needTransition(null,Mi)&&ci&&ci.vnode.props&&ci.vnode.props.appear;const lr=si.content.firstChild;er&&Mi.beforeEnter(lr),ni(lr,si,ci),oi.el=si=lr}if(li&16&&!(Ni&&(Ni.innerHTML||Ni.textContent))){let lr=Sn(si.firstChild,oi,si,ci,Pi,Ai,fi);for(;lr;){isMismatchAllowed(si,1)||logMismatchError();const hr=lr;lr=lr.nextSibling,je(hr)}}else if(li&8){let lr=oi.children;lr[0]===`
`&&(si.tagName==="PRE"||si.tagName==="TEXTAREA")&&(lr=lr.slice(1)),si.textContent!==lr&&(isMismatchAllowed(si,0)||logMismatchError(),si.textContent=oi.children)}if(Ni){if(Bi||!fi||ui&48){const lr=si.tagName.includes("-");for(const hr in Ni)(Bi&&(hr.endsWith("value")||hr==="indeterminate")||isOn(hr)&&!isReservedProp(hr)||hr[0]==="."||lr)&&Oe(si,hr,null,Ni[hr],void 0,ci)}else if(Ni.onClick)Oe(si,"onClick",null,Ni.onClick,void 0,ci);else if(ui&4&&isReactive(Ni.style))for(const lr in Ni.style)Ni.style[lr]}let nr;(nr=Ni&&Ni.onVnodeBeforeMount)&&invokeVNodeHook(nr,ci,oi),Ri&&invokeDirectiveHook(oi,null,ci,"beforeMount"),((nr=Ni&&Ni.onVnodeMounted)||Ri||er)&&queueEffectWithSuspense(()=>{nr&&invokeVNodeHook(nr,ci,oi),er&&Mi.enter(si),Ri&&invokeDirectiveHook(oi,null,ci,"mounted")},Pi)}return si.nextSibling},Sn=(si,oi,ci,Pi,Ai,fi,Oi)=>{Oi=Oi||!!oi.dynamicChildren;const Ni=oi.children,ui=Ni.length;for(let li=0;li<ui;li++){const Ri=Oi?Ni[li]:Ni[li]=normalizeVNode(Ni[li]),Mi=Ri.type===Text$1;si?(Mi&&!Oi&&li+1<ui&&normalizeVNode(Ni[li+1]).type===Text$1&&(We(ke(si.data.slice(Ri.children.length)),ci,Be(si)),si.data=Ri.children),si=An(si,Ri,Pi,Ai,fi,Oi)):Mi&&!Ri.children?We(Ri.el=ke(""),ci):(isMismatchAllowed(ci,1)||logMismatchError(),t(null,Ri,ci,null,Pi,Ai,getContainerType(ci),fi))}return si},Tn=(si,oi,ci,Pi,Ai,fi)=>{const{slotScopeIds:Oi}=oi;Oi&&(Ai=Ai?Ai.concat(Oi):Oi);const Ni=Ue(si),ui=Sn(Be(si),oi,Ni,ci,Pi,Ai,fi);return ui&&isComment(ui)&&ui.data==="]"?Be(oi.anchor=ui):(logMismatchError(),We(oi.anchor=Qe("]"),Ni,ui),ui)},Dn=(si,oi,ci,Pi,Ai,fi)=>{if(isMismatchAllowed(si.parentElement,1)||logMismatchError(),oi.el=null,fi){const ui=ti(si);for(;;){const li=Be(si);if(li&&li!==ui)je(li);else break}}const Oi=Be(si),Ni=Ue(si);return je(si),t(null,oi,Ni,Oi,ci,Pi,getContainerType(Ni),Ai),ci&&(ci.vnode.el=oi.el,updateHOCHostEl(ci,oi.el)),Oi},ti=(si,oi="[",ci="]")=>{let Pi=0;for(;si;)if(si=Be(si),si&&isComment(si)&&(si.data===oi&&Pi++,si.data===ci)){if(Pi===0)return Be(si);Pi--}return si},ni=(si,oi,ci)=>{const Pi=oi.parentNode;Pi&&Pi.replaceChild(si,oi);let Ai=ci;for(;Ai;)Ai.vnode.el===oi&&(Ai.vnode.el=Ai.subTree.el=si),Ai=Ai.parent},ii=si=>si.nodeType===1&&si.tagName==="TEMPLATE";return[Cn,An]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(Ae,e){if(e===0||e===1)for(;Ae&&!Ae.hasAttribute(allowMismatchAttr);)Ae=Ae.parentElement;const t=Ae&&Ae.getAttribute(allowMismatchAttr);if(t==null)return!1;if(t==="")return!0;{const Oe=t.split(",");return e===0&&Oe.includes("children")?!0:t.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(Ae=>setTimeout(Ae,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(Ae=>clearTimeout(Ae)),hydrateOnIdle=(Ae=1e4)=>e=>{const t=requestIdleCallback(e,{timeout:Ae});return()=>cancelIdleCallback(t)};function elementIsVisibleInViewport(Ae){const{top:e,left:t,bottom:Oe,right:ke}=Ae.getBoundingClientRect(),{innerHeight:Be,innerWidth:Ue}=window;return(e>0&&e<Be||Oe>0&&Oe<Be)&&(t>0&&t<Ue||ke>0&&ke<Ue)}const hydrateOnVisible=Ae=>(e,t)=>{const Oe=new IntersectionObserver(ke=>{for(const Be of ke)if(Be.isIntersecting){Oe.disconnect(),e();break}},Ae);return t(ke=>{if(ke instanceof Element){if(elementIsVisibleInViewport(ke))return e(),Oe.disconnect(),!1;Oe.observe(ke)}}),()=>Oe.disconnect()},hydrateOnMediaQuery=Ae=>e=>{if(Ae){const t=matchMedia(Ae);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},hydrateOnInteraction=(Ae=[])=>(e,t)=>{isString(Ae)&&(Ae=[Ae]);let Oe=!1;const ke=Ue=>{Oe||(Oe=!0,Be(),e(),Ue.target.dispatchEvent(new Ue.constructor(Ue.type,Ue)))},Be=()=>{t(Ue=>{for(const je of Ae)Ue.removeEventListener(je,ke)})};return t(Ue=>{for(const je of Ae)Ue.addEventListener(je,ke,{once:!0})}),Be};function forEachElement(Ae,e){if(isComment(Ae)&&Ae.data==="["){let t=1,Oe=Ae.nextSibling;for(;Oe;){if(Oe.nodeType===1){if(e(Oe)===!1)break}else if(isComment(Oe))if(Oe.data==="]"){if(--t===0)break}else Oe.data==="["&&t++;Oe=Oe.nextSibling}}else e(Ae)}const isAsyncWrapper=Ae=>!!Ae.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(Ae){isFunction$1(Ae)&&(Ae={loader:Ae});const{loader:e,loadingComponent:t,errorComponent:Oe,delay:ke=200,hydrate:Be,timeout:Ue,suspensible:je=!0,onError:We}=Ae;let Qe=null,Cn,An=0;const En=()=>(An++,Qe=null,Sn()),Sn=()=>{let Tn;return Qe||(Tn=Qe=e().catch(Dn=>{if(Dn=Dn instanceof Error?Dn:new Error(String(Dn)),We)return new Promise((ti,ni)=>{We(Dn,()=>ti(En()),()=>ni(Dn),An+1)});throw Dn}).then(Dn=>Tn!==Qe&&Qe?Qe:(Dn&&(Dn.__esModule||Dn[Symbol.toStringTag]==="Module")&&(Dn=Dn.default),Cn=Dn,Dn)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:Sn,__asyncHydrate(Tn,Dn,ti){const ni=Be?()=>{const ii=Be(ti,si=>forEachElement(Tn,si));ii&&(Dn.bum||(Dn.bum=[])).push(ii)}:ti;Cn?ni():Sn().then(()=>!Dn.isUnmounted&&ni())},get __asyncResolved(){return Cn},setup(){const Tn=currentInstance;if(markAsyncBoundary(Tn),Cn)return()=>createInnerComp(Cn,Tn);const Dn=si=>{Qe=null,handleError(si,Tn,13,!Oe)};if(je&&Tn.suspense||isInSSRComponentSetup)return Sn().then(si=>()=>createInnerComp(si,Tn)).catch(si=>(Dn(si),()=>Oe?createVNode(Oe,{error:si}):null));const ti=ref(!1),ni=ref(),ii=ref(!!ke);return ke&&setTimeout(()=>{ii.value=!1},ke),Ue!=null&&setTimeout(()=>{if(!ti.value&&!ni.value){const si=new Error(`Async component timed out after ${Ue}ms.`);Dn(si),ni.value=si}},Ue),Sn().then(()=>{ti.value=!0,Tn.parent&&isKeepAlive(Tn.parent.vnode)&&Tn.parent.update()}).catch(si=>{Dn(si),ni.value=si}),()=>{if(ti.value&&Cn)return createInnerComp(Cn,Tn);if(ni.value&&Oe)return createVNode(Oe,{error:ni.value});if(t&&!ii.value)return createVNode(t)}}})}function createInnerComp(Ae,e){const{ref:t,props:Oe,children:ke,ce:Be}=e.vnode,Ue=createVNode(Ae,Oe,ke);return Ue.ref=t,Ue.ce=Be,delete e.vnode.ce,Ue}const isKeepAlive=Ae=>Ae.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Ae,{slots:e}){const t=getCurrentInstance(),Oe=t.ctx;if(!Oe.renderer)return()=>{const ii=e.default&&e.default();return ii&&ii.length===1?ii[0]:ii};const ke=new Map,Be=new Set;let Ue=null;const je=t.suspense,{renderer:{p:We,m:Qe,um:Cn,o:{createElement:An}}}=Oe,En=An("div");Oe.activate=(ii,si,oi,ci,Pi)=>{const Ai=ii.component;Qe(ii,si,oi,0,je),We(Ai.vnode,ii,si,oi,Ai,je,ci,ii.slotScopeIds,Pi),queuePostRenderEffect(()=>{Ai.isDeactivated=!1,Ai.a&&invokeArrayFns(Ai.a);const fi=ii.props&&ii.props.onVnodeMounted;fi&&invokeVNodeHook(fi,Ai.parent,ii)},je)},Oe.deactivate=ii=>{const si=ii.component;invalidateMount(si.m),invalidateMount(si.a),Qe(ii,En,null,1,je),queuePostRenderEffect(()=>{si.da&&invokeArrayFns(si.da);const oi=ii.props&&ii.props.onVnodeUnmounted;oi&&invokeVNodeHook(oi,si.parent,ii),si.isDeactivated=!0},je)};function Sn(ii){resetShapeFlag(ii),Cn(ii,t,je,!0)}function Tn(ii){ke.forEach((si,oi)=>{const ci=getComponentName(si.type);ci&&!ii(ci)&&Dn(oi)})}function Dn(ii){const si=ke.get(ii);si&&(!Ue||!isSameVNodeType(si,Ue))?Sn(si):Ue&&resetShapeFlag(Ue),ke.delete(ii),Be.delete(ii)}watch(()=>[Ae.include,Ae.exclude],([ii,si])=>{ii&&Tn(oi=>matches$1(ii,oi)),si&&Tn(oi=>!matches$1(si,oi))},{flush:"post",deep:!0});let ti=null;const ni=()=>{ti!=null&&(isSuspense(t.subTree.type)?queuePostRenderEffect(()=>{ke.set(ti,getInnerChild(t.subTree))},t.subTree.suspense):ke.set(ti,getInnerChild(t.subTree)))};return onMounted(ni),onUpdated(ni),onBeforeUnmount(()=>{ke.forEach(ii=>{const{subTree:si,suspense:oi}=t,ci=getInnerChild(si);if(ii.type===ci.type&&ii.key===ci.key){resetShapeFlag(ci);const Pi=ci.component.da;Pi&&queuePostRenderEffect(Pi,oi);return}Sn(ii)})}),()=>{if(ti=null,!e.default)return Ue=null;const ii=e.default(),si=ii[0];if(ii.length>1)return Ue=null,ii;if(!isVNode(si)||!(si.shapeFlag&4)&&!(si.shapeFlag&128))return Ue=null,si;let oi=getInnerChild(si);if(oi.type===Comment)return Ue=null,oi;const ci=oi.type,Pi=getComponentName(isAsyncWrapper(oi)?oi.type.__asyncResolved||{}:ci),{include:Ai,exclude:fi,max:Oi}=Ae;if(Ai&&(!Pi||!matches$1(Ai,Pi))||fi&&Pi&&matches$1(fi,Pi))return oi.shapeFlag&=-257,Ue=oi,si;const Ni=oi.key==null?ci:oi.key,ui=ke.get(Ni);return oi.el&&(oi=cloneVNode(oi),si.shapeFlag&128&&(si.ssContent=oi)),ti=Ni,ui?(oi.el=ui.el,oi.component=ui.component,oi.transition&&setTransitionHooks(oi,oi.transition),oi.shapeFlag|=512,Be.delete(Ni),Be.add(Ni)):(Be.add(Ni),Oi&&Be.size>parseInt(Oi,10)&&Dn(Be.values().next().value)),oi.shapeFlag|=256,Ue=oi,isSuspense(si.type)?si:oi}}},KeepAlive=KeepAliveImpl;function matches$1(Ae,e){return isArray$1(Ae)?Ae.some(t=>matches$1(t,e)):isString(Ae)?Ae.split(",").includes(e):isRegExp(Ae)?(Ae.lastIndex=0,Ae.test(e)):!1}function onActivated(Ae,e){registerKeepAliveHook(Ae,"a",e)}function onDeactivated(Ae,e){registerKeepAliveHook(Ae,"da",e)}function registerKeepAliveHook(Ae,e,t=currentInstance){const Oe=Ae.__wdc||(Ae.__wdc=()=>{let ke=t;for(;ke;){if(ke.isDeactivated)return;ke=ke.parent}return Ae()});if(injectHook(e,Oe,t),t){let ke=t.parent;for(;ke&&ke.parent;)isKeepAlive(ke.parent.vnode)&&injectToKeepAliveRoot(Oe,e,t,ke),ke=ke.parent}}function injectToKeepAliveRoot(Ae,e,t,Oe){const ke=injectHook(e,Ae,Oe,!0);onUnmounted(()=>{remove(Oe[e],ke)},t)}function resetShapeFlag(Ae){Ae.shapeFlag&=-257,Ae.shapeFlag&=-513}function getInnerChild(Ae){return Ae.shapeFlag&128?Ae.ssContent:Ae}function injectHook(Ae,e,t=currentInstance,Oe=!1){if(t){const ke=t[Ae]||(t[Ae]=[]),Be=e.__weh||(e.__weh=(...Ue)=>{pauseTracking();const je=setCurrentInstance(t),We=callWithAsyncErrorHandling(e,t,Ae,Ue);return je(),resetTracking(),We});return Oe?ke.unshift(Be):ke.push(Be),Be}}const createHook=Ae=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||Ae==="sp")&&injectHook(Ae,(...Oe)=>e(...Oe),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Ae,e=currentInstance){injectHook("ec",Ae,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Ae,e){return resolveAsset(COMPONENTS,Ae,!0,e)||Ae}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Ae){return isString(Ae)?resolveAsset(COMPONENTS,Ae,!1)||Ae:Ae||NULL_DYNAMIC_COMPONENT}function resolveDirective(Ae){return resolveAsset(DIRECTIVES,Ae)}function resolveAsset(Ae,e,t=!0,Oe=!1){const ke=currentRenderingInstance||currentInstance;if(ke){const Be=ke.type;if(Ae===COMPONENTS){const je=getComponentName(Be,!1);if(je&&(je===e||je===camelize(e)||je===capitalize(camelize(e))))return Be}const Ue=resolve(ke[Ae]||Be[Ae],e)||resolve(ke.appContext[Ae],e);return!Ue&&Oe?Be:Ue}}function resolve(Ae,e){return Ae&&(Ae[e]||Ae[camelize(e)]||Ae[capitalize(camelize(e))])}function renderList(Ae,e,t,Oe){let ke;const Be=t&&t[Oe],Ue=isArray$1(Ae);if(Ue||isString(Ae)){const je=Ue&&isReactive(Ae);let We=!1;je&&(We=!isShallow(Ae),Ae=shallowReadArray(Ae)),ke=new Array(Ae.length);for(let Qe=0,Cn=Ae.length;Qe<Cn;Qe++)ke[Qe]=e(We?toReactive(Ae[Qe]):Ae[Qe],Qe,void 0,Be&&Be[Qe])}else if(typeof Ae=="number"){ke=new Array(Ae);for(let je=0;je<Ae;je++)ke[je]=e(je+1,je,void 0,Be&&Be[je])}else if(isObject$1(Ae))if(Ae[Symbol.iterator])ke=Array.from(Ae,(je,We)=>e(je,We,void 0,Be&&Be[We]));else{const je=Object.keys(Ae);ke=new Array(je.length);for(let We=0,Qe=je.length;We<Qe;We++){const Cn=je[We];ke[We]=e(Ae[Cn],Cn,We,Be&&Be[We])}}else ke=[];return t&&(t[Oe]=ke),ke}function createSlots(Ae,e){for(let t=0;t<e.length;t++){const Oe=e[t];if(isArray$1(Oe))for(let ke=0;ke<Oe.length;ke++)Ae[Oe[ke].name]=Oe[ke].fn;else Oe&&(Ae[Oe.name]=Oe.key?(...ke)=>{const Be=Oe.fn(...ke);return Be&&(Be.key=Oe.key),Be}:Oe.fn)}return Ae}function renderSlot(Ae,e,t={},Oe,ke){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(t.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",t,Oe&&Oe())],64);let Be=Ae[e];Be&&Be._c&&(Be._d=!1),openBlock();const Ue=Be&&ensureValidVNode(Be(t)),je=t.key||Ue&&Ue.key,We=createBlock(Fragment,{key:(je&&!isSymbol(je)?je:`_${e}`)+(!Ue&&Oe?"_fb":"")},Ue||(Oe?Oe():[]),Ue&&Ae._===1?64:-2);return!ke&&We.scopeId&&(We.slotScopeIds=[We.scopeId+"-s"]),Be&&Be._c&&(Be._d=!0),We}function ensureValidVNode(Ae){return Ae.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?Ae:null}function toHandlers(Ae,e){const t={};for(const Oe in Ae)t[e&&/[A-Z]/.test(Oe)?`on:${Oe}`:toHandlerKey(Oe)]=Ae[Oe];return t}const getPublicInstance=Ae=>Ae?isStatefulComponent(Ae)?getComponentPublicInstance(Ae):getPublicInstance(Ae.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:Ae=>Ae,$el:Ae=>Ae.vnode.el,$data:Ae=>Ae.data,$props:Ae=>Ae.props,$attrs:Ae=>Ae.attrs,$slots:Ae=>Ae.slots,$refs:Ae=>Ae.refs,$parent:Ae=>getPublicInstance(Ae.parent),$root:Ae=>getPublicInstance(Ae.root),$host:Ae=>Ae.ce,$emit:Ae=>Ae.emit,$options:Ae=>resolveMergedOptions(Ae),$forceUpdate:Ae=>Ae.f||(Ae.f=()=>{queueJob(Ae.update)}),$nextTick:Ae=>Ae.n||(Ae.n=nextTick.bind(Ae.proxy)),$watch:Ae=>instanceWatch.bind(Ae)}),hasSetupBinding=(Ae,e)=>Ae!==EMPTY_OBJ&&!Ae.__isScriptSetup&&hasOwn(Ae,e),PublicInstanceProxyHandlers={get({_:Ae},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:Oe,data:ke,props:Be,accessCache:Ue,type:je,appContext:We}=Ae;let Qe;if(e[0]!=="$"){const Sn=Ue[e];if(Sn!==void 0)switch(Sn){case 1:return Oe[e];case 2:return ke[e];case 4:return t[e];case 3:return Be[e]}else{if(hasSetupBinding(Oe,e))return Ue[e]=1,Oe[e];if(ke!==EMPTY_OBJ&&hasOwn(ke,e))return Ue[e]=2,ke[e];if((Qe=Ae.propsOptions[0])&&hasOwn(Qe,e))return Ue[e]=3,Be[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return Ue[e]=4,t[e];shouldCacheAccess&&(Ue[e]=0)}}const Cn=publicPropertiesMap[e];let An,En;if(Cn)return e==="$attrs"&&track(Ae.attrs,"get",""),Cn(Ae);if((An=je.__cssModules)&&(An=An[e]))return An;if(t!==EMPTY_OBJ&&hasOwn(t,e))return Ue[e]=4,t[e];if(En=We.config.globalProperties,hasOwn(En,e))return En[e]},set({_:Ae},e,t){const{data:Oe,setupState:ke,ctx:Be}=Ae;return hasSetupBinding(ke,e)?(ke[e]=t,!0):Oe!==EMPTY_OBJ&&hasOwn(Oe,e)?(Oe[e]=t,!0):hasOwn(Ae.props,e)||e[0]==="$"&&e.slice(1)in Ae?!1:(Be[e]=t,!0)},has({_:{data:Ae,setupState:e,accessCache:t,ctx:Oe,appContext:ke,propsOptions:Be}},Ue){let je;return!!t[Ue]||Ae!==EMPTY_OBJ&&hasOwn(Ae,Ue)||hasSetupBinding(e,Ue)||(je=Be[0])&&hasOwn(je,Ue)||hasOwn(Oe,Ue)||hasOwn(publicPropertiesMap,Ue)||hasOwn(ke.config.globalProperties,Ue)},defineProperty(Ae,e,t){return t.get!=null?Ae._.accessCache[e]=0:hasOwn(t,"value")&&this.set(Ae,e,t.value,null),Reflect.defineProperty(Ae,e,t)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(Ae,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(Ae,e,Ae)},has(Ae,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(Ae){}function defineOptions(Ae){}function defineSlots(){return null}function defineModel(){}function withDefaults(Ae,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const Ae=getCurrentInstance();return Ae.setupContext||(Ae.setupContext=createSetupContext(Ae))}function normalizePropsOrEmits(Ae){return isArray$1(Ae)?Ae.reduce((e,t)=>(e[t]=null,e),{}):Ae}function mergeDefaults(Ae,e){const t=normalizePropsOrEmits(Ae);for(const Oe in e){if(Oe.startsWith("__skip"))continue;let ke=t[Oe];ke?isArray$1(ke)||isFunction$1(ke)?ke=t[Oe]={type:ke,default:e[Oe]}:ke.default=e[Oe]:ke===null&&(ke=t[Oe]={default:e[Oe]}),ke&&e[`__skip_${Oe}`]&&(ke.skipFactory=!0)}return t}function mergeModels(Ae,e){return!Ae||!e?Ae||e:isArray$1(Ae)&&isArray$1(e)?Ae.concat(e):extend$5({},normalizePropsOrEmits(Ae),normalizePropsOrEmits(e))}function createPropsRestProxy(Ae,e){const t={};for(const Oe in Ae)e.includes(Oe)||Object.defineProperty(t,Oe,{enumerable:!0,get:()=>Ae[Oe]});return t}function withAsyncContext(Ae){const e=getCurrentInstance();let t=Ae();return unsetCurrentInstance(),isPromise(t)&&(t=t.catch(Oe=>{throw setCurrentInstance(e),Oe})),[t,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(Ae){const e=resolveMergedOptions(Ae),t=Ae.proxy,Oe=Ae.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,Ae,"bc");const{data:ke,computed:Be,methods:Ue,watch:je,provide:We,inject:Qe,created:Cn,beforeMount:An,mounted:En,beforeUpdate:Sn,updated:Tn,activated:Dn,deactivated:ti,beforeDestroy:ni,beforeUnmount:ii,destroyed:si,unmounted:oi,render:ci,renderTracked:Pi,renderTriggered:Ai,errorCaptured:fi,serverPrefetch:Oi,expose:Ni,inheritAttrs:ui,components:li,directives:Ri,filters:Mi}=e;if(Qe&&resolveInjections(Qe,Oe,null),Ue)for(const nr in Ue){const lr=Ue[nr];isFunction$1(lr)&&(Oe[nr]=lr.bind(t))}if(ke){const nr=ke.call(t,t);isObject$1(nr)&&(Ae.data=reactive(nr))}if(shouldCacheAccess=!0,Be)for(const nr in Be){const lr=Be[nr],hr=isFunction$1(lr)?lr.bind(t,t):isFunction$1(lr.get)?lr.get.bind(t,t):NOOP,ar=!isFunction$1(lr)&&isFunction$1(lr.set)?lr.set.bind(t):NOOP,wr=computed({get:hr,set:ar});Object.defineProperty(Oe,nr,{enumerable:!0,configurable:!0,get:()=>wr.value,set:Fi=>wr.value=Fi})}if(je)for(const nr in je)createWatcher(je[nr],Oe,t,nr);if(We){const nr=isFunction$1(We)?We.call(t):We;Reflect.ownKeys(nr).forEach(lr=>{provide(lr,nr[lr])})}Cn&&callHook$1(Cn,Ae,"c");function er(nr,lr){isArray$1(lr)?lr.forEach(hr=>nr(hr.bind(t))):lr&&nr(lr.bind(t))}if(er(onBeforeMount,An),er(onMounted,En),er(onBeforeUpdate,Sn),er(onUpdated,Tn),er(onActivated,Dn),er(onDeactivated,ti),er(onErrorCaptured,fi),er(onRenderTracked,Pi),er(onRenderTriggered,Ai),er(onBeforeUnmount,ii),er(onUnmounted,oi),er(onServerPrefetch,Oi),isArray$1(Ni))if(Ni.length){const nr=Ae.exposed||(Ae.exposed={});Ni.forEach(lr=>{Object.defineProperty(nr,lr,{get:()=>t[lr],set:hr=>t[lr]=hr})})}else Ae.exposed||(Ae.exposed={});ci&&Ae.render===NOOP&&(Ae.render=ci),ui!=null&&(Ae.inheritAttrs=ui),li&&(Ae.components=li),Ri&&(Ae.directives=Ri),Oi&&markAsyncBoundary(Ae)}function resolveInjections(Ae,e,t=NOOP){isArray$1(Ae)&&(Ae=normalizeInject(Ae));for(const Oe in Ae){const ke=Ae[Oe];let Be;isObject$1(ke)?"default"in ke?Be=inject(ke.from||Oe,ke.default,!0):Be=inject(ke.from||Oe):Be=inject(ke),isRef(Be)?Object.defineProperty(e,Oe,{enumerable:!0,configurable:!0,get:()=>Be.value,set:Ue=>Be.value=Ue}):e[Oe]=Be}}function callHook$1(Ae,e,t){callWithAsyncErrorHandling(isArray$1(Ae)?Ae.map(Oe=>Oe.bind(e.proxy)):Ae.bind(e.proxy),e,t)}function createWatcher(Ae,e,t,Oe){let ke=Oe.includes(".")?createPathGetter(t,Oe):()=>t[Oe];if(isString(Ae)){const Be=e[Ae];isFunction$1(Be)&&watch(ke,Be)}else if(isFunction$1(Ae))watch(ke,Ae.bind(t));else if(isObject$1(Ae))if(isArray$1(Ae))Ae.forEach(Be=>createWatcher(Be,e,t,Oe));else{const Be=isFunction$1(Ae.handler)?Ae.handler.bind(t):e[Ae.handler];isFunction$1(Be)&&watch(ke,Be,Ae)}}function resolveMergedOptions(Ae){const e=Ae.type,{mixins:t,extends:Oe}=e,{mixins:ke,optionsCache:Be,config:{optionMergeStrategies:Ue}}=Ae.appContext,je=Be.get(e);let We;return je?We=je:!ke.length&&!t&&!Oe?We=e:(We={},ke.length&&ke.forEach(Qe=>mergeOptions$1(We,Qe,Ue,!0)),mergeOptions$1(We,e,Ue)),isObject$1(e)&&Be.set(e,We),We}function mergeOptions$1(Ae,e,t,Oe=!1){const{mixins:ke,extends:Be}=e;Be&&mergeOptions$1(Ae,Be,t,!0),ke&&ke.forEach(Ue=>mergeOptions$1(Ae,Ue,t,!0));for(const Ue in e)if(!(Oe&&Ue==="expose")){const je=internalOptionMergeStrats[Ue]||t&&t[Ue];Ae[Ue]=je?je(Ae[Ue],e[Ue]):e[Ue]}return Ae}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Ae,e){return e?Ae?function(){return extend$5(isFunction$1(Ae)?Ae.call(this,this):Ae,isFunction$1(e)?e.call(this,this):e)}:e:Ae}function mergeInject(Ae,e){return mergeObjectOptions(normalizeInject(Ae),normalizeInject(e))}function normalizeInject(Ae){if(isArray$1(Ae)){const e={};for(let t=0;t<Ae.length;t++)e[Ae[t]]=Ae[t];return e}return Ae}function mergeAsArray(Ae,e){return Ae?[...new Set([].concat(Ae,e))]:e}function mergeObjectOptions(Ae,e){return Ae?extend$5(Object.create(null),Ae,e):e}function mergeEmitsOrPropsOptions(Ae,e){return Ae?isArray$1(Ae)&&isArray$1(e)?[...new Set([...Ae,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(Ae),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(Ae,e){if(!Ae)return e;if(!e)return Ae;const t=extend$5(Object.create(null),Ae);for(const Oe in e)t[Oe]=mergeAsArray(Ae[Oe],e[Oe]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Ae,e){return function(Oe,ke=null){isFunction$1(Oe)||(Oe=extend$5({},Oe)),ke!=null&&!isObject$1(ke)&&(ke=null);const Be=createAppContext(),Ue=new WeakSet,je=[];let We=!1;const Qe=Be.app={_uid:uid$1++,_component:Oe,_props:ke,_container:null,_context:Be,_instance:null,version:version$3,get config(){return Be.config},set config(Cn){},use(Cn,...An){return Ue.has(Cn)||(Cn&&isFunction$1(Cn.install)?(Ue.add(Cn),Cn.install(Qe,...An)):isFunction$1(Cn)&&(Ue.add(Cn),Cn(Qe,...An))),Qe},mixin(Cn){return Be.mixins.includes(Cn)||Be.mixins.push(Cn),Qe},component(Cn,An){return An?(Be.components[Cn]=An,Qe):Be.components[Cn]},directive(Cn,An){return An?(Be.directives[Cn]=An,Qe):Be.directives[Cn]},mount(Cn,An,En){if(!We){const Sn=Qe._ceVNode||createVNode(Oe,ke);return Sn.appContext=Be,En===!0?En="svg":En===!1&&(En=void 0),An&&e?e(Sn,Cn):Ae(Sn,Cn,En),We=!0,Qe._container=Cn,Cn.__vue_app__=Qe,getComponentPublicInstance(Sn.component)}},onUnmount(Cn){je.push(Cn)},unmount(){We&&(callWithAsyncErrorHandling(je,Qe._instance,16),Ae(null,Qe._container),delete Qe._container.__vue_app__)},provide(Cn,An){return Be.provides[Cn]=An,Qe},runWithContext(Cn){const An=currentApp;currentApp=Qe;try{return Cn()}finally{currentApp=An}}};return Qe}}let currentApp=null;function provide(Ae,e){if(currentInstance){let t=currentInstance.provides;const Oe=currentInstance.parent&&currentInstance.parent.provides;Oe===t&&(t=currentInstance.provides=Object.create(Oe)),t[Ae]=e}}function inject(Ae,e,t=!1){const Oe=currentInstance||currentRenderingInstance;if(Oe||currentApp){const ke=currentApp?currentApp._context.provides:Oe?Oe.parent==null?Oe.vnode.appContext&&Oe.vnode.appContext.provides:Oe.parent.provides:void 0;if(ke&&Ae in ke)return ke[Ae];if(arguments.length>1)return t&&isFunction$1(e)?e.call(Oe&&Oe.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=Ae=>Object.getPrototypeOf(Ae)===internalObjectProto;function initProps(Ae,e,t,Oe=!1){const ke={},Be=createInternalObject();Ae.propsDefaults=Object.create(null),setFullProps(Ae,e,ke,Be);for(const Ue in Ae.propsOptions[0])Ue in ke||(ke[Ue]=void 0);t?Ae.props=Oe?ke:shallowReactive(ke):Ae.type.props?Ae.props=ke:Ae.props=Be,Ae.attrs=Be}function updateProps(Ae,e,t,Oe){const{props:ke,attrs:Be,vnode:{patchFlag:Ue}}=Ae,je=toRaw(ke),[We]=Ae.propsOptions;let Qe=!1;if((Oe||Ue>0)&&!(Ue&16)){if(Ue&8){const Cn=Ae.vnode.dynamicProps;for(let An=0;An<Cn.length;An++){let En=Cn[An];if(isEmitListener(Ae.emitsOptions,En))continue;const Sn=e[En];if(We)if(hasOwn(Be,En))Sn!==Be[En]&&(Be[En]=Sn,Qe=!0);else{const Tn=camelize(En);ke[Tn]=resolvePropValue(We,je,Tn,Sn,Ae,!1)}else Sn!==Be[En]&&(Be[En]=Sn,Qe=!0)}}}else{setFullProps(Ae,e,ke,Be)&&(Qe=!0);let Cn;for(const An in je)(!e||!hasOwn(e,An)&&((Cn=hyphenate(An))===An||!hasOwn(e,Cn)))&&(We?t&&(t[An]!==void 0||t[Cn]!==void 0)&&(ke[An]=resolvePropValue(We,je,An,void 0,Ae,!0)):delete ke[An]);if(Be!==je)for(const An in Be)(!e||!hasOwn(e,An))&&(delete Be[An],Qe=!0)}Qe&&trigger(Ae.attrs,"set","")}function setFullProps(Ae,e,t,Oe){const[ke,Be]=Ae.propsOptions;let Ue=!1,je;if(e)for(let We in e){if(isReservedProp(We))continue;const Qe=e[We];let Cn;ke&&hasOwn(ke,Cn=camelize(We))?!Be||!Be.includes(Cn)?t[Cn]=Qe:(je||(je={}))[Cn]=Qe:isEmitListener(Ae.emitsOptions,We)||(!(We in Oe)||Qe!==Oe[We])&&(Oe[We]=Qe,Ue=!0)}if(Be){const We=toRaw(t),Qe=je||EMPTY_OBJ;for(let Cn=0;Cn<Be.length;Cn++){const An=Be[Cn];t[An]=resolvePropValue(ke,We,An,Qe[An],Ae,!hasOwn(Qe,An))}}return Ue}function resolvePropValue(Ae,e,t,Oe,ke,Be){const Ue=Ae[t];if(Ue!=null){const je=hasOwn(Ue,"default");if(je&&Oe===void 0){const We=Ue.default;if(Ue.type!==Function&&!Ue.skipFactory&&isFunction$1(We)){const{propsDefaults:Qe}=ke;if(t in Qe)Oe=Qe[t];else{const Cn=setCurrentInstance(ke);Oe=Qe[t]=We.call(null,e),Cn()}}else Oe=We;ke.ce&&ke.ce._setProp(t,Oe)}Ue[0]&&(Be&&!je?Oe=!1:Ue[1]&&(Oe===""||Oe===hyphenate(t))&&(Oe=!0))}return Oe}const mixinPropsCache=new WeakMap;function normalizePropsOptions(Ae,e,t=!1){const Oe=t?mixinPropsCache:e.propsCache,ke=Oe.get(Ae);if(ke)return ke;const Be=Ae.props,Ue={},je=[];let We=!1;if(!isFunction$1(Ae)){const Cn=An=>{We=!0;const[En,Sn]=normalizePropsOptions(An,e,!0);extend$5(Ue,En),Sn&&je.push(...Sn)};!t&&e.mixins.length&&e.mixins.forEach(Cn),Ae.extends&&Cn(Ae.extends),Ae.mixins&&Ae.mixins.forEach(Cn)}if(!Be&&!We)return isObject$1(Ae)&&Oe.set(Ae,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Be))for(let Cn=0;Cn<Be.length;Cn++){const An=camelize(Be[Cn]);validatePropName(An)&&(Ue[An]=EMPTY_OBJ)}else if(Be)for(const Cn in Be){const An=camelize(Cn);if(validatePropName(An)){const En=Be[Cn],Sn=Ue[An]=isArray$1(En)||isFunction$1(En)?{type:En}:extend$5({},En),Tn=Sn.type;let Dn=!1,ti=!0;if(isArray$1(Tn))for(let ni=0;ni<Tn.length;++ni){const ii=Tn[ni],si=isFunction$1(ii)&&ii.name;if(si==="Boolean"){Dn=!0;break}else si==="String"&&(ti=!1)}else Dn=isFunction$1(Tn)&&Tn.name==="Boolean";Sn[0]=Dn,Sn[1]=ti,(Dn||hasOwn(Sn,"default"))&&je.push(An)}}const Qe=[Ue,je];return isObject$1(Ae)&&Oe.set(Ae,Qe),Qe}function validatePropName(Ae){return Ae[0]!=="$"&&!isReservedProp(Ae)}const isInternalKey=Ae=>Ae[0]==="_"||Ae==="$stable",normalizeSlotValue=Ae=>isArray$1(Ae)?Ae.map(normalizeVNode):[normalizeVNode(Ae)],normalizeSlot$1=(Ae,e,t)=>{if(e._n)return e;const Oe=withCtx((...ke)=>normalizeSlotValue(e(...ke)),t);return Oe._c=!1,Oe},normalizeObjectSlots=(Ae,e,t)=>{const Oe=Ae._ctx;for(const ke in Ae){if(isInternalKey(ke))continue;const Be=Ae[ke];if(isFunction$1(Be))e[ke]=normalizeSlot$1(ke,Be,Oe);else if(Be!=null){const Ue=normalizeSlotValue(Be);e[ke]=()=>Ue}}},normalizeVNodeSlots=(Ae,e)=>{const t=normalizeSlotValue(e);Ae.slots.default=()=>t},assignSlots=(Ae,e,t)=>{for(const Oe in e)(t||Oe!=="_")&&(Ae[Oe]=e[Oe])},initSlots=(Ae,e,t)=>{const Oe=Ae.slots=createInternalObject();if(Ae.vnode.shapeFlag&32){const ke=e._;ke?(assignSlots(Oe,e,t),t&&def(Oe,"_",ke,!0)):normalizeObjectSlots(e,Oe)}else e&&normalizeVNodeSlots(Ae,e)},updateSlots=(Ae,e,t)=>{const{vnode:Oe,slots:ke}=Ae;let Be=!0,Ue=EMPTY_OBJ;if(Oe.shapeFlag&32){const je=e._;je?t&&je===1?Be=!1:assignSlots(ke,e,t):(Be=!e.$stable,normalizeObjectSlots(e,ke)),Ue=e}else e&&(normalizeVNodeSlots(Ae,e),Ue={default:1});if(Be)for(const je in ke)!isInternalKey(je)&&Ue[je]==null&&delete ke[je]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Ae){return baseCreateRenderer(Ae)}function createHydrationRenderer(Ae){return baseCreateRenderer(Ae,createHydrationFunctions)}function baseCreateRenderer(Ae,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:Oe,remove:ke,patchProp:Be,createElement:Ue,createText:je,createComment:We,setText:Qe,setElementText:Cn,parentNode:An,nextSibling:En,setScopeId:Sn=NOOP,insertStaticContent:Tn}=Ae,Dn=(ir,mr,dr,tr=null,Dr=null,Nr=null,Pr=void 0,kr=null,Rr=!!mr.dynamicChildren)=>{if(ir===mr)return;ir&&!isSameVNodeType(ir,mr)&&(tr=pr(ir),Fi(ir,Dr,Nr,!0),ir=null),mr.patchFlag===-2&&(Rr=!1,mr.dynamicChildren=null);const{type:Tr,ref:Er,shapeFlag:br}=mr;switch(Tr){case Text$1:ti(ir,mr,dr,tr);break;case Comment:ni(ir,mr,dr,tr);break;case Static:ir==null&&ii(mr,dr,tr,Pr);break;case Fragment:li(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr);break;default:br&1?ci(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr):br&6?Ri(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr):(br&64||br&128)&&Tr.process(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr,Sr)}Er!=null&&Dr&&setRef(Er,ir&&ir.ref,Nr,mr||ir,!mr)},ti=(ir,mr,dr,tr)=>{if(ir==null)Oe(mr.el=je(mr.children),dr,tr);else{const Dr=mr.el=ir.el;mr.children!==ir.children&&Qe(Dr,mr.children)}},ni=(ir,mr,dr,tr)=>{ir==null?Oe(mr.el=We(mr.children||""),dr,tr):mr.el=ir.el},ii=(ir,mr,dr,tr)=>{[ir.el,ir.anchor]=Tn(ir.children,mr,dr,tr,ir.el,ir.anchor)},si=({el:ir,anchor:mr},dr,tr)=>{let Dr;for(;ir&&ir!==mr;)Dr=En(ir),Oe(ir,dr,tr),ir=Dr;Oe(mr,dr,tr)},oi=({el:ir,anchor:mr})=>{let dr;for(;ir&&ir!==mr;)dr=En(ir),ke(ir),ir=dr;ke(mr)},ci=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr)=>{mr.type==="svg"?Pr="svg":mr.type==="math"&&(Pr="mathml"),ir==null?Pi(mr,dr,tr,Dr,Nr,Pr,kr,Rr):Oi(ir,mr,Dr,Nr,Pr,kr,Rr)},Pi=(ir,mr,dr,tr,Dr,Nr,Pr,kr)=>{let Rr,Tr;const{props:Er,shapeFlag:br,transition:Ir,dirs:jr}=ir;if(Rr=ir.el=Ue(ir.type,Nr,Er&&Er.is,Er),br&8?Cn(Rr,ir.children):br&16&&fi(ir.children,Rr,null,tr,Dr,resolveChildrenNamespace(ir,Nr),Pr,kr),jr&&invokeDirectiveHook(ir,null,tr,"created"),Ai(Rr,ir,ir.scopeId,Pr,tr),Er){for(const Wr in Er)Wr!=="value"&&!isReservedProp(Wr)&&Be(Rr,Wr,null,Er[Wr],Nr,tr);"value"in Er&&Be(Rr,"value",null,Er.value,Nr),(Tr=Er.onVnodeBeforeMount)&&invokeVNodeHook(Tr,tr,ir)}jr&&invokeDirectiveHook(ir,null,tr,"beforeMount");const qr=needTransition(Dr,Ir);qr&&Ir.beforeEnter(Rr),Oe(Rr,mr,dr),((Tr=Er&&Er.onVnodeMounted)||qr||jr)&&queuePostRenderEffect(()=>{Tr&&invokeVNodeHook(Tr,tr,ir),qr&&Ir.enter(Rr),jr&&invokeDirectiveHook(ir,null,tr,"mounted")},Dr)},Ai=(ir,mr,dr,tr,Dr)=>{if(dr&&Sn(ir,dr),tr)for(let Nr=0;Nr<tr.length;Nr++)Sn(ir,tr[Nr]);if(Dr){let Nr=Dr.subTree;if(mr===Nr||isSuspense(Nr.type)&&(Nr.ssContent===mr||Nr.ssFallback===mr)){const Pr=Dr.vnode;Ai(ir,Pr,Pr.scopeId,Pr.slotScopeIds,Dr.parent)}}},fi=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr=0)=>{for(let Tr=Rr;Tr<ir.length;Tr++){const Er=ir[Tr]=kr?cloneIfMounted(ir[Tr]):normalizeVNode(ir[Tr]);Dn(null,Er,mr,dr,tr,Dr,Nr,Pr,kr)}},Oi=(ir,mr,dr,tr,Dr,Nr,Pr)=>{const kr=mr.el=ir.el;let{patchFlag:Rr,dynamicChildren:Tr,dirs:Er}=mr;Rr|=ir.patchFlag&16;const br=ir.props||EMPTY_OBJ,Ir=mr.props||EMPTY_OBJ;let jr;if(dr&&toggleRecurse(dr,!1),(jr=Ir.onVnodeBeforeUpdate)&&invokeVNodeHook(jr,dr,mr,ir),Er&&invokeDirectiveHook(mr,ir,dr,"beforeUpdate"),dr&&toggleRecurse(dr,!0),(br.innerHTML&&Ir.innerHTML==null||br.textContent&&Ir.textContent==null)&&Cn(kr,""),Tr?Ni(ir.dynamicChildren,Tr,kr,dr,tr,resolveChildrenNamespace(mr,Dr),Nr):Pr||lr(ir,mr,kr,null,dr,tr,resolveChildrenNamespace(mr,Dr),Nr,!1),Rr>0){if(Rr&16)ui(kr,br,Ir,dr,Dr);else if(Rr&2&&br.class!==Ir.class&&Be(kr,"class",null,Ir.class,Dr),Rr&4&&Be(kr,"style",br.style,Ir.style,Dr),Rr&8){const qr=mr.dynamicProps;for(let Wr=0;Wr<qr.length;Wr++){const Kr=qr[Wr],ps=br[Kr],rs=Ir[Kr];(rs!==ps||Kr==="value")&&Be(kr,Kr,ps,rs,Dr,dr)}}Rr&1&&ir.children!==mr.children&&Cn(kr,mr.children)}else!Pr&&Tr==null&&ui(kr,br,Ir,dr,Dr);((jr=Ir.onVnodeUpdated)||Er)&&queuePostRenderEffect(()=>{jr&&invokeVNodeHook(jr,dr,mr,ir),Er&&invokeDirectiveHook(mr,ir,dr,"updated")},tr)},Ni=(ir,mr,dr,tr,Dr,Nr,Pr)=>{for(let kr=0;kr<mr.length;kr++){const Rr=ir[kr],Tr=mr[kr],Er=Rr.el&&(Rr.type===Fragment||!isSameVNodeType(Rr,Tr)||Rr.shapeFlag&70)?An(Rr.el):dr;Dn(Rr,Tr,Er,null,tr,Dr,Nr,Pr,!0)}},ui=(ir,mr,dr,tr,Dr)=>{if(mr!==dr){if(mr!==EMPTY_OBJ)for(const Nr in mr)!isReservedProp(Nr)&&!(Nr in dr)&&Be(ir,Nr,mr[Nr],null,Dr,tr);for(const Nr in dr){if(isReservedProp(Nr))continue;const Pr=dr[Nr],kr=mr[Nr];Pr!==kr&&Nr!=="value"&&Be(ir,Nr,kr,Pr,Dr,tr)}"value"in dr&&Be(ir,"value",mr.value,dr.value,Dr)}},li=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr)=>{const Tr=mr.el=ir?ir.el:je(""),Er=mr.anchor=ir?ir.anchor:je("");let{patchFlag:br,dynamicChildren:Ir,slotScopeIds:jr}=mr;jr&&(kr=kr?kr.concat(jr):jr),ir==null?(Oe(Tr,dr,tr),Oe(Er,dr,tr),fi(mr.children||[],dr,Er,Dr,Nr,Pr,kr,Rr)):br>0&&br&64&&Ir&&ir.dynamicChildren?(Ni(ir.dynamicChildren,Ir,dr,Dr,Nr,Pr,kr),(mr.key!=null||Dr&&mr===Dr.subTree)&&traverseStaticChildren(ir,mr,!0)):lr(ir,mr,dr,Er,Dr,Nr,Pr,kr,Rr)},Ri=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr)=>{mr.slotScopeIds=kr,ir==null?mr.shapeFlag&512?Dr.ctx.activate(mr,dr,tr,Pr,Rr):Mi(mr,dr,tr,Dr,Nr,Pr,Rr):Bi(ir,mr,Rr)},Mi=(ir,mr,dr,tr,Dr,Nr,Pr)=>{const kr=ir.component=createComponentInstance(ir,tr,Dr);if(isKeepAlive(ir)&&(kr.ctx.renderer=Sr),setupComponent(kr,!1,Pr),kr.asyncDep){if(Dr&&Dr.registerDep(kr,er,Pr),!ir.el){const Rr=kr.subTree=createVNode(Comment);ni(null,Rr,mr,dr)}}else er(kr,ir,mr,dr,Dr,Nr,Pr)},Bi=(ir,mr,dr)=>{const tr=mr.component=ir.component;if(shouldUpdateComponent(ir,mr,dr))if(tr.asyncDep&&!tr.asyncResolved){nr(tr,mr,dr);return}else tr.next=mr,tr.update();else mr.el=ir.el,tr.vnode=mr},er=(ir,mr,dr,tr,Dr,Nr,Pr)=>{const kr=()=>{if(ir.isMounted){let{next:br,bu:Ir,u:jr,parent:qr,vnode:Wr}=ir;{const Cs=locateNonHydratedAsyncRoot(ir);if(Cs){br&&(br.el=Wr.el,nr(ir,br,Pr)),Cs.asyncDep.then(()=>{ir.isUnmounted||kr()});return}}let Kr=br,ps;toggleRecurse(ir,!1),br?(br.el=Wr.el,nr(ir,br,Pr)):br=Wr,Ir&&invokeArrayFns(Ir),(ps=br.props&&br.props.onVnodeBeforeUpdate)&&invokeVNodeHook(ps,qr,br,Wr),toggleRecurse(ir,!0);const rs=renderComponentRoot(ir),Ps=ir.subTree;ir.subTree=rs,Dn(Ps,rs,An(Ps.el),pr(Ps),ir,Dr,Nr),br.el=rs.el,Kr===null&&updateHOCHostEl(ir,rs.el),jr&&queuePostRenderEffect(jr,Dr),(ps=br.props&&br.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(ps,qr,br,Wr),Dr)}else{let br;const{el:Ir,props:jr}=mr,{bm:qr,m:Wr,parent:Kr,root:ps,type:rs}=ir,Ps=isAsyncWrapper(mr);if(toggleRecurse(ir,!1),qr&&invokeArrayFns(qr),!Ps&&(br=jr&&jr.onVnodeBeforeMount)&&invokeVNodeHook(br,Kr,mr),toggleRecurse(ir,!0),Ir&&es){const Cs=()=>{ir.subTree=renderComponentRoot(ir),es(Ir,ir.subTree,ir,Dr,null)};Ps&&rs.__asyncHydrate?rs.__asyncHydrate(Ir,ir,Cs):Cs()}else{ps.ce&&ps.ce._injectChildStyle(rs);const Cs=ir.subTree=renderComponentRoot(ir);Dn(null,Cs,dr,tr,ir,Dr,Nr),mr.el=Cs.el}if(Wr&&queuePostRenderEffect(Wr,Dr),!Ps&&(br=jr&&jr.onVnodeMounted)){const Cs=mr;queuePostRenderEffect(()=>invokeVNodeHook(br,Kr,Cs),Dr)}(mr.shapeFlag&256||Kr&&isAsyncWrapper(Kr.vnode)&&Kr.vnode.shapeFlag&256)&&ir.a&&queuePostRenderEffect(ir.a,Dr),ir.isMounted=!0,mr=dr=tr=null}};ir.scope.on();const Rr=ir.effect=new ReactiveEffect(kr);ir.scope.off();const Tr=ir.update=Rr.run.bind(Rr),Er=ir.job=Rr.runIfDirty.bind(Rr);Er.i=ir,Er.id=ir.uid,Rr.scheduler=()=>queueJob(Er),toggleRecurse(ir,!0),Tr()},nr=(ir,mr,dr)=>{mr.component=ir;const tr=ir.vnode.props;ir.vnode=mr,ir.next=null,updateProps(ir,mr.props,tr,dr),updateSlots(ir,mr.children,dr),pauseTracking(),flushPreFlushCbs(ir),resetTracking()},lr=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr=!1)=>{const Tr=ir&&ir.children,Er=ir?ir.shapeFlag:0,br=mr.children,{patchFlag:Ir,shapeFlag:jr}=mr;if(Ir>0){if(Ir&128){ar(Tr,br,dr,tr,Dr,Nr,Pr,kr,Rr);return}else if(Ir&256){hr(Tr,br,dr,tr,Dr,Nr,Pr,kr,Rr);return}}jr&8?(Er&16&&vr(Tr,Dr,Nr),br!==Tr&&Cn(dr,br)):Er&16?jr&16?ar(Tr,br,dr,tr,Dr,Nr,Pr,kr,Rr):vr(Tr,Dr,Nr,!0):(Er&8&&Cn(dr,""),jr&16&&fi(br,dr,tr,Dr,Nr,Pr,kr,Rr))},hr=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr)=>{ir=ir||EMPTY_ARR,mr=mr||EMPTY_ARR;const Tr=ir.length,Er=mr.length,br=Math.min(Tr,Er);let Ir;for(Ir=0;Ir<br;Ir++){const jr=mr[Ir]=Rr?cloneIfMounted(mr[Ir]):normalizeVNode(mr[Ir]);Dn(ir[Ir],jr,dr,null,Dr,Nr,Pr,kr,Rr)}Tr>Er?vr(ir,Dr,Nr,!0,!1,br):fi(mr,dr,tr,Dr,Nr,Pr,kr,Rr,br)},ar=(ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr)=>{let Tr=0;const Er=mr.length;let br=ir.length-1,Ir=Er-1;for(;Tr<=br&&Tr<=Ir;){const jr=ir[Tr],qr=mr[Tr]=Rr?cloneIfMounted(mr[Tr]):normalizeVNode(mr[Tr]);if(isSameVNodeType(jr,qr))Dn(jr,qr,dr,null,Dr,Nr,Pr,kr,Rr);else break;Tr++}for(;Tr<=br&&Tr<=Ir;){const jr=ir[br],qr=mr[Ir]=Rr?cloneIfMounted(mr[Ir]):normalizeVNode(mr[Ir]);if(isSameVNodeType(jr,qr))Dn(jr,qr,dr,null,Dr,Nr,Pr,kr,Rr);else break;br--,Ir--}if(Tr>br){if(Tr<=Ir){const jr=Ir+1,qr=jr<Er?mr[jr].el:tr;for(;Tr<=Ir;)Dn(null,mr[Tr]=Rr?cloneIfMounted(mr[Tr]):normalizeVNode(mr[Tr]),dr,qr,Dr,Nr,Pr,kr,Rr),Tr++}}else if(Tr>Ir)for(;Tr<=br;)Fi(ir[Tr],Dr,Nr,!0),Tr++;else{const jr=Tr,qr=Tr,Wr=new Map;for(Tr=qr;Tr<=Ir;Tr++){const vs=mr[Tr]=Rr?cloneIfMounted(mr[Tr]):normalizeVNode(mr[Tr]);vs.key!=null&&Wr.set(vs.key,Tr)}let Kr,ps=0;const rs=Ir-qr+1;let Ps=!1,Cs=0;const Ns=new Array(rs);for(Tr=0;Tr<rs;Tr++)Ns[Tr]=0;for(Tr=jr;Tr<=br;Tr++){const vs=ir[Tr];if(ps>=rs){Fi(vs,Dr,Nr,!0);continue}let Ts;if(vs.key!=null)Ts=Wr.get(vs.key);else for(Kr=qr;Kr<=Ir;Kr++)if(Ns[Kr-qr]===0&&isSameVNodeType(vs,mr[Kr])){Ts=Kr;break}Ts===void 0?Fi(vs,Dr,Nr,!0):(Ns[Ts-qr]=Tr+1,Ts>=Cs?Cs=Ts:Ps=!0,Dn(vs,mr[Ts],dr,null,Dr,Nr,Pr,kr,Rr),ps++)}const Rs=Ps?getSequence(Ns):EMPTY_ARR;for(Kr=Rs.length-1,Tr=rs-1;Tr>=0;Tr--){const vs=qr+Tr,Ts=mr[vs],Is=vs+1<Er?mr[vs+1].el:tr;Ns[Tr]===0?Dn(null,Ts,dr,Is,Dr,Nr,Pr,kr,Rr):Ps&&(Kr<0||Tr!==Rs[Kr]?wr(Ts,dr,Is,2):Kr--)}}},wr=(ir,mr,dr,tr,Dr=null)=>{const{el:Nr,type:Pr,transition:kr,children:Rr,shapeFlag:Tr}=ir;if(Tr&6){wr(ir.component.subTree,mr,dr,tr);return}if(Tr&128){ir.suspense.move(mr,dr,tr);return}if(Tr&64){Pr.move(ir,mr,dr,Sr);return}if(Pr===Fragment){Oe(Nr,mr,dr);for(let br=0;br<Rr.length;br++)wr(Rr[br],mr,dr,tr);Oe(ir.anchor,mr,dr);return}if(Pr===Static){si(ir,mr,dr);return}if(tr!==2&&Tr&1&&kr)if(tr===0)kr.beforeEnter(Nr),Oe(Nr,mr,dr),queuePostRenderEffect(()=>kr.enter(Nr),Dr);else{const{leave:br,delayLeave:Ir,afterLeave:jr}=kr,qr=()=>Oe(Nr,mr,dr),Wr=()=>{br(Nr,()=>{qr(),jr&&jr()})};Ir?Ir(Nr,qr,Wr):Wr()}else Oe(Nr,mr,dr)},Fi=(ir,mr,dr,tr=!1,Dr=!1)=>{const{type:Nr,props:Pr,ref:kr,children:Rr,dynamicChildren:Tr,shapeFlag:Er,patchFlag:br,dirs:Ir,cacheIndex:jr}=ir;if(br===-2&&(Dr=!1),kr!=null&&setRef(kr,null,dr,ir,!0),jr!=null&&(mr.renderCache[jr]=void 0),Er&256){mr.ctx.deactivate(ir);return}const qr=Er&1&&Ir,Wr=!isAsyncWrapper(ir);let Kr;if(Wr&&(Kr=Pr&&Pr.onVnodeBeforeUnmount)&&invokeVNodeHook(Kr,mr,ir),Er&6)gr(ir.component,dr,tr);else{if(Er&128){ir.suspense.unmount(dr,tr);return}qr&&invokeDirectiveHook(ir,null,mr,"beforeUnmount"),Er&64?ir.type.remove(ir,mr,dr,Sr,tr):Tr&&!Tr.hasOnce&&(Nr!==Fragment||br>0&&br&64)?vr(Tr,mr,dr,!1,!0):(Nr===Fragment&&br&384||!Dr&&Er&16)&&vr(Rr,mr,dr),tr&&cr(ir)}(Wr&&(Kr=Pr&&Pr.onVnodeUnmounted)||qr)&&queuePostRenderEffect(()=>{Kr&&invokeVNodeHook(Kr,mr,ir),qr&&invokeDirectiveHook(ir,null,mr,"unmounted")},dr)},cr=ir=>{const{type:mr,el:dr,anchor:tr,transition:Dr}=ir;if(mr===Fragment){rr(dr,tr);return}if(mr===Static){oi(ir);return}const Nr=()=>{ke(dr),Dr&&!Dr.persisted&&Dr.afterLeave&&Dr.afterLeave()};if(ir.shapeFlag&1&&Dr&&!Dr.persisted){const{leave:Pr,delayLeave:kr}=Dr,Rr=()=>Pr(dr,Nr);kr?kr(ir.el,Nr,Rr):Rr()}else Nr()},rr=(ir,mr)=>{let dr;for(;ir!==mr;)dr=En(ir),ke(ir),ir=dr;ke(mr)},gr=(ir,mr,dr)=>{const{bum:tr,scope:Dr,job:Nr,subTree:Pr,um:kr,m:Rr,a:Tr}=ir;invalidateMount(Rr),invalidateMount(Tr),tr&&invokeArrayFns(tr),Dr.stop(),Nr&&(Nr.flags|=8,Fi(Pr,ir,mr,dr)),kr&&queuePostRenderEffect(kr,mr),queuePostRenderEffect(()=>{ir.isUnmounted=!0},mr),mr&&mr.pendingBranch&&!mr.isUnmounted&&ir.asyncDep&&!ir.asyncResolved&&ir.suspenseId===mr.pendingId&&(mr.deps--,mr.deps===0&&mr.resolve())},vr=(ir,mr,dr,tr=!1,Dr=!1,Nr=0)=>{for(let Pr=Nr;Pr<ir.length;Pr++)Fi(ir[Pr],mr,dr,tr,Dr)},pr=ir=>{if(ir.shapeFlag&6)return pr(ir.component.subTree);if(ir.shapeFlag&128)return ir.suspense.next();const mr=En(ir.anchor||ir.el),dr=mr&&mr[TeleportEndKey];return dr?En(dr):mr};let _r=!1;const Ar=(ir,mr,dr)=>{ir==null?mr._vnode&&Fi(mr._vnode,null,null,!0):Dn(mr._vnode||null,ir,mr,null,null,null,dr),mr._vnode=ir,_r||(_r=!0,flushPreFlushCbs(),flushPostFlushCbs(),_r=!1)},Sr={p:Dn,um:Fi,m:wr,r:cr,mt:Mi,mc:fi,pc:lr,pbc:Ni,n:pr,o:Ae};let Hr,es;return e&&([Hr,es]=e(Sr)),{render:Ar,hydrate:Hr,createApp:createAppAPI(Ar,Hr)}}function resolveChildrenNamespace({type:Ae,props:e},t){return t==="svg"&&Ae==="foreignObject"||t==="mathml"&&Ae==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:Ae,job:e},t){t?(Ae.flags|=32,e.flags|=4):(Ae.flags&=-33,e.flags&=-5)}function needTransition(Ae,e){return(!Ae||Ae&&!Ae.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(Ae,e,t=!1){const Oe=Ae.children,ke=e.children;if(isArray$1(Oe)&&isArray$1(ke))for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];let je=ke[Be];je.shapeFlag&1&&!je.dynamicChildren&&((je.patchFlag<=0||je.patchFlag===32)&&(je=ke[Be]=cloneIfMounted(ke[Be]),je.el=Ue.el),!t&&je.patchFlag!==-2&&traverseStaticChildren(Ue,je)),je.type===Text$1&&(je.el=Ue.el)}}function getSequence(Ae){const e=Ae.slice(),t=[0];let Oe,ke,Be,Ue,je;const We=Ae.length;for(Oe=0;Oe<We;Oe++){const Qe=Ae[Oe];if(Qe!==0){if(ke=t[t.length-1],Ae[ke]<Qe){e[Oe]=ke,t.push(Oe);continue}for(Be=0,Ue=t.length-1;Be<Ue;)je=Be+Ue>>1,Ae[t[je]]<Qe?Be=je+1:Ue=je;Qe<Ae[t[Be]]&&(Be>0&&(e[Oe]=t[Be-1]),t[Be]=Oe)}}for(Be=t.length,Ue=t[Be-1];Be-- >0;)t[Be]=Ue,Ue=e[Ue];return t}function locateNonHydratedAsyncRoot(Ae){const e=Ae.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(Ae){if(Ae)for(let e=0;e<Ae.length;e++)Ae[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(Ae,e){return doWatch(Ae,null,e)}function watchPostEffect(Ae,e){return doWatch(Ae,null,{flush:"post"})}function watchSyncEffect(Ae,e){return doWatch(Ae,null,{flush:"sync"})}function watch(Ae,e,t){return doWatch(Ae,e,t)}function doWatch(Ae,e,t=EMPTY_OBJ){const{immediate:Oe,deep:ke,flush:Be,once:Ue}=t,je=extend$5({},t),We=e&&Oe||!e&&Be!=="post";let Qe;if(isInSSRComponentSetup){if(Be==="sync"){const Sn=useSSRContext();Qe=Sn.__watcherHandles||(Sn.__watcherHandles=[])}else if(!We){const Sn=()=>{};return Sn.stop=NOOP,Sn.resume=NOOP,Sn.pause=NOOP,Sn}}const Cn=currentInstance;je.call=(Sn,Tn,Dn)=>callWithAsyncErrorHandling(Sn,Cn,Tn,Dn);let An=!1;Be==="post"?je.scheduler=Sn=>{queuePostRenderEffect(Sn,Cn&&Cn.suspense)}:Be!=="sync"&&(An=!0,je.scheduler=(Sn,Tn)=>{Tn?Sn():queueJob(Sn)}),je.augmentJob=Sn=>{e&&(Sn.flags|=4),An&&(Sn.flags|=2,Cn&&(Sn.id=Cn.uid,Sn.i=Cn))};const En=watch$1(Ae,e,je);return isInSSRComponentSetup&&(Qe?Qe.push(En):We&&En()),En}function instanceWatch(Ae,e,t){const Oe=this.proxy,ke=isString(Ae)?Ae.includes(".")?createPathGetter(Oe,Ae):()=>Oe[Ae]:Ae.bind(Oe,Oe);let Be;isFunction$1(e)?Be=e:(Be=e.handler,t=e);const Ue=setCurrentInstance(this),je=doWatch(ke,Be.bind(Oe),t);return Ue(),je}function createPathGetter(Ae,e){const t=e.split(".");return()=>{let Oe=Ae;for(let ke=0;ke<t.length&&Oe;ke++)Oe=Oe[t[ke]];return Oe}}function useModel(Ae,e,t=EMPTY_OBJ){const Oe=getCurrentInstance(),ke=camelize(e),Be=hyphenate(e),Ue=getModelModifiers(Ae,ke),je=customRef((We,Qe)=>{let Cn,An=EMPTY_OBJ,En;return watchSyncEffect(()=>{const Sn=Ae[ke];hasChanged(Cn,Sn)&&(Cn=Sn,Qe())}),{get(){return We(),t.get?t.get(Cn):Cn},set(Sn){const Tn=t.set?t.set(Sn):Sn;if(!hasChanged(Tn,Cn)&&!(An!==EMPTY_OBJ&&hasChanged(Sn,An)))return;const Dn=Oe.vnode.props;Dn&&(e in Dn||ke in Dn||Be in Dn)&&(`onUpdate:${e}`in Dn||`onUpdate:${ke}`in Dn||`onUpdate:${Be}`in Dn)||(Cn=Sn,Qe()),Oe.emit(`update:${e}`,Tn),hasChanged(Sn,Tn)&&hasChanged(Sn,An)&&!hasChanged(Tn,En)&&Qe(),An=Sn,En=Tn}}});return je[Symbol.iterator]=()=>{let We=0;return{next(){return We<2?{value:We++?Ue||EMPTY_OBJ:je,done:!1}:{done:!0}}}},je}const getModelModifiers=(Ae,e)=>e==="modelValue"||e==="model-value"?Ae.modelModifiers:Ae[`${e}Modifiers`]||Ae[`${camelize(e)}Modifiers`]||Ae[`${hyphenate(e)}Modifiers`];function emit(Ae,e,...t){if(Ae.isUnmounted)return;const Oe=Ae.vnode.props||EMPTY_OBJ;let ke=t;const Be=e.startsWith("update:"),Ue=Be&&getModelModifiers(Oe,e.slice(7));Ue&&(Ue.trim&&(ke=t.map(Cn=>isString(Cn)?Cn.trim():Cn)),Ue.number&&(ke=t.map(looseToNumber)));let je,We=Oe[je=toHandlerKey(e)]||Oe[je=toHandlerKey(camelize(e))];!We&&Be&&(We=Oe[je=toHandlerKey(hyphenate(e))]),We&&callWithAsyncErrorHandling(We,Ae,6,ke);const Qe=Oe[je+"Once"];if(Qe){if(!Ae.emitted)Ae.emitted={};else if(Ae.emitted[je])return;Ae.emitted[je]=!0,callWithAsyncErrorHandling(Qe,Ae,6,ke)}}function normalizeEmitsOptions(Ae,e,t=!1){const Oe=e.emitsCache,ke=Oe.get(Ae);if(ke!==void 0)return ke;const Be=Ae.emits;let Ue={},je=!1;if(!isFunction$1(Ae)){const We=Qe=>{const Cn=normalizeEmitsOptions(Qe,e,!0);Cn&&(je=!0,extend$5(Ue,Cn))};!t&&e.mixins.length&&e.mixins.forEach(We),Ae.extends&&We(Ae.extends),Ae.mixins&&Ae.mixins.forEach(We)}return!Be&&!je?(isObject$1(Ae)&&Oe.set(Ae,null),null):(isArray$1(Be)?Be.forEach(We=>Ue[We]=null):extend$5(Ue,Be),isObject$1(Ae)&&Oe.set(Ae,Ue),Ue)}function isEmitListener(Ae,e){return!Ae||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(Ae,e[0].toLowerCase()+e.slice(1))||hasOwn(Ae,hyphenate(e))||hasOwn(Ae,e))}function markAttrsAccessed(){}function renderComponentRoot(Ae){const{type:e,vnode:t,proxy:Oe,withProxy:ke,propsOptions:[Be],slots:Ue,attrs:je,emit:We,render:Qe,renderCache:Cn,props:An,data:En,setupState:Sn,ctx:Tn,inheritAttrs:Dn}=Ae,ti=setCurrentRenderingInstance(Ae);let ni,ii;try{if(t.shapeFlag&4){const oi=ke||Oe,ci=oi;ni=normalizeVNode(Qe.call(ci,oi,Cn,An,Sn,En,Tn)),ii=je}else{const oi=e;ni=normalizeVNode(oi.length>1?oi(An,{attrs:je,slots:Ue,emit:We}):oi(An,null)),ii=e.props?je:getFunctionalFallthrough(je)}}catch(oi){blockStack.length=0,handleError(oi,Ae,1),ni=createVNode(Comment)}let si=ni;if(ii&&Dn!==!1){const oi=Object.keys(ii),{shapeFlag:ci}=si;oi.length&&ci&7&&(Be&&oi.some(isModelListener)&&(ii=filterModelListeners(ii,Be)),si=cloneVNode(si,ii,!1,!0))}return t.dirs&&(si=cloneVNode(si,null,!1,!0),si.dirs=si.dirs?si.dirs.concat(t.dirs):t.dirs),t.transition&&setTransitionHooks(si,t.transition),ni=si,setCurrentRenderingInstance(ti),ni}function filterSingleRoot(Ae,e=!0){let t;for(let Oe=0;Oe<Ae.length;Oe++){const ke=Ae[Oe];if(isVNode(ke)){if(ke.type!==Comment||ke.children==="v-if"){if(t)return;t=ke}}else return}return t}const getFunctionalFallthrough=Ae=>{let e;for(const t in Ae)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=Ae[t]);return e},filterModelListeners=(Ae,e)=>{const t={};for(const Oe in Ae)(!isModelListener(Oe)||!(Oe.slice(9)in e))&&(t[Oe]=Ae[Oe]);return t};function shouldUpdateComponent(Ae,e,t){const{props:Oe,children:ke,component:Be}=Ae,{props:Ue,children:je,patchFlag:We}=e,Qe=Be.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&We>=0){if(We&1024)return!0;if(We&16)return Oe?hasPropsChanged(Oe,Ue,Qe):!!Ue;if(We&8){const Cn=e.dynamicProps;for(let An=0;An<Cn.length;An++){const En=Cn[An];if(Ue[En]!==Oe[En]&&!isEmitListener(Qe,En))return!0}}}else return(ke||je)&&(!je||!je.$stable)?!0:Oe===Ue?!1:Oe?Ue?hasPropsChanged(Oe,Ue,Qe):!0:!!Ue;return!1}function hasPropsChanged(Ae,e,t){const Oe=Object.keys(e);if(Oe.length!==Object.keys(Ae).length)return!0;for(let ke=0;ke<Oe.length;ke++){const Be=Oe[ke];if(e[Be]!==Ae[Be]&&!isEmitListener(t,Be))return!0}return!1}function updateHOCHostEl({vnode:Ae,parent:e},t){for(;e;){const Oe=e.subTree;if(Oe.suspense&&Oe.suspense.activeBranch===Ae&&(Oe.el=Ae.el),Oe===Ae)(Ae=e.vnode).el=t,e=e.parent;else break}}const isSuspense=Ae=>Ae.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe){if(Ae==null)mountSuspense(e,t,Oe,ke,Be,Ue,je,We,Qe);else{if(Be&&Be.deps>0&&!Ae.suspense.isInFallback){e.suspense=Ae.suspense,e.suspense.vnode=e,e.el=Ae.el;return}patchSuspense(Ae,e,t,Oe,ke,Ue,je,We,Qe)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Ae,e){const t=Ae.props&&Ae.props[e];isFunction$1(t)&&t()}function mountSuspense(Ae,e,t,Oe,ke,Be,Ue,je,We){const{p:Qe,o:{createElement:Cn}}=We,An=Cn("div"),En=Ae.suspense=createSuspenseBoundary(Ae,ke,Oe,e,An,t,Be,Ue,je,We);Qe(null,En.pendingBranch=Ae.ssContent,An,null,Oe,En,Be,Ue),En.deps>0?(triggerEvent(Ae,"onPending"),triggerEvent(Ae,"onFallback"),Qe(null,Ae.ssFallback,e,t,Oe,null,Be,Ue),setActiveBranch(En,Ae.ssFallback)):En.resolve(!1,!0)}function patchSuspense(Ae,e,t,Oe,ke,Be,Ue,je,{p:We,um:Qe,o:{createElement:Cn}}){const An=e.suspense=Ae.suspense;An.vnode=e,e.el=Ae.el;const En=e.ssContent,Sn=e.ssFallback,{activeBranch:Tn,pendingBranch:Dn,isInFallback:ti,isHydrating:ni}=An;if(Dn)An.pendingBranch=En,isSameVNodeType(En,Dn)?(We(Dn,En,An.hiddenContainer,null,ke,An,Be,Ue,je),An.deps<=0?An.resolve():ti&&(ni||(We(Tn,Sn,t,Oe,ke,null,Be,Ue,je),setActiveBranch(An,Sn)))):(An.pendingId=suspenseId++,ni?(An.isHydrating=!1,An.activeBranch=Dn):Qe(Dn,ke,An),An.deps=0,An.effects.length=0,An.hiddenContainer=Cn("div"),ti?(We(null,En,An.hiddenContainer,null,ke,An,Be,Ue,je),An.deps<=0?An.resolve():(We(Tn,Sn,t,Oe,ke,null,Be,Ue,je),setActiveBranch(An,Sn))):Tn&&isSameVNodeType(En,Tn)?(We(Tn,En,t,Oe,ke,An,Be,Ue,je),An.resolve(!0)):(We(null,En,An.hiddenContainer,null,ke,An,Be,Ue,je),An.deps<=0&&An.resolve()));else if(Tn&&isSameVNodeType(En,Tn))We(Tn,En,t,Oe,ke,An,Be,Ue,je),setActiveBranch(An,En);else if(triggerEvent(e,"onPending"),An.pendingBranch=En,En.shapeFlag&512?An.pendingId=En.component.suspenseId:An.pendingId=suspenseId++,We(null,En,An.hiddenContainer,null,ke,An,Be,Ue,je),An.deps<=0)An.resolve();else{const{timeout:ii,pendingId:si}=An;ii>0?setTimeout(()=>{An.pendingId===si&&An.fallback(Sn)},ii):ii===0&&An.fallback(Sn)}}function createSuspenseBoundary(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn=!1){const{p:An,m:En,um:Sn,n:Tn,o:{parentNode:Dn,remove:ti}}=Qe;let ni;const ii=isVNodeSuspensible(Ae);ii&&e&&e.pendingBranch&&(ni=e.pendingId,e.deps++);const si=Ae.props?toNumber(Ae.props.timeout):void 0,oi=Be,ci={vnode:Ae,parent:e,parentComponent:t,namespace:Ue,container:Oe,hiddenContainer:ke,deps:0,pendingId:suspenseId++,timeout:typeof si=="number"?si:-1,activeBranch:null,pendingBranch:null,isInFallback:!Cn,isHydrating:Cn,isUnmounted:!1,effects:[],resolve(Pi=!1,Ai=!1){const{vnode:fi,activeBranch:Oi,pendingBranch:Ni,pendingId:ui,effects:li,parentComponent:Ri,container:Mi}=ci;let Bi=!1;ci.isHydrating?ci.isHydrating=!1:Pi||(Bi=Oi&&Ni.transition&&Ni.transition.mode==="out-in",Bi&&(Oi.transition.afterLeave=()=>{ui===ci.pendingId&&(En(Ni,Mi,Be===oi?Tn(Oi):Be,0),queuePostFlushCb(li))}),Oi&&(Dn(Oi.el)===Mi&&(Be=Tn(Oi)),Sn(Oi,Ri,ci,!0)),Bi||En(Ni,Mi,Be,0)),setActiveBranch(ci,Ni),ci.pendingBranch=null,ci.isInFallback=!1;let er=ci.parent,nr=!1;for(;er;){if(er.pendingBranch){er.effects.push(...li),nr=!0;break}er=er.parent}!nr&&!Bi&&queuePostFlushCb(li),ci.effects=[],ii&&e&&e.pendingBranch&&ni===e.pendingId&&(e.deps--,e.deps===0&&!Ai&&e.resolve()),triggerEvent(fi,"onResolve")},fallback(Pi){if(!ci.pendingBranch)return;const{vnode:Ai,activeBranch:fi,parentComponent:Oi,container:Ni,namespace:ui}=ci;triggerEvent(Ai,"onFallback");const li=Tn(fi),Ri=()=>{ci.isInFallback&&(An(null,Pi,Ni,li,Oi,null,ui,je,We),setActiveBranch(ci,Pi))},Mi=Pi.transition&&Pi.transition.mode==="out-in";Mi&&(fi.transition.afterLeave=Ri),ci.isInFallback=!0,Sn(fi,Oi,null,!0),Mi||Ri()},move(Pi,Ai,fi){ci.activeBranch&&En(ci.activeBranch,Pi,Ai,fi),ci.container=Pi},next(){return ci.activeBranch&&Tn(ci.activeBranch)},registerDep(Pi,Ai,fi){const Oi=!!ci.pendingBranch;Oi&&ci.deps++;const Ni=Pi.vnode.el;Pi.asyncDep.catch(ui=>{handleError(ui,Pi,0)}).then(ui=>{if(Pi.isUnmounted||ci.isUnmounted||ci.pendingId!==Pi.suspenseId)return;Pi.asyncResolved=!0;const{vnode:li}=Pi;handleSetupResult(Pi,ui,!1),Ni&&(li.el=Ni);const Ri=!Ni&&Pi.subTree.el;Ai(Pi,li,Dn(Ni||Pi.subTree.el),Ni?null:Tn(Pi.subTree),ci,Ue,fi),Ri&&ti(Ri),updateHOCHostEl(Pi,li.el),Oi&&--ci.deps===0&&ci.resolve()})},unmount(Pi,Ai){ci.isUnmounted=!0,ci.activeBranch&&Sn(ci.activeBranch,t,Pi,Ai),ci.pendingBranch&&Sn(ci.pendingBranch,t,Pi,Ai)}};return ci}function hydrateSuspense(Ae,e,t,Oe,ke,Be,Ue,je,We){const Qe=e.suspense=createSuspenseBoundary(e,Oe,t,Ae.parentNode,document.createElement("div"),null,ke,Be,Ue,je,!0),Cn=We(Ae,Qe.pendingBranch=e.ssContent,t,Qe,Be,Ue);return Qe.deps===0&&Qe.resolve(!1,!0),Cn}function normalizeSuspenseChildren(Ae){const{shapeFlag:e,children:t}=Ae,Oe=e&32;Ae.ssContent=normalizeSuspenseSlot(Oe?t.default:t),Ae.ssFallback=Oe?normalizeSuspenseSlot(t.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Ae){let e;if(isFunction$1(Ae)){const t=isBlockTreeEnabled&&Ae._c;t&&(Ae._d=!1,openBlock()),Ae=Ae(),t&&(Ae._d=!0,e=currentBlock,closeBlock())}return isArray$1(Ae)&&(Ae=filterSingleRoot(Ae)),Ae=normalizeVNode(Ae),e&&!Ae.dynamicChildren&&(Ae.dynamicChildren=e.filter(t=>t!==Ae)),Ae}function queueEffectWithSuspense(Ae,e){e&&e.pendingBranch?isArray$1(Ae)?e.effects.push(...Ae):e.effects.push(Ae):queuePostFlushCb(Ae)}function setActiveBranch(Ae,e){Ae.activeBranch=e;const{vnode:t,parentComponent:Oe}=Ae;let ke=e.el;for(;!ke&&e.component;)e=e.component.subTree,ke=e.el;t.el=ke,Oe&&Oe.subTree===t&&(Oe.vnode.el=ke,updateHOCHostEl(Oe,ke))}function isVNodeSuspensible(Ae){const e=Ae.props&&Ae.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Ae=!1){blockStack.push(currentBlock=Ae?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Ae,e=!1){isBlockTreeEnabled+=Ae,Ae<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(Ae){return Ae.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Ae),Ae}function createElementBlock(Ae,e,t,Oe,ke,Be){return setupBlock(createBaseVNode(Ae,e,t,Oe,ke,Be,!0))}function createBlock(Ae,e,t,Oe,ke){return setupBlock(createVNode(Ae,e,t,Oe,ke,!0))}function isVNode(Ae){return Ae?Ae.__v_isVNode===!0:!1}function isSameVNodeType(Ae,e){return Ae.type===e.type&&Ae.key===e.key}function transformVNodeArgs(Ae){}const normalizeKey=({key:Ae})=>Ae??null,normalizeRef=({ref:Ae,ref_key:e,ref_for:t})=>(typeof Ae=="number"&&(Ae=""+Ae),Ae!=null?isString(Ae)||isRef(Ae)||isFunction$1(Ae)?{i:currentRenderingInstance,r:Ae,k:e,f:!!t}:Ae:null);function createBaseVNode(Ae,e=null,t=null,Oe=0,ke=null,Be=Ae===Fragment?0:1,Ue=!1,je=!1){const We={__v_isVNode:!0,__v_skip:!0,type:Ae,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Be,patchFlag:Oe,dynamicProps:ke,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return je?(normalizeChildren(We,t),Be&128&&Ae.normalize(We)):t&&(We.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!Ue&&currentBlock&&(We.patchFlag>0||Be&6)&&We.patchFlag!==32&&currentBlock.push(We),We}const createVNode=_createVNode;function _createVNode(Ae,e=null,t=null,Oe=0,ke=null,Be=!1){if((!Ae||Ae===NULL_DYNAMIC_COMPONENT)&&(Ae=Comment),isVNode(Ae)){const je=cloneVNode(Ae,e,!0);return t&&normalizeChildren(je,t),isBlockTreeEnabled>0&&!Be&&currentBlock&&(je.shapeFlag&6?currentBlock[currentBlock.indexOf(Ae)]=je:currentBlock.push(je)),je.patchFlag=-2,je}if(isClassComponent(Ae)&&(Ae=Ae.__vccOpts),e){e=guardReactiveProps(e);let{class:je,style:We}=e;je&&!isString(je)&&(e.class=normalizeClass(je)),isObject$1(We)&&(isProxy(We)&&!isArray$1(We)&&(We=extend$5({},We)),e.style=normalizeStyle(We))}const Ue=isString(Ae)?1:isSuspense(Ae)?128:isTeleport(Ae)?64:isObject$1(Ae)?4:isFunction$1(Ae)?2:0;return createBaseVNode(Ae,e,t,Oe,ke,Ue,Be,!0)}function guardReactiveProps(Ae){return Ae?isProxy(Ae)||isInternalObject(Ae)?extend$5({},Ae):Ae:null}function cloneVNode(Ae,e,t=!1,Oe=!1){const{props:ke,ref:Be,patchFlag:Ue,children:je,transition:We}=Ae,Qe=e?mergeProps(ke||{},e):ke,Cn={__v_isVNode:!0,__v_skip:!0,type:Ae.type,props:Qe,key:Qe&&normalizeKey(Qe),ref:e&&e.ref?t&&Be?isArray$1(Be)?Be.concat(normalizeRef(e)):[Be,normalizeRef(e)]:normalizeRef(e):Be,scopeId:Ae.scopeId,slotScopeIds:Ae.slotScopeIds,children:je,target:Ae.target,targetStart:Ae.targetStart,targetAnchor:Ae.targetAnchor,staticCount:Ae.staticCount,shapeFlag:Ae.shapeFlag,patchFlag:e&&Ae.type!==Fragment?Ue===-1?16:Ue|16:Ue,dynamicProps:Ae.dynamicProps,dynamicChildren:Ae.dynamicChildren,appContext:Ae.appContext,dirs:Ae.dirs,transition:We,component:Ae.component,suspense:Ae.suspense,ssContent:Ae.ssContent&&cloneVNode(Ae.ssContent),ssFallback:Ae.ssFallback&&cloneVNode(Ae.ssFallback),el:Ae.el,anchor:Ae.anchor,ctx:Ae.ctx,ce:Ae.ce};return We&&Oe&&setTransitionHooks(Cn,We.clone(Cn)),Cn}function createTextVNode(Ae=" ",e=0){return createVNode(Text$1,null,Ae,e)}function createStaticVNode(Ae,e){const t=createVNode(Static,null,Ae);return t.staticCount=e,t}function createCommentVNode(Ae="",e=!1){return e?(openBlock(),createBlock(Comment,null,Ae)):createVNode(Comment,null,Ae)}function normalizeVNode(Ae){return Ae==null||typeof Ae=="boolean"?createVNode(Comment):isArray$1(Ae)?createVNode(Fragment,null,Ae.slice()):isVNode(Ae)?cloneIfMounted(Ae):createVNode(Text$1,null,String(Ae))}function cloneIfMounted(Ae){return Ae.el===null&&Ae.patchFlag!==-1||Ae.memo?Ae:cloneVNode(Ae)}function normalizeChildren(Ae,e){let t=0;const{shapeFlag:Oe}=Ae;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(Oe&65){const ke=e.default;ke&&(ke._c&&(ke._d=!1),normalizeChildren(Ae,ke()),ke._c&&(ke._d=!0));return}else{t=32;const ke=e._;!ke&&!isInternalObject(e)?e._ctx=currentRenderingInstance:ke===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,Ae.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),Oe&64?(t=16,e=[createTextVNode(e)]):t=8);Ae.children=e,Ae.shapeFlag|=t}function mergeProps(...Ae){const e={};for(let t=0;t<Ae.length;t++){const Oe=Ae[t];for(const ke in Oe)if(ke==="class")e.class!==Oe.class&&(e.class=normalizeClass([e.class,Oe.class]));else if(ke==="style")e.style=normalizeStyle([e.style,Oe.style]);else if(isOn(ke)){const Be=e[ke],Ue=Oe[ke];Ue&&Be!==Ue&&!(isArray$1(Be)&&Be.includes(Ue))&&(e[ke]=Be?[].concat(Be,Ue):Ue)}else ke!==""&&(e[ke]=Oe[ke])}return e}function invokeVNodeHook(Ae,e,t,Oe=null){callWithAsyncErrorHandling(Ae,e,7,[t,Oe])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Ae,e,t){const Oe=Ae.type,ke=(e?e.appContext:Ae.appContext)||emptyAppContext,Be={uid:uid++,vnode:Ae,type:Oe,parent:e,appContext:ke,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(ke.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(Oe,ke),emitsOptions:normalizeEmitsOptions(Oe,ke),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:Oe.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Be.ctx={_:Be},Be.root=e?e.root:Be,Be.emit=emit.bind(null,Be),Ae.ce&&Ae.ce(Be),Be}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const Ae=getGlobalThis(),e=(t,Oe)=>{let ke;return(ke=Ae[t])||(ke=Ae[t]=[]),ke.push(Oe),Be=>{ke.length>1?ke.forEach(Ue=>Ue(Be)):ke[0](Be)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=Ae=>{const e=currentInstance;return internalSetCurrentInstance(Ae),Ae.scope.on(),()=>{Ae.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Ae){return Ae.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Ae,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:Oe,children:ke}=Ae.vnode,Be=isStatefulComponent(Ae);initProps(Ae,Oe,Be,e),initSlots(Ae,ke,t);const Ue=Be?setupStatefulComponent(Ae,e):void 0;return e&&setInSSRSetupState(!1),Ue}function setupStatefulComponent(Ae,e){const t=Ae.type;Ae.accessCache=Object.create(null),Ae.proxy=new Proxy(Ae.ctx,PublicInstanceProxyHandlers);const{setup:Oe}=t;if(Oe){pauseTracking();const ke=Ae.setupContext=Oe.length>1?createSetupContext(Ae):null,Be=setCurrentInstance(Ae),Ue=callWithErrorHandling(Oe,Ae,0,[Ae.props,ke]),je=isPromise(Ue);if(resetTracking(),Be(),(je||Ae.sp)&&!isAsyncWrapper(Ae)&&markAsyncBoundary(Ae),je){if(Ue.then(unsetCurrentInstance,unsetCurrentInstance),e)return Ue.then(We=>{handleSetupResult(Ae,We,e)}).catch(We=>{handleError(We,Ae,0)});Ae.asyncDep=Ue}else handleSetupResult(Ae,Ue,e)}else finishComponentSetup(Ae,e)}function handleSetupResult(Ae,e,t){isFunction$1(e)?Ae.type.__ssrInlineRender?Ae.ssrRender=e:Ae.render=e:isObject$1(e)&&(Ae.setupState=proxyRefs(e)),finishComponentSetup(Ae,t)}let compile$1,installWithProxy;function registerRuntimeCompiler(Ae){compile$1=Ae,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(Ae,e,t){const Oe=Ae.type;if(!Ae.render){if(!e&&compile$1&&!Oe.render){const ke=Oe.template||resolveMergedOptions(Ae).template;if(ke){const{isCustomElement:Be,compilerOptions:Ue}=Ae.appContext.config,{delimiters:je,compilerOptions:We}=Oe,Qe=extend$5(extend$5({isCustomElement:Be,delimiters:je},Ue),We);Oe.render=compile$1(ke,Qe)}}Ae.render=Oe.render||NOOP,installWithProxy&&installWithProxy(Ae)}{const ke=setCurrentInstance(Ae);pauseTracking();try{applyOptions(Ae)}finally{resetTracking(),ke()}}}const attrsProxyHandlers={get(Ae,e){return track(Ae,"get",""),Ae[e]}};function createSetupContext(Ae){const e=t=>{Ae.exposed=t||{}};return{attrs:new Proxy(Ae.attrs,attrsProxyHandlers),slots:Ae.slots,emit:Ae.emit,expose:e}}function getComponentPublicInstance(Ae){return Ae.exposed?Ae.exposeProxy||(Ae.exposeProxy=new Proxy(proxyRefs(markRaw(Ae.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](Ae)},has(e,t){return t in e||t in publicPropertiesMap}})):Ae.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=Ae=>Ae.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(Ae,e=!0){return isFunction$1(Ae)?Ae.displayName||Ae.name:Ae.name||e&&Ae.__name}function formatComponentName(Ae,e,t=!1){let Oe=getComponentName(e);if(!Oe&&e.__file){const ke=e.__file.match(/([^/\\]+)\.\w+$/);ke&&(Oe=ke[1])}if(!Oe&&Ae&&Ae.parent){const ke=Be=>{for(const Ue in Be)if(Be[Ue]===e)return Ue};Oe=ke(Ae.components||Ae.parent.type.components)||ke(Ae.appContext.components)}return Oe?classify(Oe):t?"App":"Anonymous"}function isClassComponent(Ae){return isFunction$1(Ae)&&"__vccOpts"in Ae}const computed=(Ae,e)=>computed$1(Ae,e,isInSSRComponentSetup);function h$1(Ae,e,t){const Oe=arguments.length;return Oe===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(Ae,null,[e]):createVNode(Ae,e):createVNode(Ae,null,e):(Oe>3?t=Array.prototype.slice.call(arguments,2):Oe===3&&isVNode(t)&&(t=[t]),createVNode(Ae,e,t))}function initCustomFormatter(){}function withMemo(Ae,e,t,Oe){const ke=t[Oe];if(ke&&isMemoSame(ke,Ae))return ke;const Be=e();return Be.memo=Ae.slice(),Be.cacheIndex=Oe,t[Oe]=Be}function isMemoSame(Ae,e){const t=Ae.memo;if(t.length!=e.length)return!1;for(let Oe=0;Oe<t.length;Oe++)if(hasChanged(t[Oe],e[Oe]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Ae),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:Ae=>Ae})}catch{}const unsafeToTrustedHTML=policy?Ae=>policy.createHTML(Ae):Ae=>Ae,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Ae,e,t)=>{e.insertBefore(Ae,t||null)},remove:Ae=>{const e=Ae.parentNode;e&&e.removeChild(Ae)},createElement:(Ae,e,t,Oe)=>{const ke=e==="svg"?doc.createElementNS(svgNS,Ae):e==="mathml"?doc.createElementNS(mathmlNS,Ae):t?doc.createElement(Ae,{is:t}):doc.createElement(Ae);return Ae==="select"&&Oe&&Oe.multiple!=null&&ke.setAttribute("multiple",Oe.multiple),ke},createText:Ae=>doc.createTextNode(Ae),createComment:Ae=>doc.createComment(Ae),setText:(Ae,e)=>{Ae.nodeValue=e},setElementText:(Ae,e)=>{Ae.textContent=e},parentNode:Ae=>Ae.parentNode,nextSibling:Ae=>Ae.nextSibling,querySelector:Ae=>doc.querySelector(Ae),setScopeId(Ae,e){Ae.setAttribute(e,"")},insertStaticContent(Ae,e,t,Oe,ke,Be){const Ue=t?t.previousSibling:e.lastChild;if(ke&&(ke===Be||ke.nextSibling))for(;e.insertBefore(ke.cloneNode(!0),t),!(ke===Be||!(ke=ke.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(Oe==="svg"?`<svg>${Ae}</svg>`:Oe==="mathml"?`<math>${Ae}</math>`:Ae);const je=templateContainer.content;if(Oe==="svg"||Oe==="mathml"){const We=je.firstChild;for(;We.firstChild;)je.appendChild(We.firstChild);je.removeChild(We)}e.insertBefore(je,t)}return[Ue?Ue.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=Ae=>(Ae.displayName="Transition",Ae.props=TransitionPropsValidators,Ae),Transition=decorate$1((Ae,{slots:e})=>h$1(BaseTransition,resolveTransitionProps(Ae),e)),callHook=(Ae,e=[])=>{isArray$1(Ae)?Ae.forEach(t=>t(...e)):Ae&&Ae(...e)},hasExplicitCallback=Ae=>Ae?isArray$1(Ae)?Ae.some(e=>e.length>1):Ae.length>1:!1;function resolveTransitionProps(Ae){const e={};for(const li in Ae)li in DOMTransitionPropsValidators||(e[li]=Ae[li]);if(Ae.css===!1)return e;const{name:t="v",type:Oe,duration:ke,enterFromClass:Be=`${t}-enter-from`,enterActiveClass:Ue=`${t}-enter-active`,enterToClass:je=`${t}-enter-to`,appearFromClass:We=Be,appearActiveClass:Qe=Ue,appearToClass:Cn=je,leaveFromClass:An=`${t}-leave-from`,leaveActiveClass:En=`${t}-leave-active`,leaveToClass:Sn=`${t}-leave-to`}=Ae,Tn=normalizeDuration(ke),Dn=Tn&&Tn[0],ti=Tn&&Tn[1],{onBeforeEnter:ni,onEnter:ii,onEnterCancelled:si,onLeave:oi,onLeaveCancelled:ci,onBeforeAppear:Pi=ni,onAppear:Ai=ii,onAppearCancelled:fi=si}=e,Oi=(li,Ri,Mi,Bi)=>{li._enterCancelled=Bi,removeTransitionClass(li,Ri?Cn:je),removeTransitionClass(li,Ri?Qe:Ue),Mi&&Mi()},Ni=(li,Ri)=>{li._isLeaving=!1,removeTransitionClass(li,An),removeTransitionClass(li,Sn),removeTransitionClass(li,En),Ri&&Ri()},ui=li=>(Ri,Mi)=>{const Bi=li?Ai:ii,er=()=>Oi(Ri,li,Mi);callHook(Bi,[Ri,er]),nextFrame(()=>{removeTransitionClass(Ri,li?We:Be),addTransitionClass(Ri,li?Cn:je),hasExplicitCallback(Bi)||whenTransitionEnds(Ri,Oe,Dn,er)})};return extend$5(e,{onBeforeEnter(li){callHook(ni,[li]),addTransitionClass(li,Be),addTransitionClass(li,Ue)},onBeforeAppear(li){callHook(Pi,[li]),addTransitionClass(li,We),addTransitionClass(li,Qe)},onEnter:ui(!1),onAppear:ui(!0),onLeave(li,Ri){li._isLeaving=!0;const Mi=()=>Ni(li,Ri);addTransitionClass(li,An),li._enterCancelled?(addTransitionClass(li,En),forceReflow()):(forceReflow(),addTransitionClass(li,En)),nextFrame(()=>{li._isLeaving&&(removeTransitionClass(li,An),addTransitionClass(li,Sn),hasExplicitCallback(oi)||whenTransitionEnds(li,Oe,ti,Mi))}),callHook(oi,[li,Mi])},onEnterCancelled(li){Oi(li,!1,void 0,!0),callHook(si,[li])},onAppearCancelled(li){Oi(li,!0,void 0,!0),callHook(fi,[li])},onLeaveCancelled(li){Ni(li),callHook(ci,[li])}})}function normalizeDuration(Ae){if(Ae==null)return null;if(isObject$1(Ae))return[NumberOf(Ae.enter),NumberOf(Ae.leave)];{const e=NumberOf(Ae);return[e,e]}}function NumberOf(Ae){return toNumber(Ae)}function addTransitionClass(Ae,e){e.split(/\s+/).forEach(t=>t&&Ae.classList.add(t)),(Ae[vtcKey]||(Ae[vtcKey]=new Set)).add(e)}function removeTransitionClass(Ae,e){e.split(/\s+/).forEach(Oe=>Oe&&Ae.classList.remove(Oe));const t=Ae[vtcKey];t&&(t.delete(e),t.size||(Ae[vtcKey]=void 0))}function nextFrame(Ae){requestAnimationFrame(()=>{requestAnimationFrame(Ae)})}let endId=0;function whenTransitionEnds(Ae,e,t,Oe){const ke=Ae._endId=++endId,Be=()=>{ke===Ae._endId&&Oe()};if(t!=null)return setTimeout(Be,t);const{type:Ue,timeout:je,propCount:We}=getTransitionInfo(Ae,e);if(!Ue)return Oe();const Qe=Ue+"end";let Cn=0;const An=()=>{Ae.removeEventListener(Qe,En),Be()},En=Sn=>{Sn.target===Ae&&++Cn>=We&&An()};setTimeout(()=>{Cn<We&&An()},je+1),Ae.addEventListener(Qe,En)}function getTransitionInfo(Ae,e){const t=window.getComputedStyle(Ae),Oe=Tn=>(t[Tn]||"").split(", "),ke=Oe(`${TRANSITION}Delay`),Be=Oe(`${TRANSITION}Duration`),Ue=getTimeout(ke,Be),je=Oe(`${ANIMATION}Delay`),We=Oe(`${ANIMATION}Duration`),Qe=getTimeout(je,We);let Cn=null,An=0,En=0;e===TRANSITION?Ue>0&&(Cn=TRANSITION,An=Ue,En=Be.length):e===ANIMATION?Qe>0&&(Cn=ANIMATION,An=Qe,En=We.length):(An=Math.max(Ue,Qe),Cn=An>0?Ue>Qe?TRANSITION:ANIMATION:null,En=Cn?Cn===TRANSITION?Be.length:We.length:0);const Sn=Cn===TRANSITION&&/\b(transform|all)(,|$)/.test(Oe(`${TRANSITION}Property`).toString());return{type:Cn,timeout:An,propCount:En,hasTransform:Sn}}function getTimeout(Ae,e){for(;Ae.length<e.length;)Ae=Ae.concat(Ae);return Math.max(...e.map((t,Oe)=>toMs(t)+toMs(Ae[Oe])))}function toMs(Ae){return Ae==="auto"?0:Number(Ae.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(Ae,e,t){const Oe=Ae[vtcKey];Oe&&(e=(e?[e,...Oe]:[...Oe]).join(" ")),e==null?Ae.removeAttribute("class"):t?Ae.setAttribute("class",e):Ae.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(Ae,{value:e},{transition:t}){Ae[vShowOriginalDisplay]=Ae.style.display==="none"?"":Ae.style.display,t&&e?t.beforeEnter(Ae):setDisplay(Ae,e)},mounted(Ae,{value:e},{transition:t}){t&&e&&t.enter(Ae)},updated(Ae,{value:e,oldValue:t},{transition:Oe}){!e!=!t&&(Oe?e?(Oe.beforeEnter(Ae),setDisplay(Ae,!0),Oe.enter(Ae)):Oe.leave(Ae,()=>{setDisplay(Ae,!1)}):setDisplay(Ae,e))},beforeUnmount(Ae,{value:e}){setDisplay(Ae,e)}};function setDisplay(Ae,e){Ae.style.display=e?Ae[vShowOriginalDisplay]:"none",Ae[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:Ae})=>{if(!Ae)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(Ae){const e=getCurrentInstance();if(!e)return;const t=e.ut=(ke=Ae(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Be=>setVarsOnNode(Be,ke))},Oe=()=>{const ke=Ae(e.proxy);e.ce?setVarsOnNode(e.ce,ke):setVarsOnVNode(e.subTree,ke),t(ke)};onBeforeUpdate(()=>{queuePostFlushCb(Oe)}),onMounted(()=>{watch(Oe,NOOP,{flush:"post"});const ke=new MutationObserver(Oe);ke.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>ke.disconnect())})}function setVarsOnVNode(Ae,e){if(Ae.shapeFlag&128){const t=Ae.suspense;Ae=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{setVarsOnVNode(t.activeBranch,e)})}for(;Ae.component;)Ae=Ae.component.subTree;if(Ae.shapeFlag&1&&Ae.el)setVarsOnNode(Ae.el,e);else if(Ae.type===Fragment)Ae.children.forEach(t=>setVarsOnVNode(t,e));else if(Ae.type===Static){let{el:t,anchor:Oe}=Ae;for(;t&&(setVarsOnNode(t,e),t!==Oe);)t=t.nextSibling}}function setVarsOnNode(Ae,e){if(Ae.nodeType===1){const t=Ae.style;let Oe="";for(const ke in e)t.setProperty(`--${ke}`,e[ke]),Oe+=`--${ke}: ${e[ke]};`;t[CSS_VAR_TEXT]=Oe}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(Ae,e,t){const Oe=Ae.style,ke=isString(t);let Be=!1;if(t&&!ke){if(e)if(isString(e))for(const Ue of e.split(";")){const je=Ue.slice(0,Ue.indexOf(":")).trim();t[je]==null&&setStyle(Oe,je,"")}else for(const Ue in e)t[Ue]==null&&setStyle(Oe,Ue,"");for(const Ue in t)Ue==="display"&&(Be=!0),setStyle(Oe,Ue,t[Ue])}else if(ke){if(e!==t){const Ue=Oe[CSS_VAR_TEXT];Ue&&(t+=";"+Ue),Oe.cssText=t,Be=displayRE.test(t)}}else e&&Ae.removeAttribute("style");vShowOriginalDisplay in Ae&&(Ae[vShowOriginalDisplay]=Be?Oe.display:"",Ae[vShowHidden]&&(Oe.display="none"))}const importantRE=/\s*!important$/;function setStyle(Ae,e,t){if(isArray$1(t))t.forEach(Oe=>setStyle(Ae,e,Oe));else if(t==null&&(t=""),e.startsWith("--"))Ae.setProperty(e,t);else{const Oe=autoPrefix(Ae,e);importantRE.test(t)?Ae.setProperty(hyphenate(Oe),t.replace(importantRE,""),"important"):Ae[Oe]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Ae,e){const t=prefixCache[e];if(t)return t;let Oe=camelize(e);if(Oe!=="filter"&&Oe in Ae)return prefixCache[e]=Oe;Oe=capitalize(Oe);for(let ke=0;ke<prefixes.length;ke++){const Be=prefixes[ke]+Oe;if(Be in Ae)return prefixCache[e]=Be}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Ae,e,t,Oe,ke,Be=isSpecialBooleanAttr(e)){Oe&&e.startsWith("xlink:")?t==null?Ae.removeAttributeNS(xlinkNS,e.slice(6,e.length)):Ae.setAttributeNS(xlinkNS,e,t):t==null||Be&&!includeBooleanAttr(t)?Ae.removeAttribute(e):Ae.setAttribute(e,Be?"":isSymbol(t)?String(t):t)}function patchDOMProp(Ae,e,t,Oe,ke){if(e==="innerHTML"||e==="textContent"){t!=null&&(Ae[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const Be=Ae.tagName;if(e==="value"&&Be!=="PROGRESS"&&!Be.includes("-")){const je=Be==="OPTION"?Ae.getAttribute("value")||"":Ae.value,We=t==null?Ae.type==="checkbox"?"on":"":String(t);(je!==We||!("_value"in Ae))&&(Ae.value=We),t==null&&Ae.removeAttribute(e),Ae._value=t;return}let Ue=!1;if(t===""||t==null){const je=typeof Ae[e];je==="boolean"?t=includeBooleanAttr(t):t==null&&je==="string"?(t="",Ue=!0):je==="number"&&(t=0,Ue=!0)}try{Ae[e]=t}catch{}Ue&&Ae.removeAttribute(ke||e)}function addEventListener(Ae,e,t,Oe){Ae.addEventListener(e,t,Oe)}function removeEventListener(Ae,e,t,Oe){Ae.removeEventListener(e,t,Oe)}const veiKey=Symbol("_vei");function patchEvent(Ae,e,t,Oe,ke=null){const Be=Ae[veiKey]||(Ae[veiKey]={}),Ue=Be[e];if(Oe&&Ue)Ue.value=Oe;else{const[je,We]=parseName(e);if(Oe){const Qe=Be[e]=createInvoker(Oe,ke);addEventListener(Ae,je,Qe,We)}else Ue&&(removeEventListener(Ae,je,Ue,We),Be[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Ae){let e;if(optionsModifierRE.test(Ae)){e={};let Oe;for(;Oe=Ae.match(optionsModifierRE);)Ae=Ae.slice(0,Ae.length-Oe[0].length),e[Oe[0].toLowerCase()]=!0}return[Ae[2]===":"?Ae.slice(3):hyphenate(Ae.slice(2)),e]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Ae,e){const t=Oe=>{if(!Oe._vts)Oe._vts=Date.now();else if(Oe._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(Oe,t.value),e,5,[Oe])};return t.value=Ae,t.attached=getNow(),t}function patchStopImmediatePropagation(Ae,e){if(isArray$1(e)){const t=Ae.stopImmediatePropagation;return Ae.stopImmediatePropagation=()=>{t.call(Ae),Ae._stopped=!0},e.map(Oe=>ke=>!ke._stopped&&Oe&&Oe(ke))}else return e}const isNativeOn=Ae=>Ae.charCodeAt(0)===111&&Ae.charCodeAt(1)===110&&Ae.charCodeAt(2)>96&&Ae.charCodeAt(2)<123,patchProp=(Ae,e,t,Oe,ke,Be)=>{const Ue=ke==="svg";e==="class"?patchClass(Ae,Oe,Ue):e==="style"?patchStyle(Ae,t,Oe):isOn(e)?isModelListener(e)||patchEvent(Ae,e,t,Oe,Be):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(Ae,e,Oe,Ue))?(patchDOMProp(Ae,e,Oe),!Ae.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(Ae,e,Oe,Ue,Be,e!=="value")):Ae._isVueCE&&(/[A-Z]/.test(e)||!isString(Oe))?patchDOMProp(Ae,camelize(e),Oe,Be,e):(e==="true-value"?Ae._trueValue=Oe:e==="false-value"&&(Ae._falseValue=Oe),patchAttr(Ae,e,Oe,Ue))};function shouldSetAsProp(Ae,e,t,Oe){if(Oe)return!!(e==="innerHTML"||e==="textContent"||e in Ae&&isNativeOn(e)&&isFunction$1(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&Ae.tagName==="INPUT"||e==="type"&&Ae.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const ke=Ae.tagName;if(ke==="IMG"||ke==="VIDEO"||ke==="CANVAS"||ke==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in Ae}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(Ae,e,t){const Oe=defineComponent(Ae,e);isPlainObject$1(Oe)&&extend$5(Oe,e);class ke extends VueElement{constructor(Ue){super(Oe,Ue,t)}}return ke.def=Oe,ke}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(Ae,e)=>defineCustomElement(Ae,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},Oe=createApp){super(),this._def=e,this._props=t,this._createApp=Oe,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&Oe!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let Oe=0;Oe<this.attributes.length;Oe++)this._setAttr(this.attributes[Oe].name);this._ob=new MutationObserver(Oe=>{for(const ke of Oe)this._setAttr(ke.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(Oe,ke=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Be,styles:Ue}=Oe;let je;if(Be&&!isArray$1(Be))for(const We in Be){const Qe=Be[We];(Qe===Number||Qe&&Qe.type===Number)&&(We in this._props&&(this._props[We]=toNumber(this._props[We])),(je||(je=Object.create(null)))[camelize(We)]=!0)}this._numberProps=je,ke&&this._resolveProps(Oe),this.shadowRoot&&this._applyStyles(Ue),this._mount(Oe)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(Oe=>e(this._def=Oe,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const Oe in t)hasOwn(this,Oe)||Object.defineProperty(this,Oe,{get:()=>unref(t[Oe])})}_resolveProps(e){const{props:t}=e,Oe=isArray$1(t)?t:Object.keys(t||{});for(const ke of Object.keys(this))ke[0]!=="_"&&Oe.includes(ke)&&this._setProp(ke,this[ke]);for(const ke of Oe.map(camelize))Object.defineProperty(this,ke,{get(){return this._getProp(ke)},set(Be){this._setProp(ke,Be,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let Oe=t?this.getAttribute(e):REMOVAL;const ke=camelize(e);t&&this._numberProps&&this._numberProps[ke]&&(Oe=toNumber(Oe)),this._setProp(ke,Oe,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,Oe=!0,ke=!1){if(t!==this._props[e]&&(t===REMOVAL?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),ke&&this._instance&&this._update(),Oe)){const Be=this._ob;Be&&Be.disconnect(),t===!0?this.setAttribute(hyphenate(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e)),Be&&Be.observe(this,{attributes:!0})}}_update(){render$3(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=createVNode(this._def,extend$5(e,this._props));return this._instance||(t.ce=Oe=>{this._instance=Oe,Oe.ce=this,Oe.isCE=!0;const ke=(Be,Ue)=>{this.dispatchEvent(new CustomEvent(Be,isPlainObject$1(Ue[0])?extend$5({detail:Ue},Ue[0]):{detail:Ue}))};Oe.emit=(Be,...Ue)=>{ke(Be,Ue),hyphenate(Be)!==Be&&ke(hyphenate(Be),Ue)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const Oe=this._nonce;for(let ke=e.length-1;ke>=0;ke--){const Be=document.createElement("style");Oe&&Be.setAttribute("nonce",Oe),Be.textContent=e[ke],this.shadowRoot.prepend(Be)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const Oe=t.nodeType===1&&t.getAttribute("slot")||"default";(e[Oe]||(e[Oe]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let Oe=0;Oe<e.length;Oe++){const ke=e[Oe],Be=ke.getAttribute("name")||"default",Ue=this._slots[Be],je=ke.parentNode;if(Ue)for(const We of Ue){if(t&&We.nodeType===1){const Qe=t+"-s",Cn=document.createTreeWalker(We,1);We.setAttribute(Qe,"");let An;for(;An=Cn.nextNode();)An.setAttribute(Qe,"")}je.insertBefore(We,ke)}else for(;ke.firstChild;)je.insertBefore(ke.firstChild,ke);je.removeChild(ke)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(Ae){const e=getCurrentInstance(),t=e&&e.ce;return t||null}function useShadowRoot(){const Ae=useHost();return Ae&&Ae.shadowRoot}function useCssModule(Ae="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const t=e.type.__cssModules;if(!t)return EMPTY_OBJ;const Oe=t[Ae];return Oe||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=Ae=>(delete Ae.props.mode,Ae),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Ae,{slots:e}){const t=getCurrentInstance(),Oe=useTransitionState();let ke,Be;return onUpdated(()=>{if(!ke.length)return;const Ue=Ae.moveClass||`${Ae.name||"v"}-move`;if(!hasCSSTransform(ke[0].el,t.vnode.el,Ue))return;ke.forEach(callPendingCbs),ke.forEach(recordPosition);const je=ke.filter(applyTranslation);forceReflow(),je.forEach(We=>{const Qe=We.el,Cn=Qe.style;addTransitionClass(Qe,Ue),Cn.transform=Cn.webkitTransform=Cn.transitionDuration="";const An=Qe[moveCbKey]=En=>{En&&En.target!==Qe||(!En||/transform$/.test(En.propertyName))&&(Qe.removeEventListener("transitionend",An),Qe[moveCbKey]=null,removeTransitionClass(Qe,Ue))};Qe.addEventListener("transitionend",An)})}),()=>{const Ue=toRaw(Ae),je=resolveTransitionProps(Ue);let We=Ue.tag||Fragment;if(ke=[],Be)for(let Qe=0;Qe<Be.length;Qe++){const Cn=Be[Qe];Cn.el&&Cn.el instanceof Element&&(ke.push(Cn),setTransitionHooks(Cn,resolveTransitionHooks(Cn,je,Oe,t)),positionMap.set(Cn,Cn.el.getBoundingClientRect()))}Be=e.default?getTransitionRawChildren(e.default()):[];for(let Qe=0;Qe<Be.length;Qe++){const Cn=Be[Qe];Cn.key!=null&&setTransitionHooks(Cn,resolveTransitionHooks(Cn,je,Oe,t))}return createVNode(We,null,Be)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(Ae){const e=Ae.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(Ae){newPositionMap.set(Ae,Ae.el.getBoundingClientRect())}function applyTranslation(Ae){const e=positionMap.get(Ae),t=newPositionMap.get(Ae),Oe=e.left-t.left,ke=e.top-t.top;if(Oe||ke){const Be=Ae.el.style;return Be.transform=Be.webkitTransform=`translate(${Oe}px,${ke}px)`,Be.transitionDuration="0s",Ae}}function hasCSSTransform(Ae,e,t){const Oe=Ae.cloneNode(),ke=Ae[vtcKey];ke&&ke.forEach(je=>{je.split(/\s+/).forEach(We=>We&&Oe.classList.remove(We))}),t.split(/\s+/).forEach(je=>je&&Oe.classList.add(je)),Oe.style.display="none";const Be=e.nodeType===1?e:e.parentNode;Be.appendChild(Oe);const{hasTransform:Ue}=getTransitionInfo(Oe);return Be.removeChild(Oe),Ue}const getModelAssigner=Ae=>{const e=Ae.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(Ae){Ae.target.composing=!0}function onCompositionEnd(Ae){const e=Ae.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(Ae,{modifiers:{lazy:e,trim:t,number:Oe}},ke){Ae[assignKey]=getModelAssigner(ke);const Be=Oe||ke.props&&ke.props.type==="number";addEventListener(Ae,e?"change":"input",Ue=>{if(Ue.target.composing)return;let je=Ae.value;t&&(je=je.trim()),Be&&(je=looseToNumber(je)),Ae[assignKey](je)}),t&&addEventListener(Ae,"change",()=>{Ae.value=Ae.value.trim()}),e||(addEventListener(Ae,"compositionstart",onCompositionStart),addEventListener(Ae,"compositionend",onCompositionEnd),addEventListener(Ae,"change",onCompositionEnd))},mounted(Ae,{value:e}){Ae.value=e??""},beforeUpdate(Ae,{value:e,oldValue:t,modifiers:{lazy:Oe,trim:ke,number:Be}},Ue){if(Ae[assignKey]=getModelAssigner(Ue),Ae.composing)return;const je=(Be||Ae.type==="number")&&!/^0\d/.test(Ae.value)?looseToNumber(Ae.value):Ae.value,We=e??"";je!==We&&(document.activeElement===Ae&&Ae.type!=="range"&&(Oe&&e===t||ke&&Ae.value.trim()===We)||(Ae.value=We))}},vModelCheckbox={deep:!0,created(Ae,e,t){Ae[assignKey]=getModelAssigner(t),addEventListener(Ae,"change",()=>{const Oe=Ae._modelValue,ke=getValue$1(Ae),Be=Ae.checked,Ue=Ae[assignKey];if(isArray$1(Oe)){const je=looseIndexOf(Oe,ke),We=je!==-1;if(Be&&!We)Ue(Oe.concat(ke));else if(!Be&&We){const Qe=[...Oe];Qe.splice(je,1),Ue(Qe)}}else if(isSet(Oe)){const je=new Set(Oe);Be?je.add(ke):je.delete(ke),Ue(je)}else Ue(getCheckboxValue(Ae,Be))})},mounted:setChecked,beforeUpdate(Ae,e,t){Ae[assignKey]=getModelAssigner(t),setChecked(Ae,e,t)}};function setChecked(Ae,{value:e,oldValue:t},Oe){Ae._modelValue=e;let ke;if(isArray$1(e))ke=looseIndexOf(e,Oe.props.value)>-1;else if(isSet(e))ke=e.has(Oe.props.value);else{if(e===t)return;ke=looseEqual(e,getCheckboxValue(Ae,!0))}Ae.checked!==ke&&(Ae.checked=ke)}const vModelRadio={created(Ae,{value:e},t){Ae.checked=looseEqual(e,t.props.value),Ae[assignKey]=getModelAssigner(t),addEventListener(Ae,"change",()=>{Ae[assignKey](getValue$1(Ae))})},beforeUpdate(Ae,{value:e,oldValue:t},Oe){Ae[assignKey]=getModelAssigner(Oe),e!==t&&(Ae.checked=looseEqual(e,Oe.props.value))}},vModelSelect={deep:!0,created(Ae,{value:e,modifiers:{number:t}},Oe){const ke=isSet(e);addEventListener(Ae,"change",()=>{const Be=Array.prototype.filter.call(Ae.options,Ue=>Ue.selected).map(Ue=>t?looseToNumber(getValue$1(Ue)):getValue$1(Ue));Ae[assignKey](Ae.multiple?ke?new Set(Be):Be:Be[0]),Ae._assigning=!0,nextTick(()=>{Ae._assigning=!1})}),Ae[assignKey]=getModelAssigner(Oe)},mounted(Ae,{value:e}){setSelected(Ae,e)},beforeUpdate(Ae,e,t){Ae[assignKey]=getModelAssigner(t)},updated(Ae,{value:e}){Ae._assigning||setSelected(Ae,e)}};function setSelected(Ae,e){const t=Ae.multiple,Oe=isArray$1(e);if(!(t&&!Oe&&!isSet(e))){for(let ke=0,Be=Ae.options.length;ke<Be;ke++){const Ue=Ae.options[ke],je=getValue$1(Ue);if(t)if(Oe){const We=typeof je;We==="string"||We==="number"?Ue.selected=e.some(Qe=>String(Qe)===String(je)):Ue.selected=looseIndexOf(e,je)>-1}else Ue.selected=e.has(je);else if(looseEqual(getValue$1(Ue),e)){Ae.selectedIndex!==ke&&(Ae.selectedIndex=ke);return}}!t&&Ae.selectedIndex!==-1&&(Ae.selectedIndex=-1)}}function getValue$1(Ae){return"_value"in Ae?Ae._value:Ae.value}function getCheckboxValue(Ae,e){const t=e?"_trueValue":"_falseValue";return t in Ae?Ae[t]:e}const vModelDynamic={created(Ae,e,t){callModelHook(Ae,e,t,null,"created")},mounted(Ae,e,t){callModelHook(Ae,e,t,null,"mounted")},beforeUpdate(Ae,e,t,Oe){callModelHook(Ae,e,t,Oe,"beforeUpdate")},updated(Ae,e,t,Oe){callModelHook(Ae,e,t,Oe,"updated")}};function resolveDynamicModel(Ae,e){switch(Ae){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(Ae,e,t,Oe,ke){const Ue=resolveDynamicModel(Ae.tagName,t.props&&t.props.type)[ke];Ue&&Ue(Ae,e,t,Oe)}function initVModelForSSR(){vModelText.getSSRProps=({value:Ae})=>({value:Ae}),vModelRadio.getSSRProps=({value:Ae},e)=>{if(e.props&&looseEqual(e.props.value,Ae))return{checked:!0}},vModelCheckbox.getSSRProps=({value:Ae},e)=>{if(isArray$1(Ae)){if(e.props&&looseIndexOf(Ae,e.props.value)>-1)return{checked:!0}}else if(isSet(Ae)){if(e.props&&Ae.has(e.props.value))return{checked:!0}}else if(Ae)return{checked:!0}},vModelDynamic.getSSRProps=(Ae,e)=>{if(typeof e.type!="string")return;const t=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(Ae,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Ae=>Ae.stopPropagation(),prevent:Ae=>Ae.preventDefault(),self:Ae=>Ae.target!==Ae.currentTarget,ctrl:Ae=>!Ae.ctrlKey,shift:Ae=>!Ae.shiftKey,alt:Ae=>!Ae.altKey,meta:Ae=>!Ae.metaKey,left:Ae=>"button"in Ae&&Ae.button!==0,middle:Ae=>"button"in Ae&&Ae.button!==1,right:Ae=>"button"in Ae&&Ae.button!==2,exact:(Ae,e)=>systemModifiers.some(t=>Ae[`${t}Key`]&&!e.includes(t))},withModifiers=(Ae,e)=>{const t=Ae._withMods||(Ae._withMods={}),Oe=e.join(".");return t[Oe]||(t[Oe]=(ke,...Be)=>{for(let Ue=0;Ue<e.length;Ue++){const je=modifierGuards[e[Ue]];if(je&&je(ke,e))return}return Ae(ke,...Be)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Ae,e)=>{const t=Ae._withKeys||(Ae._withKeys={}),Oe=e.join(".");return t[Oe]||(t[Oe]=ke=>{if(!("key"in ke))return;const Be=hyphenate(ke.key);if(e.some(Ue=>Ue===Be||keyNames[Ue]===Be))return Ae(ke)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$3=(...Ae)=>{ensureRenderer().render(...Ae)},hydrate=(...Ae)=>{ensureHydrationRenderer().hydrate(...Ae)},createApp=(...Ae)=>{const e=ensureRenderer().createApp(...Ae),{mount:t}=e;return e.mount=Oe=>{const ke=normalizeContainer(Oe);if(!ke)return;const Be=e._component;!isFunction$1(Be)&&!Be.render&&!Be.template&&(Be.template=ke.innerHTML),ke.nodeType===1&&(ke.textContent="");const Ue=t(ke,!1,resolveRootNamespace(ke));return ke instanceof Element&&(ke.removeAttribute("v-cloak"),ke.setAttribute("data-v-app","")),Ue},e},createSSRApp=(...Ae)=>{const e=ensureHydrationRenderer().createApp(...Ae),{mount:t}=e;return e.mount=Oe=>{const ke=normalizeContainer(Oe);if(ke)return t(ke,!0,resolveRootNamespace(ke))},e};function resolveRootNamespace(Ae){if(Ae instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&Ae instanceof MathMLElement)return"mathml"}function normalizeContainer(Ae){return isString(Ae)?document.querySelector(Ae):Ae}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$3,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=Ae=>activePinia=Ae,piniaSymbol=Symbol();function isPlainObject(Ae){return Ae&&typeof Ae=="object"&&Object.prototype.toString.call(Ae)==="[object Object]"&&typeof Ae.toJSON!="function"}var MutationType;(function(Ae){Ae.direct="direct",Ae.patchObject="patch object",Ae.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Ae=effectScope(!0),e=Ae.run(()=>ref({}));let t=[],Oe=[];const ke=markRaw({install(Be){setActivePinia(ke),ke._a=Be,Be.provide(piniaSymbol,ke),Be.config.globalProperties.$pinia=ke,Oe.forEach(Ue=>t.push(Ue)),Oe=[]},use(Be){return this._a?t.push(Be):Oe.push(Be),this},_p:t,_a:null,_e:Ae,_s:new Map,state:e});return ke}const noop$2=()=>{};function addSubscription(Ae,e,t,Oe=noop$2){Ae.push(e);const ke=()=>{const Be=Ae.indexOf(e);Be>-1&&(Ae.splice(Be,1),Oe())};return!t&&getCurrentScope()&&onScopeDispose(ke),ke}function triggerSubscriptions(Ae,...e){Ae.slice().forEach(t=>{t(...e)})}const fallbackRunWithContext=Ae=>Ae(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(Ae,e){Ae instanceof Map&&e instanceof Map?e.forEach((t,Oe)=>Ae.set(Oe,t)):Ae instanceof Set&&e instanceof Set&&e.forEach(Ae.add,Ae);for(const t in e){if(!e.hasOwnProperty(t))continue;const Oe=e[t],ke=Ae[t];isPlainObject(ke)&&isPlainObject(Oe)&&Ae.hasOwnProperty(t)&&!isRef(Oe)&&!isReactive(Oe)?Ae[t]=mergeReactiveObjects(ke,Oe):Ae[t]=Oe}return Ae}const skipHydrateSymbol=Symbol();function shouldHydrate(Ae){return!isPlainObject(Ae)||!Ae.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Ae){return!!(isRef(Ae)&&Ae.effect)}function createOptionsStore(Ae,e,t,Oe){const{state:ke,actions:Be,getters:Ue}=e,je=t.state.value[Ae];let We;function Qe(){je||(t.state.value[Ae]=ke?ke():{});const Cn=toRefs(t.state.value[Ae]);return assign$1(Cn,Be,Object.keys(Ue||{}).reduce((An,En)=>(An[En]=markRaw(computed(()=>{setActivePinia(t);const Sn=t._s.get(Ae);return Ue[En].call(Sn,Sn)})),An),{}))}return We=createSetupStore(Ae,Qe,e,t,Oe,!0),We}function createSetupStore(Ae,e,t={},Oe,ke,Be){let Ue;const je=assign$1({actions:{}},t),We={deep:!0};let Qe,Cn,An=[],En=[],Sn;const Tn=Oe.state.value[Ae];!Be&&!Tn&&(Oe.state.value[Ae]={}),ref({});let Dn;function ti(fi){let Oi;Qe=Cn=!1,typeof fi=="function"?(fi(Oe.state.value[Ae]),Oi={type:MutationType.patchFunction,storeId:Ae,events:Sn}):(mergeReactiveObjects(Oe.state.value[Ae],fi),Oi={type:MutationType.patchObject,payload:fi,storeId:Ae,events:Sn});const Ni=Dn=Symbol();nextTick().then(()=>{Dn===Ni&&(Qe=!0)}),Cn=!0,triggerSubscriptions(An,Oi,Oe.state.value[Ae])}const ni=Be?function(){const{state:Oi}=t,Ni=Oi?Oi():{};this.$patch(ui=>{assign$1(ui,Ni)})}:noop$2;function ii(){Ue.stop(),An=[],En=[],Oe._s.delete(Ae)}const si=(fi,Oi="")=>{if(ACTION_MARKER in fi)return fi[ACTION_NAME]=Oi,fi;const Ni=function(){setActivePinia(Oe);const ui=Array.from(arguments),li=[],Ri=[];function Mi(nr){li.push(nr)}function Bi(nr){Ri.push(nr)}triggerSubscriptions(En,{args:ui,name:Ni[ACTION_NAME],store:ci,after:Mi,onError:Bi});let er;try{er=fi.apply(this&&this.$id===Ae?this:ci,ui)}catch(nr){throw triggerSubscriptions(Ri,nr),nr}return er instanceof Promise?er.then(nr=>(triggerSubscriptions(li,nr),nr)).catch(nr=>(triggerSubscriptions(Ri,nr),Promise.reject(nr))):(triggerSubscriptions(li,er),er)};return Ni[ACTION_MARKER]=!0,Ni[ACTION_NAME]=Oi,Ni},oi={_p:Oe,$id:Ae,$onAction:addSubscription.bind(null,En),$patch:ti,$reset:ni,$subscribe(fi,Oi={}){const Ni=addSubscription(An,fi,Oi.detached,()=>ui()),ui=Ue.run(()=>watch(()=>Oe.state.value[Ae],li=>{(Oi.flush==="sync"?Cn:Qe)&&fi({storeId:Ae,type:MutationType.direct,events:Sn},li)},assign$1({},We,Oi)));return Ni},$dispose:ii},ci=reactive(oi);Oe._s.set(Ae,ci);const Ai=(Oe._a&&Oe._a.runWithContext||fallbackRunWithContext)(()=>Oe._e.run(()=>(Ue=effectScope()).run(()=>e({action:si}))));for(const fi in Ai){const Oi=Ai[fi];if(isRef(Oi)&&!isComputed(Oi)||isReactive(Oi))Be||(Tn&&shouldHydrate(Oi)&&(isRef(Oi)?Oi.value=Tn[fi]:mergeReactiveObjects(Oi,Tn[fi])),Oe.state.value[Ae][fi]=Oi);else if(typeof Oi=="function"){const Ni=si(Oi,fi);Ai[fi]=Ni,je.actions[fi]=Oi}}return assign$1(ci,Ai),assign$1(toRaw(ci),Ai),Object.defineProperty(ci,"$state",{get:()=>Oe.state.value[Ae],set:fi=>{ti(Oi=>{assign$1(Oi,fi)})}}),Oe._p.forEach(fi=>{assign$1(ci,Ue.run(()=>fi({store:ci,app:Oe._a,pinia:Oe,options:je})))}),Tn&&Be&&t.hydrate&&t.hydrate(ci.$state,Tn),Qe=!0,Cn=!0,ci}/*! #__NO_SIDE_EFFECTS__ */function defineStore(Ae,e,t){let Oe,ke;const Be=typeof e=="function";typeof Ae=="string"?(Oe=Ae,ke=Be?t:e):(ke=Ae,Oe=Ae.id);function Ue(je,We){const Qe=hasInjectionContext();return je=je||(Qe?inject(piniaSymbol,null):null),je&&setActivePinia(je),je=activePinia,je._s.has(Oe)||(Be?createSetupStore(Oe,e,ke,je):createOptionsStore(Oe,ke,je)),je._s.get(Oe)}return Ue.$id=Oe,Ue}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(Ae){return Ae&&Ae.__esModule&&Object.prototype.hasOwnProperty.call(Ae,"default")?Ae.default:Ae}function getAugmentedNamespace(Ae){if(Ae.__esModule)return Ae;var e=Ae.default;if(typeof e=="function"){var t=function Oe(){return this instanceof Oe?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(Ae).forEach(function(Oe){var ke=Object.getOwnPropertyDescriptor(Ae,Oe);Object.defineProperty(t,Oe,ke.get?ke:{enumerable:!0,get:function(){return Ae[Oe]}})}),t}var dist={},logger$G={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$G,"__esModule",{value:!0});logger$G.useLogger=logger$G.createLogger=logger$G.VueLogger=void 0;const vue_1=require$$0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:Ae,caller:e})=>e?`[${Ae.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${Ae.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(t=>typeof console[t]=="function")}apply(e){const t=this._options||defaultOptions;this._options={...t,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...t){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const Oe=this._options.callerInfo?this.getCallerInfo():void 0,ke={level:e,caller:Oe,argumentArray:t};if(await this.invokeHooks(this._options.beforeHooks,ke),this._options.consoleEnabled){const Be=this._options.prefixFormat({level:e,caller:Oe});this._consoleFunctions.indexOf(e)>=0?console[e](Be,...t):console.log(Be,...t)}await this.invokeHooks(this._options.afterHooks,ke)}}installHooks(e){if(e&&e.length>0){for(const t of e)if(t.install)try{t.install(this._options)}catch(Oe){console.warn("LoggerHook install failure",Oe)}}}async invokeHooks(e,t){if(e&&e.length>0)for(const Oe of e)try{await Oe.run(t)}catch(ke){console.warn("LoggerHook run failure",ke)}}getCallerInfo(){const e=new Error;if(e.stack)try{const Oe=e.stack.split(`
`)[0].startsWith("Error")?4:3,ke=e.stack.split(`
`)[Oe].trim().replace("(","").replace(")","");let Be;ke.indexOf("at ")>-1?Be=ke.substring(ke.indexOf("at ")+3,ke.lastIndexOf(" ")).split(".").reverse()[0]:ke.indexOf("@")>-1&&(Be=ke.substring(0,ke.indexOf("@")));const Ue=ke.split(":").reverse(),je=Ue[2].substring(Math.max(Ue[2].lastIndexOf("/"),Ue[2].lastIndexOf("\\"))+1).split("?")[0],We=Ue[1];return{functionName:Be,fileName:je,lineNumber:We}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$G.VueLogger=VueLogger;function createLogger(Ae={}){return new VueLogger(Ae)}logger$G.createLogger=createLogger;function useLogger(){return vue_1.inject(loggerSymbol)}logger$G.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(Ae){for(let e=0;e<Ae.argumentArray.length;e++)Ae.argumentArray[e]!=null&&typeof Ae.argumentArray[e]=="object"&&(Ae.argumentArray[e]=JSON.stringify(Ae.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(Ae){for(let e=0;e<Ae.argumentArray.length;e++)Ae.argumentArray[e]!=null&&typeof Ae.argumentArray[e]=="object"&&(Ae.argumentArray[e]=JSON.parse(JSON.stringify(Ae.argumentArray[e])))}};(function(Ae){Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.StringifyAndParseObjectsHook=Ae.StringifyObjectsHook=Ae.useLogger=Ae.createLogger=Ae.VueLogger=void 0;var e=logger$G;Object.defineProperty(Ae,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(Ae,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(Ae,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var t=hooks;Object.defineProperty(Ae,"StringifyObjectsHook",{enumerable:!0,get:function(){return t.StringifyObjectsHook}}),Object.defineProperty(Ae,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return t.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(Ae){return"/cartes.gouv.fr-entree-carto/"+Ae},seen={},__vitePreload=function(e,t,Oe){let ke=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const Ue=document.querySelector("meta[property=csp-nonce]"),je=(Ue==null?void 0:Ue.nonce)||(Ue==null?void 0:Ue.getAttribute("nonce"));ke=Promise.allSettled(t.map(We=>{if(We=assetsURL(We),We in seen)return;seen[We]=!0;const Qe=We.endsWith(".css"),Cn=Qe?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${We}"]${Cn}`))return;const An=document.createElement("link");if(An.rel=Qe?"stylesheet":scriptRel,Qe||(An.as="script"),An.crossOrigin="",An.href=We,je&&An.setAttribute("nonce",je),document.head.appendChild(An),Qe)return new Promise((En,Sn)=>{An.addEventListener("load",En),An.addEventListener("error",()=>Sn(new Error(`Unable to preload CSS for ${We}`)))})}))}function Be(Ue){const je=new Event("vite:preloadError",{cancelable:!0});if(je.payload=Ue,window.dispatchEvent(je),!je.defaultPrevented)throw Ue}return ke.then(Ue=>{for(const je of Ue||[])je.status==="rejected"&&Be(je.reason);return e().catch(Be)})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug("eulerian",e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var t=JSON.parse(localStorage.getItem(this.key));t&&(t.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-ClVZRmXE.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-FhbEcPM0.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(Ae){return new Eulerian(Ae)}function useEulerian(){return inject(eulerianSymbol)}var oauth2Client_min={exports:{}};(function(Ae,e){(function(t,Oe){Ae.exports=Oe()})(self,()=>(()=>{var t={985:(Ue,je,We)=>{Object.defineProperty(je,"__esModule",{value:!0}),je.OAuth2Client=void 0,je.generateQueryString=En;const Qe=We(854),Cn=We(129);function An(Sn,Tn){return new URL(Sn,Tn).toString()}function En(Sn){const Tn=new URLSearchParams;for(const[Dn,ti]of Object.entries(Sn))if(Array.isArray(ti))for(const ni of ti)Tn.append(Dn,ni);else ti!==void 0&&Tn.set(Dn,ti.toString());return Tn.toString()}je.OAuth2Client=class{constructor(Sn){this.discoveryDone=!1,this.serverMetadata=null,Sn!=null&&Sn.fetch||(Sn.fetch=fetch.bind(globalThis)),this.settings=Sn}async refreshToken(Sn,Tn){if(!Sn.refreshToken)throw new Error("This token didn't have a refreshToken. It's not possible to refresh this");const Dn={grant_type:"refresh_token",refresh_token:Sn.refreshToken};this.settings.clientSecret||(Dn.client_id=this.settings.clientId),Tn!=null&&Tn.scope&&(Dn.scope=Tn.scope.join(" ")),Tn!=null&&Tn.resource&&(Dn.resource=Tn.resource);const ti=await this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",Dn));return!ti.refreshToken&&Sn.refreshToken&&(ti.refreshToken=Sn.refreshToken),ti}async clientCredentials(Sn){var Tn;const Dn=["client_id","client_secret","grant_type","scope"];if(Sn!=null&&Sn.extraParams&&Object.keys(Sn.extraParams).filter(ni=>Dn.includes(ni)).length>0)throw new Error(`The following extraParams are disallowed: '${Dn.join("', '")}'`);const ti={grant_type:"client_credentials",scope:(Tn=Sn==null?void 0:Sn.scope)===null||Tn===void 0?void 0:Tn.join(" "),resource:Sn==null?void 0:Sn.resource,...Sn==null?void 0:Sn.extraParams};if(!this.settings.clientSecret)throw new Error("A clientSecret must be provided to use client_credentials");return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ti))}async password(Sn){var Tn;const Dn={grant_type:"password",...Sn,scope:(Tn=Sn.scope)===null||Tn===void 0?void 0:Tn.join(" ")};return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",Dn))}get authorizationCode(){return new Cn.OAuth2AuthorizationCodeClient(this)}async introspect(Sn){const Tn={token:Sn.accessToken,token_type_hint:"access_token"};return this.request("introspectionEndpoint",Tn)}async revoke(Sn,Tn="access_token"){let Dn=Sn.accessToken;Tn==="refresh_token"&&(Dn=Sn.refreshToken);const ti={token:Dn,token_type_hint:Tn};return this.request("revocationEndpoint",ti)}async getEndpoint(Sn){if(this.settings[Sn]!==void 0)return An(this.settings[Sn],this.settings.server);if(Sn!=="discoveryEndpoint"&&(await this.discover(),this.settings[Sn]!==void 0))return An(this.settings[Sn],this.settings.server);if(!this.settings.server)throw new Error(`Could not determine the location of ${Sn}. Either specify ${Sn} in the settings, or the "server" endpoint to let the client discover it.`);switch(Sn){case"authorizationEndpoint":return An("/authorize",this.settings.server);case"tokenEndpoint":return An("/token",this.settings.server);case"discoveryEndpoint":return An("/.well-known/oauth-authorization-server",this.settings.server);case"introspectionEndpoint":return An("/introspect",this.settings.server);case"revocationEndpoint":return An("/revoke",this.settings.server)}}async discover(){var Sn;if(this.discoveryDone)return;let Tn;this.discoveryDone=!0;try{Tn=await this.getEndpoint("discoveryEndpoint")}catch{return void console.warn('[oauth2] OAuth2 discovery endpoint could not be determined. Either specify the "server" or "discoveryEndpoint')}const Dn=await this.settings.fetch(Tn,{headers:{Accept:"application/json"}});if(!Dn.ok)return;if(!(!((Sn=Dn.headers.get("Content-Type"))===null||Sn===void 0)&&Sn.startsWith("application/json")))return void console.warn("[oauth2] OAuth2 discovery endpoint was not a JSON response. Response is ignored");this.serverMetadata=await Dn.json();const ti=[["authorization_endpoint","authorizationEndpoint"],["token_endpoint","tokenEndpoint"],["introspection_endpoint","introspectionEndpoint"],["revocation_endpoint","revocationEndpoint"]];if(this.serverMetadata!==null){for(const[ni,ii]of ti)this.serverMetadata[ni]&&(this.settings[ii]=An(this.serverMetadata[ni],Tn));this.serverMetadata.token_endpoint_auth_methods_supported&&!this.settings.authenticationMethod&&(this.settings.authenticationMethod=this.serverMetadata.token_endpoint_auth_methods_supported[0])}}async request(Sn,Tn){const Dn=await this.getEndpoint(Sn),ti={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};let ni=this.settings.authenticationMethod;switch(this.settings.clientSecret||(ni="client_secret_post"),ni||(ni="client_secret_basic"),ni){case"client_secret_basic":ti.Authorization="Basic "+btoa(this.settings.clientId+":"+this.settings.clientSecret);break;case"client_secret_post":Tn.client_id=this.settings.clientId,this.settings.clientSecret&&(Tn.client_secret=this.settings.clientSecret);break;default:throw new Error("Authentication method not yet supported:"+ni+". Open a feature request if you want this!")}const ii=await this.settings.fetch(Dn,{method:"POST",body:En(Tn),headers:ti});let si,oi,ci;if(ii.status!==204&&ii.headers.has("Content-Type")&&ii.headers.get("Content-Type").match(/^application\/(.*\+)?json/)&&(si=await ii.json()),ii.ok)return si;throw si!=null&&si.error?(oi="OAuth2 error "+si.error+".",si.error_description&&(oi+=" "+si.error_description),ci=si.error):(oi="HTTP Error "+ii.status+" "+ii.statusText,ii.status===401&&this.settings.clientSecret&&(oi+=". It's likely that the clientId and/or clientSecret was incorrect"),ci=null),new Qe.OAuth2HttpError(oi,ci,ii,si)}async tokenResponseToOAuth2Token(Sn){var Tn;const Dn=await Sn;if(!(Dn!=null&&Dn.access_token))throw console.warn("Invalid OAuth2 Token Response: ",Dn),new TypeError("We received an invalid token response from an OAuth2 server.");return{accessToken:Dn.access_token,expiresAt:Dn.expires_in?Date.now()+1e3*Dn.expires_in:null,refreshToken:(Tn=Dn.refresh_token)!==null&&Tn!==void 0?Tn:null}}}},129:(Ue,je,We)=>{Object.defineProperty(je,"__esModule",{value:!0}),je.OAuth2AuthorizationCodeClient=void 0,je.generateCodeVerifier=async function(){const Tn=An();if(Tn){const Dn=new Uint8Array(32);return Tn.getRandomValues(Dn),Sn(Dn)}{const Dn=We(483);return new Promise((ti,ni)=>{Dn.randomBytes(32,(ii,si)=>{ii&&ni(ii),ti(si.toString("base64url"))})})}},je.getCodeChallenge=Cn;const Qe=We(854);async function Cn(Tn){const Dn=An();if(Dn!=null&&Dn.subtle)return["S256",Sn(await Dn.subtle.digest("SHA-256",En(Tn)))];{const ti=We(483).createHash("sha256");return ti.update(En(Tn)),["S256",ti.digest("base64url")]}}function An(){if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof self<"u"&&self.crypto)return self.crypto;const Tn=We(483);return Tn.webcrypto?Tn.webcrypto:null}function En(Tn){const Dn=new Uint8Array(Tn.length);for(let ti=0;ti<Tn.length;ti++)Dn[ti]=255&Tn.charCodeAt(ti);return Dn}function Sn(Tn){return btoa(String.fromCharCode(...new Uint8Array(Tn))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}je.OAuth2AuthorizationCodeClient=class{constructor(Tn){this.client=Tn}async getAuthorizeUri(Tn){const[Dn,ti]=await Promise.all([Tn.codeVerifier?Cn(Tn.codeVerifier):void 0,this.client.getEndpoint("authorizationEndpoint")]),ni=new URLSearchParams({client_id:this.client.settings.clientId,response_type:"code",redirect_uri:Tn.redirectUri});if(Dn&&(ni.set("code_challenge_method",Dn[0]),ni.set("code_challenge",Dn[1])),Tn.state&&ni.set("state",Tn.state),Tn.scope&&ni.set("scope",Tn.scope.join(" ")),Tn.resource)for(const ii of[].concat(Tn.resource))ni.append("resource",ii);if(Tn.responseMode&&Tn.responseMode!=="query"&&ni.append("response_mode",Tn.responseMode),Tn.extraParams)for(const[ii,si]of Object.entries(Tn.extraParams)){if(ni.has(ii))throw new Error(`Property in extraParams would overwrite standard property: ${ii}`);ni.set(ii,si)}return ti+"?"+ni.toString()}async getTokenFromCodeRedirect(Tn,Dn){const{code:ti}=this.validateResponse(Tn,{state:Dn.state});return this.getToken({code:ti,redirectUri:Dn.redirectUri,codeVerifier:Dn.codeVerifier})}validateResponse(Tn,Dn){var ti;let ni=(Tn=new URL(Tn)).searchParams;if(!ni.has("code")&&!ni.has("error")&&Tn.hash.length>0&&(ni=new URLSearchParams(Tn.hash.slice(1))),ni.has("error"))throw new Qe.OAuth2Error((ti=ni.get("error_description"))!==null&&ti!==void 0?ti:"OAuth2 error",ni.get("error"));if(!ni.has("code"))throw new Error(`The url did not contain a code parameter ${Tn}`);if(Dn.state&&Dn.state!==ni.get("state"))throw new Error(`The "state" parameter in the url did not match the expected value of ${Dn.state}`);return{code:ni.get("code"),scope:ni.has("scope")?ni.get("scope").split(" "):void 0}}async getToken(Tn){const Dn={grant_type:"authorization_code",code:Tn.code,redirect_uri:Tn.redirectUri,code_verifier:Tn.codeVerifier,resource:Tn.resource};return this.client.tokenResponseToOAuth2Token(this.client.request("tokenEndpoint",Dn))}}},854:(Ue,je)=>{Object.defineProperty(je,"__esModule",{value:!0}),je.OAuth2HttpError=je.OAuth2Error=void 0;class We extends Error{constructor(Cn,An){super(Cn),this.oauth2Code=An}}je.OAuth2Error=We,je.OAuth2HttpError=class extends We{constructor(Qe,Cn,An,En){super(Qe,Cn),this.httpCode=An.status,this.response=An,this.parsedBody=En}}},238:(Ue,je)=>{Object.defineProperty(je,"__esModule",{value:!0}),je.OAuth2Fetch=void 0,je.OAuth2Fetch=class{constructor(We){this.token=null,this.activeGetStoredToken=null,this.activeRefresh=null,this.refreshTimer=null,(We==null?void 0:We.scheduleRefresh)===void 0&&(We.scheduleRefresh=!0),this.options=We,We.getStoredToken&&(this.activeGetStoredToken=(async()=>{this.token=await We.getStoredToken(),this.activeGetStoredToken=null})()),this.scheduleRefresh()}async fetch(We,Qe){const Cn=new Request(We,Qe);return this.mw()(Cn,An=>fetch(An))}mw(){return async(We,Qe)=>{const Cn=await this.getAccessToken();let An=We.clone();An.headers.set("Authorization","Bearer "+Cn);let En=await Qe(An);if(!En.ok&&En.status===401){const Sn=await this.refreshToken();An=We.clone(),An.headers.set("Authorization","Bearer "+Sn.accessToken),En=await Qe(An)}return En}}async getToken(){return this.token&&(this.token.expiresAt===null||this.token.expiresAt>Date.now())?this.token:this.refreshToken()}async getAccessToken(){return await this.activeGetStoredToken,(await this.getToken()).accessToken}async refreshToken(){var We,Qe;if(this.activeRefresh)return this.activeRefresh;const Cn=this.token;this.activeRefresh=(async()=>{var An,En;let Sn=null;try{Cn!=null&&Cn.refreshToken&&(Sn=await this.options.client.refreshToken(Cn))}catch{console.warn("[oauth2] refresh token not accepted, we'll try reauthenticating")}if(Sn||(Sn=await this.options.getNewToken()),!Sn){const Tn=new Error("Unable to obtain OAuth2 tokens, a full reauth may be needed");throw(En=(An=this.options).onError)===null||En===void 0||En.call(An,Tn),Tn}return Sn})();try{const An=await this.activeRefresh;return this.token=An,(Qe=(We=this.options).storeToken)===null||Qe===void 0||Qe.call(We,An),this.scheduleRefresh(),An}catch(An){throw this.options.onError&&this.options.onError(An),An}finally{this.activeRefresh=null}}scheduleRefresh(){var We;if(!this.options.scheduleRefresh||(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),!(!((We=this.token)===null||We===void 0)&&We.expiresAt)||!this.token.refreshToken))return;const Qe=this.token.expiresAt-Date.now();Qe<12e4||(this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(Cn){console.error("[fetch-mw-oauth2] error while doing a background OAuth2 auto-refresh",Cn)}},Qe-6e4))}}},483:()=>{}},Oe={};function ke(Ue){var je=Oe[Ue];if(je!==void 0)return je.exports;var We=Oe[Ue]={exports:{}};return t[Ue](We,We.exports,ke),We.exports}var Be={};return(()=>{var Ue=Be;Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.OAuth2HttpError=Ue.OAuth2Error=Ue.OAuth2Fetch=Ue.generateCodeVerifier=Ue.OAuth2AuthorizationCodeClient=Ue.OAuth2Client=void 0;var je=ke(985);Object.defineProperty(Ue,"OAuth2Client",{enumerable:!0,get:function(){return je.OAuth2Client}});var We=ke(129);Object.defineProperty(Ue,"OAuth2AuthorizationCodeClient",{enumerable:!0,get:function(){return We.OAuth2AuthorizationCodeClient}}),Object.defineProperty(Ue,"generateCodeVerifier",{enumerable:!0,get:function(){return We.generateCodeVerifier}});var Qe=ke(238);Object.defineProperty(Ue,"OAuth2Fetch",{enumerable:!0,get:function(){return Qe.OAuth2Fetch}});var Cn=ke(854);Object.defineProperty(Ue,"OAuth2Error",{enumerable:!0,get:function(){return Cn.OAuth2Error}}),Object.defineProperty(Ue,"OAuth2HttpError",{enumerable:!0,get:function(){return Cn.OAuth2HttpError}})})(),Be})())})(oauth2Client_min);var oauth2Client_minExports=oauth2Client_min.exports;const useServiceStore=defineStore({id:"service",state:()=>({connexion:{}}),getters:{},actions:{getService(){return this.connexion},setService(Ae){Ae?this.connexion=new Services$1(Ae):this.connexion=new Services$1}}});var Connexion={getAccessLogin:async function(){const Ae=this.url.includes("login")?this.url:this.url+"/login",e=await oauth2Client_minExports.generateCodeVerifier();this.codeVerifier=e,localStorage.setItem("codeVerifier",e);var t=await this.getClient().authorizationCode.getAuthorizeUri({redirectUri:Ae,state:"some-string",codeVerifier:e,scope:["openid","profile","email"],extraParams:{approval_prompt:"auto"},responseMode:"query"});return t},getAccessLogout:function(){const Ae=this.url.includes("logout")?this.url:this.url+"/logout";var e=`${this.getClient().settings.server}/realms/${this.getClient().settings.index}/protocol/openid-connect/logout?
      scope=openid%20profile%20email&
      approval_prompt=auto&
      response_type=code&
      post_logout_redirect_uri=${Ae}?session_state=${this.session}&
      client_id=${this.getClient().settings.clientId}`.replace(/ /g,"");return Promise.resolve(e)},getAccessToken:async function(){const Ae=this.url.includes("login")?this.url:this.url+"/login";var e=this.codeVerifier||localStorage.getItem("codeVerifier"),t=await this.getClient().authorizationCode.getTokenFromCodeRedirect(location,{redirectUri:Ae,state:"some-string",codeVerifier:e});this.token=t,this.getFetch().token=t,this.addTokenStorage();var Oe=useServiceStore();return Oe.setService(this),t},getTokenStorage:function(){var Ae=JSON.parse(localStorage.getItem("auth"));return Ae?Ae.authenticated:null},addTokenStorage:function(){var Ae=JSON.stringify({authenticated:this.token});localStorage.setItem("auth",Ae)},removeTokenStorage:function(){var Ae=JSON.stringify({authenticated:{}});localStorage.setItem("auth",Ae)}},Users={getUserMe:async function(){var Ae=await this.getFetch().fetch("https://data.geopf.fr/api/users/me",{method:"GET"}),e=await Ae.json();this.user=e;var t=useServiceStore();return t.setService(this),e}},Documents={};const IAM_URL="https://sso.geopf.fr",IAM_REALM="geoplateforme",IAM_CLIENT_ID="cartes-gouv-fr-carto",IAM_CLIENT_SECRET="GLGe8lcjSj7OytvAeHXABrZRFjbu31ny";var Lc,vu,hh,kf,Of;let Services$1=(Of=class{constructor(e){pd(this,hh);pd(this,Lc);pd(this,vu);return e=e||{},this.authenticated=e.authenticated||!1,this.session=e.session||"",this.codeVerifier=e.codeVerifier||"",this.code=e.code||"",this.token=e.token||"",this.user=e.user||{},this.error=e.error||{},gd(this,Lc,null),gd(this,vu,null),this.url=null,pc(this,hh,kf).call(this,e),this}getClient(){return hd(this,Lc)}getFetch(){return hd(this,vu)}isAccessValided(){var e=useServiceStore();const t=location.search,Oe=new URLSearchParams(t);var ke=Oe.get("code"),Be=Oe.get("session_state"),Ue=Oe.get("error"),je=null;return ke&&Be&&(this.session=Be,this.code=ke,this.authenticated=!0,je="login"),!ke&&Be&&Be===this.session&&(this.session=null,this.code=null,this.authenticated=!1,this.token=null,this.removeTokenStorage(),this.user={},this.error={},je="logout"),Ue?(this.error={name:Ue,message:Oe.get("error_description")},Promise.reject(this.error)):(e.setService(this),Promise.resolve(je))}},Lc=new WeakMap,vu=new WeakMap,hh=new WeakSet,kf=function(e){this.url=encodeURI(location.origin+"/cartes.gouv.fr-entree-carto");var t=e.client?e.client.settings:{server:`${IAM_URL}`,clientId:`${IAM_CLIENT_ID}`,clientSecret:`${IAM_CLIENT_SECRET}`,index:`${IAM_REALM}`,tokenEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/token`,authorizationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/auth`,discoveryEndpoint:`/realms/${IAM_REALM}/.well-known/openid-configuration`,revocationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/revoke`};gd(this,Lc,new oauth2Client_minExports.OAuth2Client(t)),gd(this,vu,new oauth2Client_minExports.OAuth2Fetch({client:hd(this,Lc),getNewToken:async()=>{var Oe=await hd(this,Lc).authorizationCode.getToken({code:this.code,redirectUri:this.url,code_verifier:this.codeVerifier});return Oe},storeToken:Oe=>{this.token=Oe,this.addTokenStorage()},getStoredToken:()=>{const Oe=this.getTokenStorage();return Oe||null},onError:Oe=>{console.error(Oe)}}))},Of);Object.assign(Services$1.prototype,Connexion);Object.assign(Services$1.prototype,Users);Object.assign(Services$1.prototype,Documents);const servicesSymbol=Symbol("vue-services-plugin");class PluginServices extends Services$1{constructor(e){console.debug("connexion",e),super(e)}install(e){e.provide(servicesSymbol,this),e.config.globalProperties.$services=this,e.provide("services",this)}}function createServices(Ae){return new PluginServices(Ae)}function getState(Ae){if(Ae)try{return JSON.parse(Ae)}catch(e){console.warn(e,"unknown json format!")}}function createStore(Ae,e){const{storage:t,encrypt:Oe,decrypt:ke}=e,Be=t.getItem(Ae.$id);if(Be){const je=getState(ke?ke(Be):Be);je&&(Ae.$state=je)}else{const je=JSON.stringify(Ae.$state);t.setItem(Ae.$id,Oe?Oe(je):je)}const Ue=(je,We)=>{const Qe=JSON.stringify(We);t.setItem(Ae.$id,Oe?Oe(Qe):Qe)};Ae.$subscribe(Ue,{detached:!0,deep:!0,immediate:!0})}function storePlugin(Ae){return e=>{const t={...Ae},{store:Oe}=e,{stores:ke,encrypt:Be,decrypt:Ue}=t;ke&&ke.length>0&&ke.forEach(je=>{if(typeof je=="string"){if(je===Oe.$id){const We=t.storage??localStorage;createStore(Oe,{storage:We,encrypt:Be,decrypt:Ue})}}else if(je.name===Oe.$id){const{storage:We,ciphertext:Qe}=je;createStore(Oe,{storage:We||(t.storage?t.storage:localStorage),encrypt:Qe===!1?void 0:Be,decrypt:Qe===!1?void 0:Ue})}})}}const matchIconName=/^[a-z0-9]+(-[a-z0-9]+)*$/,stringToIcon=(Ae,e,t,Oe="")=>{const ke=Ae.split(":");if(Ae.slice(0,1)==="@"){if(ke.length<2||ke.length>3)return null;Oe=ke.shift().slice(1)}if(ke.length>3||!ke.length)return null;if(ke.length>1){const je=ke.pop(),We=ke.pop(),Qe={provider:ke.length>0?ke[0]:Oe,prefix:We,name:je};return e&&!validateIconName(Qe)?null:Qe}const Be=ke[0],Ue=Be.split("-");if(Ue.length>1){const je={provider:Oe,prefix:Ue.shift(),name:Ue.join("-")};return e&&!validateIconName(je)?null:je}if(t&&Oe===""){const je={provider:Oe,prefix:"",name:Be};return e&&!validateIconName(je,t)?null:je}return null},validateIconName=(Ae,e)=>Ae?!!((e&&Ae.prefix===""||Ae.prefix)&&Ae.name):!1,defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1});function mergeIconTransformations(Ae,e){const t={};!Ae.hFlip!=!e.hFlip&&(t.hFlip=!0),!Ae.vFlip!=!e.vFlip&&(t.vFlip=!0);const Oe=((Ae.rotate||0)+(e.rotate||0))%4;return Oe&&(t.rotate=Oe),t}function mergeIconData(Ae,e){const t=mergeIconTransformations(Ae,e);for(const Oe in defaultExtendedIconProps)Oe in defaultIconTransformations?Oe in Ae&&!(Oe in t)&&(t[Oe]=defaultIconTransformations[Oe]):Oe in e?t[Oe]=e[Oe]:Oe in Ae&&(t[Oe]=Ae[Oe]);return t}function getIconsTree(Ae,e){const t=Ae.icons,Oe=Ae.aliases||Object.create(null),ke=Object.create(null);function Be(Ue){if(t[Ue])return ke[Ue]=[];if(!(Ue in ke)){ke[Ue]=null;const je=Oe[Ue]&&Oe[Ue].parent,We=je&&Be(je);We&&(ke[Ue]=[je].concat(We))}return ke[Ue]}return Object.keys(t).concat(Object.keys(Oe)).forEach(Be),ke}function internalGetIconData(Ae,e,t){const Oe=Ae.icons,ke=Ae.aliases||Object.create(null);let Be={};function Ue(je){Be=mergeIconData(Oe[je]||ke[je],Be)}return Ue(e),t.forEach(Ue),mergeIconData(Ae,Be)}function parseIconSet(Ae,e){const t=[];if(typeof Ae!="object"||typeof Ae.icons!="object")return t;Ae.not_found instanceof Array&&Ae.not_found.forEach(ke=>{e(ke,null),t.push(ke)});const Oe=getIconsTree(Ae);for(const ke in Oe){const Be=Oe[ke];Be&&(e(ke,internalGetIconData(Ae,ke,Be)),t.push(ke))}return t}const optionalPropertyDefaults={provider:"",aliases:{},not_found:{},...defaultIconDimensions};function checkOptionalProps(Ae,e){for(const t in e)if(t in Ae&&typeof Ae[t]!=typeof e[t])return!1;return!0}function quicklyValidateIconSet(Ae){if(typeof Ae!="object"||Ae===null)return null;const e=Ae;if(typeof e.prefix!="string"||!Ae.icons||typeof Ae.icons!="object"||!checkOptionalProps(Ae,optionalPropertyDefaults))return null;const t=e.icons;for(const ke in t){const Be=t[ke];if(!ke||typeof Be.body!="string"||!checkOptionalProps(Be,defaultExtendedIconProps))return null}const Oe=e.aliases||Object.create(null);for(const ke in Oe){const Be=Oe[ke],Ue=Be.parent;if(!ke||typeof Ue!="string"||!t[Ue]&&!Oe[Ue]||!checkOptionalProps(Be,defaultExtendedIconProps))return null}return e}const dataStorage=Object.create(null);function newStorage(Ae,e){return{provider:Ae,prefix:e,icons:Object.create(null),missing:new Set}}function getStorage(Ae,e){const t=dataStorage[Ae]||(dataStorage[Ae]=Object.create(null));return t[e]||(t[e]=newStorage(Ae,e))}function addIconSet(Ae,e){return quicklyValidateIconSet(e)?parseIconSet(e,(t,Oe)=>{Oe?Ae.icons[t]=Oe:Ae.missing.add(t)}):[]}function addIconToStorage(Ae,e,t){try{if(typeof t.body=="string")return Ae.icons[e]={...t},!0}catch{}return!1}let simpleNames=!1;function allowSimpleNames(Ae){return typeof Ae=="boolean"&&(simpleNames=Ae),simpleNames}function getIconData(Ae){const e=typeof Ae=="string"?stringToIcon(Ae,!0,simpleNames):Ae;if(e){const t=getStorage(e.provider,e.prefix),Oe=e.name;return t.icons[Oe]||(t.missing.has(Oe)?null:void 0)}}function addIcon(Ae,e){const t=stringToIcon(Ae,!0,simpleNames);if(!t)return!1;const Oe=getStorage(t.provider,t.prefix);return e?addIconToStorage(Oe,t.name,e):(Oe.missing.add(t.name),!0)}function addCollection(Ae,e){if(typeof Ae!="object")return!1;if(typeof e!="string"&&(e=Ae.provider||""),simpleNames&&!e&&!Ae.prefix){let ke=!1;return quicklyValidateIconSet(Ae)&&(Ae.prefix="",parseIconSet(Ae,(Be,Ue)=>{addIcon(Be,Ue)&&(ke=!0)})),ke}const t=Ae.prefix;if(!validateIconName({prefix:t,name:"a"}))return!1;const Oe=getStorage(e,t);return!!addIconSet(Oe,Ae)}const defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(Ae,e,t){if(e===1)return Ae;if(t=t||100,typeof Ae=="number")return Math.ceil(Ae*e*t)/t;if(typeof Ae!="string")return Ae;const Oe=Ae.split(unitsSplit);if(Oe===null||!Oe.length)return Ae;const ke=[];let Be=Oe.shift(),Ue=unitsTest.test(Be);for(;;){if(Ue){const je=parseFloat(Be);isNaN(je)?ke.push(Be):ke.push(Math.ceil(je*e*t)/t)}else ke.push(Be);if(Be=Oe.shift(),Be===void 0)return ke.join("");Ue=!Ue}}function splitSVGDefs(Ae,e="defs"){let t="";const Oe=Ae.indexOf("<"+e);for(;Oe>=0;){const ke=Ae.indexOf(">",Oe),Be=Ae.indexOf("</"+e);if(ke===-1||Be===-1)break;const Ue=Ae.indexOf(">",Be);if(Ue===-1)break;t+=Ae.slice(ke+1,Be).trim(),Ae=Ae.slice(0,Oe).trim()+Ae.slice(Ue+1)}return{defs:t,content:Ae}}function mergeDefsAndContent(Ae,e){return Ae?"<defs>"+Ae+"</defs>"+e:e}function wrapSVGContent(Ae,e,t){const Oe=splitSVGDefs(Ae);return mergeDefsAndContent(Oe.defs,e+Oe.content+t)}const isUnsetKeyword=Ae=>Ae==="unset"||Ae==="undefined"||Ae==="none";function iconToSVG(Ae,e){const t={...defaultIconProps,...Ae},Oe={...defaultIconCustomisations,...e},ke={left:t.left,top:t.top,width:t.width,height:t.height};let Be=t.body;[t,Oe].forEach(Dn=>{const ti=[],ni=Dn.hFlip,ii=Dn.vFlip;let si=Dn.rotate;ni?ii?si+=2:(ti.push("translate("+(ke.width+ke.left).toString()+" "+(0-ke.top).toString()+")"),ti.push("scale(-1 1)"),ke.top=ke.left=0):ii&&(ti.push("translate("+(0-ke.left).toString()+" "+(ke.height+ke.top).toString()+")"),ti.push("scale(1 -1)"),ke.top=ke.left=0);let oi;switch(si<0&&(si-=Math.floor(si/4)*4),si=si%4,si){case 1:oi=ke.height/2+ke.top,ti.unshift("rotate(90 "+oi.toString()+" "+oi.toString()+")");break;case 2:ti.unshift("rotate(180 "+(ke.width/2+ke.left).toString()+" "+(ke.height/2+ke.top).toString()+")");break;case 3:oi=ke.width/2+ke.left,ti.unshift("rotate(-90 "+oi.toString()+" "+oi.toString()+")");break}si%2===1&&(ke.left!==ke.top&&(oi=ke.left,ke.left=ke.top,ke.top=oi),ke.width!==ke.height&&(oi=ke.width,ke.width=ke.height,ke.height=oi)),ti.length&&(Be=wrapSVGContent(Be,'<g transform="'+ti.join(" ")+'">',"</g>"))});const Ue=Oe.width,je=Oe.height,We=ke.width,Qe=ke.height;let Cn,An;Ue===null?(An=je===null?"1em":je==="auto"?Qe:je,Cn=calculateSize(An,We/Qe)):(Cn=Ue==="auto"?We:Ue,An=je===null?calculateSize(Cn,Qe/We):je==="auto"?Qe:je);const En={},Sn=(Dn,ti)=>{isUnsetKeyword(ti)||(En[Dn]=ti.toString())};Sn("width",Cn),Sn("height",An);const Tn=[ke.left,ke.top,We,Qe];return En.viewBox=Tn.join(" "),{attributes:En,viewBox:Tn,body:Be}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(Ae,e=randomPrefix){const t=[];let Oe;for(;Oe=regex.exec(Ae);)t.push(Oe[1]);if(!t.length)return Ae;const ke="suffix"+(Math.random()*16777216|Date.now()).toString(16);return t.forEach(Be=>{const Ue=typeof e=="function"?e(Be):e+(counter++).toString(),je=Be.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");Ae=Ae.replace(new RegExp('([#;"])('+je+')([")]|\\.[a-z])',"g"),"$1"+Ue+ke+"$3")}),Ae=Ae.replace(new RegExp(ke,"g"),""),Ae}const storage$1=Object.create(null);function setAPIModule(Ae,e){storage$1[Ae]=e}function getAPIModule(Ae){return storage$1[Ae]||storage$1[""]}function createAPIConfig(Ae){let e;if(typeof Ae.resources=="string")e=[Ae.resources];else if(e=Ae.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:Ae.path||"/",maxURL:Ae.maxURL||500,rotate:Ae.rotate||750,timeout:Ae.timeout||5e3,random:Ae.random===!0,index:Ae.index||0,dataAfterTimeout:Ae.dataAfterTimeout!==!1}}const configStorage=Object.create(null),fallBackAPISources=["https://api.simplesvg.com","https://api.unisvg.com"],fallBackAPI=[];for(;fallBackAPISources.length>0;)fallBackAPISources.length===1||Math.random()>.5?fallBackAPI.push(fallBackAPISources.shift()):fallBackAPI.push(fallBackAPISources.pop());configStorage[""]=createAPIConfig({resources:["https://api.iconify.design"].concat(fallBackAPI)});function addAPIProvider(Ae,e){const t=createAPIConfig(e);return t===null?!1:(configStorage[Ae]=t,!0)}function getAPIConfig(Ae){return configStorage[Ae]}const detectFetch=()=>{let Ae;try{if(Ae=fetch,typeof Ae=="function")return Ae}catch{}};let fetchModule=detectFetch();function calculateMaxLength(Ae,e){const t=getAPIConfig(Ae);if(!t)return 0;let Oe;if(!t.maxURL)Oe=0;else{let ke=0;t.resources.forEach(Ue=>{ke=Math.max(ke,Ue.length)});const Be=e+".json?icons=";Oe=t.maxURL-ke-t.path.length-Be.length}return Oe}function shouldAbort(Ae){return Ae===404}const prepare=(Ae,e,t)=>{const Oe=[],ke=calculateMaxLength(Ae,e),Be="icons";let Ue={type:Be,provider:Ae,prefix:e,icons:[]},je=0;return t.forEach((We,Qe)=>{je+=We.length+1,je>=ke&&Qe>0&&(Oe.push(Ue),Ue={type:Be,provider:Ae,prefix:e,icons:[]},je=We.length),Ue.icons.push(We)}),Oe.push(Ue),Oe};function getPath(Ae){if(typeof Ae=="string"){const e=getAPIConfig(Ae);if(e)return e.path}return"/"}const send=(Ae,e,t)=>{if(!fetchModule){t("abort",424);return}let Oe=getPath(e.provider);switch(e.type){case"icons":{const Be=e.prefix,je=e.icons.join(","),We=new URLSearchParams({icons:je});Oe+=Be+".json?"+We.toString();break}case"custom":{const Be=e.uri;Oe+=Be.slice(0,1)==="/"?Be.slice(1):Be;break}default:t("abort",400);return}let ke=503;fetchModule(Ae+Oe).then(Be=>{const Ue=Be.status;if(Ue!==200){setTimeout(()=>{t(shouldAbort(Ue)?"abort":"next",Ue)});return}return ke=501,Be.json()}).then(Be=>{if(typeof Be!="object"||Be===null){setTimeout(()=>{Be===404?t("abort",Be):t("next",ke)});return}setTimeout(()=>{t("success",Be)})}).catch(()=>{t("next",ke)})},fetchAPIModule={prepare,send};function sortIcons(Ae){const e={loaded:[],missing:[],pending:[]},t=Object.create(null);Ae.sort((ke,Be)=>ke.provider!==Be.provider?ke.provider.localeCompare(Be.provider):ke.prefix!==Be.prefix?ke.prefix.localeCompare(Be.prefix):ke.name.localeCompare(Be.name));let Oe={provider:"",prefix:"",name:""};return Ae.forEach(ke=>{if(Oe.name===ke.name&&Oe.prefix===ke.prefix&&Oe.provider===ke.provider)return;Oe=ke;const Be=ke.provider,Ue=ke.prefix,je=ke.name,We=t[Be]||(t[Be]=Object.create(null)),Qe=We[Ue]||(We[Ue]=getStorage(Be,Ue));let Cn;je in Qe.icons?Cn=e.loaded:Ue===""||Qe.missing.has(je)?Cn=e.missing:Cn=e.pending;const An={provider:Be,prefix:Ue,name:je};Cn.push(An)}),e}function removeCallback(Ae,e){Ae.forEach(t=>{const Oe=t.loaderCallbacks;Oe&&(t.loaderCallbacks=Oe.filter(ke=>ke.id!==e))})}function updateCallbacks(Ae){Ae.pendingCallbacksFlag||(Ae.pendingCallbacksFlag=!0,setTimeout(()=>{Ae.pendingCallbacksFlag=!1;const e=Ae.loaderCallbacks?Ae.loaderCallbacks.slice(0):[];if(!e.length)return;let t=!1;const Oe=Ae.provider,ke=Ae.prefix;e.forEach(Be=>{const Ue=Be.icons,je=Ue.pending.length;Ue.pending=Ue.pending.filter(We=>{if(We.prefix!==ke)return!0;const Qe=We.name;if(Ae.icons[Qe])Ue.loaded.push({provider:Oe,prefix:ke,name:Qe});else if(Ae.missing.has(Qe))Ue.missing.push({provider:Oe,prefix:ke,name:Qe});else return t=!0,!0;return!1}),Ue.pending.length!==je&&(t||removeCallback([Ae],Be.id),Be.callback(Ue.loaded.slice(0),Ue.missing.slice(0),Ue.pending.slice(0),Be.abort))})}))}let idCounter=0;function storeCallback(Ae,e,t){const Oe=idCounter++,ke=removeCallback.bind(null,t,Oe);if(!e.pending.length)return ke;const Be={id:Oe,icons:e,callback:Ae,abort:ke};return t.forEach(Ue=>{(Ue.loaderCallbacks||(Ue.loaderCallbacks=[])).push(Be)}),ke}function listToIcons(Ae,e=!0,t=!1){const Oe=[];return Ae.forEach(ke=>{const Be=typeof ke=="string"?stringToIcon(ke,e,t):ke;Be&&Oe.push(Be)}),Oe}var defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function sendQuery(Ae,e,t,Oe){const ke=Ae.resources.length,Be=Ae.random?Math.floor(Math.random()*ke):Ae.index;let Ue;if(Ae.random){let Pi=Ae.resources.slice(0);for(Ue=[];Pi.length>1;){const Ai=Math.floor(Math.random()*Pi.length);Ue.push(Pi[Ai]),Pi=Pi.slice(0,Ai).concat(Pi.slice(Ai+1))}Ue=Ue.concat(Pi)}else Ue=Ae.resources.slice(Be).concat(Ae.resources.slice(0,Be));const je=Date.now();let We="pending",Qe=0,Cn,An=null,En=[],Sn=[];typeof Oe=="function"&&Sn.push(Oe);function Tn(){An&&(clearTimeout(An),An=null)}function Dn(){We==="pending"&&(We="aborted"),Tn(),En.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),En=[]}function ti(Pi,Ai){Ai&&(Sn=[]),typeof Pi=="function"&&Sn.push(Pi)}function ni(){return{startTime:je,payload:e,status:We,queriesSent:Qe,queriesPending:En.length,subscribe:ti,abort:Dn}}function ii(){We="failed",Sn.forEach(Pi=>{Pi(void 0,Cn)})}function si(){En.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),En=[]}function oi(Pi,Ai,fi){const Oi=Ai!=="success";switch(En=En.filter(Ni=>Ni!==Pi),We){case"pending":break;case"failed":if(Oi||!Ae.dataAfterTimeout)return;break;default:return}if(Ai==="abort"){Cn=fi,ii();return}if(Oi){Cn=fi,En.length||(Ue.length?ci():ii());return}if(Tn(),si(),!Ae.random){const Ni=Ae.resources.indexOf(Pi.resource);Ni!==-1&&Ni!==Ae.index&&(Ae.index=Ni)}We="completed",Sn.forEach(Ni=>{Ni(fi)})}function ci(){if(We!=="pending")return;Tn();const Pi=Ue.shift();if(Pi===void 0){if(En.length){An=setTimeout(()=>{Tn(),We==="pending"&&(si(),ii())},Ae.timeout);return}ii();return}const Ai={status:"pending",resource:Pi,callback:(fi,Oi)=>{oi(Ai,fi,Oi)}};En.push(Ai),Qe++,An=setTimeout(ci,Ae.rotate),t(Pi,e,Ai.callback)}return setTimeout(ci),ni}function initRedundancy(Ae){const e={...defaultConfig,...Ae};let t=[];function Oe(){t=t.filter(je=>je().status==="pending")}function ke(je,We,Qe){const Cn=sendQuery(e,je,We,(An,En)=>{Oe(),Qe&&Qe(An,En)});return t.push(Cn),Cn}function Be(je){return t.find(We=>je(We))||null}return{query:ke,find:Be,setIndex:je=>{e.index=je},getIndex:()=>e.index,cleanup:Oe}}function emptyCallback$1(){}const redundancyCache=Object.create(null);function getRedundancyCache(Ae){if(!redundancyCache[Ae]){const e=getAPIConfig(Ae);if(!e)return;const t=initRedundancy(e),Oe={config:e,redundancy:t};redundancyCache[Ae]=Oe}return redundancyCache[Ae]}function sendAPIQuery(Ae,e,t){let Oe,ke;if(typeof Ae=="string"){const Be=getAPIModule(Ae);if(!Be)return t(void 0,424),emptyCallback$1;ke=Be.send;const Ue=getRedundancyCache(Ae);Ue&&(Oe=Ue.redundancy)}else{const Be=createAPIConfig(Ae);if(Be){Oe=initRedundancy(Be);const Ue=Ae.resources?Ae.resources[0]:"",je=getAPIModule(Ue);je&&(ke=je.send)}}return!Oe||!ke?(t(void 0,424),emptyCallback$1):Oe.query(e,ke,t)().abort}function emptyCallback(){}function loadedNewIcons(Ae){Ae.iconsLoaderFlag||(Ae.iconsLoaderFlag=!0,setTimeout(()=>{Ae.iconsLoaderFlag=!1,updateCallbacks(Ae)}))}function checkIconNamesForAPI(Ae){const e=[],t=[];return Ae.forEach(Oe=>{(Oe.match(matchIconName)?e:t).push(Oe)}),{valid:e,invalid:t}}function parseLoaderResponse(Ae,e,t){function Oe(){const ke=Ae.pendingIcons;e.forEach(Be=>{ke&&ke.delete(Be),Ae.icons[Be]||Ae.missing.add(Be)})}if(t&&typeof t=="object")try{if(!addIconSet(Ae,t).length){Oe();return}}catch(ke){console.error(ke)}Oe(),loadedNewIcons(Ae)}function parsePossiblyAsyncResponse(Ae,e){Ae instanceof Promise?Ae.then(t=>{e(t)}).catch(()=>{e(null)}):e(Ae)}function loadNewIcons(Ae,e){Ae.iconsToLoad?Ae.iconsToLoad=Ae.iconsToLoad.concat(e).sort():Ae.iconsToLoad=e,Ae.iconsQueueFlag||(Ae.iconsQueueFlag=!0,setTimeout(()=>{Ae.iconsQueueFlag=!1;const{provider:t,prefix:Oe}=Ae,ke=Ae.iconsToLoad;if(delete Ae.iconsToLoad,!ke||!ke.length)return;const Be=Ae.loadIcon;if(Ae.loadIcons&&(ke.length>1||!Be)){parsePossiblyAsyncResponse(Ae.loadIcons(ke,Oe,t),Cn=>{parseLoaderResponse(Ae,ke,Cn)});return}if(Be){ke.forEach(Cn=>{const An=Be(Cn,Oe,t);parsePossiblyAsyncResponse(An,En=>{const Sn=En?{prefix:Oe,icons:{[Cn]:En}}:null;parseLoaderResponse(Ae,[Cn],Sn)})});return}const{valid:Ue,invalid:je}=checkIconNamesForAPI(ke);if(je.length&&parseLoaderResponse(Ae,je,null),!Ue.length)return;const We=Oe.match(matchIconName)?getAPIModule(t):null;if(!We){parseLoaderResponse(Ae,Ue,null);return}We.prepare(t,Oe,Ue).forEach(Cn=>{sendAPIQuery(t,Cn,An=>{parseLoaderResponse(Ae,Cn.icons,An)})})}))}const loadIcons=(Ae,e)=>{const t=listToIcons(Ae,!0,allowSimpleNames()),Oe=sortIcons(t);if(!Oe.pending.length){let We=!0;return e&&setTimeout(()=>{We&&e(Oe.loaded,Oe.missing,Oe.pending,emptyCallback)}),()=>{We=!1}}const ke=Object.create(null),Be=[];let Ue,je;return Oe.pending.forEach(We=>{const{provider:Qe,prefix:Cn}=We;if(Cn===je&&Qe===Ue)return;Ue=Qe,je=Cn,Be.push(getStorage(Qe,Cn));const An=ke[Qe]||(ke[Qe]=Object.create(null));An[Cn]||(An[Cn]=[])}),Oe.pending.forEach(We=>{const{provider:Qe,prefix:Cn,name:An}=We,En=getStorage(Qe,Cn),Sn=En.pendingIcons||(En.pendingIcons=new Set);Sn.has(An)||(Sn.add(An),ke[Qe][Cn].push(An))}),Be.forEach(We=>{const Qe=ke[We.provider][We.prefix];Qe.length&&loadNewIcons(We,Qe)}),e?storeCallback(e,Oe,Be):emptyCallback};function mergeCustomisations(Ae,e){const t={...Ae};for(const Oe in e){const ke=e[Oe],Be=typeof ke;Oe in defaultIconSizeCustomisations?(ke===null||ke&&(Be==="string"||Be==="number"))&&(t[Oe]=ke):Be===typeof t[Oe]&&(t[Oe]=Oe==="rotate"?ke%4:ke)}return t}const separator=/[\s,]+/;function flipFromString(Ae,e){e.split(separator).forEach(t=>{switch(t.trim()){case"horizontal":Ae.hFlip=!0;break;case"vertical":Ae.vFlip=!0;break}})}function rotateFromString(Ae,e=0){const t=Ae.replace(/^-?[0-9.]*/,"");function Oe(ke){for(;ke<0;)ke+=4;return ke%4}if(t===""){const ke=parseInt(Ae);return isNaN(ke)?0:Oe(ke)}else if(t!==Ae){let ke=0;switch(t){case"%":ke=25;break;case"deg":ke=90}if(ke){let Be=parseFloat(Ae.slice(0,Ae.length-t.length));return isNaN(Be)?0:(Be=Be/ke,Be%1===0?Oe(Be):0)}}return e}function iconToHTML(Ae,e){let t=Ae.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const Oe in e)t+=" "+Oe+'="'+e[Oe]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+t+">"+Ae+"</svg>"}function encodeSVGforURL(Ae){return Ae.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function svgToData(Ae){return"data:image/svg+xml,"+encodeSVGforURL(Ae)}function svgToURL(Ae){return'url("'+svgToData(Ae)+'")'}const defaultExtendedIconCustomisations={...defaultIconCustomisations,inline:!1},svgDefaults={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},commonProps={display:"inline-block"},monotoneProps={backgroundColor:"currentColor"},coloredProps={backgroundColor:"transparent"},propsToAdd={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},propsToAddTo={webkitMask:monotoneProps,mask:monotoneProps,background:coloredProps};for(const Ae in propsToAddTo){const e=propsToAddTo[Ae];for(const t in propsToAdd)e[Ae+t]=propsToAdd[t]}const customisationAliases={};["horizontal","vertical"].forEach(Ae=>{const e=Ae.slice(0,1)+"Flip";customisationAliases[Ae+"-flip"]=e,customisationAliases[Ae.slice(0,1)+"-flip"]=e,customisationAliases[Ae+"Flip"]=e});function fixSize(Ae){return Ae+(Ae.match(/^[-0-9.]+$/)?"px":"")}const render$2=(Ae,e)=>{const t=mergeCustomisations(defaultExtendedIconCustomisations,e),Oe={...svgDefaults},ke=e.mode||"svg",Be={},Ue=e.style,je=typeof Ue=="object"&&!(Ue instanceof Array)?Ue:{};for(let Dn in e){const ti=e[Dn];if(ti!==void 0)switch(Dn){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":t[Dn]=ti===!0||ti==="true"||ti===1;break;case"flip":typeof ti=="string"&&flipFromString(t,ti);break;case"color":Be.color=ti;break;case"rotate":typeof ti=="string"?t[Dn]=rotateFromString(ti):typeof ti=="number"&&(t[Dn]=ti);break;case"ariaHidden":case"aria-hidden":ti!==!0&&ti!=="true"&&delete Oe["aria-hidden"];break;default:{const ni=customisationAliases[Dn];ni?(ti===!0||ti==="true"||ti===1)&&(t[ni]=!0):defaultExtendedIconCustomisations[Dn]===void 0&&(Oe[Dn]=ti)}}}const We=iconToSVG(Ae,t),Qe=We.attributes;if(t.inline&&(Be.verticalAlign="-0.125em"),ke==="svg"){Oe.style={...Be,...je},Object.assign(Oe,Qe);let Dn=0,ti=e.id;return typeof ti=="string"&&(ti=ti.replace(/-/g,"_")),Oe.innerHTML=replaceIDs(We.body,ti?()=>ti+"ID"+Dn++:"iconifyVue"),h$1("svg",Oe)}const{body:Cn,width:An,height:En}=Ae,Sn=ke==="mask"||(ke==="bg"?!1:Cn.indexOf("currentColor")!==-1),Tn=iconToHTML(Cn,{...Qe,width:An+"",height:En+""});return Oe.style={...Be,"--svg":svgToURL(Tn),width:fixSize(Qe.width),height:fixSize(Qe.height),...commonProps,...Sn?monotoneProps:coloredProps,...je},h$1("span",Oe)};allowSimpleNames(!0);setAPIModule("",fetchAPIModule);if(typeof document<"u"&&typeof window<"u"){const Ae=window;if(Ae.IconifyPreload!==void 0){const e=Ae.IconifyPreload,t="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(Oe=>{try{(typeof Oe!="object"||Oe===null||Oe instanceof Array||typeof Oe.icons!="object"||typeof Oe.prefix!="string"||!addCollection(Oe))&&console.error(t)}catch{console.error(t)}})}if(Ae.IconifyProviders!==void 0){const e=Ae.IconifyProviders;if(typeof e=="object"&&e!==null)for(let t in e){const Oe="IconifyProviders["+t+"] is invalid.";try{const ke=e[t];if(typeof ke!="object"||!ke||ke.resources===void 0)continue;addAPIProvider(t,ke)||console.error(Oe)}catch{console.error(Oe)}}}}const emptyIcon={...defaultIconProps,body:""},Icon$1=defineComponent({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(Ae,e,t){if(typeof Ae=="object"&&Ae!==null&&typeof Ae.body=="string")return this._name="",this.abortLoading(),{data:Ae};let Oe;if(typeof Ae!="string"||(Oe=stringToIcon(Ae,!1,!0))===null)return this.abortLoading(),null;let ke=getIconData(Oe);if(!ke)return(!this._loadingIcon||this._loadingIcon.name!==Ae)&&(this.abortLoading(),this._name="",ke!==null&&(this._loadingIcon={name:Ae,abort:loadIcons([Oe],()=>{this.counter++})})),null;if(this.abortLoading(),this._name!==Ae&&(this._name=Ae,e&&e(Ae)),t){ke=Object.assign({},ke);const Ue=t(ke.body,Oe.name,Oe.prefix,Oe.provider);typeof Ue=="string"&&(ke.body=Ue)}const Be=["iconify"];return Oe.prefix!==""&&Be.push("iconify--"+Oe.prefix),Oe.provider!==""&&Be.push("iconify--"+Oe.provider),{data:ke,classes:Be}}},render(){this.counter;const Ae=this.$attrs,e=this.iconMounted||Ae.ssr?this.getIcon(Ae.icon,Ae.onLoad,Ae.customise):null;if(!e)return render$2(emptyIcon,Ae);let t=Ae;return e.classes&&(t={...Ae,class:(typeof Ae.class=="string"?Ae.class+" ":"")+e.classes.join(" ")}),render$2({...defaultIconProps,...e.data},t)}}),st$1=Symbol("accordions"),rt$1=Symbol("header"),He=Symbol("tabs"),he$1=()=>{const Ae=ref(),e=ref(!1),t=ref(!1),Oe=()=>{if(!Ae.value)return;Ae.value.style.setProperty("--collapser","none");const ke=Ae.value.offsetHeight;Ae.value.style.setProperty("--collapse",`${-ke}px`),Ae.value.style.setProperty("--collapser","")};return{collapse:Ae,collapsing:e,cssExpanded:t,doExpand:ke=>{Ae.value&&(ke===!0&&Ae.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,Oe(),window.requestAnimationFrame(()=>{t.value=ke})}))},adjust:Oe,onTransitionEnd:(ke,Be=!0)=>{var Ue,je;e.value=!1,Be&&((je=(Ue=Ae.value)==null?void 0:Ue.querySelector("a"))==null||je.focus()),Ae.value&&ke===!1&&Ae.value.style.removeProperty("--collapse-max-height")}}},ga="(prefers-color-scheme: dark)",ba="vue-dsfr-scheme";let Ce;const Pe="light",Ee="dark",De="system",ot$1="data-fr-theme",Xe=Ae=>{const e=Ae??(localStorage.getItem(Ce)||De);return[Pe,Ee,De].includes(e)?e:De},lt$2=(Ae,e)=>(Ae=Xe(Ae),Ae===De?e!=null&&e.matches?Ee:Pe:Ae),Ju=Ae=>{if(typeof window>"u")return;Ce=ba;const e={scheme:localStorage.getItem(Ce)||De,dataThemeAttribute:ot$1,...Ae},t=window.matchMedia&&window.matchMedia(ga),Oe=ref(Xe(e.scheme));localStorage.setItem(Ce,Oe.value);const ke=ref(lt$2(Oe.value,t)),Be=ref(Oe.value!==De);watchEffect(()=>{var Cn;(Cn=document.body.parentElement)==null||Cn.setAttribute(e.dataThemeAttribute||ot$1,ke.value)}),t==null||t.addEventListener("change",Cn=>{Be.value||(Cn.matches?ke.value=Ee:ke.value=Pe)}),!Be.value&&t!=null&&t.matches&&(ke.value=Ee);const Ue=Cn=>{if(Oe.value=Xe(Cn),localStorage.setItem(Ce,Oe.value),[Pe,Ee].includes(Oe.value)){ke.value=Oe.value,Be.value=!0;return}ke.value=lt$2(Oe.value,t),Be.value=!1},je=document.documentElement,We={subtree:!1,childList:!1,attributes:!0},Qe=new MutationObserver(Cn=>{for(const An of Cn)if(An.type==="attributes"&&An.attributeName==="data-fr-theme"){const En=An.target.getAttribute(An.attributeName);En!==Oe.value&&Ue(En)}});return Qe.observe(je,We),window.addEventListener("unload",()=>Qe.disconnect()),Ue(Oe.value),{setScheme:Ue,theme:computed(()=>ke.value),scheme:computed(()=>Oe.value)}},Z$2=(Ae="",e="")=>(Ae?`${Ae}-`:"")+useId()+(e?`-${e}`:""),ka={class:"fr-accordion"},$a=["aria-expanded","aria-controls"],wa=["id"],_a$1=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>Z$2("accordion")},selected:{type:Boolean},title:{default:"Sans intitulé"},titleTag:{default:"h3"}},setup(Ae){const e=Ae,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=he$1(),je=ref(),We=inject(st$1),{isActive:Qe,expand:Cn}=(We==null?void 0:We(toRef(()=>e.title)))??{isActive:je,expand:()=>je.value=!je.value};return onMounted(()=>{Qe.value&&Be(!0)}),watch(Qe,(An,En)=>{An!==En&&Be(An)}),(An,En)=>(openBlock(),createElementBlock("section",ka,[(openBlock(),createBlock(resolveDynamicComponent(An.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":unref(Qe),"aria-controls":An.id,type:"button",onClick:En[0]||(En[0]=Sn=>unref(Cn)())},[renderSlot(An.$slots,"title",{},()=>[createTextVNode(toDisplayString(An.title),1)])],8,$a)]),_:3})),createBaseVNode("div",{id:An.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),onTransitionend:En[1]||(En[1]=Sn=>unref(Ue)(unref(Qe),!1))},[renderSlot(An.$slots,"default")],42,wa)]))}}),Da={class:"fr-accordions-group"},Ia=defineComponent({__name:"DsfrAccordionsGroup",props:{modelValue:{default:-1}},emits:["update:modelValue"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=computed({get:()=>t.modelValue,set(je){Oe("update:modelValue",je)}}),Be=ref(new Map),Ue=ref(0);return provide(st$1,je=>{const We=Ue.value++;Be.value.set(We,je.value);const Qe=computed(()=>We===ke.value);watch(je,()=>{Be.value.set(We,je.value)});function Cn(){if(ke.value===We){ke.value=-1;return}ke.value=We}return onUnmounted(()=>{Be.value.delete(We)}),{isActive:Qe,expand:Cn}}),(je,We)=>(openBlock(),createElementBlock("div",Da,[renderSlot(je.$slots,"default")]))}}),Ta=["id","role"],Ca=["title","aria-label"],Ea=defineComponent({__name:"DsfrAlert",props:{alert:{type:Boolean},closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>Z$2("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=()=>Oe("close"),Be=computed(()=>[`fr-alert--${t.type}`,{"fr-alert--sm":t.small}]);return(Ue,je)=>Ue.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:Ue.id,class:normalizeClass(["fr-alert",Be.value]),role:Ue.alert?"alert":void 0},[Ue.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(Ue.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(Ue.title),1)]),_:1})),renderSlot(Ue.$slots,"default",{},()=>[createTextVNode(toDisplayString(Ue.description),1)]),Ue.closeable?(openBlock(),createElementBlock("button",{key:1,class:"fr-btn fr-btn--close",title:Ue.closeButtonLabel,"aria-label":Ue.closeButtonLabel,onClick:ke},null,8,Ca)):createCommentVNode("",!0)],10,Ta))}}),Ra=defineComponent({__name:"VIcon",props:{name:{},scale:{default:1},verticalAlign:{default:"-0.2em"},animation:{},speed:{},flip:{},label:{},title:{},color:{},fill:{},inverse:{type:Boolean},ssr:{type:Boolean},display:{default:"inline-block"}},setup(Ae){useCssVars(We=>({"177d0d84":je.value}));const e=Ae,t=ref(null),Oe=computed(()=>`${+e.scale*1.2}rem`),ke=computed(()=>e.flip==="both"?"horizontal,vertical":e.flip);watch(()=>e.title,Be);async function Be(){var We,Qe,Cn,An;if(!((We=t.value)!=null&&We.$el))return;const En=!!((Qe=t.value)==null?void 0:Qe.$el).querySelector("title"),Sn=document.createElement("title");if(!e.title){Sn.remove();return}Sn.innerHTML=e.title,await nextTick(),En||(An=((Cn=t.value)==null?void 0:Cn.$el).firstChild)==null||An.before(Sn)}onMounted(Be);const Ue=computed(()=>{var We;return(We=e.name)!=null&&We.startsWith("vi-")?e.name.replace(/vi-(.*)/,"vscode-icons:$1"):e.name??""}),je=computed(()=>e.color??e.fill??"inherit");return(We,Qe)=>(openBlock(),createBlock(unref(Icon$1),{ref_key:"icon",ref:t,icon:Ue.value,style:normalizeStyle({fontSize:Oe.value,verticalAlign:We.verticalAlign,display:We.display}),"aria-label":We.label,class:normalizeClass(["vicon",{"vicon-spin":e.animation==="spin","vicon-wrench":e.animation==="wrench","vicon-pulse":e.animation==="pulse","vicon-spin-pulse":e.animation==="spin-pulse","vicon-flash":e.animation==="flash","vicon-float":e.animation==="float","vicon-ring":e.animation==="ring","vicon-slow":e.speed==="slow","vicon-fast":e.speed==="fast","vicon-inverse":e.inverse}]),flip:ke.value,ssr:We.ssr},null,8,["icon","style","aria-label","class","flip","ssr"]))}}),ie$1=(Ae,e)=>{const t=Ae.__vccOpts||Ae;for(const[Oe,ke]of e)t[Oe]=ke;return t},le$1=ie$1(Ra,[["__scopeId","data-v-73a1cd7e"]]),Va=["title","disabled","aria-disabled"],ja={key:1},Oa=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(Ae,{expose:e}){const t=Ae,Oe=computed(()=>["sm","small"].includes(t.size)),ke=computed(()=>["md","medium"].includes(t.size)),Be=computed(()=>["lg","large"].includes(t.size)),Ue=ref(null);e({focus:()=>{var Cn;(Cn=Ue.value)==null||Cn.focus()}});const je=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),We=computed(()=>t.iconOnly?1.25:.8325),Qe=computed(()=>typeof t.icon=="string"?{scale:We.value,name:t.icon}:{scale:We.value,...t.icon});return(Cn,An)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:Ue,class:normalizeClass(["fr-btn",{"fr-btn--secondary":Cn.secondary&&!Cn.tertiary,"fr-btn--tertiary":Cn.tertiary&&!Cn.secondary&&!Cn.noOutline,"fr-btn--tertiary-no-outline":Cn.tertiary&&!Cn.secondary&&Cn.noOutline,"fr-btn--sm":Oe.value,"fr-btn--md":ke.value,"fr-btn--lg":Be.value,"fr-btn--icon-right":!Cn.iconOnly&&je.value&&Cn.iconRight,"fr-btn--icon-left":!Cn.iconOnly&&je.value&&!Cn.iconRight,"inline-flex":!je.value,reverse:Cn.iconRight&&!je.value,"justify-center":!je.value&&Cn.iconOnly,[Cn.icon]:je.value}]),title:Cn.iconOnly?Cn.label:void 0,disabled:Cn.disabled,"aria-disabled":Cn.disabled,style:normalizeStyle(!je.value&&Cn.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:An[0]||(An[0]=En=>Cn.onClick?Cn.onClick(En):()=>{})},[Cn.icon&&!je.value?(openBlock(),createBlock(le$1,normalizeProps(mergeProps({key:0},Qe.value)),null,16)):createCommentVNode("",!0),Cn.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",ja,[createTextVNode(toDisplayString(Cn.label)+" ",1),renderSlot(Cn.$slots,"default",{},void 0,!0)]))],14,Va))}}),Ie=ie$1(Oa,[["__scopeId","data-v-118397f5"]]),Ke=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(Ae){const e=Ae,t=ref(null),Oe=computed(()=>["sm","small"].includes(e.size)),ke=computed(()=>["md","medium"].includes(e.size)),Be=computed(()=>["lg","large"].includes(e.size)),Ue=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),je=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),We=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),Qe=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),Cn=computed(()=>e.align==="center"),An=computed(()=>e.align==="right"),En=ref("auto"),Sn=computed(()=>`--equisized-width: ${En.value};`),Tn=async()=>{var Dn;let ti=0;await new Promise(ni=>setTimeout(ni,100)),(Dn=t.value)==null||Dn.querySelectorAll(".fr-btn").forEach(ni=>{const ii=ni,si=ii.offsetWidth,oi=window.getComputedStyle(ii),ci=+oi.marginLeft.replace("px",""),Pi=+oi.marginRight.replace("px","");ii.style.width="var(--equisized-width)";const Ai=si+ci+Pi;Ai>ti&&(ti=Ai)}),En.value=`${ti}px`};return onMounted(async()=>{!t.value||!e.equisized||await Tn()}),(Dn,ti)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:t,style:normalizeStyle(Sn.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":Dn.equisized,"fr-btns-group--sm":Oe.value,"fr-btns-group--md":ke.value,"fr-btns-group--lg":Be.value,"fr-btns-group--inline-sm":Ue.value||je.value,"fr-btns-group--inline-md":Ue.value||We.value,"fr-btns-group--inline-lg":Ue.value||Qe.value,"fr-btns-group--center":Cn.value,"fr-btns-group--right":An.value,"fr-btns-group--icon-right":Dn.iconRight,"fr-btns-group--inline-reverse":Dn.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(Dn.buttons,({onClick:ni,...ii},si)=>(openBlock(),createElementBlock("li",{key:si},[createVNode(Ie,mergeProps({ref_for:!0},ii,{onClick:ni}),null,16,["onClick"])]))),128)),renderSlot(Dn.$slots,"default")],6))}}),ns$2=["id","name","value","checked","required","data-testid","data-test"],os=["for"],ls={key:0,class:"required"},is={key:0,class:"fr-hint-text"},ds={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},nt$1=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:mergeModels({id:{default:()=>Z$2("basic","checkbox")},name:{},required:{type:Boolean},value:{},checked:{type:Boolean},modelValue:{},small:{type:Boolean},inline:{type:Boolean},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Ae){const e=Ae,t=computed(()=>e.errorMessage||e.validMessage),Oe=computed(()=>e.errorMessage?"fr-error-text":"fr-valid-text"),ke=useModel(Ae,"modelValue");return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Be.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":Be.errorMessage,"fr-checkbox-group--valid":!Be.errorMessage&&Be.validMessage,"fr-checkbox-group--sm":Be.small}])},[withDirectives(createBaseVNode("input",mergeProps({id:Be.id,"onUpdate:modelValue":Ue[0]||(Ue[0]=je=>ke.value=je),name:Be.name,type:"checkbox",value:Be.value,checked:ke.value===!0||Array.isArray(ke.value)&&ke.value.includes(Be.value),required:Be.required},Be.$attrs,{"data-testid":`input-checkbox-${Be.id}`,"data-test":`input-checkbox-${Be.id}`}),null,16,ns$2),[[vModelCheckbox,ke.value]]),createBaseVNode("label",{for:Be.id,class:"fr-label"},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.required?(openBlock(),createElementBlock("span",ls," *")):createCommentVNode("",!0)])]),Be.hint?(openBlock(),createElementBlock("span",is,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],8,os),t.value?(openBlock(),createElementBlock("div",ds,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Oe.value])},toDisplayString(t.value),3)])):createCommentVNode("",!0)],2)],2))}}),gs={class:"fr-consent-banner__content"},bs={class:"fr-text--sm"},hs={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},ys=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(Ae){const e=Ae,t=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),Oe=computed(()=>e.url?t.value?"a":"RouterLink":"a"),ke=computed(()=>({[t.value?"href":"to"]:e.url}));return(Be,Ue)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",gs,[createBaseVNode("p",bs,[renderSlot(Be.$slots,"default",{},()=>[Ue[4]||(Ue[4]=createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page ")),(openBlock(),createBlock(resolveDynamicComponent(Oe.value),mergeProps(ke.value,{"data-testid":"link"}),{default:withCtx(()=>Ue[3]||(Ue[3]=[createTextVNode(" Données personnelles et cookies ")])),_:1},16)),Ue[5]||(Ue[5]=createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. "))])])]),createBaseVNode("ul",hs,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:Ue[0]||(Ue[0]=withModifiers(je=>Be.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:Ue[1]||(Ue[1]=withModifiers(je=>Be.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:Ue[2]||(Ue[2]=withModifiers(je=>Be.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),dt$1=1,St=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},title:{}},setup(Ae){const e=Ae,t=computed(()=>{var Cn;return(Cn=e.href)==null?void 0:Cn.startsWith("http")}),Oe=computed(()=>{var Cn;return(Cn=e.href)==null?void 0:Cn.startsWith("mailto")}),ke=computed(()=>e.button?"button":t.value||Oe.value?"a":"RouterLink"),Be=computed(()=>{if(!(!t.value&&!Oe.value))return e.href}),Ue=computed(()=>{if(!(t.value||Oe.value))return e.to}),je=computed(()=>Ue.value?{to:Ue.value}:{href:Be.value}),We=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Qe=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:dt$1,...e.iconAttrs??{}}:{scale:dt$1,...e.icon??{},...e.iconAttrs??{}});return(Cn,An)=>(openBlock(),createBlock(resolveDynamicComponent(ke.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":We.value&&Cn.iconRight,"fr-btn--icon-left":We.value&&!Cn.iconRight,[String(Cn.icon)]:We.value}]},je.value,{target:Cn.target,onClick:withModifiers(Cn.onClick,["stop"])}),{default:withCtx(()=>{var En,Sn;return[!We.value&&(Cn.icon||(En=Cn.iconAttrs)!=null&&En.name)&&!Cn.iconRight?(openBlock(),createBlock(le$1,mergeProps({key:0,class:"fr-mr-1w"},Qe.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Cn.label)+" ",1),!We.value&&(Cn.icon||(Sn=Cn.iconAttrs)!=null&&Sn.name)&&Cn.iconRight?(openBlock(),createBlock(le$1,mergeProps({key:1,class:"fr-ml-1w"},Qe.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Gr={class:"fr-footer__partners"},Xr={key:0,class:"fr-footer__partners-title"},Ur={class:"fr-footer__partners-logos"},Yr={key:0,class:"fr-footer__partners-main"},Zr=["href"],Jr=["src","alt"],xr={class:"fr-footer__partners-sub"},en=["href"],tn=["src","alt"],At$2=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(Ae){return(e,t)=>(openBlock(),createElementBlock("div",Gr,[e.title?(openBlock(),createElementBlock("h4",Xr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",Ur,[e.mainPartner?(openBlock(),createElementBlock("div",Yr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,Jr)],8,Zr)])):createCommentVNode("",!0),createBaseVNode("div",xr,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(Oe,ke)=>(openBlock(),createElementBlock("li",{key:ke},[createBaseVNode("a",{class:"fr-footer__partners-link",href:Oe.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:Oe.logo,alt:Oe.name},null,8,tn)],8,en)]))),128))])])])]))}}),an=["innerHTML"],Me=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(Ae){const e=Ae,t=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(Oe,ke)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":Oe.small&&!Oe.large,"fr-logo--lg":Oe.large&&!Oe.small}]),innerHTML:t.value},null,10,an))}}),sn={id:"footer",class:"fr-footer",role:"contentinfo"},rn={key:0,class:"fr-footer__top"},nn={class:"fr-container"},on$1={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},ln$1={class:"fr-container"},dn={class:"fr-footer__body"},un={key:0,class:"fr-footer__brand fr-enlarge-link"},cn=["href"],fn=["src","alt"],pn=["src","alt"],vn={key:1,class:"fr-footer__brand fr-enlarge-link"},mn={class:"fr-footer__content"},gn={class:"fr-footer__content-desc"},bn={class:"fr-footer__content-list"},hn=["href","title"],yn={class:"fr-footer__bottom"},kn={class:"fr-footer__bottom-list"},$n={key:0,class:"fr-footer__bottom-copy"},wn=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:Ae=>[{label:`Accessibilité : ${Ae.a11yCompliance}`,to:Ae.a11yComplianceLink},{label:"Mentions légales",to:Ae.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:Ae.personalDataLink},{label:"Gestion des cookies",to:Ae.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"info.gouv.fr",href:"https://info.gouv.fr",title:"Informations gouvernementales, nouvelle fenêtre"},{label:"service-public.fr",href:"https://service-public.fr",title:"Informations et démarches administratives, nouvelle fenêtre"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr",title:"Service public de diffusion du droit, nouvelle fenêtre"},{label:"data.gouv.fr",href:"https://data.gouv.fr",title:"Plateforme des données publiques, nouvelle fenêtre"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous"},licenceName:{default:"licence etalab-2.0"}},setup(Ae){const e=Ae,t=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),Oe=useSlots(),ke=computed(()=>{var Cn;return(Cn=Oe["footer-link-lists"])==null?void 0:Cn.call(Oe).length}),Be=computed(()=>{const Cn=e.licenceTo||e.licenceLinkProps.to;return Cn&&typeof Cn=="string"&&Cn.startsWith("http")}),Ue=computed(()=>{const{to:Cn,href:An,...En}=e.licenceLinkProps??{};return En}),je=computed(()=>Be.value?"":e.licenceTo),We=computed(()=>Be.value?e.licenceTo:""),Qe=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(Cn,An)=>{const En=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",sn,[ke.value?(openBlock(),createElementBlock("div",rn,[createBaseVNode("div",nn,[createBaseVNode("div",on$1,[renderSlot(Cn.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",ln$1,[createBaseVNode("div",dn,[Cn.operatorImgSrc?(openBlock(),createElementBlock("div",un,[createVNode(Me,{"logo-text":Cn.logoText},null,8,["logo-text"]),Qe.value?(openBlock(),createElementBlock("a",{key:0,href:Cn.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Cn.operatorImgStyle),src:Cn.operatorImgSrc,alt:Cn.operatorImgAlt},null,12,fn)],8,cn)):(openBlock(),createBlock(En,{key:1,class:"fr-footer__brand-link",to:Cn.homeLink,title:Cn.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Cn.operatorImgStyle),src:Cn.operatorImgSrc,alt:Cn.operatorImgAlt},null,12,pn)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",vn,[createVNode(En,{to:Cn.homeLink,title:Cn.homeTitle},{default:withCtx(()=>[createVNode(Me,{"logo-text":Cn.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",mn,[createBaseVNode("p",gn,[renderSlot(Cn.$slots,"description",{},()=>[createTextVNode(toDisplayString(Cn.descText),1)],!0)]),createBaseVNode("ul",bn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.ecosystemLinks,({href:Sn,label:Tn,title:Dn,...ti},ni)=>(openBlock(),createElementBlock("li",{key:ni,class:"fr-footer__content-item"},[createBaseVNode("a",mergeProps({class:"fr-footer__content-link",href:Sn,target:"_blank",rel:"noopener noreferrer",title:Dn,ref_for:!0},ti),toDisplayString(Tn),17,hn)]))),128))])])]),Cn.partners?(openBlock(),createBlock(At$2,normalizeProps(mergeProps({key:0},Cn.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",yn,[createBaseVNode("ul",kn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(Sn,Tn)=>(openBlock(),createElementBlock("li",{key:Tn,class:"fr-footer__bottom-item"},[createVNode(St,mergeProps({ref_for:!0},Sn),null,16)]))),128))]),Cn.licenceText?(openBlock(),createElementBlock("div",$n,[createBaseVNode("p",null,[createTextVNode(toDisplayString(Cn.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Be.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Be.value?void 0:je.value,href:Be.value?We.value:void 0,target:Be.value?"_blank":void 0,title:Be.value?`${Cn.licenceName} (nouvelle fenêtre)`:Cn.licenceName,rel:"noopener noreferrer"},Ue.value),{default:withCtx(()=>[createTextVNode(toDisplayString(Cn.licenceName),1)]),_:1},16,["to","href","target","title"]))])])):createCommentVNode("",!0)])])])}}}),_n=ie$1(wn,[["__scopeId","data-v-613931c6"]]),Bn={role:"navigation",class:"fr-translate fr-nav"},Ln={class:"fr-nav__item"},Pn=["aria-controls","aria-expanded"],Mn={class:"fr-hidden-lg"},Nn=["id"],Fn={class:"fr-menu__list"},Rn=["hreflang","lang","aria-current","href","onClick"],Ye=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>Z$2("language-selector")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(Ae,{emit:e}){const t=Ae,Oe=e,{collapse:ke,collapsing:Be,cssExpanded:Ue,doExpand:je,onTransitionEnd:We}=he$1(),Qe=ref(!1);function Cn(En){Qe.value=!1,Oe("select",En)}const An=computed(()=>t.languages.find(({codeIso:En})=>En===t.currentLanguage));return watch(Qe,(En,Sn)=>{En!==Sn&&je(En)}),(En,Sn)=>{var Tn,Dn;return openBlock(),createElementBlock("nav",Bn,[createBaseVNode("div",Ln,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":En.id,"aria-expanded":Qe.value,title:"Sélectionner une langue",type:"button",onClick:Sn[0]||(Sn[0]=withModifiers(ti=>Qe.value=!Qe.value,["prevent","stop"]))},[createTextVNode(toDisplayString((Tn=An.value)==null?void 0:Tn.codeIso.toUpperCase()),1),createBaseVNode("span",Mn," - "+toDisplayString((Dn=An.value)==null?void 0:Dn.label),1)],8,Pn),createBaseVNode("div",{id:En.id,ref_key:"collapse",ref:ke,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(Ue),"fr-collapsing":unref(Be)}]),onTransitionend:Sn[1]||(Sn[1]=ti=>unref(We)(Qe.value))},[createBaseVNode("ul",Fn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(En.languages,(ti,ni)=>(openBlock(),createElementBlock("li",{key:ni},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:ti.codeIso,lang:ti.codeIso,"aria-current":En.currentLanguage===ti.codeIso?!0:void 0,href:`#${ti.codeIso}`,onClick:withModifiers(ii=>Cn(ti),["prevent","stop"])},toDisplayString(`${ti.codeIso.toUpperCase()} - ${ti.label}`),9,Rn)]))),128))])],42,Nn)])])}}}),Vn=["for"],jn={key:0,class:"required"},On={key:0,class:"fr-hint-text"},Hn=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>Z$2("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(Ae,{expose:e}){const t=Ae,Oe=useAttrs(),ke=ref(null),Be=()=>{var Qe;return(Qe=ke.value)==null?void 0:Qe.focus()},Ue=computed(()=>t.isTextarea?"textarea":"input"),je=computed(()=>t.isWithWrapper||Oe.type==="date"||!!t.wrapperClass),We=computed(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:Be}),(Qe,Cn)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(We.value),for:Qe.id},[renderSlot(Qe.$slots,"label",{},()=>[createTextVNode(toDisplayString(Qe.label)+" ",1),renderSlot(Qe.$slots,"required-tip",{},()=>["required"in Qe.$attrs&&Qe.$attrs.required!==!1?(openBlock(),createElementBlock("span",jn,"*")):createCommentVNode("",!0)],!0)],!0),Qe.hint?(openBlock(),createElementBlock("span",On,toDisplayString(Qe.hint),1)):createCommentVNode("",!0)],10,Vn),je.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":Qe.isWithWrapper||Qe.$attrs.type==="date"},Qe.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({id:Qe.id},Qe.$attrs,{ref_key:"__input",ref:ke,class:["fr-input",{"fr-input--error":Qe.isInvalid,"fr-input--valid":Qe.isValid}],value:Qe.modelValue,"aria-describedby":Qe.descriptionId||void 0,onInput:Cn[1]||(Cn[1]=An=>Qe.$emit("update:modelValue",An.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({key:0,id:Qe.id},Qe.$attrs,{ref_key:"__input",ref:ke,class:["fr-input",{"fr-input--error":Qe.isInvalid,"fr-input--valid":Qe.isValid}],value:Qe.modelValue,"aria-describedby":Qe.descriptionId||void 0,onInput:Cn[0]||(Cn[0]=An=>Qe.$emit("update:modelValue",An.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),qe=ie$1(Hn,[["__scopeId","data-v-7ca45de8"]]),Ze=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>Z$2("search","input")},label:{default:""},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(Ae,{emit:e}){const t=e;return(Oe,ke)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":Oe.large}]),role:"search"},[createVNode(qe,{id:Oe.id,type:"search",placeholder:Oe.placeholder,"model-value":Oe.modelValue,label:Oe.label,disabled:Oe.disabled,"aria-disabled":Oe.disabled,"onUpdate:modelValue":ke[0]||(ke[0]=Be=>t("update:modelValue",Be)),onKeydown:ke[1]||(ke[1]=withKeys(Be=>t("search",Oe.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label","disabled","aria-disabled"]),createVNode(Ie,{title:"Rechercher",disabled:Oe.disabled,"aria-disabled":Oe.disabled,onClick:ke[2]||(ke[2]=Be=>t("search",Oe.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(Oe.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),ut$1=1,Bt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},path:{default:""}},setup(Ae){const e=Ae,t=computed(()=>typeof e.path=="string"),Oe=computed(()=>{var An;return((An=e.href)==null?void 0:An.startsWith("http"))||t.value&&e.path.startsWith("http")||typeof e.to=="string"&&e.to.startsWith("http")}),ke=computed(()=>{var An;return((An=e.href)==null?void 0:An.startsWith("mailto"))||t.value&&e.path.startsWith("mailto")||typeof e.to=="string"&&e.to.startsWith("mailto")}),Be=computed(()=>e.button?"button":Oe.value||ke.value?"a":"RouterLink"),Ue=computed(()=>{if(!(!Oe.value&&!ke.value))return e.to??e.href??e.path}),je=computed(()=>{if(!(Oe.value||ke.value))return e.to??e.path}),We=computed(()=>je.value?{to:je.value}:{href:Ue.value}),Qe=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Cn=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ut$1,...e.iconAttrs??{}}:{scale:ut$1,...e.icon??{},...e.iconAttrs??{}});return(An,En)=>(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":Qe.value&&An.iconRight,"fr-btn--icon-left":Qe.value&&!An.iconRight,[String(An.icon)]:Qe.value}]},We.value,{target:An.target,onClick:En[0]||(En[0]=withModifiers(Sn=>An.onClick(Sn),["stop"]))}),{default:withCtx(()=>{var Sn,Tn;return[!Qe.value&&(An.icon||(Sn=An.iconAttrs)!=null&&Sn.name)&&!An.iconRight?(openBlock(),createBlock(le$1,mergeProps({key:0,class:"fr-mr-1w"},Cn.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(An.label)+" ",1),!Qe.value&&(An.icon||(Tn=An.iconAttrs)!=null&&Tn.name)&&An.iconRight?(openBlock(),createBlock(le$1,mergeProps({key:1,class:"fr-ml-1w"},Cn.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target"]))}}),Kn=["aria-label"],qn={class:"fr-btns-group"},Je=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(Ae,{emit:e}){const t=e;return(Oe,ke)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":Oe.navAriaLabel},[createBaseVNode("ul",qn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.links,(Be,Ue)=>(openBlock(),createElementBlock("li",{key:Ue},[createVNode(Bt$1,mergeProps({ref_for:!0},Be,{"on-click":je=>{var We;t("linkClick",je),(We=Be.onClick)==null||We.call(Be,je)}}),null,16,["on-click"])]))),128))])],8,Kn))}}),zn={role:"banner",class:"fr-header"},Qn={class:"fr-header__body"},Wn={class:"fr-container width-inherit"},Gn={class:"fr-header__body-row"},Xn$1={class:"fr-header__brand fr-enlarge-link"},Un={class:"fr-header__brand-top"},Yn$1={class:"fr-header__logo"},Zn$1={key:0,class:"fr-header__operator"},Jn=["src","alt"],xn={key:1,class:"fr-header__navbar"},eo=["aria-label","title","data-fr-opened"],to=["aria-label","title"],ao={key:0,class:"fr-header__service"},so={class:"fr-header__service-title"},ro={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},no={key:0,class:"fr-header__service-tagline"},oo={key:1,class:"fr-header__service"},lo={class:"fr-header__tools"},io={key:0,class:"fr-header__tools-links"},uo={key:1,class:"fr-header__search fr-modal"},co=["aria-label"],fo={class:"fr-container"},po={class:"fr-header__menu-links"},vo={key:1,class:"flex justify-center items-center"},mo={class:"fr-header__menu fr-modal"},go={key:0,class:"fr-container"},bo=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","languageSelect"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=toRef(t,"languageSelector"),Be=ref(!1),Ue=ref(!1),je=ref(!1),We=()=>{var ni;je.value=!1,Be.value=!1,Ue.value=!1,(ni=document.getElementById("button-menu"))==null||ni.focus()},Qe=ni=>{ni.key==="Escape"&&We()};onMounted(()=>{document.addEventListener("keydown",Qe)}),onUnmounted(()=>{document.removeEventListener("keydown",Qe)});const Cn=()=>{je.value=!0,Be.value=!0,Ue.value=!1,setTimeout(()=>{var ni;(ni=document.getElementById("close-button"))==null||ni.focus()})},An=()=>{je.value=!0,Be.value=!1,Ue.value=!0},En=We,Sn=computed(()=>[t.homeLabel,t.serviceTitle].filter(ni=>ni).join(" - ")),Tn=useSlots(),Dn=computed(()=>{var ni;return!!((ni=Tn.operator)!=null&&ni.call(Tn).length)||!!t.operatorImgSrc}),ti=computed(()=>!!Tn.mainnav);return provide(rt$1,()=>We),(ni,ii)=>{var si,oi,ci;const Pi=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",zn,[createBaseVNode("div",Qn,[createBaseVNode("div",Wn,[createBaseVNode("div",Gn,[createBaseVNode("div",Xn$1,[createBaseVNode("div",Un,[createBaseVNode("div",Yn$1,[createVNode(Pi,{to:ni.homeTo,title:Sn.value},{default:withCtx(()=>[createVNode(Me,{"logo-text":ni.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),_:1},8,["to","title"])]),Dn.value?(openBlock(),createElementBlock("div",Zn$1,[renderSlot(ni.$slots,"operator",{},()=>[ni.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:ni.operatorImgSrc,alt:ni.operatorImgAlt,style:normalizeStyle(ni.operatorImgStyle)},null,12,Jn)):createCommentVNode("",!0)])])):createCommentVNode("",!0),ni.showSearch||ti.value||(si=ni.quickLinks)!=null&&si.length?(openBlock(),createElementBlock("div",xn,[ni.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":ni.showSearchLabel,title:ni.showSearchLabel,"data-fr-opened":Ue.value,onClick:ii[0]||(ii[0]=withModifiers(Ai=>An(),["prevent","stop"]))},null,8,eo)):createCommentVNode("",!0),ti.value||(oi=ni.quickLinks)!=null&&oi.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":Cn,"aria-controls":"header-navigation","aria-haspopup":"dialog","aria-label":ni.menuLabel,title:ni.menuLabel,"data-testid":"open-menu-btn",onClick:ii[1]||(ii[1]=withModifiers(Ai=>Cn(),["prevent","stop"]))},null,8,to)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),ni.serviceTitle?(openBlock(),createElementBlock("div",ao,[createVNode(Pi,mergeProps({to:ni.homeTo,title:Sn.value},ni.$attrs),{default:withCtx(()=>[createBaseVNode("p",so,[createTextVNode(toDisplayString(ni.serviceTitle)+" ",1),ni.showBeta?(openBlock(),createElementBlock("span",ro," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),ni.serviceDescription?(openBlock(),createElementBlock("p",no,toDisplayString(ni.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!ni.serviceTitle&&ni.showBeta?(openBlock(),createElementBlock("div",oo,ii[9]||(ii[9]=[createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1)]))):createCommentVNode("",!0)]),createBaseVNode("div",lo,[(ci=ni.quickLinks)!=null&&ci.length||ke.value?(openBlock(),createElementBlock("div",io,[renderSlot(ni.$slots,"before-quick-links"),Be.value?createCommentVNode("",!0):(openBlock(),createBlock(Je,{key:0,links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),renderSlot(ni.$slots,"after-quick-links"),ke.value?(openBlock(),createBlock(Ye,mergeProps({key:1},ke.value,{onSelect:ii[2]||(ii[2]=Ai=>Oe("languageSelect",Ai))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),ni.showSearch?(openBlock(),createElementBlock("div",uo,[createVNode(Ze,{id:ni.searchbarId,label:ni.searchLabel,"model-value":ni.modelValue,placeholder:ni.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":ii[3]||(ii[3]=Ai=>Oe("update:modelValue",Ai)),onSearch:ii[4]||(ii[4]=Ai=>Oe("search",Ai))},null,8,["id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),ni.showSearch||ti.value||ni.quickLinks&&ni.quickLinks.length||ke.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":je.value}]),"aria-label":ni.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",fo,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:ii[5]||(ii[5]=withModifiers(Ai=>We(),["prevent","stop"]))},toDisplayString(ni.closeMenuModalLabel),1),createBaseVNode("div",po,[ke.value?(openBlock(),createBlock(Ye,mergeProps({key:0},ke.value,{onSelect:ii[6]||(ii[6]=Ai=>ke.value.currentLanguage=Ai.codeIso)}),null,16)):createCommentVNode("",!0),renderSlot(ni.$slots,"before-quick-links"),Be.value?(openBlock(),createBlock(Je,{key:1,role:"navigation",links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel,onLinkClick:unref(En)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0),renderSlot(ni.$slots,"after-quick-links")]),je.value?renderSlot(ni.$slots,"mainnav",{key:0,hidemodal:We}):createCommentVNode("",!0),Ue.value?(openBlock(),createElementBlock("div",vo,[createVNode(Ze,{"searchbar-id":ni.searchbarId,"model-value":ni.modelValue,placeholder:ni.placeholder,"onUpdate:modelValue":ii[7]||(ii[7]=Ai=>Oe("update:modelValue",Ai)),onSearch:ii[8]||(ii[8]=Ai=>Oe("search",Ai))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,co)):createCommentVNode("",!0),renderSlot(ni.$slots,"default")])]),createBaseVNode("div",mo,[ti.value&&!je.value?(openBlock(),createElementBlock("div",go,[renderSlot(ni.$slots,"mainnav",{hidemodal:We})])):createCommentVNode("",!0)])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Lt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ne$1=Lt$1.join(","),Pt$1=typeof Element>"u",we$1=Pt$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Fe=!Pt$1&&Element.prototype.getRootNode?function(Ae){var e;return Ae==null||(e=Ae.getRootNode)===null||e===void 0?void 0:e.call(Ae)}:function(Ae){return Ae==null?void 0:Ae.ownerDocument},Re=function Ae(e,t){var Oe;t===void 0&&(t=!0);var ke=e==null||(Oe=e.getAttribute)===null||Oe===void 0?void 0:Oe.call(e,"inert"),Be=ke===""||ke==="true",Ue=Be||t&&e&&Ae(e.parentNode);return Ue},Io=function(Ae){var e,t=Ae==null||(e=Ae.getAttribute)===null||e===void 0?void 0:e.call(Ae,"contenteditable");return t===""||t==="true"},Mt$1=function(Ae,e,t){if(Re(Ae))return[];var Oe=Array.prototype.slice.apply(Ae.querySelectorAll(Ne$1));return e&&we$1.call(Ae,Ne$1)&&Oe.unshift(Ae),Oe=Oe.filter(t),Oe},Nt$1=function Ae(e,t,Oe){for(var ke=[],Be=Array.from(e);Be.length;){var Ue=Be.shift();if(!Re(Ue,!1))if(Ue.tagName==="SLOT"){var je=Ue.assignedElements(),We=je.length?je:Ue.children,Qe=Ae(We,!0,Oe);Oe.flatten?ke.push.apply(ke,Qe):ke.push({scopeParent:Ue,candidates:Qe})}else{var Cn=we$1.call(Ue,Ne$1);Cn&&Oe.filter(Ue)&&(t||!e.includes(Ue))&&ke.push(Ue);var An=Ue.shadowRoot||typeof Oe.getShadowRoot=="function"&&Oe.getShadowRoot(Ue),En=!Re(An,!1)&&(!Oe.shadowRootFilter||Oe.shadowRootFilter(Ue));if(An&&En){var Sn=Ae(An===!0?Ue.children:An.children,!0,Oe);Oe.flatten?ke.push.apply(ke,Sn):ke.push({scopeParent:Ue,candidates:Sn})}else Be.unshift.apply(Be,Ue.children)}}return ke},Ft$1=function(Ae){return!isNaN(parseInt(Ae.getAttribute("tabindex"),10))},$e=function(Ae){if(!Ae)throw new Error("No node provided");return Ae.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(Ae.tagName)||Io(Ae))&&!Ft$1(Ae)?0:Ae.tabIndex},To=function(Ae,e){var t=$e(Ae);return t<0&&e&&!Ft$1(Ae)?0:t},Co=function(Ae,e){return Ae.tabIndex===e.tabIndex?Ae.documentOrder-e.documentOrder:Ae.tabIndex-e.tabIndex},Rt$1=function(Ae){return Ae.tagName==="INPUT"},Eo=function(Ae){return Rt$1(Ae)&&Ae.type==="hidden"},So=function(Ae){var e=Ae.tagName==="DETAILS"&&Array.prototype.slice.apply(Ae.children).some(function(t){return t.tagName==="SUMMARY"});return e},Ao=function(Ae,e){for(var t=0;t<Ae.length;t++)if(Ae[t].checked&&Ae[t].form===e)return Ae[t]},Bo=function(Ae){if(!Ae.name)return!0;var e=Ae.form||Fe(Ae),t=function(Be){return e.querySelectorAll('input[type="radio"][name="'+Be+'"]')},Oe;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")Oe=t(window.CSS.escape(Ae.name));else try{Oe=t(Ae.name)}catch(Be){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Be.message),!1}var ke=Ao(Oe,Ae.form);return!ke||ke===Ae},Lo=function(Ae){return Rt$1(Ae)&&Ae.type==="radio"},Po=function(Ae){return Lo(Ae)&&!Bo(Ae)},Mo=function(Ae){var e,t=Ae&&Fe(Ae),Oe=(e=t)===null||e===void 0?void 0:e.host,ke=!1;if(t&&t!==Ae){var Be,Ue,je;for(ke=!!((Be=Oe)!==null&&Be!==void 0&&(Ue=Be.ownerDocument)!==null&&Ue!==void 0&&Ue.contains(Oe)||Ae!=null&&(je=Ae.ownerDocument)!==null&&je!==void 0&&je.contains(Ae));!ke&&Oe;){var We,Qe,Cn;t=Fe(Oe),Oe=(We=t)===null||We===void 0?void 0:We.host,ke=!!((Qe=Oe)!==null&&Qe!==void 0&&(Cn=Qe.ownerDocument)!==null&&Cn!==void 0&&Cn.contains(Oe))}}return ke},ct$1=function(Ae){var e=Ae.getBoundingClientRect(),t=e.width,Oe=e.height;return t===0&&Oe===0},No=function(Ae,e){var t=e.displayCheck,Oe=e.getShadowRoot;if(getComputedStyle(Ae).visibility==="hidden")return!0;var ke=we$1.call(Ae,"details>summary:first-of-type"),Be=ke?Ae.parentElement:Ae;if(we$1.call(Be,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof Oe=="function"){for(var Ue=Ae;Ae;){var je=Ae.parentElement,We=Fe(Ae);if(je&&!je.shadowRoot&&Oe(je)===!0)return ct$1(Ae);Ae.assignedSlot?Ae=Ae.assignedSlot:!je&&We!==Ae.ownerDocument?Ae=We.host:Ae=je}Ae=Ue}if(Mo(Ae))return!Ae.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return ct$1(Ae);return!1},Fo=function(Ae){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Ae.tagName))for(var e=Ae.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var Oe=e.children.item(t);if(Oe.tagName==="LEGEND")return we$1.call(e,"fieldset[disabled] *")?!0:!Oe.contains(Ae)}return!0}e=e.parentElement}return!1},Ve=function(Ae,e){return!(e.disabled||Re(e)||Eo(e)||No(e,Ae)||So(e)||Fo(e))},xe=function(Ae,e){return!(Po(e)||$e(e)<0||!Ve(Ae,e))},Ro=function(Ae){var e=parseInt(Ae.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Vo=function Ae(e){var t=[],Oe=[];return e.forEach(function(ke,Be){var Ue=!!ke.scopeParent,je=Ue?ke.scopeParent:ke,We=To(je,Ue),Qe=Ue?Ae(ke.candidates):je;We===0?Ue?t.push.apply(t,Qe):t.push(je):Oe.push({documentOrder:Be,tabIndex:We,item:ke,isScope:Ue,content:Qe})}),Oe.sort(Co).reduce(function(ke,Be){return Be.isScope?ke.push.apply(ke,Be.content):ke.push(Be.content),ke},[]).concat(t)},jo=function(Ae,e){e=e||{};var t;return e.getShadowRoot?t=Nt$1([Ae],e.includeContainer,{filter:xe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Ro}):t=Mt$1(Ae,e.includeContainer,xe.bind(null,e)),Vo(t)},Oo=function(Ae,e){e=e||{};var t;return e.getShadowRoot?t=Nt$1([Ae],e.includeContainer,{filter:Ve.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=Mt$1(Ae,e.includeContainer,Ve.bind(null,e)),t},_e=function(Ae,e){if(e=e||{},!Ae)throw new Error("No node provided");return we$1.call(Ae,Ne$1)===!1?!1:xe(e,Ae)},Ho=Lt$1.concat("iframe").join(","),Ge=function(Ae,e){if(e=e||{},!Ae)throw new Error("No node provided");return we$1.call(Ae,Ho)===!1?!1:Ve(e,Ae)};/*!
* focus-trap 7.6.2
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function et$2(Ae,e){(e==null||e>Ae.length)&&(e=Ae.length);for(var t=0,Oe=Array(e);t<e;t++)Oe[t]=Ae[t];return Oe}function Ko(Ae){if(Array.isArray(Ae))return et$2(Ae)}function qo(Ae,e,t){return(e=Xo(e))in Ae?Object.defineProperty(Ae,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Ae[e]=t,Ae}function zo(Ae){if(typeof Symbol<"u"&&Ae[Symbol.iterator]!=null||Ae["@@iterator"]!=null)return Array.from(Ae)}function Qo(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ft$1(Ae,e){var t=Object.keys(Ae);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Ae);e&&(Oe=Oe.filter(function(ke){return Object.getOwnPropertyDescriptor(Ae,ke).enumerable})),t.push.apply(t,Oe)}return t}function pt$1(Ae){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ft$1(Object(t),!0).forEach(function(Oe){qo(Ae,Oe,t[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(t)):ft$1(Object(t)).forEach(function(Oe){Object.defineProperty(Ae,Oe,Object.getOwnPropertyDescriptor(t,Oe))})}return Ae}function Wo(Ae){return Ko(Ae)||zo(Ae)||Uo(Ae)||Qo()}function Go(Ae,e){if(typeof Ae!="object"||!Ae)return Ae;var t=Ae[Symbol.toPrimitive];if(t!==void 0){var Oe=t.call(Ae,e);if(typeof Oe!="object")return Oe;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(Ae)}function Xo(Ae){var e=Go(Ae,"string");return typeof e=="symbol"?e:e+""}function Uo(Ae,e){if(Ae){if(typeof Ae=="string")return et$2(Ae,e);var t={}.toString.call(Ae).slice(8,-1);return t==="Object"&&Ae.constructor&&(t=Ae.constructor.name),t==="Map"||t==="Set"?Array.from(Ae):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?et$2(Ae,e):void 0}}var vt$1={activateTrap:function(Ae,e){if(Ae.length>0){var t=Ae[Ae.length-1];t!==e&&t.pause()}var Oe=Ae.indexOf(e);Oe===-1||Ae.splice(Oe,1),Ae.push(e)},deactivateTrap:function(Ae,e){var t=Ae.indexOf(e);t!==-1&&Ae.splice(t,1),Ae.length>0&&Ae[Ae.length-1].unpause()}},Yo=function(Ae){return Ae.tagName&&Ae.tagName.toLowerCase()==="input"&&typeof Ae.select=="function"},Zo=function(Ae){return(Ae==null?void 0:Ae.key)==="Escape"||(Ae==null?void 0:Ae.key)==="Esc"||(Ae==null?void 0:Ae.keyCode)===27},Se=function(Ae){return(Ae==null?void 0:Ae.key)==="Tab"||(Ae==null?void 0:Ae.keyCode)===9},Jo=function(Ae){return Se(Ae)&&!Ae.shiftKey},xo=function(Ae){return Se(Ae)&&Ae.shiftKey},mt$1=function(Ae){return setTimeout(Ae,0)},Te=function(Ae){for(var e=arguments.length,t=new Array(e>1?e-1:0),Oe=1;Oe<e;Oe++)t[Oe-1]=arguments[Oe];return typeof Ae=="function"?Ae.apply(void 0,t):Ae},Le$1=function(Ae){return Ae.target.shadowRoot&&typeof Ae.composedPath=="function"?Ae.composedPath()[0]:Ae.target},el=[],tl=function(Ae,e){var t=(e==null?void 0:e.document)||document,Oe=(e==null?void 0:e.trapStack)||el,ke=pt$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:Jo,isKeyBackward:xo},e),Be={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},Ue,je=function(ui,li,Ri){return ui&&ui[li]!==void 0?ui[li]:ke[Ri||li]},We=function(ui,li){var Ri=typeof(li==null?void 0:li.composedPath)=="function"?li.composedPath():void 0;return Be.containerGroups.findIndex(function(Mi){var Bi=Mi.container,er=Mi.tabbableNodes;return Bi.contains(ui)||(Ri==null?void 0:Ri.includes(Bi))||er.find(function(nr){return nr===ui})})},Qe=function(ui){var li=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ri=li.hasFallback,Mi=Ri===void 0?!1:Ri,Bi=li.params,er=Bi===void 0?[]:Bi,nr=ke[ui];if(typeof nr=="function"&&(nr=nr.apply(void 0,Wo(er))),nr===!0&&(nr=void 0),!nr){if(nr===void 0||nr===!1)return nr;throw new Error("`".concat(ui,"` was specified but was not a node, or did not return a node"))}var lr=nr;if(typeof nr=="string"){try{lr=t.querySelector(nr)}catch(hr){throw new Error("`".concat(ui,'` appears to be an invalid selector; error="').concat(hr.message,'"'))}if(!lr&&!Mi)throw new Error("`".concat(ui,"` as selector refers to no known node"))}return lr},Cn=function(){var ui=Qe("initialFocus",{hasFallback:!0});if(ui===!1)return!1;if(ui===void 0||ui&&!Ge(ui,ke.tabbableOptions))if(We(t.activeElement)>=0)ui=t.activeElement;else{var li=Be.tabbableGroups[0],Ri=li&&li.firstTabbableNode;ui=Ri||Qe("fallbackFocus")}else ui===null&&(ui=Qe("fallbackFocus"));if(!ui)throw new Error("Your focus-trap needs to have at least one focusable element");return ui},An=function(){if(Be.containerGroups=Be.containers.map(function(ui){var li=jo(ui,ke.tabbableOptions),Ri=Oo(ui,ke.tabbableOptions),Mi=li.length>0?li[0]:void 0,Bi=li.length>0?li[li.length-1]:void 0,er=Ri.find(function(hr){return _e(hr)}),nr=Ri.slice().reverse().find(function(hr){return _e(hr)}),lr=!!li.find(function(hr){return $e(hr)>0});return{container:ui,tabbableNodes:li,focusableNodes:Ri,posTabIndexesFound:lr,firstTabbableNode:Mi,lastTabbableNode:Bi,firstDomTabbableNode:er,lastDomTabbableNode:nr,nextTabbableNode:function(hr){var ar=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,wr=li.indexOf(hr);return wr<0?ar?Ri.slice(Ri.indexOf(hr)+1).find(function(Fi){return _e(Fi)}):Ri.slice(0,Ri.indexOf(hr)).reverse().find(function(Fi){return _e(Fi)}):li[wr+(ar?1:-1)]}}}),Be.tabbableGroups=Be.containerGroups.filter(function(ui){return ui.tabbableNodes.length>0}),Be.tabbableGroups.length<=0&&!Qe("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Be.containerGroups.find(function(ui){return ui.posTabIndexesFound})&&Be.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},En=function(ui){var li=ui.activeElement;if(li)return li.shadowRoot&&li.shadowRoot.activeElement!==null?En(li.shadowRoot):li},Sn=function(ui){if(ui!==!1&&ui!==En(document)){if(!ui||!ui.focus){Sn(Cn());return}ui.focus({preventScroll:!!ke.preventScroll}),Be.mostRecentlyFocusedNode=ui,Yo(ui)&&ui.select()}},Tn=function(ui){var li=Qe("setReturnFocus",{params:[ui]});return li||(li===!1?!1:ui)},Dn=function(ui){var li=ui.target,Ri=ui.event,Mi=ui.isBackward,Bi=Mi===void 0?!1:Mi;li=li||Le$1(Ri),An();var er=null;if(Be.tabbableGroups.length>0){var nr=We(li,Ri),lr=nr>=0?Be.containerGroups[nr]:void 0;if(nr<0)Bi?er=Be.tabbableGroups[Be.tabbableGroups.length-1].lastTabbableNode:er=Be.tabbableGroups[0].firstTabbableNode;else if(Bi){var hr=Be.tabbableGroups.findIndex(function(gr){var vr=gr.firstTabbableNode;return li===vr});if(hr<0&&(lr.container===li||Ge(li,ke.tabbableOptions)&&!_e(li,ke.tabbableOptions)&&!lr.nextTabbableNode(li,!1))&&(hr=nr),hr>=0){var ar=hr===0?Be.tabbableGroups.length-1:hr-1,wr=Be.tabbableGroups[ar];er=$e(li)>=0?wr.lastTabbableNode:wr.lastDomTabbableNode}else Se(Ri)||(er=lr.nextTabbableNode(li,!1))}else{var Fi=Be.tabbableGroups.findIndex(function(gr){var vr=gr.lastTabbableNode;return li===vr});if(Fi<0&&(lr.container===li||Ge(li,ke.tabbableOptions)&&!_e(li,ke.tabbableOptions)&&!lr.nextTabbableNode(li))&&(Fi=nr),Fi>=0){var cr=Fi===Be.tabbableGroups.length-1?0:Fi+1,rr=Be.tabbableGroups[cr];er=$e(li)>=0?rr.firstTabbableNode:rr.firstDomTabbableNode}else Se(Ri)||(er=lr.nextTabbableNode(li))}}else er=Qe("fallbackFocus");return er},ti=function(ui){var li=Le$1(ui);if(!(We(li,ui)>=0)){if(Te(ke.clickOutsideDeactivates,ui)){Ue.deactivate({returnFocus:ke.returnFocusOnDeactivate});return}Te(ke.allowOutsideClick,ui)||ui.preventDefault()}},ni=function(ui){var li=Le$1(ui),Ri=We(li,ui)>=0;if(Ri||li instanceof Document)Ri&&(Be.mostRecentlyFocusedNode=li);else{ui.stopImmediatePropagation();var Mi,Bi=!0;if(Be.mostRecentlyFocusedNode)if($e(Be.mostRecentlyFocusedNode)>0){var er=We(Be.mostRecentlyFocusedNode),nr=Be.containerGroups[er].tabbableNodes;if(nr.length>0){var lr=nr.findIndex(function(hr){return hr===Be.mostRecentlyFocusedNode});lr>=0&&(ke.isKeyForward(Be.recentNavEvent)?lr+1<nr.length&&(Mi=nr[lr+1],Bi=!1):lr-1>=0&&(Mi=nr[lr-1],Bi=!1))}}else Be.containerGroups.some(function(hr){return hr.tabbableNodes.some(function(ar){return $e(ar)>0})})||(Bi=!1);else Bi=!1;Bi&&(Mi=Dn({target:Be.mostRecentlyFocusedNode,isBackward:ke.isKeyBackward(Be.recentNavEvent)})),Sn(Mi||Be.mostRecentlyFocusedNode||Cn())}Be.recentNavEvent=void 0},ii=function(ui){var li=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Be.recentNavEvent=ui;var Ri=Dn({event:ui,isBackward:li});Ri&&(Se(ui)&&ui.preventDefault(),Sn(Ri))},si=function(ui){(ke.isKeyForward(ui)||ke.isKeyBackward(ui))&&ii(ui,ke.isKeyBackward(ui))},oi=function(ui){Zo(ui)&&Te(ke.escapeDeactivates,ui)!==!1&&(ui.preventDefault(),Ue.deactivate())},ci=function(ui){var li=Le$1(ui);We(li,ui)>=0||Te(ke.clickOutsideDeactivates,ui)||Te(ke.allowOutsideClick,ui)||(ui.preventDefault(),ui.stopImmediatePropagation())},Pi=function(){if(Be.active)return vt$1.activateTrap(Oe,Ue),Be.delayInitialFocusTimer=ke.delayInitialFocus?mt$1(function(){Sn(Cn())}):Sn(Cn()),t.addEventListener("focusin",ni,!0),t.addEventListener("mousedown",ti,{capture:!0,passive:!1}),t.addEventListener("touchstart",ti,{capture:!0,passive:!1}),t.addEventListener("click",ci,{capture:!0,passive:!1}),t.addEventListener("keydown",si,{capture:!0,passive:!1}),t.addEventListener("keydown",oi),Ue},Ai=function(){if(Be.active)return t.removeEventListener("focusin",ni,!0),t.removeEventListener("mousedown",ti,!0),t.removeEventListener("touchstart",ti,!0),t.removeEventListener("click",ci,!0),t.removeEventListener("keydown",si,!0),t.removeEventListener("keydown",oi),Ue},fi=function(ui){var li=ui.some(function(Ri){var Mi=Array.from(Ri.removedNodes);return Mi.some(function(Bi){return Bi===Be.mostRecentlyFocusedNode})});li&&Sn(Cn())},Oi=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(fi):void 0,Ni=function(){Oi&&(Oi.disconnect(),Be.active&&!Be.paused&&Be.containers.map(function(ui){Oi.observe(ui,{subtree:!0,childList:!0})}))};return Ue={get active(){return Be.active},get paused(){return Be.paused},activate:function(ui){if(Be.active)return this;var li=je(ui,"onActivate"),Ri=je(ui,"onPostActivate"),Mi=je(ui,"checkCanFocusTrap");Mi||An(),Be.active=!0,Be.paused=!1,Be.nodeFocusedBeforeActivation=t.activeElement,li==null||li();var Bi=function(){Mi&&An(),Pi(),Ni(),Ri==null||Ri()};return Mi?(Mi(Be.containers.concat()).then(Bi,Bi),this):(Bi(),this)},deactivate:function(ui){if(!Be.active)return this;var li=pt$1({onDeactivate:ke.onDeactivate,onPostDeactivate:ke.onPostDeactivate,checkCanReturnFocus:ke.checkCanReturnFocus},ui);clearTimeout(Be.delayInitialFocusTimer),Be.delayInitialFocusTimer=void 0,Ai(),Be.active=!1,Be.paused=!1,Ni(),vt$1.deactivateTrap(Oe,Ue);var Ri=je(li,"onDeactivate"),Mi=je(li,"onPostDeactivate"),Bi=je(li,"checkCanReturnFocus"),er=je(li,"returnFocus","returnFocusOnDeactivate");Ri==null||Ri();var nr=function(){mt$1(function(){er&&Sn(Tn(Be.nodeFocusedBeforeActivation)),Mi==null||Mi()})};return er&&Bi?(Bi(Tn(Be.nodeFocusedBeforeActivation)).then(nr,nr),this):(nr(),this)},pause:function(ui){if(Be.paused||!Be.active)return this;var li=je(ui,"onPause"),Ri=je(ui,"onPostPause");return Be.paused=!0,li==null||li(),Ai(),Ni(),Ri==null||Ri(),this},unpause:function(ui){if(!Be.paused||!Be.active)return this;var li=je(ui,"onUnpause"),Ri=je(ui,"onPostUnpause");return Be.paused=!1,li==null||li(),An(),Pi(),Ni(),Ri==null||Ri(),this},updateContainerElements:function(ui){var li=[].concat(ui).filter(Boolean);return Be.containers=li.map(function(Ri){return typeof Ri=="string"?t.querySelector(Ri):Ri}),Be.active&&An(),Ni(),this}},Ue.updateContainerElements(Ae),Ue};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const al={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},sl=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},al),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(Ae,{slots:e,emit:t}){let Oe;const ke=ref(null),Be=computed(()=>{const je=ke.value;return je&&(je instanceof HTMLElement?je:je.$el)});function Ue(){return Oe||(Oe=tl(Be.value,{escapeDeactivates:Ae.escapeDeactivates,allowOutsideClick:Ae.allowOutsideClick,returnFocusOnDeactivate:Ae.returnFocusOnDeactivate,clickOutsideDeactivates:Ae.clickOutsideDeactivates,onActivate:()=>{t("update:active",!0),t("activate")},onDeactivate:()=>{t("update:active",!1),t("deactivate")},onPostActivate:()=>t("postActivate"),onPostDeactivate:()=>t("postDeactivate"),initialFocus:Ae.initialFocus,fallbackFocus:Ae.fallbackFocus,tabbableOptions:Ae.tabbableOptions,delayInitialFocus:Ae.delayInitialFocus,preventScroll:Ae.preventScroll}))}return onMounted(()=>{watch(()=>Ae.active,je=>{je&&Be.value?Ue().activate():Oe&&(Oe.deactivate(),(!Be.value||Be.value.nodeType===Node.COMMENT_NODE)&&(Oe=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{Oe&&Oe.deactivate(),Oe=null}),{activate(){Ue().activate()},deactivate(){Oe&&Oe.deactivate()},renderImpl(){if(!e.default)return null;const je=e.default().filter(We=>We.type!==Comment);return!je||!je.length||je.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),je):cloneVNode(je[0],{ref:ke})}}}}),rl=["aria-labelledby","role","open"],nl={class:"fr-container fr-container--fluid fr-container-md"},ol$1={class:"fr-grid-row fr-grid-row--center"},ll={class:"fr-modal__body"},il={class:"fr-modal__header"},dl=["title"],ul={class:"fr-modal__content"},cl=["id"],fl$1={key:0,class:"fr-modal__footer"},gt$2=2,pl=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>Z$2("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=Tn=>{Tn.key==="Escape"&&An()},Be=computed(()=>t.isAlert?"alertdialog":"dialog"),Ue=ref(null),je=ref();watch(()=>t.opened,Tn=>{var Dn,ti;Tn?((Dn=je.value)==null||Dn.showModal(),setTimeout(()=>{var ni;(ni=Ue.value)==null||ni.focus()},100)):(ti=je.value)==null||ti.close(),We(Tn)});function We(Tn){typeof window<"u"&&document.body.classList.toggle("modal-open",Tn)}onMounted(()=>{Qe(),We(t.opened)}),onBeforeUnmount(()=>{Cn(),We(!1)});function Qe(){document.addEventListener("keydown",ke)}function Cn(){document.removeEventListener("keydown",ke)}async function An(){var Tn;await nextTick(),(Tn=t.origin)==null||Tn.focus(),Oe("close")}const En=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),Sn=computed(()=>En.value?void 0:typeof t.icon=="string"?{name:t.icon,scale:gt$2}:{scale:gt$2,...t.icon??{}});return(Tn,Dn)=>Tn.opened?(openBlock(),createBlock(unref(sl),{key:0},{default:withCtx(()=>{var ti,ni;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:je,"aria-modal":"true","aria-labelledby":Tn.modalId,role:Be.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":Tn.opened}]),open:Tn.opened},[createBaseVNode("div",nl,[createBaseVNode("div",ol$1,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":Tn.size==="lg","fr-col-md-6":Tn.size==="md","fr-col-md-4":Tn.size==="sm"}])},[createBaseVNode("div",ll,[createBaseVNode("div",il,[createBaseVNode("button",{ref_key:"closeBtn",ref:Ue,class:"fr-btn fr-btn--close",title:Tn.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:Dn[0]||(Dn[0]=ii=>An())},[createBaseVNode("span",null,toDisplayString(Tn.closeButtonLabel),1)],8,dl)]),createBaseVNode("div",ul,[createBaseVNode("h1",{id:Tn.modalId,class:"fr-modal__title"},[En.value||Sn.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(Tn.icon)]:En.value})},[Tn.icon&&Sn.value?(openBlock(),createBlock(le$1,normalizeProps(mergeProps({key:0},Sn.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Tn.title),1)],8,cl),renderSlot(Tn.$slots,"default",{},void 0,!0)]),(ti=Tn.actions)!=null&&ti.length||Tn.$slots.footer?(openBlock(),createElementBlock("div",fl$1,[renderSlot(Tn.$slots,"footer",{},void 0,!0),(ni=Tn.actions)!=null&&ni.length?(openBlock(),createBlock(Ke,{key:0,align:"right",buttons:Tn.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,rl)]}),_:3})):createCommentVNode("",!0)}}),Vt$1=ie$1(pl,[["__scopeId","data-v-70fe954b"]]),Cl=["id","aria-current"],El=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>Z$2("nav","item")},active:{type:Boolean}},setup(Ae){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,Cl))}}),jt$1=ie$1(El,[["__scopeId","data-v-aa4076c4"]]),Sl=["href"],bt$1=2,ze=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>Z$2("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(Ae){const e=Ae,t=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),ke=computed(()=>Oe.value||!e.icon?void 0:typeof e.icon=="string"?{scale:bt$1,name:e.icon}:{scale:bt$1,...e.icon||{}}),Be=hasInjectionContext()?inject(rt$1):void 0,Ue=(Be==null?void 0:Be())??(()=>{});return(je,We)=>{const Qe=resolveComponent("RouterLink");return t.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:je.to,onClick:We[0]||(We[0]=Cn=>{je.$emit("toggleId",je.id),je.onClick(Cn)})},toDisplayString(je.text),9,Sl)):(openBlock(),createBlock(Qe,{key:1,class:normalizeClass(["fr-nav__link",{[String(je.icon)]:Oe.value}]),"data-testid":"nav-router-link",to:je.to,onClick:We[1]||(We[1]=Cn=>{var An;unref(Ue)(),je.$emit("toggleId",je.id),(An=je.onClick)==null||An.call(je,Cn)})},{default:withCtx(()=>[je.icon&&ke.value?(openBlock(),createBlock(le$1,normalizeProps(mergeProps({key:0},ke.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(je.text),1)]),_:1},8,["to","class"]))}}}),Al={class:"fr-col-12 fr-col-lg-3"},Bl={class:"fr-mega-menu__category"},Ll={class:"fr-mega-menu__list"},Ot$1=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(Ae){return(e,t)=>(openBlock(),createElementBlock("div",Al,[createBaseVNode("h5",Bl,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Ll,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(Oe,ke)=>(openBlock(),createElementBlock("li",{key:ke,class:"fr-nav__link"},[createVNode(ze,mergeProps({ref_for:!0},Oe),null,16)]))),128))])]))}}),Pl=["aria-expanded","aria-current","aria-controls"],Ml=["id"],Nl={class:"fr-container fr-container--fluid fr-container-lg"},Fl={class:"fr-grid-row fr-grid-row-lg--gutters"},Rl={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Vl={class:"fr-mega-menu__leader"},jl={class:"fr-h4 fr-mb-2v"},Ol={class:"fr-hidden fr-displayed-lg"},Hl=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>Z$2("mega-menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Ae){const e=Ae,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=he$1(),je=computed(()=>e.id===e.expandedId);return watch(je,(We,Qe)=>{We!==Qe&&Be(We)}),onMounted(()=>{je.value&&Be(!0)}),(We,Qe)=>{const Cn=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":je.value,"aria-current":We.active||void 0,"aria-controls":We.id,onClick:Qe[0]||(Qe[0]=An=>We.$emit("toggleId",We.id))},toDisplayString(We.title),9,Pl),createBaseVNode("div",{id:We.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),tabindex:"-1",onTransitionend:Qe[2]||(Qe[2]=An=>unref(Ue)(je.value))},[createBaseVNode("div",Nl,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:Qe[1]||(Qe[1]=An=>We.$emit("toggleId",We.id))}," Fermer "),createBaseVNode("div",Fl,[createBaseVNode("div",Rl,[createBaseVNode("div",Vl,[createBaseVNode("h4",jl,toDisplayString(We.title),1),createBaseVNode("p",Ol,[createTextVNode(toDisplayString(We.description)+" ",1),renderSlot(We.$slots,"description",{},void 0,!0)]),createVNode(Cn,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:We.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(We.link.text),1)]),_:1},8,["to"])])]),renderSlot(We.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.menus,(An,En)=>(openBlock(),createBlock(Ot$1,mergeProps({key:En,ref_for:!0},An),null,16))),128))])])],42,Ml)],64)}}}),Ht$1=ie$1(Hl,[["__scopeId","data-v-1e103394"]]),Kl=["id","aria-current"],Kt$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>Z$2("menu","item")},active:{type:Boolean}},setup(Ae){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,Kl))}}),ql=["aria-expanded","aria-current","aria-controls"],zl=["id"],Ql={class:"fr-menu__list"},qt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>Z$2("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Ae){const e=Ae,{collapse:t,collapsing:Oe,cssExpanded:ke,doExpand:Be,onTransitionEnd:Ue}=he$1(),je=computed(()=>e.id===e.expandedId);return watch(je,(We,Qe)=>{We!==Qe&&Be(We)}),onMounted(()=>{je.value&&Be(!0)}),(We,Qe)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":je.value,"aria-current":We.active||void 0,"aria-controls":We.id,onClick:Qe[0]||(Qe[0]=Cn=>We.$emit("toggleId",We.id))},[createBaseVNode("span",null,toDisplayString(We.title),1)],8,ql),createBaseVNode("div",{id:We.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(ke),"fr-collapsing":unref(Oe)}]),"data-testid":"navigation-menu",onTransitionend:Qe[2]||(Qe[2]=Cn=>unref(Ue)(je.value))},[createBaseVNode("ul",Ql,[renderSlot(We.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.links,(Cn,An)=>(openBlock(),createBlock(Kt$1,{key:An},{default:withCtx(()=>[createVNode(ze,mergeProps({ref_for:!0},Cn,{onToggleId:Qe[1]||(Qe[1]=En=>We.$emit("toggleId",We.expandedId))}),null,16)]),_:2},1024))),128))])],42,zl)],64))}}),Wl=["id","aria-label"],Gl={class:"fr-nav__list"},Xl=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>Z$2("nav")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(Ae){const e=Ae,t=ref(void 0),Oe=je=>{if(je===t.value){t.value=void 0;return}t.value=je},ke=je=>{if(je!==document.getElementById(e.id)){if(!(je!=null&&je.parentNode)){Oe(t.value);return}ke(je.parentNode)}},Be=je=>{ke(je.target)},Ue=je=>{je.key==="Escape"&&Oe(t.value)};return onMounted(()=>{document.addEventListener("click",Be),document.addEventListener("keydown",Ue)}),onUnmounted(()=>{document.removeEventListener("click",Be),document.removeEventListener("keydown",Ue)}),(je,We)=>(openBlock(),createElementBlock("nav",{id:je.id,class:"fr-nav",role:"navigation","aria-label":je.label},[createBaseVNode("ul",Gl,[renderSlot(je.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(je.navItems,(Qe,Cn)=>(openBlock(),createBlock(jt$1,{id:Qe.id,key:Cn},{default:withCtx(()=>[Qe.to&&Qe.text?(openBlock(),createBlock(ze,mergeProps({key:0,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:We[0]||(We[0]=An=>Oe(An))}),null,16,["expanded-id"])):Qe.title&&Qe.links?(openBlock(),createBlock(qt$1,mergeProps({key:1,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:We[1]||(We[1]=An=>Oe(An))}),null,16,["expanded-id"])):Qe.title&&Qe.menus?(openBlock(),createBlock(Ht$1,mergeProps({key:2,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:We[2]||(We[2]=An=>Oe(An))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1032,["id"]))),128))])],8,Wl))}}),pi=["id","name","value","checked","disabled"],vi=["for"],mi={key:0,class:"required"},gi={key:0,class:"fr-hint-text"},bi={key:0,class:"fr-radio-rich__pictogram"},hi=["src","title"],yi={key:0},ki=["href"],$i=["href"],wi=["href"],zt$1=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>Z$2("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},imgTitle:{},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(Ae){const e=Ae,t={viewBox:"0 0 80 80",width:"80px",height:"80px"},Oe=computed(()=>!!e.img||!!e.svgPath);return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":ke.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":Oe.value,"fr-radio-group--sm":ke.small}])},[createBaseVNode("input",mergeProps({id:ke.id,type:"radio",name:ke.name,value:ke.value,checked:ke.modelValue===ke.value,disabled:ke.disabled},ke.$attrs,{onClick:Be[0]||(Be[0]=Ue=>ke.$emit("update:modelValue",ke.value))}),null,16,pi),createBaseVNode("label",{for:ke.id,class:"fr-label"},[renderSlot(ke.$slots,"label",{},()=>[createTextVNode(toDisplayString(ke.label)+" ",1),renderSlot(ke.$slots,"required-tip",{},()=>[ke.$attrs.required?(openBlock(),createElementBlock("span",mi," *")):createCommentVNode("",!0)])]),ke.hint?(openBlock(),createElementBlock("span",gi,toDisplayString(ke.hint),1)):createCommentVNode("",!0)],8,vi),ke.img||ke.svgPath?(openBlock(),createElementBlock("div",bi,[ke.img?(openBlock(),createElementBlock("img",{key:0,src:ke.img,class:"fr-artwork",alt:"",title:ke.imgTitle},null,8,hi)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...t,...ke.svgAttrs}),[ke.imgTitle?(openBlock(),createElementBlock("title",yi,toDisplayString(ke.imgTitle),1)):createCommentVNode("",!0),createBaseVNode("use",{class:"fr-artwork-decorative",href:`${ke.svgPath}#artwork-decorative`},null,8,ki),createBaseVNode("use",{class:"fr-artwork-minor",href:`${ke.svgPath}#artwork-minor`},null,8,$i),createBaseVNode("use",{class:"fr-artwork-major",href:`${ke.svgPath}#artwork-major`},null,8,wi)],16))])):createCommentVNode("",!0)],2)],2))}}),_i={class:"fr-form-group"},Di=["disabled","aria-labelledby","aria-invalid","role"],Ii=["id"],Ti={key:0,class:"fr-hint-text"},Ci={key:0,class:"required"},Ei=["id"],Si=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>Z$2("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=computed(()=>t.errorMessage||t.validMessage),Be=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),Ue=We=>{We!==t.modelValue&&Oe("update:modelValue",We)},je=computed(()=>ke.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(We,Qe)=>(openBlock(),createElementBlock("div",_i,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":We.errorMessage,"fr-fieldset--valid":We.validMessage}]),disabled:We.disabled,"aria-labelledby":je.value,"aria-invalid":We.ariaInvalid,role:We.errorMessage||We.validMessage?"group":void 0},[We.legend||We.$slots.legend||We.hint||We.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:We.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(We.$slots,"legend",{},()=>[createTextVNode(toDisplayString(We.legend)+" ",1),We.hint||We.$slots.hint?(openBlock(),createElementBlock("span",Ti,[renderSlot(We.$slots,"hint",{},()=>[createTextVNode(toDisplayString(We.hint),1)])])):createCommentVNode("",!0),renderSlot(We.$slots,"required-tip",{},()=>[We.required?(openBlock(),createElementBlock("span",Ci," *")):createCommentVNode("",!0)])])],8,Ii)):createCommentVNode("",!0),renderSlot(We.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(We.options,(Cn,An)=>(openBlock(),createBlock(zt$1,mergeProps({key:typeof Cn.value=="boolean"?An:Cn.value||An,name:We.name,"aria-disabled":Cn.disabled,ref_for:!0},Cn,{small:We.small,inline:We.inline,"model-value":We.modelValue,"onUpdate:modelValue":Qe[0]||(Qe[0]=En=>Ue(En))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),ke.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${We.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message fr-message--info flex items-center",Be.value])},toDisplayString(ke.value),3)],8,Ei)):createCommentVNode("",!0)],10,Di)]))}}),Hi={class:"fr-segmented__element"},Ki=["id","name","value","checked","disabled","aria-disabled"],qi=["for"],zi={key:1},Qt$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>Z$2("segmented")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(Ae){const e=Ae,t=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),Oe=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(ke,Be)=>(openBlock(),createElementBlock("div",Hi,[createBaseVNode("input",mergeProps({id:ke.id,type:"radio",name:ke.name,value:ke.value,checked:ke.modelValue===ke.value,disabled:ke.disabled,"aria-disabled":ke.disabled},ke.$attrs,{onClick:Be[0]||(Be[0]=Ue=>ke.$emit("update:modelValue",ke.value))}),null,16,Ki),createBaseVNode("label",{for:ke.id,class:normalizeClass(["fr-label",{[Oe.value]:Oe.value}])},[ke.icon&&!Oe.value?(openBlock(),createBlock(le$1,normalizeProps(mergeProps({key:0},t.value)),null,16)):createCommentVNode("",!0),ke.icon?(openBlock(),createElementBlock("span",zi," ")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(ke.label),1)],10,qi)]))}}),Qi={class:"fr-form-group"},Wi=["disabled"],Gi=["id"],Xi={key:0,class:"fr-hint-text"},Ui={class:"fr-segmented__elements"},Yi=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>Z$2("segmented-button","set")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:()=>Z$2("segmented-button","set")},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=Be=>{Be!==t.modelValue&&Oe("update:modelValue",Be)};return(Be,Ue)=>(openBlock(),createElementBlock("div",Qi,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Be.small,"fr-segmented--no-legend":!Be.legend}]),disabled:Be.disabled},[Be.legend?(openBlock(),createElementBlock("legend",{key:0,id:Be.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Be.inline}])},[renderSlot(Be.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Be.legend),1)]),Be.hint?(openBlock(),createElementBlock("span",Xi,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],10,Gi)):createCommentVNode("",!0),createBaseVNode("div",Ui,[renderSlot(Be.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.options,(je,We)=>(openBlock(),createBlock(Qt$1,mergeProps({key:je.value||We,name:Be.name||je.name,ref_for:!0},{...je,disabled:Be.disabled||je.disabled},{"model-value":Be.modelValue,"onUpdate:modelValue":Ue[0]||(Ue[0]=Qe=>ke(Qe))}),null,16,["name","model-value"]))),128))])])],10,Wi)]))}}),Zi=["for"],Ji={key:0,class:"required"},xi={key:0,class:"fr-hint-text"},ed=["id","name","disabled","aria-disabled","required"],td$1=["selected"],ad=["selected","value","disabled","aria-disabled"],sd=["id"],rd=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>Z$2("select")},name:{default:void 0},description:{default:void 0},hint:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Sélectionner une option"}},emits:["update:modelValue"],setup(Ae){const e=Ae;e.description&&console.warn("[DsfrSelect] : La prop `description` est dépréciée. Veuillez utiliser `hint` à la place.");const t=computed(()=>e.errorMessage||e.successMessage),Oe=computed(()=>e.errorMessage?"error":"valid");return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${Oe.value}`]:t.value}])},[createBaseVNode("label",{class:"fr-label",for:ke.selectId},[renderSlot(ke.$slots,"label",{},()=>[createTextVNode(toDisplayString(ke.label)+" ",1),renderSlot(ke.$slots,"required-tip",{},()=>[ke.required?(openBlock(),createElementBlock("span",Ji," *")):createCommentVNode("",!0)])]),ke.hint??ke.description?(openBlock(),createElementBlock("span",xi,toDisplayString(ke.hint??ke.description),1)):createCommentVNode("",!0)],8,Zi),createBaseVNode("select",mergeProps({id:ke.selectId,class:[{[`fr-select--${Oe.value}`]:t.value},"fr-select"],name:ke.name||ke.selectId,disabled:ke.disabled,"aria-disabled":ke.disabled,required:ke.required},ke.$attrs,{onChange:Be[0]||(Be[0]=Ue=>{var je;return ke.$emit("update:modelValue",(je=Ue.target)==null?void 0:je.value)})}),[createBaseVNode("option",{selected:!ke.options.some(Ue=>typeof Ue!="object"||Ue===null?Ue===ke.modelValue:Ue.value===ke.modelValue),disabled:"",hidden:""},toDisplayString(ke.defaultUnselectedText),9,td$1),(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.options,(Ue,je)=>(openBlock(),createElementBlock("option",{key:je,selected:ke.modelValue===Ue||typeof Ue=="object"&&Ue.value===ke.modelValue,value:typeof Ue=="object"?Ue.value:Ue,disabled:!!(typeof Ue=="object"&&Ue.disabled),"aria-disabled":!!(typeof Ue=="object"&&Ue.disabled)},toDisplayString(typeof Ue=="object"?Ue.text:Ue),9,ad))),128))],16,ed),t.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${Oe.value}-desc-${Oe.value}`,class:normalizeClass(`fr-${Oe.value}-text`)},toDisplayString(t.value),11,sd)):createCommentVNode("",!0)],2))}}),nd={class:"fr-share"},od={class:"fr-share__title"},ld={class:"fr-btns-group"},id=["title","href","onClick"],dd={key:0},ud=["href","title"],cd=["title"],fd$1=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(Ae){const e=()=>{const Oe=window.location.href;navigator.clipboard.writeText(Oe)},t=({url:Oe,label:ke})=>{window.open(Oe,ke,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(Oe,ke)=>{var Be;return openBlock(),createElementBlock("div",nd,[createBaseVNode("p",od,toDisplayString(Oe.title),1),createBaseVNode("ul",ld,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.networks,(Ue,je)=>(openBlock(),createElementBlock("li",{key:je},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${Ue.name}`),title:`${Ue.label} - nouvelle fenêtre`,href:Ue.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(We=>t(Ue),["prevent"])},toDisplayString(Ue.label),11,id)]))),128)),(Be=Oe.mail)!=null&&Be.to?(openBlock(),createElementBlock("li",dd,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:Oe.mail.to,title:Oe.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(Oe.mail.label),9,ud)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:Oe.copyLabel,onClick:ke[0]||(ke[0]=Ue=>e())},toDisplayString(Oe.copyLabel),9,cd)])])])}}}),jd=["id","aria-labelledby","tabindex"],Od=defineComponent({__name:"DsfrTabContent",props:{panelId:{},tabId:{}},setup(Ae){useCssVars(We=>({"7152af7e":Ue.value,"2a62e962":je.value}));const e=Ae,t={true:"100%",false:"-100%"},Oe=inject(He),{isVisible:ke,asc:Be}=Oe(toRef(()=>e.tabId)),Ue=computed(()=>t[String(Be==null?void 0:Be.value)]),je=computed(()=>t[String(!(Be!=null&&Be.value))]);return(We,Qe)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:We.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":unref(ke)}]),role:"tabpanel","aria-labelledby":We.tabId,tabindex:unref(ke)?0:-1},[renderSlot(We.$slots,"default",{},void 0,!0)],10,jd),[[vShow,unref(ke)]])]),_:3}))}}),Ut$1=ie$1(Od,[["__scopeId","data-v-5774b16c"]]),Hd={role:"presentation"},Kd=["id","data-testid","tabindex","aria-selected","aria-controls"],qd={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Yt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(Ae,{emit:e}){const t=Ae,Oe=e,ke=ref(null),Be={ArrowRight:"next",ArrowLeft:"previous",ArrowDown:"next",ArrowUp:"previous",Home:"first",End:"last"};function Ue(Qe){const Cn=Qe==null?void 0:Qe.key,An=Be[Cn];An&&Oe(An)}const je=inject(He),{isVisible:We}=je(toRef(()=>t.tabId));return(Qe,Cn)=>(openBlock(),createElementBlock("li",Hd,[createBaseVNode("button",{id:Qe.tabId,ref_key:"button",ref:ke,"data-testid":`test-${Qe.tabId}`,class:"fr-tabs__tab",tabindex:unref(We)?0:-1,role:"tab",type:"button","aria-selected":unref(We),"aria-controls":Qe.panelId,onClick:Cn[0]||(Cn[0]=withModifiers(An=>Qe.$emit("click",Qe.tabId),["prevent"])),onKeydown:Cn[1]||(Cn[1]=An=>Ue(An))},[Qe.icon?(openBlock(),createElementBlock("span",qd,[createVNode(le$1,{name:Qe.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(Qe.$slots,"default")],40,Kd)]))}}),ru=["aria-label"],nu=defineComponent({__name:"DsfrTabs",props:{modelValue:{default:0},tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]}},emits:["update:modelValue"],setup(Ae,{expose:e,emit:t}){const Oe=Ae,ke=t,Be=ref(!1),Ue=computed({get:()=>Oe.modelValue,set(oi){ke("update:modelValue",oi)}}),je=ref(new Map),We=ref(0);provide(He,oi=>{const ci=ref(!0);if(watch(Ue,(fi,Oi)=>{ci.value=fi>Oi}),[...je.value.values()].includes(oi.value))return{isVisible:computed(()=>je.value.get(Ue.value)===oi.value),asc:ci};const Pi=We.value++;je.value.set(Pi,oi.value);const Ai=computed(()=>Pi===Ue.value);return watch(oi,()=>{je.value.set(Pi,oi.value)}),onUnmounted(()=>{je.value.delete(Pi)}),{isVisible:Ai}});const Qe=ref(null),Cn=ref(null),An=reactive({}),En=oi=>{if(An[oi])return An[oi];const ci=Z$2("tab");return An[oi]=ci,ci},Sn=async()=>{const oi=Ue.value===0?Oe.tabTitles.length-1:Ue.value-1;Be.value=!1,Ue.value=oi},Tn=async()=>{const oi=Ue.value===Oe.tabTitles.length-1?0:Ue.value+1;Be.value=!0,Ue.value=oi},Dn=async()=>{Ue.value=0},ti=async()=>{Ue.value=Oe.tabTitles.length-1},ni=ref({"--tabs-height":"100px"}),ii=()=>{var oi;if(Ue.value<0||!Cn.value||!Cn.value.offsetHeight)return;const ci=Cn.value.offsetHeight,Pi=(oi=Qe.value)==null?void 0:oi.querySelectorAll(".fr-tabs__panel")[Ue.value];if(!Pi||!Pi.offsetHeight)return;const Ai=Pi.offsetHeight;ni.value["--tabs-height"]=`${ci+Ai}px`},si=ref(null);return onMounted(()=>{var oi;window.ResizeObserver&&(si.value=new window.ResizeObserver(()=>{ii()})),(oi=Qe.value)==null||oi.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var Pi;ci&&((Pi=si.value)==null||Pi.observe(ci))})}),onUnmounted(()=>{var oi;(oi=Qe.value)==null||oi.querySelectorAll(".fr-tabs__panel").forEach(ci=>{var Pi;ci&&((Pi=si.value)==null||Pi.unobserve(ci))})}),e({renderTabs:ii,selectFirst:Dn,selectLast:ti}),(oi,ci)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:Qe,class:"fr-tabs",style:normalizeStyle(ni.value)},[createBaseVNode("ul",{ref_key:"tablist",ref:Cn,class:"fr-tabs__list",role:"tablist","aria-label":oi.tabListName},[renderSlot(oi.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(oi.tabTitles,(Pi,Ai)=>(openBlock(),createBlock(Yt$1,{key:Ai,icon:Pi.icon,"panel-id":Pi.panelId||`${En(Ai)}-panel`,"tab-id":Pi.tabId||En(Ai),onClick:fi=>Ue.value=Ai,onNext:ci[0]||(ci[0]=fi=>Tn()),onPrevious:ci[1]||(ci[1]=fi=>Sn()),onFirst:ci[2]||(ci[2]=fi=>Dn()),onLast:ci[3]||(ci[3]=fi=>ti())},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi.title),1)]),_:2},1032,["icon","panel-id","tab-id","onClick"]))),128))])],8,ru),(openBlock(!0),createElementBlock(Fragment,null,renderList(oi.tabContents,(Pi,Ai)=>{var fi,Oi,Ni,ui;return openBlock(),createBlock(Ut$1,{key:Ai,"panel-id":((Oi=(fi=oi.tabTitles)==null?void 0:fi[Ai])==null?void 0:Oi.panelId)||`${En(Ai)}-panel`,"tab-id":((ui=(Ni=oi.tabTitles)==null?void 0:Ni[Ai])==null?void 0:ui.tabId)||En(Ai)},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi),1)]),_:2},1032,["panel-id","tab-id"])}),128)),renderSlot(oi.$slots,"default")],4))}}),Du=["id","disabled","aria-disabled","checked","data-testid","aria-describedby","name"],Iu=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Tu=["id"],Cu=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>Z$2("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activé"},inactiveText:{default:"Désactivé"},noText:{type:Boolean,default:!1},name:{default:void 0}},emits:["update:modelValue"],setup(Ae){const e=Ae,t=computed(()=>`${e.inputId}-hint-text`);return(Oe,ke)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":Oe.labelLeft,"fr-toggle--border-bottom":Oe.borderBottom}])},[createBaseVNode("input",{id:Oe.inputId,disabled:Oe.disabled,"aria-disabled":Oe.disabled,type:"checkbox",checked:Oe.modelValue,"data-testid":Oe.inputId,class:"fr-toggle__input","aria-describedby":t.value,name:Oe.name,onInput:ke[0]||(ke[0]=Be=>Oe.$emit("update:modelValue",Be.target.checked))},null,40,Du),createBaseVNode("label",{id:t.value,class:"fr-toggle__label",for:Oe.inputId,"data-fr-checked-label":Oe.noText?void 0:Oe.activeText,"data-fr-unchecked-label":Oe.noText?void 0:Oe.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(Oe.label),9,Iu),Oe.hint?(openBlock(),createElementBlock("p",{key:0,id:`${Oe.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(Oe.hint),9,Tu)):createCommentVNode("",!0)],2))}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(Ae){return typeof Ae=="object"||"displayName"in Ae||"props"in Ae||"__vccOpts"in Ae}function isESModule(Ae){return Ae.__esModule||Ae[Symbol.toStringTag]==="Module"||Ae.default&&isRouteComponent(Ae.default)}const assign=Object.assign;function applyToParams(Ae,e){const t={};for(const Oe in e){const ke=e[Oe];t[Oe]=isArray(ke)?ke.map(Ae):Ae(ke)}return t}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Ae){return encodeURI(""+Ae).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Ae){return commonEncode(Ae).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Ae){return commonEncode(Ae).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Ae){return encodeQueryValue(Ae).replace(EQUAL_RE,"%3D")}function encodePath(Ae){return commonEncode(Ae).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Ae){return Ae==null?"":encodePath(Ae).replace(SLASH_RE,"%2F")}function decode$2(Ae){try{return decodeURIComponent(""+Ae)}catch{}return""+Ae}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Ae=>Ae.replace(TRAILING_SLASH_RE,"");function parseURL(Ae,e,t="/"){let Oe,ke={},Be="",Ue="";const je=e.indexOf("#");let We=e.indexOf("?");return je<We&&je>=0&&(We=-1),We>-1&&(Oe=e.slice(0,We),Be=e.slice(We+1,je>-1?je:e.length),ke=Ae(Be)),je>-1&&(Oe=Oe||e.slice(0,je),Ue=e.slice(je,e.length)),Oe=resolveRelativePath(Oe??e,t),{fullPath:Oe+(Be&&"?")+Be+Ue,path:Oe,query:ke,hash:decode$2(Ue)}}function stringifyURL(Ae,e){const t=e.query?Ae(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(Ae,e){return!e||!Ae.toLowerCase().startsWith(e.toLowerCase())?Ae:Ae.slice(e.length)||"/"}function isSameRouteLocation(Ae,e,t){const Oe=e.matched.length-1,ke=t.matched.length-1;return Oe>-1&&Oe===ke&&isSameRouteRecord(e.matched[Oe],t.matched[ke])&&isSameRouteLocationParams(e.params,t.params)&&Ae(e.query)===Ae(t.query)&&e.hash===t.hash}function isSameRouteRecord(Ae,e){return(Ae.aliasOf||Ae)===(e.aliasOf||e)}function isSameRouteLocationParams(Ae,e){if(Object.keys(Ae).length!==Object.keys(e).length)return!1;for(const t in Ae)if(!isSameRouteLocationParamsValue(Ae[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(Ae,e){return isArray(Ae)?isEquivalentArray(Ae,e):isArray(e)?isEquivalentArray(e,Ae):Ae===e}function isEquivalentArray(Ae,e){return isArray(e)?Ae.length===e.length&&Ae.every((t,Oe)=>t===e[Oe]):Ae.length===1&&Ae[0]===e}function resolveRelativePath(Ae,e){if(Ae.startsWith("/"))return Ae;if(!Ae)return e;const t=e.split("/"),Oe=Ae.split("/"),ke=Oe[Oe.length-1];(ke===".."||ke===".")&&Oe.push("");let Be=t.length-1,Ue,je;for(Ue=0;Ue<Oe.length;Ue++)if(je=Oe[Ue],je!==".")if(je==="..")Be>1&&Be--;else break;return t.slice(0,Be).join("/")+"/"+Oe.slice(Ue).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(Ae){Ae.pop="pop",Ae.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Ae){Ae.back="back",Ae.forward="forward",Ae.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Ae){if(!Ae)if(isBrowser){const e=document.querySelector("base");Ae=e&&e.getAttribute("href")||"/",Ae=Ae.replace(/^\w+:\/\/[^\/]+/,"")}else Ae="/";return Ae[0]!=="/"&&Ae[0]!=="#"&&(Ae="/"+Ae),removeTrailingSlash(Ae)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Ae,e){return Ae.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(Ae,e){const t=document.documentElement.getBoundingClientRect(),Oe=Ae.getBoundingClientRect();return{behavior:e.behavior,left:Oe.left-t.left-(e.left||0),top:Oe.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(Ae){let e;if("el"in Ae){const t=Ae.el,Oe=typeof t=="string"&&t.startsWith("#"),ke=typeof t=="string"?Oe?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!ke)return;e=getElementPosition(ke,Ae)}else e=Ae;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(Ae,e){return(history.state?history.state.position-e:-1)+Ae}const scrollPositions=new Map;function saveScrollPosition(Ae,e){scrollPositions.set(Ae,e)}function getSavedScrollPosition(Ae){const e=scrollPositions.get(Ae);return scrollPositions.delete(Ae),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(Ae,e){const{pathname:t,search:Oe,hash:ke}=e,Be=Ae.indexOf("#");if(Be>-1){let je=ke.includes(Ae.slice(Be))?Ae.slice(Be).length:1,We=ke.slice(je);return We[0]!=="/"&&(We="/"+We),stripBase(We,"")}return stripBase(t,Ae)+Oe+ke}function useHistoryListeners(Ae,e,t,Oe){let ke=[],Be=[],Ue=null;const je=({state:En})=>{const Sn=createCurrentLocation(Ae,location),Tn=t.value,Dn=e.value;let ti=0;if(En){if(t.value=Sn,e.value=En,Ue&&Ue===Tn){Ue=null;return}ti=Dn?En.position-Dn.position:0}else Oe(Sn);ke.forEach(ni=>{ni(t.value,Tn,{delta:ti,type:NavigationType.pop,direction:ti?ti>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function We(){Ue=t.value}function Qe(En){ke.push(En);const Sn=()=>{const Tn=ke.indexOf(En);Tn>-1&&ke.splice(Tn,1)};return Be.push(Sn),Sn}function Cn(){const{history:En}=window;En.state&&En.replaceState(assign({},En.state,{scroll:computeScrollPosition()}),"")}function An(){for(const En of Be)En();Be=[],window.removeEventListener("popstate",je),window.removeEventListener("beforeunload",Cn)}return window.addEventListener("popstate",je),window.addEventListener("beforeunload",Cn,{passive:!0}),{pauseListeners:We,listen:Qe,destroy:An}}function buildState(Ae,e,t,Oe=!1,ke=!1){return{back:Ae,current:e,forward:t,replaced:Oe,position:window.history.length,scroll:ke?computeScrollPosition():null}}function useHistoryStateNavigation(Ae){const{history:e,location:t}=window,Oe={value:createCurrentLocation(Ae,t)},ke={value:e.state};ke.value||Be(Oe.value,{back:null,current:Oe.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Be(We,Qe,Cn){const An=Ae.indexOf("#"),En=An>-1?(t.host&&document.querySelector("base")?Ae:Ae.slice(An))+We:createBaseLocation()+Ae+We;try{e[Cn?"replaceState":"pushState"](Qe,"",En),ke.value=Qe}catch(Sn){console.error(Sn),t[Cn?"replace":"assign"](En)}}function Ue(We,Qe){const Cn=assign({},e.state,buildState(ke.value.back,We,ke.value.forward,!0),Qe,{position:ke.value.position});Be(We,Cn,!0),Oe.value=We}function je(We,Qe){const Cn=assign({},ke.value,e.state,{forward:We,scroll:computeScrollPosition()});Be(Cn.current,Cn,!0);const An=assign({},buildState(Oe.value,We,null),{position:Cn.position+1},Qe);Be(We,An,!1),Oe.value=We}return{location:Oe,state:ke,push:je,replace:Ue}}function createWebHistory(Ae){Ae=normalizeBase(Ae);const e=useHistoryStateNavigation(Ae),t=useHistoryListeners(Ae,e.state,e.location,e.replace);function Oe(Be,Ue=!0){Ue||t.pauseListeners(),history.go(Be)}const ke=assign({location:"",base:Ae,go:Oe,createHref:createHref.bind(null,Ae)},e,t);return Object.defineProperty(ke,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(ke,"state",{enumerable:!0,get:()=>e.state.value}),ke}function isRouteLocation(Ae){return typeof Ae=="string"||Ae&&typeof Ae=="object"}function isRouteName(Ae){return typeof Ae=="string"||typeof Ae=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Ae){Ae[Ae.aborted=4]="aborted",Ae[Ae.cancelled=8]="cancelled",Ae[Ae.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Ae,e){return assign(new Error,{type:Ae,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(Ae,e){return Ae instanceof Error&&NavigationFailureSymbol in Ae&&(e==null||!!(Ae.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Ae,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),Oe=[];let ke=t.start?"^":"";const Be=[];for(const Qe of Ae){const Cn=Qe.length?[]:[90];t.strict&&!Qe.length&&(ke+="/");for(let An=0;An<Qe.length;An++){const En=Qe[An];let Sn=40+(t.sensitive?.25:0);if(En.type===0)An||(ke+="/"),ke+=En.value.replace(REGEX_CHARS_RE,"\\$&"),Sn+=40;else if(En.type===1){const{value:Tn,repeatable:Dn,optional:ti,regexp:ni}=En;Be.push({name:Tn,repeatable:Dn,optional:ti});const ii=ni||BASE_PARAM_PATTERN;if(ii!==BASE_PARAM_PATTERN){Sn+=10;try{new RegExp(`(${ii})`)}catch(oi){throw new Error(`Invalid custom RegExp for param "${Tn}" (${ii}): `+oi.message)}}let si=Dn?`((?:${ii})(?:/(?:${ii}))*)`:`(${ii})`;An||(si=ti&&Qe.length<2?`(?:/${si})`:"/"+si),ti&&(si+="?"),ke+=si,Sn+=20,ti&&(Sn+=-8),Dn&&(Sn+=-20),ii===".*"&&(Sn+=-50)}Cn.push(Sn)}Oe.push(Cn)}if(t.strict&&t.end){const Qe=Oe.length-1;Oe[Qe][Oe[Qe].length-1]+=.7000000000000001}t.strict||(ke+="/?"),t.end?ke+="$":t.strict&&!ke.endsWith("/")&&(ke+="(?:/|$)");const Ue=new RegExp(ke,t.sensitive?"":"i");function je(Qe){const Cn=Qe.match(Ue),An={};if(!Cn)return null;for(let En=1;En<Cn.length;En++){const Sn=Cn[En]||"",Tn=Be[En-1];An[Tn.name]=Sn&&Tn.repeatable?Sn.split("/"):Sn}return An}function We(Qe){let Cn="",An=!1;for(const En of Ae){(!An||!Cn.endsWith("/"))&&(Cn+="/"),An=!1;for(const Sn of En)if(Sn.type===0)Cn+=Sn.value;else if(Sn.type===1){const{value:Tn,repeatable:Dn,optional:ti}=Sn,ni=Tn in Qe?Qe[Tn]:"";if(isArray(ni)&&!Dn)throw new Error(`Provided param "${Tn}" is an array but it is not repeatable (* or + modifiers)`);const ii=isArray(ni)?ni.join("/"):ni;if(!ii)if(ti)En.length<2&&(Cn.endsWith("/")?Cn=Cn.slice(0,-1):An=!0);else throw new Error(`Missing required param "${Tn}"`);Cn+=ii}}return Cn||"/"}return{re:Ue,score:Oe,keys:Be,parse:je,stringify:We}}function compareScoreArray(Ae,e){let t=0;for(;t<Ae.length&&t<e.length;){const Oe=e[t]-Ae[t];if(Oe)return Oe;t++}return Ae.length<e.length?Ae.length===1&&Ae[0]===80?-1:1:Ae.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(Ae,e){let t=0;const Oe=Ae.score,ke=e.score;for(;t<Oe.length&&t<ke.length;){const Be=compareScoreArray(Oe[t],ke[t]);if(Be)return Be;t++}if(Math.abs(ke.length-Oe.length)===1){if(isLastScoreNegative(Oe))return 1;if(isLastScoreNegative(ke))return-1}return ke.length-Oe.length}function isLastScoreNegative(Ae){const e=Ae[Ae.length-1];return Ae.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Ae){if(!Ae)return[[]];if(Ae==="/")return[[ROOT_TOKEN]];if(!Ae.startsWith("/"))throw new Error(`Invalid path "${Ae}"`);function e(Sn){throw new Error(`ERR (${t})/"${Qe}": ${Sn}`)}let t=0,Oe=t;const ke=[];let Be;function Ue(){Be&&ke.push(Be),Be=[]}let je=0,We,Qe="",Cn="";function An(){Qe&&(t===0?Be.push({type:0,value:Qe}):t===1||t===2||t===3?(Be.length>1&&(We==="*"||We==="+")&&e(`A repeatable param (${Qe}) must be alone in its segment. eg: '/:ids+.`),Be.push({type:1,value:Qe,regexp:Cn,repeatable:We==="*"||We==="+",optional:We==="*"||We==="?"})):e("Invalid state to consume buffer"),Qe="")}function En(){Qe+=We}for(;je<Ae.length;){if(We=Ae[je++],We==="\\"&&t!==2){Oe=t,t=4;continue}switch(t){case 0:We==="/"?(Qe&&An(),Ue()):We===":"?(An(),t=1):En();break;case 4:En(),t=Oe;break;case 1:We==="("?t=2:VALID_PARAM_RE.test(We)?En():(An(),t=0,We!=="*"&&We!=="?"&&We!=="+"&&je--);break;case 2:We===")"?Cn[Cn.length-1]=="\\"?Cn=Cn.slice(0,-1)+We:t=3:Cn+=We;break;case 3:An(),t=0,We!=="*"&&We!=="?"&&We!=="+"&&je--,Cn="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${Qe}"`),An(),Ue(),ke}function createRouteRecordMatcher(Ae,e,t){const Oe=tokensToParser(tokenizePath(Ae.path),t),ke=assign(Oe,{record:Ae,parent:e,children:[],alias:[]});return e&&!ke.record.aliasOf==!e.record.aliasOf&&e.children.push(ke),ke}function createRouterMatcher(Ae,e){const t=[],Oe=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function ke(An){return Oe.get(An)}function Be(An,En,Sn){const Tn=!Sn,Dn=normalizeRouteRecord(An);Dn.aliasOf=Sn&&Sn.record;const ti=mergeOptions(e,An),ni=[Dn];if("alias"in An){const oi=typeof An.alias=="string"?[An.alias]:An.alias;for(const ci of oi)ni.push(normalizeRouteRecord(assign({},Dn,{components:Sn?Sn.record.components:Dn.components,path:ci,aliasOf:Sn?Sn.record:Dn})))}let ii,si;for(const oi of ni){const{path:ci}=oi;if(En&&ci[0]!=="/"){const Pi=En.record.path,Ai=Pi[Pi.length-1]==="/"?"":"/";oi.path=En.record.path+(ci&&Ai+ci)}if(ii=createRouteRecordMatcher(oi,En,ti),Sn?Sn.alias.push(ii):(si=si||ii,si!==ii&&si.alias.push(ii),Tn&&An.name&&!isAliasRecord(ii)&&Ue(An.name)),isMatchable(ii)&&We(ii),Dn.children){const Pi=Dn.children;for(let Ai=0;Ai<Pi.length;Ai++)Be(Pi[Ai],ii,Sn&&Sn.children[Ai])}Sn=Sn||ii}return si?()=>{Ue(si)}:noop$1}function Ue(An){if(isRouteName(An)){const En=Oe.get(An);En&&(Oe.delete(An),t.splice(t.indexOf(En),1),En.children.forEach(Ue),En.alias.forEach(Ue))}else{const En=t.indexOf(An);En>-1&&(t.splice(En,1),An.record.name&&Oe.delete(An.record.name),An.children.forEach(Ue),An.alias.forEach(Ue))}}function je(){return t}function We(An){const En=findInsertionIndex(An,t);t.splice(En,0,An),An.record.name&&!isAliasRecord(An)&&Oe.set(An.record.name,An)}function Qe(An,En){let Sn,Tn={},Dn,ti;if("name"in An&&An.name){if(Sn=Oe.get(An.name),!Sn)throw createRouterError(1,{location:An});ti=Sn.record.name,Tn=assign(paramsFromLocation(En.params,Sn.keys.filter(si=>!si.optional).concat(Sn.parent?Sn.parent.keys.filter(si=>si.optional):[]).map(si=>si.name)),An.params&&paramsFromLocation(An.params,Sn.keys.map(si=>si.name))),Dn=Sn.stringify(Tn)}else if(An.path!=null)Dn=An.path,Sn=t.find(si=>si.re.test(Dn)),Sn&&(Tn=Sn.parse(Dn),ti=Sn.record.name);else{if(Sn=En.name?Oe.get(En.name):t.find(si=>si.re.test(En.path)),!Sn)throw createRouterError(1,{location:An,currentLocation:En});ti=Sn.record.name,Tn=assign({},En.params,An.params),Dn=Sn.stringify(Tn)}const ni=[];let ii=Sn;for(;ii;)ni.unshift(ii.record),ii=ii.parent;return{name:ti,path:Dn,params:Tn,matched:ni,meta:mergeMetaFields(ni)}}Ae.forEach(An=>Be(An));function Cn(){t.length=0,Oe.clear()}return{addRoute:Be,resolve:Qe,removeRoute:Ue,clearRoutes:Cn,getRoutes:je,getRecordMatcher:ke}}function paramsFromLocation(Ae,e){const t={};for(const Oe of e)Oe in Ae&&(t[Oe]=Ae[Oe]);return t}function normalizeRouteRecord(Ae){const e={path:Ae.path,redirect:Ae.redirect,name:Ae.name,meta:Ae.meta||{},aliasOf:Ae.aliasOf,beforeEnter:Ae.beforeEnter,props:normalizeRecordProps(Ae),children:Ae.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Ae?Ae.components||null:Ae.component&&{default:Ae.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(Ae){const e={},t=Ae.props||!1;if("component"in Ae)e.default=t;else for(const Oe in Ae.components)e[Oe]=typeof t=="object"?t[Oe]:t;return e}function isAliasRecord(Ae){for(;Ae;){if(Ae.record.aliasOf)return!0;Ae=Ae.parent}return!1}function mergeMetaFields(Ae){return Ae.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(Ae,e){const t={};for(const Oe in Ae)t[Oe]=Oe in e?e[Oe]:Ae[Oe];return t}function findInsertionIndex(Ae,e){let t=0,Oe=e.length;for(;t!==Oe;){const Be=t+Oe>>1;comparePathParserScore(Ae,e[Be])<0?Oe=Be:t=Be+1}const ke=getInsertionAncestor(Ae);return ke&&(Oe=e.lastIndexOf(ke,Oe-1)),Oe}function getInsertionAncestor(Ae){let e=Ae;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(Ae,e)===0)return e}function isMatchable({record:Ae}){return!!(Ae.name||Ae.components&&Object.keys(Ae.components).length||Ae.redirect)}function parseQuery(Ae){const e={};if(Ae===""||Ae==="?")return e;const Oe=(Ae[0]==="?"?Ae.slice(1):Ae).split("&");for(let ke=0;ke<Oe.length;++ke){const Be=Oe[ke].replace(PLUS_RE," "),Ue=Be.indexOf("="),je=decode$2(Ue<0?Be:Be.slice(0,Ue)),We=Ue<0?null:decode$2(Be.slice(Ue+1));if(je in e){let Qe=e[je];isArray(Qe)||(Qe=e[je]=[Qe]),Qe.push(We)}else e[je]=We}return e}function stringifyQuery(Ae){let e="";for(let t in Ae){const Oe=Ae[t];if(t=encodeQueryKey(t),Oe==null){Oe!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(Oe)?Oe.map(Be=>Be&&encodeQueryValue(Be)):[Oe&&encodeQueryValue(Oe)]).forEach(Be=>{Be!==void 0&&(e+=(e.length?"&":"")+t,Be!=null&&(e+="="+Be))})}return e}function normalizeQuery(Ae){const e={};for(const t in Ae){const Oe=Ae[t];Oe!==void 0&&(e[t]=isArray(Oe)?Oe.map(ke=>ke==null?null:""+ke):Oe==null?Oe:""+Oe)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Ae=[];function e(Oe){return Ae.push(Oe),()=>{const ke=Ae.indexOf(Oe);ke>-1&&Ae.splice(ke,1)}}function t(){Ae=[]}return{add:e,list:()=>Ae.slice(),reset:t}}function guardToPromiseFn(Ae,e,t,Oe,ke,Be=Ue=>Ue()){const Ue=Oe&&(Oe.enterCallbacks[ke]=Oe.enterCallbacks[ke]||[]);return()=>new Promise((je,We)=>{const Qe=En=>{En===!1?We(createRouterError(4,{from:t,to:e})):En instanceof Error?We(En):isRouteLocation(En)?We(createRouterError(2,{from:e,to:En})):(Ue&&Oe.enterCallbacks[ke]===Ue&&typeof En=="function"&&Ue.push(En),je())},Cn=Be(()=>Ae.call(Oe&&Oe.instances[ke],e,t,Qe));let An=Promise.resolve(Cn);Ae.length<3&&(An=An.then(Qe)),An.catch(En=>We(En))})}function extractComponentsGuards(Ae,e,t,Oe,ke=Be=>Be()){const Be=[];for(const Ue of Ae)for(const je in Ue.components){let We=Ue.components[je];if(!(e!=="beforeRouteEnter"&&!Ue.instances[je]))if(isRouteComponent(We)){const Cn=(We.__vccOpts||We)[e];Cn&&Be.push(guardToPromiseFn(Cn,t,Oe,Ue,je,ke))}else{let Qe=We();Be.push(()=>Qe.then(Cn=>{if(!Cn)throw new Error(`Couldn't resolve component "${je}" at "${Ue.path}"`);const An=isESModule(Cn)?Cn.default:Cn;Ue.mods[je]=Cn,Ue.components[je]=An;const Sn=(An.__vccOpts||An)[e];return Sn&&guardToPromiseFn(Sn,t,Oe,Ue,je,ke)()}))}}return Be}function useLink(Ae){const e=inject(routerKey),t=inject(routeLocationKey),Oe=computed(()=>{const We=unref(Ae.to);return e.resolve(We)}),ke=computed(()=>{const{matched:We}=Oe.value,{length:Qe}=We,Cn=We[Qe-1],An=t.matched;if(!Cn||!An.length)return-1;const En=An.findIndex(isSameRouteRecord.bind(null,Cn));if(En>-1)return En;const Sn=getOriginalPath(We[Qe-2]);return Qe>1&&getOriginalPath(Cn)===Sn&&An[An.length-1].path!==Sn?An.findIndex(isSameRouteRecord.bind(null,We[Qe-2])):En}),Be=computed(()=>ke.value>-1&&includesParams(t.params,Oe.value.params)),Ue=computed(()=>ke.value>-1&&ke.value===t.matched.length-1&&isSameRouteLocationParams(t.params,Oe.value.params));function je(We={}){if(guardEvent(We)){const Qe=e[unref(Ae.replace)?"replace":"push"](unref(Ae.to)).catch(noop$1);return Ae.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>Qe),Qe}return Promise.resolve()}return{route:Oe,href:computed(()=>Oe.value.href),isActive:Be,isExactActive:Ue,navigate:je}}function preferSingleVNode(Ae){return Ae.length===1?Ae[0]:Ae}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Ae,{slots:e}){const t=reactive(useLink(Ae)),{options:Oe}=inject(routerKey),ke=computed(()=>({[getLinkClass(Ae.activeClass,Oe.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(Ae.exactActiveClass,Oe.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const Be=e.default&&preferSingleVNode(e.default(t));return Ae.custom?Be:h$1("a",{"aria-current":t.isExactActive?Ae.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:ke.value},Be)}}}),RouterLink=RouterLinkImpl;function guardEvent(Ae){if(!(Ae.metaKey||Ae.altKey||Ae.ctrlKey||Ae.shiftKey)&&!Ae.defaultPrevented&&!(Ae.button!==void 0&&Ae.button!==0)){if(Ae.currentTarget&&Ae.currentTarget.getAttribute){const e=Ae.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return Ae.preventDefault&&Ae.preventDefault(),!0}}function includesParams(Ae,e){for(const t in e){const Oe=e[t],ke=Ae[t];if(typeof Oe=="string"){if(Oe!==ke)return!1}else if(!isArray(ke)||ke.length!==Oe.length||Oe.some((Be,Ue)=>Be!==ke[Ue]))return!1}return!0}function getOriginalPath(Ae){return Ae?Ae.aliasOf?Ae.aliasOf.path:Ae.path:""}const getLinkClass=(Ae,e,t)=>Ae??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Ae,{attrs:e,slots:t}){const Oe=inject(routerViewLocationKey),ke=computed(()=>Ae.route||Oe.value),Be=inject(viewDepthKey,0),Ue=computed(()=>{let Qe=unref(Be);const{matched:Cn}=ke.value;let An;for(;(An=Cn[Qe])&&!An.components;)Qe++;return Qe}),je=computed(()=>ke.value.matched[Ue.value]);provide(viewDepthKey,computed(()=>Ue.value+1)),provide(matchedRouteKey,je),provide(routerViewLocationKey,ke);const We=ref();return watch(()=>[We.value,je.value,Ae.name],([Qe,Cn,An],[En,Sn,Tn])=>{Cn&&(Cn.instances[An]=Qe,Sn&&Sn!==Cn&&Qe&&Qe===En&&(Cn.leaveGuards.size||(Cn.leaveGuards=Sn.leaveGuards),Cn.updateGuards.size||(Cn.updateGuards=Sn.updateGuards))),Qe&&Cn&&(!Sn||!isSameRouteRecord(Cn,Sn)||!En)&&(Cn.enterCallbacks[An]||[]).forEach(Dn=>Dn(Qe))},{flush:"post"}),()=>{const Qe=ke.value,Cn=Ae.name,An=je.value,En=An&&An.components[Cn];if(!En)return normalizeSlot(t.default,{Component:En,route:Qe});const Sn=An.props[Cn],Tn=Sn?Sn===!0?Qe.params:typeof Sn=="function"?Sn(Qe):Sn:null,ti=h$1(En,assign({},Tn,e,{onVnodeUnmounted:ni=>{ni.component.isUnmounted&&(An.instances[Cn]=null)},ref:We}));return normalizeSlot(t.default,{Component:ti,route:Qe})||ti}}});function normalizeSlot(Ae,e){if(!Ae)return null;const t=Ae(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(Ae){const e=createRouterMatcher(Ae.routes,Ae),t=Ae.parseQuery||parseQuery,Oe=Ae.stringifyQuery||stringifyQuery,ke=Ae.history,Be=useCallbacks(),Ue=useCallbacks(),je=useCallbacks(),We=shallowRef(START_LOCATION_NORMALIZED);let Qe=START_LOCATION_NORMALIZED;isBrowser&&Ae.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const Cn=applyToParams.bind(null,pr=>""+pr),An=applyToParams.bind(null,encodeParam),En=applyToParams.bind(null,decode$2);function Sn(pr,_r){let Ar,Sr;return isRouteName(pr)?(Ar=e.getRecordMatcher(pr),Sr=_r):Sr=pr,e.addRoute(Sr,Ar)}function Tn(pr){const _r=e.getRecordMatcher(pr);_r&&e.removeRoute(_r)}function Dn(){return e.getRoutes().map(pr=>pr.record)}function ti(pr){return!!e.getRecordMatcher(pr)}function ni(pr,_r){if(_r=assign({},_r||We.value),typeof pr=="string"){const mr=parseURL(t,pr,_r.path),dr=e.resolve({path:mr.path},_r),tr=ke.createHref(mr.fullPath);return assign(mr,dr,{params:En(dr.params),hash:decode$2(mr.hash),redirectedFrom:void 0,href:tr})}let Ar;if(pr.path!=null)Ar=assign({},pr,{path:parseURL(t,pr.path,_r.path).path});else{const mr=assign({},pr.params);for(const dr in mr)mr[dr]==null&&delete mr[dr];Ar=assign({},pr,{params:An(mr)}),_r.params=An(_r.params)}const Sr=e.resolve(Ar,_r),Hr=pr.hash||"";Sr.params=Cn(En(Sr.params));const es=stringifyURL(Oe,assign({},pr,{hash:encodeHash(Hr),path:Sr.path})),ir=ke.createHref(es);return assign({fullPath:es,hash:Hr,query:Oe===stringifyQuery?normalizeQuery(pr.query):pr.query||{}},Sr,{redirectedFrom:void 0,href:ir})}function ii(pr){return typeof pr=="string"?parseURL(t,pr,We.value.path):assign({},pr)}function si(pr,_r){if(Qe!==pr)return createRouterError(8,{from:_r,to:pr})}function oi(pr){return Ai(pr)}function ci(pr){return oi(assign(ii(pr),{replace:!0}))}function Pi(pr){const _r=pr.matched[pr.matched.length-1];if(_r&&_r.redirect){const{redirect:Ar}=_r;let Sr=typeof Ar=="function"?Ar(pr):Ar;return typeof Sr=="string"&&(Sr=Sr.includes("?")||Sr.includes("#")?Sr=ii(Sr):{path:Sr},Sr.params={}),assign({query:pr.query,hash:pr.hash,params:Sr.path!=null?{}:pr.params},Sr)}}function Ai(pr,_r){const Ar=Qe=ni(pr),Sr=We.value,Hr=pr.state,es=pr.force,ir=pr.replace===!0,mr=Pi(Ar);if(mr)return Ai(assign(ii(mr),{state:typeof mr=="object"?assign({},Hr,mr.state):Hr,force:es,replace:ir}),_r||Ar);const dr=Ar;dr.redirectedFrom=_r;let tr;return!es&&isSameRouteLocation(Oe,Sr,Ar)&&(tr=createRouterError(16,{to:dr,from:Sr}),wr(Sr,Sr,!0,!1)),(tr?Promise.resolve(tr):Ni(dr,Sr)).catch(Dr=>isNavigationFailure(Dr)?isNavigationFailure(Dr,2)?Dr:ar(Dr):lr(Dr,dr,Sr)).then(Dr=>{if(Dr){if(isNavigationFailure(Dr,2))return Ai(assign({replace:ir},ii(Dr.to),{state:typeof Dr.to=="object"?assign({},Hr,Dr.to.state):Hr,force:es}),_r||dr)}else Dr=li(dr,Sr,!0,ir,Hr);return ui(dr,Sr,Dr),Dr})}function fi(pr,_r){const Ar=si(pr,_r);return Ar?Promise.reject(Ar):Promise.resolve()}function Oi(pr){const _r=rr.values().next().value;return _r&&typeof _r.runWithContext=="function"?_r.runWithContext(pr):pr()}function Ni(pr,_r){let Ar;const[Sr,Hr,es]=extractChangingRecords(pr,_r);Ar=extractComponentsGuards(Sr.reverse(),"beforeRouteLeave",pr,_r);for(const mr of Sr)mr.leaveGuards.forEach(dr=>{Ar.push(guardToPromiseFn(dr,pr,_r))});const ir=fi.bind(null,pr,_r);return Ar.push(ir),vr(Ar).then(()=>{Ar=[];for(const mr of Be.list())Ar.push(guardToPromiseFn(mr,pr,_r));return Ar.push(ir),vr(Ar)}).then(()=>{Ar=extractComponentsGuards(Hr,"beforeRouteUpdate",pr,_r);for(const mr of Hr)mr.updateGuards.forEach(dr=>{Ar.push(guardToPromiseFn(dr,pr,_r))});return Ar.push(ir),vr(Ar)}).then(()=>{Ar=[];for(const mr of es)if(mr.beforeEnter)if(isArray(mr.beforeEnter))for(const dr of mr.beforeEnter)Ar.push(guardToPromiseFn(dr,pr,_r));else Ar.push(guardToPromiseFn(mr.beforeEnter,pr,_r));return Ar.push(ir),vr(Ar)}).then(()=>(pr.matched.forEach(mr=>mr.enterCallbacks={}),Ar=extractComponentsGuards(es,"beforeRouteEnter",pr,_r,Oi),Ar.push(ir),vr(Ar))).then(()=>{Ar=[];for(const mr of Ue.list())Ar.push(guardToPromiseFn(mr,pr,_r));return Ar.push(ir),vr(Ar)}).catch(mr=>isNavigationFailure(mr,8)?mr:Promise.reject(mr))}function ui(pr,_r,Ar){je.list().forEach(Sr=>Oi(()=>Sr(pr,_r,Ar)))}function li(pr,_r,Ar,Sr,Hr){const es=si(pr,_r);if(es)return es;const ir=_r===START_LOCATION_NORMALIZED,mr=isBrowser?history.state:{};Ar&&(Sr||ir?ke.replace(pr.fullPath,assign({scroll:ir&&mr&&mr.scroll},Hr)):ke.push(pr.fullPath,Hr)),We.value=pr,wr(pr,_r,Ar,ir),ar()}let Ri;function Mi(){Ri||(Ri=ke.listen((pr,_r,Ar)=>{if(!gr.listening)return;const Sr=ni(pr),Hr=Pi(Sr);if(Hr){Ai(assign(Hr,{replace:!0,force:!0}),Sr).catch(noop$1);return}Qe=Sr;const es=We.value;isBrowser&&saveScrollPosition(getScrollKey(es.fullPath,Ar.delta),computeScrollPosition()),Ni(Sr,es).catch(ir=>isNavigationFailure(ir,12)?ir:isNavigationFailure(ir,2)?(Ai(assign(ii(ir.to),{force:!0}),Sr).then(mr=>{isNavigationFailure(mr,20)&&!Ar.delta&&Ar.type===NavigationType.pop&&ke.go(-1,!1)}).catch(noop$1),Promise.reject()):(Ar.delta&&ke.go(-Ar.delta,!1),lr(ir,Sr,es))).then(ir=>{ir=ir||li(Sr,es,!1),ir&&(Ar.delta&&!isNavigationFailure(ir,8)?ke.go(-Ar.delta,!1):Ar.type===NavigationType.pop&&isNavigationFailure(ir,20)&&ke.go(-1,!1)),ui(Sr,es,ir)}).catch(noop$1)}))}let Bi=useCallbacks(),er=useCallbacks(),nr;function lr(pr,_r,Ar){ar(pr);const Sr=er.list();return Sr.length?Sr.forEach(Hr=>Hr(pr,_r,Ar)):console.error(pr),Promise.reject(pr)}function hr(){return nr&&We.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((pr,_r)=>{Bi.add([pr,_r])})}function ar(pr){return nr||(nr=!pr,Mi(),Bi.list().forEach(([_r,Ar])=>pr?Ar(pr):_r()),Bi.reset()),pr}function wr(pr,_r,Ar,Sr){const{scrollBehavior:Hr}=Ae;if(!isBrowser||!Hr)return Promise.resolve();const es=!Ar&&getSavedScrollPosition(getScrollKey(pr.fullPath,0))||(Sr||!Ar)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Hr(pr,_r,es)).then(ir=>ir&&scrollToPosition(ir)).catch(ir=>lr(ir,pr,_r))}const Fi=pr=>ke.go(pr);let cr;const rr=new Set,gr={currentRoute:We,listening:!0,addRoute:Sn,removeRoute:Tn,clearRoutes:e.clearRoutes,hasRoute:ti,getRoutes:Dn,resolve:ni,options:Ae,push:oi,replace:ci,go:Fi,back:()=>Fi(-1),forward:()=>Fi(1),beforeEach:Be.add,beforeResolve:Ue.add,afterEach:je.add,onError:er.add,isReady:hr,install(pr){const _r=this;pr.component("RouterLink",RouterLink),pr.component("RouterView",RouterView),pr.config.globalProperties.$router=_r,Object.defineProperty(pr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(We)}),isBrowser&&!cr&&We.value===START_LOCATION_NORMALIZED&&(cr=!0,oi(ke.location).catch(Hr=>{}));const Ar={};for(const Hr in START_LOCATION_NORMALIZED)Object.defineProperty(Ar,Hr,{get:()=>We.value[Hr],enumerable:!0});pr.provide(routerKey,_r),pr.provide(routeLocationKey,shallowReactive(Ar)),pr.provide(routerViewLocationKey,We);const Sr=pr.unmount;rr.add(pr),pr.unmount=function(){rr.delete(pr),rr.size<1&&(Qe=START_LOCATION_NORMALIZED,Ri&&Ri(),Ri=null,We.value=START_LOCATION_NORMALIZED,cr=!1,nr=!1),Sr()}}};function vr(pr){return pr.reduce((_r,Ar)=>_r.then(()=>Oi(Ar)),Promise.resolve())}return gr}function extractChangingRecords(Ae,e){const t=[],Oe=[],ke=[],Be=Math.max(e.matched.length,Ae.matched.length);for(let Ue=0;Ue<Be;Ue++){const je=e.matched[Ue];je&&(Ae.matched.find(Qe=>isSameRouteRecord(Qe,je))?Oe.push(je):t.push(je));const We=Ae.matched[Ue];We&&(e.matched.find(Qe=>isSameRouteRecord(Qe,We))||ke.push(We))}return[t,Oe,ke]}function useRouter(){return inject(routerKey)}function useRoute(Ae){return inject(routeLocationKey)}function tryOnScopeDispose(Ae){return getCurrentScope()?(onScopeDispose(Ae),!0):!1}function toValue(Ae){return typeof Ae=="function"?Ae():unref(Ae)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$4=Object.prototype.toString,isObject=Ae=>toString$4.call(Ae)==="[object Object]",noop=()=>{};function createFilterWrapper(Ae,e){function t(...Oe){return new Promise((ke,Be)=>{Promise.resolve(Ae(()=>e.apply(this,Oe),{fn:e,thisArg:this,args:Oe})).then(ke).catch(Be)})}return t}const bypassFilter=Ae=>Ae();function pausableFilter(Ae=bypassFilter){const e=ref(!0);function t(){e.value=!1}function Oe(){e.value=!0}const ke=(...Be)=>{e.value&&Ae(...Be)};return{isActive:readonly(e),pause:t,resume:Oe,eventFilter:ke}}function createSingletonPromise(Ae){let e;function t(){return e||(e=Ae()),e}return t.reset=async()=>{const Oe=e;e=void 0,Oe&&await Oe},t}function getLifeCycleTarget(Ae){return getCurrentInstance()}function watchWithFilter(Ae,e,t={}){const{eventFilter:Oe=bypassFilter,...ke}=t;return watch(Ae,createFilterWrapper(Oe,e),ke)}function watchPausable(Ae,e,t={}){const{eventFilter:Oe,...ke}=t,{eventFilter:Be,pause:Ue,resume:je,isActive:We}=pausableFilter(Oe);return{stop:watchWithFilter(Ae,e,{...ke,eventFilter:Be}),pause:Ue,resume:je,isActive:We}}function tryOnMounted(Ae,e=!0,t){getLifeCycleTarget()?onMounted(Ae,t):e?Ae():nextTick(Ae)}function useTimeoutFn(Ae,e,t={}){const{immediate:Oe=!0}=t,ke=ref(!1);let Be=null;function Ue(){Be&&(clearTimeout(Be),Be=null)}function je(){ke.value=!1,Ue()}function We(...Qe){Ue(),ke.value=!0,Be=setTimeout(()=>{ke.value=!1,Be=null,Ae(...Qe)},toValue(e))}return Oe&&(ke.value=!0,isClient&&We()),tryOnScopeDispose(je),{isPending:readonly(ke),start:We,stop:je}}function unrefElement(Ae){var e;const t=toValue(Ae);return(e=t==null?void 0:t.$el)!=null?e:t}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...Ae){let e,t,Oe,ke;if(typeof Ae[0]=="string"||Array.isArray(Ae[0])?([t,Oe,ke]=Ae,e=defaultWindow):[e,t,Oe,ke]=Ae,!e)return noop;Array.isArray(t)||(t=[t]),Array.isArray(Oe)||(Oe=[Oe]);const Be=[],Ue=()=>{Be.forEach(Cn=>Cn()),Be.length=0},je=(Cn,An,En,Sn)=>(Cn.addEventListener(An,En,Sn),()=>Cn.removeEventListener(An,En,Sn)),We=watch(()=>[unrefElement(e),toValue(ke)],([Cn,An])=>{if(Ue(),!Cn)return;const En=isObject(An)?{...An}:An;Be.push(...t.flatMap(Sn=>Oe.map(Tn=>je(Cn,Sn,Tn,En))))},{immediate:!0,flush:"post"}),Qe=()=>{We(),Ue()};return tryOnScopeDispose(Qe),Qe}function useMounted(){const Ae=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{Ae.value=!0},e),Ae}function useSupported(Ae){const e=useMounted();return computed(()=>(e.value,!!Ae()))}function useMediaQuery(Ae,e={}){const{window:t=defaultWindow}=e,Oe=useSupported(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let ke;const Be=ref(!1),Ue=Qe=>{Be.value=Qe.matches},je=()=>{ke&&("removeEventListener"in ke?ke.removeEventListener("change",Ue):ke.removeListener(Ue))},We=watchEffect(()=>{Oe.value&&(je(),ke=t.matchMedia(toValue(Ae)),"addEventListener"in ke?ke.addEventListener("change",Ue):ke.addListener(Ue),Be.value=ke.matches)});return tryOnScopeDispose(()=>{We(),je(),ke=void 0}),Be}function usePermission(Ae,e={}){const{controls:t=!1,navigator:Oe=defaultNavigator}=e,ke=useSupported(()=>Oe&&"permissions"in Oe);let Be;const Ue=typeof Ae=="string"?{name:Ae}:Ae,je=ref(),We=()=>{Be&&(je.value=Be.state)},Qe=createSingletonPromise(async()=>{if(ke.value){if(!Be)try{Be=await Oe.permissions.query(Ue),useEventListener(Be,"change",We),We()}catch{je.value="prompt"}return Be}});return Qe(),t?{state:je,isSupported:ke,query:Qe}:je}function useClipboard(Ae={}){const{navigator:e=defaultNavigator,read:t=!1,source:Oe,copiedDuring:ke=1500,legacy:Be=!1}=Ae,Ue=useSupported(()=>e&&"clipboard"in e),je=usePermission("clipboard-read"),We=usePermission("clipboard-write"),Qe=computed(()=>Ue.value||Be),Cn=ref(""),An=ref(!1),En=useTimeoutFn(()=>An.value=!1,ke);function Sn(){Ue.value&&ni(je.value)?e.clipboard.readText().then(ii=>{Cn.value=ii}):Cn.value=ti()}Qe.value&&t&&useEventListener(["copy","cut"],Sn);async function Tn(ii=toValue(Oe)){Qe.value&&ii!=null&&(Ue.value&&ni(We.value)?await e.clipboard.writeText(ii):Dn(ii),Cn.value=ii,An.value=!0,En.start())}function Dn(ii){const si=document.createElement("textarea");si.value=ii??"",si.style.position="absolute",si.style.opacity="0",document.body.appendChild(si),si.select(),document.execCommand("copy"),si.remove()}function ti(){var ii,si,oi;return(oi=(si=(ii=document==null?void 0:document.getSelection)==null?void 0:ii.call(document))==null?void 0:si.toString())!=null?oi:""}function ni(ii){return ii==="granted"||ii==="prompt"}return{isSupported:Qe,text:Cn,copied:An,copy:Tn}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(Ae,e){return handlers[Ae]||e}function guessSerializerType(Ae){return Ae==null?"any":Ae instanceof Set?"set":Ae instanceof Map?"map":Ae instanceof Date?"date":typeof Ae=="boolean"?"boolean":typeof Ae=="string"?"string":typeof Ae=="object"?"object":Number.isNaN(Ae)?"any":"number"}const StorageSerializers={boolean:{read:Ae=>Ae==="true",write:Ae=>String(Ae)},object:{read:Ae=>JSON.parse(Ae),write:Ae=>JSON.stringify(Ae)},number:{read:Ae=>Number.parseFloat(Ae),write:Ae=>String(Ae)},any:{read:Ae=>Ae,write:Ae=>String(Ae)},string:{read:Ae=>Ae,write:Ae=>String(Ae)},map:{read:Ae=>new Map(JSON.parse(Ae)),write:Ae=>JSON.stringify(Array.from(Ae.entries()))},set:{read:Ae=>new Set(JSON.parse(Ae)),write:Ae=>JSON.stringify(Array.from(Ae))},date:{read:Ae=>new Date(Ae),write:Ae=>Ae.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(Ae,e,t,Oe={}){var ke;const{flush:Be="pre",deep:Ue=!0,listenToStorageChanges:je=!0,writeDefaults:We=!0,mergeDefaults:Qe=!1,shallow:Cn,window:An=defaultWindow,eventFilter:En,onError:Sn=Ni=>{console.error(Ni)},initOnMounted:Tn}=Oe,Dn=(Cn?shallowRef:ref)(typeof e=="function"?e():e);if(!t)try{t=getSSRHandler("getDefaultStorage",()=>{var Ni;return(Ni=defaultWindow)==null?void 0:Ni.localStorage})()}catch(Ni){Sn(Ni)}if(!t)return Dn;const ti=toValue(e),ni=guessSerializerType(ti),ii=(ke=Oe.serializer)!=null?ke:StorageSerializers[ni],{pause:si,resume:oi}=watchPausable(Dn,()=>Pi(Dn.value),{flush:Be,deep:Ue,eventFilter:En});An&&je&&tryOnMounted(()=>{useEventListener(An,"storage",fi),useEventListener(An,customStorageEventName,Oi),Tn&&fi()}),Tn||fi();function ci(Ni,ui){An&&An.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:Ae,oldValue:Ni,newValue:ui,storageArea:t}}))}function Pi(Ni){try{const ui=t.getItem(Ae);if(Ni==null)ci(ui,null),t.removeItem(Ae);else{const li=ii.write(Ni);ui!==li&&(t.setItem(Ae,li),ci(ui,li))}}catch(ui){Sn(ui)}}function Ai(Ni){const ui=Ni?Ni.newValue:t.getItem(Ae);if(ui==null)return We&&ti!=null&&t.setItem(Ae,ii.write(ti)),ti;if(!Ni&&Qe){const li=ii.read(ui);return typeof Qe=="function"?Qe(li,ti):ni==="object"&&!Array.isArray(li)?{...ti,...li}:li}else return typeof ui!="string"?ui:ii.read(ui)}function fi(Ni){if(!(Ni&&Ni.storageArea!==t)){if(Ni&&Ni.key==null){Dn.value=ti;return}if(!(Ni&&Ni.key!==Ae)){si();try{(Ni==null?void 0:Ni.newValue)!==ii.write(Dn.value)&&(Dn.value=Ai(Ni))}catch(ui){Sn(ui)}finally{Ni?nextTick(oi):oi()}}}}function Oi(Ni){fi(Ni.detail)}return Dn}function useResizeObserver(Ae,e,t={}){const{window:Oe=defaultWindow,...ke}=t;let Be;const Ue=useSupported(()=>Oe&&"ResizeObserver"in Oe),je=()=>{Be&&(Be.disconnect(),Be=void 0)},We=computed(()=>Array.isArray(Ae)?Ae.map(An=>unrefElement(An)):[unrefElement(Ae)]),Qe=watch(We,An=>{if(je(),Ue.value&&Oe){Be=new ResizeObserver(e);for(const En of An)En&&Be.observe(En,ke)}},{immediate:!0,flush:"post"}),Cn=()=>{je(),Qe()};return tryOnScopeDispose(Cn),{isSupported:Ue,stop:Cn}}function useElementSize(Ae,e={width:0,height:0},t={}){const{window:Oe=defaultWindow,box:ke="content-box"}=t,Be=computed(()=>{var An,En;return(En=(An=unrefElement(Ae))==null?void 0:An.namespaceURI)==null?void 0:En.includes("svg")}),Ue=ref(e.width),je=ref(e.height),{stop:We}=useResizeObserver(Ae,([An])=>{const En=ke==="border-box"?An.borderBoxSize:ke==="content-box"?An.contentBoxSize:An.devicePixelContentBoxSize;if(Oe&&Be.value){const Sn=unrefElement(Ae);if(Sn){const Tn=Sn.getBoundingClientRect();Ue.value=Tn.width,je.value=Tn.height}}else if(En){const Sn=Array.isArray(En)?En:[En];Ue.value=Sn.reduce((Tn,{inlineSize:Dn})=>Tn+Dn,0),je.value=Sn.reduce((Tn,{blockSize:Dn})=>Tn+Dn,0)}else Ue.value=An.contentRect.width,je.value=An.contentRect.height},t);tryOnMounted(()=>{const An=unrefElement(Ae);An&&(Ue.value="offsetWidth"in An?An.offsetWidth:e.width,je.value="offsetHeight"in An?An.offsetHeight:e.height)});const Qe=watch(()=>unrefElement(Ae),An=>{Ue.value=An?e.width:0,je.value=An?e.height:0});function Cn(){We(),Qe()}return{width:Ue,height:je,stop:Cn}}function useUrlSearchParams(Ae="history",e={}){const{initialValue:t={},removeNullishValues:Oe=!0,removeFalsyValues:ke=!1,write:Be=!0,window:Ue=defaultWindow}=e;if(!Ue)return reactive(t);const je=reactive({});function We(){if(Ae==="history")return Ue.location.search||"";if(Ae==="hash"){const ni=Ue.location.hash||"",ii=ni.indexOf("?");return ii>0?ni.slice(ii):""}else return(Ue.location.hash||"").replace(/^#/,"")}function Qe(ni){const ii=ni.toString();if(Ae==="history")return`${ii?`?${ii}`:""}${Ue.location.hash||""}`;if(Ae==="hash-params")return`${Ue.location.search||""}${ii?`#${ii}`:""}`;const si=Ue.location.hash||"#",oi=si.indexOf("?");return oi>0?`${si.slice(0,oi)}${ii?`?${ii}`:""}`:`${si}${ii?`?${ii}`:""}`}function Cn(){return new URLSearchParams(We())}function An(ni){const ii=new Set(Object.keys(je));for(const si of ni.keys()){const oi=ni.getAll(si);je[si]=oi.length>1?oi:ni.get(si)||"",ii.delete(si)}Array.from(ii).forEach(si=>delete je[si])}const{pause:En,resume:Sn}=watchPausable(je,()=>{const ni=new URLSearchParams("");Object.keys(je).forEach(ii=>{const si=je[ii];Array.isArray(si)?si.forEach(oi=>ni.append(ii,oi)):Oe&&si==null||ke&&!si?ni.delete(ii):ni.set(ii,si)}),Tn(ni)},{deep:!0});function Tn(ni,ii){En(),ii&&An(ni),Ue.history.replaceState(Ue.history.state,Ue.document.title,Ue.location.pathname+Qe(ni)),Sn()}function Dn(){Be&&Tn(Cn(),!0)}useEventListener(Ue,"popstate",Dn,!1),Ae!=="history"&&useEventListener(Ue,"hashchange",Dn,!1);const ti=Cn();return ti.keys().next().value?An(ti):Object.assign(je,t),je}function useMatchMedia(Ae){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[Ae]!==void 0){const t="(max-width: "+e[Ae]+")";return useMediaQuery(t)}}function useMatchMediaHeight(Ae){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const t="(max-height: "+e[Ae]+")";return useMediaQuery(t)}}function useBaseUrl(){return"https://cartes.gouv.fr"}const headerParams=ref({});function useHeaderParams(){return headerParams.value={serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")},headerParams}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$l={},_sfc_main$R=Object.assign(__default__$l,{__name:"ModalConsent",setup(Ae,{expose:e}){const t=useRouter(),Oe=useEulerian();var ke=Oe.hasKey();const Be=ref(!ke),Ue="Panneau de gestion des cookies",je="md",We=useBaseUrl()+"/donnees-personnelles",Qe=()=>{Be.value=!0,Oe.pause()},Cn=()=>{Be.value=!1,t.push({path:"/"}),Oe.resume()};e({openModalConsent:Qe,onModalConsentClose:Cn});const An=()=>{Oe.start(),Cn()},En=()=>{Oe.stop(),Cn()};return(Sn,Tn)=>{const Dn=ys,ti=Vt$1;return openBlock(),createBlock(ti,{opened:unref(Be),title:Ue,size:je,onClose:Cn},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(Dn,{onAcceptAll:Tn[0]||(Tn[0]=ni=>An()),onRefuseAll:Tn[1]||(Tn[1]=ni=>En())},{default:withCtx(()=>[Tn[2]||(Tn[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:We},"Données personnelles et cookies")]),_:1})]),Tn[3]||(Tn[3]=createBaseVNode("hr",null,null,-1)),Tn[4]||(Tn[4]=createBaseVNode("div",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title$1="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$Q={__name:"ModalTheme",setup(Ae,{expose:e}){const t=useEulerian(),{setScheme:Oe,theme:ke,scheme:Be}=Ju(),Ue=ref(Be.value);watch(Be,()=>{Ue.value=Be.value});const je=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],We=()=>{Oe(Ue.value)},Qe=ref(!1),Cn=()=>{Qe.value=!0,t.pause()},An=()=>{Qe.value=!1,t.resume()};return e({openModalTheme:Cn,onModalThemeClose:An}),(En,Sn)=>{const Tn=Si,Dn=Vt$1;return openBlock(),createBlock(Dn,{ref:"modal",opened:unref(Qe),title:title$1,size,onClose:An},{default:withCtx(()=>[createVNode(Tn,{modelValue:unref(Ue),"onUpdate:modelValue":[Sn[0]||(Sn[0]=ti=>isRef(Ue)?Ue.value=ti:null),We],legend,name:"fr-radios-theme",options:je},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=Ju(),NAMESPACE$1="cartes.gouv.fr",ns$1=Ae=>NAMESPACE$1+"."+Ae,VERSION="5",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var Ae=useStorage(ns$1("version"),VERSION);Ae.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),Ae.value=VERSION),watch(Ae,()=>{localStorage.setItem(ns$1("version"),Ae.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),_hoisted_1$e={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$P=defineComponent({__name:"Main",setup(Ae){useAppStore(),dist.useLogger(),useMatchMedia("LG");const e=useHeaderParams(),t=useFooterParams(),Oe=ref(null),ke=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:Oe.value?Oe.value.openModalTheme:null}]),Be=ref(null),Ue=computed(()=>t.mandatoryLinks.map(Tn=>(Tn.label==="Gestion des cookies"&&(delete Tn.href,Tn.onclick=Be.value?Be.value.openModalConsent:null,Tn.to="/"),Tn)));var je=inject("services"),We=ref(""),Qe=ref(!0),Cn=()=>{Qe.value=!0};je.isAccessValided().then(Tn=>{Tn==="login"&&je.getAccessToken().then(Dn=>{Dn&&je.getUserMe().then(ti=>{var ni=ti.last_name,ii=ti.first_name;e.value.quickLinks.forEach(si=>{si.label==="..."&&(si.label=`${ii} ${ni}`)})}).catch(ti=>{console.error(ti),We.value="Error to get user info : "+ti.message,Qe.value=!1})}).catch(Dn=>{console.error(Dn),We.value="Error to get token : "+Dn.message,Qe.value=!1})}).catch(Tn=>{console.error(Tn),We.value="Error during authentication : "+Tn.message,Qe.value=!1});const An=computed(()=>e.value.quickLinks.filter(Tn=>{if(je.authenticated&&Tn.label==="...")if(Object.keys(je.user).length){var Dn=je.user.last_name,ti=je.user.first_name;Tn.label=`${ti} ${Dn}`}else return!1;if(!Object.keys(Tn).includes("authenticated")||Tn.authenticated===je.authenticated)return!0})),En=useRoute(),Sn=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(En.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:"/",text:"Cartes"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(En.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}];return(Tn,Dn)=>{const ti=Xl,ni=bo,ii=Ea,si=resolveComponent("router-view"),oi=_n;return openBlock(),createElementBlock(Fragment,null,[createVNode(ni,{modelValue:unref(e).serviceTitle,"onUpdate:modelValue":Dn[0]||(Dn[0]=ci=>unref(e).serviceTitle=ci),"service-title":unref(e).serviceTitle,"show-beta":!0,"service-description":unref(e).serviceDescription,"logo-text":unref(e).logoText,"quick-links":unref(An)},{mainnav:withCtx(()=>[createVNode(ti,{"nav-items":Sn})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createVNode(ii,{description:unref(We),type:"error",closed:unref(Qe),closeable:!0,onClose:Dn[1]||(Dn[1]=ci=>unref(Cn)())},null,8,["description","closed"]),createBaseVNode("div",null,[createVNode(si)]),Dn[2]||(Dn[2]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),Dn[3]||(Dn[3]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(oi,{"before-mandatory-links":unref(t).beforeMandatoryLinks,"after-mandatory-links":unref(ke),"logo-text":unref(t).logoText,"desc-text":unref(t).descText,"home-link":unref(t).homeLink,partners:unref(t).partners,"licence-text":unref(t).licenceText,"licence-to":unref(t).licenceTo,"licence-name":unref(t).licenceName,"licence-link-props":unref(t).licenceLinkProps,"ecosystem-links":unref(t).ecosystemLinks,"mandatory-links":unref(Ue)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$e,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:Oe},null,512),createVNode(_sfc_main$R,{ref_key:"refModalConsent",ref:Be},null,512)])],64)}}}),_sfc_main$O=defineComponent({__name:"App",setup(Ae){return(e,t)=>(openBlock(),createBlock(_sfc_main$P))}}),version$2="1.0.0-beta.2-340-main",Pkg$1={version:version$2};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(Ae,e,t){let Oe,ke;t=t||ascending;let Be=0,Ue=Ae.length,je=!1;for(;Be<Ue;)Oe=Be+(Ue-Be>>1),ke=+t(Ae[Oe],e),ke<0?Be=Oe+1:(Ue=Oe,je=!ke);return je?Be:~Be}function ascending(Ae,e){return Ae>e?1:Ae<e?-1:0}function descending(Ae,e){return Ae<e?1:Ae>e?-1:0}function linearFindNearest(Ae,e,t){if(Ae[0]<=e)return 0;const Oe=Ae.length;if(e<=Ae[Oe-1])return Oe-1;if(typeof t=="function"){for(let ke=1;ke<Oe;++ke){const Be=Ae[ke];if(Be===e)return ke;if(Be<e)return t(e,Ae[ke-1],Be)>0?ke-1:ke}return Oe-1}if(t>0){for(let ke=1;ke<Oe;++ke)if(Ae[ke]<e)return ke-1;return Oe-1}if(t<0){for(let ke=1;ke<Oe;++ke)if(Ae[ke]<=e)return ke;return Oe-1}for(let ke=1;ke<Oe;++ke){if(Ae[ke]==e)return ke;if(Ae[ke]<e)return Ae[ke-1]-e<e-Ae[ke]?ke-1:ke}return Oe-1}function reverseSubArray(Ae,e,t){for(;e<t;){const Oe=Ae[e];Ae[e]=Ae[t],Ae[t]=Oe,++e,--t}}function extend$4(Ae,e){const t=Array.isArray(e)?e:[e],Oe=t.length;for(let ke=0;ke<Oe;ke++)Ae[Ae.length]=t[ke]}function equals$2(Ae,e){const t=Ae.length;if(t!==e.length)return!1;for(let Oe=0;Oe<t;Oe++)if(Ae[Oe]!==e[Oe])return!1;return!0}function isSorted(Ae,e,t){const Oe=e||ascending;return Ae.every(function(ke,Be){if(Be===0)return!0;const Ue=Oe(Ae[Be-1],ke);return!(Ue>0||Ue===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(Ae){let e,t,Oe;return function(){const ke=Array.prototype.slice.call(arguments);return(!t||this!==Oe||!equals$2(ke,t))&&(Oe=this,t=ke,e=Ae.apply(this,arguments)),e}}function toPromise(Ae){function e(){let t;try{t=Ae()}catch(Oe){return Promise.reject(Oe)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(Ae){for(const e in Ae)delete Ae[e]}function isEmpty$1(Ae){let e;for(e in Ae)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const Oe=this.listeners_||(this.listeners_={}),ke=Oe[e]||(Oe[e]=[]);ke.includes(t)||ke.push(t)}dispatchEvent(e){const t=typeof e=="string",Oe=t?e:e.type,ke=this.listeners_&&this.listeners_[Oe];if(!ke)return;const Be=t?new BaseEvent(e):e;Be.target||(Be.target=this.eventTarget_||this);const Ue=this.dispatching_||(this.dispatching_={}),je=this.pendingRemovals_||(this.pendingRemovals_={});Oe in Ue||(Ue[Oe]=0,je[Oe]=0),++Ue[Oe];let We;for(let Qe=0,Cn=ke.length;Qe<Cn;++Qe)if("handleEvent"in ke[Qe]?We=ke[Qe].handleEvent(Be):We=ke[Qe].call(this,Be),We===!1||Be.propagationStopped){We=!1;break}if(--Ue[Oe]===0){let Qe=je[Oe];for(delete je[Oe];Qe--;)this.removeEventListener(Oe,VOID);delete Ue[Oe]}return We}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const Oe=this.listeners_[e];if(!Oe)return;const ke=Oe.indexOf(t);ke!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(Oe[ke]=VOID,++this.pendingRemovals_[e]):(Oe.splice(ke,1),Oe.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(Ae,e,t,Oe,ke){if(ke){const Ue=t;t=function(){Ae.removeEventListener(e,t),Ue.apply(Oe??this,arguments)}}else Oe&&Oe!==Ae&&(t=t.bind(Oe));const Be={target:Ae,type:e,listener:t};return Ae.addEventListener(e,t),Be}function listenOnce(Ae,e,t,Oe){return listen(Ae,e,t,Oe,!0)}function unlistenByKey(Ae){Ae&&Ae.target&&(Ae.target.removeEventListener(Ae.type,Ae.listener),clear$1(Ae))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const Oe=e.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=listen(this,e[Be],t);return ke}return listen(this,e,t)}onceInternal(e,t){let Oe;if(Array.isArray(e)){const ke=e.length;Oe=new Array(ke);for(let Be=0;Be<ke;++Be)Oe[Be]=listenOnce(this,e[Be],t)}else Oe=listenOnce(this,e,t);return t.ol_key=Oe,Oe}unInternal(e,t){const Oe=t.ol_key;if(Oe)unByKey(Oe);else if(Array.isArray(e))for(let ke=0,Be=e.length;ke<Be;++ke)this.removeEventListener(e[ke],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(Ae){if(Array.isArray(Ae))for(let e=0,t=Ae.length;e<t;++e)unlistenByKey(Ae[e]);else unlistenByKey(Ae)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(Ae){return Ae.ol_uid||(Ae.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.key=t,this.oldValue=Oe}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let Oe;Oe=`change:${e}`,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,t)),Oe=ObjectEventType.PROPERTYCHANGE,this.hasListener(Oe)&&this.dispatchEvent(new ObjectEvent(Oe,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,Oe){const ke=this.values_||(this.values_={});if(Oe)ke[e]=t;else{const Be=ke[e];ke[e]=t,Be!==t&&this.notify(e,Be)}}setProperties(e,t){for(const Oe in e)this.set(Oe,e[Oe],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const Oe=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,Oe)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(Ae){const e=Ae.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let Oe=0,ke=fontRegExMatchIndex.length;Oe<ke;++Oe){const Be=e[Oe+1];Be!==void 0&&(t[fontRegExMatchIndex[Oe]]=Be)}return t.families=t.family.split(/,\s?/),t},Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(Ae){const e=createEmpty();for(let t=0,Oe=Ae.length;t<Oe;++t)extendCoordinate(e,Ae[t]);return e}function _boundingExtentXYs(Ae,e,t){const Oe=Math.min.apply(null,Ae),ke=Math.min.apply(null,e),Be=Math.max.apply(null,Ae),Ue=Math.max.apply(null,e);return createOrUpdate$2(Oe,ke,Be,Ue,t)}function buffer(Ae,e,t){return t?(t[0]=Ae[0]-e,t[1]=Ae[1]-e,t[2]=Ae[2]+e,t[3]=Ae[3]+e,t):[Ae[0]-e,Ae[1]-e,Ae[2]+e,Ae[3]+e]}function clone$1(Ae,e){return e?(e[0]=Ae[0],e[1]=Ae[1],e[2]=Ae[2],e[3]=Ae[3],e):Ae.slice()}function closestSquaredDistanceXY(Ae,e,t){let Oe,ke;return e<Ae[0]?Oe=Ae[0]-e:Ae[2]<e?Oe=e-Ae[2]:Oe=0,t<Ae[1]?ke=Ae[1]-t:Ae[3]<t?ke=t-Ae[3]:ke=0,Oe*Oe+ke*ke}function containsCoordinate(Ae,e){return containsXY(Ae,e[0],e[1])}function containsExtent(Ae,e){return Ae[0]<=e[0]&&e[2]<=Ae[2]&&Ae[1]<=e[1]&&e[3]<=Ae[3]}function containsXY(Ae,e,t){return Ae[0]<=e&&e<=Ae[2]&&Ae[1]<=t&&t<=Ae[3]}function coordinateRelationship(Ae,e){const t=Ae[0],Oe=Ae[1],ke=Ae[2],Be=Ae[3],Ue=e[0],je=e[1];let We=Relationship.UNKNOWN;return Ue<t?We=We|Relationship.LEFT:Ue>ke&&(We=We|Relationship.RIGHT),je<Oe?We=We|Relationship.BELOW:je>Be&&(We=We|Relationship.ABOVE),We===Relationship.UNKNOWN&&(We=Relationship.INTERSECTING),We}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(Ae,e,t,Oe,ke){return ke?(ke[0]=Ae,ke[1]=e,ke[2]=t,ke[3]=Oe,ke):[Ae,e,t,Oe]}function createOrUpdateEmpty(Ae){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,Ae)}function createOrUpdateFromCoordinate(Ae,e){const t=Ae[0],Oe=Ae[1];return createOrUpdate$2(t,Oe,t,Oe,e)}function createOrUpdateFromFlatCoordinates(Ae,e,t,Oe,ke){const Be=createOrUpdateEmpty(ke);return extendFlatCoordinates(Be,Ae,e,t,Oe)}function equals$1(Ae,e){return Ae[0]==e[0]&&Ae[2]==e[2]&&Ae[1]==e[1]&&Ae[3]==e[3]}function extend$3(Ae,e){return e[0]<Ae[0]&&(Ae[0]=e[0]),e[2]>Ae[2]&&(Ae[2]=e[2]),e[1]<Ae[1]&&(Ae[1]=e[1]),e[3]>Ae[3]&&(Ae[3]=e[3]),Ae}function extendCoordinate(Ae,e){e[0]<Ae[0]&&(Ae[0]=e[0]),e[0]>Ae[2]&&(Ae[2]=e[0]),e[1]<Ae[1]&&(Ae[1]=e[1]),e[1]>Ae[3]&&(Ae[3]=e[1])}function extendFlatCoordinates(Ae,e,t,Oe,ke){for(;t<Oe;t+=ke)extendXY(Ae,e[t],e[t+1]);return Ae}function extendXY(Ae,e,t){Ae[0]=Math.min(Ae[0],e),Ae[1]=Math.min(Ae[1],t),Ae[2]=Math.max(Ae[2],e),Ae[3]=Math.max(Ae[3],t)}function forEachCorner(Ae,e){let t;return t=e(getBottomLeft(Ae)),t||(t=e(getBottomRight(Ae)),t)||(t=e(getTopRight(Ae)),t)||(t=e(getTopLeft(Ae)),t)?t:!1}function getArea$1(Ae){let e=0;return isEmpty(Ae)||(e=getWidth(Ae)*getHeight(Ae)),e}function getBottomLeft(Ae){return[Ae[0],Ae[1]]}function getBottomRight(Ae){return[Ae[2],Ae[1]]}function getCenter(Ae){return[(Ae[0]+Ae[2])/2,(Ae[1]+Ae[3])/2]}function getCorner(Ae,e){let t;if(e==="bottom-left")t=getBottomLeft(Ae);else if(e==="bottom-right")t=getBottomRight(Ae);else if(e==="top-left")t=getTopLeft(Ae);else if(e==="top-right")t=getTopRight(Ae);else throw new Error("Invalid corner");return t}function getForViewAndSize(Ae,e,t,Oe,ke){const[Be,Ue,je,We,Qe,Cn,An,En]=getRotatedViewport(Ae,e,t,Oe);return createOrUpdate$2(Math.min(Be,je,Qe,An),Math.min(Ue,We,Cn,En),Math.max(Be,je,Qe,An),Math.max(Ue,We,Cn,En),ke)}function getRotatedViewport(Ae,e,t,Oe){const ke=e*Oe[0]/2,Be=e*Oe[1]/2,Ue=Math.cos(t),je=Math.sin(t),We=ke*Ue,Qe=ke*je,Cn=Be*Ue,An=Be*je,En=Ae[0],Sn=Ae[1];return[En-We+An,Sn-Qe-Cn,En-We-An,Sn-Qe+Cn,En+We-An,Sn+Qe+Cn,En+We+An,Sn+Qe-Cn,En-We+An,Sn-Qe-Cn]}function getHeight(Ae){return Ae[3]-Ae[1]}function getIntersection(Ae,e,t){const Oe=t||createEmpty();return intersects$1(Ae,e)?(Ae[0]>e[0]?Oe[0]=Ae[0]:Oe[0]=e[0],Ae[1]>e[1]?Oe[1]=Ae[1]:Oe[1]=e[1],Ae[2]<e[2]?Oe[2]=Ae[2]:Oe[2]=e[2],Ae[3]<e[3]?Oe[3]=Ae[3]:Oe[3]=e[3]):createOrUpdateEmpty(Oe),Oe}function getTopLeft(Ae){return[Ae[0],Ae[3]]}function getTopRight(Ae){return[Ae[2],Ae[3]]}function getWidth(Ae){return Ae[2]-Ae[0]}function intersects$1(Ae,e){return Ae[0]<=e[2]&&Ae[2]>=e[0]&&Ae[1]<=e[3]&&Ae[3]>=e[1]}function isEmpty(Ae){return Ae[2]<Ae[0]||Ae[3]<Ae[1]}function returnOrUpdate(Ae,e){return e?(e[0]=Ae[0],e[1]=Ae[1],e[2]=Ae[2],e[3]=Ae[3],e):Ae}function scaleFromCenter(Ae,e){const t=(Ae[2]-Ae[0])/2*(e-1),Oe=(Ae[3]-Ae[1])/2*(e-1);Ae[0]-=t,Ae[2]+=t,Ae[1]-=Oe,Ae[3]+=Oe}function intersectsSegment(Ae,e,t){let Oe=!1;const ke=coordinateRelationship(Ae,e),Be=coordinateRelationship(Ae,t);if(ke===Relationship.INTERSECTING||Be===Relationship.INTERSECTING)Oe=!0;else{const Ue=Ae[0],je=Ae[1],We=Ae[2],Qe=Ae[3],Cn=e[0],An=e[1],En=t[0],Sn=t[1],Tn=(Sn-An)/(En-Cn);let Dn,ti;Be&Relationship.ABOVE&&!(ke&Relationship.ABOVE)&&(Dn=En-(Sn-Qe)/Tn,Oe=Dn>=Ue&&Dn<=We),!Oe&&Be&Relationship.RIGHT&&!(ke&Relationship.RIGHT)&&(ti=Sn-(En-We)*Tn,Oe=ti>=je&&ti<=Qe),!Oe&&Be&Relationship.BELOW&&!(ke&Relationship.BELOW)&&(Dn=En-(Sn-je)/Tn,Oe=Dn>=Ue&&Dn<=We),!Oe&&Be&Relationship.LEFT&&!(ke&Relationship.LEFT)&&(ti=Sn-(En-Ue)*Tn,Oe=ti>=je&&ti<=Qe)}return Oe}function applyTransform(Ae,e,t,Oe){if(isEmpty(Ae))return createOrUpdateEmpty(t);let ke=[];ke=[Ae[0],Ae[1],Ae[2],Ae[1],Ae[2],Ae[3],Ae[0],Ae[3]],e(ke,ke,2);const Be=[],Ue=[];for(let je=0,We=ke.length;je<We;je+=2)Be.push(ke[je]),Ue.push(ke[je+1]);return _boundingExtentXYs(Be,Ue,t)}function wrapX$2(Ae,e){const t=e.getExtent(),Oe=getCenter(Ae);if(e.canWrapX()&&(Oe[0]<t[0]||Oe[0]>=t[2])){const ke=getWidth(t),Ue=Math.floor((Oe[0]-t[0])/ke)*ke;Ae[0]-=Ue,Ae[2]-=Ue}return Ae}function wrapAndSliceX(Ae,e,t){if(e.canWrapX()){const Oe=e.getExtent();if(!isFinite(Ae[0])||!isFinite(Ae[2]))return[[Oe[0],Ae[1],Oe[2],Ae[3]]];wrapX$2(Ae,e);const ke=getWidth(Oe);if(getWidth(Ae)>ke&&!t)return[[Oe[0],Ae[1],Oe[2],Ae[3]]];if(Ae[0]<Oe[0])return[[Ae[0]+ke,Ae[1],Oe[2],Ae[3]],[Oe[0],Ae[1],Ae[2],Ae[3]]];if(Ae[2]>Oe[2])return[[Ae[0],Ae[1],Oe[2],Ae[3]],[Oe[0],Ae[1],Ae[2]-ke,Ae[3]]]}return[Ae]}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let Ae=!1;try{const e=Object.defineProperty({},"passive",{get:function(){Ae=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return Ae}();function createCanvasContext2D(Ae,e,t,Oe){let ke;return t&&t.length?ke=t.shift():WORKER_OFFSCREEN_CANVAS?ke=new OffscreenCanvas(Ae||300,e||300):ke=document.createElement("canvas"),Ae&&(ke.width=Ae),e&&(ke.height=e),ke.getContext("2d",Oe)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(Ae){const e=Ae.canvas;e.width=1,e.height=1,Ae.clearRect(0,0,1,1)}function outerWidth(Ae){let e=Ae.offsetWidth;const t=getComputedStyle(Ae);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(Ae){let e=Ae.offsetHeight;const t=getComputedStyle(Ae);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(Ae,e){const t=e.parentNode;t&&t.replaceChild(Ae,e)}function removeChildren(Ae){for(;Ae.lastChild;)Ae.lastChild.remove()}function replaceChildren(Ae,e){const t=Ae.childNodes;for(let Oe=0;;++Oe){const ke=t[Oe],Be=e[Oe];if(!ke&&!Be)break;if(ke!==Be){if(!ke){Ae.appendChild(Be);continue}if(!Be){Ae.removeChild(ke),--Oe;continue}Ae.insertBefore(Be,ke)}}}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const Oe=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?Oe.insertBefore(this.element,Oe.childNodes[0]||null):Oe.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$3.POSITION))return;const Oe=this.getRect(t.getTargetElement(),t.getSize()),ke=this.getElement(),Be=this.getRect(ke,[outerWidth(ke),outerHeight(ke)]);e=e||{};const Ue=e.margin===void 0?20:e.margin;if(!containsExtent(Oe,Be)){const je=Be[0]-Oe[0],We=Oe[2]-Be[2],Qe=Be[1]-Oe[1],Cn=Oe[3]-Be[3],An=[0,0];if(je<0?An[0]=je-Ue:We<0&&(An[0]=Math.abs(We)+Ue),Qe<0?An[1]=Qe-Ue:Cn<0&&(An[1]=Math.abs(Cn)+Ue),An[0]!==0||An[1]!==0){const En=t.getView().getCenterInternal(),Sn=t.getPixelFromCoordinateInternal(En);if(!Sn)return;const Tn=[Sn[0]+An[0],Sn[1]+An[1]],Dn=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(Tn),duration:Dn.duration,easing:Dn.easing})}}}getRect(e,t){const Oe=e.getBoundingClientRect(),ke=Oe.left+window.pageXOffset,Be=Oe.top+window.pageYOffset;return[ke,Be,ke+t[0],Be+t[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const Oe=e.getPixelFromCoordinate(t),ke=e.getSize();this.updateRenderedPosition(Oe,ke)}updateRenderedPosition(e,t){const Oe=this.element.style,ke=this.getOffset(),Be=this.getPositioning();this.setVisible(!0);const Ue=Math.round(e[0]+ke[0])+"px",je=Math.round(e[1]+ke[1])+"px";let We="0%",Qe="0%";Be=="bottom-right"||Be=="center-right"||Be=="top-right"?We="-100%":(Be=="bottom-center"||Be=="center-center"||Be=="top-center")&&(We="-50%"),Be=="bottom-left"||Be=="bottom-center"||Be=="bottom-right"?Qe="-100%":(Be=="center-left"||Be=="center-center"||Be=="center-right")&&(Qe="-50%");const Cn=`translate(${We}, ${Qe}) translate(${Ue}, ${je})`;this.rendered.transform_!=Cn&&(this.rendered.transform_=Cn,Oe.transform=Cn)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(Ae){return Math.pow(Ae,3)}function easeOut(Ae){return 1-easeIn(1-Ae)}function inAndOut(Ae){return 3*Ae*Ae-2*Ae*Ae*Ae}function linear(Ae){return Ae}class Tile extends Target{constructor(e,t,Oe){super(),Oe=Oe||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=Oe.transition===void 0?250:Oe.transition,this.transitionStarts_={},this.interpolate=!!Oe.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let Oe=this.transitionStarts_[e];if(!Oe)Oe=t,this.transitionStarts_[e]=Oe;else if(Oe===-1)return 1;const ke=t-Oe+1e3/60;return ke>=this.transition_?1:easeIn(ke/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}let VectorTile$1=class extends Tile{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Ue),this.extent=null,this.format_=ke,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Be,this.url_=Oe,this.key=Oe}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};class TileRange{constructor(e,t,Oe,ke){this.minX=e,this.maxX=t,this.minY=Oe,this.maxY=ke}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(Ae,e,t,Oe,ke){return ke!==void 0?(ke.minX=Ae,ke.maxX=e,ke.minY=t,ke.maxY=Oe,ke):new TileRange(Ae,e,t,Oe)}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function assert(Ae,e){if(!Ae)throw new Error(e)}function clamp(Ae,e,t){return Math.min(Math.max(Ae,e),t)}function squaredSegmentDistance(Ae,e,t,Oe,ke,Be){const Ue=ke-t,je=Be-Oe;if(Ue!==0||je!==0){const We=((Ae-t)*Ue+(e-Oe)*je)/(Ue*Ue+je*je);We>1?(t=ke,Oe=Be):We>0&&(t+=Ue*We,Oe+=je*We)}return squaredDistance$1(Ae,e,t,Oe)}function squaredDistance$1(Ae,e,t,Oe){const ke=t-Ae,Be=Oe-e;return ke*ke+Be*Be}function solveLinearSystem(Ae){const e=Ae.length;for(let Oe=0;Oe<e;Oe++){let ke=Oe,Be=Math.abs(Ae[Oe][Oe]);for(let je=Oe+1;je<e;je++){const We=Math.abs(Ae[je][Oe]);We>Be&&(Be=We,ke=je)}if(Be===0)return null;const Ue=Ae[ke];Ae[ke]=Ae[Oe],Ae[Oe]=Ue;for(let je=Oe+1;je<e;je++){const We=-Ae[je][Oe]/Ae[Oe][Oe];for(let Qe=Oe;Qe<e+1;Qe++)Oe==Qe?Ae[je][Qe]=0:Ae[je][Qe]+=We*Ae[Oe][Qe]}}const t=new Array(e);for(let Oe=e-1;Oe>=0;Oe--){t[Oe]=Ae[Oe][e]/Ae[Oe][Oe];for(let ke=Oe-1;ke>=0;ke--)Ae[ke][e]-=Ae[ke][Oe]*t[Oe]}return t}function toDegrees(Ae){return Ae*180/Math.PI}function toRadians(Ae){return Ae*Math.PI/180}function modulo(Ae,e){const t=Ae%e;return t*e<0?t+e:t}function lerp(Ae,e,t){return Ae+t*(e-Ae)}function toFixed(Ae,e){const t=Math.pow(10,e);return Math.round(Ae*t)/t}function round(Ae,e){return Math.round(toFixed(Ae,e))}function floor(Ae,e){return Math.floor(toFixed(Ae,e))}function ceil(Ae,e){return Math.ceil(toFixed(Ae,e))}function wrap(Ae,e,t){if(Ae>=e&&Ae<t)return Ae;const Oe=t-e;return((Ae-e)%Oe+Oe)%Oe+e}function createOrUpdate(Ae,e,t,Oe){return Oe!==void 0?(Oe[0]=Ae,Oe[1]=e,Oe[2]=t,Oe):[Ae,e,t]}function getKeyZXY(Ae,e,t){return Ae+"/"+e+"/"+t}function hash(Ae){return hashZXY(Ae[0],Ae[1],Ae[2])}function hashZXY(Ae,e,t){return(e<<Ae)+t}function withinExtentAndZ(Ae,e){const t=Ae[0],Oe=Ae[1],ke=Ae[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const Be=e.getFullTileRange(t);return Be?Be.containsXY(Oe,ke):!0}function forEach(Ae,e,t,Oe,ke){let Be;for(e+=Oe;e<t;e+=Oe)if(Be=ke(Ae.slice(e-Oe,e),Ae.slice(e,e+Oe)),Be)return Be;return!1}function linearRingContainsExtent(Ae,e,t,Oe,ke){return!forEachCorner(ke,function(Ue){return!linearRingContainsXY(Ae,e,t,Oe,Ue[0],Ue[1])})}function linearRingContainsXY(Ae,e,t,Oe,ke,Be){let Ue=0,je=Ae[t-Oe],We=Ae[t-Oe+1];for(;e<t;e+=Oe){const Qe=Ae[e],Cn=Ae[e+1];We<=Be?Cn>Be&&(Qe-je)*(Be-We)-(ke-je)*(Cn-We)>0&&Ue++:Cn<=Be&&(Qe-je)*(Be-We)-(ke-je)*(Cn-We)<0&&Ue--,je=Qe,We=Cn}return Ue!==0}function linearRingsContainsXY(Ae,e,t,Oe,ke,Be){if(t.length===0||!linearRingContainsXY(Ae,e,t[0],Oe,ke,Be))return!1;for(let Ue=1,je=t.length;Ue<je;++Ue)if(linearRingContainsXY(Ae,t[Ue-1],t[Ue],Oe,ke,Be))return!1;return!0}function linearRingssContainsXY(Ae,e,t,Oe,ke,Be){if(t.length===0)return!1;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue];if(linearRingsContainsXY(Ae,e,We,Oe,ke,Be))return!0;e=We[We.length-1]}return!1}function intersectsLineString(Ae,e,t,Oe,ke){const Be=extendFlatCoordinates(createEmpty(),Ae,e,t,Oe);return intersects$1(ke,Be)?containsExtent(ke,Be)||Be[0]>=ke[0]&&Be[2]<=ke[2]||Be[1]>=ke[1]&&Be[3]<=ke[3]?!0:forEach(Ae,e,t,Oe,function(Ue,je){return intersectsSegment(ke,Ue,je)}):!1}function intersectsLineStringArray(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){if(intersectsLineString(Ae,e,t[Be],Oe,ke))return!0;e=t[Be]}return!1}function intersectsLinearRing(Ae,e,t,Oe,ke){return!!(intersectsLineString(Ae,e,t,Oe,ke)||linearRingContainsXY(Ae,e,t,Oe,ke[0],ke[1])||linearRingContainsXY(Ae,e,t,Oe,ke[0],ke[3])||linearRingContainsXY(Ae,e,t,Oe,ke[2],ke[1])||linearRingContainsXY(Ae,e,t,Oe,ke[2],ke[3]))}function intersectsLinearRingArray(Ae,e,t,Oe,ke){if(!intersectsLinearRing(Ae,e,t[0],Oe,ke))return!1;if(t.length===1)return!0;for(let Be=1,Ue=t.length;Be<Ue;++Be)if(linearRingContainsExtent(Ae,t[Be-1],t[Be],Oe,ke)&&!intersectsLineString(Ae,t[Be-1],t[Be],Oe,ke))return!1;return!0}function intersectsLinearRingMultiArray(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];if(intersectsLinearRingArray(Ae,e,je,Oe,ke))return!0;e=je[je.length-1]}return!1}function hasArea(Ae){return Ae[0]>0&&Ae[1]>0}function scale$4(Ae,e,t){return t===void 0&&(t=[0,0]),t[0]=Ae[0]*e+.5|0,t[1]=Ae[1]*e+.5|0,t}function toSize(Ae,e){return Array.isArray(Ae)?Ae:(e===void 0?e=[Ae,Ae]:(e[0]=Ae,e[1]=Ae),e)}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(ke,Be)=>Be-ke),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let ke=0,Be=this.resolutions_.length-1;ke<Be;++ke)if(!t)t=this.resolutions_[ke]/this.resolutions_[ke+1];else if(this.resolutions_[ke]/this.resolutions_[ke+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const Oe=e.extent;Oe!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(Oe)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=Oe!==void 0?Oe:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((ke,Be)=>{const Ue=new TileRange(Math.min(0,ke[0]),Math.max(ke[0]-1,-1),Math.min(0,ke[1]),Math.max(ke[1]-1,-1));if(Oe){const je=this.getTileRangeForExtentAndZ(Oe,Be);Ue.minX=Math.max(je.minX,Ue.minX),Ue.maxX=Math.min(je.maxX,Ue.maxX),Ue.minY=Math.max(je.minY,Ue.minY),Ue.maxY=Math.min(je.maxY,Ue.maxY)}return Ue}):Oe&&this.calculateTileRanges_(Oe)}forEachTileCoord(e,t,Oe){const ke=this.getTileRangeForExtentAndZ(e,t);for(let Be=ke.minX,Ue=ke.maxX;Be<=Ue;++Be)for(let je=ke.minY,We=ke.maxY;je<=We;++je)Oe([t,Be,je])}forEachTileCoordParentTileRange(e,t,Oe,ke){let Be,Ue,je,We=null,Qe=e[0]-1;for(this.zoomFactor_===2?(Ue=e[1],je=e[2]):We=this.getTileCoordExtent(e,ke);Qe>=this.minZoom;){if(Ue!==void 0&&je!==void 0?(Ue=Math.floor(Ue/2),je=Math.floor(je/2),Be=createOrUpdate$1(Ue,Ue,je,je,Oe)):Be=this.getTileRangeForExtentAndZ(We,Qe,Oe),t(Qe,Be))return!0;--Qe}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,Oe){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Be=e[1]*2,Ue=e[2]*2;return createOrUpdate$1(Be,Be+1,Ue,Ue+1,t)}const ke=this.getTileCoordExtent(e,Oe||this.tmpExtent_);return this.getTileRangeForExtentAndZ(ke,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,Oe){if(t>this.maxZoom||t<this.minZoom)return null;const ke=e[0],Be=e[1],Ue=e[2];if(t===ke)return createOrUpdate$1(Be,Ue,Be,Ue,Oe);if(this.zoomFactor_){const We=Math.pow(this.zoomFactor_,t-ke),Qe=Math.floor(Be*We),Cn=Math.floor(Ue*We);if(t<ke)return createOrUpdate$1(Qe,Qe,Cn,Cn,Oe);const An=Math.floor(We*(Be+1))-1,En=Math.floor(We*(Ue+1))-1;return createOrUpdate$1(Qe,An,Cn,En,Oe)}const je=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(je,t,Oe)}getTileRangeForExtentAndZ(e,t,Oe){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const ke=tmpTileCoord[1],Be=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const Ue=tmpTileCoord[1],je=tmpTileCoord[2];return createOrUpdate$1(ke,Ue,Be,je,Oe)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),Oe=this.getResolution(e[0]),ke=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*ke[0]*Oe,t[1]-(e[2]+.5)*ke[1]*Oe]}getTileCoordExtent(e,t){const Oe=this.getOrigin(e[0]),ke=this.getResolution(e[0]),Be=toSize(this.getTileSize(e[0]),this.tmpSize_),Ue=Oe[0]+e[1]*Be[0]*ke,je=Oe[1]-(e[2]+1)*Be[1]*ke,We=Ue+Be[0]*ke,Qe=je+Be[1]*ke;return createOrUpdate$2(Ue,je,We,Qe,t)}getTileCoordForCoordAndResolution(e,t,Oe){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,Oe)}getTileCoordForXYAndResolution_(e,t,Oe,ke,Be){const Ue=this.getZForResolution(Oe),je=Oe/this.getResolution(Ue),We=this.getOrigin(Ue),Qe=toSize(this.getTileSize(Ue),this.tmpSize_);let Cn=je*(e-We[0])/Oe/Qe[0],An=je*(We[1]-t)/Oe/Qe[1];return ke?(Cn=ceil(Cn,DECIMALS$1)-1,An=ceil(An,DECIMALS$1)-1):(Cn=floor(Cn,DECIMALS$1),An=floor(An,DECIMALS$1)),createOrUpdate(Ue,Cn,An,Be)}getTileCoordForXYAndZ_(e,t,Oe,ke,Be){const Ue=this.getOrigin(Oe),je=this.getResolution(Oe),We=toSize(this.getTileSize(Oe),this.tmpSize_);let Qe=(e-Ue[0])/je/We[0],Cn=(Ue[1]-t)/je/We[1];return ke?(Qe=ceil(Qe,DECIMALS$1)-1,Cn=ceil(Cn,DECIMALS$1)-1):(Qe=floor(Qe,DECIMALS$1),Cn=floor(Cn,DECIMALS$1)),createOrUpdate(Oe,Qe,Cn,Be)}getTileCoordForCoordAndZ(e,t,Oe){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,Oe)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const Oe=linearFindNearest(this.resolutions_,e,t||0);return clamp(Oe,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,Oe=new Array(t);for(let ke=this.minZoom;ke<t;++ke)Oe[ke]=this.getTileRangeForExtentAndZ(e,ke);this.fullTileRanges_=Oe}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,Oe){return t/Math.cosh(Oe[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(Ae,e,t,Oe){const ke=Ae.length;t=t>1?t:2,Oe=Oe??t,e===void 0&&(t>2?e=Ae.slice():e=new Array(ke));for(let Be=0;Be<ke;Be+=Oe){e[Be]=HALF_SIZE*Ae[Be]/180;let Ue=RADIUS$1*Math.log(Math.tan(Math.PI*(+Ae[Be+1]+90)/360));Ue>MAX_SAFE_Y?Ue=MAX_SAFE_Y:Ue<-MAX_SAFE_Y&&(Ue=-MAX_SAFE_Y),e[Be+1]=Ue}return e}function toEPSG4326(Ae,e,t,Oe){const ke=Ae.length;t=t>1?t:2,Oe=Oe??t,e===void 0&&(t>2?e=Ae.slice():e=new Array(ke));for(let Be=0;Be<ke;Be+=Oe)e[Be]=180*Ae[Be]/HALF_SIZE,e[Be+1]=360*Math.atan(Math.exp(Ae[Be+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(Ae){return cache$1[Ae]||cache$1[Ae.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(Ae,e){cache$1[Ae]=e}let transforms={};function add$2(Ae,e,t){const Oe=Ae.getCode(),ke=e.getCode();Oe in transforms||(transforms[Oe]={}),transforms[Oe][ke]=t}function get$4(Ae,e){return Ae in transforms&&e in transforms[Ae]?transforms[Ae][e]:null}function padNumber(Ae,e,t){const Oe=""+Ae;let ke=Oe.indexOf(".");return ke=ke===-1?Oe.length:ke,ke>e?Oe:new Array(1+e-ke).join("0")+Oe}function compareVersions(Ae,e){const t=(""+Ae).split("."),Oe=(""+e).split(".");for(let ke=0;ke<Math.max(t.length,Oe.length);ke++){const Be=parseInt(t[ke]||"0",10),Ue=parseInt(Oe[ke]||"0",10);if(Be>Ue)return 1;if(Ue>Be)return-1}return 0}function add$1(Ae,e){return Ae[0]+=+e[0],Ae[1]+=+e[1],Ae}function closestOnSegment(Ae,e){const t=Ae[0],Oe=Ae[1],ke=e[0],Be=e[1],Ue=ke[0],je=ke[1],We=Be[0],Qe=Be[1],Cn=We-Ue,An=Qe-je,En=Cn===0&&An===0?0:(Cn*(t-Ue)+An*(Oe-je))/(Cn*Cn+An*An||0);let Sn,Tn;return En<=0?(Sn=Ue,Tn=je):En>=1?(Sn=We,Tn=Qe):(Sn=Ue+En*Cn,Tn=je+En*An),[Sn,Tn]}function equals(Ae,e){let t=!0;for(let Oe=Ae.length-1;Oe>=0;--Oe)if(Ae[Oe]!=e[Oe]){t=!1;break}return t}function rotate$1(Ae,e){const t=Math.cos(e),Oe=Math.sin(e),ke=Ae[0]*t-Ae[1]*Oe,Be=Ae[1]*t+Ae[0]*Oe;return Ae[0]=ke,Ae[1]=Be,Ae}function scale$3(Ae,e){return Ae[0]*=e,Ae[1]*=e,Ae}function squaredDistance(Ae,e){const t=Ae[0]-e[0],Oe=Ae[1]-e[1];return t*t+Oe*Oe}function distance(Ae,e){return Math.sqrt(squaredDistance(Ae,e))}function squaredDistanceToSegment(Ae,e){return squaredDistance(Ae,closestOnSegment(Ae,e))}function wrapX$1(Ae,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),Oe=getWorldsAway(Ae,e,t);Oe&&(Ae[0]-=Oe*t)}return Ae}function getWorldsAway(Ae,e,t){const Oe=e.getExtent();let ke=0;return e.canWrapX()&&(Ae[0]<Oe[0]||Ae[0]>Oe[2])&&(t=t||getWidth(Oe),ke=Math.floor((Ae[0]-Oe[0])/t)),ke}const DEFAULT_RADIUS=63710088e-1;function getDistance(Ae,e,t){t=t||DEFAULT_RADIUS;const Oe=toRadians(Ae[1]),ke=toRadians(e[1]),Be=(ke-Oe)/2,Ue=toRadians(e[0]-Ae[0])/2,je=Math.sin(Be)*Math.sin(Be)+Math.sin(Ue)*Math.sin(Ue)*Math.cos(Oe)*Math.cos(ke);return 2*t*Math.atan2(Math.sqrt(je),Math.sqrt(1-je))}function getAreaInternal(Ae,e){let t=0;const Oe=Ae.length;let ke=Ae[Oe-1][0],Be=Ae[Oe-1][1];for(let Ue=0;Ue<Oe;Ue++){const je=Ae[Ue][0],We=Ae[Ue][1];t+=toRadians(je-ke)*(2+Math.sin(toRadians(Be))+Math.sin(toRadians(We))),ke=je,Be=We}return t*e*e/2}function getArea(Ae,e){e=e||{};const t=e.radius||DEFAULT_RADIUS,Oe=e.projection||"EPSG:3857",ke=Ae.getType();ke!=="GeometryCollection"&&(Ae=Ae.clone().transform(Oe,"EPSG:4326"));let Be=0,Ue,je,We,Qe,Cn,An;switch(ke){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(Ue=Ae.getCoordinates(),Be=Math.abs(getAreaInternal(Ue[0],t)),We=1,Qe=Ue.length;We<Qe;++We)Be-=Math.abs(getAreaInternal(Ue[We],t));break}case"MultiPolygon":{for(Ue=Ae.getCoordinates(),We=0,Qe=Ue.length;We<Qe;++We)for(je=Ue[We],Be+=Math.abs(getAreaInternal(je[0],t)),Cn=1,An=je.length;Cn<An;++Cn)Be-=Math.abs(getAreaInternal(je[Cn],t));break}case"GeometryCollection":{const En=Ae.getGeometries();for(We=0,Qe=En.length;We<Qe;++We)Be+=getArea(En[We],e);break}default:throw new Error("Unsupported geometry type: "+ke)}return Be}const K0=.9996,E$1=.00669438,E2=E$1*E$1,E3=E2*E$1,E_P2=E$1/(1-E$1),SQRT_E=Math.sqrt(1-E$1),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E$1/4-3*E2/64-5*E3/256,M2=3*E$1/8+3*E2/32+45*E3/1024,M3=15*E2/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R$2=6378137;function toLonLat$1(Ae,e,t){const Oe=Ae-5e5,Ue=(t.north?e:e-1e7)/K0/(R$2*M1),je=Ue+P2*Math.sin(2*Ue)+P3*Math.sin(4*Ue)+P4*Math.sin(6*Ue)+P5*Math.sin(8*Ue),We=Math.sin(je),Qe=We*We,Cn=Math.cos(je),An=We/Cn,En=An*An,Sn=En*En,Tn=1-E$1*Qe,Dn=Math.sqrt(1-E$1*Qe),ti=R$2/Dn,ni=(1-E$1)/Tn,ii=E_P2*Cn**2,si=ii*ii,oi=Oe/(ti*K0),ci=oi*oi,Pi=ci*oi,Ai=Pi*oi,fi=Ai*oi,Oi=fi*oi,Ni=je-An/ni*(ci/2-Ai/24*(5+3*En+10*ii-4*si-9*E_P2))+Oi/720*(61+90*En+298*ii+45*Sn-252*E_P2-3*si);let ui=(oi-Pi/6*(1+2*En+ii)+fi/120*(5-2*ii+28*En-3*si+8*E_P2+24*Sn))/Cn;return ui=wrap(ui+toRadians(zoneToCentralLongitude(t.number)),-Math.PI,Math.PI),[toDegrees(ui),toDegrees(Ni)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(Ae,e,t){Ae=wrap(Ae,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const Oe=toRadians(e),ke=Math.sin(Oe),Be=Math.cos(Oe),Ue=ke/Be,je=Ue*Ue,We=je*je,Qe=toRadians(Ae),Cn=zoneToCentralLongitude(t.number),An=toRadians(Cn),En=R$2/Math.sqrt(1-E$1*ke**2),Sn=E_P2*Be**2,Tn=Be*wrap(Qe-An,-Math.PI,Math.PI),Dn=Tn*Tn,ti=Dn*Tn,ni=ti*Tn,ii=ni*Tn,si=ii*Tn,oi=R$2*(M1*Oe-M2*Math.sin(2*Oe)+M3*Math.sin(4*Oe)-M4*Math.sin(6*Oe)),ci=K0*En*(Tn+ti/6*(1-je+Sn)+ii/120*(5-18*je+We+72*Sn-58*E_P2))+5e5;let Pi=K0*(oi+En*Ue*(Dn/2+ni/24*(5-je+9*Sn+4*Sn**2)+si/720*(61-58*je+We+600*Sn-330*E_P2)));return t.north||(Pi+=1e7),[ci,Pi]}function zoneToCentralLongitude(Ae){return(Ae-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(Ae){let e=0;for(const ke of epsgRegExes){const Be=Ae.match(ke);if(Be){e=parseInt(Be[1]);break}}if(!e)return null;let t=0,Oe=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(Oe=!0,t=e-32600),t?{number:t,north:Oe}:null}function makeTransformFunction(Ae,e){return function(t,Oe,ke,Be){const Ue=t.length;ke=ke>1?ke:2,Be=Be??ke,Oe||(ke>2?Oe=t.slice():Oe=new Array(Ue));for(let je=0;je<Ue;je+=Be){const We=t[je],Qe=t[je+1],Cn=Ae(We,Qe,e);Oe[je]=Cn[0],Oe[je+1]=Cn[1]}return Oe}}function makeProjection(Ae){return zoneFromCode(Ae)?new Projection$1({code:Ae,units:"m"}):null}function makeTransforms(Ae){const e=zoneFromCode(Ae.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat$1,e)}:null}function warn(...Ae){console.warn(...Ae)}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(Ae){showCoordinateWarning=!1}function cloneTransform(Ae,e){if(e!==void 0){for(let t=0,Oe=Ae.length;t<Oe;++t)e[t]=Ae[t];e=e}else e=Ae.slice();return e}function addProjection(Ae){add$3(Ae.getCode(),Ae),add$2(Ae,Ae,cloneTransform)}function addProjections(Ae){Ae.forEach(addProjection)}function get$3(Ae){if(typeof Ae!="string")return Ae;const e=get$5(Ae);if(e)return e;for(const t of projectionFactories){const Oe=t(Ae);if(Oe)return Oe}return null}function getPointResolution(Ae,e,t,Oe){Ae=get$3(Ae);let ke;const Be=Ae.getPointResolutionFunc();if(Be){if(ke=Be(e,t),Oe&&Oe!==Ae.getUnits()){const Ue=Ae.getMetersPerUnit();Ue&&(ke=ke*Ue/METERS_PER_UNIT$1[Oe])}}else{const Ue=Ae.getUnits();if(Ue=="degrees"&&!Oe||Oe=="degrees")ke=e;else{const je=getTransformFromProjections(Ae,get$3("EPSG:4326"));if(!je&&Ue!=="degrees")ke=e*Ae.getMetersPerUnit();else{let Qe=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];Qe=je(Qe,Qe,2);const Cn=getDistance(Qe.slice(0,2),Qe.slice(2,4)),An=getDistance(Qe.slice(4,6),Qe.slice(6,8));ke=(Cn+An)/2}const We=Oe?METERS_PER_UNIT$1[Oe]:Ae.getMetersPerUnit();We!==void 0&&(ke/=We)}}return ke}function addEquivalentProjections(Ae){addProjections(Ae),Ae.forEach(function(e){Ae.forEach(function(t){e!==t&&add$2(e,t,cloneTransform)})})}function addEquivalentTransforms(Ae,e,t,Oe){Ae.forEach(function(ke){e.forEach(function(Be){add$2(ke,Be,t),add$2(Be,ke,Oe)})})}function createProjection(Ae,e){return Ae?typeof Ae=="string"?get$3(Ae):Ae:get$3(e)}function createTransformFromCoordinateTransform(Ae){return function(e,t,Oe,ke){const Be=e.length;Oe=Oe!==void 0?Oe:2,ke=ke??Oe,t=t!==void 0?t:new Array(Be);for(let Ue=0;Ue<Be;Ue+=ke){const je=Ae(e.slice(Ue,Ue+Oe)),We=je.length;for(let Qe=0,Cn=ke;Qe<Cn;++Qe)t[Ue+Qe]=Qe>=We?e[Ue+Qe]:je[Qe]}return t}}function addCoordinateTransforms(Ae,e,t,Oe){const ke=get$3(Ae),Be=get$3(e);add$2(ke,Be,createTransformFromCoordinateTransform(t)),add$2(Be,ke,createTransformFromCoordinateTransform(Oe))}function fromLonLat(Ae,e){return disableCoordinateWarning(),transform$1(Ae,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(Ae,e){const t=transform$1(Ae,"EPSG:3857","EPSG:4326"),Oe=t[0];return(Oe<-180||Oe>180)&&(t[0]=modulo(Oe+180,360)-180),t}function equivalent(Ae,e){if(Ae===e)return!0;const t=Ae.getUnits()===e.getUnits();return(Ae.getCode()===e.getCode()||getTransformFromProjections(Ae,e)===cloneTransform)&&t}function getTransformFromProjections(Ae,e){const t=Ae.getCode(),Oe=e.getCode();let ke=get$4(t,Oe);if(ke)return ke;let Be=null,Ue=null;for(const We of transformFactories)Be||(Be=We(Ae)),Ue||(Ue=We(e));if(!Be&&!Ue)return null;const je="EPSG:4326";if(Ue)if(Be)ke=composeTransformFuncs(Be.inverse,Ue.forward);else{const We=get$4(t,je);We&&(ke=composeTransformFuncs(We,Ue.forward))}else{const We=get$4(je,Oe);We&&(ke=composeTransformFuncs(Be.inverse,We))}return ke&&(addProjection(Ae),addProjection(e),add$2(Ae,e,ke)),ke}function composeTransformFuncs(Ae,e){return function(t,Oe,ke,Be){return Oe=Ae(t,Oe,ke,Be),e(Oe,Oe,ke,Be)}}function getTransform(Ae,e){const t=get$3(Ae),Oe=get$3(e);return getTransformFromProjections(t,Oe)}function transform$1(Ae,e,t){const Oe=getTransform(e,t);if(!Oe){const ke=get$3(e).getCode(),Be=get$3(t).getCode();throw new Error(`No transform available between ${ke} and ${Be}`)}return Oe(Ae,void 0,Ae.length)}function transformExtent(Ae,e,t,Oe){const ke=getTransform(e,t);return applyTransform(Ae,ke,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(Ae,e){return Ae}function fromUserCoordinate(Ae,e){return showCoordinateWarning&&!equals(Ae,[0,0])&&Ae[0]>=-180&&Ae[0]<=180&&Ae[1]>=-90&&Ae[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Ae}function toUserExtent(Ae,e){return Ae}function fromUserExtent(Ae,e){return Ae}function fromUserResolution(Ae,e){return Ae}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(Oe,ke){t.viewResolver=Oe,t.viewRejector=ke})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(Ae){return Ae?typeof Ae=="function"?Ae:(Array.isArray(Ae)||(Ae=[Ae]),e=>Ae):null}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(Ae){let e=Ae.getDefaultTileGrid();return e||(e=createForProjection(Ae),Ae.setDefaultTileGrid(e)),e}function wrapX(Ae,e,t){const Oe=e[0],ke=Ae.getTileCoordCenter(e),Be=extentFromProjection(t);if(!containsCoordinate(Be,ke)){const Ue=getWidth(Be),je=Math.ceil((Be[0]-ke[0])/Ue);return ke[0]+=Ue*je,Ae.getTileCoordForCoordAndZ(ke,Oe)}return e}function createForExtent(Ae,e,t,Oe){Oe=Oe!==void 0?Oe:"top-left";const ke=resolutionsFromExtent(Ae,e,t);return new TileGrid({extent:Ae,origin:getCorner(Ae,Oe),resolutions:ke,tileSize:t})}function createXYZ(Ae){const e=Ae||{},t=e.extent||get$3("EPSG:3857").getExtent(),Oe={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(Oe)}function resolutionsFromExtent(Ae,e,t,Oe){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const ke=getHeight(Ae),Be=getWidth(Ae);Oe=Oe>0?Oe:Math.max(Be/t[0],ke/t[1]);const Ue=e+1,je=new Array(Ue);for(let We=0;We<Ue;++We)je[We]=Oe/Math.pow(2,We);return je}function createForProjection(Ae,e,t,Oe){const ke=extentFromProjection(Ae);return createForExtent(ke,e,t,Oe)}function extentFromProjection(Ae){Ae=get$3(Ae);let e=Ae.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/Ae.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,Oe,ke,Be){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,Oe){const ke=this.getTileGridForProjection(Oe),Be=this.getTilePixelRatio(t),Ue=toSize(ke.getTileSize(e),this.tmpSize);return Be==1?Ue:scale$4(Ue,Be,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const Oe=t!==void 0?t:this.getProjection(),ke=t!==void 0?this.getTileGridForProjection(Oe):this.tileGrid||this.getTileGridForProjection(Oe);return this.getWrapX()&&Oe.isGlobal()&&(e=wrapX(ke,e,Oe)),withinExtentAndZ(e,ke)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}function appendParams(Ae,e){const t=[];Object.keys(e).forEach(function(ke){e[ke]!==null&&e[ke]!==void 0&&t.push(ke+"="+encodeURIComponent(e[ke]))});const Oe=t.join("&");return Ae=Ae.replace(/[?&]$/,""),Ae+=Ae.includes("?")?"&":"?",Ae+Oe}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(Ae,e,t,Oe,ke){return Ae.replace(zRegEx,e.toString()).replace(xRegEx,t.toString()).replace(yRegEx,Oe.toString()).replace(dashYRegEx,function(){if(ke===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(ke-Oe).toString()})}function expandUrl(Ae){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(Ae);if(t){const Oe=t[1].charCodeAt(0),ke=t[2].charCodeAt(0);let Be;for(Be=Oe;Be<=ke;++Be)e.push(Ae.replace(t[0],String.fromCharCode(Be)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(Ae),t){const Oe=parseInt(t[2],10);for(let ke=parseInt(t[1],10);ke<=Oe;ke++)e.push(Ae.replace(t[0],ke.toString()));return e}return e.push(Ae),e}function createFromTemplate(Ae,e){return function(t,Oe,ke){if(!t)return;let Be;const Ue=t[0];if(e){const je=e.getFullTileRange(Ue);je&&(Be=je.getHeight()-1)}return renderXYZTemplate(Ae,Ue,t[1],t[2],Be)}}function createFromTemplates(Ae,e){const t=Ae.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=createFromTemplate(Ae[ke],e);return createFromTileUrlFunctions(Oe)}function createFromTileUrlFunctions(Ae){return Ae.length===1?Ae[0]:function(e,t,Oe){if(!e)return;const ke=hash(e),Be=modulo(ke,Ae.length);return Ae[Be](e,t,Oe)}}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,Oe=getUid(t),ke=t.getState();let Be;ke==TileState.LOADING?(this.tileLoadingKeys_[Oe]=!0,Be=TileEventType.TILELOADSTART):Oe in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[Oe],Be=ke==TileState.ERROR?TileEventType.TILELOADERROR:ke==TileState.LOADED?TileEventType.TILELOADEND:void 0),Be!=null&&this.dispatchEvent(new TileSourceEvent(Be,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,Oe){}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,t,Oe,ke,Be){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=ke.bind(void 0,this),this.removeSourceTiles_=Be,this.wrappedTileCoord=Oe}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool$2)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool$2.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let withCredentials=!1;function loadFeaturesXhr(Ae,e,t,Oe,ke,Be,Ue){const je=new XMLHttpRequest;je.open("GET",typeof Ae=="function"?Ae(t,Oe,ke):Ae,!0),e.getType()=="arraybuffer"&&(je.responseType="arraybuffer"),je.withCredentials=withCredentials,je.onload=function(We){if(!je.status||je.status>=200&&je.status<300){const Qe=e.getType();try{let Cn;Qe=="text"||Qe=="json"?Cn=je.responseText:Qe=="xml"?Cn=je.responseXML||je.responseText:Qe=="arraybuffer"&&(Cn=je.response),Cn?Be(e.readFeatures(Cn,{extent:t,featureProjection:ke}),e.readProjection(Cn)):Ue()}catch{Ue()}}else Ue()},je.onerror=Ue,je.send()}function xhr(Ae,e){return function(t,Oe,ke,Be,Ue){const je=this;loadFeaturesXhr(Ae,e,t,Oe,ke,function(We,Qe){je.addFeatures(We),Be!==void 0&&Be(We)},Ue||VOID)}}class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",Oe=e.extent||extentFromProjection(t),ke=e.tileGrid||createXYZ({extent:Oe,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:ke,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,Oe){if(Oe.getState()===TileState.IDLE){Oe.setState(TileState.LOADING);const ke=Oe.wrappedTileCoord,Be=this.getTileGridForProjection(t),Ue=Be.getTileCoordExtent(ke),je=ke[0],We=Be.getResolution(je);buffer(Ue,-We,Ue);const Qe=this.tileGrid,Cn=Qe.getExtent();Cn&&getIntersection(Ue,Cn,Ue);const An=Qe.getZForResolution(We,this.zDirection);Qe.forEachTileCoord(Ue,An,En=>{const Sn=this.tileUrlFunction(En,e,t);this.sourceTiles_[Sn]||(this.sourceTiles_[Sn]=new this.tileClass(En,Sn?TileState.IDLE:TileState.EMPTY,Sn,this.format_,this.tileLoadFunction));const Tn=this.sourceTiles_[Sn];Oe.sourceTiles.push(Tn),this.tileKeysBySourceTileUrl_[Sn]||(this.tileKeysBySourceTileUrl_[Sn]=[]),this.tileKeysBySourceTileUrl_[Sn].push(Oe.getKey());const Dn=Tn.getState();if(Dn<TileState.LOADED){const ti=ni=>{this.handleTileChange(ni);const ii=Tn.getState();if(ii===TileState.LOADED||ii===TileState.ERROR){const si=Tn.getKey();si in Oe.errorTileKeys?Tn.getState()===TileState.LOADED&&delete Oe.errorTileKeys[si]:Oe.loadingSourceTiles--,ii===TileState.ERROR?Oe.errorTileKeys[si]=!0:Tn.removeEventListener(EventType.CHANGE,ti),Oe.loadingSourceTiles===0&&Oe.setState(isEmpty$1(Oe.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};Tn.addEventListener(EventType.CHANGE,ti),Oe.loadingSourceTiles++}Dn===TileState.IDLE&&(Tn.extent=Qe.getTileCoordExtent(En),Tn.projection=t,Tn.resolution=Qe.getResolution(En[0]),Tn.load())}),Oe.loadingSourceTiles||Oe.setState(Oe.sourceTiles.some(En=>En.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return Oe.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let Oe=0,ke=t.length;Oe<ke;++Oe){const Be=t[Oe].getTileUrl(),Ue=this.getKey();if(!this.tileKeysBySourceTileUrl_[Be])return;const je=this.tileKeysBySourceTileUrl_[Be][Ue];je!==-1&&(this.tileKeysBySourceTileUrl_[Be].splice(je,1),this.tileKeysBySourceTileUrl_[Be].length===0&&(delete this.tileKeysBySourceTileUrl_[Be],delete this.sourceTiles_[Be]))}}getTile(e,t,Oe,ke,Be){const Ue=[e,t,Oe];let je=this.getTileCoordForTileUrlFunction(Ue,Be);const We=this.getTileGrid().getExtent(),Qe=this.getTileGridForProjection(Be);if(je&&We){const En=Qe.getTileCoordExtent(je);buffer(En,-Qe.getResolution(e),En),intersects$1(We,En)||(je=null)}let Cn=!0;if(je!==null){const En=this.tileGrid,Sn=Qe.getResolution(e),Tn=En.getZForResolution(Sn,1),Dn=Qe.getTileCoordExtent(je);buffer(Dn,-Sn,Dn),En.forEachTileCoord(Dn,Tn,ti=>{Cn=Cn&&!this.tileUrlFunction(ti,ke,Be)})}const An=new VectorRenderTile(Ue,Cn?TileState.EMPTY:TileState.IDLE,je,this.getSourceTiles.bind(this,ke,Be),this.removeSourceTiles.bind(this));return An.key=this.getKey(),An}getTileGridForProjection(e){const t=e.getCode();let Oe=this.tileGrids_[t];if(!Oe){const ke=this.tileGrid,Be=ke.getResolutions().slice(),Ue=Be.map(function(Qe,Cn){return ke.getOrigin(Cn)}),je=Be.map(function(Qe,Cn){return ke.getTileSize(Cn)}),We=DEFAULT_MAX_ZOOM+1;for(let Qe=Be.length;Qe<We;++Qe)Be.push(Be[Qe-1]/2),Ue.push(Ue[Qe-1]),je.push(je[Qe-1]);Oe=new TileGrid({extent:ke.getExtent(),origins:Ue,resolutions:Be,tileSizes:je}),this.tileGrids_[t]=Oe}return Oe}getTilePixelRatio(e){return e}getTilePixelSize(e,t,Oe){const ke=this.getTileGridForProjection(Oe),Be=toSize(ke.getTileSize(e),this.tmpSize);return[Math.round(Be[0]*t),Math.round(Be[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(Ae,e){Ae.setLoader(function(t,Oe,ke){loadFeaturesXhr(e,Ae.getFormat(),t,Oe,ke,Ae.onLoad.bind(Ae),Ae.onError.bind(Ae))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.element=t,this.index=Oe}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let Oe=0,ke=this.array_.length;Oe<ke;++Oe)this.assertUnique_(this.array_[Oe],Oe);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,Oe=e.length;t<Oe;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)e(t[Oe],Oe,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)if(t[Oe]===e)return this.removeAt(Oe)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const Oe=this.getLength();if(e>=Oe){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const ke=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,ke,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,t){for(let Oe=0,ke=this.array_.length;Oe<ke;++Oe)if(this.array_[Oe]===e&&Oe!==t)throw new Error("Duplicate item added to a unique collection")}}function quickselect(Ae,e,t=0,Oe=Ae.length-1,ke=defaultCompare){for(;Oe>t;){if(Oe-t>600){const We=Oe-t+1,Qe=e-t+1,Cn=Math.log(We),An=.5*Math.exp(2*Cn/3),En=.5*Math.sqrt(Cn*An*(We-An)/We)*(Qe-We/2<0?-1:1),Sn=Math.max(t,Math.floor(e-Qe*An/We+En)),Tn=Math.min(Oe,Math.floor(e+(We-Qe)*An/We+En));quickselect(Ae,e,Sn,Tn,ke)}const Be=Ae[e];let Ue=t,je=Oe;for(swap(Ae,t,e),ke(Ae[Oe],Be)>0&&swap(Ae,t,Oe);Ue<je;){for(swap(Ae,Ue,je),Ue++,je--;ke(Ae[Ue],Be)<0;)Ue++;for(;ke(Ae[je],Be)>0;)je--}ke(Ae[t],Be)===0?swap(Ae,t,je):(je++,swap(Ae,je,Oe)),je<=e&&(t=je+1),e<=je&&(Oe=je-1)}}function swap(Ae,e,t){const Oe=Ae[e];Ae[e]=Ae[t],Ae[t]=Oe}function defaultCompare(Ae,e){return Ae<e?-1:Ae>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const Oe=[];if(!intersects(e,t))return Oe;const ke=this.toBBox,Be=[];for(;t;){for(let Ue=0;Ue<t.children.length;Ue++){const je=t.children[Ue],We=t.leaf?ke(je):je;intersects(e,We)&&(t.leaf?Oe.push(je):contains(e,We)?this._all(je,Oe):Be.push(je))}t=Be.pop()}return Oe}collides(e){let t=this.data;if(!intersects(e,t))return!1;const Oe=[];for(;t;){for(let ke=0;ke<t.children.length;ke++){const Be=t.children[ke],Ue=t.leaf?this.toBBox(Be):Be;if(intersects(e,Ue)){if(t.leaf||contains(e,Ue))return!0;Oe.push(Be)}}t=Oe.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let Oe=0;Oe<e.length;Oe++)this.insert(e[Oe]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const Oe=this.data;this.data=t,t=Oe}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let Oe=this.data;const ke=this.toBBox(e),Be=[],Ue=[];let je,We,Qe;for(;Oe||Be.length;){if(Oe||(Oe=Be.pop(),We=Be[Be.length-1],je=Ue.pop(),Qe=!0),Oe.leaf){const Cn=findItem(e,Oe.children,t);if(Cn!==-1)return Oe.children.splice(Cn,1),Be.push(Oe),this._condense(Be),this}!Qe&&!Oe.leaf&&contains(Oe,ke)?(Be.push(Oe),Ue.push(je),je=0,We=Oe,Oe=Oe.children[0]):We?(je++,Oe=We.children[je],Qe=!1):Oe=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const Oe=[];for(;e;)e.leaf?t.push(...e.children):Oe.push(...e.children),e=Oe.pop();return t}_build(e,t,Oe,ke){const Be=Oe-t+1;let Ue=this._maxEntries,je;if(Be<=Ue)return je=createNode(e.slice(t,Oe+1)),calcBBox(je,this.toBBox),je;ke||(ke=Math.ceil(Math.log(Be)/Math.log(Ue)),Ue=Math.ceil(Be/Math.pow(Ue,ke-1))),je=createNode([]),je.leaf=!1,je.height=ke;const We=Math.ceil(Be/Ue),Qe=We*Math.ceil(Math.sqrt(Ue));multiSelect(e,t,Oe,Qe,this.compareMinX);for(let Cn=t;Cn<=Oe;Cn+=Qe){const An=Math.min(Cn+Qe-1,Oe);multiSelect(e,Cn,An,We,this.compareMinY);for(let En=Cn;En<=An;En+=We){const Sn=Math.min(En+We-1,An);je.children.push(this._build(e,En,Sn,ke-1))}}return calcBBox(je,this.toBBox),je}_chooseSubtree(e,t,Oe,ke){for(;ke.push(t),!(t.leaf||ke.length-1===Oe);){let Be=1/0,Ue=1/0,je;for(let We=0;We<t.children.length;We++){const Qe=t.children[We],Cn=bboxArea(Qe),An=enlargedArea(e,Qe)-Cn;An<Ue?(Ue=An,Be=Cn<Be?Cn:Be,je=Qe):An===Ue&&Cn<Be&&(Be=Cn,je=Qe)}t=je||t.children[0]}return t}_insert(e,t,Oe){const ke=Oe?e:this.toBBox(e),Be=[],Ue=this._chooseSubtree(ke,this.data,t,Be);for(Ue.children.push(e),extend$2(Ue,ke);t>=0&&Be[t].children.length>this._maxEntries;)this._split(Be,t),t--;this._adjustParentBBoxes(ke,Be,t)}_split(e,t){const Oe=e[t],ke=Oe.children.length,Be=this._minEntries;this._chooseSplitAxis(Oe,Be,ke);const Ue=this._chooseSplitIndex(Oe,Be,ke),je=createNode(Oe.children.splice(Ue,Oe.children.length-Ue));je.height=Oe.height,je.leaf=Oe.leaf,calcBBox(Oe,this.toBBox),calcBBox(je,this.toBBox),t?e[t-1].children.push(je):this._splitRoot(Oe,je)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,Oe){let ke,Be=1/0,Ue=1/0;for(let je=t;je<=Oe-t;je++){const We=distBBox(e,0,je,this.toBBox),Qe=distBBox(e,je,Oe,this.toBBox),Cn=intersectionArea(We,Qe),An=bboxArea(We)+bboxArea(Qe);Cn<Be?(Be=Cn,ke=je,Ue=An<Ue?An:Ue):Cn===Be&&An<Ue&&(Ue=An,ke=je)}return ke||Oe-t}_chooseSplitAxis(e,t,Oe){const ke=e.leaf?this.compareMinX:compareNodeMinX,Be=e.leaf?this.compareMinY:compareNodeMinY,Ue=this._allDistMargin(e,t,Oe,ke),je=this._allDistMargin(e,t,Oe,Be);Ue<je&&e.children.sort(ke)}_allDistMargin(e,t,Oe,ke){e.children.sort(ke);const Be=this.toBBox,Ue=distBBox(e,0,t,Be),je=distBBox(e,Oe-t,Oe,Be);let We=bboxMargin(Ue)+bboxMargin(je);for(let Qe=t;Qe<Oe-t;Qe++){const Cn=e.children[Qe];extend$2(Ue,e.leaf?Be(Cn):Cn),We+=bboxMargin(Ue)}for(let Qe=Oe-t-1;Qe>=t;Qe--){const Cn=e.children[Qe];extend$2(je,e.leaf?Be(Cn):Cn),We+=bboxMargin(je)}return We}_adjustParentBBoxes(e,t,Oe){for(let ke=Oe;ke>=0;ke--)extend$2(t[ke],e)}_condense(e){for(let t=e.length-1,Oe;t>=0;t--)e[t].children.length===0?t>0?(Oe=e[t-1].children,Oe.splice(Oe.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(Ae,e,t){if(!t)return e.indexOf(Ae);for(let Oe=0;Oe<e.length;Oe++)if(t(Ae,e[Oe]))return Oe;return-1}function calcBBox(Ae,e){distBBox(Ae,0,Ae.children.length,e,Ae)}function distBBox(Ae,e,t,Oe,ke){ke||(ke=createNode(null)),ke.minX=1/0,ke.minY=1/0,ke.maxX=-1/0,ke.maxY=-1/0;for(let Be=e;Be<t;Be++){const Ue=Ae.children[Be];extend$2(ke,Ae.leaf?Oe(Ue):Ue)}return ke}function extend$2(Ae,e){return Ae.minX=Math.min(Ae.minX,e.minX),Ae.minY=Math.min(Ae.minY,e.minY),Ae.maxX=Math.max(Ae.maxX,e.maxX),Ae.maxY=Math.max(Ae.maxY,e.maxY),Ae}function compareNodeMinX(Ae,e){return Ae.minX-e.minX}function compareNodeMinY(Ae,e){return Ae.minY-e.minY}function bboxArea(Ae){return(Ae.maxX-Ae.minX)*(Ae.maxY-Ae.minY)}function bboxMargin(Ae){return Ae.maxX-Ae.minX+(Ae.maxY-Ae.minY)}function enlargedArea(Ae,e){return(Math.max(e.maxX,Ae.maxX)-Math.min(e.minX,Ae.minX))*(Math.max(e.maxY,Ae.maxY)-Math.min(e.minY,Ae.minY))}function intersectionArea(Ae,e){const t=Math.max(Ae.minX,e.minX),Oe=Math.max(Ae.minY,e.minY),ke=Math.min(Ae.maxX,e.maxX),Be=Math.min(Ae.maxY,e.maxY);return Math.max(0,ke-t)*Math.max(0,Be-Oe)}function contains(Ae,e){return Ae.minX<=e.minX&&Ae.minY<=e.minY&&e.maxX<=Ae.maxX&&e.maxY<=Ae.maxY}function intersects(Ae,e){return e.minX<=Ae.maxX&&e.minY<=Ae.maxY&&e.maxX>=Ae.minX&&e.maxY>=Ae.minY}function createNode(Ae){return{children:Ae,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(Ae,e,t,Oe,ke){const Be=[e,t];for(;Be.length;){if(t=Be.pop(),e=Be.pop(),t-e<=Oe)continue;const Ue=e+Math.ceil((t-e)/Oe/2)*Oe;quickselect(Ae,Ue,e,t,ke),Be.push(e,Ue,Ue,t)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const Oe={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(Oe),this.items_[getUid(t)]=Oe}load(e,t){const Oe=new Array(t.length);for(let ke=0,Be=t.length;ke<Be;ke++){const Ue=e[ke],je=t[ke],We={minX:Ue[0],minY:Ue[1],maxX:Ue[2],maxY:Ue[3],value:je};Oe[ke]=We,this.items_[getUid(je)]=We}this.rbush_.load(Oe)}remove(e){const t=getUid(e),Oe=this.items_[t];return delete this.items_[t],this.rbush_.remove(Oe)!==null}update(e,t){const Oe=this.items_[getUid(t)],ke=[Oe.minX,Oe.minY,Oe.maxX,Oe.maxY];equals$1(ke,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(ke){return ke.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let Oe;for(let ke=0,Be=e.length;ke<Be;ke++)if(Oe=t(e[ke]),Oe)return Oe;return Oe}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const Oe=this.getStyle();return Oe&&e.setStyle(Oe),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(Ae){if(typeof Ae=="function")return Ae;let e;return Array.isArray(Ae)?e=Ae:(assert(typeof Ae.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[Ae]),function(){return e}}const tmp_=new Array(6);function create$1(){return[1,0,0,1,0,0]}function reset(Ae){return set(Ae,1,0,0,1,0,0)}function multiply(Ae,e){const t=Ae[0],Oe=Ae[1],ke=Ae[2],Be=Ae[3],Ue=Ae[4],je=Ae[5],We=e[0],Qe=e[1],Cn=e[2],An=e[3],En=e[4],Sn=e[5];return Ae[0]=t*We+ke*Qe,Ae[1]=Oe*We+Be*Qe,Ae[2]=t*Cn+ke*An,Ae[3]=Oe*Cn+Be*An,Ae[4]=t*En+ke*Sn+Ue,Ae[5]=Oe*En+Be*Sn+je,Ae}function set(Ae,e,t,Oe,ke,Be,Ue){return Ae[0]=e,Ae[1]=t,Ae[2]=Oe,Ae[3]=ke,Ae[4]=Be,Ae[5]=Ue,Ae}function setFromArray(Ae,e){return Ae[0]=e[0],Ae[1]=e[1],Ae[2]=e[2],Ae[3]=e[3],Ae[4]=e[4],Ae[5]=e[5],Ae}function apply(Ae,e){const t=e[0],Oe=e[1];return e[0]=Ae[0]*t+Ae[2]*Oe+Ae[4],e[1]=Ae[1]*t+Ae[3]*Oe+Ae[5],e}function scale$2(Ae,e,t){return multiply(Ae,set(tmp_,e,0,0,t,0,0))}function translate$2(Ae,e,t){return multiply(Ae,set(tmp_,1,0,0,1,e,t))}function compose(Ae,e,t,Oe,ke,Be,Ue,je){const We=Math.sin(Be),Qe=Math.cos(Be);return Ae[0]=Oe*Qe,Ae[1]=ke*We,Ae[2]=-Oe*We,Ae[3]=ke*Qe,Ae[4]=Ue*Oe*Qe-je*Oe*We+e,Ae[5]=Ue*ke*We+je*ke*Qe+t,Ae}function makeInverse(Ae,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const Oe=e[0],ke=e[1],Be=e[2],Ue=e[3],je=e[4],We=e[5];return Ae[0]=Ue/t,Ae[1]=-ke/t,Ae[2]=-Be/t,Ae[3]=Oe/t,Ae[4]=(Be*We-Ue*je)/t,Ae[5]=-(Oe*We-ke*je)/t,Ae}function determinant(Ae){return Ae[0]*Ae[3]-Ae[1]*Ae[2]}const matrixPrecision=[1e6,1e6,1e6,1e6,2,2];function toString$3(Ae){return"matrix("+Ae.map((t,Oe)=>Math.round(t*matrixPrecision[Oe])/matrixPrecision[Oe]).join(", ")+")"}function transform2D(Ae,e,t,Oe,ke,Be,Ue){Be=Be||[],Ue=Ue||2;let je=0;for(let We=e;We<t;We+=Oe){const Qe=Ae[We],Cn=Ae[We+1];Be[je++]=ke[0]*Qe+ke[2]*Cn+ke[4],Be[je++]=ke[1]*Qe+ke[3]*Cn+ke[5];for(let An=2;An<Ue;An++)Be[je++]=Ae[We+An]}return Be&&Be.length!=je&&(Be.length=je),Be}function rotate(Ae,e,t,Oe,ke,Be,Ue){Ue=Ue||[];const je=Math.cos(ke),We=Math.sin(ke),Qe=Be[0],Cn=Be[1];let An=0;for(let En=e;En<t;En+=Oe){const Sn=Ae[En]-Qe,Tn=Ae[En+1]-Cn;Ue[An++]=Qe+Sn*je-Tn*We,Ue[An++]=Cn+Sn*We+Tn*je;for(let Dn=En+2;Dn<En+Oe;++Dn)Ue[An++]=Ae[Dn]}return Ue&&Ue.length!=An&&(Ue.length=An),Ue}function scale$1(Ae,e,t,Oe,ke,Be,Ue,je){je=je||[];const We=Ue[0],Qe=Ue[1];let Cn=0;for(let An=e;An<t;An+=Oe){const En=Ae[An]-We,Sn=Ae[An+1]-Qe;je[Cn++]=We+ke*En,je[Cn++]=Qe+Be*Sn;for(let Tn=An+2;Tn<An+Oe;++Tn)je[Cn++]=Ae[Tn]}return je&&je.length!=Cn&&(je.length=Cn),je}function translate$1(Ae,e,t,Oe,ke,Be,Ue){Ue=Ue||[];let je=0;for(let We=e;We<t;We+=Oe){Ue[je++]=Ae[We]+ke,Ue[je++]=Ae[We+1]+Be;for(let Qe=We+2;Qe<We+Oe;++Qe)Ue[je++]=Ae[Qe]}return Ue&&Ue.length!=je&&(Ue.length=je),Ue}const tmpTransform$1=create$1();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,Oe)=>{if(!Oe)return this.getSimplifiedGeometry(t);const ke=this.clone();return ke.applyTransform(Oe),ke.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,Oe,ke){return abstract()}containsXY(e,t){const Oe=this.getClosestPoint([e,t]);return Oe[0]===e&&Oe[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,Oe){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const Oe=get$3(e),ke=Oe.getUnits()=="tile-pixels"?function(Be,Ue,je){const We=Oe.getExtent(),Qe=Oe.getWorldExtent(),Cn=getHeight(Qe)/getHeight(We);compose(tmpTransform$1,Qe[0],Qe[3],Cn,-Cn,0,0,0);const An=transform2D(Be,0,Be.length,je,tmpTransform$1,Ue),En=getTransform(Oe,t);return En?En(An,An,je):An}:getTransform(Oe,t);return this.applyTransform(ke),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,Oe){let ke;if(e)ke=getStrideForLayout(e);else{for(let Be=0;Be<Oe;++Be){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}ke=t.length,e=getLayoutForStride(ke)}this.layout=e,this.stride=ke}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const Oe=this.getFlatCoordinates();if(Oe){const ke=this.getStride();rotate(Oe,0,Oe.length,ke,e,t,Oe),this.changed()}}scale(e,t,Oe){t===void 0&&(t=e),Oe||(Oe=getCenter(this.getExtent()));const ke=this.getFlatCoordinates();if(ke){const Be=this.getStride();scale$1(ke,0,ke.length,Be,e,t,Oe,ke),this.changed()}}translate(e,t){const Oe=this.getFlatCoordinates();if(Oe){const ke=this.getStride();translate$1(Oe,0,Oe.length,ke,e,t,Oe),this.changed()}}}function getLayoutForStride(Ae){let e;return Ae==2?e="XY":Ae==3?e="XYZ":Ae==4&&(e="XYZM"),e}function getStrideForLayout(Ae){let e;return Ae=="XY"?e=2:Ae=="XYZ"||Ae=="XYM"?e=3:Ae=="XYZM"&&(e=4),e}function transformGeom2D(Ae,e,t){const Oe=Ae.getFlatCoordinates();if(!Oe)return null;const ke=Ae.getStride();return transform2D(Oe,0,Oe.length,ke,e,t)}function deflateCoordinate(Ae,e,t,Oe){for(let ke=0,Be=t.length;ke<Be;++ke)Ae[e++]=t[ke];return e}function deflateCoordinates(Ae,e,t,Oe){for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=t[ke];for(let je=0;je<Oe;++je)Ae[e++]=Ue[je]}return e}function deflateCoordinatesArray(Ae,e,t,Oe,ke){ke=ke||[];let Be=0;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=deflateCoordinates(Ae,e,t[Ue],Oe);ke[Be++]=We,e=We}return ke.length=Be,ke}function deflateMultiCoordinatesArray(Ae,e,t,Oe,ke){ke=ke||[];let Be=0;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=deflateCoordinatesArray(Ae,e,t[Ue],Oe,ke[Be]);We.length===0&&(We[0]=e),ke[Be++]=We,e=We[We.length-1]}return ke.length=Be,ke}class Circle extends SimpleGeometry{constructor(e,t,Oe){super(),Oe!==void 0&&t===void 0?this.setFlatCoordinates(Oe,e):(t=t||0,this.setCenterAndRadius(e,t,Oe))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){const Be=this.flatCoordinates,Ue=e-Be[0],je=t-Be[1],We=Ue*Ue+je*je;if(We<ke){if(We===0)for(let Qe=0;Qe<this.stride;++Qe)Oe[Qe]=Be[Qe];else{const Qe=this.getRadius()/Math.sqrt(We);Oe[0]=Be[0]+Qe*Ue,Oe[1]=Be[1]+Qe*je;for(let Cn=2;Cn<this.stride;++Cn)Oe[Cn]=Be[Cn]}return Oe.length=this.stride,We}return ke}containsXY(e,t){const Oe=this.flatCoordinates,ke=e-Oe[0],Be=t-Oe[1];return ke*ke+Be*Be<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,Oe=t[this.stride]-t[0];return createOrUpdate$2(t[0]-Oe,t[1]-Oe,t[0]+Oe,t[1]+Oe,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const Oe=this.getCenter();return e[0]<=Oe[0]&&e[2]>=Oe[0]||e[1]<=Oe[1]&&e[3]>=Oe[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,Oe=this.flatCoordinates[t]-this.flatCoordinates[0],ke=e.slice();ke[t]=ke[0]+Oe;for(let Be=1;Be<t;++Be)ke[t+Be]=e[Be];this.setFlatCoordinates(this.layout,ke),this.changed()}setCenterAndRadius(e,t,Oe){this.setLayout(Oe,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const ke=this.flatCoordinates;let Be=deflateCoordinate(ke,0,e,this.stride);ke[Be++]=ke[0]+t;for(let Ue=1,je=this.stride;Ue<je;++Ue)ke[Be++]=ke[Ue];ke.length=Be,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const Oe=this.getCenter(),ke=this.getStride();this.setCenter(rotate(Oe,0,Oe.length,ke,e,t,Oe)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,Oe=e.length;t<Oe;++t)this.changeEventsKeys_.push(listen(e[t],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){if(ke<closestSquaredDistanceXY(this.getExtent(),e,t))return ke;const Be=this.geometries_;for(let Ue=0,je=Be.length;Ue<je;++Ue)ke=Be[Ue].closestPointXY(e,t,Oe,ke);return ke}containsXY(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)if(Oe[ke].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)extend$3(e,t[Oe].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe].getType()===this.getType()?e=e.concat(t[Oe].getGeometriesArrayRecursive()):e.push(t[Oe]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],Oe=this.geometries_;let ke=!1;for(let Be=0,Ue=Oe.length;Be<Ue;++Be){const je=Oe[Be],We=je.getSimplifiedGeometry(e);t.push(We),We!==je&&(ke=!0)}return ke?new GeometryCollection(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)if(t[Oe].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke].rotate(e,t);this.changed()}scale(e,t,Oe){Oe||(Oe=getCenter(this.getExtent()));const ke=this.geometries_;for(let Be=0,Ue=ke.length;Be<Ue;++Be)ke[Be].scale(e,t,Oe);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe].applyTransform(e);this.changed()}translate(e,t){const Oe=this.geometries_;for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(Ae){return Ae.map(e=>e.clone())}function assignClosest(Ae,e,t,Oe,ke,Be,Ue){const je=Ae[e],We=Ae[e+1],Qe=Ae[t]-je,Cn=Ae[t+1]-We;let An;if(Qe===0&&Cn===0)An=e;else{const En=((ke-je)*Qe+(Be-We)*Cn)/(Qe*Qe+Cn*Cn);if(En>1)An=t;else if(En>0){for(let Sn=0;Sn<Oe;++Sn)Ue[Sn]=lerp(Ae[e+Sn],Ae[t+Sn],En);Ue.length=Oe;return}else An=e}for(let En=0;En<Oe;++En)Ue[En]=Ae[An+En];Ue.length=Oe}function maxSquaredDelta(Ae,e,t,Oe,ke){let Be=Ae[e],Ue=Ae[e+1];for(e+=Oe;e<t;e+=Oe){const je=Ae[e],We=Ae[e+1],Qe=squaredDistance$1(Be,Ue,je,We);Qe>ke&&(ke=Qe),Be=je,Ue=We}return ke}function arrayMaxSquaredDelta(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];ke=maxSquaredDelta(Ae,e,je,Oe,ke),e=je}return ke}function multiArrayMaxSquaredDelta(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];ke=arrayMaxSquaredDelta(Ae,e,je,Oe,ke),e=je[je.length-1]}return ke}function assignClosestPoint(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn){if(e==t)return Qe;let An,En;if(ke===0){if(En=squaredDistance$1(Ue,je,Ae[e],Ae[e+1]),En<Qe){for(An=0;An<Oe;++An)We[An]=Ae[e+An];return We.length=Oe,En}return Qe}Cn=Cn||[NaN,NaN];let Sn=e+Oe;for(;Sn<t;)if(assignClosest(Ae,Sn-Oe,Sn,Oe,Ue,je,Cn),En=squaredDistance$1(Ue,je,Cn[0],Cn[1]),En<Qe){for(Qe=En,An=0;An<Oe;++An)We[An]=Cn[An];We.length=Oe,Sn+=Oe}else Sn+=Oe*Math.max((Math.sqrt(En)-Math.sqrt(Qe))/ke|0,1);if(Be&&(assignClosest(Ae,t-Oe,e,Oe,Ue,je,Cn),En=squaredDistance$1(Ue,je,Cn[0],Cn[1]),En<Qe)){for(Qe=En,An=0;An<Oe;++An)We[An]=Cn[An];We.length=Oe}return Qe}function assignClosestArrayPoint(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn){Cn=Cn||[NaN,NaN];for(let An=0,En=t.length;An<En;++An){const Sn=t[An];Qe=assignClosestPoint(Ae,e,Sn,Oe,ke,Be,Ue,je,We,Qe,Cn),e=Sn}return Qe}function assignClosestMultiArrayPoint(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn){Cn=Cn||[NaN,NaN];for(let An=0,En=t.length;An<En;++An){const Sn=t[An];Qe=assignClosestArrayPoint(Ae,e,Sn,Oe,ke,Be,Ue,je,We,Qe,Cn),e=Sn[Sn.length-1]}return Qe}function douglasPeucker(Ae,e,t,Oe,ke,Be,Ue){const je=(t-e)/Oe;if(je<3){for(;e<t;e+=Oe)Be[Ue++]=Ae[e],Be[Ue++]=Ae[e+1];return Ue}const We=new Array(je);We[0]=1,We[je-1]=1;const Qe=[e,t-Oe];let Cn=0;for(;Qe.length>0;){const An=Qe.pop(),En=Qe.pop();let Sn=0;const Tn=Ae[En],Dn=Ae[En+1],ti=Ae[An],ni=Ae[An+1];for(let ii=En+Oe;ii<An;ii+=Oe){const si=Ae[ii],oi=Ae[ii+1],ci=squaredSegmentDistance(si,oi,Tn,Dn,ti,ni);ci>Sn&&(Cn=ii,Sn=ci)}Sn>ke&&(We[(Cn-e)/Oe]=1,En+Oe<Cn&&Qe.push(En,Cn),Cn+Oe<An&&Qe.push(Cn,An))}for(let An=0;An<je;++An)We[An]&&(Be[Ue++]=Ae[e+An*Oe],Be[Ue++]=Ae[e+An*Oe+1]);return Ue}function douglasPeuckerArray(Ae,e,t,Oe,ke,Be,Ue,je){for(let We=0,Qe=t.length;We<Qe;++We){const Cn=t[We];Ue=douglasPeucker(Ae,e,Cn,Oe,ke,Be,Ue),je.push(Ue),e=Cn}return Ue}function snap(Ae,e){return e*Math.round(Ae/e)}function quantize(Ae,e,t,Oe,ke,Be,Ue){if(e==t)return Ue;let je=snap(Ae[e],ke),We=snap(Ae[e+1],ke);e+=Oe,Be[Ue++]=je,Be[Ue++]=We;let Qe,Cn;do if(Qe=snap(Ae[e],ke),Cn=snap(Ae[e+1],ke),e+=Oe,e==t)return Be[Ue++]=Qe,Be[Ue++]=Cn,Ue;while(Qe==je&&Cn==We);for(;e<t;){const An=snap(Ae[e],ke),En=snap(Ae[e+1],ke);if(e+=Oe,An==Qe&&En==Cn)continue;const Sn=Qe-je,Tn=Cn-We,Dn=An-je,ti=En-We;if(Sn*ti==Tn*Dn&&(Sn<0&&Dn<Sn||Sn==Dn||Sn>0&&Dn>Sn)&&(Tn<0&&ti<Tn||Tn==ti||Tn>0&&ti>Tn)){Qe=An,Cn=En;continue}Be[Ue++]=Qe,Be[Ue++]=Cn,je=Qe,We=Cn,Qe=An,Cn=En}return Be[Ue++]=Qe,Be[Ue++]=Cn,Ue}function quantizeArray(Ae,e,t,Oe,ke,Be,Ue,je){for(let We=0,Qe=t.length;We<Qe;++We){const Cn=t[We];Ue=quantize(Ae,e,Cn,Oe,ke,Be,Ue),je.push(Ue),e=Cn}return Ue}function quantizeMultiArray(Ae,e,t,Oe,ke,Be,Ue,je){for(let We=0,Qe=t.length;We<Qe;++We){const Cn=t[We],An=[];Ue=quantizeArray(Ae,e,Cn,Oe,ke,Be,Ue,An),je.push(An),e=Cn[Cn.length-1]}return Ue}function inflateCoordinates(Ae,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=e;Ue<t;Ue+=Oe)ke[Be++]=Ae.slice(Ue,Ue+Oe);return ke.length=Be,ke}function inflateCoordinatesArray(Ae,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue];ke[Be++]=inflateCoordinates(Ae,e,We,Oe,ke[Be]),e=We}return ke.length=Be,ke}function inflateMultiCoordinatesArray(Ae,e,t,Oe,ke){ke=ke!==void 0?ke:[];let Be=0;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue];ke[Be++]=We.length===1&&We[0]===e?[]:inflateCoordinatesArray(Ae,e,We,Oe,ke[Be]),e=We[We.length-1]}return ke.length=Be,ke}function linearRing(Ae,e,t,Oe){let ke=0;const Be=Ae[t-Oe],Ue=Ae[t-Oe+1];let je=0,We=0;for(;e<t;e+=Oe){const Qe=Ae[e]-Be,Cn=Ae[e+1]-Ue;ke+=We*Qe-je*Cn,je=Qe,We=Cn}return ke/2}function linearRings(Ae,e,t,Oe){let ke=0;for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];ke+=linearRing(Ae,e,je,Oe),e=je}return ke}function linearRingss$1(Ae,e,t,Oe){let ke=0;for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];ke+=linearRings(Ae,e,je,Oe),e=je[je.length-1]}return ke}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function interpolatePoint(Ae,e,t,Oe,ke,Be,Ue){let je,We;const Qe=(t-e)/Oe;if(Qe===1)je=e;else if(Qe===2)je=e,We=ke;else if(Qe!==0){let Cn=Ae[e],An=Ae[e+1],En=0;const Sn=[0];for(let ti=e+Oe;ti<t;ti+=Oe){const ni=Ae[ti],ii=Ae[ti+1];En+=Math.sqrt((ni-Cn)*(ni-Cn)+(ii-An)*(ii-An)),Sn.push(En),Cn=ni,An=ii}const Tn=ke*En,Dn=binarySearch$1(Sn,Tn);Dn<0?(We=(Tn-Sn[-Dn-2])/(Sn[-Dn-1]-Sn[-Dn-2]),je=e+(-Dn-2)*Oe):je=e+Dn*Oe}Ue=Ue>1?Ue:2,Be=Be||new Array(Ue);for(let Cn=0;Cn<Ue;++Cn)Be[Cn]=je===void 0?NaN:We===void 0?Ae[je+Cn]:lerp(Ae[je+Cn],Ae[je+Oe+Cn],We);return Be}function lineStringCoordinateAtM(Ae,e,t,Oe,ke,Be){if(t==e)return null;let Ue;if(ke<Ae[e+Oe-1])return Be?(Ue=Ae.slice(e,e+Oe),Ue[Oe-1]=ke,Ue):null;if(Ae[t-1]<ke)return Be?(Ue=Ae.slice(t-Oe,t),Ue[Oe-1]=ke,Ue):null;if(ke==Ae[e+Oe-1])return Ae.slice(e,e+Oe);let je=e/Oe,We=t/Oe;for(;je<We;){const En=je+We>>1;ke<Ae[(En+1)*Oe-1]?We=En:je=En+1}const Qe=Ae[je*Oe-1];if(ke==Qe)return Ae.slice((je-1)*Oe,(je-1)*Oe+Oe);const Cn=Ae[(je+1)*Oe-1],An=(ke-Qe)/(Cn-Qe);Ue=[];for(let En=0;En<Oe-1;++En)Ue.push(lerp(Ae[(je-1)*Oe+En],Ae[je*Oe+En],An));return Ue.push(ke),Ue}function lineStringsCoordinateAtM(Ae,e,t,Oe,ke,Be,Ue){if(Ue)return lineStringCoordinateAtM(Ae,e,t[t.length-1],Oe,ke,Be);let je;if(ke<Ae[Oe-1])return Be?(je=Ae.slice(0,Oe),je[Oe-1]=ke,je):null;if(Ae[Ae.length-1]<ke)return Be?(je=Ae.slice(Ae.length-Oe),je[Oe-1]=ke,je):null;for(let We=0,Qe=t.length;We<Qe;++We){const Cn=t[We];if(e!=Cn){if(ke<Ae[e+Oe-1])return null;if(ke<=Ae[Cn-1])return lineStringCoordinateAtM(Ae,e,Cn,Oe,ke,!1);e=Cn}}return null}function lineStringLength(Ae,e,t,Oe){let ke=Ae[e],Be=Ae[e+1],Ue=0;for(let je=e+Oe;je<t;je+=Oe){const We=Ae[je],Qe=Ae[je+1];Ue+=Math.sqrt((We-ke)*(We-ke)+(Qe-Be)*(Qe-Be)),ke=We,Be=Qe}return Ue}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,Oe,ke))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,Oe){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&Oe)this.setFlatCoordinates(t,e),this.ends_=Oe;else{const ke=e,Be=[],Ue=[];for(let We=0,Qe=ke.length;We<Qe;++We){const Cn=ke[We];extend$4(Be,Cn.getFlatCoordinates()),Ue.push(Be.length)}const je=ke.length===0?this.getLayout():ke[0].getLayout();this.setFlatCoordinates(je,Be),this.ends_=Ue}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,Oe,ke))}getCoordinateAtM(e,t,Oe){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,Oe=Oe!==void 0?Oe:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,Oe))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,Oe=this.layout,ke=[];let Be=0;for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue],Qe=new LineString(e.slice(Be,We),Oe);ke.push(Qe),Be=We}return ke}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let Oe=0;const ke=this.ends_,Be=this.stride;for(let Ue=0,je=ke.length;Ue<je;++Ue){const We=ke[Ue],Qe=interpolatePoint(t,Oe,We,Be,.5);extend$4(e,Qe),Oe=We}return e}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,Oe),new MultiLineString(t,"XY",Oe)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}let Point$1=class Nf extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Nf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){const Be=this.flatCoordinates,Ue=squaredDistance$1(e,t,Be[0],Be[1]);if(Ue<ke){const je=this.stride;for(let We=0;We<je;++We)Oe[We]=Be[We];return Oe.length=je,Ue}return ke}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){if(ke<closestSquaredDistanceXY(this.getExtent(),e,t))return ke;const Be=this.flatCoordinates,Ue=this.stride;for(let je=0,We=Be.length;je<We;je+=Ue){const Qe=squaredDistance$1(e,t,Be[je],Be[je+1]);if(Qe<ke){ke=Qe;for(let Cn=0;Cn<Ue;++Cn)Oe[Cn]=Be[je+Cn];Oe.length=Ue}}return ke}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,Oe=this.stride,ke=[];for(let Be=0,Ue=e.length;Be<Ue;Be+=Oe){const je=new Point$1(e.slice(Be,Be+Oe),t);ke.push(je)}return ke}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,Oe=this.stride;for(let ke=0,Be=t.length;ke<Be;ke+=Oe){const Ue=t[ke],je=t[ke+1];if(containsXY(e,Ue,je))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function getInteriorPointOfArray(Ae,e,t,Oe,ke,Be,Ue){let je,We,Qe,Cn,An,En,Sn;const Tn=ke[Be+1],Dn=[];for(let ii=0,si=t.length;ii<si;++ii){const oi=t[ii];for(Cn=Ae[oi-Oe],En=Ae[oi-Oe+1],je=e;je<oi;je+=Oe)An=Ae[je],Sn=Ae[je+1],(Tn<=En&&Sn<=Tn||En<=Tn&&Tn<=Sn)&&(Qe=(Tn-En)/(Sn-En)*(An-Cn)+Cn,Dn.push(Qe)),Cn=An,En=Sn}let ti=NaN,ni=-1/0;for(Dn.sort(ascending),Cn=Dn[0],je=1,We=Dn.length;je<We;++je){An=Dn[je];const ii=Math.abs(An-Cn);ii>ni&&(Qe=(Cn+An)/2,linearRingsContainsXY(Ae,e,t,Oe,Qe,Tn)&&(ti=Qe,ni=ii)),Cn=An}return isNaN(ti)&&(ti=ke[Be]),Ue?(Ue.push(ti,Tn,ni),Ue):[ti,Tn,ni]}function getInteriorPointsOfMultiArray(Ae,e,t,Oe,ke){let Be=[];for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue];Be=getInteriorPointOfArray(Ae,e,We,Oe,ke,2*Ue,Be),e=We[We.length-1]}return Be}function coordinates(Ae,e,t,Oe){for(;e<t-Oe;){for(let ke=0;ke<Oe;++ke){const Be=Ae[e+ke];Ae[e+ke]=Ae[t-Oe+ke],Ae[t-Oe+ke]=Be}e+=Oe,t-=Oe}}function linearRingIsClockwise(Ae,e,t,Oe){let ke=0,Be=Ae[t-Oe],Ue=Ae[t-Oe+1];for(;e<t;e+=Oe){const je=Ae[e],We=Ae[e+1];ke+=(je-Be)*(We+Ue),Be=je,Ue=We}return ke===0?void 0:ke>0}function linearRingsAreOriented(Ae,e,t,Oe,ke){ke=ke!==void 0?ke:!1;for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be],We=linearRingIsClockwise(Ae,e,je,Oe);if(Be===0){if(ke&&We||!ke&&!We)return!1}else if(ke&&!We||!ke&&We)return!1;e=je}return!0}function linearRingssAreOriented(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be];if(!linearRingsAreOriented(Ae,e,je,Oe,ke))return!1;je.length&&(e=je[je.length-1])}return!0}function orientLinearRings(Ae,e,t,Oe,ke){ke=ke!==void 0?ke:!1;for(let Be=0,Ue=t.length;Be<Ue;++Be){const je=t[Be],We=linearRingIsClockwise(Ae,e,je,Oe);(Be===0?ke&&We||!ke&&!We:ke&&!We||!ke&&We)&&coordinates(Ae,e,je,Oe),e=je}return e}function orientLinearRingsArray(Ae,e,t,Oe,ke){for(let Be=0,Ue=t.length;Be<Ue;++Be)e=orientLinearRings(Ae,e,t[Be],Oe,ke);return e}function inflateEnds(Ae,e){const t=[];let Oe=0,ke=0,Be;for(let Ue=0,je=e.length;Ue<je;++Ue){const We=e[Ue],Qe=linearRingIsClockwise(Ae,Oe,We,2);if(Be===void 0&&(Be=Qe),Qe===Be)t.push(e.slice(ke,Ue+1));else{if(t.length===0)continue;t[t.length-1].push(e[ke])}ke=Ue+1,Oe=We}return t}class Polygon extends SimpleGeometry{constructor(e,t,Oe){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&Oe?(this.setFlatCoordinates(t,e),this.ends_=Oe):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,Oe=this.ends_,ke=[];let Be=0;for(let Ue=0,je=Oe.length;Ue<je;++Ue){const We=Oe[Ue],Qe=new LinearRing(t.slice(Be,We),e);ke.push(Qe),Be=We}return ke}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,Oe),new Polygon(t,"XY",Oe)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1],this.changed()}}function fromExtent(Ae){if(isEmpty(Ae))throw new Error("Cannot create polygon from empty extent");const e=Ae[0],t=Ae[1],Oe=Ae[2],ke=Ae[3],Be=[e,t,e,ke,Oe,ke,Oe,t,e,t];return new Polygon(Be,"XY",[Be.length])}function linearRingss(Ae,e,t,Oe){const ke=[];let Be=createEmpty();for(let Ue=0,je=t.length;Ue<je;++Ue){const We=t[Ue];Be=createOrUpdateFromFlatCoordinates(Ae,e,We[0],Oe),ke.push((Be[0]+Be[2])/2,(Be[1]+Be[3])/2),e=We[We.length-1]}return ke}class MultiPolygon extends SimpleGeometry{constructor(e,t,Oe){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!Oe&&!Array.isArray(e[0])){const ke=e,Be=[],Ue=[];for(let je=0,We=ke.length;je<We;++je){const Qe=ke[je],Cn=Be.length,An=Qe.getEnds();for(let En=0,Sn=An.length;En<Sn;++En)An[En]+=Cn;extend$4(Be,Qe.getFlatCoordinates()),Ue.push(An)}t=ke.length===0?this.getLayout():ke[0].getLayout(),e=Be,Oe=Ue}t!==void 0&&Oe?(this.setFlatCoordinates(t,e),this.endss_=Oe):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const Oe=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let ke=0,Be=t.length;ke<Be;++ke)t[ke]+=Oe}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let ke=0;ke<e;++ke)t[ke]=this.endss_[ke].slice();const Oe=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return Oe.applyProperties(this),Oe}closestPointXY(e,t,Oe,ke){return ke<closestSquaredDistanceXY(this.getExtent(),e,t)?ke:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,Oe,ke))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],Oe=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,Oe),new MultiPolygon(t,"XY",Oe)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const Be=this.endss_[e-1];t=Be[Be.length-1]}const Oe=this.endss_[e].slice(),ke=Oe[Oe.length-1];if(t!==0)for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be]-=t;return new Polygon(this.flatCoordinates.slice(t,ke),this.layout,Oe)}getPolygons(){const e=this.layout,t=this.flatCoordinates,Oe=this.endss_,ke=[];let Be=0;for(let Ue=0,je=Oe.length;Ue<je;++Ue){const We=Oe[Ue].slice(),Qe=We[We.length-1];if(Be!==0)for(let An=0,En=We.length;An<En;++An)We[An]-=Be;const Cn=new Polygon(t.slice(Be,Qe),e,We);ke.push(Cn),Be=Qe}return ke}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(Oe.length===0)this.flatCoordinates.length=0;else{const ke=Oe[Oe.length-1];this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1]}this.changed()}}const tmpTransform=create$1();class RenderFeature{constructor(e,t,Oe,ke,Be,Ue){this.styleFunction,this.extent_,this.id_=Ue,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=Oe||null,this.properties_=Be,this.squaredTolerance_,this.stride_=ke,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const Oe=this.ends_;for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],je=interpolatePoint(e,t,Ue,2,.5);extend$4(this.flatMidpoints_,je),t=Ue}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),Oe=e.getWorldExtent();if(t&&Oe){const ke=getHeight(Oe)/getHeight(t);compose(tmpTransform,Oe[0],Oe[3],ke,-ke,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const Oe=this.simplifiedGeometry_.getFlatCoordinates();let ke;switch(this.type_){case"LineString":Oe.length=douglasPeucker(Oe,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,Oe,0),ke=[Oe.length];break;case"MultiLineString":ke=[],Oe.length=douglasPeuckerArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,Oe,0,ke);break;case"Polygon":ke=[],Oe.length=quantizeArray(Oe,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),Oe,0,ke);break}return ke&&(this.simplifiedGeometry_=new RenderFeature(this.type_,Oe,ke,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(Ae,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(Ae,e){return[Ae]}function tile(Ae){return function(e,t,Oe){const ke=Ae.getZForResolution(fromUserResolution(t)),Be=Ae.getTileRangeForExtentAndZ(fromUserExtent(e),ke),Ue=[],je=[ke,0,0];for(je[1]=Be.minX;je[1]<=Be.maxX;++je[1])for(je[2]=Be.minY;je[2]<=Be.maxY;++je[2])Ue.push(toUserExtent(Ae.getTileCoordExtent(je)));return Ue}}class VectorSourceEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.feature=t,this.features=Oe}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let Oe,ke;Array.isArray(e.features)?ke=e.features:e.features&&(Oe=e.features,ke=Oe.getArray()),!t&&Oe===void 0&&(Oe=new Collection(ke)),ke!==void 0&&this.addFeaturesInternal(ke),Oe!==void 0&&this.bindFeaturesCollection_(Oe)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const Oe=e.getGeometry();if(Oe){const ke=Oe.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(ke,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let Oe=!0;if(t.getId()!==void 0){const ke=String(t.getId());if(!(ke in this.idIndex_))this.idIndex_[ke]=t;else if(t instanceof RenderFeature){const Be=this.idIndex_[ke];Be instanceof RenderFeature?Array.isArray(Be)?Be.push(t):this.idIndex_[ke]=[Be,t]:Oe=!1}else Oe=!1}return Oe&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),Oe}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],Oe=[],ke=[];for(let Be=0,Ue=e.length;Be<Ue;Be++){const je=e[Be],We=getUid(je);this.addToIndex_(We,je)&&Oe.push(je)}for(let Be=0,Ue=Oe.length;Be<Ue;Be++){const je=Oe[Be],We=getUid(je);this.setupChangeEvents_(We,je);const Qe=je.getGeometry();if(Qe){const Cn=Qe.getExtent();t.push(Cn),ke.push(je)}else this.nullGeometryFeatures_[We]=je}if(this.featuresRtree_&&this.featuresRtree_.load(t,ke),this.hasListener(VectorEventType.ADDFEATURE))for(let Be=0,Ue=Oe.length;Be<Ue;Be++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,Oe[Be]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(Oe){t||(t=!0,e.push(Oe.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(Oe){t||(t=!0,e.remove(Oe.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,Oe=>{t||(t=!0,this.addFeature(Oe.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,Oe=>{t||(t=!0,this.removeFeature(Oe.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const Oe in this.featureChangeKeys_)this.featureChangeKeys_[Oe].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(Oe=>{this.removeFeatureInternal(Oe)});for(const Oe in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Oe])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const Oe=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(Oe,function(ke){const Be=ke.getGeometry();if(Be instanceof RenderFeature||Be.intersectsCoordinate(e))return t(ke)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(Oe){const ke=Oe.getGeometry();if(ke instanceof RenderFeature||ke.intersectsExtent(e)){const Be=t(Oe);if(Be)return Be}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(Oe){t.push(Oe)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const ke=wrapAndSliceX(e,t);return[].concat(...ke.map(Be=>this.featuresRtree_.getInExtent(Be)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const Oe=e[0],ke=e[1];let Be=null;const Ue=[NaN,NaN];let je=1/0;const We=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(We,function(Qe){if(t(Qe)){const Cn=Qe.getGeometry(),An=je;if(je=Cn instanceof RenderFeature?0:Cn.closestPointXY(Oe,ke,Ue,je),je<An){Be=Qe;const En=Math.sqrt(je);We[0]=Oe-En,We[1]=ke-En,We[2]=Oe+En,We[3]=ke+En}}}),Be}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,Oe=getUid(t),ke=t.getGeometry();if(!ke)Oe in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[Oe]=t);else{const Ue=ke.getExtent();Oe in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[Oe],this.featuresRtree_&&this.featuresRtree_.insert(Ue,t)):this.featuresRtree_&&this.featuresRtree_.update(Ue,t)}const Be=t.getId();if(Be!==void 0){const Ue=Be.toString();this.idIndex_[Ue]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[Ue]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[Oe]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,Oe){const ke=this.loadedExtentsRtree_,Be=this.strategy_(e,t,Oe);for(let Ue=0,je=Be.length;Ue<je;++Ue){const We=Be[Ue];ke.forEachInExtent(We,function(Cn){return containsExtent(Cn.extent,We)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,We,t,Oe,Cn=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,Cn))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),ke.insert(We,{extent:We.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,Oe=t.forEachInExtent(e,function(ke){if(equals$1(ke.extent,e))return ke});Oe&&t.remove(Oe)}removeFeatures(e){let t=!1;for(let Oe=0,ke=e.length;Oe<ke;++Oe)t=this.removeFeatureInternal(e[Oe])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const Oe=this.featureChangeKeys_[t];Oe==null||Oe.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const ke=e.getId();if(ke!==void 0){const Be=ke.toString(),Ue=this.idIndex_[Be];Ue===e?delete this.idIndex_[Be]:Array.isArray(Ue)&&(Ue.splice(Ue.indexOf(e),1),Ue.length===1&&(this.idIndex_[Be]=Ue[0]))}return delete this.uidIndex_[t],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,t,Oe,ke){super(),this.extent=e,this.pixelRatio_=Oe,this.resolution=t,this.state=typeof ke=="function"?ImageState.IDLE:ke,this.image_=null,this.loader=typeof ke=="function"?ke:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(Oe=>{"image"in Oe&&(this.image_=Oe.image),"extent"in Oe&&(this.extent=Oe.extent),"resolution"in Oe&&(this.resolution=Oe.resolution),"pixelRatio"in Oe&&(this.pixelRatio_=Oe.pixelRatio),(Oe instanceof HTMLImageElement||Oe instanceof ImageBitmap||Oe instanceof HTMLCanvasElement||Oe instanceof HTMLVideoElement)&&(this.image_=Oe),this.state=ImageState.LOADED}).catch(Oe=>{this.state=ImageState.ERROR,console.error(Oe)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(Ae,e,t){const Oe=Ae;let ke=!0,Be=!1,Ue=!1;const je=[listenOnce(Oe,EventType.LOAD,function(){Ue=!0,Be||e()})];return Oe.src&&IMAGE_DECODE?(Be=!0,Oe.decode().then(function(){ke&&e()}).catch(function(We){ke&&(Ue?e():t())})):je.push(listenOnce(Oe,EventType.ERROR,t)),function(){ke=!1,je.forEach(unlistenByKey)}}function load(Ae,e){return new Promise((t,Oe)=>{function ke(){Ue(),t(Ae)}function Be(){Ue(),Oe(new Error("Image load error"))}function Ue(){Ae.removeEventListener("load",ke),Ae.removeEventListener("error",Be)}Ae.addEventListener("load",ke),Ae.addEventListener("error",Be)})}function decodeFallback(Ae,e){return e&&(Ae.src=e),Ae.src&&IMAGE_DECODE?new Promise((t,Oe)=>Ae.decode().then(()=>t(Ae)).catch(ke=>Ae.complete&&Ae.width?t(Ae):Oe(ke))):load(Ae)}function decode$1(Ae,e){return e&&(Ae.src=e),Ae.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?Ae.decode().then(()=>createImageBitmap(Ae)).catch(t=>{if(Ae.complete&&Ae.width)return Ae;throw t}):decodeFallback(Ae)}class ImageTile extends Tile{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Ue),this.crossOrigin_=ke,this.src_=Oe,this.key=Oe,this.image_=new Image,ke!==null&&(this.image_.crossOrigin=ke),this.unlisten_=null,this.tileLoadFunction_=Be}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const Ae=createCanvasContext2D(1,1);return Ae.fillStyle="rgba(0,0,0,0)",Ae.fillRect(0,0,1,1),Ae.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,Oe,ke,Be,Ue,je){this.sourceProj_=e,this.targetProj_=t;let We={};const Qe=je?createTransformFromCoordinateTransform(si=>apply(je,transform$1(si,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(si){const oi=si[0]+"/"+si[1];return We[oi]||(We[oi]=Qe(si)),We[oi]},this.maxSourceExtent_=ke,this.errorThresholdSquared_=Be*Be,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!ke&&!!this.sourceProj_.getExtent()&&getWidth(ke)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const Cn=getTopLeft(Oe),An=getTopRight(Oe),En=getBottomRight(Oe),Sn=getBottomLeft(Oe),Tn=this.transformInv_(Cn),Dn=this.transformInv_(An),ti=this.transformInv_(En),ni=this.transformInv_(Sn),ii=MAX_SUBDIVISION+(Ue?Math.max(0,Math.ceil(Math.log2(getArea$1(Oe)/(Ue*Ue*256*256)))):0);if(this.addQuad_(Cn,An,En,Sn,Tn,Dn,ti,ni,ii),this.wrapsXInSource_){let si=1/0;this.triangles_.forEach(function(oi,ci,Pi){si=Math.min(si,oi.source[0][0],oi.source[1][0],oi.source[2][0])}),this.triangles_.forEach(oi=>{if(Math.max(oi.source[0][0],oi.source[1][0],oi.source[2][0])-si>this.sourceWorldWidth_/2){const ci=[[oi.source[0][0],oi.source[0][1]],[oi.source[1][0],oi.source[1][1]],[oi.source[2][0],oi.source[2][1]]];ci[0][0]-si>this.sourceWorldWidth_/2&&(ci[0][0]-=this.sourceWorldWidth_),ci[1][0]-si>this.sourceWorldWidth_/2&&(ci[1][0]-=this.sourceWorldWidth_),ci[2][0]-si>this.sourceWorldWidth_/2&&(ci[2][0]-=this.sourceWorldWidth_);const Pi=Math.min(ci[0][0],ci[1][0],ci[2][0]);Math.max(ci[0][0],ci[1][0],ci[2][0])-Pi<this.sourceWorldWidth_/2&&(oi.source=ci)}})}We={}}addTriangle_(e,t,Oe,ke,Be,Ue){this.triangles_.push({source:[ke,Be,Ue],target:[e,t,Oe]})}addQuad_(e,t,Oe,ke,Be,Ue,je,We,Qe){const Cn=boundingExtent([Be,Ue,je,We]),An=this.sourceWorldWidth_?getWidth(Cn)/this.sourceWorldWidth_:null,En=this.sourceWorldWidth_,Sn=this.sourceProj_.canWrapX()&&An>.5&&An<1;let Tn=!1;if(Qe>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const ti=boundingExtent([e,t,Oe,ke]);Tn=getWidth(ti)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||Tn}!Sn&&this.sourceProj_.isGlobal()&&An&&(Tn=An>MAX_TRIANGLE_WIDTH||Tn)}if(!Tn&&this.maxSourceExtent_&&isFinite(Cn[0])&&isFinite(Cn[1])&&isFinite(Cn[2])&&isFinite(Cn[3])&&!intersects$1(Cn,this.maxSourceExtent_))return;let Dn=0;if(!Tn&&(!isFinite(Be[0])||!isFinite(Be[1])||!isFinite(Ue[0])||!isFinite(Ue[1])||!isFinite(je[0])||!isFinite(je[1])||!isFinite(We[0])||!isFinite(We[1]))){if(Qe>0)Tn=!0;else if(Dn=(!isFinite(Be[0])||!isFinite(Be[1])?8:0)+(!isFinite(Ue[0])||!isFinite(Ue[1])?4:0)+(!isFinite(je[0])||!isFinite(je[1])?2:0)+(!isFinite(We[0])||!isFinite(We[1])?1:0),Dn!=1&&Dn!=2&&Dn!=4&&Dn!=8)return}if(Qe>0){if(!Tn){const ti=[(e[0]+Oe[0])/2,(e[1]+Oe[1])/2],ni=this.transformInv_(ti);let ii;Sn?ii=(modulo(Be[0],En)+modulo(je[0],En))/2-modulo(ni[0],En):ii=(Be[0]+je[0])/2-ni[0];const si=(Be[1]+je[1])/2-ni[1];Tn=ii*ii+si*si>this.errorThresholdSquared_}if(Tn){if(Math.abs(e[0]-Oe[0])<=Math.abs(e[1]-Oe[1])){const ti=[(t[0]+Oe[0])/2,(t[1]+Oe[1])/2],ni=this.transformInv_(ti),ii=[(ke[0]+e[0])/2,(ke[1]+e[1])/2],si=this.transformInv_(ii);this.addQuad_(e,t,ti,ii,Be,Ue,ni,si,Qe-1),this.addQuad_(ii,ti,Oe,ke,si,ni,je,We,Qe-1)}else{const ti=[(e[0]+t[0])/2,(e[1]+t[1])/2],ni=this.transformInv_(ti),ii=[(Oe[0]+ke[0])/2,(Oe[1]+ke[1])/2],si=this.transformInv_(ii);this.addQuad_(e,ti,ii,ke,Be,ni,si,We,Qe-1),this.addQuad_(ti,t,Oe,ii,ni,Ue,je,si,Qe-1)}return}}if(Sn){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}Dn&11||this.addTriangle_(e,Oe,ke,Be,je,We),Dn&14||this.addTriangle_(e,Oe,t,Be,je,Ue),Dn&&(Dn&13||this.addTriangle_(t,ke,e,Ue,We,Be),Dn&7||this.addTriangle_(t,ke,Oe,Ue,We,je))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,Oe,ke){const Be=t.source;extendCoordinate(e,Be[0]),extendCoordinate(e,Be[1]),extendCoordinate(e,Be[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(Ae,e,t,Oe,ke){Ae.beginPath(),Ae.moveTo(0,0),Ae.lineTo(e,t),Ae.lineTo(Oe,ke),Ae.closePath(),Ae.save(),Ae.clip(),Ae.fillRect(0,0,Math.max(e,Oe)+1,Math.max(t,ke)),Ae.restore()}function verifyBrokenDiagonalRendering(Ae,e){return Math.abs(Ae[e*4]-210)>2||Math.abs(Ae[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const Ae=createCanvasContext2D(6,6,canvasPool$1);Ae.globalCompositeOperation="lighter",Ae.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(Ae,4,5,4,0),drawTestTriangle(Ae,4,5,0,5);const e=Ae.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(Ae),canvasPool$1.push(Ae.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(Ae,e,t,Oe){const ke=transform$1(t,e,Ae);let Be=getPointResolution(e,Oe,t);const Ue=e.getMetersPerUnit();Ue!==void 0&&(Be*=Ue);const je=Ae.getMetersPerUnit();je!==void 0&&(Be/=je);const We=Ae.getExtent();if(!We||containsCoordinate(We,ke)){const Qe=getPointResolution(Ae,Be,ke)/Be;isFinite(Qe)&&Qe>0&&(Be/=Qe)}return Be}function calculateSourceExtentResolution(Ae,e,t,Oe){const ke=getCenter(t);let Be=calculateSourceResolution(Ae,e,ke,Oe);return(!isFinite(Be)||Be<=0)&&forEachCorner(t,function(Ue){return Be=calculateSourceResolution(Ae,e,Ue,Oe),isFinite(Be)&&Be>0}),Be}function render$1(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn){const Tn=createCanvasContext2D(Math.round(t*Ae),Math.round(t*e),canvasPool$1);if(An||(Tn.imageSmoothingEnabled=!1),We.length===0)return Tn.canvas;Tn.scale(t,t);function Dn(ci){return Math.round(ci*t)/t}Tn.globalCompositeOperation="lighter";const ti=createEmpty();We.forEach(function(ci,Pi,Ai){extend$3(ti,ci.extent)});let ni;const ii=t/Oe,si=(An?1:1+Math.pow(2,-24))/ii;(!En||We.length!==1||Qe!==0)&&(ni=createCanvasContext2D(Math.round(getWidth(ti)*ii),Math.round(getHeight(ti)*ii),canvasPool$1),An||(ni.imageSmoothingEnabled=!1),We.forEach(function(ci,Pi,Ai){if(ci.image.width>0&&ci.image.height>0){if(ci.clipExtent){ni.save();const li=(ci.clipExtent[0]-ti[0])*ii,Ri=-(ci.clipExtent[3]-ti[3])*ii,Mi=getWidth(ci.clipExtent)*ii,Bi=getHeight(ci.clipExtent)*ii;ni.rect(An?li:Math.round(li),An?Ri:Math.round(Ri),An?Mi:Math.round(li+Mi)-Math.round(li),An?Bi:Math.round(Ri+Bi)-Math.round(Ri)),ni.clip()}const fi=(ci.extent[0]-ti[0])*ii,Oi=-(ci.extent[3]-ti[3])*ii,Ni=getWidth(ci.extent)*ii,ui=getHeight(ci.extent)*ii;ni.drawImage(ci.image,Qe,Qe,ci.image.width-2*Qe,ci.image.height-2*Qe,An?fi:Math.round(fi),An?Oi:Math.round(Oi),An?Ni:Math.round(fi+Ni)-Math.round(fi),An?ui:Math.round(Oi+ui)-Math.round(Oi)),ci.clipExtent&&ni.restore()}}));const oi=getTopLeft(Ue);return je.getTriangles().forEach(function(ci,Pi,Ai){const fi=ci.source,Oi=ci.target;let Ni=fi[0][0],ui=fi[0][1],li=fi[1][0],Ri=fi[1][1],Mi=fi[2][0],Bi=fi[2][1];const er=Dn((Oi[0][0]-oi[0])/Be),nr=Dn(-(Oi[0][1]-oi[1])/Be),lr=Dn((Oi[1][0]-oi[0])/Be),hr=Dn(-(Oi[1][1]-oi[1])/Be),ar=Dn((Oi[2][0]-oi[0])/Be),wr=Dn(-(Oi[2][1]-oi[1])/Be),Fi=Ni,cr=ui;Ni=0,ui=0,li-=Fi,Ri-=cr,Mi-=Fi,Bi-=cr;const rr=[[li,Ri,0,0,lr-er],[Mi,Bi,0,0,ar-er],[0,0,li,Ri,hr-nr],[0,0,Mi,Bi,wr-nr]],gr=solveLinearSystem(rr);if(!gr)return;if(Tn.save(),Tn.beginPath(),isBrokenDiagonalRendering()||!An){Tn.moveTo(lr,hr);const pr=4,_r=er-lr,Ar=nr-hr;for(let Sr=0;Sr<pr;Sr++)Tn.lineTo(lr+Dn((Sr+1)*_r/pr),hr+Dn(Sr*Ar/(pr-1))),Sr!=pr-1&&Tn.lineTo(lr+Dn((Sr+1)*_r/pr),hr+Dn((Sr+1)*Ar/(pr-1)));Tn.lineTo(ar,wr)}else Tn.moveTo(lr,hr),Tn.lineTo(er,nr),Tn.lineTo(ar,wr);Tn.clip(),Tn.transform(gr[0],gr[2],gr[1],gr[3],er,nr),Tn.translate(ti[0]-Fi,ti[3]-cr);let vr;if(ni)vr=ni.canvas,Tn.scale(si,-si);else{const pr=We[0],_r=pr.extent;vr=pr.image,Tn.scale(getWidth(_r)/vr.width,-getHeight(_r)/vr.height)}Tn.drawImage(vr,0,0),Tn.restore()}),ni&&(releaseCanvas(ni),canvasPool$1.push(ni.canvas)),Cn&&(Tn.save(),Tn.globalCompositeOperation="source-over",Tn.strokeStyle="black",Tn.lineWidth=1,je.getTriangles().forEach(function(ci,Pi,Ai){const fi=ci.target,Oi=(fi[0][0]-oi[0])/Be,Ni=-(fi[0][1]-oi[1])/Be,ui=(fi[1][0]-oi[0])/Be,li=-(fi[1][1]-oi[1])/Be,Ri=(fi[2][0]-oi[0])/Be,Mi=-(fi[2][1]-oi[1])/Be;Tn.beginPath(),Tn.moveTo(ui,li),Tn.lineTo(Oi,Ni),Tn.lineTo(Ri,Mi),Tn.closePath(),Tn.stroke()}),Tn.restore()),Tn.canvas}class ReprojTile extends Tile{constructor(e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En){super(Be,TileState.IDLE,En),this.renderEdges_=An!==void 0?An:!1,this.pixelRatio_=je,this.gutter_=We,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=ke,this.wrappedTileCoord_=Ue||Be,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const Sn=ke.getTileCoordExtent(this.wrappedTileCoord_),Tn=this.targetTileGrid_.getExtent();let Dn=this.sourceTileGrid_.getExtent();const ti=Tn?getIntersection(Sn,Tn):Sn;if(getArea$1(ti)===0){this.state=TileState.EMPTY;return}const ni=e.getExtent();ni&&(Dn?Dn=getIntersection(Dn,ni):Dn=ni);const ii=ke.getResolution(this.wrappedTileCoord_[0]),si=calculateSourceExtentResolution(e,Oe,ti,ii);if(!isFinite(si)||si<=0){this.state=TileState.EMPTY;return}const oi=Cn!==void 0?Cn:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,Oe,ti,Dn,si*oi,ii),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(si);let ci=this.triangulation_.calculateSourceExtent();if(Dn&&(e.canWrapX()?(ci[1]=clamp(ci[1],Dn[1],Dn[3]),ci[3]=clamp(ci[3],Dn[1],Dn[3])):ci=getIntersection(ci,Dn)),!getArea$1(ci))this.state=TileState.EMPTY;else{let Pi=0,Ai=0;e.canWrapX()&&(Pi=getWidth(ni),Ai=Math.floor((ci[0]-ni[0])/Pi)),wrapAndSliceX(ci.slice(),e,!0).forEach(Oi=>{const Ni=t.getTileRangeForExtentAndZ(Oi,this.sourceZ_);for(let ui=Ni.minX;ui<=Ni.maxX;ui++)for(let li=Ni.minY;li<=Ni.maxY;li++){const Ri=Qe(this.sourceZ_,ui,li,je);if(Ri){const Mi=Ai*Pi;this.sourceTiles_.push({tile:Ri,offset:Mi})}}++Ai}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var ke;const Oe=t.tile;if(Oe&&Oe.getState()==TileState.LOADED){const Be=this.sourceTileGrid_.getTileCoordExtent(Oe.tileCoord);Be[0]+=t.offset,Be[2]+=t.offset;const Ue=(ke=this.clipExtent_)==null?void 0:ke.slice();Ue&&(Ue[0]+=t.offset,Ue[2]+=t.offset),e.push({extent:Be,clipExtent:Ue,image:Oe.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],Oe=this.targetTileGrid_.getTileSize(t),ke=typeof Oe=="number"?Oe:Oe[0],Be=typeof Oe=="number"?Oe:Oe[1],Ue=this.targetTileGrid_.getResolution(t),je=this.sourceTileGrid_.getResolution(this.sourceZ_),We=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render$1(ke,Be,this.pixelRatio_,je,this.sourceTileGrid_.getExtent(),Ue,We,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const Oe=t.getState();if(Oe==TileState.IDLE||Oe==TileState.LOADING){e++;const ke=listen(t,EventType.CHANGE,Be=>{const Ue=t.getState();(Ue==TileState.LOADED||Ue==TileState.ERROR||Ue==TileState.EMPTY)&&(unlistenByKey(ke),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(ke)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},Oe,ke){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const Oe=getUid(e);return Oe in this.tileGridForProjection||(this.tileGridForProjection[Oe]=getForProjection(e)),this.tileGridForProjection[Oe]}createTile_(e,t,Oe,ke,Be,Ue){const je=[e,t,Oe],We=this.getTileCoordForTileUrlFunction(je,Be),Qe=We?this.tileUrlFunction(We,ke,Be):void 0,Cn=new this.tileClass(je,Qe!==void 0?TileState.IDLE:TileState.EMPTY,Qe!==void 0?Qe:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return Cn.key=Ue,Cn.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),Cn}getTile(e,t,Oe,ke,Be){const Ue=this.getProjection();if(!Ue||!Be||equivalent(Ue,Be))return this.getTileInternal(e,t,Oe,ke,Ue||Be);const je=[e,t,Oe],We=this.getKey(),Qe=this.getTileGridForProjection(Ue),Cn=this.getTileGridForProjection(Be),An=this.getTileCoordForTileUrlFunction(je,Be),En=new ReprojTile(Ue,Qe,Be,Cn,je,An,this.getTilePixelRatio(ke),this.getGutter(),(Sn,Tn,Dn,ti)=>this.getTileInternal(Sn,Tn,Dn,ti,Ue),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return En.key=We,En}getTileInternal(e,t,Oe,ke,Be){const Ue=this.getKey();return this.createTile_(e,t,Oe,ke,Be,Ue)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const Oe=get$3(e);if(Oe){const ke=getUid(Oe);ke in this.tileGridForProjection||(this.tileGridForProjection[ke]=t)}}}function defaultTileLoadFunction(Ae,e){Ae.getImage().src=e}const DECIMALS=4;function fromResolutionLike(Ae){return Array.isArray(Ae)?Math.min(...Ae):Ae}class ReprojImage extends ImageWrapper{constructor(e,t,Oe,ke,Be,Ue,je){let We=e.getExtent();We&&e.canWrapX()&&(We=We.slice(),We[0]=-1/0,We[2]=1/0);let Qe=t.getExtent();Qe&&t.canWrapX()&&(Qe=Qe.slice(),Qe[0]=-1/0,Qe[2]=1/0);const Cn=Qe?getIntersection(Oe,Qe):Oe,An=getCenter(Cn),En=calculateSourceResolution(e,t,An,ke),Sn=ERROR_THRESHOLD,Tn=new Triangulation(e,t,Cn,We,En*Sn,ke),Dn=Tn.calculateSourceExtent(),ti=isEmpty(Dn)?null:Ue(Dn,En,Be),ni=ti?ImageState.IDLE:ImageState.EMPTY,ii=ti?ti.getPixelRatio():1;super(Oe,ke,ii,ni),this.targetProj_=t,this.maxSourceExtent_=We,this.triangulation_=Tn,this.targetResolution_=ke,this.targetExtent_=Oe,this.sourceImage_=ti,this.sourcePixelRatio_=ii,this.interpolate_=je,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,Oe=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render$1(t,Oe,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,t=>{const Oe=this.sourceImage_.getState();(Oe==ImageState.LOADED||Oe==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e),this.image=t}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const Oe=linearFindNearest(t,e,0);e=t[Oe]}return e}getImage(e,t,Oe,ke){const Be=this.getProjection();if(!Be||!ke||equivalent(Be,ke))return Be&&(ke=Be),this.getImageInternal(e,t,Oe,ke);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),ke)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Be,ke,e,t,Oe,(Ue,je,We)=>this.getImageInternal(Ue,je,We,Be),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,Oe,ke){if(this.loader){const Be=getRequestExtent(e,t,Oe,1),Ue=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===ke&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Be)||containsExtent(this.image.getExtent(),Be))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===Ue||fromResolutionLike(this.image.getResolution())===Ue)))return this.image;this.wantedProjection_=ke,this.wantedExtent_=Be,this.wantedResolution_=Ue,this.image=new ImageWrapper(Be,Ue,Oe,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let Oe;switch(t.getState()){case ImageState.LOADING:this.loading=!0,Oe=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,Oe=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(Oe)&&this.dispatchEvent(new ImageSourceEvent(Oe,t))}}function defaultImageLoadFunction(Ae,e){Ae.getImage().src=e}function getRequestExtent(Ae,e,t,Oe){const ke=e/t,Be=getCenter(Ae),Ue=ceil(getWidth(Ae)/ke,DECIMALS),je=ceil(getHeight(Ae)/ke,DECIMALS),We=ceil((Oe-1)*Ue/2,DECIMALS),Qe=Ue+2*We,Cn=ceil((Oe-1)*je/2,DECIMALS),An=je+2*Cn;return getForViewAndSize(Be,ke,0,[Qe,An])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(Ae,e,t,Oe,ke){ke.WIDTH=t[0],ke.HEIGHT=t[1];const Be=Oe.getAxisOrientation(),Ue=compareVersions(ke.VERSION,"1.3")>=0;ke[Ue?"CRS":"SRS"]=Oe.getCode();const je=Ue&&Be.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return ke.BBOX=je.join(","),appendParams(Ae,ke)}function getImageSrc(Ae,e,t,Oe,ke,Be,Ue){Be=Object.assign({REQUEST:"GetMap"},Be);const je=e/t,We=[round(getWidth(Ae)/je,DECIMALS),round(getHeight(Ae)/je,DECIMALS)];if(t!=1)switch(Ue){case"geoserver":const Cn=90*t+.5|0;"FORMAT_OPTIONS"in Be?Be.FORMAT_OPTIONS+=";dpi:"+Cn:Be.FORMAT_OPTIONS="dpi:"+Cn;break;case"mapserver":Be.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":Be.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(ke,Ae,We,Oe,Be)}function getRequestParams(Ae,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},Ae)}function createLoader(Ae){const e=Ae.hidpi===void 0?!0:Ae.hidpi,t=get$3(Ae.projection||"EPSG:3857"),Oe=Ae.ratio||1.5,ke=Ae.load||decode$1,Be=Ae.crossOrigin??null;return(Ue,je,We)=>{Ue=getRequestExtent(Ue,je,We,Oe),We!=1&&(!e||Ae.serverType===void 0)&&(We=1);const Qe=getImageSrc(Ue,je,We,t,Ae.url,getRequestParams(Ae.params,"GetMap"),Ae.serverType),Cn=new Image;return Cn.crossOrigin=Be,ke(Cn,Qe).then(An=>({image:An,extent:Ue,pixelRatio:We}))}}function getFeatureInfoUrl(Ae,e,t){if(Ae.url===void 0)return;const Oe=get$3(Ae.projection||"EPSG:3857"),ke=getForViewAndSize(e,t,0,GETFEATUREINFO_IMAGE_SIZE),Be={QUERY_LAYERS:Ae.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Be,getRequestParams(Ae.params,"GetFeatureInfo"),Ae.params);const Ue=floor((e[0]-ke[0])/t,DECIMALS),je=floor((ke[3]-e[1])/t,DECIMALS),We=compareVersions(Be.VERSION,"1.3")>=0;return Be[We?"I":"X"]=Ue,Be[We?"J":"Y"]=je,getRequestUrl(Ae.url,ke,GETFEATUREINFO_IMAGE_SIZE,Oe,Be)}function getLegendUrl(Ae,e){if(Ae.url===void 0)return;const t={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const Oe=get$3(Ae.projection||"EPSG:3857").getMetersPerUnit()||1,ke=28e-5;t.SCALE=e*Oe/ke}if(Object.assign(t,Ae.params),Ae.params!==void 0&&t.LAYER===void 0){const Oe=t.LAYERS;if(!(!Array.isArray(Oe)||Oe.length!==1))return;t.LAYER=Oe}return appendParams(Ae.url,t)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,Oe,ke){const Be=get$3(Oe),Ue=this.getProjection()||Be;let je=this.getTileGrid();je||(je=this.getTileGridForProjection(Ue));const We=transform$1(e,Be,Ue),Qe=calculateSourceResolution(Ue,Be,e,t),Cn=je.getZForResolution(Qe,this.zDirection),An=je.getResolution(Cn),En=je.getTileCoordForCoordAndZ(We,Cn);if(je.getResolutions().length<=En[0])return;let Sn=je.getTileCoordExtent(En,this.tmpExtent_);const Tn=this.gutter_;Tn!==0&&(Sn=buffer(Sn,An*Tn,Sn));const Dn={QUERY_LAYERS:this.params_.LAYERS};Object.assign(Dn,getRequestParams(this.params_,"GetFeatureInfo"),ke);const ti=Math.floor((We[0]-Sn[0])/An),ni=Math.floor((Sn[3]-We[1])/An);return Dn[this.v13_?"I":"X"]=ti,Dn[this.v13_?"J":"Y"]=ni,this.getRequestUrl_(En,Sn,1,Ue||Be,Dn)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const Oe={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const ke=this.params_.LAYERS;if(!(!Array.isArray(ke)||ke.length===1))return;Oe.LAYER=ke}if(e!==void 0){const ke=this.getProjection()?this.getProjection().getMetersPerUnit():1,Be=28e-5;Oe.SCALE=e*ke/Be}return Object.assign(Oe,t),appendParams(this.urls[0],Oe)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,Oe,ke,Be){const Ue=this.urls;if(!Ue)return;let je;if(Ue.length==1)je=Ue[0];else{const We=modulo(hash(e),Ue.length);je=Ue[We]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(ke)).getResolution(e[0]),Oe,ke,je,Be,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const Oe in this.params_)t[e++]=Oe+"-"+this.params_[Oe];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,Oe){let ke=this.getTileGrid();if(ke||(ke=this.getTileGridForProjection(Oe)),ke.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const Be=ke.getResolution(e[0]);let Ue=ke.getTileCoordExtent(e,this.tmpExtent_);const je=this.gutter_;je!==0&&(Ue=buffer(Ue,Be*je,Ue));const We=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,Ue,t,Oe,We)}}let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",Oe=e.tileGrid;let ke=e.urls;ke===void 0&&e.url!==void 0&&(ke=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:Oe,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:ke,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),ke&&ke.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(ke.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,Oe={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(Oe,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,Oe):e.replace(/\{(\w+?)\}/g,function(Ue,je){return je.toLowerCase()in Oe?Oe[je.toLowerCase()]:Ue});const ke=this.tileGrid,Be=this.dimensions_;return function(Ue,je,We){if(!Ue)return;const Qe={TileMatrix:ke.getMatrixId(Ue[0]),TileCol:Ue[1],TileRow:Ue[2]};Object.assign(Qe,Be);let Cn=e;return t=="KVP"?Cn=appendParams(Cn,Qe):Cn=Cn.replace(/\{(\w+?)\}/g,function(An,En){return encodeURIComponent(Qe[En])}),Cn}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,Oe,ke){const Be=get$3(Oe),Ue=this.getProjection();Ue&&Ue!==Be&&(t=calculateSourceResolution(Ue,Be,e,t),e=transform$1(e,Be,Ue));const je={url:this.url_,params:{...this.params_,...ke},projection:Ue||Be};return getFeatureInfoUrl(je,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,Oe,ke){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==ke)&&(this.loaderProjection_=ke,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:ke,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Be,Ue)=>(this.image.setImage(Be),this.imageLoadFunction_(this.image,Ue),decode$1(Be))})),super.getImageInternal(e,t,Oe,ke))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(Ae,e,t){const Oe=Ae.getCenterInternal();if(Oe){const ke=[Oe[0]+e[0],Oe[1]+e[1]];Ae.animateInternal({duration:t!==void 0?t:250,easing:linear,center:Ae.getConstrainedCenter(ke)})}}function zoomByDelta(Ae,e,t,Oe){const ke=Ae.getZoom();if(ke===void 0)return;const Be=Ae.getConstrainedZoom(ke+e),Ue=Ae.getResolutionForZoom(Be);Ae.getAnimating()&&Ae.cancelAnimations(),Ae.animate({resolution:Ue,anchor:t,duration:Oe!==void 0?Oe:250,easing:easeOut})}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const Oe=e.originalEvent,ke=e.map,Be=e.coordinate,Ue=Oe.shiftKey?-this.delta_:this.delta_,je=ke.getView();zoomByDelta(je,Ue,Be,this.duration_),Oe.preventDefault(),t=!0}return!t}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const Oe=this.handleUpEvent(e);this.handlingDownUpSequence=Oe&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const Oe=this.handleDownEvent(e);this.handlingDownUpSequence=Oe,t=this.stopDown(Oe)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(Ae){const e=Ae.length;let t=0,Oe=0;for(let ke=0;ke<e;ke++)t+=Ae[ke].clientX,Oe+=Ae[ke].clientY;return{clientX:t/e,clientY:Oe/e}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,Oe="px",ke=this.element_.style;ke.left=Math.min(e[0],t[0])+Oe,ke.top=Math.min(e[1],t[1])+Oe,ke.width=Math.abs(t[0]-e[0])+Oe,ke.height=Math.abs(t[1]-e[1])+Oe}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,ke=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);ke[4]=ke[0].slice(),this.geometry_?this.geometry_.setCoordinates([ke]):this.geometry_=new Polygon([ke])}getGeometry(){return this.geometry_}}function all(Ae){const e=arguments;return function(t){let Oe=!0;for(let ke=0,Be=e.length;ke<Be&&(Oe=Oe&&e[ke](t),!!Oe);++ke);return Oe}}const altKeyOnly=function(Ae){const e=Ae.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(Ae){const e=Ae.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(Ae){const e=Ae.map.getTargetElement(),t=e.getRootNode(),Oe=Ae.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(Oe):e.contains(Oe)},focusWithTabindex=function(Ae){const e=Ae.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?focus(Ae):!0},always$1=TRUE,mouseActionButton=function(Ae){const e=Ae.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(Ae){return Ae.type=="pointermove"},singleClick=function(Ae){return Ae.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(Ae){const e=Ae.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(Ae){const e=Ae.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(Ae){const e=Ae.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(Ae){const e=Ae.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(Ae){const e=Ae.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(Ae){const e=Ae.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.coordinate=t,this.mapBrowserEvent=Oe}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,Oe){const ke=Oe[0]-t[0],Be=Oe[1]-t[1];return ke*ke+Be*Be>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const Oe=this.targetPointers,ke=t.getEventPixel(centroid(Oe));if(Oe.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(ke[0],ke[1]),this.lastCentroid){const Be=[this.lastCentroid[0]-ke[0],ke[1]-this.lastCentroid[1]],je=e.map.getView();scale$3(Be,je.getResolution()),rotate$1(Be,je.getRotation()),je.adjustCenterInternal(Be)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=ke,this.lastPointersCount_=Oe.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,Oe=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const ke=this.kinetic_.getDistance(),Be=this.kinetic_.getAngle(),Ue=Oe.getCenterInternal(),je=t.getPixelFromCoordinateInternal(Ue),We=t.getCoordinateFromPixelInternal([je[0]-ke*Math.cos(Be),je[1]-ke*Math.sin(Be)]);Oe.animateInternal({center:Oe.getConstrainedCenter(We),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,Oe.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const Oe=e.map.getView();return this.lastCentroid=null,Oe.getAnimating()&&Oe.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(Ae){if(Ae!==void 0)return 0}function none$1(Ae){if(Ae!==void 0)return Ae}function createSnapToN(Ae){const e=2*Math.PI/Ae;return function(t,Oe){if(Oe)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(Ae){const e=toRadians(5);return function(t,Oe){return Oe||t===void 0?t:Math.abs(t)<=e?0:t}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,Oe=t.getView();if(Oe.getConstraints().rotation===disable)return;const ke=t.getSize(),Be=e.pixel,Ue=Math.atan2(ke[1]/2-Be[1],Be[0]-ke[0]/2);if(this.lastAngle_!==void 0){const je=Ue-this.lastAngle_;Oe.adjustRotationInternal(-je)}this.lastAngle_=Ue}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const Oe=this.getMap().getView();let ke=this.getGeometry();if(this.out_){const Be=Oe.rotatedExtentForGeometry(ke),Ue=Oe.getResolutionForExtentInternal(Be),je=Oe.getResolution()/Ue;ke=ke.clone(),ke.scale(je*je)}Oe.fitInternal(ke,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.map=t,this.frameState=Oe!==void 0?Oe:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,Oe,ke,Be,Ue){super(e,t,Be),this.originalEvent=Oe,this.pixel_=null,this.coordinate_=null,this.dragging=ke!==void 0?ke:!1,this.activePointers=Ue}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},Oe=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=Oe===void 0&&!t.managed?1/0:Oe,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(Ae,e,t){return function(Oe,ke,Be,Ue,je){if(!Oe)return;if(!ke&&!e)return Oe;const We=e?0:Be[0]*ke,Qe=e?0:Be[1]*ke,Cn=je?je[0]:0,An=je?je[1]:0;let En=Ae[0]+We/2+Cn,Sn=Ae[2]-We/2+Cn,Tn=Ae[1]+Qe/2+An,Dn=Ae[3]-Qe/2+An;En>Sn&&(En=(Sn+En)/2,Sn=En),Tn>Dn&&(Tn=(Dn+Tn)/2,Dn=Tn);let ti=clamp(Oe[0],En,Sn),ni=clamp(Oe[1],Tn,Dn);if(Ue&&t&&ke){const ii=30*ke;ti+=-ii*Math.log(1+Math.max(0,En-Oe[0])/ii)+ii*Math.log(1+Math.max(0,Oe[0]-Sn)/ii),ni+=-ii*Math.log(1+Math.max(0,Tn-Oe[1])/ii)+ii*Math.log(1+Math.max(0,Oe[1]-Dn)/ii)}return[ti,ni]}}function none(Ae){return Ae}function getViewportClampedResolution(Ae,e,t,Oe){const ke=getWidth(e)/t[0],Be=getHeight(e)/t[1];return Oe?Math.min(Ae,Math.max(ke,Be)):Math.min(Ae,Math.min(ke,Be))}function getSmoothClampedResolution(Ae,e,t){let Oe=Math.min(Ae,e);const ke=50;return Oe*=Math.log(1+ke*Math.max(0,Ae/e-1))/ke+1,t&&(Oe=Math.max(Oe,t),Oe/=Math.log(1+ke*Math.max(0,t/Ae-1))/ke+1),clamp(Oe,t/2,e*2)}function createSnapToResolutions(Ae,e,t,Oe){return e=e!==void 0?e:!0,function(ke,Be,Ue,je){if(ke!==void 0){const We=Ae[0],Qe=Ae[Ae.length-1],Cn=t?getViewportClampedResolution(We,t,Ue,Oe):We;if(je)return e?getSmoothClampedResolution(ke,Cn,Qe):clamp(ke,Qe,Cn);const An=Math.min(Cn,ke),En=Math.floor(linearFindNearest(Ae,An,Be));return Ae[En]>Cn&&En<Ae.length-1?Ae[En+1]:Ae[En]}}}function createSnapToPower(Ae,e,t,Oe,ke,Be){return Oe=Oe!==void 0?Oe:!0,t=t!==void 0?t:0,function(Ue,je,We,Qe){if(Ue!==void 0){const Cn=ke?getViewportClampedResolution(e,ke,We,Be):e;if(Qe)return Oe?getSmoothClampedResolution(Ue,Cn,t):clamp(Ue,t,Cn);const An=1e-9,En=Math.ceil(Math.log(e/Cn)/Math.log(Ae)-An),Sn=-je*(.5-An)+.5,Tn=Math.min(Cn,Ue),Dn=Math.floor(Math.log(e/Tn)/Math.log(Ae)+Sn),ti=Math.max(En,Dn),ni=e/Math.pow(Ae,ti);return clamp(ni,t,Cn)}}}function createMinMaxResolution(Ae,e,t,Oe,ke){return t=t!==void 0?t:!0,function(Be,Ue,je,We){if(Be!==void 0){const Qe=Oe?getViewportClampedResolution(Ae,Oe,je,ke):Ae;return!t||!We?clamp(Be,e,Qe):getSmoothClampedResolution(Be,Qe,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const je in ViewProperty)delete t[je];this.setProperties(t,!0);const Oe=createResolutionConstraint(e);this.maxResolution_=Oe.maxResolution,this.minResolution_=Oe.minResolution,this.zoomFactor_=Oe.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=Oe.minZoom;const ke=createCenterConstraint(e),Be=Oe.constraint,Ue=createRotationConstraint(e);this.constraints_={center:ke,resolution:Be,rotation:Ue},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const Oe=this.getCenterInternal();if(Oe){const ke=e||[0,0,0,0];t=t||[0,0,0,0];const Be=this.getResolution(),Ue=Be/2*(ke[3]-t[3]+t[1]-ke[1]),je=Be/2*(ke[0]-t[0]+t[2]-ke[2]);this.setCenterInternal([Oe[0]+Ue,Oe[1]-je])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let Oe=0;Oe<t.length;++Oe){let ke=arguments[Oe];ke.center&&(ke=Object.assign({},ke),ke.center=fromUserCoordinate(ke.center,this.getProjection())),ke.anchor&&(ke=Object.assign({},ke),ke.anchor=fromUserCoordinate(ke.anchor,this.getProjection())),t[Oe]=ke}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,Oe;t>1&&typeof arguments[t-1]=="function"&&(Oe=arguments[t-1],--t);let ke=0;for(;ke<t&&!this.isDef();++ke){const Cn=arguments[ke];Cn.center&&this.setCenterInternal(Cn.center),Cn.zoom!==void 0?this.setZoom(Cn.zoom):Cn.resolution&&this.setResolution(Cn.resolution),Cn.rotation!==void 0&&this.setRotation(Cn.rotation)}if(ke===t){Oe&&animationCallback(Oe,!0);return}let Be=Date.now(),Ue=this.targetCenter_.slice(),je=this.targetResolution_,We=this.targetRotation_;const Qe=[];for(;ke<t;++ke){const Cn=arguments[ke],An={start:Be,complete:!1,anchor:Cn.anchor,duration:Cn.duration!==void 0?Cn.duration:1e3,easing:Cn.easing||inAndOut,callback:Oe};if(Cn.center&&(An.sourceCenter=Ue,An.targetCenter=Cn.center.slice(),Ue=An.targetCenter),Cn.zoom!==void 0?(An.sourceResolution=je,An.targetResolution=this.getResolutionForZoom(Cn.zoom),je=An.targetResolution):Cn.resolution&&(An.sourceResolution=je,An.targetResolution=Cn.resolution,je=An.targetResolution),Cn.rotation!==void 0){An.sourceRotation=We;const En=modulo(Cn.rotation-We+Math.PI,2*Math.PI)-Math.PI;An.targetRotation=We+En,We=An.targetRotation}isNoopAnimation(An)?An.complete=!0:Be+=An.duration,Qe.push(An)}this.animations_.push(Qe),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,Oe=this.animations_.length;t<Oe;++t){const ke=this.animations_[t];if(ke[0].callback&&animationCallback(ke[0].callback,!1),!e)for(let Be=0,Ue=ke.length;Be<Ue;++Be){const je=ke[Be];if(!je.complete){e=je.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let Oe=this.animations_.length-1;Oe>=0;--Oe){const ke=this.animations_[Oe];let Be=!0;for(let Ue=0,je=ke.length;Ue<je;++Ue){const We=ke[Ue];if(We.complete)continue;const Qe=e-We.start;let Cn=We.duration>0?Qe/We.duration:1;Cn>=1?(We.complete=!0,Cn=1):Be=!1;const An=We.easing(Cn);if(We.sourceCenter){const En=We.sourceCenter[0],Sn=We.sourceCenter[1],Tn=We.targetCenter[0],Dn=We.targetCenter[1];this.nextCenter_=We.targetCenter;const ti=En+An*(Tn-En),ni=Sn+An*(Dn-Sn);this.targetCenter_=[ti,ni]}if(We.sourceResolution&&We.targetResolution){const En=An===1?We.targetResolution:We.sourceResolution+An*(We.targetResolution-We.sourceResolution);if(We.anchor){const Sn=this.getViewportSize_(this.getRotation()),Tn=this.constraints_.resolution(En,0,Sn,!0);this.targetCenter_=this.calculateCenterZoom(Tn,We.anchor)}this.nextResolution_=We.targetResolution,this.targetResolution_=En,this.applyTargetState_(!0)}if(We.sourceRotation!==void 0&&We.targetRotation!==void 0){const En=An===1?modulo(We.targetRotation+Math.PI,2*Math.PI)-Math.PI:We.sourceRotation+An*(We.targetRotation-We.sourceRotation);if(We.anchor){const Sn=this.constraints_.rotation(En,!0);this.targetCenter_=this.calculateCenterRotate(Sn,We.anchor)}this.nextRotation_=We.targetRotation,this.targetRotation_=En}if(this.applyTargetState_(!0),t=!0,!We.complete)break}if(Be){this.animations_[Oe]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Ue=ke[0].callback;Ue&&animationCallback(Ue,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let Oe;const ke=this.getCenterInternal();return ke!==void 0&&(Oe=[ke[0]-t[0],ke[1]-t[1]],rotate$1(Oe,e-this.getRotation()),add$1(Oe,t)),Oe}calculateCenterZoom(e,t){let Oe;const ke=this.getCenterInternal(),Be=this.getResolution();if(ke!==void 0&&Be!==void 0){const Ue=t[0]-e*(t[0]-ke[0])/Be,je=t[1]-e*(t[1]-ke[1])/Be;Oe=[Ue,je]}return Oe}getViewportSize_(e){const t=this.viewportSize_;if(e){const Oe=t[0],ke=t[1];return[Math.abs(Oe*Math.cos(e))+Math.abs(ke*Math.sin(e)),Math.abs(Oe*Math.sin(e))+Math.abs(ke*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const Oe=this.getResolution();assert(Oe!==void 0,"The view resolution is not defined");const ke=this.getRotation();return assert(ke!==void 0,"The view rotation is not defined"),getForViewAndSize(t,Oe,ke,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const Oe=getWidth(e)/t[0],ke=getHeight(e)/t[1];return Math.max(Oe,ke)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),Oe=this.minResolution_,ke=Math.log(t/Oe)/Math.log(e);return function(Be){return t/Math.pow(e,Be*ke)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),Oe=this.getConstrainedResolution(this.maxResolution_),ke=this.minResolution_,Be=Math.log(Oe/ke)/t;return function(Ue){return Math.log(Oe/Ue)/t/Be}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const Oe=this.padding_;return Oe&&(t=[t[0]-Oe[1]-Oe[3],t[1]-Oe[0]-Oe[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),Oe=this.getRotation();let ke=this.getCenterInternal();const Be=this.padding_;if(Be){const Ue=this.getViewportSizeMinusPadding_();ke=calculateCenterOn(ke,this.getViewportSize_(),[Ue[0]/2+Be[3],Ue[1]/2+Be[0]],t,Oe)}return{center:ke.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:Oe,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,Oe,ke;if(this.resolutions_){const Be=linearFindNearest(this.resolutions_,e,1);t=Be,Oe=this.resolutions_[Be],Be==this.resolutions_.length-1?ke=2:ke=Oe/this.resolutions_[Be+1]}else Oe=this.maxResolution_,ke=this.zoomFactor_;return t+Math.log(Oe/e)/Math.log(ke)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const Oe=clamp(Math.floor(e),0,this.resolutions_.length-2),ke=this.resolutions_[Oe]/this.resolutions_[Oe+1];return this.resolutions_[Oe]/Math.pow(ke,clamp(e-Oe,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let Oe;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const ke=fromUserExtent(e,this.getProjection());Oe=fromExtent(ke)}else if(e.getType()==="Circle"){const ke=fromUserExtent(e.getExtent(),this.getProjection());Oe=fromExtent(ke),Oe.rotate(this.getRotation(),getCenter(ke))}else Oe=e;this.fitInternal(Oe,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),Oe=Math.cos(t),ke=Math.sin(-t),Be=e.getFlatCoordinates(),Ue=e.getStride();let je=1/0,We=1/0,Qe=-1/0,Cn=-1/0;for(let An=0,En=Be.length;An<En;An+=Ue){const Sn=Be[An]*Oe-Be[An+1]*ke,Tn=Be[An]*ke+Be[An+1]*Oe;je=Math.min(je,Sn),We=Math.min(We,Tn),Qe=Math.max(Qe,Sn),Cn=Math.max(Cn,Tn)}return[je,We,Qe,Cn]}fitInternal(e,t){t=t||{};let Oe=t.size;Oe||(Oe=this.getViewportSizeMinusPadding_());const ke=t.padding!==void 0?t.padding:[0,0,0,0],Be=t.nearest!==void 0?t.nearest:!1;let Ue;t.minResolution!==void 0?Ue=t.minResolution:t.maxZoom!==void 0?Ue=this.getResolutionForZoom(t.maxZoom):Ue=0;const je=this.rotatedExtentForGeometry(e);let We=this.getResolutionForExtentInternal(je,[Oe[0]-ke[1]-ke[3],Oe[1]-ke[0]-ke[2]]);We=isNaN(We)?Ue:Math.max(We,Ue),We=this.getConstrainedResolution(We,Be?0:1);const Qe=this.getRotation(),Cn=Math.sin(Qe),An=Math.cos(Qe),En=getCenter(je);En[0]+=(ke[1]-ke[3])/2*We,En[1]+=(ke[0]-ke[2])/2*We;const Sn=En[0]*An-En[1]*Cn,Tn=En[1]*An+En[0]*Cn,Dn=this.getConstrainedCenter([Sn,Tn],We),ti=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:We,center:Dn,duration:t.duration,easing:t.easing},ti):(this.targetResolution_=We,this.targetCenter_=Dn,this.applyTargetState_(!1,!0),animationCallback(ti,!0))}centerOn(e,t,Oe){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,Oe)}centerOnInternal(e,t,Oe){this.setCenterInternal(calculateCenterOn(e,t,Oe,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,Oe,ke){let Be;const Ue=this.padding_;if(Ue&&e){const je=this.getViewportSizeMinusPadding_(-Oe),We=calculateCenterOn(e,ke,[je[0]/2+Ue[3],je[1]/2+Ue[0]],t,Oe);Be=[e[0]-We[0],e[1]-We[1]]}return Be}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const Oe=this.getAnimating()||this.getInteracting(),ke=this.getViewportSize_(this.getRotation()),Be=this.constraints_.resolution(this.targetResolution_*e,0,ke,Oe);t&&(this.targetCenter_=this.calculateCenterZoom(Be,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const Oe=this.getAnimating()||this.getInteracting(),ke=this.constraints_.rotation(this.targetRotation_+e,Oe);t&&(this.targetCenter_=this.calculateCenterRotate(ke,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const Oe=this.getAnimating()||this.getInteracting()||t,ke=this.constraints_.rotation(this.targetRotation_,Oe),Be=this.getViewportSize_(ke),Ue=this.constraints_.resolution(this.targetResolution_,0,Be,Oe),je=this.constraints_.center(this.targetCenter_,Ue,Be,Oe,this.calculateCenterShift(this.targetCenter_,Ue,ke,Be));this.get(ViewProperty.ROTATION)!==ke&&this.set(ViewProperty.ROTATION,ke),this.get(ViewProperty.RESOLUTION)!==Ue&&(this.set(ViewProperty.RESOLUTION,Ue),this.set("zoom",this.getZoom(),!0)),(!je||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),je))&&this.set(ViewProperty.CENTER,je),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,Oe){e=e!==void 0?e:200;const ke=t||0,Be=this.constraints_.rotation(this.targetRotation_),Ue=this.getViewportSize_(Be),je=this.constraints_.resolution(this.targetResolution_,ke,Ue),We=this.constraints_.center(this.targetCenter_,je,Ue,!1,this.calculateCenterShift(this.targetCenter_,je,Be,Ue));if(e===0&&!this.cancelAnchor_){this.targetResolution_=je,this.targetRotation_=Be,this.targetCenter_=We,this.applyTargetState_();return}Oe=Oe||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==je||this.getRotation()!==Be||!this.getCenterInternal()||!equals(this.getCenterInternal(),We))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Be,center:We,resolution:je,duration:e,easing:easeOut,anchor:Oe}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,Oe){Oe=Oe&&fromUserCoordinate(Oe,this.getProjection()),this.endInteractionInternal(e,t,Oe)}endInteractionInternal(e,t,Oe){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,Oe))}getConstrainedCenter(e,t){const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),Oe)}getConstrainedZoom(e,t){const Oe=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(Oe,t))}getConstrainedResolution(e,t){t=t||0;const Oe=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,Oe)}}function animationCallback(Ae,e){setTimeout(function(){Ae(e)},0)}function createCenterConstraint(Ae){if(Ae.extent!==void 0){const t=Ae.smoothExtentConstraint!==void 0?Ae.smoothExtentConstraint:!0;return createExtent(Ae.extent,Ae.constrainOnlyCenter,t)}const e=createProjection(Ae.projection,"EPSG:3857");if(Ae.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none}function createResolutionConstraint(Ae){let e,t,Oe,Ue=Ae.minZoom!==void 0?Ae.minZoom:DEFAULT_MIN_ZOOM,je=Ae.maxZoom!==void 0?Ae.maxZoom:28;const We=Ae.zoomFactor!==void 0?Ae.zoomFactor:2,Qe=Ae.multiWorld!==void 0?Ae.multiWorld:!1,Cn=Ae.smoothResolutionConstraint!==void 0?Ae.smoothResolutionConstraint:!0,An=Ae.showFullExtent!==void 0?Ae.showFullExtent:!1,En=createProjection(Ae.projection,"EPSG:3857"),Sn=En.getExtent();let Tn=Ae.constrainOnlyCenter,Dn=Ae.extent;if(!Qe&&!Dn&&En.isGlobal()&&(Tn=!1,Dn=Sn),Ae.resolutions!==void 0){const ti=Ae.resolutions;t=ti[Ue],Oe=ti[je]!==void 0?ti[je]:ti[ti.length-1],Ae.constrainResolution?e=createSnapToResolutions(ti,Cn,!Tn&&Dn,An):e=createMinMaxResolution(t,Oe,Cn,!Tn&&Dn,An)}else{const ni=(Sn?Math.max(getWidth(Sn),getHeight(Sn)):360*METERS_PER_UNIT$1.degrees/En.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),ii=ni/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=Ae.maxResolution,t!==void 0?Ue=0:t=ni/Math.pow(We,Ue),Oe=Ae.minResolution,Oe===void 0&&(Ae.maxZoom!==void 0?Ae.maxResolution!==void 0?Oe=t/Math.pow(We,je):Oe=ni/Math.pow(We,je):Oe=ii),je=Ue+Math.floor(Math.log(t/Oe)/Math.log(We)),Oe=t/Math.pow(We,je-Ue),Ae.constrainResolution?e=createSnapToPower(We,t,Oe,Cn,!Tn&&Dn,An):e=createMinMaxResolution(t,Oe,Cn,!Tn&&Dn,An)}return{constraint:e,maxResolution:t,minResolution:Oe,minZoom:Ue,zoomFactor:We}}function createRotationConstraint(Ae){if(Ae.enableRotation!==void 0?Ae.enableRotation:!0){const t=Ae.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none$1:typeof t=="number"?createSnapToN(t):none$1}return disable}function isNoopAnimation(Ae){return!(Ae.sourceCenter&&Ae.targetCenter&&!equals(Ae.sourceCenter,Ae.targetCenter)||Ae.sourceResolution!==Ae.targetResolution||Ae.sourceRotation!==Ae.targetRotation)}function calculateCenterOn(Ae,e,t,Oe,ke){const Be=Math.cos(-ke);let Ue=Math.sin(-ke),je=Ae[0]*Be-Ae[1]*Ue,We=Ae[1]*Be+Ae[0]*Ue;je+=(e[0]/2-t[0])*Oe,We+=(t[1]-e[1]/2)*Oe,Ue=-Ue;const Qe=je*Be-We*Ue,Cn=We*Be+je*Ue;return[Qe,Cn]}let Layer$1=class extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const Oe=e.source?e.source:null;this.setSource(Oe)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const Oe=this.getMapInternal();!e&&Oe&&(e=Oe.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&Oe&&(t.layerStatesArray=Oe.getLayerGroup().getLayerStatesArray());let ke;if(t.layerStatesArray){if(ke=t.layerStatesArray.find(Ue=>Ue.layer===this),!ke)return!1}else ke=this.getLayerState();const Be=this.getExtent();return inView(ke,t.viewState)&&(!Be||intersects$1(Be,t.extent))}getAttributions(e){var Be;if(!this.isVisible(e))return[];const t=(Be=this.getSource())==null?void 0:Be.getAttributions();if(!t)return[];const Oe=e instanceof View?e.getViewStateAndExtent():e;let ke=t(Oe);return Array.isArray(ke)||(ke=[ke]),ke}render(e,t){const Oe=this.getRenderer();return Oe.prepareFrame(e)?(this.rendered=!0,Oe.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,Oe=this.getLayerState(!1);assert(!t.some(ke=>ke.layer===Oe.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(Oe)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function inView(Ae,e){if(!Ae.visible)return!1;const t=e.resolution;if(t<Ae.minResolution||t>=Ae.maxResolution)return!1;const Oe=e.zoom;return Oe>Ae.minZoom&&Oe<=Ae.maxZoom}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(Ae,e){e=e||xyz.whitepoint[2].E;var t=Ae[0]/e[0],Oe=Ae[1]/e[1],ke=Ae[2]/e[2],Be,Ue,je;return Be=t*3.240969941904521+Oe*-1.537383177570093+ke*-.498610760293,Ue=t*-.96924363628087+Oe*1.87596750150772+ke*.041555057407175,je=t*.055630079696993+Oe*-.20397695888897+ke*1.056971514242878,Be=Be>.0031308?1.055*Math.pow(Be,1/2.4)-.055:Be=Be*12.92,Ue=Ue>.0031308?1.055*Math.pow(Ue,1/2.4)-.055:Ue=Ue*12.92,je=je>.0031308?1.055*Math.pow(je,1/2.4)-.055:je=je*12.92,Be=Math.min(Math.max(0,Be),1),Ue=Math.min(Math.max(0,Ue),1),je=Math.min(Math.max(0,je),1),[Be*255,Ue*255,je*255]};rgb.xyz=function(Ae,e){var t=Ae[0]/255,Oe=Ae[1]/255,ke=Ae[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,Oe=Oe>.04045?Math.pow((Oe+.055)/1.055,2.4):Oe/12.92,ke=ke>.04045?Math.pow((ke+.055)/1.055,2.4):ke/12.92;var Be=t*.41239079926595+Oe*.35758433938387+ke*.18048078840183,Ue=t*.21263900587151+Oe*.71516867876775+ke*.072192315360733,je=t*.019330818715591+Oe*.11919477979462+ke*.95053215224966;return e=e||xyz.whitepoint[2].E,[Be*e[0],Ue*e[1],je*e[2]]};var luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(Ae,e,t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn;if(Be=Ae[0],Ue=Ae[1],je=Ae[2],Be===0)return[0,0,0];var ti=.0011070564598794539;return e=e||"D65",t=t||2,An=xyz.whitepoint[t][e][0],En=xyz.whitepoint[t][e][1],Sn=xyz.whitepoint[t][e][2],Tn=4*An/(An+15*En+3*Sn),Dn=9*En/(An+15*En+3*Sn),Oe=Ue/(13*Be)+Tn||0,ke=je/(13*Be)+Dn||0,Qe=Be>8?En*Math.pow((Be+16)/116,3):En*Be*ti,We=Qe*9*Oe/(4*ke)||0,Cn=Qe*(12-3*Oe-20*ke)/(4*ke)||0,[We,Qe,Cn]}};xyz.luv=function(Ae,e,t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti=.008856451679035631,ni=903.2962962962961;e=e||"D65",t=t||2,An=xyz.whitepoint[t][e][0],En=xyz.whitepoint[t][e][1],Sn=xyz.whitepoint[t][e][2],Tn=4*An/(An+15*En+3*Sn),Dn=9*En/(An+15*En+3*Sn),We=Ae[0],Qe=Ae[1],Cn=Ae[2],Oe=4*We/(We+15*Qe+3*Cn)||0,ke=9*Qe/(We+15*Qe+3*Cn)||0;var ii=Qe/En;return Be=ii<=ti?ni*ii:116*Math.pow(ii,1/3)-16,Ue=13*Be*(Oe-Tn),je=13*Be*(ke-Dn),[Be,Ue,je]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(Ae){var e=Ae[0],t=Ae[1],Oe=Ae[2],ke,Be,Ue;return Ue=Oe/360*2*Math.PI,ke=t*Math.cos(Ue),Be=t*Math.sin(Ue),[e,ke,Be]},xyz:function(Ae){return luv.xyz(lchuv.luv(Ae))}};luv.lchuv=function(Ae){var e=Ae[0],t=Ae[1],Oe=Ae[2],ke=Math.sqrt(t*t+Oe*Oe),Be=Math.atan2(Oe,t),Ue=Be*360/2/Math.PI;return Ue<0&&(Ue+=360),[e,ke,Ue]};xyz.lchuv=function(Ae){return luv.lchuv(xyz.luv(Ae))};const names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(Ae){var Cn,An;var e,t=[],Oe=1,ke;if(typeof Ae=="number")return{space:"rgb",values:[Ae>>>16,(Ae&65280)>>>8,Ae&255],alpha:1};if(typeof Ae=="number")return{space:"rgb",values:[Ae>>>16,(Ae&65280)>>>8,Ae&255],alpha:1};if(Ae=String(Ae).toLowerCase(),names$y[Ae])t=names$y[Ae].slice(),ke="rgb";else if(Ae==="transparent")Oe=0,ke="rgb",t=[0,0,0];else if(Ae[0]==="#"){var Be=Ae.slice(1),Ue=Be.length,je=Ue<=4;Oe=1,je?(t=[parseInt(Be[0]+Be[0],16),parseInt(Be[1]+Be[1],16),parseInt(Be[2]+Be[2],16)],Ue===4&&(Oe=parseInt(Be[3]+Be[3],16)/255)):(t=[parseInt(Be[0]+Be[1],16),parseInt(Be[2]+Be[3],16),parseInt(Be[4]+Be[5],16)],Ue===8&&(Oe=parseInt(Be[6]+Be[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),ke="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(Ae)){var We=e[1];ke=We.replace(/a$/,"");var Qe=ke==="cmyk"?4:ke==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),ke==="color"&&(ke=t.shift()),t=t.map(function(En,Sn){if(En[En.length-1]==="%")return En=parseFloat(En)/100,Sn===3?En:ke==="rgb"?En*255:ke[0]==="h"||ke[0]==="l"&&!Sn?En*100:ke==="lab"?En*125:ke==="lch"?Sn<2?En*150:En*360:ke[0]==="o"&&!Sn?En:ke==="oklab"?En*.4:ke==="oklch"?Sn<2?En*.4:En*360:En;if(ke[Sn]==="h"||Sn===2&&ke[ke.length-1]==="h"){if(baseHues[En]!==void 0)return baseHues[En];if(En.endsWith("deg"))return parseFloat(En);if(En.endsWith("turn"))return parseFloat(En)*360;if(En.endsWith("grad"))return parseFloat(En)*360/400;if(En.endsWith("rad"))return parseFloat(En)*180/Math.PI}return En==="none"?0:parseFloat(En)}),Oe=t.length>Qe?t.pop():1}else/[0-9](?:\s|\/|,)/.test(Ae)&&(t=Ae.match(/([0-9]+)/g).map(function(En){return parseFloat(En)}),ke=((An=(Cn=Ae.match(/([a-z])/ig))==null?void 0:Cn.join(""))==null?void 0:An.toLowerCase())||"rgb");return{space:ke,values:t,alpha:Oe}}var hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(Ae){var e=Ae[0]/360,t=Ae[1]/100,Oe=Ae[2]/100,ke,Be,Ue,je,We,Qe=0;if(t===0)return We=Oe*255,[We,We,We];for(Be=Oe<.5?Oe*(1+t):Oe+t-Oe*t,ke=2*Oe-Be,je=[0,0,0];Qe<3;)Ue=e+1/3*-(Qe-1),Ue<0?Ue++:Ue>1&&Ue--,We=6*Ue<1?ke+(Be-ke)*6*Ue:2*Ue<1?Be:3*Ue<2?ke+(Be-ke)*(2/3-Ue)*6:ke,je[Qe++]=We*255;return je}};rgb.hsl=function(Ae){var e=Ae[0]/255,t=Ae[1]/255,Oe=Ae[2]/255,ke=Math.min(e,t,Oe),Be=Math.max(e,t,Oe),Ue=Be-ke,je,We,Qe;return Be===ke?je=0:e===Be?je=(t-Oe)/Ue:t===Be?je=2+(Oe-e)/Ue:Oe===Be&&(je=4+(e-t)/Ue),je=Math.min(je*60,360),je<0&&(je+=360),Qe=(ke+Be)/2,Be===ke?We=0:Qe<=.5?We=Ue/(Be+ke):We=Ue/(2-Be-ke),[je,We*100,Qe*100]};function rgba$1(Ae){Array.isArray(Ae)&&Ae.raw&&(Ae=String.raw(...arguments)),Ae instanceof Number&&(Ae=+Ae);var e,t=parse$3(Ae);if(!t.space)return[];const Oe=t.space[0]==="h"?hsl.min:rgb.min,ke=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],Oe[0]),ke[0]),e[1]=Math.min(Math.max(t.values[1],Oe[1]),ke[1]),e[2]=Math.min(Math.max(t.values[2],Oe[2]),ke[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const NO_COLOR=[NaN,NaN,NaN,0];function asString(Ae){return typeof Ae=="string"?Ae:toString$2(Ae)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(Ae){if(Ae.length===4)return Ae;const e=Ae.slice();return e[3]=1,e}function rgbaToLcha(Ae){const e=xyz.lchuv(rgb.xyz(Ae));return e[3]=Ae[3],e}function lchaToRgba(Ae){const e=xyz.rgb(lchuv.xyz(Ae));return e[3]=Ae[3],e}function fromString(Ae){if(Ae==="none")return NO_COLOR;if(cache.hasOwnProperty(Ae))return cache[Ae];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const Oe in cache)t++&3||(delete cache[Oe],--cacheSize)}const e=rgba$1(Ae);if(e.length!==4)throw new Error('failed to parse "'+Ae+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+Ae+'" as color');return normalize(e),cache[Ae]=e,++cacheSize,e}function asArray(Ae){return Array.isArray(Ae)?Ae:fromString(Ae)}function normalize(Ae){return Ae[0]=clamp(Ae[0]+.5|0,0,255),Ae[1]=clamp(Ae[1]+.5|0,0,255),Ae[2]=clamp(Ae[2]+.5|0,0,255),Ae[3]=clamp(Ae[3],0,1),Ae}function toString$2(Ae){let e=Ae[0];e!=(e|0)&&(e=e+.5|0);let t=Ae[1];t!=(t|0)&&(t=t+.5|0);let Oe=Ae[2];Oe!=(Oe|0)&&(Oe=Oe+.5|0);const ke=Ae[3]===void 0?1:Math.round(Ae[3]*1e3)/1e3;return"rgba("+e+","+t+","+Oe+","+ke+")"}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const Oe=this.cache_[t];!(e++&3)&&!Oe.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,Oe){const ke=getCacheKey$1(e,t,Oe);return ke in this.cache_?this.cache_[ke]:null}getPattern(e,t,Oe){const ke=getCacheKey$1(e,t,Oe);return ke in this.patternCache_?this.patternCache_[ke]:null}set(e,t,Oe,ke,Be){const Ue=getCacheKey$1(e,t,Oe),je=Ue in this.cache_;this.cache_[Ue]=ke,Be&&(ke.getImageState()===ImageState.IDLE&&ke.load(),ke.getImageState()===ImageState.LOADING?ke.ready().then(()=>{this.patternCache_[Ue]=getSharedCanvasContext2D().createPattern(ke.getImage(1),"repeat")}):this.patternCache_[Ue]=getSharedCanvasContext2D().createPattern(ke.getImage(1),"repeat")),je||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(Ae,e,t){const Oe=t?asArray(t):"null";return e+":"+Ae+":"+Oe}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,t,Oe,ke,Be){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=Oe,this.canvas_={},this.color_=Be,this.imageState_=ke===void 0?ImageState.IDLE:ke,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],Oe=createCanvasContext2D(e,t);Oe.fillRect(0,0,e,t),this.hitDetectionImage_=Oe.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,Oe=createCanvasContext2D(Math.ceil(t.width*e),Math.ceil(t.height*e)),ke=Oe.canvas;Oe.scale(e,e),Oe.drawImage(t,0,0),Oe.globalCompositeOperation="multiply",Oe.fillStyle=asString(this.color_),Oe.fillRect(0,0,ke.width/e,ke.height/e),Oe.globalCompositeOperation="destination-in",Oe.drawImage(t,0,0),this.canvas_[e]=ke}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const t=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,t),e())};this.addEventListener(EventType.CHANGE,t)}})),this.ready_}}function get$2(Ae,e,t,Oe,ke,Be){let Ue=e===void 0?void 0:shared.get(e,t,ke);return Ue||(Ue=new IconImage(Ae,Ae&&"src"in Ae?Ae.src||void 0:e,t,Oe,ke),shared.set(e,t,ke,Ue,Be)),Be&&Ue&&!shared.getPattern(e,t,ke)&&shared.set(e,t,ke,Ue,Be),Ue}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}function asColorLike(Ae){return Ae?Array.isArray(Ae)?toString$2(Ae):typeof Ae=="object"&&"src"in Ae?asCanvasPattern(Ae):Ae:null}function asCanvasPattern(Ae){if(!Ae.offset||!Ae.size)return shared.getPattern(Ae.src,"anonymous",Ae.color);const e=Ae.src+":"+Ae.offset,t=shared.getPattern(e,void 0,Ae.color);if(t)return t;const Oe=shared.get(Ae.src,"anonymous",null);if(Oe.getImageState()!==ImageState.LOADED)return null;const ke=createCanvasContext2D(Ae.size[0],Ae.size[1]);return ke.drawImage(Oe.getImage(1),Ae.offset[0],Ae.offset[1],Ae.size[0],Ae.size[1],0,0,Ae.size[0],Ae.size[1]),get$2(ke.canvas,e,void 0,ImageState.LOADED,Ae.color,!0),shared.getPattern(e,void 0,Ae.color)}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],Oe=t.length,ke="wmytzilWMYTZIL@#/&?$%10";let Be,Ue;function je(Qe,Cn,An){let En=!0;for(let Sn=0;Sn<Oe;++Sn){const Tn=t[Sn];if(Ue=measureTextWidth(Qe+" "+Cn+" "+e+Tn,ke),An!=Tn){const Dn=measureTextWidth(Qe+" "+Cn+" "+e+An+","+Tn,ke);En=En&&Dn!=Ue}}return!!En}function We(){let Qe=!0;const Cn=checkedFonts.getKeys();for(let An=0,En=Cn.length;An<En;++An){const Sn=Cn[An];if(checkedFonts.get(Sn)<100){const[Tn,Dn,ti]=Sn.split(`
`);je(Tn,Dn,ti)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(Sn,100)):(checkedFonts.set(Sn,checkedFonts.get(Sn)+1,!0),Qe=!1)}}Qe&&(clearInterval(Be),Be=void 0)}return function(Qe){const Cn=getFontParameters(Qe);if(!Cn)return;const An=Cn.families;for(let En=0,Sn=An.length;En<Sn;++En){const Tn=An[En],Dn=Cn.style+`
`+Cn.weight+`
`+Tn;checkedFonts.get(Dn)===void 0&&(checkedFonts.set(Dn,100,!0),je(Cn.style,Cn.weight,Tn)||(checkedFonts.set(Dn,0,!0),Be===void 0&&(Be=setInterval(We,32))))}}}(),measureTextHeight=function(){let Ae;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const Oe=getFontParameters(e),ke=measureText$1(e,"Žg");t=(isNaN(Number(Oe.lineHeight))?1.2:Number(Oe.lineHeight))*(ke.actualBoundingBoxAscent+ke.actualBoundingBoxDescent)}else Ae||(Ae=document.createElement("div"),Ae.innerHTML="M",Ae.style.minHeight="0",Ae.style.maxHeight="none",Ae.style.height="auto",Ae.style.padding="0",Ae.style.border="none",Ae.style.position="absolute",Ae.style.display="block",Ae.style.left="-99999px"),Ae.style.font=e,document.body.appendChild(Ae),t=Ae.offsetHeight,document.body.removeChild(Ae);textHeights[e]=t}return t}}();function measureText$1(Ae,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),Ae!=measureFont&&(measureContext$1.font=Ae,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(Ae,e){return measureText$1(Ae,e).width}function measureAndCacheTextWidth(Ae,e,t){if(e in t)return t[e];const Oe=e.split(`
`).reduce((ke,Be)=>Math.max(ke,measureTextWidth(Ae,Be)),0);return t[e]=Oe,Oe}function getTextDimensions(Ae,e){const t=[],Oe=[],ke=[];let Be=0,Ue=0,je=0,We=0;for(let Qe=0,Cn=e.length;Qe<=Cn;Qe+=2){const An=e[Qe];if(An===`
`||Qe===Cn){Be=Math.max(Be,Ue),ke.push(Ue),Ue=0,je+=We,We=0;continue}const En=e[Qe+1]||Ae.font,Sn=measureTextWidth(En,An);t.push(Sn),Ue+=Sn;const Tn=measureTextHeight(En);Oe.push(Tn),We=Math.max(We,Tn)}return{width:Be,height:je,widths:t,heights:Oe,lineWidths:ke}}function drawImageOrLabel(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn){Ae.save(),t!==1&&(Ae.globalAlpha===void 0?Ae.globalAlpha=An=>An.globalAlpha*=t:Ae.globalAlpha*=t),e&&Ae.transform.apply(Ae,e),Oe.contextInstructions?(Ae.translate(We,Qe),Ae.scale(Cn[0],Cn[1]),executeLabelInstructions(Oe,Ae)):Cn[0]<0||Cn[1]<0?(Ae.translate(We,Qe),Ae.scale(Cn[0],Cn[1]),Ae.drawImage(Oe,ke,Be,Ue,je,0,0,Ue,je)):Ae.drawImage(Oe,ke,Be,Ue,je,We,Qe,Ue*Cn[0],je*Cn[1]),Ae.restore()}function executeLabelInstructions(Ae,e){const t=Ae.contextInstructions;for(let Oe=0,ke=t.length;Oe<ke;Oe+=2)Array.isArray(t[Oe+1])?e[t[Oe]].apply(e,t[Oe+1]):e[t[Oe]]=t[Oe+1]}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]/2-t[0]/Oe[0],e[1]/2+t[1]/Oe[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var Be,Ue;const t=(Be=this.fill_)==null?void 0:Be.getKey(),Oe=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let ke=(Ue=shared.get(Oe,null,null))==null?void 0:Ue.getImage(1);if(!ke){const je=this.renderOptions_,We=Math.ceil(je.size*e),Qe=createCanvasContext2D(We,We);this.draw_(je,Qe,e),ke=Qe.canvas,shared.set(Oe,null,null,new IconImage(ke,void 0,null,ImageState.LOADED,null))}return ke}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,Oe){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let ke=this.radius,Be=this.radius2_===void 0?ke:this.radius2_;if(ke<Be){const Pi=ke;ke=Be,Be=Pi}const Ue=this.radius2_===void 0?this.points_:this.points_*2,je=2*Math.PI/Ue,We=Be*Math.sin(je),Qe=Math.sqrt(Be*Be-We*We),Cn=ke-Qe,An=Math.sqrt(We*We+Cn*Cn),En=An/We;if(e==="miter"&&En<=Oe)return En*t;const Sn=t/2/En,Tn=t/2*(Cn/An),ti=Math.sqrt((ke+Sn)*(ke+Sn)+Tn*Tn)-ke;if(this.radius2_===void 0||e==="bevel")return ti*2;const ni=ke*Math.sin(je),ii=Math.sqrt(ke*ke-ni*ni),si=Be-ii,ci=Math.sqrt(ni*ni+si*si)/ni;if(ci<=Oe){const Pi=ci*t/2-Be-ke;return 2*Math.max(ti,Pi)}return ti*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,Oe=0,ke=null,Be=0,Ue,je=0;this.stroke_&&(Ue=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),je=this.stroke_.getWidth()??defaultLineWidth,ke=this.stroke_.getLineDash(),Be=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,Oe=this.stroke_.getMiterLimit()??defaultMiterLimit);const We=this.calculateLineJoinSize_(t,je,Oe),Qe=Math.max(this.radius,this.radius2_||0),Cn=Math.ceil(2*Qe+We);return{strokeStyle:Ue,strokeWidth:je,size:Cn,lineCap:e,lineDash:ke,lineDashOffset:Be,lineJoin:t,miterLimit:Oe}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,Oe){if(t.scale(Oe,Oe),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let ke=this.fill_.getColor();ke===null&&(ke=defaultFillStyle),t.fillStyle=asColorLike(ke),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let Oe=this.fill_.getColor(),ke=0;typeof Oe=="string"&&(Oe=asArray(Oe)),Oe===null?ke=1:Array.isArray(Oe)&&(ke=Oe.length===4?Oe[3]:1),ke===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const Oe=this.radius;if(t===1/0)e.arc(0,0,Oe,0,2*Math.PI);else{const ke=this.radius2_===void 0?Oe:this.radius2_;this.radius2_!==void 0&&(t*=2);const Be=this.angle_-Math.PI/2,Ue=2*Math.PI/t;for(let je=0;je<t;je++){const We=Be+je*Ue,Qe=je%2===0?Oe:ke;e.lineTo(Qe*Math.cos(We),Qe*Math.sin(We))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ImageState.IDLE&&t.load(),t.getImageState()===ImageState.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Df{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Df({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(Ae){let e;if(typeof Ae=="function")e=Ae;else{let t;Array.isArray(Ae)?t=Ae:(assert(typeof Ae.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[Ae]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(Ae,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),Oe=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:t,stroke:Oe,radius:5}),fill:t,stroke:Oe})]}return defaultStyles}function createEditingStyle(){const Ae={},e=[255,255,255,1],t=[0,153,255,1],Oe=3;return Ae.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],Ae.MultiPolygon=Ae.Polygon,Ae.LineString=[new Style$1({stroke:new Stroke({color:e,width:Oe+2})}),new Style$1({stroke:new Stroke({color:t,width:Oe})})],Ae.MultiLineString=Ae.LineString,Ae.Circle=Ae.Polygon.concat(Ae.LineString),Ae.Point=[new Style$1({image:new CircleStyle({radius:Oe*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:Oe/2})}),zIndex:1/0})],Ae.MultiPoint=Ae.Point,Ae.GeometryCollection=Ae.Polygon.concat(Ae.LineString,Ae.Point),Ae}function defaultGeometryFunction(Ae){return Ae.getGeometry()}function calculateScale(Ae,e,t,Oe){return t!==void 0&&Oe!==void 0?[t/Ae,Oe/e]:t!==void 0?t/Ae:Oe!==void 0?Oe/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,Oe=e.rotation!==void 0?e.rotation:0,ke=e.scale!==void 0?e.scale:1,Be=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:Oe,scale:ke,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Be,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const Ue=e.img!==void 0?e.img:null;let je=e.src;assert(!(je!==void 0&&Ue),"`image` and `src` cannot be provided at the same time"),(je===void 0||je.length===0)&&Ue&&(je=Ue.src||getUid(Ue)),assert(je!==void 0&&je.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let We;if(e.src!==void 0?We=ImageState.IDLE:Ue!==void 0&&("complete"in Ue?Ue.complete?We=Ue.src?ImageState.LOADED:ImageState.IDLE:We=ImageState.LOADING:We=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(Ue,je,this.crossOrigin_,We,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let Qe,Cn;if(e.size)[Qe,Cn]=e.size;else{const An=this.getImage(1);if(An.width&&An.height)Qe=An.width,Cn=An.height;else if(An instanceof HTMLImageElement){this.initialOptions_=e;const En=()=>{if(this.unlistenImageChange(En),!this.initialOptions_)return;const Sn=this.iconImage_.getSize();this.setScale(calculateScale(Sn[0],Sn[1],e.width,e.height))};this.listenImageChange(En);return}}Qe!==void 0&&this.setScale(calculateScale(Qe,Cn,e.width,e.height))}}clone(){let e,t,Oe;return this.initialOptions_?(t=this.initialOptions_.width,Oe=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:Oe,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const ke=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!ke)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=ke[0]),this.anchorYUnits_=="fraction"&&(e[1]*=ke[1])}if(this.anchorOrigin_!="top-left"){if(!ke)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+ke[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+ke[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),Oe=this.getScaleArray();return[e[0]-t[0]/Oe[0],e[1]+t[1]/Oe[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),Oe=this.iconImage_.getSize();if(!t||!Oe)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=Oe[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=Oe[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(Ae){return Ae in typeNames}function typeName(Ae){const e=[];for(const t of namedTypes)includesType(Ae,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(Ae,e){return(Ae&e)===e}function isType(Ae,e){return Ae===e}class LiteralExpression{constructor(e,t){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=t}}class CallExpression{constructor(e,t,...Oe){this.type=e,this.operator=t,this.args=Oe}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function parse$2(Ae,e,t){switch(typeof Ae){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Ae?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,Ae)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(Ae));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Ae);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Ae.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,Ae)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(Ae));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Ae);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,Ae)}}if(!Array.isArray(Ae))throw new Error("expression must be an array or a primitive value");if(Ae.length===0)throw new Error("empty expression");if(typeof Ae[0]=="string")return parseCallExpression(Ae,e,t);for(const Oe of Ae)if(typeof Oe!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(Ae.length!==2)throw new Error(`expected an array of two values for a size, got ${Ae.length}`);return new LiteralExpression(SizeType,Ae)}if(isType(e,ColorType$1)){if(Ae.length===3)return new LiteralExpression(ColorType$1,[...Ae,1]);if(Ae.length===4)return new LiteralExpression(ColorType$1,Ae);throw new Error(`expected an array of 3 or 4 values for a color, got ${Ae.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,Ae)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(withNoArgs),[Ops.Zoom]:createCallExpressionParser(withNoArgs),[Ops.Time]:createCallExpressionParser(withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(Ae,e,t){const Oe=Ae.length-1,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be){const Ue=Ae[Be+1];switch(typeof Ue){case"number":{ke[Be]=new LiteralExpression(NumberType$1,Ue);break}case"string":{ke[Be]=new LiteralExpression(StringType$1,Ue);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${Ue}`)}Be===0&&t.properties.add(String(Ue))}return ke}function withVarArgs(Ae,e,t){const Oe=Ae[1];if(typeof Oe!="string")throw new Error("expected a string argument for var operation");return t.variables.add(Oe),[new LiteralExpression(StringType$1,Oe)]}function usesFeatureId(Ae,e,t){t.featureId=!0}function usesGeometryType(Ae,e,t){t.geometryType=!0}function withNoArgs(Ae,e,t){const Oe=Ae[0];if(Ae.length!==1)throw new Error(`expected no arguments for ${Oe} operation`);return[]}function hasArgsCount(Ae,e){return function(t,Oe,ke){const Be=t[0],Ue=t.length-1;if(Ae===e){if(Ue!==Ae){const je=Ae===1?"":"s";throw new Error(`expected ${Ae} argument${je} for ${Be}, got ${Ue}`)}}else if(Ue<Ae||Ue>e){const je=e===1/0?`${Ae} or more`:`${Ae} to ${e}`;throw new Error(`expected ${je} arguments for ${Be}, got ${Ue}`)}}}function withArgsOfReturnType(Ae,e,t){const Oe=Ae.length-1,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be){const Ue=parse$2(Ae[Be+1],e,t);ke[Be]=Ue}return ke}function withArgsOfType(Ae){return function(e,t,Oe){const ke=e.length-1,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue){const je=parse$2(e[Ue+1],Ae,Oe);Be[Ue]=je}return Be}}function hasOddArgs(Ae,e,t){const Oe=Ae[0],ke=Ae.length-1;if(ke%2===0)throw new Error(`expected an odd number of arguments for ${Oe}, got ${ke} instead`)}function hasEvenArgs(Ae,e,t){const Oe=Ae[0],ke=Ae.length-1;if(ke%2===1)throw new Error(`expected an even number of arguments for operation ${Oe}, got ${ke} instead`)}function withMatchArgs(Ae,e,t){const Oe=Ae.length-1,ke=StringType$1|NumberType$1|BooleanType$1,Be=parse$2(Ae[1],ke,t),Ue=parse$2(Ae[Ae.length-1],e,t),je=new Array(Oe-2);for(let We=0;We<Oe-2;We+=2){try{const Qe=parse$2(Ae[We+2],Be.type,t);je[We]=Qe}catch(Qe){throw new Error(`failed to parse argument ${We+1} of match expression: ${Qe.message}`)}try{const Qe=parse$2(Ae[We+3],Ue.type,t);je[We+1]=Qe}catch(Qe){throw new Error(`failed to parse argument ${We+2} of match expression: ${Qe.message}`)}}return[Be,...je,Ue]}function withInterpolateArgs(Ae,e,t){const Oe=Ae[1];let ke;switch(Oe[0]){case"linear":ke=1;break;case"exponential":const We=Oe[1];if(typeof We!="number"||We<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(We)} instead`);ke=We;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(Oe)}`)}const Be=new LiteralExpression(NumberType$1,ke);let Ue;try{Ue=parse$2(Ae[2],NumberType$1,t)}catch(We){throw new Error(`failed to parse argument 1 in interpolate expression: ${We.message}`)}const je=new Array(Ae.length-3);for(let We=0;We<je.length;We+=2){try{const Qe=parse$2(Ae[We+3],NumberType$1,t);je[We]=Qe}catch(Qe){throw new Error(`failed to parse argument ${We+2} for interpolate expression: ${Qe.message}`)}try{const Qe=parse$2(Ae[We+4],e,t);je[We+1]=Qe}catch(Qe){throw new Error(`failed to parse argument ${We+3} for interpolate expression: ${Qe.message}`)}}return[Be,Ue,...je]}function withCaseArgs(Ae,e,t){const Oe=parse$2(Ae[Ae.length-1],e,t),ke=new Array(Ae.length-1);for(let Be=0;Be<ke.length-1;Be+=2){try{const Ue=parse$2(Ae[Be+1],BooleanType$1,t);ke[Be]=Ue}catch(Ue){throw new Error(`failed to parse argument ${Be} of case expression: ${Ue.message}`)}try{const Ue=parse$2(Ae[Be+2],Oe.type,t);ke[Be+1]=Ue}catch(Ue){throw new Error(`failed to parse argument ${Be+1} of case expression: ${Ue.message}`)}}return ke[ke.length-1]=Oe,ke}function withInArgs(Ae,e,t){let Oe=Ae[2];if(!Array.isArray(Oe))throw new Error('the second argument for the "in" operator must be an array');let ke;if(typeof Oe[0]=="string"){if(Oe[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(Oe[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');Oe=Oe[1],ke=StringType$1}else ke=NumberType$1;const Be=new Array(Oe.length);for(let je=0;je<Be.length;je++)try{const We=parse$2(Oe[je],ke,t);Be[je]=We}catch(We){throw new Error(`failed to parse haystack item ${je} for "in" expression: ${We.message}`)}return[parse$2(Ae[1],ke,t),...Be]}function withPaletteArgs(Ae,e,t){let Oe;try{Oe=parse$2(Ae[1],NumberType$1,t)}catch(Ue){throw new Error(`failed to parse first argument in palette expression: ${Ue.message}`)}const ke=Ae[2];if(!Array.isArray(ke))throw new Error("the second argument of palette must be an array");const Be=new Array(ke.length);for(let Ue=0;Ue<Be.length;Ue++){let je;try{je=parse$2(ke[Ue],ColorType$1,t)}catch(We){throw new Error(`failed to parse color at index ${Ue} in palette expression: ${We.message}`)}if(!(je instanceof LiteralExpression))throw new Error(`the palette color at index ${Ue} must be a literal value`);Be[Ue]=je}return[Oe,...Be]}function createCallExpressionParser(...Ae){return function(e,t,Oe){const ke=e[0];let Be;for(let Ue=0;Ue<Ae.length;Ue++){const je=Ae[Ue](e,t,Oe);if(Ue==Ae.length-1){if(!je)throw new Error("expected last argument validator to return the parsed args");Be=je}}return new CallExpression(t,ke,...Be)}}function parseCallExpression(Ae,e,t){const Oe=Ae[0],ke=parsers[Oe];if(!ke)throw new Error(`unknown operator: ${Oe}`);return ke(Ae,e,t)}function computeGeometryType(Ae){if(!Ae)return"";const e=Ae.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(Ae.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(Ae,e,t){const Oe=parse$2(Ae,e,t);return compileExpression(Oe)}function compileExpression(Ae,e){if(Ae instanceof LiteralExpression){if(Ae.type===ColorType$1&&typeof Ae.value=="string"){const Oe=fromString(Ae.value);return function(){return Oe}}return function(){return Ae.value}}const t=Ae.operator;switch(t){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(Ae);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(Ae);case Ops.Id:return Oe=>Oe.featureId;case Ops.GeometryType:return Oe=>Oe.geometryType;case Ops.Concat:{const Oe=Ae.args.map(ke=>compileExpression(ke));return ke=>"".concat(...Oe.map(Be=>Be(ke).toString()))}case Ops.Resolution:return Oe=>Oe.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(Ae);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(Ae);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(Ae);case Ops.Case:return compileCaseExpression(Ae);case Ops.Match:return compileMatchExpression(Ae);case Ops.Interpolate:return compileInterpolateExpression(Ae);case Ops.ToString:return compileConvertExpression(Ae);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(Ae,e){const t=Ae.operator,Oe=Ae.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Ae.args[Be]);switch(t){case Ops.Coalesce:return Be=>{for(let Ue=0;Ue<Oe;++Ue){const je=ke[Ue](Be);if(typeof je<"u"&&je!==null)return je}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return Be=>{for(let Ue=0;Ue<Oe;++Ue){const je=ke[Ue](Be);if(typeof je===t)return je}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(Ae,e){const Oe=Ae.args[0].value;switch(Ae.operator){case Ops.Get:return ke=>{const Be=Ae.args;let Ue=ke.properties[Oe];for(let je=1,We=Be.length;je<We;++je){const Cn=Be[je].value;Ue=Ue[Cn]}return Ue};case Ops.Var:return ke=>ke.variables[Oe];case Ops.Has:return ke=>{const Be=Ae.args;if(!(Oe in ke.properties))return!1;let Ue=ke.properties[Oe];for(let je=1,We=Be.length;je<We;++je){const Cn=Be[je].value;if(!Ue||!Object.hasOwn(Ue,Cn))return!1;Ue=Ue[Cn]}return!0};default:throw new Error(`Unsupported accessor operator ${Ae.operator}`)}}function compileComparisonExpression(Ae,e){const t=Ae.operator,Oe=compileExpression(Ae.args[0]),ke=compileExpression(Ae.args[1]);switch(t){case Ops.Equal:return Be=>Oe(Be)===ke(Be);case Ops.NotEqual:return Be=>Oe(Be)!==ke(Be);case Ops.LessThan:return Be=>Oe(Be)<ke(Be);case Ops.LessThanOrEqualTo:return Be=>Oe(Be)<=ke(Be);case Ops.GreaterThan:return Be=>Oe(Be)>ke(Be);case Ops.GreaterThanOrEqualTo:return Be=>Oe(Be)>=ke(Be);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(Ae,e){const t=Ae.operator,Oe=Ae.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Ae.args[Be]);switch(t){case Ops.Any:return Be=>{for(let Ue=0;Ue<Oe;++Ue)if(ke[Ue](Be))return!0;return!1};case Ops.All:return Be=>{for(let Ue=0;Ue<Oe;++Ue)if(!ke[Ue](Be))return!1;return!0};case Ops.Between:return Be=>{const Ue=ke[0](Be),je=ke[1](Be),We=ke[2](Be);return Ue>=je&&Ue<=We};case Ops.In:return Be=>{const Ue=ke[0](Be);for(let je=1;je<Oe;++je)if(Ue===ke[je](Be))return!0;return!1};case Ops.Not:return Be=>!ke[0](Be);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(Ae,e){const t=Ae.operator,Oe=Ae.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Ae.args[Be]);switch(t){case Ops.Multiply:return Be=>{let Ue=1;for(let je=0;je<Oe;++je)Ue*=ke[je](Be);return Ue};case Ops.Divide:return Be=>ke[0](Be)/ke[1](Be);case Ops.Add:return Be=>{let Ue=0;for(let je=0;je<Oe;++je)Ue+=ke[je](Be);return Ue};case Ops.Subtract:return Be=>ke[0](Be)-ke[1](Be);case Ops.Clamp:return Be=>{const Ue=ke[0](Be),je=ke[1](Be);if(Ue<je)return je;const We=ke[2](Be);return Ue>We?We:Ue};case Ops.Mod:return Be=>ke[0](Be)%ke[1](Be);case Ops.Pow:return Be=>Math.pow(ke[0](Be),ke[1](Be));case Ops.Abs:return Be=>Math.abs(ke[0](Be));case Ops.Floor:return Be=>Math.floor(ke[0](Be));case Ops.Ceil:return Be=>Math.ceil(ke[0](Be));case Ops.Round:return Be=>Math.round(ke[0](Be));case Ops.Sin:return Be=>Math.sin(ke[0](Be));case Ops.Cos:return Be=>Math.cos(ke[0](Be));case Ops.Atan:return Oe===2?Be=>Math.atan2(ke[0](Be),ke[1](Be)):Be=>Math.atan(ke[0](Be));case Ops.Sqrt:return Be=>Math.sqrt(ke[0](Be));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileCaseExpression(Ae,e){const t=Ae.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Ae.args[ke]);return ke=>{for(let Be=0;Be<t-1;Be+=2)if(Oe[Be](ke))return Oe[Be+1](ke);return Oe[t-1](ke)}}function compileMatchExpression(Ae,e){const t=Ae.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Ae.args[ke]);return ke=>{const Be=Oe[0](ke);for(let Ue=1;Ue<t;Ue+=2)if(Be===Oe[Ue](ke))return Oe[Ue+1](ke);return Oe[t-1](ke)}}function compileInterpolateExpression(Ae,e){const t=Ae.args.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=compileExpression(Ae.args[ke]);return ke=>{const Be=Oe[0](ke),Ue=Oe[1](ke);let je,We;for(let Qe=2;Qe<t;Qe+=2){const Cn=Oe[Qe](ke);let An=Oe[Qe+1](ke);const En=Array.isArray(An);if(En&&(An=withAlpha(An)),Cn>=Ue)return Qe===2?An:En?interpolateColor(Be,Ue,je,We,Cn,An):interpolateNumber(Be,Ue,je,We,Cn,An);je=Cn,We=An}return We}}function compileConvertExpression(Ae,e){const t=Ae.operator,Oe=Ae.args.length,ke=new Array(Oe);for(let Be=0;Be<Oe;++Be)ke[Be]=compileExpression(Ae.args[Be]);switch(t){case Ops.ToString:return Be=>{const Ue=ke[0](Be);return Ae.args[0].type===ColorType$1?toString$2(Ue):Ue.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function interpolateNumber(Ae,e,t,Oe,ke,Be){const Ue=ke-t;if(Ue===0)return Oe;const je=e-t,We=Ae===1?je/Ue:(Math.pow(Ae,je)-1)/(Math.pow(Ae,Ue)-1);return Oe+We*(Be-Oe)}function interpolateColor(Ae,e,t,Oe,ke,Be){if(ke-t===0)return Oe;const je=rgbaToLcha(Oe),We=rgbaToLcha(Be);let Qe=We[2]-je[2];Qe>180?Qe-=360:Qe<-180&&(Qe+=360);const Cn=[interpolateNumber(Ae,e,t,je[0],ke,We[0]),interpolateNumber(Ae,e,t,je[1],ke,We[1]),je[2]+interpolateNumber(Ae,e,t,0,ke,Qe),interpolateNumber(Ae,e,t,Oe[3],ke,Be[3])];return normalize(lchaToRgba(Cn))}function always(Ae){return!0}function rulesToStyleFunction(Ae){const e=newParsingContext(),t=buildRuleSet(Ae,e),Oe=newEvaluationContext();return function(ke,Be){if(Oe.properties=ke.getPropertiesInternal(),Oe.resolution=Be,e.featureId){const Ue=ke.getId();Ue!==void 0?Oe.featureId=Ue:Oe.featureId=null}return e.geometryType&&(Oe.geometryType=computeGeometryType(ke.getGeometry())),t(Oe)}}function flatStylesToStyleFunction(Ae){const e=newParsingContext(),t=Ae.length,Oe=new Array(t);for(let Ue=0;Ue<t;++Ue)Oe[Ue]=buildStyle(Ae[Ue],e);const ke=newEvaluationContext(),Be=new Array(t);return function(Ue,je){if(ke.properties=Ue.getPropertiesInternal(),ke.resolution=je,e.featureId){const Qe=Ue.getId();Qe!==void 0?ke.featureId=Qe:ke.featureId=null}let We=0;for(let Qe=0;Qe<t;++Qe){const Cn=Oe[Qe](ke);Cn&&(Be[We]=Cn,We+=1)}return Be.length=We,Be}}function buildRuleSet(Ae,e){const t=Ae.length,Oe=new Array(t);for(let ke=0;ke<t;++ke){const Be=Ae[ke],Ue="filter"in Be?buildExpression(Be.filter,BooleanType$1,e):always;let je;if(Array.isArray(Be.style)){const We=Be.style.length;je=new Array(We);for(let Qe=0;Qe<We;++Qe)je[Qe]=buildStyle(Be.style[Qe],e)}else je=[buildStyle(Be.style,e)];Oe[ke]={filter:Ue,styles:je}}return function(ke){const Be=[];let Ue=!1;for(let je=0;je<t;++je){const We=Oe[je].filter;if(We(ke)&&!(Ae[je].else&&Ue)){Ue=!0;for(const Qe of Oe[je].styles){const Cn=Qe(ke);Cn&&Be.push(Cn)}}}return Be}}function buildStyle(Ae,e){const t=buildFill(Ae,"",e),Oe=buildStroke(Ae,"",e),ke=buildText(Ae,e),Be=buildImage(Ae,e),Ue=numberEvaluator(Ae,"z-index",e);if(!t&&!Oe&&!ke&&!Be&&!isEmpty$1(Ae))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(Ae));const je=new Style$1;return function(We){let Qe=!0;if(t){const Cn=t(We);Cn&&(Qe=!1),je.setFill(Cn)}if(Oe){const Cn=Oe(We);Cn&&(Qe=!1),je.setStroke(Cn)}if(ke){const Cn=ke(We);Cn&&(Qe=!1),je.setText(Cn)}if(Be){const Cn=Be(We);Cn&&(Qe=!1),je.setImage(Cn)}return Ue&&je.setZIndex(Ue(We)),Qe?null:je}}function buildFill(Ae,e,t){let Oe;if(e+"fill-pattern-src"in Ae)Oe=patternEvaluator(Ae,e+"fill-",t);else{if(Ae[e+"fill-color"]==="none")return Be=>null;Oe=colorLikeEvaluator(Ae,e+"fill-color",t)}if(!Oe)return null;const ke=new Fill;return function(Be){const Ue=Oe(Be);return Ue===NO_COLOR?null:(ke.setColor(Ue),ke)}}function buildStroke(Ae,e,t){const Oe=numberEvaluator(Ae,e+"stroke-width",t),ke=colorLikeEvaluator(Ae,e+"stroke-color",t);if(!Oe&&!ke)return null;const Be=stringEvaluator(Ae,e+"stroke-line-cap",t),Ue=stringEvaluator(Ae,e+"stroke-line-join",t),je=numberArrayEvaluator(Ae,e+"stroke-line-dash",t),We=numberEvaluator(Ae,e+"stroke-line-dash-offset",t),Qe=numberEvaluator(Ae,e+"stroke-miter-limit",t),Cn=new Stroke;return function(An){if(ke){const En=ke(An);if(En===NO_COLOR)return null;Cn.setColor(En)}if(Oe&&Cn.setWidth(Oe(An)),Be){const En=Be(An);if(En!=="butt"&&En!=="round"&&En!=="square")throw new Error("Expected butt, round, or square line cap");Cn.setLineCap(En)}if(Ue){const En=Ue(An);if(En!=="bevel"&&En!=="round"&&En!=="miter")throw new Error("Expected bevel, round, or miter line join");Cn.setLineJoin(En)}return je&&Cn.setLineDash(je(An)),We&&Cn.setLineDashOffset(We(An)),Qe&&Cn.setMiterLimit(Qe(An)),Cn}}function buildText(Ae,e){const t="text-",Oe=stringEvaluator(Ae,t+"value",e);if(!Oe)return null;const ke=buildFill(Ae,t,e),Be=buildFill(Ae,t+"background-",e),Ue=buildStroke(Ae,t,e),je=buildStroke(Ae,t+"background-",e),We=stringEvaluator(Ae,t+"font",e),Qe=numberEvaluator(Ae,t+"max-angle",e),Cn=numberEvaluator(Ae,t+"offset-x",e),An=numberEvaluator(Ae,t+"offset-y",e),En=booleanEvaluator(Ae,t+"overflow",e),Sn=stringEvaluator(Ae,t+"placement",e),Tn=numberEvaluator(Ae,t+"repeat",e),Dn=sizeLikeEvaluator(Ae,t+"scale",e),ti=booleanEvaluator(Ae,t+"rotate-with-view",e),ni=numberEvaluator(Ae,t+"rotation",e),ii=stringEvaluator(Ae,t+"align",e),si=stringEvaluator(Ae,t+"justify",e),oi=stringEvaluator(Ae,t+"baseline",e),ci=booleanEvaluator(Ae,t+"keep-upright",e),Pi=numberArrayEvaluator(Ae,t+"padding",e),Ai=optionalDeclutterMode(Ae,t+"declutter-mode"),fi=new Text({declutterMode:Ai});return function(Oi){if(fi.setText(Oe(Oi)),ke&&fi.setFill(ke(Oi)),Be&&fi.setBackgroundFill(Be(Oi)),Ue&&fi.setStroke(Ue(Oi)),je&&fi.setBackgroundStroke(je(Oi)),We&&fi.setFont(We(Oi)),Qe&&fi.setMaxAngle(Qe(Oi)),Cn&&fi.setOffsetX(Cn(Oi)),An&&fi.setOffsetY(An(Oi)),En&&fi.setOverflow(En(Oi)),Sn){const Ni=Sn(Oi);if(Ni!=="point"&&Ni!=="line")throw new Error("Expected point or line for text-placement");fi.setPlacement(Ni)}if(Tn&&fi.setRepeat(Tn(Oi)),Dn&&fi.setScale(Dn(Oi)),ti&&fi.setRotateWithView(ti(Oi)),ni&&fi.setRotation(ni(Oi)),ii){const Ni=ii(Oi);if(Ni!=="left"&&Ni!=="center"&&Ni!=="right"&&Ni!=="end"&&Ni!=="start")throw new Error("Expected left, right, center, start, or end for text-align");fi.setTextAlign(Ni)}if(si){const Ni=si(Oi);if(Ni!=="left"&&Ni!=="right"&&Ni!=="center")throw new Error("Expected left, right, or center for text-justify");fi.setJustify(Ni)}if(oi){const Ni=oi(Oi);if(Ni!=="bottom"&&Ni!=="top"&&Ni!=="middle"&&Ni!=="alphabetic"&&Ni!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");fi.setTextBaseline(Ni)}return Pi&&fi.setPadding(Pi(Oi)),ci&&fi.setKeepUpright(ci(Oi)),fi}}function buildImage(Ae,e){return"icon-src"in Ae?buildIcon(Ae,e):"shape-points"in Ae?buildShape(Ae,e):"circle-radius"in Ae?buildCircle(Ae,e):null}function buildIcon(Ae,e){const t="icon-",Oe=t+"src",ke=requireString(Ae[Oe],Oe),Be=coordinateEvaluator(Ae,t+"anchor",e),Ue=sizeLikeEvaluator(Ae,t+"scale",e),je=numberEvaluator(Ae,t+"opacity",e),We=coordinateEvaluator(Ae,t+"displacement",e),Qe=numberEvaluator(Ae,t+"rotation",e),Cn=booleanEvaluator(Ae,t+"rotate-with-view",e),An=optionalIconOrigin(Ae,t+"anchor-origin"),En=optionalIconAnchorUnits(Ae,t+"anchor-x-units"),Sn=optionalIconAnchorUnits(Ae,t+"anchor-y-units"),Tn=optionalColorLike(Ae,t+"color"),Dn=optionalString(Ae,t+"cross-origin"),ti=optionalNumberArray(Ae,t+"offset"),ni=optionalIconOrigin(Ae,t+"offset-origin"),ii=optionalNumber(Ae,t+"width"),si=optionalNumber(Ae,t+"height"),oi=optionalSize(Ae,t+"size"),ci=optionalDeclutterMode(Ae,t+"declutter-mode"),Pi=new Icon({src:ke,anchorOrigin:An,anchorXUnits:En,anchorYUnits:Sn,color:Tn,crossOrigin:Dn,offset:ti,offsetOrigin:ni,height:si,width:ii,size:oi,declutterMode:ci});return function(Ai){return je&&Pi.setOpacity(je(Ai)),We&&Pi.setDisplacement(We(Ai)),Qe&&Pi.setRotation(Qe(Ai)),Cn&&Pi.setRotateWithView(Cn(Ai)),Ue&&Pi.setScale(Ue(Ai)),Be&&Pi.setAnchor(Be(Ai)),Pi}}function buildShape(Ae,e){const t="shape-",Oe=t+"points",ke=t+"radius",Be=requireNumber(Ae[Oe],Oe),Ue=requireNumber(Ae[ke],ke),je=buildFill(Ae,t,e),We=buildStroke(Ae,t,e),Qe=sizeLikeEvaluator(Ae,t+"scale",e),Cn=coordinateEvaluator(Ae,t+"displacement",e),An=numberEvaluator(Ae,t+"rotation",e),En=booleanEvaluator(Ae,t+"rotate-with-view",e),Sn=optionalNumber(Ae,t+"radius2"),Tn=optionalNumber(Ae,t+"angle"),Dn=optionalDeclutterMode(Ae,t+"declutter-mode"),ti=new RegularShape({points:Be,radius:Ue,radius2:Sn,angle:Tn,declutterMode:Dn});return function(ni){return je&&ti.setFill(je(ni)),We&&ti.setStroke(We(ni)),Cn&&ti.setDisplacement(Cn(ni)),An&&ti.setRotation(An(ni)),En&&ti.setRotateWithView(En(ni)),Qe&&ti.setScale(Qe(ni)),ti}}function buildCircle(Ae,e){const t="circle-",Oe=buildFill(Ae,t,e),ke=buildStroke(Ae,t,e),Be=numberEvaluator(Ae,t+"radius",e),Ue=sizeLikeEvaluator(Ae,t+"scale",e),je=coordinateEvaluator(Ae,t+"displacement",e),We=numberEvaluator(Ae,t+"rotation",e),Qe=booleanEvaluator(Ae,t+"rotate-with-view",e),Cn=optionalDeclutterMode(Ae,t+"declutter-mode"),An=new CircleStyle({radius:5,declutterMode:Cn});return function(En){return Be&&An.setRadius(Be(En)),Oe&&An.setFill(Oe(En)),ke&&An.setStroke(ke(En)),je&&An.setDisplacement(je(En)),We&&An.setRotation(We(En)),Qe&&An.setRotateWithView(Qe(En)),Ue&&An.setScale(Ue(En)),An}}function numberEvaluator(Ae,e,t){if(!(e in Ae))return;const Oe=buildExpression(Ae[e],NumberType$1,t);return function(ke){return requireNumber(Oe(ke),e)}}function stringEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],StringType$1,t);return function(ke){return requireString(Oe(ke),e)}}function patternEvaluator(Ae,e,t){const Oe=stringEvaluator(Ae,e+"pattern-src",t),ke=sizeEvaluator(Ae,e+"pattern-offset",t),Be=sizeEvaluator(Ae,e+"pattern-size",t),Ue=colorLikeEvaluator(Ae,e+"color",t);return function(je){return{src:Oe(je),offset:ke&&ke(je),size:Be&&Be(je),color:Ue&&Ue(je)}}}function booleanEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],BooleanType$1,t);return function(ke){const Be=Oe(ke);if(typeof Be!="boolean")throw new Error(`Expected a boolean for ${e}`);return Be}}function colorLikeEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],ColorType$1,t);return function(ke){return requireColorLike(Oe(ke),e)}}function numberArrayEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],NumberArrayType,t);return function(ke){return requireNumberArray(Oe(ke),e)}}function coordinateEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],NumberArrayType,t);return function(ke){const Be=requireNumberArray(Oe(ke),e);if(Be.length!==2)throw new Error(`Expected two numbers for ${e}`);return Be}}function sizeEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],NumberArrayType,t);return function(ke){return requireSize(Oe(ke),e)}}function sizeLikeEvaluator(Ae,e,t){if(!(e in Ae))return null;const Oe=buildExpression(Ae[e],NumberArrayType|NumberType$1,t);return function(ke){return requireSizeLike(Oe(ke),e)}}function optionalNumber(Ae,e){const t=Ae[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(Ae,e){const t=Ae[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(Ae,e){const t=Ae[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(Ae,e){const t=Ae[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(Ae,e){const t=Ae[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(Ae,e){const t=Ae[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(Ae,e){const t=Ae[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(Ae,e){const t=Ae[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(Ae,e){if(!Array.isArray(Ae))throw new Error(`Expected an array for ${e}`);const t=Ae.length;for(let Oe=0;Oe<t;++Oe)if(typeof Ae[Oe]!="number")throw new Error(`Expected an array of numbers for ${e}`);return Ae}function requireString(Ae,e){if(typeof Ae!="string")throw new Error(`Expected a string for ${e}`);return Ae}function requireNumber(Ae,e){if(typeof Ae!="number")throw new Error(`Expected a number for ${e}`);return Ae}function requireColorLike(Ae,e){if(typeof Ae=="string")return Ae;const t=requireNumberArray(Ae,e),Oe=t.length;if(Oe<3||Oe>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSize(Ae,e){const t=requireNumberArray(Ae,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function requireSizeLike(Ae,e){return typeof Ae=="number"?Ae:requireSize(Ae,e)}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const Oe=this.getDeclutter();Oe in e.declutter||(e.declutter[Oe]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const t=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(Ae){if(Ae===void 0)return createDefaultStyle;if(!Ae)return null;if(typeof Ae=="function"||Ae instanceof Style$1)return Ae;if(!Array.isArray(Ae))return flatStylesToStyleFunction([Ae]);if(Ae.length===0)return[];const e=Ae.length,t=Ae[0];if(t instanceof Style$1){const ke=new Array(e);for(let Be=0;Be<e;++Be){const Ue=Ae[Be];if(!(Ue instanceof Style$1))throw new Error("Expected a list of style instances");ke[Be]=Ue}return ke}if("style"in t){const ke=new Array(e);for(let Be=0;Be<e;++Be){const Ue=Ae[Be];if(!("style"in Ue))throw new Error("Expected a list of rules with a style property");ke[Be]=Ue}return rulesToStyleFunction(ke)}return flatStylesToStyleFunction(Ae)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,t,Oe,ke,Be){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,Oe){}drawFeature(e,t,Oe){}drawGeometryCollection(e,t,Oe){}drawLineString(e,t,Oe){}drawMultiLineString(e,t,Oe){}drawMultiPoint(e,t,Oe){}drawMultiPolygon(e,t,Oe){}drawPoint(e,t,Oe){}drawPolygon(e,t,Oe){}drawText(e,t,Oe){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class CanvasBuilder extends VectorContext{constructor(e,t,Oe,ke){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=ke,this.maxLineWidth=0,this.resolution=Oe,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(Oe){return Oe*t})}appendFlatPointCoordinates(e,t){const Oe=this.getBufferedMaxExtent(),ke=this.tmpCoordinate_,Be=this.coordinates;let Ue=Be.length;for(let je=0,We=e.length;je<We;je+=t)ke[0]=e[je],ke[1]=e[je+1],containsCoordinate(Oe,ke)&&(Be[Ue++]=ke[0],Be[Ue++]=ke[1]);return Ue}appendFlatLineCoordinates(e,t,Oe,ke,Be,Ue){const je=this.coordinates;let We=je.length;const Qe=this.getBufferedMaxExtent();Ue&&(t+=ke);let Cn=e[t],An=e[t+1];const En=this.tmpCoordinate_;let Sn=!0,Tn,Dn,ti;for(Tn=t+ke;Tn<Oe;Tn+=ke)En[0]=e[Tn],En[1]=e[Tn+1],ti=coordinateRelationship(Qe,En),ti!==Dn?(Sn&&(je[We++]=Cn,je[We++]=An,Sn=!1),je[We++]=En[0],je[We++]=En[1]):ti===Relationship.INTERSECTING?(je[We++]=En[0],je[We++]=En[1],Sn=!1):Sn=!0,Cn=En[0],An=En[1],Dn=ti;return(Be&&Sn||Tn===t+ke)&&(je[We++]=Cn,je[We++]=An),We}drawCustomCoordinates_(e,t,Oe,ke,Be){for(let Ue=0,je=Oe.length;Ue<je;++Ue){const We=Oe[Ue],Qe=this.appendFlatLineCoordinates(e,t,We,ke,!1,!1);Be.push(Qe),t=We}return t}drawCustom(e,t,Oe,ke,Be){this.beginGeometry(e,t,Be);const Ue=e.getType(),je=e.getStride(),We=this.coordinates.length;let Qe,Cn,An,En,Sn;switch(Ue){case"MultiPolygon":Qe=e.getOrientedFlatCoordinates(),En=[];const Tn=e.getEndss();Sn=0;for(let Dn=0,ti=Tn.length;Dn<ti;++Dn){const ni=[];Sn=this.drawCustomCoordinates_(Qe,Sn,Tn[Dn],je,ni),En.push(ni)}this.instructions.push([Instruction.CUSTOM,We,En,e,Oe,inflateMultiCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,En,e,ke||Oe,inflateMultiCoordinatesArray,Be]);break;case"Polygon":case"MultiLineString":An=[],Qe=Ue=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),Sn=this.drawCustomCoordinates_(Qe,0,e.getEnds(),je,An),this.instructions.push([Instruction.CUSTOM,We,An,e,Oe,inflateCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,An,e,ke||Oe,inflateCoordinatesArray,Be]);break;case"LineString":case"Circle":Qe=e.getFlatCoordinates(),Cn=this.appendFlatLineCoordinates(Qe,0,Qe.length,je,!1,!1),this.instructions.push([Instruction.CUSTOM,We,Cn,e,Oe,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,Cn,e,ke||Oe,inflateCoordinates,Be]);break;case"MultiPoint":Qe=e.getFlatCoordinates(),Cn=this.appendFlatPointCoordinates(Qe,je),Cn>We&&(this.instructions.push([Instruction.CUSTOM,We,Cn,e,Oe,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,Cn,e,ke||Oe,inflateCoordinates,Be]));break;case"Point":Qe=e.getFlatCoordinates(),this.coordinates.push(Qe[0],Qe[1]),Cn=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,We,Cn,e,Oe,void 0,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,We,Cn,e,ke||Oe,void 0,Be]);break}this.endGeometry(t)}beginGeometry(e,t,Oe){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e,Oe],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e,Oe],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const Oe=e.length;let ke,Be,Ue=-1;for(t=0;t<Oe;++t)ke=e[t],Be=ke[0],Be==Instruction.END_GEOMETRY?Ue=t:Be==Instruction.BEGIN_GEOMETRY&&(ke[2]=t,reverseSubArray(this.hitDetectionInstructions,Ue,t),Ue=-1)}setFillStrokeStyle(e,t){const Oe=this.state;if(e){const ke=e.getColor();Oe.fillPatternScale=ke&&typeof ke=="object"&&"src"in ke?this.pixelRatio:1,Oe.fillStyle=asColorLike(ke||defaultFillStyle)}else Oe.fillStyle=void 0;if(t){const ke=t.getColor();Oe.strokeStyle=asColorLike(ke||defaultStrokeStyle);const Be=t.getLineCap();Oe.lineCap=Be!==void 0?Be:defaultLineCap;const Ue=t.getLineDash();Oe.lineDash=Ue?Ue.slice():defaultLineDash;const je=t.getLineDashOffset();Oe.lineDashOffset=je||defaultLineDashOffset;const We=t.getLineJoin();Oe.lineJoin=We!==void 0?We:defaultLineJoin;const Qe=t.getWidth();Oe.lineWidth=Qe!==void 0?Qe:defaultLineWidth;const Cn=t.getMiterLimit();Oe.miterLimit=Cn!==void 0?Cn:defaultMiterLimit,Oe.lineWidth>this.maxLineWidth&&(this.maxLineWidth=Oe.lineWidth,this.bufferedMaxExtent_=null)}else Oe.strokeStyle=void 0,Oe.lineCap=void 0,Oe.lineDash=null,Oe.lineDashOffset=void 0,Oe.lineJoin=void 0,Oe.lineWidth=void 0,Oe.miterLimit=void 0}createFill(e){const t=e.fillStyle,Oe=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&Oe.push(e.fillPatternScale),Oe}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const Oe=e.fillStyle;(typeof Oe!="string"||e.currentFillStyle!=Oe)&&(Oe!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=Oe)}updateStrokeStyle(e,t){const Oe=e.strokeStyle,ke=e.lineCap,Be=e.lineDash,Ue=e.lineDashOffset,je=e.lineJoin,We=e.lineWidth,Qe=e.miterLimit;(e.currentStrokeStyle!=Oe||e.currentLineCap!=ke||Be!=e.currentLineDash&&!equals$2(e.currentLineDash,Be)||e.currentLineDashOffset!=Ue||e.currentLineJoin!=je||e.currentLineWidth!=We||e.currentMiterLimit!=Qe)&&(Oe!==void 0&&t.call(this,e),e.currentStrokeStyle=Oe,e.currentLineCap=ke,e.currentLineDash=Be,e.currentLineDashOffset=Ue,e.currentLineJoin=je,e.currentLineWidth=We,e.currentMiterLimit=Qe)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,Oe){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,Oe);const ke=e.getFlatCoordinates(),Be=e.getStride(),Ue=this.coordinates.length,je=this.appendFlatPointCoordinates(ke,Be);this.instructions.push([Instruction.DRAW_IMAGE,Ue,je,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ue,je,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,Oe){if(!this.image_)return;this.beginGeometry(e,t,Oe);const ke=e.getFlatCoordinates(),Be=[];for(let We=0,Qe=ke.length;We<Qe;We+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,ke.slice(We,We+2)))&&Be.push(ke[We],ke[We+1]);const Ue=this.coordinates.length,je=this.appendFlatPointCoordinates(Be,2);this.instructions.push([Instruction.DRAW_IMAGE,Ue,je,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ue,je,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const Oe=e.getAnchor(),ke=e.getSize(),Be=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=Oe[0],this.anchorY_=Oe[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=ke[1],this.opacity_=e.getOpacity(),this.originX_=Be[0],this.originY_=Be[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=ke[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke)}drawFlatCoordinates_(e,t,Oe,ke){const Be=this.coordinates.length,Ue=this.appendFlatLineCoordinates(e,t,Oe,ke,!1,!1),je=[Instruction.MOVE_TO_LINE_TO,Be,Ue];return this.instructions.push(je),this.hitDetectionInstructions.push(je),Oe}drawLineString(e,t,Oe){const ke=this.state,Be=ke.strokeStyle,Ue=ke.lineWidth;if(Be===void 0||Ue===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const je=e.getFlatCoordinates(),We=e.getStride();this.drawFlatCoordinates_(je,0,je.length,We),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t,Oe){const ke=this.state,Be=ke.strokeStyle,Ue=ke.lineWidth;if(Be===void 0||Ue===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t,Oe),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const je=e.getEnds(),We=e.getFlatCoordinates(),Qe=e.getStride();let Cn=0;for(let An=0,En=je.length;An<En;++An)Cn=this.drawFlatCoordinates_(We,Cn,je[An],Qe);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke)}drawFlatCoordinatess_(e,t,Oe,ke){const Be=this.state,Ue=Be.fillStyle!==void 0,je=Be.strokeStyle!==void 0,We=Oe.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let Qe=0;Qe<We;++Qe){const Cn=Oe[Qe],An=this.coordinates.length,En=this.appendFlatLineCoordinates(e,t,Cn,ke,!0,!je),Sn=[Instruction.MOVE_TO_LINE_TO,An,En];this.instructions.push(Sn),this.hitDetectionInstructions.push(Sn),je&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=Cn}return Ue&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),je&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const je=e.getFlatCoordinates(),We=e.getStride(),Qe=this.coordinates.length;this.appendFlatLineCoordinates(je,0,je.length,We,!1,!1);const Cn=[Instruction.CIRCLE,Qe];this.instructions.push(beginPathInstruction,Cn),this.hitDetectionInstructions.push(beginPathInstruction,Cn),ke.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),ke.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const je=e.getEnds(),We=e.getOrientedFlatCoordinates(),Qe=e.getStride();this.drawFlatCoordinatess_(We,0,je,Qe),this.endGeometry(t)}drawMultiPolygon(e,t,Oe){const ke=this.state,Be=ke.fillStyle,Ue=ke.strokeStyle;if(Be===void 0&&Ue===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,Oe),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const je=e.getEndss(),We=e.getOrientedFlatCoordinates(),Qe=e.getStride();let Cn=0;for(let An=0,En=je.length;An<En;++An)Cn=this.drawFlatCoordinatess_(We,Cn,je[An],Qe);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let Oe=0,ke=t.length;Oe<ke;++Oe)t[Oe]=snap(t[Oe],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(Ae,e,t,Oe,ke){const Be=[];let Ue=t,je=0,We=e.slice(t,2);for(;je<Ae&&Ue+ke<Oe;){const[Qe,Cn]=We.slice(-2),An=e[Ue+ke],En=e[Ue+ke+1],Sn=Math.sqrt((An-Qe)*(An-Qe)+(En-Cn)*(En-Cn));if(je+=Sn,je>=Ae){const Tn=(Ae-je+Sn)/Sn,Dn=lerp(Qe,An,Tn),ti=lerp(Cn,En,Tn);We.push(Dn,ti),Be.push(We),We=[Dn,ti],je==Ae&&(Ue+=ke),je=0}else if(je<Ae)We.push(e[Ue+ke],e[Ue+ke+1]),Ue+=ke;else{const Tn=Sn-je,Dn=lerp(Qe,An,Tn/Sn),ti=lerp(Cn,En,Tn/Sn);We.push(Dn,ti),Be.push(We),We=[Dn,ti],je=0,Ue+=ke}}return je>0&&Be.push(We),Be}function matchingChunk(Ae,e,t,Oe,ke){let Be=t,Ue=t,je=0,We=0,Qe=t,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si;for(An=t;An<Oe;An+=ke){const oi=e[An],ci=e[An+1];Tn!==void 0&&(ii=oi-Tn,si=ci-Dn,Sn=Math.sqrt(ii*ii+si*si),ti!==void 0&&(We+=En,Cn=Math.acos((ti*ii+ni*si)/(En*Sn)),Cn>Ae&&(We>je&&(je=We,Be=Qe,Ue=An),We=0,Qe=An-ke)),En=Sn,ti=ii,ni=si),Tn=oi,Dn=ci}return We+=Sn,We>je?[Qe,An]:[Be,Ue]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,Oe,ke){super(e,t,Oe,ke),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,Oe){const ke=this.textFillState_,Be=this.textStrokeState_,Ue=this.textState_;if(this.text_===""||!Ue||!ke&&!Be)return;const je=this.coordinates;let We=je.length;const Qe=e.getType();let Cn=null,An=e.getStride();if(Ue.placement==="line"&&(Qe=="LineString"||Qe=="MultiLineString"||Qe=="Polygon"||Qe=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let En;if(Cn=e.getFlatCoordinates(),Qe=="LineString")En=[Cn.length];else if(Qe=="MultiLineString")En=e.getEnds();else if(Qe=="Polygon")En=e.getEnds().slice(0,1);else if(Qe=="MultiPolygon"){const ti=e.getEndss();En=[];for(let ni=0,ii=ti.length;ni<ii;++ni)En.push(ti[ni][0])}this.beginGeometry(e,t,Oe);const Sn=Ue.repeat,Tn=Sn?void 0:Ue.textAlign;let Dn=0;for(let ti=0,ni=En.length;ti<ni;++ti){let ii;Sn?ii=lineChunk(Sn*this.resolution,Cn,Dn,En[ti],An):ii=[Cn.slice(Dn,En[ti])];for(let si=0,oi=ii.length;si<oi;++si){const ci=ii[si];let Pi=0,Ai=ci.length;if(Tn==null){const Oi=matchingChunk(Ue.maxAngle,ci,0,ci.length,2);Pi=Oi[0],Ai=Oi[1]}for(let Oi=Pi;Oi<Ai;Oi+=An)je.push(ci[Oi],ci[Oi+1]);const fi=je.length;Dn=En[ti],this.drawChars_(We,fi),We=fi}}this.endGeometry(t)}else{let En=Ue.overflow?null:[];switch(Qe){case"Point":case"MultiPoint":Cn=e.getFlatCoordinates();break;case"LineString":Cn=e.getFlatMidpoint();break;case"Circle":Cn=e.getCenter();break;case"MultiLineString":Cn=e.getFlatMidpoints(),An=2;break;case"Polygon":Cn=e.getFlatInteriorPoint(),Ue.overflow||En.push(Cn[2]/this.resolution),An=3;break;case"MultiPolygon":const ii=e.getFlatInteriorPoints();Cn=[];for(let si=0,oi=ii.length;si<oi;si+=3)Ue.overflow||En.push(ii[si+2]/this.resolution),Cn.push(ii[si],ii[si+1]);if(Cn.length===0)return;An=2;break}const Sn=this.appendFlatPointCoordinates(Cn,An);if(Sn===We)return;if(En&&(Sn-We)/2!==Cn.length/An){let ii=We/2;En=En.filter((si,oi)=>{const ci=je[(ii+oi)*2]===Cn[oi*An]&&je[(ii+oi)*2+1]===Cn[oi*An+1];return ci||--ii,ci})}this.saveTextStates_(),(Ue.backgroundFill||Ue.backgroundStroke)&&(this.setFillStrokeStyle(Ue.backgroundFill,Ue.backgroundStroke),Ue.backgroundFill&&this.updateFillStyle(this.state,this.createFill),Ue.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,Oe);let Tn=Ue.padding;if(Tn!=defaultPadding&&(Ue.scale[0]<0||Ue.scale[1]<0)){let ii=Ue.padding[0],si=Ue.padding[1],oi=Ue.padding[2],ci=Ue.padding[3];Ue.scale[0]<0&&(si=-si,ci=-ci),Ue.scale[1]<0&&(ii=-ii,oi=-oi),Tn=[ii,si,oi,ci]}const Dn=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,We,Sn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,Tn==defaultPadding?defaultPadding:Tn.map(function(ii){return ii*Dn}),!!Ue.backgroundFill,!!Ue.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,En]);const ti=1/Dn,ni=this.state.fillStyle;Ue.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,We,Sn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[ti,ti],NaN,this.declutterMode_,this.declutterImageWithText_,Tn,!!Ue.backgroundFill,!!Ue.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,En]),Ue.backgroundFill&&(this.state.fillStyle=ni,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,Oe=this.textFillState_,ke=this.strokeKey_;e&&(ke in this.strokeStates||(this.strokeStates[ke]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Be=this.textKey_;Be in this.textStates||(this.textStates[Be]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const Ue=this.fillKey_;Oe&&(Ue in this.fillStates||(this.fillStates[Ue]={fillStyle:Oe.fillStyle}))}drawChars_(e,t){const Oe=this.textStrokeState_,ke=this.textState_,Be=this.strokeKey_,Ue=this.textKey_,je=this.fillKey_;this.saveTextStates_();const We=this.pixelRatio,Qe=TEXT_ALIGN[ke.textBaseline],Cn=this.textOffsetY_*We,An=this.text_,En=Oe?Oe.lineWidth*Math.abs(ke.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,Qe,ke.overflow,je,ke.maxAngle,We,Cn,Be,En*We,An,Ue,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,Qe,ke.overflow,je&&defaultFillStyle,ke.maxAngle,We,Cn,Be,En*We,An,Ue,1/We,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let Oe,ke,Be;if(!e)this.text_="";else{const Ue=e.getFill();Ue?(ke=this.textFillState_,ke||(ke={},this.textFillState_=ke),ke.fillStyle=asColorLike(Ue.getColor()||defaultFillStyle)):(ke=null,this.textFillState_=ke);const je=e.getStroke();if(!je)Be=null,this.textStrokeState_=Be;else{Be=this.textStrokeState_,Be||(Be={},this.textStrokeState_=Be);const Dn=je.getLineDash(),ti=je.getLineDashOffset(),ni=je.getWidth(),ii=je.getMiterLimit();Be.lineCap=je.getLineCap()||defaultLineCap,Be.lineDash=Dn?Dn.slice():defaultLineDash,Be.lineDashOffset=ti===void 0?defaultLineDashOffset:ti,Be.lineJoin=je.getLineJoin()||defaultLineJoin,Be.lineWidth=ni===void 0?defaultLineWidth:ni,Be.miterLimit=ii===void 0?defaultMiterLimit:ii,Be.strokeStyle=asColorLike(je.getColor()||defaultStrokeStyle)}Oe=this.textState_;const We=e.getFont()||defaultFont;registerFont(We);const Qe=e.getScaleArray();Oe.overflow=e.getOverflow(),Oe.font=We,Oe.maxAngle=e.getMaxAngle(),Oe.placement=e.getPlacement(),Oe.textAlign=e.getTextAlign(),Oe.repeat=e.getRepeat(),Oe.justify=e.getJustify(),Oe.textBaseline=e.getTextBaseline()||defaultTextBaseline,Oe.backgroundFill=e.getBackgroundFill(),Oe.backgroundStroke=e.getBackgroundStroke(),Oe.padding=e.getPadding()||defaultPadding,Oe.scale=Qe===void 0?[1,1]:Qe;const Cn=e.getOffsetX(),An=e.getOffsetY(),En=e.getRotateWithView(),Sn=e.getKeepUpright(),Tn=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=Cn===void 0?0:Cn,this.textOffsetY_=An===void 0?0:An,this.textRotateWithView_=En===void 0?!1:En,this.textKeepUpright_=Sn===void 0?!0:Sn,this.textRotation_=Tn===void 0?0:Tn,this.strokeKey_=Be?(typeof Be.strokeStyle=="string"?Be.strokeStyle:getUid(Be.strokeStyle))+Be.lineCap+Be.lineDashOffset+"|"+Be.lineWidth+Be.lineJoin+Be.miterLimit+"["+Be.lineDash.join()+"]":"",this.textKey_=Oe.font+Oe.scale+(Oe.textAlign||"?")+(Oe.repeat||"?")+(Oe.justify||"?")+(Oe.textBaseline||"?"),this.fillKey_=ke&&ke.fillStyle?typeof ke.fillStyle=="string"?ke.fillStyle:"|"+getUid(ke.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,Oe,ke){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=ke,this.resolution_=Oe,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const Oe=this.buildersByZIndex_[t];for(const ke in Oe){const Be=Oe[ke].finish();e[t][ke]=Be}}return e}getBuilder(e,t){const Oe=e!==void 0?e.toString():"0";let ke=this.buildersByZIndex_[Oe];ke===void 0&&(ke={},this.buildersByZIndex_[Oe]=ke);let Be=ke[t];if(Be===void 0){const Ue=BATCH_CONSTRUCTORS[t];Be=new Ue(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),ke[t]=Be}return Be}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,t,Oe,ke){super(e),this.inversePixelTransform=t,this.frameState=Oe,this.context=ke}}class ZIndexContext{constructor(){Tc(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,t)=>{if(typeof getSharedCanvasContext2D()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,Oe)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,Oe),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let Oe=0,ke=t.length;Oe<ke;++Oe){const Be=t[Oe];if(typeof Be=="function"){Be(e);continue}const Ue=t[++Oe];if(typeof e[Be]=="function")e[Be](...Ue);else{if(typeof Ue=="function"){e[Be]=Ue(e);continue}e[Be]=Ue}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create$1(),this.pixelTransform=create$1(),this.inversePixelTransform=create$1(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,Oe){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let ke;try{pixelContext.drawImage(e,t,Oe,1,1,0,0,1,1),ke=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return ke}getBackground(e){let Oe=this.getLayer().getBackground();return typeof Oe=="function"&&(Oe=Oe(e.viewState.resolution)),Oe||void 0}useContainer(e,t,Oe){const ke=this.getLayer().getClassName();let Be,Ue;if(e&&e.className===ke&&(!Oe||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(Oe)))){const je=e.firstElementChild;je instanceof HTMLCanvasElement&&(Ue=je.getContext("2d"))}if(Ue&&Ue.canvas.style.transform===t?(this.container=e,this.context=Ue,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Be=document.createElement("div"),Be.className=ke;let je=Be.style;je.position="absolute",je.width="100%",je.height="100%",Ue=createCanvasContext2D();const We=Ue.canvas;Be.appendChild(We),je=We.style,je.position="absolute",je.left="0",je.transformOrigin="top left",this.container=Be,this.context=Ue}!this.containerReused&&Oe&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=Oe)}clipUnrotated(e,t,Oe){const ke=getTopLeft(Oe),Be=getTopRight(Oe),Ue=getBottomRight(Oe),je=getBottomLeft(Oe);apply(t.coordinateToPixelTransform,ke),apply(t.coordinateToPixelTransform,Be),apply(t.coordinateToPixelTransform,Ue),apply(t.coordinateToPixelTransform,je);const We=this.inversePixelTransform;apply(We,ke),apply(We,Be),apply(We,Ue),apply(We,je),e.save(),e.beginPath(),e.moveTo(Math.round(ke[0]),Math.round(ke[1])),e.lineTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(Ue[0]),Math.round(Ue[1])),e.lineTo(Math.round(je[0]),Math.round(je[1])),e.clip()}prepareContainer(e,t){const Oe=e.extent,ke=e.viewState.resolution,Be=e.viewState.rotation,Ue=e.pixelRatio,je=Math.round(getWidth(Oe)/ke*Ue),We=Math.round(getHeight(Oe)/ke*Ue);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/Ue,1/Ue,Be,-je/2,-We/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const Qe=toString$3(this.pixelTransform);if(this.useContainer(t,Qe,this.getBackground(e)),!this.containerReused){const Cn=this.context.canvas;Cn.width!=je||Cn.height!=We?(Cn.width=je,Cn.height=We):this.context.clearRect(0,0,je,We),Qe!==Cn.style.transform&&(Cn.style.transform=Qe)}}dispatchRenderEvent_(e,t,Oe){const ke=this.getLayer();if(ke.hasListener(e)){const Be=new RenderEvent(e,this.inversePixelTransform,Oe,t);ke.dispatchEvent(Be)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,t,Oe,ke,Be,Ue,je){const We=Be/2,Qe=Ue/2,Cn=ke/t,An=-Cn,En=-e[0]+je,Sn=-e[1];return compose(this.tempTransform,We,Qe,Cn,An,-Oe,En,Sn)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En=!0){let Sn=Ae[e],Tn=Ae[e+1],Dn=0,ti=0,ni=0,ii=0;function si(){Dn=Sn,ti=Tn,e+=Oe,Sn=Ae[e],Tn=Ae[e+1],ii+=ni,ni=Math.sqrt((Sn-Dn)*(Sn-Dn)+(Tn-ti)*(Tn-ti))}do si();while(e<t-Oe&&ii+ni<Be);let oi=ni===0?0:(Be-ii)/ni;const ci=lerp(Dn,Sn,oi),Pi=lerp(ti,Tn,oi),Ai=e-Oe,fi=ii,Oi=Be+je*We(Qe,ke,Cn);for(;e<t-Oe&&ii+ni<Oi;)si();oi=ni===0?0:(Oi-ii)/ni;const Ni=lerp(Dn,Sn,oi),ui=lerp(ti,Tn,oi);let li=!1;if(En)if(An){const nr=[ci,Pi,Ni,ui];rotate(nr,0,4,2,An,nr,nr),li=nr[0]>nr[2]}else li=ci>Ni;const Ri=Math.PI,Mi=[],Bi=Ai+Oe===e;e=Ai,ni=0,ii=fi,Sn=Ae[e],Tn=Ae[e+1];let er;if(Bi){si(),er=Math.atan2(Tn-ti,Sn-Dn),li&&(er+=er>0?-Ri:Ri);const nr=(Ni+ci)/2,lr=(ui+Pi)/2;return Mi[0]=[nr,lr,(Oi-Be)/2,er,ke],Mi}ke=ke.replace(/\n/g," ");for(let nr=0,lr=ke.length;nr<lr;){si();let hr=Math.atan2(Tn-ti,Sn-Dn);if(li&&(hr+=hr>0?-Ri:Ri),er!==void 0){let gr=hr-er;if(gr+=gr>Ri?-2*Ri:gr<-Ri?2*Ri:0,Math.abs(gr)>Ue)return null}er=hr;const ar=nr;let wr=0;for(;nr<lr;++nr){const gr=li?lr-nr-1:nr,vr=je*We(Qe,ke[gr],Cn);if(e+Oe<t&&ii+ni<Be+wr+vr/2)break;wr+=vr}if(nr===ar)continue;const Fi=li?ke.substring(lr-ar,lr-nr):ke.substring(ar,nr);oi=ni===0?0:(Be+wr/2-ii)/ni;const cr=lerp(Dn,Sn,oi),rr=lerp(ti,Tn,oi);Mi.push([cr,rr,wr/2,hr,Fi]),Be+=wr}return Mi}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(Ae){return Ae[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(Ae,e){return e==="start"?e=rtlRegEx.test(Ae)?"right":"left":e==="end"&&(e=rtlRegEx.test(Ae)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(Ae,e,t){return t>0&&Ae.push(`
`,""),Ae.push(e,""),Ae}class Executor{constructor(e,t,Oe,ke,Be){this.overlaps=Oe,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=ke.instructions,this.coordinates=ke.coordinates,this.coordinateCache_={},this.renderedTransform_=create$1(),this.hitDetectionInstructions=ke.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=ke.fillStates||{},this.strokeStates=ke.strokeStates||{},this.textStates=ke.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Be?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,Oe,ke){const Be=e+t+Oe+ke;if(this.labels_[Be])return this.labels_[Be];const Ue=ke?this.strokeStates[ke]:null,je=Oe?this.fillStates[Oe]:null,We=this.textStates[t],Qe=this.pixelRatio,Cn=[We.scale[0]*Qe,We.scale[1]*Qe],An=We.justify?TEXT_ALIGN[We.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,We.textAlign||defaultTextAlign),En=ke&&Ue.lineWidth?Ue.lineWidth:0,Sn=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:Tn,height:Dn,widths:ti,heights:ni,lineWidths:ii}=getTextDimensions(We,Sn),si=Tn+En,oi=[],ci=(si+2)*Cn[0],Pi=(Dn+En)*Cn[1],Ai={width:ci<0?Math.floor(ci):Math.ceil(ci),height:Pi<0?Math.floor(Pi):Math.ceil(Pi),contextInstructions:oi};(Cn[0]!=1||Cn[1]!=1)&&oi.push("scale",Cn),ke&&(oi.push("strokeStyle",Ue.strokeStyle),oi.push("lineWidth",En),oi.push("lineCap",Ue.lineCap),oi.push("lineJoin",Ue.lineJoin),oi.push("miterLimit",Ue.miterLimit),oi.push("setLineDash",[Ue.lineDash]),oi.push("lineDashOffset",Ue.lineDashOffset)),Oe&&oi.push("fillStyle",je.fillStyle),oi.push("textBaseline","middle"),oi.push("textAlign","center");const fi=.5-An;let Oi=An*si+fi*En;const Ni=[],ui=[];let li=0,Ri=0,Mi=0,Bi=0,er;for(let nr=0,lr=Sn.length;nr<lr;nr+=2){const hr=Sn[nr];if(hr===`
`){Ri+=li,li=0,Oi=An*si+fi*En,++Bi;continue}const ar=Sn[nr+1]||We.font;ar!==er&&(ke&&Ni.push("font",ar),Oe&&ui.push("font",ar),er=ar),li=Math.max(li,ni[Mi]);const wr=[hr,Oi+fi*ti[Mi]+An*(ti[Mi]-ii[Bi]),.5*(En+li)+Ri];Oi+=ti[Mi],ke&&Ni.push("strokeText",wr),Oe&&ui.push("fillText",wr),++Mi}return Array.prototype.push.apply(oi,Ni),Array.prototype.push.apply(oi,ui),this.labels_[Be]=Ai,Ai}replayTextBackground_(e,t,Oe,ke,Be,Ue,je){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,Oe),e.lineTo.apply(e,ke),e.lineTo.apply(e,Be),e.lineTo.apply(e,t),Ue&&(this.alignAndScaleFill_=Ue[2],this.fill_(e)),je&&(this.setStrokeStyle_(e,je),e.stroke())}calculateImageOrLabelDimensions_(e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti){je*=En[0],We*=En[1];let ni=Oe-je,ii=ke-We;const si=Be+Qe>e?e-Qe:Be,oi=Ue+Cn>t?t-Cn:Ue,ci=Tn[3]+si*En[0]+Tn[1],Pi=Tn[0]+oi*En[1]+Tn[2],Ai=ni-Tn[3],fi=ii-Tn[0];(Dn||An!==0)&&(p1[0]=Ai,p4[0]=Ai,p1[1]=fi,p2[1]=fi,p2[0]=Ai+ci,p3[0]=p2[0],p3[1]=fi+Pi,p4[1]=p3[1]);let Oi;return An!==0?(Oi=compose(create$1(),Oe,ke,1,1,An,-Oe,-ke),apply(Oi,p1),apply(Oi,p2),apply(Oi,p3),apply(Oi,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(Ai,Ai+ci),Math.min(fi,fi+Pi),Math.max(Ai,Ai+ci),Math.max(fi,fi+Pi),tmpExtent),Sn&&(ni=Math.round(ni),ii=Math.round(ii)),{drawImageX:ni,drawImageY:ii,drawImageW:si,drawImageH:oi,originX:Qe,originY:Cn,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:ti},canvasTransform:Oi,scale:En}}replayImageOrLabel_(e,t,Oe,ke,Be,Ue,je){const We=!!(Ue||je),Qe=ke.declutterBox,Cn=je?je[2]*ke.scale[0]/2:0;return Qe.minX-Cn<=t[0]&&Qe.maxX+Cn>=0&&Qe.minY-Cn<=t[1]&&Qe.maxY+Cn>=0&&(We&&this.replayTextBackground_(e,p1,p2,p3,p4,Ue,je),drawImageOrLabel(e,ke.canvasTransform,Be,Oe,ke.originX,ke.originY,ke.drawImageW,ke.drawImageH,ke.drawImageX,ke.drawImageY,ke.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const Oe=apply(this.renderedTransform_,[0,0]),ke=512*this.pixelRatio;e.save(),e.translate(Oe[0]%ke,Oe[1]%ke),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,Oe,ke){const Be=this.textStates[t],Ue=this.createLabel(e,t,ke,Oe),je=this.strokeStates[Oe],We=this.pixelRatio,Qe=horizontalTextAlign(Array.isArray(e)?e[0]:e,Be.textAlign||defaultTextAlign),Cn=TEXT_ALIGN[Be.textBaseline||defaultTextBaseline],An=je&&je.lineWidth?je.lineWidth:0,En=Ue.width/We-2*Be.scale[0],Sn=Qe*En+2*(.5-Qe)*An,Tn=Cn*Ue.height/We+2*(.5-Cn)*An;return{label:Ue,anchorX:Sn,anchorY:Tn}}execute_(e,t,Oe,ke,Be,Ue,je,We){const Qe=this.zIndexContext_;let Cn;this.pixelCoordinates_&&equals$2(Oe,this.renderedTransform_)?Cn=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Cn=transform2D(this.coordinates,0,this.coordinates.length,2,Oe,this.pixelCoordinates_),setFromArray(this.renderedTransform_,Oe));let An=0;const En=ke.length;let Sn=0,Tn,Dn,ti,ni,ii,si,oi,ci,Pi,Ai,fi,Oi,Ni,ui=0,li=0,Ri=null,Mi=null;const Bi=this.coordinateCache_,er=this.viewRotation_,nr=Math.round(Math.atan2(-Oe[1],Oe[0])*1e12)/1e12,lr={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:er},hr=this.instructions!=ke||this.overlaps?0:200;let ar,wr,Fi,cr;for(;An<En;){const rr=ke[An];switch(rr[0]){case Instruction.BEGIN_GEOMETRY:ar=rr[1],cr=rr[3],ar.getGeometry()?je!==void 0&&!intersects$1(je,cr.getExtent())?An=rr[2]+1:++An:An=rr[2],Qe&&(Qe.zIndex=rr[4]);break;case Instruction.BEGIN_PATH:ui>hr&&(this.fill_(e),ui=0),li>hr&&(e.stroke(),li=0),!ui&&!li&&(e.beginPath(),ii=NaN,si=NaN),++An;break;case Instruction.CIRCLE:Sn=rr[1];const vr=Cn[Sn],pr=Cn[Sn+1],_r=Cn[Sn+2],Ar=Cn[Sn+3],Sr=_r-vr,Hr=Ar-pr,es=Math.sqrt(Sr*Sr+Hr*Hr);e.moveTo(vr+es,pr),e.arc(vr,pr,es,0,2*Math.PI,!0),++An;break;case Instruction.CLOSE_PATH:e.closePath(),++An;break;case Instruction.CUSTOM:Sn=rr[1],Tn=rr[2];const ir=rr[3],mr=rr[4],dr=rr[5];lr.geometry=ir,lr.feature=ar,An in Bi||(Bi[An]=[]);const tr=Bi[An];dr?dr(Cn,Sn,Tn,2,tr):(tr[0]=Cn[Sn],tr[1]=Cn[Sn+1],tr.length=2),Qe&&(Qe.zIndex=rr[6]),mr(tr,lr),++An;break;case Instruction.DRAW_IMAGE:Sn=rr[1],Tn=rr[2],Pi=rr[3],Dn=rr[4],ti=rr[5];let Dr=rr[6];const Nr=rr[7],Pr=rr[8],kr=rr[9],Rr=rr[10];let Tr=rr[11];const Er=rr[12];let br=rr[13];ni=rr[14]||"declutter";const Ir=rr[15];if(!Pi&&rr.length>=20){Ai=rr[19],fi=rr[20],Oi=rr[21],Ni=rr[22];const Ys=this.drawLabelWithPointPlacement_(Ai,fi,Oi,Ni);Pi=Ys.label,rr[3]=Pi;const la=rr[23];Dn=(Ys.anchorX-la)*this.pixelRatio,rr[4]=Dn;const Os=rr[24];ti=(Ys.anchorY-Os)*this.pixelRatio,rr[5]=ti,Dr=Pi.height,rr[6]=Dr,br=Pi.width,rr[13]=br}let jr;rr.length>25&&(jr=rr[25]);let qr,Wr,Kr;rr.length>17?(qr=rr[16],Wr=rr[17],Kr=rr[18]):(qr=defaultPadding,Wr=!1,Kr=!1),Rr&&nr?Tr+=er:!Rr&&!nr&&(Tr-=er);let ps=0;for(;Sn<Tn;Sn+=2){if(jr&&jr[ps++]<br/this.pixelRatio)continue;const Ys=this.calculateImageOrLabelDimensions_(Pi.width,Pi.height,Cn[Sn],Cn[Sn+1],br,Dr,Dn,ti,Pr,kr,Tr,Er,Be,qr,Wr||Kr,ar),la=[e,t,Pi,Ys,Nr,Wr?Ri:null,Kr?Mi:null];if(We){let Os,Ss,_o;if(Ir){const Gs=Tn-Sn;if(!Ir[Gs]){Ir[Gs]={args:la,declutterMode:ni};continue}const zs=Ir[Gs];Os=zs.args,Ss=zs.declutterMode,delete Ir[Gs],_o=getDeclutterBox(Os)}let $o,ho;if(Os&&(Ss!=="declutter"||!We.collides(_o))&&($o=!0),(ni!=="declutter"||!We.collides(Ys.declutterBox))&&(ho=!0),Ss==="declutter"&&ni==="declutter"){const Gs=$o&&ho;$o=Gs,ho=Gs}$o&&(Ss!=="none"&&We.insert(_o),this.replayImageOrLabel_.apply(this,Os)),ho&&(ni!=="none"&&We.insert(Ys.declutterBox),this.replayImageOrLabel_.apply(this,la))}else this.replayImageOrLabel_.apply(this,la)}++An;break;case Instruction.DRAW_CHARS:const rs=rr[1],Ps=rr[2],Cs=rr[3],Ns=rr[4];Ni=rr[5];const Rs=rr[6],vs=rr[7],Ts=rr[8];Oi=rr[9];const Is=rr[10];Ai=rr[11],fi=rr[12];const js=[rr[13],rr[13]];ni=rr[14]||"declutter";const Ms=rr[15],Qs=this.textStates[fi],Do=Qs.font,ks=[Qs.scale[0]*vs,Qs.scale[1]*vs];let ws;Do in this.widths_?ws=this.widths_[Do]:(ws={},this.widths_[Do]=ws);const Ds=lineStringLength(Cn,rs,Ps,2),ml=Math.abs(ks[0])*measureAndCacheTextWidth(Do,Ai,ws);if(Ns||ml<=Ds){const Ys=this.textStates[fi].textAlign,la=(Ds-ml)*horizontalTextAlign(Ai,Ys),Os=drawTextOnPath(Cn,rs,Ps,2,Ai,la,Rs,Math.abs(ks[0]),measureAndCacheTextWidth,Do,ws,nr?0:this.viewRotation_,Ms);e:if(Os){const Ss=[];let _o,$o,ho,Gs,zs;if(Oi)for(_o=0,$o=Os.length;_o<$o;++_o){zs=Os[_o],ho=zs[4],Gs=this.createLabel(ho,fi,"",Oi),Dn=zs[2]+(ks[0]<0?-Is:Is),ti=Cs*Gs.height+(.5-Cs)*2*Is*ks[1]/ks[0]-Ts;const Hs=this.calculateImageOrLabelDimensions_(Gs.width,Gs.height,zs[0],zs[1],Gs.width,Gs.height,Dn,ti,0,0,zs[3],js,!1,defaultPadding,!1,ar);if(We&&ni==="declutter"&&We.collides(Hs.declutterBox))break e;Ss.push([e,t,Gs,Hs,1,null,null])}if(Ni)for(_o=0,$o=Os.length;_o<$o;++_o){zs=Os[_o],ho=zs[4],Gs=this.createLabel(ho,fi,Ni,""),Dn=zs[2],ti=Cs*Gs.height-Ts;const Hs=this.calculateImageOrLabelDimensions_(Gs.width,Gs.height,zs[0],zs[1],Gs.width,Gs.height,Dn,ti,0,0,zs[3],js,!1,defaultPadding,!1,ar);if(We&&ni==="declutter"&&We.collides(Hs.declutterBox))break e;Ss.push([e,t,Gs,Hs,1,null,null])}We&&ni!=="none"&&We.load(Ss.map(getDeclutterBox));for(let Hs=0,Ua=Ss.length;Hs<Ua;++Hs)this.replayImageOrLabel_.apply(this,Ss[Hs])}}++An;break;case Instruction.END_GEOMETRY:if(Ue!==void 0){ar=rr[1];const Ys=Ue(ar,cr,ni);if(Ys)return Ys}++An;break;case Instruction.FILL:hr?ui++:this.fill_(e),++An;break;case Instruction.MOVE_TO_LINE_TO:for(Sn=rr[1],Tn=rr[2],wr=Cn[Sn],Fi=Cn[Sn+1],e.moveTo(wr,Fi),ii=wr+.5|0,si=Fi+.5|0,Sn+=2;Sn<Tn;Sn+=2)wr=Cn[Sn],Fi=Cn[Sn+1],oi=wr+.5|0,ci=Fi+.5|0,(Sn==Tn-2||oi!==ii||ci!==si)&&(e.lineTo(wr,Fi),ii=oi,si=ci);++An;break;case Instruction.SET_FILL_STYLE:Ri=rr,this.alignAndScaleFill_=rr[2],ui&&(this.fill_(e),ui=0,li&&(e.stroke(),li=0)),e.fillStyle=rr[1],++An;break;case Instruction.SET_STROKE_STYLE:Mi=rr,li&&(e.stroke(),li=0),this.setStrokeStyle_(e,rr),++An;break;case Instruction.STROKE:hr?li++:e.stroke(),++An;break;default:++An;break}}ui&&this.fill_(e),li&&e.stroke()}execute(e,t,Oe,ke,Be,Ue){this.viewRotation_=ke,this.execute_(e,t,Oe,this.instructions,Be,void 0,void 0,Ue)}executeHitDetection(e,t,Oe,ke,Be){return this.viewRotation_=Oe,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,ke,Be)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(Ae=>!DECLUTTER.includes(Ae));class ExecutorGroup{constructor(e,t,Oe,ke,Be,Ue,je){this.maxExtent_=e,this.overlaps_=ke,this.pixelRatio_=Oe,this.resolution_=t,this.renderBuffer_=Ue,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create$1(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Be,je)}clip(e,t){const Oe=this.getClipCoords(t);e.beginPath(),e.moveTo(Oe[0],Oe[1]),e.lineTo(Oe[2],Oe[3]),e.lineTo(Oe[4],Oe[5]),e.lineTo(Oe[6],Oe[7]),e.clip()}createExecutors_(e,t){for(const Oe in e){let ke=this.executorsByZIndex_[Oe];ke===void 0&&(ke={},this.executorsByZIndex_[Oe]=ke);const Be=e[Oe];for(const Ue in Be){const je=Be[Ue];ke[Ue]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,je,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const Oe=this.executorsByZIndex_[t];for(let ke=0,Be=e.length;ke<Be;++ke)if(e[ke]in Oe)return!0}return!1}forEachFeatureAtCoordinate(e,t,Oe,ke,Be,Ue){ke=Math.round(ke);const je=ke*2+1,We=compose(this.hitDetectionTransform_,ke+.5,ke+.5,1/t,-1/t,-Oe,-e[0],-e[1]),Qe=!this.hitDetectionContext_;Qe&&(this.hitDetectionContext_=createCanvasContext2D(je,je,void 0,{willReadFrequently:!0}));const Cn=this.hitDetectionContext_;Cn.canvas.width!==je||Cn.canvas.height!==je?(Cn.canvas.width=je,Cn.canvas.height=je):Qe||Cn.clearRect(0,0,je,je);let An;this.renderBuffer_!==void 0&&(An=createEmpty(),extendCoordinate(An,e),buffer(An,t*(this.renderBuffer_+ke),An));const En=getPixelIndexArray(ke);let Sn;function Tn(ci,Pi,Ai){const fi=Cn.getImageData(0,0,je,je).data;for(let Oi=0,Ni=En.length;Oi<Ni;Oi++)if(fi[En[Oi]]>0){if(!Ue||Ai==="none"||Sn!=="Image"&&Sn!=="Text"||Ue.includes(ci)){const ui=(En[Oi]-3)/4,li=ke-ui%je,Ri=ke-(ui/je|0),Mi=Be(ci,Pi,li*li+Ri*Ri);if(Mi)return Mi}Cn.clearRect(0,0,je,je);break}}const Dn=Object.keys(this.executorsByZIndex_).map(Number);Dn.sort(ascending);let ti,ni,ii,si,oi;for(ti=Dn.length-1;ti>=0;--ti){const ci=Dn[ti].toString();for(ii=this.executorsByZIndex_[ci],ni=ALL.length-1;ni>=0;--ni)if(Sn=ALL[ni],si=ii[Sn],si!==void 0&&(oi=si.executeHitDetection(Cn,We,Oe,Tn,An),oi))return oi}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],je=[Oe,ke,Oe,Ue,Be,Ue,Be,ke];return transform2D(je,0,8,2,e,je),je}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,Oe,ke,Be,Ue,je){const We=Object.keys(this.executorsByZIndex_).map(Number);We.sort(je?descending:ascending),Ue=Ue||ALL;const Qe=ALL.length;for(let Cn=0,An=We.length;Cn<An;++Cn){const En=We[Cn].toString(),Sn=this.executorsByZIndex_[En];for(let Tn=0,Dn=Ue.length;Tn<Dn;++Tn){const ti=Ue[Tn],ni=Sn[ti];if(ni!==void 0){const ii=je===null?void 0:ni.getZIndexContext(),si=ii?ii.getContext():e,oi=this.maxExtent_&&ti!=="Image"&&ti!=="Text";if(oi&&(si.save(),this.clip(si,Oe)),!ii||ti==="Text"||ti==="Image"?ni.execute(si,t,Oe,ke,Be,je):ii.pushFunction(ci=>ni.execute(ci,t,Oe,ke,Be,je)),oi&&si.restore(),ii){ii.offset();const ci=We[Cn]*Qe+Tn;this.deferredZIndexContexts_[ci]||(this.deferredZIndexContexts_[ci]=[]),this.deferredZIndexContexts_[ci].push(ii)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ascending);for(let Oe=0,ke=t.length;Oe<ke;++Oe)e[t[Oe]].forEach(Be=>{Be.draw(this.renderedContext_),Be.clear()}),e[t[Oe]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(Ae){if(circlePixelIndexArrayCache[Ae]!==void 0)return circlePixelIndexArrayCache[Ae];const e=Ae*2+1,t=Ae*Ae,Oe=new Array(t+1);for(let Be=0;Be<=Ae;++Be)for(let Ue=0;Ue<=Ae;++Ue){const je=Be*Be+Ue*Ue;if(je>t)break;let We=Oe[je];We||(We=[],Oe[je]=We),We.push(((Ae+Be)*e+(Ae+Ue))*4+3),Be>0&&We.push(((Ae-Be)*e+(Ae+Ue))*4+3),Ue>0&&(We.push(((Ae+Be)*e+(Ae-Ue))*4+3),Be>0&&We.push(((Ae-Be)*e+(Ae-Ue))*4+3))}const ke=[];for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Oe[Be]&&ke.push(...Oe[Be]);return circlePixelIndexArrayCache[Ae]=ke,ke}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,Oe,ke,Be,Ue,je){super(),this.context_=e,this.pixelRatio_=t,this.extent_=Oe,this.transform_=ke,this.transformRotation_=ke?toFixed(Math.atan2(ke[1],ke[0]),10):0,this.viewRotation_=Be,this.squaredTolerance_=Ue,this.userTransform_=je,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create$1()}drawImages_(e,t,Oe,ke){if(!this.image_)return;const Be=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_),Ue=this.context_,je=this.tmpLocalTransform_,We=Ue.globalAlpha;this.imageOpacity_!=1&&(Ue.globalAlpha=We*this.imageOpacity_);let Qe=this.imageRotation_;this.transformRotation_===0&&(Qe-=this.viewRotation_),this.imageRotateWithView_&&(Qe+=this.viewRotation_);for(let Cn=0,An=Be.length;Cn<An;Cn+=2){const En=Be[Cn]-this.imageAnchorX_,Sn=Be[Cn+1]-this.imageAnchorY_;if(Qe!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const Tn=En+this.imageAnchorX_,Dn=Sn+this.imageAnchorY_;compose(je,Tn,Dn,1,1,Qe,-Tn,-Dn),Ue.save(),Ue.transform.apply(Ue,je),Ue.translate(Tn,Dn),Ue.scale(this.imageScale_[0],this.imageScale_[1]),Ue.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),Ue.restore()}else Ue.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,En,Sn,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(Ue.globalAlpha=We)}drawText_(e,t,Oe,ke){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Be=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_),Ue=this.context_;let je=this.textRotation_;for(this.transformRotation_===0&&(je-=this.viewRotation_),this.textRotateWithView_&&(je+=this.viewRotation_);t<Oe;t+=ke){const We=Be[t]+this.textOffsetX_,Qe=Be[t+1]+this.textOffsetY_;je!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(Ue.save(),Ue.translate(We-this.textOffsetX_,Qe-this.textOffsetY_),Ue.rotate(je),Ue.translate(this.textOffsetX_,this.textOffsetY_),Ue.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&Ue.strokeText(this.text_,0,0),this.textFillState_&&Ue.fillText(this.text_,0,0),Ue.restore()):(this.textStrokeState_&&Ue.strokeText(this.text_,We,Qe),this.textFillState_&&Ue.fillText(this.text_,We,Qe))}}moveToLineTo_(e,t,Oe,ke,Be){const Ue=this.context_,je=transform2D(e,t,Oe,ke,this.transform_,this.pixelCoordinates_);Ue.moveTo(je[0],je[1]);let We=je.length;Be&&(We-=2);for(let Qe=2;Qe<We;Qe+=2)Ue.lineTo(je[Qe],je[Qe+1]);return Be&&Ue.closePath(),Oe}drawRings_(e,t,Oe,ke){for(let Be=0,Ue=Oe.length;Be<Ue;++Be)t=this.moveToLineTo_(e,t,Oe[Be],ke,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),Oe=t[2]-t[0],ke=t[3]-t[1],Be=Math.sqrt(Oe*Oe+ke*ke),Ue=this.context_;Ue.beginPath(),Ue.arc(t[0],t[1],Be,0,2*Math.PI),this.fillState_&&Ue.fill(),this.strokeState_&&Ue.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const Oe=t.getGeometryFunction()(e);Oe&&(this.setStyle(t),this.drawGeometry(Oe))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let Oe=0,ke=t.length;Oe<ke;++Oe)this.drawGeometry(t[Oe])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(t,0,t.length,Oe),this.text_!==""&&this.drawText_(t,0,t.length,Oe)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),Oe=e.getStride();this.image_&&this.drawImages_(t,0,t.length,Oe),this.text_!==""&&this.drawText_(t,0,t.length,Oe)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,Oe=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(Oe,0,Oe.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const Oe=this.context_,ke=e.getFlatCoordinates();let Be=0;const Ue=e.getEnds(),je=e.getStride();Oe.beginPath();for(let We=0,Qe=Ue.length;We<Qe;++We)Be=this.moveToLineTo_(ke,Be,Ue[We],je,!1);Oe.stroke()}if(this.text_!==""){const Oe=e.getFlatMidpoints();this.drawText_(Oe,0,Oe.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,Oe=e.getOrientedFlatCoordinates();let ke=0;const Be=e.getEndss(),Ue=e.getStride();t.beginPath();for(let je=0,We=Be.length;je<We;++je){const Qe=Be[je];ke=this.drawRings_(Oe,ke,Qe,Ue)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,Oe=this.contextFillState_;Oe?Oe.fillStyle!=e.fillStyle&&(Oe.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,Oe=this.contextStrokeState_;Oe?(Oe.lineCap!=e.lineCap&&(Oe.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(Oe.lineDash,e.lineDash)||t.setLineDash(Oe.lineDash=e.lineDash),Oe.lineDashOffset!=e.lineDashOffset&&(Oe.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),Oe.lineJoin!=e.lineJoin&&(Oe.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),Oe.lineWidth!=e.lineWidth&&(Oe.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),Oe.miterLimit!=e.miterLimit&&(Oe.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),Oe.strokeStyle!=e.strokeStyle&&(Oe.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,Oe=this.contextTextState_,ke=e.textAlign?e.textAlign:defaultTextAlign;Oe?(Oe.font!=e.font&&(Oe.font=e.font,t.font=e.font),Oe.textAlign!=ke&&(Oe.textAlign=ke,t.textAlign=ke),Oe.textBaseline!=e.textBaseline&&(Oe.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=ke,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:ke,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const Oe=e.getColor();this.fillState_={fillStyle:asColorLike(Oe||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const Oe=t.getColor(),ke=t.getLineCap(),Be=t.getLineDash(),Ue=t.getLineDashOffset(),je=t.getLineJoin(),We=t.getWidth(),Qe=t.getMiterLimit(),Cn=Be||defaultLineDash;this.strokeState_={lineCap:ke!==void 0?ke:defaultLineCap,lineDash:this.pixelRatio_===1?Cn:Cn.map(An=>An*this.pixelRatio_),lineDashOffset:(Ue||defaultLineDashOffset)*this.pixelRatio_,lineJoin:je!==void 0?je:defaultLineJoin,lineWidth:(We!==void 0?We:defaultLineWidth)*this.pixelRatio_,miterLimit:Qe!==void 0?Qe:defaultMiterLimit,strokeStyle:asColorLike(Oe||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const Oe=e.getPixelRatio(this.pixelRatio_),ke=e.getAnchor(),Be=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=ke[0]*Oe,this.imageAnchorY_=ke[1]*Oe,this.imageHeight_=t[1]*Oe,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Be[0],this.imageOriginY_=Be[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const Ue=e.getScaleArray();this.imageScale_=[Ue[0]*this.pixelRatio_/Oe,Ue[1]*this.pixelRatio_/Oe],this.imageWidth_=t[0]*Oe}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const Sn=t.getColor();this.textFillState_={fillStyle:asColorLike(Sn||defaultFillStyle)}}const Oe=e.getStroke();if(!Oe)this.textStrokeState_=null;else{const Sn=Oe.getColor(),Tn=Oe.getLineCap(),Dn=Oe.getLineDash(),ti=Oe.getLineDashOffset(),ni=Oe.getLineJoin(),ii=Oe.getWidth(),si=Oe.getMiterLimit();this.textStrokeState_={lineCap:Tn!==void 0?Tn:defaultLineCap,lineDash:Dn||defaultLineDash,lineDashOffset:ti||defaultLineDashOffset,lineJoin:ni!==void 0?ni:defaultLineJoin,lineWidth:ii!==void 0?ii:defaultLineWidth,miterLimit:si!==void 0?si:defaultMiterLimit,strokeStyle:asColorLike(Sn||defaultStrokeStyle)}}const ke=e.getFont(),Be=e.getOffsetX(),Ue=e.getOffsetY(),je=e.getRotateWithView(),We=e.getRotation(),Qe=e.getScaleArray(),Cn=e.getText(),An=e.getTextAlign(),En=e.getTextBaseline();this.textState_={font:ke!==void 0?ke:defaultFont,textAlign:An!==void 0?An:defaultTextAlign,textBaseline:En!==void 0?En:defaultTextBaseline},this.text_=Cn!==void 0?Array.isArray(Cn)?Cn.reduce((Sn,Tn,Dn)=>Sn+=Dn%2?" ":Tn,""):Cn:"",this.textOffsetX_=Be!==void 0?this.pixelRatio_*Be:0,this.textOffsetY_=Ue!==void 0?this.pixelRatio_*Ue:0,this.textRotateWithView_=je!==void 0?je:!1,this.textRotation_=We!==void 0?We:0,this.textScale_=[this.pixelRatio_*Qe[0],this.pixelRatio_*Qe[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(Ae,e,t,Oe,ke,Be,Ue,je,We){const Qe=We?toUserExtent(ke):ke,Cn=Ae[0]*HIT_DETECT_RESOLUTION,An=Ae[1]*HIT_DETECT_RESOLUTION,En=createCanvasContext2D(Cn,An);En.imageSmoothingEnabled=!1;const Sn=En.canvas,Tn=new CanvasImmediateRenderer(En,HIT_DETECT_RESOLUTION,ke,null,Ue,je,We?getTransformFromProjections(getUserProjection(),We):null),Dn=t.length,ti=Math.floor((256*256*256-1)/Dn),ni={};for(let si=1;si<=Dn;++si){const oi=t[si-1],ci=oi.getStyleFunction()||Oe;if(!ci)continue;let Pi=ci(oi,Be);if(!Pi)continue;Array.isArray(Pi)||(Pi=[Pi]);const fi=(si*ti).toString(16).padStart(7,"#00000");for(let Oi=0,Ni=Pi.length;Oi<Ni;++Oi){const ui=Pi[Oi],li=ui.getGeometryFunction()(oi);if(!li||!intersects$1(Qe,li.getExtent()))continue;const Ri=ui.clone(),Mi=Ri.getFill();Mi&&Mi.setColor(fi);const Bi=Ri.getStroke();Bi&&(Bi.setColor(fi),Bi.setLineDash(null)),Ri.setText(void 0);const er=ui.getImage();if(er){const ar=er.getImageSize();if(!ar)continue;const wr=createCanvasContext2D(ar[0],ar[1],void 0,{alpha:!1}),Fi=wr.canvas;wr.fillStyle=fi,wr.fillRect(0,0,Fi.width,Fi.height),Ri.setImage(new Icon({img:Fi,anchor:er.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:er.getOrigin(),opacity:1,size:er.getSize(),scale:er.getScale(),rotation:er.getRotation(),rotateWithView:er.getRotateWithView()}))}const nr=Ri.getZIndex()||0;let lr=ni[nr];lr||(lr={},ni[nr]=lr,lr.Polygon=[],lr.Circle=[],lr.LineString=[],lr.Point=[]);const hr=li.getType();if(hr==="GeometryCollection"){const ar=li.getGeometriesArrayRecursive();for(let wr=0,Fi=ar.length;wr<Fi;++wr){const cr=ar[wr];lr[cr.getType().replace("Multi","")].push(cr,Ri)}}else lr[hr.replace("Multi","")].push(li,Ri)}}const ii=Object.keys(ni).map(Number).sort(ascending);for(let si=0,oi=ii.length;si<oi;++si){const ci=ni[ii[si]];for(const Pi in ci){const Ai=ci[Pi];for(let fi=0,Oi=Ai.length;fi<Oi;fi+=2){Tn.setStyle(Ai[fi+1]);for(let Ni=0,ui=e.length;Ni<ui;++Ni)Tn.setTransform(e[Ni]),Tn.drawGeometry(Ai[fi])}}}return En.getImageData(0,0,Sn.width,Sn.height)}function hitDetect(Ae,e,t){const Oe=[];if(t){const ke=Math.floor(Math.round(Ae[0])*HIT_DETECT_RESOLUTION),Be=Math.floor(Math.round(Ae[1])*HIT_DETECT_RESOLUTION),Ue=(clamp(ke,0,t.width-1)+clamp(Be,0,t.height-1)*t.width)*4,je=t.data[Ue],We=t.data[Ue+1],Cn=t.data[Ue+2]+256*(We+256*je),An=Math.floor((256*256*256-1)/e.length);Cn&&Cn%An===0&&Oe.push(e[Cn/An-1])}return Oe}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(Ae,e){return parseInt(getUid(Ae),10)-parseInt(getUid(e),10)}function getSquaredTolerance(Ae,e){const t=getTolerance(Ae,e);return t*t}function getTolerance(Ae,e){return SIMPLIFY_TOLERANCE*Ae/e}function renderCircleGeometry(Ae,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Be||Ue){const We=Ae.getBuilder(t.getZIndex(),"Circle");We.setFillStrokeStyle(Be,Ue),We.drawCircle(e,Oe,ke)}const je=t.getText();if(je&&je.getText()){const We=Ae.getBuilder(t.getZIndex(),"Text");We.setTextStyle(je),We.drawText(e,Oe)}}function renderFeature$1(Ae,e,t,Oe,ke,Be,Ue,je){const We=[],Qe=t.getImage();if(Qe){let En=!0;const Sn=Qe.getImageState();Sn==ImageState.LOADED||Sn==ImageState.ERROR?En=!1:Sn==ImageState.IDLE&&Qe.load(),En&&We.push(Qe.ready())}const Cn=t.getFill();Cn&&Cn.loading()&&We.push(Cn.ready());const An=We.length>0;return An&&Promise.all(We).then(()=>ke(null)),renderFeatureInternal(Ae,e,t,Oe,Be,Ue,je),An}function renderFeatureInternal(Ae,e,t,Oe,ke,Be,Ue){const je=t.getGeometryFunction()(e);if(!je)return;const We=je.simplifyTransformed(Oe,ke);if(t.getRenderer())renderGeometry(Ae,We,t,e,Ue);else{const Cn=GEOMETRY_RENDERERS[We.getType()];Cn(Ae,We,t,e,Ue,Be)}}function renderGeometry(Ae,e,t,Oe,ke){if(e.getType()=="GeometryCollection"){const Ue=e.getGeometries();for(let je=0,We=Ue.length;je<We;++je)renderGeometry(Ae,Ue[je],t,Oe,ke);return}Ae.getBuilder(t.getZIndex(),"Default").drawCustom(e,Oe,t.getRenderer(),t.getHitDetectionRenderer(),ke)}function renderGeometryCollectionGeometry(Ae,e,t,Oe,ke,Be){const Ue=e.getGeometriesArray();let je,We;for(je=0,We=Ue.length;je<We;++je){const Qe=GEOMETRY_RENDERERS[Ue[je].getType()];Qe(Ae,Ue[je],t,Oe,ke,Be)}}function renderLineStringGeometry(Ae,e,t,Oe,ke){const Be=t.getStroke();if(Be){const je=Ae.getBuilder(t.getZIndex(),"LineString");je.setFillStrokeStyle(null,Be),je.drawLineString(e,Oe,ke)}const Ue=t.getText();if(Ue&&Ue.getText()){const je=Ae.getBuilder(t.getZIndex(),"Text");je.setTextStyle(Ue),je.drawText(e,Oe,ke)}}function renderMultiLineStringGeometry(Ae,e,t,Oe,ke){const Be=t.getStroke();if(Be){const je=Ae.getBuilder(t.getZIndex(),"LineString");je.setFillStrokeStyle(null,Be),je.drawMultiLineString(e,Oe,ke)}const Ue=t.getText();if(Ue&&Ue.getText()){const je=Ae.getBuilder(t.getZIndex(),"Text");je.setTextStyle(Ue),je.drawText(e,Oe,ke)}}function renderMultiPolygonGeometry(Ae,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Ue||Be){const We=Ae.getBuilder(t.getZIndex(),"Polygon");We.setFillStrokeStyle(Be,Ue),We.drawMultiPolygon(e,Oe,ke)}const je=t.getText();if(je&&je.getText()){const We=Ae.getBuilder(t.getZIndex(),"Text");We.setTextStyle(je),We.drawText(e,Oe,ke)}}function renderPointGeometry(Ae,e,t,Oe,ke,Be){const Ue=t.getImage(),je=t.getText(),We=je&&je.getText(),Qe=Be&&Ue&&We?{}:void 0;if(Ue){if(Ue.getImageState()!=ImageState.LOADED)return;const Cn=Ae.getBuilder(t.getZIndex(),"Image");Cn.setImageStyle(Ue,Qe),Cn.drawPoint(e,Oe,ke)}if(We){const Cn=Ae.getBuilder(t.getZIndex(),"Text");Cn.setTextStyle(je,Qe),Cn.drawText(e,Oe,ke)}}function renderMultiPointGeometry(Ae,e,t,Oe,ke,Be){const Ue=t.getImage(),je=Ue&&Ue.getOpacity()!==0,We=t.getText(),Qe=We&&We.getText(),Cn=Be&&je&&Qe?{}:void 0;if(je){if(Ue.getImageState()!=ImageState.LOADED)return;const An=Ae.getBuilder(t.getZIndex(),"Image");An.setImageStyle(Ue,Cn),An.drawMultiPoint(e,Oe,ke)}if(Qe){const An=Ae.getBuilder(t.getZIndex(),"Text");An.setTextStyle(We,Cn),An.drawText(e,Oe,ke)}}function renderPolygonGeometry(Ae,e,t,Oe,ke){const Be=t.getFill(),Ue=t.getStroke();if(Be||Ue){const We=Ae.getBuilder(t.getZIndex(),"Polygon");We.setFillStrokeStyle(Be,Ue),We.drawPolygon(e,Oe,ke)}const je=t.getText();if(je&&je.getText()){const We=Ae.getBuilder(t.getZIndex(),"Text");We.setTextStyle(je),We.drawText(e,Oe,ke)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,Oe){const ke=t.extent,Be=t.viewState,Ue=Be.center,je=Be.resolution,We=Be.projection,Qe=Be.rotation,Cn=We.getExtent(),An=this.getLayer().getSource(),En=this.getLayer().getDeclutter(),Sn=t.pixelRatio,Tn=t.viewHints,Dn=!(Tn[ViewHint.ANIMATING]||Tn[ViewHint.INTERACTING]),ti=this.context,ni=Math.round(getWidth(ke)/je*Sn),ii=Math.round(getHeight(ke)/je*Sn),si=An.getWrapX()&&We.canWrapX(),oi=si?getWidth(Cn):null,ci=si?Math.ceil((ke[2]-Cn[2])/oi)+1:1;let Pi=si?Math.floor((ke[0]-Cn[0])/oi):0;do{let Ai=this.getRenderTransform(Ue,je,0,Sn,ni,ii,Pi*oi);t.declutter&&(Ai=Ai.slice(0)),e.execute(ti,[ti.canvas.width,ti.canvas.height],Ai,Qe,Dn,Oe===void 0?ALL:Oe?DECLUTTER:NON_DECLUTTER,Oe?En&&t.declutter[En]:void 0)}while(++Pi<ci)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const Oe=e.layerStatesArray[e.layerIndex];this.opacity_=Oe.opacity;const ke=e.viewState;this.prepareContainer(e,t);const Be=this.context,Ue=this.replayGroup_;let je=Ue&&!Ue.isEmpty();if(!je&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(Be,e),ke.projection,this.clipped_=!1,je&&Oe.extent&&this.clipping){const We=fromUserExtent(Oe.extent);je=intersects$1(We,e.extent),this.clipped_=je&&!containsExtent(We,e.extent),this.clipped_&&this.clipUnrotated(Be,e,We)}return je&&this.renderWorlds(Ue,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&Be.restore(),this.postRender(Be,e),this.renderedRotation_!==ke.rotation&&(this.renderedRotation_=ke.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const Oe=this.frameState.size.slice(),ke=this.renderedCenter_,Be=this.renderedResolution_,Ue=this.renderedRotation_,je=this.renderedProjection_,We=this.wrappedRenderedExtent_,Qe=this.getLayer(),Cn=[],An=Oe[0]*HIT_DETECT_RESOLUTION,En=Oe[1]*HIT_DETECT_RESOLUTION;Cn.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,An,En,0).slice());const Sn=Qe.getSource(),Tn=je.getExtent();if(Sn.getWrapX()&&je.canWrapX()&&!containsExtent(Tn,We)){let Dn=We[0];const ti=getWidth(Tn);let ni=0,ii;for(;Dn<Tn[0];)--ni,ii=ti*ni,Cn.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,An,En,ii).slice()),Dn+=ti;for(ni=0,Dn=We[2];Dn>Tn[2];)++ni,ii=ti*ni,Cn.push(this.getRenderTransform(ke,Be,Ue,HIT_DETECT_RESOLUTION,An,En,ii).slice()),Dn-=ti}this.hitDetectionImageData_=createHitDetectionImageData(Oe,Cn,this.renderedFeatures_,Qe.getStyleFunction(),We,Be,Ue,getSquaredTolerance(Be,this.renderedPixelRatio_),null)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){if(!this.replayGroup_)return;const Ue=t.viewState.resolution,je=t.viewState.rotation,We=this.getLayer(),Qe={},Cn=function(En,Sn,Tn){const Dn=getUid(En),ti=Qe[Dn];if(ti){if(ti!==!0&&Tn<ti.distanceSq){if(Tn===0)return Qe[Dn]=!0,Be.splice(Be.lastIndexOf(ti),1),ke(En,We,Sn);ti.geometry=Sn,ti.distanceSq=Tn}}else{if(Tn===0)return Qe[Dn]=!0,ke(En,We,Sn);Be.push(Qe[Dn]={feature:En,layer:We,geometry:Sn,distanceSq:Tn,callback:ke})}},An=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,Ue,je,Oe,Cn,An?t.declutter[An].all().map(En=>En.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),Oe=t.getSource();if(!Oe)return!1;const ke=e.viewHints[ViewHint.ANIMATING],Be=e.viewHints[ViewHint.INTERACTING],Ue=t.getUpdateWhileAnimating(),je=t.getUpdateWhileInteracting();if(this.ready&&!Ue&&ke||!je&&Be)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const We=e.extent,Qe=e.viewState,Cn=Qe.projection,An=Qe.resolution,En=e.pixelRatio,Sn=t.getRevision(),Tn=t.getRenderBuffer();let Dn=t.getRenderOrder();Dn===void 0&&(Dn=defaultOrder);const ti=Qe.center.slice(),ni=buffer(We,Tn*An),ii=ni.slice(),si=[ni.slice()],oi=Cn.getExtent();if(Oe.getWrapX()&&Cn.canWrapX()&&!containsExtent(oi,e.extent)){const Mi=getWidth(oi),Bi=Math.max(getWidth(ni)/2,Mi);ni[0]=oi[0]-Bi,ni[2]=oi[2]+Bi,wrapX$1(ti,Cn);const er=wrapX$2(si[0],Cn);er[0]<oi[0]&&er[2]<oi[2]?si.push([er[0]+Mi,er[1],er[2]+Mi,er[3]]):er[0]>oi[0]&&er[2]>oi[2]&&si.push([er[0]-Mi,er[1],er[2]-Mi,er[3]])}if(this.ready&&this.renderedResolution_==An&&this.renderedRevision_==Sn&&this.renderedRenderOrder_==Dn&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,ni))return equals$2(this.renderedExtent_,ii)||(this.hitDetectionImageData_=null,this.renderedExtent_=ii),this.renderedCenter_=ti,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const ci=new BuilderGroup(getTolerance(An,En),ni,An,En);let Pi;for(let Mi=0,Bi=si.length;Mi<Bi;++Mi)Oe.loadFeatures(si[Mi],An,Cn);const Ai=getSquaredTolerance(An,En);let fi=!0;const Oi=(Mi,Bi)=>{let er;const nr=Mi.getStyleFunction()||t.getStyleFunction();if(nr&&(er=nr(Mi,An)),er){const lr=this.renderFeature(Mi,Ai,er,ci,Pi,this.getLayer().getDeclutter(),Bi);fi=fi&&!lr}},Ni=toUserExtent(ni),ui=Oe.getFeaturesInExtent(Ni);Dn&&ui.sort(Dn);for(let Mi=0,Bi=ui.length;Mi<Bi;++Mi)Oi(ui[Mi],Mi);this.renderedFeatures_=ui,this.ready=fi;const li=ci.finish(),Ri=new ExecutorGroup(ni,An,En,Oe.getOverlaps(),li,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=An,this.renderedRevision_=Sn,this.renderedRenderOrder_=Dn,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=ii,this.wrappedRenderedExtent_=ni,this.renderedCenter_=ti,this.renderedProjection_=Cn,this.renderedPixelRatio_=En,this.replayGroup_=Ri,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,Oe,ke,Be,Ue,je){if(!Oe)return!1;let We=!1;if(Array.isArray(Oe))for(let Qe=0,Cn=Oe.length;Qe<Cn;++Qe)We=renderFeature$1(ke,e,Oe[Qe],t,this.boundHandleStyleImageChange_,Be,Ue,je)||We;else We=renderFeature$1(ke,e,Oe,t,this.boundHandleStyleImageChange_,Be,Ue,je);return We}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(Ae,e){const t=[];for(let Oe=0;Oe<e.length;++Oe){const Be=e[Oe].getGeometry();appendGeometryTraceTargets(Ae,Be,t)}return t}function getSquaredDistance(Ae,e){return squaredDistance$1(Ae[0],Ae[1],e[0],e[1])}function getCoordinate(Ae,e){const t=Ae.length;return e<0?Ae[e+t]:e>=t?Ae[e-t]:Ae[e]}function getCumulativeSquaredDistance(Ae,e,t){let Oe,ke;e<t?(Oe=e,ke=t):(Oe=t,ke=e);const Be=Math.ceil(Oe),Ue=Math.floor(ke);if(Be>Ue){const We=interpolateCoordinate(Ae,Oe),Qe=interpolateCoordinate(Ae,ke);return getSquaredDistance(We,Qe)}let je=0;if(Oe<Be){const We=interpolateCoordinate(Ae,Oe),Qe=getCoordinate(Ae,Be);je+=getSquaredDistance(We,Qe)}if(Ue<ke){const We=getCoordinate(Ae,Ue),Qe=interpolateCoordinate(Ae,ke);je+=getSquaredDistance(We,Qe)}for(let We=Be;We<Ue-1;++We){const Qe=getCoordinate(Ae,We),Cn=getCoordinate(Ae,We+1);je+=getSquaredDistance(Qe,Cn)}return je}function appendGeometryTraceTargets(Ae,e,t){if(e instanceof LineString){appendTraceTarget(Ae,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke)appendTraceTarget(Ae,Oe[ke],!1,t);return}if(e instanceof Polygon){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke)appendTraceTarget(Ae,Oe[ke],!0,t);return}if(e instanceof MultiPolygon){const Oe=e.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let je=0,We=Ue.length;je<We;++je)appendTraceTarget(Ae,Ue[je],!0,t)}return}if(e instanceof GeometryCollection){const Oe=e.getGeometries();for(let ke=0;ke<Oe.length;++ke)appendGeometryTraceTargets(Ae,Oe[ke],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(Ae,e,t,Oe){const ke=Ae[0],Be=Ae[1];let Ue=1/0,je=-1,We=NaN;for(let An=0;An<e.targets.length;++An){const En=e.targets[An],Sn=En.coordinates;let Tn=1/0,Dn;for(let ti=0;ti<Sn.length-1;++ti){const ni=Sn[ti],ii=Sn[ti+1],si=getPointSegmentRelationship(ke,Be,ni,ii);si.squaredDistance<Tn&&(Tn=si.squaredDistance,Dn=ti+si.along)}Tn<Ue&&(Ue=Tn,En.ring&&e.targetIndex===An&&(En.endIndex>En.startIndex?Dn<En.startIndex&&(Dn+=Sn.length):En.endIndex<En.startIndex&&Dn>En.startIndex&&(Dn-=Sn.length)),We=Dn,je=An)}const Qe=e.targets[je];let Cn=Qe.ring;if(e.targetIndex===je&&Cn){const An=interpolateCoordinate(Qe.coordinates,We),En=t.getPixelFromCoordinate(An);distance(En,e.startPx)>Oe&&(Cn=!1)}if(Cn){const An=Qe.coordinates,En=An.length,Sn=Qe.startIndex,Tn=We;if(Sn<Tn){const Dn=getCumulativeSquaredDistance(An,Sn,Tn);getCumulativeSquaredDistance(An,Sn,Tn-En)<Dn&&(We-=En)}else{const Dn=getCumulativeSquaredDistance(An,Sn,Tn);getCumulativeSquaredDistance(An,Sn,Tn+En)<Dn&&(We+=En)}}return sharedUpdateInfo.index=je,sharedUpdateInfo.endIndex=We,sharedUpdateInfo}function appendTraceTarget(Ae,e,t,Oe){const ke=Ae[0],Be=Ae[1];for(let Ue=0,je=e.length-1;Ue<je;++Ue){const We=e[Ue],Qe=e[Ue+1],Cn=getPointSegmentRelationship(ke,Be,We,Qe);if(Cn.squaredDistance===0){const An=Ue+Cn.along;Oe.push({coordinates:e,ring:t,startIndex:An,endIndex:An});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(Ae,e,t,Oe){const ke=t[0],Be=t[1],Ue=Oe[0],je=Oe[1],We=Ue-ke,Qe=je-Be;let Cn=0,An=ke,En=Be;return(We!==0||Qe!==0)&&(Cn=clamp(((Ae-ke)*We+(e-Be)*Qe)/(We*We+Qe*Qe),0,1),An+=We*Cn,En+=Qe*Cn),sharedRel.along=Cn,sharedRel.squaredDistance=toFixed(squaredDistance$1(Ae,e,An,En),10),sharedRel}function interpolateCoordinate(Ae,e){const t=Ae.length;let Oe=Math.floor(e);const ke=e-Oe;Oe>=t?Oe-=t:Oe<0&&(Oe+=t);let Be=Oe+1;Be>=t&&(Be-=t);const Ue=Ae[Oe],je=Ue[0],We=Ue[1],Qe=Ae[Be],Cn=Qe[0]-je,An=Qe[1]-We;return[je+Cn*ke,We+An*ke]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let Oe=e.geometryFunction;if(!Oe){const ke=this.mode_;if(ke==="Circle")Oe=(Be,Ue,je)=>{const We=Ue||new Circle([NaN,NaN]),Qe=fromUserCoordinate(Be[0]),Cn=squaredDistance(Qe,fromUserCoordinate(Be[Be.length-1]));return We.setCenterAndRadius(Qe,Math.sqrt(Cn),this.geometryLayout_),We};else{let Be;ke==="Point"?Be=Point$1:ke==="LineString"?Be=LineString:ke==="Polygon"&&(Be=Polygon),Oe=(Ue,je,We)=>(je?ke==="Polygon"?Ue[0].length?je.setCoordinates([Ue[0].concat([Ue[0][0]])],this.geometryLayout_):je.setCoordinates([],this.geometryLayout_):je.setCoordinates(Ue,this.geometryLayout_):je=new Be(Ue,this.geometryLayout_),je)}}this.geometryFunction_=Oe,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always$1:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,Oe=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),Oe=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?Oe=!1:t&&this.getPointerCount()<2?(Oe=e.type===MapBrowserEventType.POINTERMOVE,Oe&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(Oe=!1),super.handleEvent(e)&&Oe}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),Oe=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),ke=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Be=boundingExtent([Oe,ke]),Ue=this.traceSource_.getFeaturesInExtent(Be);if(Ue.length===0)return;const je=getTraceTargets(e.coordinate,Ue);je.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:je,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const Oe=e.startIndex<=e.endIndex,ke=e.startIndex<=t;Oe===ke?Oe&&t>e.endIndex||!Oe&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(Oe&&t<e.endIndex||!Oe&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let Oe=0;if(e<t){const ke=Math.ceil(e);let Be=Math.floor(t);Be===t&&(Be-=1),Oe=Be-ke+1}else{const ke=Math.floor(e);let Be=Math.ceil(t);Be===t&&(Be+=1),Oe=ke-Be+1}Oe>0&&this.removeLastPoints_(Oe)}addTracedCoordinates_(e,t,Oe){if(t===Oe)return;const ke=[];if(t<Oe){const Be=Math.ceil(t);let Ue=Math.floor(Oe);Ue===Oe&&(Ue-=1);for(let je=Be;je<=Ue;++je)ke.push(getCoordinate(e.coordinates,je))}else{const Be=Math.floor(t);let Ue=Math.ceil(Oe);Ue===Oe&&(Ue+=1);for(let je=Be;je>=Ue;--je)ke.push(getCoordinate(e.coordinates,je))}ke.length&&this.appendCoordinates(ke)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const Oe=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==Oe.index){if(t.targetIndex!==-1){const We=t.targets[t.targetIndex];this.removeTracedCoordinates_(We.startIndex,We.endIndex)}const je=t.targets[Oe.index];this.addTracedCoordinates_(je,je.startIndex,Oe.endIndex)}else{const je=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(je,Oe.endIndex)}t.targetIndex=Oe.index;const ke=t.targets[t.targetIndex];ke.endIndex=Oe.endIndex;const Be=interpolateCoordinate(ke.coordinates,ke.endIndex),Ue=this.getMap().getPixelFromCoordinate(Be);e.coordinate=Be,e.pixel=[Math.round(Ue[0]),Math.round(Ue[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const Oe=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const ke=!this.finishCoordinate_;ke&&this.startDrawing_(e.coordinate),!ke&&this.freehand_?this.finishDrawing():!this.freehand_&&(!ke||this.mode_==="Point")&&(this.atFinish_(e.pixel,Oe)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,Oe=e.pixel,ke=t[0]-Oe[0],Be=t[1]-Oe[1],Ue=ke*ke+Be*Be;if(this.shouldHandle_=this.freehand_?Ue>this.squaredClickTolerance_:Ue<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let Oe=!1;if(this.sketchFeature_){let ke=!1,Be=[this.finishCoordinate_];const Ue=this.mode_;if(Ue==="Point")Oe=!0;else if(Ue==="Circle")Oe=this.sketchCoords_.length===2;else if(Ue==="LineString")ke=!t&&this.sketchCoords_.length>this.minPoints_;else if(Ue==="Polygon"){const je=this.sketchCoords_;ke=je[0].length>this.minPoints_,Be=[je[0][0],je[0][je[0].length-2]],t?Be=[je[0][0]]:Be=[je[0][0],je[0][je[0].length-2]]}if(ke){const je=this.getMap();for(let We=0,Qe=Be.length;We<Qe;We++){const Cn=Be[We],An=je.getPixelFromCoordinate(Cn),En=e[0]-An[0],Sn=e[1]-An[1],Tn=this.freehand_?1:this.snapTolerance_;if(Oe=Math.sqrt(En*En+Sn*Sn)<=Tn,Oe){this.finishCoordinate_=Cn;break}}}}return Oe}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let Oe=this.sketchLine_.getGeometry();Oe?(Oe.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),Oe.changed()):(Oe=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(Oe))}startDrawing_(e){const t=this.getMap().getView().getProjection(),Oe=getStrideForLayout(this.geometryLayout_);for(;e.length<Oe;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const ke=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(ke),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),Oe=this.sketchFeature_.getGeometry(),ke=t.getView().getProjection(),Be=getStrideForLayout(this.geometryLayout_);let Ue,je;for(;e.length<Be;)e.push(0);this.mode_==="Point"?je=this.sketchCoords_:this.mode_==="Polygon"?(Ue=this.sketchCoords_[0],je=Ue[Ue.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(Ue=this.sketchCoords_,je=Ue[Ue.length-1]),je[0]=e[0],je[1]=e[1],this.geometryFunction_(this.sketchCoords_,Oe,ke),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),Oe.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(Oe):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection();let ke,Be;const Ue=this.mode_;return Ue==="LineString"||Ue==="Circle"?(this.finishCoordinate_=e.slice(),Be=this.sketchCoords_,Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():ke=!0),Be.push(e.slice()),this.geometryFunction_(Be,t,Oe)):Ue==="Polygon"&&(Be=this.sketchCoords_[0],Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():ke=!0),Be.push(e.slice()),ke&&(this.finishCoordinate_=Be[0]),this.geometryFunction_(this.sketchCoords_,t,Oe)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),ke?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),Oe=this.getMap().getView().getProjection(),ke=this.mode_;for(let Be=0;Be<e;++Be){let Ue;if(ke==="LineString"||ke==="Circle"){if(Ue=this.sketchCoords_,Ue.splice(-2,1),Ue.length>=2){this.finishCoordinate_=Ue[Ue.length-2].slice();const je=this.finishCoordinate_.slice();Ue[Ue.length-1]=je,this.createOrUpdateSketchPoint_(je)}this.geometryFunction_(Ue,t,Oe),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(ke==="Polygon"){Ue=this.sketchCoords_[0],Ue.splice(-2,1);const je=this.sketchLine_.getGeometry();if(Ue.length>=2){const We=Ue[Ue.length-2].slice();Ue[Ue.length-1]=We,this.createOrUpdateSketchPoint_(We)}je.setCoordinates(Ue),this.geometryFunction_(this.sketchCoords_,t,Oe)}if(Ue.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const Oe=e.getGeometry(),ke=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,Oe,ke)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,Oe,ke),t=Oe.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,Oe=!this.sketchFeature_;Oe&&this.startDrawing_(e[0]);let ke;if(t==="LineString"||t==="Circle")ke=this.sketchCoords_;else if(t==="Polygon")ke=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;Oe&&ke.shift(),ke.pop();for(let Ue=0;Ue<e.length;Ue++)this.addToDrawing_(e[Ue]);const Be=e[e.length-1];this.sketchFeature_=this.addToDrawing_(Be),this.modifyDrawing_(Be)}extend(e){const Oe=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=Oe.getCoordinates();const ke=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=ke.slice(),this.sketchCoords_.push(ke.slice()),this.sketchPoint_=new Feature(new Point$1(ke)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const Ae=createEditingStyle();return function(e,t){return Ae[e.getGeometry().getType()]}}function getMode(Ae){switch(Ae){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+Ae)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const Oe=e.originalEvent,ke=Oe.key;if(this.condition_(e)&&(ke==Key.DOWN||ke==Key.LEFT||ke==Key.RIGHT||ke==Key.UP)){const Ue=e.map.getView(),je=Ue.getResolution()*this.pixelDelta_;let We=0,Qe=0;ke==Key.DOWN?Qe=-je:ke==Key.LEFT?We=-je:ke==Key.RIGHT?We=je:Qe=je;const Cn=[We,Qe];rotate$1(Cn,Ue.getRotation()),pan(Ue,Cn,this.duration_),Oe.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const Oe=e.originalEvent,ke=Oe.key;if(this.condition_(e)&&(ke==="+"||ke==="-")){const Be=e.map,Ue=ke==="+"?this.delta_:-this.delta_,je=Be.getView();zoomByDelta(je,Ue,void 0,this.duration_),Oe.preventDefault(),t=!0}}return!t}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,Oe){super(e),this.features=t,this.mapBrowserEvent=Oe}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(Oe){return altKeyOnly(Oe)&&singleClick(Oe)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const ke=this.SEGMENT_WRITERS_[t.getType()];ke&&ke(e,t)}const Oe=this.getMap();Oe&&Oe.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(Oe.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const Oe=this.featuresBeingModified_.getArray();for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=t[ke].feature;Ue&&!Oe.includes(Ue)&&this.featuresBeingModified_.push(Ue)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,Oe=[];t.forEach(function(ke){e===ke.feature&&Oe.push(ke)});for(let ke=Oe.length-1;ke>=0;--ke){const Be=Oe[ke];for(let Ue=this.dragSegments_.length-1;Ue>=0;--Ue)this.dragSegments_[Ue][0]===Be&&this.dragSegments_.splice(Ue,1);t.remove(Be)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const Oe=t.getCoordinates(),ke={feature:e,geometry:t,segment:[Oe,Oe]};this.rBush_.insert(t.getExtent(),ke)}writeMultiPointGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],je={feature:e,geometry:t,depth:[ke],index:ke,segment:[Ue,Ue]};this.rBush_.insert(t.getExtent(),je)}}writeLineStringGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length-1;ke<Be;++ke){const Ue=Oe.slice(ke,ke+2),je={feature:e,geometry:t,index:ke,segment:Ue};this.rBush_.insert(boundingExtent(Ue),je)}}writeMultiLineStringGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let je=0,We=Ue.length-1;je<We;++je){const Qe=Ue.slice(je,je+2),Cn={feature:e,geometry:t,depth:[ke],index:je,segment:Qe};this.rBush_.insert(boundingExtent(Qe),Cn)}}}writePolygonGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let je=0,We=Ue.length-1;je<We;++je){const Qe=Ue.slice(je,je+2),Cn={feature:e,geometry:t,depth:[ke],index:je,segment:Qe};this.rBush_.insert(boundingExtent(Qe),Cn)}}}writeMultiPolygonGeometry_(e,t){const Oe=t.getCoordinates();for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke];for(let je=0,We=Ue.length;je<We;++je){const Qe=Ue[je];for(let Cn=0,An=Qe.length-1;Cn<An;++Cn){const En=Qe.slice(Cn,Cn+2),Sn={feature:e,geometry:t,depth:[je,ke],index:Cn,segment:En};this.rBush_.insert(boundingExtent(En),Sn)}}}}writeCircleGeometry_(e,t){const Oe=t.getCenter(),ke={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[Oe,Oe]},Be={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[Oe,Oe]},Ue=[ke,Be];ke.featureSegments=Ue,Be.featureSegments=Ue,this.rBush_.insert(createOrUpdateFromCoordinate(Oe),ke);let je=t;this.rBush_.insert(je.getExtent(),Be)}writeGeometryCollectionGeometry_(e,t){const Oe=t.getGeometriesArray();for(let ke=0;ke<Oe.length;++ke){const Be=Oe[ke],Ue=this.SEGMENT_WRITERS_[Be.getType()];Ue(e,Be)}}createOrUpdateVertexFeature_(e,t,Oe,ke){let Be=this.vertexFeature_;return Be?Be.getGeometry().setCoordinates(e):(Be=new Feature(new Point$1(e)),this.vertexFeature_=Be,this.overlay_.getSource().addFeature(Be)),Be.set("features",t),Be.set("geometries",Oe),Be.set("existing",ke),Be}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const Oe=[],ke=t.getGeometry().getCoordinates(),Be=boundingExtent([ke]),Ue=this.rBush_.getInExtent(Be),je={};Ue.sort(compareIndexes);for(let We=0,Qe=Ue.length;We<Qe;++We){const Cn=Ue[We],An=Cn.segment;let En=getUid(Cn.geometry);const Sn=Cn.depth;if(Sn&&(En+="-"+Sn.join("-")),je[En]||(je[En]=new Array(2)),Cn.geometry.getType()==="Circle"&&Cn.index===CIRCLE_CIRCUMFERENCE_INDEX){const Tn=closestOnSegmentData(e,Cn);equals(Tn,ke)&&!je[En][0]&&(this.dragSegments_.push([Cn,0]),je[En][0]=Cn);continue}if(equals(An[0],ke)&&!je[En][0]){this.dragSegments_.push([Cn,0]),je[En][0]=Cn;continue}if(equals(An[1],ke)&&!je[En][1]){if(je[En][0]&&je[En][0].index===0){let Tn=Cn.geometry.getCoordinates();switch(Cn.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":Tn=Tn[Sn[1]];case"Polygon":if(Cn.index!==Tn[Sn[0]].length-2)continue;break}}this.dragSegments_.push([Cn,1]),je[En][1]=Cn;continue}getUid(An)in this.vertexSegments_&&!je[En][0]&&!je[En][1]&&Oe.push(Cn)}return Oe}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([Be])=>Be));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],Oe=[],ke=[];for(let Be=0,Ue=this.dragSegments_.length;Be<Ue;++Be){const je=this.dragSegments_[Be],We=je[0],Qe=We.feature;Oe.includes(Qe)||Oe.push(Qe);const Cn=We.geometry;ke.includes(Cn)||ke.push(Cn);const An=We.depth;let En;const Sn=We.segment,Tn=je[1];for(;t.length<Cn.getStride();)t.push(Sn[Tn][t.length]);switch(Cn.getType()){case"Point":En=t,Sn[0]=t,Sn[1]=t;break;case"MultiPoint":En=Cn.getCoordinates(),En[We.index]=t,Sn[0]=t,Sn[1]=t;break;case"LineString":En=Cn.getCoordinates(),En[We.index+Tn]=t,Sn[Tn]=t;break;case"MultiLineString":En=Cn.getCoordinates(),En[An[0]][We.index+Tn]=t,Sn[Tn]=t;break;case"Polygon":En=Cn.getCoordinates(),En[An[0]][We.index+Tn]=t,Sn[Tn]=t;break;case"MultiPolygon":En=Cn.getCoordinates(),En[An[1]][An[0]][We.index+Tn]=t,Sn[Tn]=t;break;case"Circle":const Dn=Cn;if(Sn[0]=t,Sn[1]=t,We.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,Dn.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let ti=distance(fromUserCoordinate(Dn.getCenter()),fromUserCoordinate(t));Dn.setRadius(ti),this.changingFeature_=!1}break}En&&this.setGeometryCoordinates_(Cn,En)}this.createOrUpdateVertexFeature_(t,Oe,ke,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,Oe=this.findInsertVerticesAndUpdateDragSegments_(t);if(Oe!=null&&Oe.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,Oe),this.vertexFeature_)){const ke=this.vertexFeature_.getGeometry().getCoordinates();for(let Be=Oe.length-1;Be>=0;--Be)this.insertVertex_(Oe[Be],ke);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const Oe=this.dragSegments_[t][0],ke=Oe.geometry;if(ke.getType()==="Circle"){const Be=ke,Ue=Be.getCenter(),je=Oe.featureSegments[0],We=Oe.featureSegments[1];je.segment[0]=Ue,je.segment[1]=Ue,We.segment[0]=Ue,We.segment[1]=Ue,this.rBush_.update(createOrUpdateFromCoordinate(Ue),je);let Qe=Be;this.rBush_.update(Qe.getExtent(),We)}else this.rBush_.update(boundingExtent(Oe.segment),Oe)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),Oe=t.getPixelFromCoordinate(e);t.getView().getProjection();const ke=function(je,We){return projectedDistanceToSegmentDataSquared(e,je)-projectedDistanceToSegmentDataSquared(e,We)};let Be,Ue;if(this.hitDetection_){const je=typeof this.hitDetection_=="object"?We=>We===this.hitDetection_:void 0;t.forEachFeatureAtPixel(Oe,(We,Qe,Cn)=>{Cn&&Cn.getType()==="Point"&&(Cn=new Point$1(toUserCoordinate(Cn.getCoordinates())));const An=Cn||We.getGeometry();if(An&&An.getType()==="Point"&&We instanceof Feature&&this.features_.getArray().includes(We)){Ue=An;const En=We.getGeometry().getFlatCoordinates().slice(0,2);Be=[{feature:We,geometry:Ue,segment:[En,En]}]}return!0},{layerFilter:je})}if(!Be){const je=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),We=t.getView().getResolution()*this.pixelTolerance_,Qe=toUserExtent(buffer(je,We,tempExtent));Be=this.rBush_.getInExtent(Qe)}if(Be&&Be.length>0){const je=Be.sort(ke)[0],We=je.segment;let Qe=closestOnSegmentData(e,je);const Cn=t.getPixelFromCoordinate(Qe);let An=distance(Oe,Cn);if(Ue||An<=this.pixelTolerance_){const En={};if(En[getUid(We)]=!0,this.snapToPointer_||(this.delta_[0]=Qe[0]-e[0],this.delta_[1]=Qe[1]-e[1]),je.geometry.getType()==="Circle"&&je.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(Qe,[je.feature],[je.geometry],this.snappedToVertex_);else{const Sn=t.getPixelFromCoordinate(We[0]),Tn=t.getPixelFromCoordinate(We[1]),Dn=squaredDistance(Cn,Sn),ti=squaredDistance(Cn,Tn);An=Math.sqrt(Math.min(Dn,ti)),this.snappedToVertex_=An<=this.pixelTolerance_,this.snappedToVertex_&&(Qe=Dn>ti?We[1]:We[0]),this.createOrUpdateVertexFeature_(Qe,[je.feature],[je.geometry],this.snappedToVertex_);const ni={};ni[getUid(je.geometry)]=!0;for(let ii=1,si=Be.length;ii<si;++ii){const oi=Be[ii].segment;if(equals(We[0],oi[0])&&equals(We[1],oi[1])||equals(We[0],oi[1])&&equals(We[1],oi[0])){const ci=getUid(Be[ii].geometry);ci in ni||(ni[ci]=!0,En[getUid(oi)]=!0)}else break}}this.vertexSegments_=En;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const Oe=e.segment,ke=e.feature,Be=e.geometry,Ue=e.depth,je=e.index;let We;for(;t.length<Be.getStride();)t.push(0);switch(Be.getType()){case"MultiLineString":We=Be.getCoordinates(),We[Ue[0]].splice(je+1,0,t);break;case"Polygon":We=Be.getCoordinates(),We[Ue[0]].splice(je+1,0,t);break;case"MultiPolygon":We=Be.getCoordinates(),We[Ue[1]][Ue[0]].splice(je+1,0,t);break;case"LineString":We=Be.getCoordinates(),We.splice(je+1,0,t);break;default:return!1}this.setGeometryCoordinates_(Be,We);const Qe=this.rBush_;Qe.remove(e),this.updateSegmentIndices_(Be,je,Ue,1);const Cn={segment:[Oe[0],t],feature:ke,geometry:Be,depth:Ue,index:je};Qe.insert(boundingExtent(Cn.segment),Cn),this.dragSegments_.push([Cn,1]);const An={segment:[t,Oe[1]],feature:ke,geometry:Be,depth:Ue,index:je+1};return Qe.insert(boundingExtent(An.segment),An),this.dragSegments_.push([An,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>equals(Oe[0],e)||equals(Oe[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([ke])=>ke));const Oe=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,Oe}return!1}removeVertex_(){const e=this.dragSegments_,t={};let Oe=!1,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn;for(We=e.length-1;We>=0;--We)Ue=e[We],Sn=Ue[0],Tn=getUid(Sn.feature),Sn.depth&&(Tn+="-"+Sn.depth.join("-")),Tn in t||(t[Tn]={}),Ue[1]===0?(t[Tn].right=Sn,t[Tn].index=Sn.index):Ue[1]==1&&(t[Tn].left=Sn,t[Tn].index=Sn.index+1);for(Tn in t){switch(En=t[Tn].right,Cn=t[Tn].left,Qe=t[Tn].index,An=Qe-1,Cn!==void 0?Sn=Cn:Sn=En,An<0&&(An=0),je=Sn.geometry,Be=je.getCoordinates(),ke=Be,Oe=!1,je.getType()){case"MultiLineString":Be[Sn.depth[0]].length>2&&(Be[Sn.depth[0]].splice(Qe,1),Oe=!0);break;case"LineString":Be.length>2&&(Be.splice(Qe,1),Oe=!0);break;case"MultiPolygon":ke=ke[Sn.depth[1]];case"Polygon":ke=ke[Sn.depth[0]],ke.length>4&&(Qe==ke.length-1&&(Qe=0),ke.splice(Qe,1),Oe=!0,Qe===0&&(ke.pop(),ke.push(ke[0]),An=ke.length-1));break}if(Oe){this.setGeometryCoordinates_(je,Be);const Dn=[];if(Cn!==void 0&&(this.rBush_.remove(Cn),Dn.push(Cn.segment[0])),En!==void 0&&(this.rBush_.remove(En),Dn.push(En.segment[1])),Cn!==void 0&&En!==void 0){const ti={depth:Sn.depth,feature:Sn.feature,geometry:Sn.geometry,index:An,segment:Dn};this.rBush_.insert(boundingExtent(ti.segment),ti)}this.updateSegmentIndices_(je,Qe,Sn.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return Oe}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(Oe=>Oe.getType()==="Circle"||Oe.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:Oe})=>!(equals(Oe[0],e)||equals(Oe[1],e)))}insertPoint(e){var ke;const t=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(ke=this.vertexFeature_)==null?void 0:ke.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((Be,Ue)=>Be||this.insertVertex_(Ue,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,Oe,ke){this.rBush_.forEachInExtent(e.getExtent(),function(Be){Be.geometry===e&&(Oe===void 0||Be.depth===void 0||equals$2(Be.depth,Oe))&&Be.index>t&&(Be.index+=ke)})}}function compareIndexes(Ae,e){return Ae.index-e.index}function projectedDistanceToSegmentDataSquared(Ae,e,t){const Oe=e.geometry;if(Oe.getType()==="Circle"){let Be=Oe;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const Ue=squaredDistance(Be.getCenter(),fromUserCoordinate(Ae)),je=Math.sqrt(Ue)-Be.getRadius();return je*je}}const ke=fromUserCoordinate(Ae);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(ke,tempSegment)}function closestOnSegmentData(Ae,e,t){const Oe=e.geometry;if(Oe.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(Oe.getClosestPoint(fromUserCoordinate(Ae)));const ke=fromUserCoordinate(Ae);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(ke,tempSegment))}function getDefaultStyleFunction$1(){const Ae=createEditingStyle();return function(e,t){return Ae.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const Oe=e.map,ke=e.originalEvent;ke.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let Be;if(e.type==EventType.WHEEL&&(Be=ke.deltaY,FIREFOX&&ke.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Be/=DEVICE_PIXEL_RATIO),ke.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Be*=40)),Be===0)return!1;this.lastDelta_=Be;const Ue=Date.now();this.startTime_===void 0&&(this.startTime_=Ue),(!this.mode_||Ue-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Be)<4?"trackpad":"wheel");const je=Oe.getView();if(this.mode_==="trackpad"&&!(je.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(je.getAnimating()&&je.cancelAnimations(),je.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),je.adjustZoom(-Be/this.deltaPerZoom_,this.lastAnchor_?Oe.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=Ue,!1;this.totalDelta_+=Be;const We=Math.max(this.timeout_-(Ue-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,Oe),We),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let Oe=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(Oe=Oe?Oe>0?1:-1:0),zoomByDelta(t,Oe,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const Oe=this.targetPointers[0],ke=this.targetPointers[1],Be=Math.atan2(ke.clientY-Oe.clientY,ke.clientX-Oe.clientX);if(this.lastAngle_!==void 0){const We=Be-this.lastAngle_;this.rotationDelta_+=We,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=We}this.lastAngle_=Be;const Ue=e.map,je=Ue.getView();je.getConstraints().rotation!==disable&&(this.anchor_=Ue.getCoordinateFromPixelInternal(Ue.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(Ue.render(),je.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const Oe=this.targetPointers[0],ke=this.targetPointers[1],Be=Oe.clientX-ke.clientX,Ue=Oe.clientY-ke.clientY,je=Math.sqrt(Be*Be+Ue*Ue);this.lastDistance_!==void 0&&(t=this.lastDistance_/je),this.lastDistance_=je;const We=e.map,Qe=We.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=We.getCoordinateFromPixelInternal(We.getEventPixel(centroid(this.targetPointers))),We.render(),Qe.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const Oe=e.map.getView(),ke=this.lastScaleDelta_>1?1:-1;return Oe.endInteraction(this.duration_,ke),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,Oe,ke){super(e),this.selected=t,this.deselected=Oe,this.mapBrowserEvent=ke}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const Oe=e.layers;t=function(ke){return Oe.includes(ke)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const Oe=this.getMap().getAllLayers().find(function(ke){if(ke instanceof VectorLayer&&ke.getSource()&&ke.getSource().hasFeature(t))return ke});Oe&&this.addFeatureLayerAssociation_(t,Oe)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let ke=t.length-1;ke>=0;--ke){const Be=t[ke];if(Be!==this&&Be instanceof Select&&Be.getStyle()&&Be.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Be.getStyle());return}}const Oe=getUid(e);e.setStyle(originalFeatureStyles[Oe]),delete originalFeatureStyles[Oe]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),Oe=this.removeCondition_(e),ke=this.toggleCondition_(e),Be=!t&&!Oe&&!ke,Ue=e.map,je=this.getFeatures(),We=[],Qe=[];if(Be){clear$1(this.featureLayerAssociation_),Ue.forEachFeatureAtPixel(e.pixel,(Cn,An)=>{if(!(!(Cn instanceof Feature)||!this.filter_(Cn,An)))return this.addFeatureLayerAssociation_(Cn,An),Qe.push(Cn),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let Cn=je.getLength()-1;Cn>=0;--Cn){const An=je.item(Cn),En=Qe.indexOf(An);En>-1?Qe.splice(En,1):(je.remove(An),We.push(An))}Qe.length!==0&&je.extend(Qe)}else{Ue.forEachFeatureAtPixel(e.pixel,(Cn,An)=>{if(!(!(Cn instanceof Feature)||!this.filter_(Cn,An)))return(t||ke)&&!je.getArray().includes(Cn)?(this.addFeatureLayerAssociation_(Cn,An),Qe.push(Cn)):(Oe||ke)&&je.getArray().includes(Cn)&&(We.push(Cn),this.removeFeatureLayerAssociation_(Cn)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let Cn=We.length-1;Cn>=0;--Cn)je.remove(We[Cn]);je.extend(Qe)}return(Qe.length>0||We.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,Qe,We,e)),!0}}function getDefaultStyleFunction(){const Ae=createEditingStyle();return extend$4(Ae.Polygon,Ae.LineString),extend$4(Ae.GeometryCollection,Ae.LineString),function(e){return e.getGeometry()?Ae[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,t,Oe){this.decay_=e,this.minVelocity_=t,this.delay_=Oe,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let Oe=t-3;for(;Oe>0&&this.points_[Oe+2]>e;)Oe-=3;const ke=this.points_[t+2]-this.points_[Oe+2];if(ke<1e3/60)return!1;const Be=this.points_[t]-this.points_[Oe],Ue=this.points_[t+1]-this.points_[Oe+1];return this.angle_=Math.atan2(Ue,Be),this.initialVelocity_=Math.sqrt(Be*Be+Ue*Ue)/ke,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(Ae){Ae=Ae||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(Ae.altShiftDragRotate!==void 0?Ae.altShiftDragRotate:!0)&&e.push(new DragRotate),(Ae.doubleClickZoom!==void 0?Ae.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:Ae.zoomDelta,duration:Ae.zoomDuration})),(Ae.dragPan!==void 0?Ae.dragPan:!0)&&e.push(new DragPan({onFocusOnly:Ae.onFocusOnly,kinetic:t})),(Ae.pinchRotate!==void 0?Ae.pinchRotate:!0)&&e.push(new PinchRotate),(Ae.pinchZoom!==void 0?Ae.pinchZoom:!0)&&e.push(new PinchZoom({duration:Ae.zoomDuration})),(Ae.keyboard!==void 0?Ae.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:Ae.zoomDelta,duration:Ae.zoomDuration}))),(Ae.mouseWheelZoom!==void 0?Ae.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:Ae.onFocusOnly,duration:Ae.zoomDuration})),(Ae.shiftDragZoom!==void 0?Ae.shiftDragZoom:!0)&&e.push(new DragZoom({duration:Ae.zoomDuration})),e}var loglevel={exports:{}};(function(Ae){(function(e,t){Ae.exports?Ae.exports=t():e.log=t()})(commonjsGlobal,function(){var e=function(){},t="undefined",Oe=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),ke=["trace","debug","info","warn","error"],Be={},Ue=null;function je(Dn,ti){var ni=Dn[ti];if(typeof ni.bind=="function")return ni.bind(Dn);try{return Function.prototype.bind.call(ni,Dn)}catch{return function(){return Function.prototype.apply.apply(ni,[Dn,arguments])}}}function We(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function Qe(Dn){return Dn==="debug"&&(Dn="log"),typeof console===t?!1:Dn==="trace"&&Oe?We:console[Dn]!==void 0?je(console,Dn):console.log!==void 0?je(console,"log"):e}function Cn(){for(var Dn=this.getLevel(),ti=0;ti<ke.length;ti++){var ni=ke[ti];this[ni]=ti<Dn?e:this.methodFactory(ni,Dn,this.name)}if(this.log=this.debug,typeof console===t&&Dn<this.levels.SILENT)return"No console available for logging"}function An(Dn){return function(){typeof console!==t&&(Cn.call(this),this[Dn].apply(this,arguments))}}function En(Dn,ti,ni){return Qe(Dn)||An.apply(this,arguments)}function Sn(Dn,ti){var ni=this,ii,si,oi,ci="loglevel";typeof Dn=="string"?ci+=":"+Dn:typeof Dn=="symbol"&&(ci=void 0);function Pi(ui){var li=(ke[ui]||"silent").toUpperCase();if(!(typeof window===t||!ci)){try{window.localStorage[ci]=li;return}catch{}try{window.document.cookie=encodeURIComponent(ci)+"="+li+";"}catch{}}}function Ai(){var ui;if(!(typeof window===t||!ci)){try{ui=window.localStorage[ci]}catch{}if(typeof ui===t)try{var li=window.document.cookie,Ri=encodeURIComponent(ci),Mi=li.indexOf(Ri+"=");Mi!==-1&&(ui=/^([^;]+)/.exec(li.slice(Mi+Ri.length+1))[1])}catch{}return ni.levels[ui]===void 0&&(ui=void 0),ui}}function fi(){if(!(typeof window===t||!ci)){try{window.localStorage.removeItem(ci)}catch{}try{window.document.cookie=encodeURIComponent(ci)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Oi(ui){var li=ui;if(typeof li=="string"&&ni.levels[li.toUpperCase()]!==void 0&&(li=ni.levels[li.toUpperCase()]),typeof li=="number"&&li>=0&&li<=ni.levels.SILENT)return li;throw new TypeError("log.setLevel() called with invalid level: "+ui)}ni.name=Dn,ni.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ni.methodFactory=ti||En,ni.getLevel=function(){return oi??si??ii},ni.setLevel=function(ui,li){return oi=Oi(ui),li!==!1&&Pi(oi),Cn.call(ni)},ni.setDefaultLevel=function(ui){si=Oi(ui),Ai()||ni.setLevel(ui,!1)},ni.resetLevel=function(){oi=null,fi(),Cn.call(ni)},ni.enableAll=function(ui){ni.setLevel(ni.levels.TRACE,ui)},ni.disableAll=function(ui){ni.setLevel(ni.levels.SILENT,ui)},ni.rebuild=function(){if(Ue!==ni&&(ii=Oi(Ue.getLevel())),Cn.call(ni),Ue===ni)for(var ui in Be)Be[ui].rebuild()},ii=Oi(Ue?Ue.getLevel():"WARN");var Ni=Ai();Ni!=null&&(oi=Oi(Ni)),Cn.call(ni)}Ue=new Sn,Ue.getLogger=function(ti){if(typeof ti!="symbol"&&typeof ti!="string"||ti==="")throw new TypeError("You must supply a name when creating a logger.");var ni=Be[ti];return ni||(ni=Be[ti]=new Sn(ti,Ue.methodFactory)),ni};var Tn=typeof window!==t?window.log:void 0;return Ue.noConflict=function(){return typeof window!==t&&window.log===Ue&&(window.log=Tn),Ue},Ue.getLoggers=function(){return Be},Ue.default=Ue,Ue})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(Ae){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Ae||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(Ae,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),Oe=t.shift(),ke=t,Be=this[Oe];try{Array.isArray(ke)&&ke.length>0?Be=Be.replace("%var%",ke.join(" - ")):Be=Be.replace("%var%","%var% (not specified)")}catch{}return Be}},Helper$1={normalyzeParameters:function(Ae){var e=null;if(Ae){var t=[];for(var Oe in Ae)if(Ae.hasOwnProperty(Oe)){var ke=Ae[Oe];ke||(ke=""),t.push(Oe+"="+ke)}e=t.join("&")}return e},normalyzeUrl:function(Ae,e,t){var Oe=Ae;if(Ae){if(Ae.split("?").length-1>=2){var ke=Ae.search(/\?/)+1;Oe=Ae.substring(0,ke)+Ae.slice(ke).replace(/\?/g,"&")}var Be=Ae.indexOf("?");Be===-1&&(Oe+="?"),Be!==-1&&Be!==Ae.length-1&&(Oe+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),Oe+=e):Oe+=this.normalyzeParameters(e)),t&&(Oe=encodeURIComponent(Oe)),Oe},indent:function(Ae,e){var t=Ae||0;return new Array(t+1).join("	")+e}};function commonjsRequire(Ae){throw new Error('Could not dynamically require "'+Ae+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(Ae,e){(function(t,Oe){Ae.exports=Oe()})(commonjsGlobal,function(){function t(Er){var br=typeof Er;return Er!==null&&(br==="object"||br==="function")}function Oe(Er){return typeof Er=="function"}var ke=void 0;Array.isArray?ke=Array.isArray:ke=function(Er){return Object.prototype.toString.call(Er)==="[object Array]"};var Be=ke,Ue=0,je=void 0,We=void 0,Qe=function(br,Ir){Pi[Ue]=br,Pi[Ue+1]=Ir,Ue+=2,Ue===2&&(We?We(Ai):Oi())};function Cn(Er){We=Er}function An(Er){Qe=Er}var En=typeof window<"u"?window:void 0,Sn=En||{},Tn=Sn.MutationObserver||Sn.WebKitMutationObserver,Dn=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ni(){return function(){return process.nextTick(Ai)}}function ii(){return typeof je<"u"?function(){je(Ai)}:ci()}function si(){var Er=0,br=new Tn(Ai),Ir=document.createTextNode("");return br.observe(Ir,{characterData:!0}),function(){Ir.data=Er=++Er%2}}function oi(){var Er=new MessageChannel;return Er.port1.onmessage=Ai,function(){return Er.port2.postMessage(0)}}function ci(){var Er=setTimeout;return function(){return Er(Ai,1)}}var Pi=new Array(1e3);function Ai(){for(var Er=0;Er<Ue;Er+=2){var br=Pi[Er],Ir=Pi[Er+1];br(Ir),Pi[Er]=void 0,Pi[Er+1]=void 0}Ue=0}function fi(){try{var Er=Function("return this")().require("vertx");return je=Er.runOnLoop||Er.runOnContext,ii()}catch{return ci()}}var Oi=void 0;Dn?Oi=ni():Tn?Oi=si():ti?Oi=oi():En===void 0&&typeof commonjsRequire=="function"?Oi=fi():Oi=ci();function Ni(Er,br){var Ir=this,jr=new this.constructor(Ri);jr[li]===void 0&&ir(jr);var qr=Ir._state;if(qr){var Wr=arguments[qr-1];Qe(function(){return Ar(qr,jr,Wr,Ir._result)})}else pr(Ir,jr,Er,br);return jr}function ui(Er){var br=this;if(Er&&typeof Er=="object"&&Er.constructor===br)return Er;var Ir=new br(Ri);return cr(Ir,Er),Ir}var li=Math.random().toString(36).substring(2);function Ri(){}var Mi=void 0,Bi=1,er=2;function nr(){return new TypeError("You cannot resolve a promise with itself")}function lr(){return new TypeError("A promises callback cannot return that same promise.")}function hr(Er,br,Ir,jr){try{Er.call(br,Ir,jr)}catch(qr){return qr}}function ar(Er,br,Ir){Qe(function(jr){var qr=!1,Wr=hr(Ir,br,function(Kr){qr||(qr=!0,br!==Kr?cr(jr,Kr):gr(jr,Kr))},function(Kr){qr||(qr=!0,vr(jr,Kr))},"Settle: "+(jr._label||" unknown promise"));!qr&&Wr&&(qr=!0,vr(jr,Wr))},Er)}function wr(Er,br){br._state===Bi?gr(Er,br._result):br._state===er?vr(Er,br._result):pr(br,void 0,function(Ir){return cr(Er,Ir)},function(Ir){return vr(Er,Ir)})}function Fi(Er,br,Ir){br.constructor===Er.constructor&&Ir===Ni&&br.constructor.resolve===ui?wr(Er,br):Ir===void 0?gr(Er,br):Oe(Ir)?ar(Er,br,Ir):gr(Er,br)}function cr(Er,br){if(Er===br)vr(Er,nr());else if(t(br)){var Ir=void 0;try{Ir=br.then}catch(jr){vr(Er,jr);return}Fi(Er,br,Ir)}else gr(Er,br)}function rr(Er){Er._onerror&&Er._onerror(Er._result),_r(Er)}function gr(Er,br){Er._state===Mi&&(Er._result=br,Er._state=Bi,Er._subscribers.length!==0&&Qe(_r,Er))}function vr(Er,br){Er._state===Mi&&(Er._state=er,Er._result=br,Qe(rr,Er))}function pr(Er,br,Ir,jr){var qr=Er._subscribers,Wr=qr.length;Er._onerror=null,qr[Wr]=br,qr[Wr+Bi]=Ir,qr[Wr+er]=jr,Wr===0&&Er._state&&Qe(_r,Er)}function _r(Er){var br=Er._subscribers,Ir=Er._state;if(br.length!==0){for(var jr=void 0,qr=void 0,Wr=Er._result,Kr=0;Kr<br.length;Kr+=3)jr=br[Kr],qr=br[Kr+Ir],jr?Ar(Ir,jr,qr,Wr):qr(Wr);Er._subscribers.length=0}}function Ar(Er,br,Ir,jr){var qr=Oe(Ir),Wr=void 0,Kr=void 0,ps=!0;if(qr){try{Wr=Ir(jr)}catch(rs){ps=!1,Kr=rs}if(br===Wr){vr(br,lr());return}}else Wr=jr;br._state!==Mi||(qr&&ps?cr(br,Wr):ps===!1?vr(br,Kr):Er===Bi?gr(br,Wr):Er===er&&vr(br,Wr))}function Sr(Er,br){try{br(function(jr){cr(Er,jr)},function(jr){vr(Er,jr)})}catch(Ir){vr(Er,Ir)}}var Hr=0;function es(){return Hr++}function ir(Er){Er[li]=Hr++,Er._state=void 0,Er._result=void 0,Er._subscribers=[]}function mr(){return new Error("Array Methods must be provided an Array")}var dr=function(){function Er(br,Ir){this._instanceConstructor=br,this.promise=new br(Ri),this.promise[li]||ir(this.promise),Be(Ir)?(this.length=Ir.length,this._remaining=Ir.length,this._result=new Array(this.length),this.length===0?gr(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ir),this._remaining===0&&gr(this.promise,this._result))):vr(this.promise,mr())}return Er.prototype._enumerate=function(Ir){for(var jr=0;this._state===Mi&&jr<Ir.length;jr++)this._eachEntry(Ir[jr],jr)},Er.prototype._eachEntry=function(Ir,jr){var qr=this._instanceConstructor,Wr=qr.resolve;if(Wr===ui){var Kr=void 0,ps=void 0,rs=!1;try{Kr=Ir.then}catch(Cs){rs=!0,ps=Cs}if(Kr===Ni&&Ir._state!==Mi)this._settledAt(Ir._state,jr,Ir._result);else if(typeof Kr!="function")this._remaining--,this._result[jr]=Ir;else if(qr===Rr){var Ps=new qr(Ri);rs?vr(Ps,ps):Fi(Ps,Ir,Kr),this._willSettleAt(Ps,jr)}else this._willSettleAt(new qr(function(Cs){return Cs(Ir)}),jr)}else this._willSettleAt(Wr(Ir),jr)},Er.prototype._settledAt=function(Ir,jr,qr){var Wr=this.promise;Wr._state===Mi&&(this._remaining--,Ir===er?vr(Wr,qr):this._result[jr]=qr),this._remaining===0&&gr(Wr,this._result)},Er.prototype._willSettleAt=function(Ir,jr){var qr=this;pr(Ir,void 0,function(Wr){return qr._settledAt(Bi,jr,Wr)},function(Wr){return qr._settledAt(er,jr,Wr)})},Er}();function tr(Er){return new dr(this,Er).promise}function Dr(Er){var br=this;return Be(Er)?new br(function(Ir,jr){for(var qr=Er.length,Wr=0;Wr<qr;Wr++)br.resolve(Er[Wr]).then(Ir,jr)}):new br(function(Ir,jr){return jr(new TypeError("You must pass an array to race."))})}function Nr(Er){var br=this,Ir=new br(Ri);return vr(Ir,Er),Ir}function Pr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function kr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Rr=function(){function Er(br){this[li]=es(),this._result=this._state=void 0,this._subscribers=[],Ri!==br&&(typeof br!="function"&&Pr(),this instanceof Er?Sr(this,br):kr())}return Er.prototype.catch=function(Ir){return this.then(null,Ir)},Er.prototype.finally=function(Ir){var jr=this,qr=jr.constructor;return Oe(Ir)?jr.then(function(Wr){return qr.resolve(Ir()).then(function(){return Wr})},function(Wr){return qr.resolve(Ir()).then(function(){throw Wr})}):jr.then(Ir,Ir)},Er}();Rr.prototype.then=Ni,Rr.all=tr,Rr.race=Dr,Rr.resolve=ui,Rr.reject=Nr,Rr._setScheduler=Cn,Rr._setAsap=An,Rr._asap=Qe;function Tr(){var Er=void 0;if(typeof commonjsGlobal<"u")Er=commonjsGlobal;else if(typeof self<"u")Er=self;else try{Er=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var br=Er.Promise;if(br){var Ir=null;try{Ir=Object.prototype.toString.call(br.resolve())}catch{}if(Ir==="[object Promise]"&&!br.cast)return}Er.Promise=Rr}return Rr.polyfill=Tr,Rr.Promise=Rr,Rr})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(Ae){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!Ae.url)throw new Error("missing parameter : url is not defined !");if(!Ae.method)throw new Error("missing parameter : method is not defined !");Ae.format||(Ae.format="text");var t={};switch(t.url=Ae.url,t.data=Ae.data?Ae.data:null,t.method=Ae.method,t.timeOut=Ae.timeOut||0,t.scope=Ae.scope||this,t.proxy=Ae.proxy||null,t.content=Ae.content||null,t.headers=Ae.headers||{referer:"http://localhost"},Ae.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=Ae.content?Ae.content:"application/x-www-form-urlencoded",t.headers=Ae.headers?Ae.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(Ae.format){case"text":this.__call(t).then(function(Oe){e.trace(Oe),Ae.onResponse.call(this,Oe)}).catch(function(Oe){Ae.onFailure.call(this,Oe)});break;case"json":this.__callJSON(t).then(function(Oe){e.trace(Oe),Ae.onResponse.call(this,Oe)}).catch(function(Oe){Ae.onFailure.call(this,Oe)});break;case"xml":this.__callXML(t).then(function(Oe){e.trace(Oe),Ae.onResponse.call(this,Oe)}).catch(function(Oe){Ae.onFailure.call(this,Oe)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(Ae){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(Oe,ke){var Be=Ae.method==="POST"||Ae.method==="PUT"?1:0;Ae.data&&(typeof Ae.data=="object"&&Object.keys(Ae.data).length||typeof Ae.data=="string"&&Ae.data.length)&&!Be&&(Ae.url=Helper$1.normalyzeUrl(Ae.url,Ae.data)),e.trace("URL = ",Ae.url);var Ue=null;if(typeof window>"u"){var je=require("node-fetch"),We={headers:{Referer:"https://localhost"}};return Ae.data&&typeof Ae.data=="string"&&Be&&(We={method:Ae.method,body:Ae.data,headers:{"Content-Type":Ae.content,Referer:"https://localhost"}}),je(Ae.url,We).then(function(En){if(En.ok)Oe(En.text());else{var Sn="Errors Occured on Http Request (status : '"+En.statusText+"' | url : '"+En.url+"')",Tn=En.status;ke({message:Sn,status:Tn})}}).catch(function(En){ke({message:En,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),Ue=new XMLHttpRequest,Ue.open(Ae.method,Ae.url,!0),Ue.overrideMimeType=Ae.content;var Qe=null;Ae.timeOut>0&&(e.trace("XHR - TimeOut actif !"),Qe=window.setTimeout(function(){var En="TimeOut Occured on Http Request with XMLHttpRequest !";ke({message:En,status:-1})},Ae.timeOut)),Be&&(e.trace("data = ",Ae.data),Ue.setRequestHeader("Content-type",Ae.content)),Ue.onerror=function(En){console.log(En),ke(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Ue.ontimeout=function(En){console.log(En),ke(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Ue.onreadystatechange=function(En){if(Ue.readyState===4)if(Ue.status===200)window.clearTimeout(Qe),Oe(Ue.response);else{var Sn="Errors Occured on Http Request (status : '"+En.target.statusText+"' | url : '"+En.target.responseURL+"' | response : '"+En.target.response+"')",Tn=En.target.status;ke({message:Sn,status:Tn})}};var Cn=Ae.data&&Be?Ae.data:null;Ue.send(Cn)}else if(window.XDomainRequest){e.trace("XDomainRequest"),Ue=new XDomainRequest,Ue.open(Ae.method,Ae.url),Ue.overrideMimeType=Ae.content,Ae.timeOut>0&&(Ue.timeout=Ae.timeout,e.trace("XHR - TimeOut actif !")),Be&&Ue.setRequestHeader("Content-type",Ae.content),Ue.onerror=function(){ke(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Ue.ontimeout=function(){ke(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Ue.onload=function(En){if(Ue.status===200)Oe(Ue.responseText);else{var Sn="Errors Occured on Http Request (status : '"+En.target.statusText+"' | url : '"+En.target.responseURL+"')",Tn=En.target.status;ke({message:Sn,status:Tn})}};var An=Ae.data&&Be?Ae.data:null;Ue.send(An)}else throw new Error("CORS not supported")});return t},__callJSON:function(Ae){return this.__call(Ae).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",Ae.url,e)})},__callXML:function(Ae){return this.__call(Ae).then(function(e){var t;if(typeof window>"u"){var Oe=require("@xmldom/xmldom").DOMParser;t=new Oe().parseFromString(e,"text/xml")}else if(window.DOMParser){var ke=new window.DOMParser;t=ke.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",Ae.url,e)})}},JSONP={uuid:function(){var Ae=Math.floor(Date.now());return function(){return Ae++}}(),call:function(Ae){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!Ae)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!Ae.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(Ae.timeOut||(e.info("setting 'options.timeOut' default value"),Ae.timeOut=0),!Ae.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof Ae.callbackSuffix=="string"?Ae.callbackSuffix:this.uuid(),Oe=!1,ke=!1,Be=Ae.url.indexOf("callback=");if(Be!==-1){Oe=!0;var Ue=Ae.url.indexOf("&",Be);Ue===-1&&(Ue=Ae.url.length);var je=Ae.url.substring(Be+9,Ue);je&&(ke=!0,Ae.callbackName=je,e.info("setting 'options.callbackName' value ("+Ae.callbackName+") from 'options.url' parameter"))}if(!Oe){var We=Ae.url.indexOf("?");We===-1?Ae.url=Ae.url+"?callback=":We===Ae.url.length?Ae.url=Ae.url+"callback=":Ae.url=Ae.url+"&callback=",e.info("setting callback default key in 'options.url' : "+Ae.url)}var Qe=Ae.callbackName?!0:ke;if(ke||(Ae.callbackName||(e.info("setting 'options.callbackName' default value"),Ae.callbackName="callback",(t||t==="")&&(Ae.callbackName+=t)),Ae.url=Ae.url.replace("callback=","callback="+Ae.callbackName),e.info("setting callback function name in 'options.url' : "+Ae.url)),Ae.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),Ae.onTimeOut=function(){console.log("TimeOut while invoking url : "+Ae.url)}),!Qe){var Cn=this,An=null;Ae.timeOut>0&&(An=window.setTimeout(function(){window[Ae.callbackName]=function(){},Ae.onTimeOut(),Cn._deleteScript(t)},Ae.timeOut)),window[Ae.callbackName]=function(En){window.clearTimeout(An),Ae.onResponse(En),Cn._deleteScript(t)}}this._createScript(t,Ae.url)},_createScript:function(Ae,e){var t,Oe=document.getElementById("results"+Ae);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+Ae),t.setAttribute("async","true");var ke=document.documentElement||document.getElementsByTagName("head")[0];Oe===null?ke.appendChild(t):ke.replaceChild(t,Oe)},_deleteScript:function(Ae){var e=document.getElementById("results"+Ae);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(Ae){var e=Ae||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&Ae.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(Ae.protocol==="XHR"||Ae.format==="json"?e.wrap=!1:Ae.protocol==="JSONP"&&Ae.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper$1.normalyzeUrl(Ae.url,t)}switch(e.protocol){case"XHR":Ae.method==="GET"&&Ae.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(Ae){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=Ae;typeof Ae=="string"||Ae instanceof String?(this.message=Ae,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$1="3.4.6",date="19/12/2024",Pkg={version:version$1,date};function CommonService(Ae){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(Oe){console.log("onSuccess - la reponse est la suivante : ",Oe)},onFailure:function(Oe){Oe.status===200||!Oe.status?console.log("onFailure : ",Oe.message):console.log("onFailure - Erreur (",Oe.status,") : ",Oe.message)}};for(var e in Ae)Ae.hasOwnProperty(e)&&(this.options[e]=Ae[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(Oe){console.log("onSuccess - la réponse brute du service est la suivante : ",Oe)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof Ae.httpMethod=="string"?Ae.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof Ae.protocol=="string"?Ae.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=Ae.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var Ae=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(Ae,Be,t)}e.call(Ae);function t(Ue){this.logger.trace("CommonService::onBuildRequest : ",Ue),this.callService.call(Ae,Be,Oe)}function Oe(Ue){this.logger.trace("CommonService::onCallService : ",Ue),this.analyzeResponse.call(Ae,Be,ke)}function ke(Ue){if(this.logger.trace("CommonService::onAnalyzeResponse : ",Ue),Ue)this.options.onSuccess.call(this,Ue);else return Be.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function Be(Ue){this.logger.trace("CommonService::onError()");var je=Ue;je instanceof ErrorService||(je=new ErrorService(Ue.message)),this.options.onFailure.call(this,je)}},buildRequest:function(Ae,e){this.logger.error("overwritten method !"),Ae&&Ae.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(Ae,e){var t=null,Oe=this.request,ke=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Be={"gp-access-lib":Pkg.version};this.options.apiKey&&(Be.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Be,!1),ke&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),Oe=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),Oe=this.request));var Ue=this,je={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:Oe,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(We){Ue.logger.trace("callService::onResponse()");var Qe=null;if(Ue.options.protocol==="XHR"&&(Ue.logger.trace("Response XHR",We),Qe=We),Ue.options.protocol==="JSONP")if(Ue.logger.trace("Response JSON",We),We)if(We.http)if(We.http.status!==200){Ae.call(Ue,new ErrorService({status:We.http.status,message:We.http.error,type:ErrorService.TYPE_SRVERR}));return}else Qe=We.xml,Ue.options.rawResponse&&(Qe=We);else Qe=We;else{Ae.call(Ue,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof Ue.options.onBeforeParse=="function"){var Cn=Ue.options.onBeforeParse(Qe);typeof Cn=="string"&&(Qe=Cn)}Ue.response=Qe,e.call(Ue,Qe)},onFailure:function(We){Ue.logger.trace("callService::onFailure()"),We.type=ErrorService.TYPE_SRVERR,Ae.call(Ue,new ErrorService(We))},onTimeOut:function(){Ue.logger.trace("callService::onTimeOut()"),Ae.call(Ue,new ErrorService("TimeOut!"))}};Protocol.send(je)},analyzeResponse:function(Ae,e){this.logger.error("overwritten method !"),Ae&&Ae.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(Ae){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+Ae},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(Ae){Array.isArray(Ae)||(Ae=Ae.split(","));for(var e=[],t=0;t<Ae.length;t++)e[t]=this._key+Ae[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(Ae){if(Ae)return!!this.generalOptions.apiKeys[Ae]},getLayersId:function(Ae){return this.generalOptions.apiKeys[Ae]},getLayerId:function(Ae,e){if(!(!Ae||!e)){var t=null;if(this.layers){var Oe=this.layers;for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=ke.split("$");if(Ae===Be[0]&&Be[1]){var Ue=Be[1].split(":"),je=Be[1].split(";");if(je[1]===e.toUpperCase()){t=ke;break}if(Ue[2]===e.toUpperCase()){t=ke;break}}}}if(t)return t}},getLayersConf:function(Ae){var e={},t=this.getLayersId(Ae);if(t)for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];e[ke]=this.layers[ke]}return e},getLayerConf:function(Ae){if(this.layers)return this.layers[Ae]},getLayerParams:function(Ae,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var Oe=this.getLayerId(Ae,e);if(Oe){var ke=this.getLayerConf(Oe),Be=this.getLayerKey(Oe);if(Be.length===0)return;for(var Ue=0;Ue<Be.length;Ue++)ke.serviceParams.serverUrl[Be[Ue]]&&(t.url=ke.serviceParams.serverUrl[Be[Ue]]);if(e!=="WFS"&&(/\/v\//.test(t.url)?t.styles=" ":t.styles=ke.styles[0].name),t.version=ke.serviceParams.version,t.format=ke.formats&&ke.formats.length?ke.formats[0].name:"",t.projection=ke.defaultProjection,t.minScale=ke.globalConstraint.minScaleDenominator,t.maxScale=ke.globalConstraint.maxScaleDenominator,t.extent=ke.globalConstraint.bbox,t.legends=ke.legends,t.title=ke.title,t.description=ke.description,e==="WMS"&&(t.metadata=ke.metadata),ke.wmtsOptions){t.tileMatrixSetLimits=ke.wmtsOptions.tileMatrixSetLimits;var je=ke.wmtsOptions.tileMatrixSetLink;if(je){t.TMSLink=je;var We=this.getTMSConf(je);t.matrixIds=Object.keys(We.tileMatrices),t.tileMatrices=We.tileMatrices,t.nativeResolutions=We.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(Ae){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var Oe in t){var ke=t[Oe];ke.forEach(function(Be){Be===Ae&&e.push(Oe)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(Ae){if(this.tileMatrixSets)return this.tileMatrixSets[Ae]},getGlobalConstraints:function(Ae){var e={};if(Ae){var t=this.getLayerConf(Ae);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config$1(Ae){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=Ae.onSuccess!==null&&typeof Ae.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!Ae.apiKey&&!Ae.customConfigFile&&(Ae.apiKey="full"),this.options={},this.options.onSuccess=Ae.onSuccess,this.options.onFailure=Ae.onFailure,this.options.sync=Ae.sync||!1,this.options.listConfigUrls=Ae.customConfigFile?[Ae.customConfigFile]:Array.isArray(Ae.apiKey)?DefaultUrlService.Config.url(Ae.apiKey):DefaultUrlService.Config.url(Ae.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(Ae,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){Ae.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(Ae,e){this.options.sync?__callServiceSync.call(this,Ae,e):__callService.call(this,Ae,e)};var __callService=function(Ae,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var Oe=require("node-fetch");t=Oe}else t=window.fetch;var ke=Ue=>t(Ue,{credentials:"same-origin"}).then(je=>{if(je.ok)return je.json().then(We=>We).catch(We=>{throw new Error("Exception Json : "+We)});throw new Error("Exception HTTP : "+je.status+" (status code) !")}).catch(je=>new Promise((We,Qe)=>{Qe(je)})),Be=[];for(let Ue=0;Ue<this.listConfigUrls.length;Ue++){const je=this.listConfigUrls[Ue];Be.push(ke(je))}Promise.all(Be).then(Ue=>{if(!Ue)throw new Error("results config empty !?");Ue.forEach(je=>{this.listConfigResults.push(je)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(Ue=>{Ae.call(this,Ue)})},__callServiceSync=function(Ae,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const ke=this.listConfigUrls[t],Be=new XMLHttpRequest;if(Be.open("GET",ke,!1),Be.send(null),Be.status===200){var Oe=JSON.parse(Be.responseText);this.listConfigResults.push(Oe)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):Ae.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(Ae,e){var t=function(je){for(var We={},Qe={},Cn={},An=0;An<je.length;An++){if(!je[An].generalOptions||!je[An].layers)return;Qe={...Qe,...je[An].generalOptions.apiKeys},We={...We,...je[An].layers},Cn={...Cn,...je[An].tileMatrixSets}}var En={generalOptions:{apiKeys:Qe},layers:We,tileMatrixSets:Cn};return En},Oe=t(this.listConfigResults);if(!Oe){Ae.call(this,new Error("configuration structure not conforme !"));return}var ke=new ConfigInterface;Object.assign(ke,Oe);var Be=typeof window<"u"?window:{};if(Be.Gp||(Be.Gp={}),Be.Gp.Config){Object.assign(Be.Gp.Config,ke);for(var Ue in ke)Be.Gp.Config[Ue]=ke[Ue]}else Be.Gp.Config=ke;e.call(this,Be.Gp.Config)};function AltiRequest(Ae){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=Ae||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(Ae){for(var e=[],t=0;t<Ae.length;t++){var Oe=Ae[t];Oe.lon&&Oe.lat&&e.push(Oe)}this.positions=e},getPositions:function(Ae){if(!Ae)return this.positions;var e=this.positions.length-1;return Ae>e||Ae<e?(this.logger.warn("index out of range !"),this.positions):this.positions[Ae]},addPositions:function(Ae){for(var e=0;e<Ae.length;e++){var t=Ae[e];t.lon&&t.lat&&this.positions.push(Ae[e])}},getLon:function(){for(var Ae=[],e=0;e<this.positions.length;e++)Ae.push(this.positions[e].lon);return this.logger.trace(Ae),Ae.join(this.delimiter)},getLat:function(){for(var Ae=[],e=0;e<this.positions.length;e++)Ae.push(this.positions[e].lat);return this.logger.trace(Ae),Ae.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var Ae=[];return Ae.push({k:"lon",v:this.getLon()}),Ae.push({k:"lat",v:this.getLat()}),Ae.push({k:"delimiter",v:this.delimiter}),Ae.push({k:"indent",v:this.indent}),Ae.push({k:"crs",v:this.crs}),Ae.push({k:"format",v:this.format}),Ae};function AltiElevationRequest(Ae){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(Ae){this._zonly=Ae}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var Ae=[];return Ae.push({k:"lon",v:this.getLon()}),Ae.push({k:"lat",v:this.getLat()}),Ae.push({k:"indent",v:this.indent}),Ae.push({k:"crs",v:this.crs}),Ae.push({k:"zonly",v:this.zonly}),Ae.push({k:"format",v:this.format}),Ae.push({k:"resource",v:this.resource}),Ae};function AltiProfilRequest(Ae){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(Ae){this._sampling=Ae}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var Ae=[];return Ae.push({k:"lon",v:this.getLon()}),Ae.push({k:"lat",v:this.getLat()}),Ae.push({k:"indent",v:this.indent}),Ae.push({k:"crs",v:this.crs}),Ae.push({k:"sampling",v:this.sampling}),Ae.push({k:"format",v:this.format}),Ae.push({k:"resource",v:this.resource}),Ae};function AltiRequestREST(Ae){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=Ae||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var Ae="";return this.method==="POST"?Ae=this.template.post.value:this.method==="GET"&&(Ae=this.template.get.value),Ae=Ae.replace(/__LON__/g,this.DataObject.getLon()),Ae=Ae.replace(/__LAT__/g,this.DataObject.getLat()),Ae=Ae.replace(/__INDENT__/g,this.DataObject.indent),Ae=Ae.replace(/__CRS__/g,this.DataObject.crs),Ae=Ae.replace(/__RESOURCE__/g,this.DataObject.resource),Ae=Ae.replace(/__MEASURES__/g,this.DataObject.measures),Ae=Ae+this.__addDataInputs(),this.logger.trace("traduction tmpl",Ae),this.requestString=Ae,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var Ae;if(this.method==="POST")Ae=this.template.post;else if(this.method==="GET")Ae=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=Ae.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=Ae.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(Ae){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=Ae||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var Ae=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return Ae.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var Ae="";if(this.method==="POST")Ae=this.template.post.value;else if(this.method==="GET")Ae=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return Ae=Ae.replace(/__SERVICE__/g,this.paramservice),Ae=Ae.replace(/__VERSION__/g,this.paramversion),Ae=Ae.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),Ae=Ae.replace(/__IDENTIFIER__/g,this.paramidentifier),Ae=Ae.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(Ae=Ae.replace(/__NAMESPACE__/g,this.namespaceByDefault),Ae=Ae.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),Ae=Ae.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),Ae?(this.requestString=Ae,this.logger.trace("traduction tmpl",Ae),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var Ae=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",Oe=this,ke=this.DataObject.getData(),Be=0;Be<ke.length;Be++)(function(Ue){e&&(e=Ue===ke.length-1?"":";"),t=t.concat(Oe.__addDataInput(Ae,ke[Ue].k,ke[Ue].v),e)})(Be);return t},__addDataInput:function(Ae,e,t){var Oe=Ae;return Oe=Oe.replace(/__KEY__/g,e),Oe=Oe.replace(/__DATA__/g,t),Oe},setMethod:function(Ae){Ae==="GET"||Ae==="POST"?this.method=Ae:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(Ae){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!Ae)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!Ae.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(Ae.type){case"Elevation":Ae.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(Ae.param);break;case"Profil":Ae.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(Ae.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var Oe={data:t,method:Ae.method,param:Ae.wps},ke=new WPS(Oe);if(!ke.processRequestString())throw new Error("Enable to process request !");return ke.requestString}},AltiRequestFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,Oe={type:Ae.sampling?"Profil":"Elevation",method:Ae.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};Oe.param.positions=Ae.positions,Oe.param.format=Ae.outputFormat,Oe.param.sampling=Ae.sampling,Oe.param.zonly=Ae.zonly,Oe.param.measures=Ae.measures,Oe.param.resource=Ae.resource;var ke=Ae.onError!==null&&typeof Ae.onError=="function",Be=Ae.onSuccess!==null&&typeof Ae.onSuccess=="function",Ue=null;switch(Ae.api){case"REST":var je=new AltiRequestREST(Oe);if(!je.processRequestString()){if(Ue="Error in process request (rest) !",ke){Ae.onError.call(Ae.scope,new ErrorService(Ue));return}throw new Error(Ue)}t=je.requestString;break;case"WPS":if(Oe.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(Oe),!t){if(Ue="Error in process request (wps) !",ke){Ae.onError.call(Ae.scope,new ErrorService(Ue));return}throw new Error(Ue)}break;default:if(Ue="Type of API is not supported by service (REST or WPS) !",ke){Ae.onError.call(Ae.scope,new ErrorService(Ue));return}throw new Error(Ue)}return Be&&Ae.onSuccess.call(Ae.scope,t),t}};function XML$1(Ae){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,Ae&&(Ae.xmlString&&typeof Ae.xmlString=="string"&&(this.xmlString=Ae.xmlString,this.xmlDoc=__getXMLDOC(Ae.xmlString)),Ae.reader&&this.setReader(Ae.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(Ae){Ae&&typeof Ae=="string"&&(this.xmlString=Ae,this.xmlDoc=__getXMLDOC(Ae))},getReader:function(){return this.reader},setReader:function(Ae){Ae&&Ae.read&&typeof Ae.read=="function"&&(this.reader=Ae)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(Ae){this.xmlDoc=Ae},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var Ae=__getRootNode(this.xmlDoc);if(Ae){var e;return this.reader&&this.reader.read?e=this.reader.read(Ae):(e={},e[Ae.nodeName]=__readDefault(Ae)),e}else return{}}}};function __getXMLDOC(Ae){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(Ae,"text/xml")}else{var t,Oe,ke="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){Oe=new window.ActiveXObject("Microsoft.XMLDOM"),Oe.async=!1,Oe.loadXML(Ae);var Be=Oe.parseError;if(Be.errorCode)throw Be.line&&Be.linepos&&(ke+="( ligne "+Be.line+", colonne "+Be.linepos),Be.reason&&(ke+=":  "+Be.reason+")"),new Error(ke);return Oe}else if(window.DOMParser){t=new window.DOMParser;try{Oe=t.parseFromString(Ae,"text/xml")}catch(Qe){throw Qe.message==="SyntaxError"?new Error(ke):new Error("Erreur lors du parsing de la réponse du service : "+Qe.message)}if(Oe.getElementsByTagName("parsererror").length>0)for(var Ue=Oe.getElementsByTagName("parsererror"),je=0;je<Ue.length;je++){var We=Ue[je].innerHTML;if(We.indexOf("Huge input lookup")===-1)throw ke+="("+We+")",new Error(ke)}else if(!Oe.documentElement)throw new Error(ke);return Oe}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(Ae){var e;return Ae.nodeType===9?e=Ae.documentElement:Ae.nodeType===1&&(e=Ae),e}function __readDefault(Ae){var e={};if(Ae.attributes.length>0){var t=__getAttributes(Ae);e.attributes=t}if(Ae.hasChildNodes()){for(var Oe={},ke,Be=Ae.childNodes,Ue=0;Ue<Be.length;Ue++)if(ke=Be[Ue],ke.nodeType===3)e.textContent=ke.nodeValue;else if(ke.nodeType===1)if(Oe=__readDefault(ke),!e[ke.nodeName])e[ke.nodeName]=Oe;else{if(!Array.isArray(e[ke.nodeName])){var je=e[ke.nodeName];e[ke.nodeName]=[],e[ke.nodeName].push(je)}e[ke.nodeName].push(Oe)}}return e}function __getAttributes(Ae){if(Ae.attributes.length>0){for(var e={},t=Ae.attributes,Oe=0;Oe<t.length;Oe++){var ke=t[Oe];e[ke.nodeName]=ke.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(Ae){var e=new AltiResponse;if(Ae.hasChildNodes())for(var t=Ae.childNodes,Oe,ke,Be=0;Be<t.length;Be++)Oe=t[Be],AltiResponseReader.READERS[Oe.nodeName]&&(ke=AltiResponseReader.READERS[Oe.nodeName](Oe),e.elevations.push(ke));return e},elevation:function(Ae){var e=new Elevation;if(Ae.hasChildNodes())for(var t=Ae.childNodes,Oe,ke=0;ke<t.length;ke++)Oe=t[ke],AltiResponseReader.READERS[Oe.nodeName]&&AltiResponseReader.READERS[Oe.nodeName](Oe,e);return e},lat:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(Ae,e){var t=Ae.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(Ae,e){e.measures=[];var t;if(Ae.hasChildNodes())for(var Oe=Ae.childNodes,ke,Be,Ue=0;Ue<Oe.length;Ue++){t=new Measure,ke=Oe[Ue],Be=ke.childNodes;for(var je=0;je<Be.length;je++)if(AltiResponseReader.READERS[Be[je].nodeName])AltiResponseReader.READERS[Be[je].nodeName](Be[je],t);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(Ae){var e={};if(Ae.hasChildNodes())for(var t=Ae.childNodes,Oe,ke=0;ke<t.length;ke++)Oe=t[ke],Oe.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(Oe));return e},exception:function(Ae){var e={},t=Ae.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var Oe=Ae.firstChild;return Oe&&Oe.nodeType===3&&(e.exception=Oe.nodeValue),e},error:function(Ae){var e={error:{}};if(Ae.hasChildNodes())for(var t=Ae.childNodes,Oe,ke=0;ke<t.length;ke++){Oe=t[ke];var Be;Oe.nodeType===1&&Oe.nodeName==="code"&&(Be=Oe.firstChild,Be&&Be.nodeType===3&&(e.error.code=Be.nodeValue)),Oe.nodeType===1&&Oe.nodeName==="description"&&(Be=Oe.firstChild,Be&&Be.nodeType===3&&(e.error.description=Be.nodeValue))}return e}};AltiResponseReader.read=function(Ae){if(Ae.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(Ae);return e}else if(Ae.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(Ae);return t}else if(Ae.nodeName==="error"){var Oe=AltiResponseReader.READERS.error(Ae);return Oe}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(Ae.response)if(Ae.rawResponse)e.trace("analyze response : raw"),t=Ae.response;else{switch(Ae.outputFormat){case"xml":e.trace("analyze response : xml");try{var Oe=new XML$1({reader:AltiResponseReader});if(typeof Ae.response=="string"?Oe.setXMLString(Ae.response):Oe.setXMLDoc(Ae.response),t=Oe.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(An){var ke=An.message;Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof Ae.response);var Be=null;if(typeof Ae.response=="string"?Be=JSON.parse(Ae.response):Be=Ae.response,Be&&Be.error){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Be.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Be){var Ue=Be.elevations,je=new AltiResponse,We;if(Array.isArray(Ue)&&Ue.length)for(var Qe=0;Qe<Ue.length;Qe++)We=new Elevation,typeof Ue[Qe]=="object"?(Ue[Qe].lon&&(We.lon=Ue[Qe].lon),Ue[Qe].lat&&(We.lat=Ue[Qe].lat),Ue[Qe].z&&(We.z=Ue[Qe].z),Ue[Qe].acc&&(We.acc=Ue[Qe].acc),Ue[Qe].measures&&(We.measures=Ue[Qe].measures)):typeof Ue[Qe]=="number"&&(We.z=Ue[Qe]),Array.isArray(je.elevations)&&je.elevations.push(We);t=je}if(!t){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var Cn=t.error.description;Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Cn),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Ae.onSuccess.call(Ae.scope,t)}};function Alti(Ae){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!Ae.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(Ae.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=Ae.positions,this.options.outputFormat=typeof Ae.outputFormat=="string"?Ae.outputFormat.toLowerCase():"xml",this.options.resource=Ae.resource||"ign_rge_alti_wld",this.options.sampling=Ae.sampling||null,this.options.api=typeof Ae.api=="string"?Ae.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=Ae.zonly||!1,this.options.measures=Ae.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var Oe=(Ae.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[Oe];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var ke=this.options.serverUrl.lastIndexOf(".");if(ke!==-1){var Be=this.options.serverUrl.substring(ke+1);if(Be&&Be.length<5)switch(this.logger.trace("Server Extension URL : "+Be),Be.toLowerCase()){case"json":case"xml":this.options.outputFormat=Be.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(Ae,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(Oe){this.request=Oe,e.call(this,this.request)},onError:Ae,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Ae,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(Ae){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=Ae||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var Ae={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(Ae[e]=this.filters[e]);return Ae},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var Ae=[];this.geocodeMethod==="search"&&Ae.push({k:"q",v:this.query}),this.index&&Ae.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&Ae.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(Ae.push({k:"lon",v:this.lon}),Ae.push({k:"lat",v:this.lat})),this.maxResp&&Ae.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&Ae.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)Ae.push({k:t,v:e[t]});return Ae};function GeocodeRequestREST(Ae){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!Ae)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Ae}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var Ae="";const t=new GeocodeParamREST(this.settings).getParams();for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];Ae&&(Ae+="&"),Ae+=ke.k+"="+ke.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+Ae,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=Ae||{},Oe=new GeocodeRequestREST(t);if(!Oe.processRequestString())throw new Error("Error process request (rest) !");var ke=Oe.requestString;return e.trace(ke),ke}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(Ae){var e=new GeocodeResponse;const t=JSON.parse(Ae);if(t.type==="FeatureCollection")for(var Oe=0;Oe<t.features.length;++Oe)_parseFeature(t.features[Oe],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var ke=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:ke,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(Ae,e){var t=new GeocodedLocation;if(Ae.geometry&&Ae.geometry.type==="Point"&&(t.position={lon:Ae.geometry.coordinates[0],lat:Ae.geometry.coordinates[1]}),Ae.properties){for(var Oe in Ae.properties)Oe==="score"?t.accuracy=Ae.properties[Oe]:Oe==="_type"?Ae.properties[Oe]==="address"?t.type="StreetAddress":Ae.properties[Oe]==="poi"?t.type="PositionOfInterest":(Ae.properties[Oe]==="parcel"||Ae.properties[Oe]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[Oe]=Ae.properties[Oe];Ae.properties._type==="address"&&(t.matchType=Ae.properties.number!==void 0&&Ae.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(Ae){return{exceptionReport:Ae}}var GeocodeReponseFactory={build:function(Ae){var e=null;if(Ae.response)if(Ae.rawResponse)e=Ae.response;else{try{if(e=new GeocodeResponseParser().parse(Ae.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(Oe){var t=Oe.message;typeof Ae.response=="string"?t+="('"+Ae.response+"')":t+="('"+Ae.response.documentElement.innerHTML+"')",Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}Ae.onSuccess.call(Ae.scope,e)}};function Geocode(Ae){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(Ae);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),Oe=0;Oe<t.length;Oe++){var ke=t[Oe];(typeof e.filters[ke]>"u"||typeof e.filters[ke]=="object"&&Object.keys(e.filters[ke]).length===0||typeof e.filters[ke]=="string"&&e.filters[ke].length===0||Array.isArray(e.filters[ke])&&e.filters[ke].length===0)&&delete this.options.filters[ke]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(Ae){const e=Ae;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(Ae,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Ae,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(Ae){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(Ae);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),Oe=0;Oe<t.length;Oe++){var ke=t[Oe];(typeof e.filters[ke]>"u"||typeof e.filters[ke]=="object"&&Object.keys(e.filters[ke]).length===0||typeof e.filters[ke]=="string"&&e.filters[ke].length===0||Array.isArray(e.filters[ke])&&e.filters[ke].length===0)&&delete this.options.filters[ke]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(Ae){var e=Ae;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(Ae,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Ae,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(Ae){return{type:"Polygon",coordinates:[[[Ae.left,Ae.top],[Ae.right,Ae.top],[Ae.right,Ae.bottom],[Ae.left,Ae.bottom],[Ae.left,Ae.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(Ae){return{type:"Circle",radius:Ae.radius,coordinates:[Ae.x,Ae.y]}};ReverseGeocode$1.prototype.polygon2Json=function(Ae){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<Ae.length;++t)e.coordinates[0].push([Ae[t].x,Ae[t].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(Ae.response)if(Ae.rawResponse)e.trace("analyze response : raw"),t=Ae.response;else{var Oe=null;if(typeof Ae.response=="string"?Oe=JSON.parse(Ae.response):Oe=Ae.response,Oe){if(Oe.error){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.error.description),status:Oe.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,Oe.results&&Array.isArray(Oe.results))for(var ke=null,Be=0;Be<Oe.results.length;Be++){var Ue=Oe.results[Be];ke=new SuggestedLocation,Ue&&(Ue.country==="StreetAddress"?(ke.street=Ue.street,ke.type="StreetAddress"):Ue.country==="PositionOfInterest"&&(ke.poi=Ue.street,ke.type="PositionOfInterest",ke.poiType=Ue.poiType),ke.position&&(ke.position.x=Ue.x,ke.position.y=Ue.y),ke.kind=Ue.kind,ke.commune=Ue.city,ke.fullText=Ue.fulltext,ke.postalCode=Ue.zipcode,ke.classification=Ue.classification),t.suggestedLocations.push(ke)}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Ae.onSuccess.call(Ae.scope,t)}};function AutoComplete(Ae){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(Ae);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(Ae){const e=Ae;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(Ae,e){var t="";this.options.territory&&(t=this.options.territory);var Oe="";this.options.type&&(Oe=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:Oe,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:Ae,scope:this};AutoCompleteResponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(Ae){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=Ae||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var Ae=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];Ae.push(t.x+","+t.y)}return Ae.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var Ae=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Ae.push(JSON.stringify(this.constraints[e]));return Ae.join("|")}};RouteParamREST.prototype.getParams=function(){var Ae=[];return Ae.push({k:"resource",v:this.resource}),Ae.push({k:"start",v:this.start}),Ae.push({k:"end",v:this.end}),Ae.push({k:"geometryFormat",v:"geojson"}),this.optimization&&Ae.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&Ae.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&Ae.push({k:"profile",v:this.getProfile()}),this.constraints&&Ae.push({k:"constraints",v:this.getConstraints()}),this.crs&&Ae.push({k:"crs",v:this.crs}),this.distanceUnit&&Ae.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&Ae.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&Ae.push({k:"waysAttributes",v:this.getWaysAttributes()}),Ae};function RouteRequestREST(Ae){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!Ae)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Ae}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var Ae=new RouteParamREST(this.settings),e=Ae.getParams(),t="",Oe=0;Oe<e.length;Oe++){var ke=e[Oe];t&&(t+="&"),t+=ke.k+"="+ke.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,Oe=Ae||{},ke=Ae.onError!==null&&typeof Ae.onError=="function",Be=null,Ue=new RouteRequestREST(Oe);if(!Ue.processRequestString()){if(Be="Error process request (rest) !",ke){Ae.onError.call(Ae.scope,new ErrorService(Be));return}throw new Error(Be)}return t=Ue.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(Ae.response)if(Ae.rawResponse)e.trace("analyze response : raw"),t=Ae.response;else{e.trace("analyze response : json");var Oe;if(typeof Ae.response=="string"?Oe=JSON.parse(Ae.response):Oe=Ae.response,Oe){if(Oe.message){Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe.message)));return}var ke=[],Be=[],Ue=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(Oe.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(Oe.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(Oe.bbox[0]),t.bbox.bottom=parseFloat(Oe.bbox[1]),t.bbox.right=parseFloat(Oe.bbox[2]),t.bbox.top=parseFloat(Oe.bbox[3])),t.hasOwnProperty("routeGeometry")&&!Ae.geometryInInstructions&&(t.routeGeometry=Oe.geometry),t.hasOwnProperty("routeInstructions")&&Ae.geometryInInstructions){var je=Oe.portions,We;if(Array.isArray(je)&&je.length)for(We=0;We<je.length;We++)ke.push(je[We]);if(ke.length)for(We=0;We<ke.length;We++)Be.push(ke[We].steps);if(Be.length)for(We=0;We<Be.length;We++)Ue=Ue.concat(Be[We]);Ue.forEach(function(Qe){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=Qe.duration,t.routeInstructions[t.routeInstructions.length-1].distance=Qe.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=Qe.geometry,Qe.name==="Valeur non renseignée"&&(Qe.name=""),Qe.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Départ";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+Qe.instruction.type+"?";break}if(Qe.instruction.modifier)switch(Qe.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+Qe.instruction.modifier+"?";break}Qe.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${Qe.instruction.exit}e sortie`),Qe.attributes.name&&((Qe.attributes.name.nom_1_droite||Qe.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),Qe.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Qe.attributes.name.nom_1_droite}`),Qe.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Qe.attributes.name.toponyme}`))})}}if(!t){Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Ae.onSuccess.call(Ae.scope,t)}};function Route$1(Ae){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!Ae.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(Ae.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(Ae.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!Ae.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(Ae.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(Ae.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(Ae.outputFormat&&Ae.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=Ae.resource||"bdtopo-osrm",this.options.startPoint=Ae.startPoint,this.options.endPoint=Ae.endPoint,this.options.viaPoints=Ae.viaPoints||[],this.options.routePreference=Ae.routePreference||"fastest",Ae.graph?(Ae.graph==="Voiture"&&(this.options.graph="car"),Ae.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Ae.constraints)if(Array.isArray(Ae.constraints))for(var e=0;e<Ae.constraints.length;e++)this.options.constraints.push(Ae.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},Oe={},ke={};if(Ae.exclusions&&Ae.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Ae.exclusions.length;Be++){if(typeof Ae.exclusions[Be]=="string")Ae.exclusions[Be]=Ae.exclusions[Be].toLowerCase();else continue;Ae.exclusions[Be]==="toll"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="autoroute",this.options.constraints.push(ke)),Ae.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Ae.exclusions[Be]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.geometryInInstructions=Ae.geometryInInstructions||!1,this.options.provideBbox=Ae.provideBbox||!0,this.options.distanceUnit=Ae.distanceUnit||"m",this.options.timeUnit=Ae.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=Ae.srs||"EPSG:4326",this.options.waysAttributes=Ae.waysAttributes||[],!this.options.serverUrl){var Ue=DefaultUrlService.Route.newUrl();if(!Ue)throw new Error("Url by default not found !");this.options.serverUrl=Ue,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(Ae,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Ae,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(Ae){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=Ae||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var Ae=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Ae.push(JSON.stringify(this.constraints[e]));return Ae.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var Ae=[];return Ae.push({k:"resource",v:this.resource}),Ae.push({k:"point",v:this.getLocation()}),Ae.push({k:"direction",v:this.getDirection()}),Ae.push({k:"costType",v:this.costType}),Ae.push({k:"costValue",v:this.costValue}),Ae.push({k:"profile",v:this.profile}),Ae.push({k:"timeUnit",v:this.timeUnit}),Ae.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&Ae.push({k:"crs",v:this.crs}),this.constraints&&Ae.push({k:"constraints",v:this.getConstraints()}),Ae};function ProcessIsoCurveRequest(Ae){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!Ae)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Ae,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var Ae="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),Oe=t.getParams();for(e=0;e<Oe.length;e++){var ke=Oe[e];Ae&&(Ae+="&"),Ae+=ke.k+"="+ke.v}break;case"POST":this.logger.trace("Process POST Request");var Be={};Be.resource=this.settings.resource,Be.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Be.costType="distance",Be.costValue=this.settings.distance):(Be.costType="time",Be.costValue=this.settings.time),Be.profile=this.settings.graph,this.settings.reverse?Be.direction="arrival":Be.direction="departure",Be.constraints=this.settings.constraints,Be.distanceUnit=this.settings.distanceUnit,Be.timeUnit=this.settings.timeUnit,Be.crs=this.settings.srs,Ae=JSON.stringify(Be);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(Ae),this.requestString=Ae,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(Ae){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(Ae.response)if(Ae.rawResponse)e.trace("analyze response : raw"),t=Ae.response;else{e.trace("analyze response : json");var Oe;if(typeof Ae.response=="string"?Oe=JSON.parse(Ae.response):Oe=Ae.response,t=new ProcessIsoCurveResponse,Oe){Oe.costType==="distance"?(t.time="",t.distance=Oe.costValue):(t.time=Oe.costValue,t.distance=""),t.message="",t.id="",t.srs=Oe.crs,t.geometry=Oe.geometry;var ke=Oe.point.split(",");t.location&&(t.location.x=ke[0],t.location.y=ke[1])}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Ae.response)));return}if(t.exceptionReport){Ae.onError.call(Ae.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Ae.onError.call(Ae.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Ae.onSuccess.call(Ae.scope,t)}};function ProcessIsoCurve(Ae){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!Ae.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(Ae.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(Ae.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!Ae.time&&!Ae.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!Ae.time&&Ae.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),Ae.time&&!Ae.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=Ae.resource||"bdtopo-valhalla",this.options.exclusions=Ae.exclusions||[],this.options.reverse=Ae.reverse||!1,this.options.srs=Ae.srs||"EPSG:4326",this.options.distanceUnit=Ae.distanceUnit||"m",this.options.timeUnit=Ae.timeUnit||"second",Ae.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,Ae.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,Ae.graph?(Ae.graph==="Voiture"&&(this.options.graph="car"),Ae.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Ae.constraints)if(Array.isArray(Ae.constraints))for(var e=0;e<Ae.constraints.length;e++)this.options.constraints.push(Ae.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},Oe={},ke={};if(Ae.exclusions&&Ae.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Ae.exclusions.length;Be++){if(typeof Ae.exclusions[Be]=="string")Ae.exclusions[Be]=Ae.exclusions[Be].toLowerCase();else continue;Ae.exclusions[Be]==="toll"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="autoroute",this.options.constraints.push(ke)),Ae.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Ae.exclusions[Be]==="bridge"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="pont",this.options.constraints.push(Oe))}}if(this.options.outputFormat=typeof Ae.outputFormat=="string"?Ae.outputFormat.toLowerCase():"json",Ae.outputFormat&&Ae.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var Ue=DefaultUrlService.ProcessIsoCurve.newUrl();if(!Ue)throw new Error("Url by default not found !");this.options.serverUrl=Ue,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(Ae,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(Oe){Ae.call(this,new ErrorService(Oe.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(Ae,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:Ae,scope:this};ProcessIsoCurveResponseFactory.build(t)}else Ae.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(Ae){var e=new Config$1(Ae);e.call()},getAltitude:function(Ae){var e=new Alti(Ae);e.call()},geocode:function(Ae){var e=new Geocode(Ae);e.call()},reverseGeocode:function(Ae){var e=new ReverseGeocode$1(Ae);e.call()},autoComplete:function(Ae){var e=new AutoComplete(Ae);e.call()},route:function(Ae){var e=new Route$1(Ae);e.call()},isoCurve:function(Ae){var e=new ProcessIsoCurve(Ae);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(Ae){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Ae||"default";return loglevelExports.getLogger(t)},disableAll:function(){var Ae=loglevelExports.getLoggers();for(const e in Ae)Object.hasOwnProperty.call(Ae,e)&&Ae[e].disableAll()},enableAll:function(){var Ae=loglevelExports.getLoggers();for(const e in Ae)Object.hasOwnProperty.call(Ae,e)&&Ae[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(Ae,e){var t=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return Ae;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var Oe in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[Oe]),Ae.indexOf(e.noProxyDomains[Oe])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+Ae+" found in noProxyDomains list ("+e.noProxyDomains[Oe]+")."),Ae}return e.proxyUrl+encodeURIComponent(Ae)}},logger$F=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(Ae){var e=typeof Ae.getType=="function"?Ae.getType():null,t=Ae.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof TileWMS||t instanceof ImageWMS)return"wms";if(t instanceof WMTS$1)return"wmts";if(t instanceof VectorSource||t instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(Ae,e,t,Oe,ke){if(logger$F.trace("[Gfi] : displayInfo..."),Oe||(Oe="text/html"),t!==null){var Be=null,Ue=null,je=t;je=je.replace(/\n/g,""),je=je.replace(/(>)\s*(<)/g,"$1$2");var We=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Qe=require("@xmldom/xmldom").DOMParser;Ue=new Qe,Be=Ue.parseFromString(je,Oe)}else if(We.DOMParser)Ue=new We.DOMParser,Be=Ue.parseFromString(je,Oe);else if(We.ActiveXObject)Be=new We.ActiveXObject("Microsoft.XMLDOM"),Be.async=!1,Be.loadXML(je);else return logger$F.log("Incompatible environment for DOM Parser !"),!1;var Cn=Be.getElementsByTagName("body");if(Cn&&Cn.length===1&&!Cn[0].hasChildNodes())return!1;var An=document.createElement("div");An.className="gp-feature-info-div";var En=document.createElement("button");En.className="gp-styling-button closer",En.onclick=function(){return Ae.featuresOverlay&&(Ae.removeOverlay(Ae.featuresOverlay),Ae.featuresOverlay=null),!1};var Sn=document.createElement("div");return Sn.className="gp-features-content-div",Sn.innerHTML=t,An.appendChild(Sn),An.appendChild(En),Ae.featuresOverlay&&(Ae.removeOverlay(Ae.featuresOverlay),Ae.featuresOverlay=null),Ae.featuresOverlay=new Overlay({element:An,autoPan:ke.autoPan,autoPanAnimation:ke.autoPanAnimation,autoPanMargin:ke.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),Ae.addOverlay(Ae.featuresOverlay),Ae.featuresOverlay.setPosition(e),Ae.featuresOverlay.render(),!0}},features2html:function(Ae,e){var t=document.createElement("div");return e.forEach(function(Oe){var ke=Oe.getProperties();if(ke.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",ke.render);else{if(ke.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",ke.name),t.appendChild(Be)}if(ke.hasOwnProperty("description")){var Ue=document.createElement("div");Ue.className="gp-att-description-div",Ue.insertAdjacentHTML("afterbegin",ke.description),t.appendChild(Ue)}var je=null,We=!1,Qe=null,Cn=null,An=null,En=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(je in ke)if(ke[je]!==void 0&&En.indexOf(je)===-1){We||(Qe=document.createElement("div"),Qe.className="gp-att-others-div",Cn=document.createElement("ul"),We=!0),An=document.createElement("li");var Sn=document.createElement("span");Sn.className="gp-attname-others-span",Sn.appendChild(document.createTextNode(je+" : ")),An.appendChild(Sn),An.appendChild(document.createTextNode(ke[je])),Cn.appendChild(An)}Cn&&(Qe.appendChild(Cn),t.appendChild(Qe))}},Ae),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(Ae,e,t){var Oe=Ae.getPixelFromCoordinate(t);return Ae.hasFeatureAtPixel(Oe,function(ke){return ke===e})},displayVectorFeatureInfo:function(Ae,e,t,Oe){var ke=Ae.getPixelFromCoordinate(e),Be=[];if(Ae.forEachFeatureAtPixel(ke,function(je,We){(!t||t.indexOf(We)>-1)&&Be.push(je)}),Be.length===0)return!1;var Ue=this.features2html(Ae,Be);return Ue===null?!1:(this.displayInfo(Ae,e,Ue.innerHTML,"text/html",Oe),!0)},displayFeatureInfo:function(Ae,e,t,Oe,ke){for(var Be={},Ue=0;Ue<t.length;Ue++){var je=t[Ue],We=je.obj.getZIndex();Be[We]||(Be[We]=[]),Be[We].push(je)}var Qe=[],Cn=Object.keys(Be);Cn.sort(function(Ai,fi){return fi-Ai});for(var An=0;An<Cn.length;An++)for(var En=Cn[An],Sn=0;Sn<Be[En].length;++Sn){var Tn=Be[En][Sn].obj,Dn=Be[En][Sn].infoFormat||"text/html",ti=!0;if(Tn.minResolution&&Tn.minResolution>Ae.getResolution()&&(ti=!1),ti&&Tn.maxResolution&&Tn.maxResolution<Ae.getResolution()&&(ti=!1),Tn.getVisible()&&ti){var ni=this.getLayerFormat(Tn);if(ni==="vector"){this.layerGetFeatureAtCoordinates(Ae,Tn,e)&&Qe.push({format:ni,scope:this,coordinate:e});continue}else if(ni!=="wms"&&ni!=="wmts"){logger$F.log("[ERROR] DisplayFeatureInfo - layer format '"+ni+"' not allowed");continue}var ii=Ae.getView().getResolution(),si=null;ni==="wmts"?si=Tn.getSource().getFeatureInfoUrl.call(Tn.getSource(),e,ii,Ae.getView().getProjection(),{INFOFORMAT:Dn}):si=Tn.getSource().getFeatureInfoUrl.call(Tn.getSource(),e,ii,Ae.getView().getProjection(),{INFO_FORMAT:Dn}),Qe.push({format:Dn,url:ProxyUtils.proxifyUrl(si,Oe),scope:this,coordinate:e})}}var oi=null;function ci(Ai,fi,Oi){if(Ai.length===0)return;var Ni=0;function ui(li){Ni++,li||Ni===Ai.length?Oi():fi(Ai[Ni],ui)}fi(Ai[0],ui)}var Pi=this;ci(Qe,function(Ai,fi){if(Ai.format==="vector"){if(!oi){oi=[];for(var Oi=0;Oi<Cn.length;Oi++)for(var Ni=Cn[Oi],ui=0;ui<Be[Ni].length;++ui)oi.push(Be[Ni][ui].obj)}fi(Ai.scope.displayVectorFeatureInfo(Ae,Ai.coordinate,oi,ke))}else Gp.Protocols.XHR.call({url:Ai.url,method:"GET",scope:Ai.scope,onResponse:function(li){var Ri=!1;(li.trim().length===0||li.indexOf("ServiceExceptionReport")!==-1||li.indexOf("java.lang.NullPointerException")!==-1||li.indexOf("java.lang.OutOfMemoryError")!==-1||li.indexOf("not queryable")!==-1)&&(Ri=!0);var Mi=!Ri&&Pi.displayInfo(Ae,Ai.coordinate,li,"text/html",ke);fi(Mi)},onFailure:function(li){logger$F.log(li),fi(!1)}})},function(){logger$F.trace("Finish sync to GFI !")})},getPosition:function(Ae,e){if(Ae.coordinate)return Ae.coordinate;var t=[0,0];if(Ae.offsetX||Ae.offsetY)t[0]=Ae.offsetX,t[1]=Ae.offsetY;else if(Ae.pointerType==="touch"){var Oe=Ae.pointers[0];t[0]=Oe.pageX,t[1]=Oe.pageY}var ke=e.getCoordinateFromPixel(t);return ke},onDisplayFeatureInfo:function(Ae,e){if(e.isActive()){logger$F.trace(Ae);var t=e.getMap();if(Ae.type==="contextmenu"||Ae.type==="dblclick")Ae.preventDefault();else if(Ae.type==="singleclick"){for(var Oe=t.getInteractions().getArray(),ke=0;ke<Oe.length;ke++)if(Oe[ke].getActive()&&(Oe[ke]instanceof Select||Oe[ke]instanceof Modify||Oe[ke]instanceof Draw))return}var Be={};e._proxyUrl&&(Be.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Be.noProxyDomains=e._noProxyDomains);var Ue={};e._autoPan&&(Ue.autoPan=e._autoPan),e._autoPanAnimation&&(Ue.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(Ue.autoPanMargin=e._autoPanMargin);for(var je=[],We=0;We<e._layers.length;++We){var Qe=e._layers[We].event?e._layers[We].event:e._defaultEvent;if(Qe===Ae.type){var Cn=je.push(e._layers[We])-1;je[Cn].infoFormat||(je[Cn].infoFormat=e._defaultInfoFormat)}}var An=this.getPosition(Ae,t);this.displayFeatureInfo(t,An,je,Be,Ue)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let Oe=0,ke=this.listenerKeys.length;Oe<ke;++Oe)unlistenByKey(this.listenerKeys[Oe]);if(this.listenerKeys.length=0,this.map_=e,e){const Oe=this.target_??e.getOverlayContainerStopEvent();this.element&&Oe.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var Ae=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(Ae=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(Ae=!0),Ae},assign:function(Ae,e){Ae=Ae||{};for(var t in e)e.hasOwnProperty(t)&&(Ae[t]=e[t]);return Ae},mergeParams:function(Ae,e,t){if(!(typeof Ae>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var Oe in e)e.hasOwnProperty(Oe)&&(typeof e[Oe]=="object"?Ae.hasOwnProperty(Oe)?this.mergeParams(Ae[Oe],e[Oe],t):Ae[Oe]=e[Oe]:Ae.hasOwnProperty(Oe)?t&&(Ae[Oe]=e[Oe]):Ae[Oe]=e[Oe])}}},logger$E=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(Ae,e){logger$E.trace("unset()");var t={};Helper.mergeParams(t,this._options),Helper.mergeParams(t,e);for(var Oe=Ae.getInteractions().getArray(),ke=0;ke<Oe.length;ke++)if(Oe[ke].getActive()&&(Oe[ke]instanceof Draw||Oe[ke]instanceof Select||Oe[ke]instanceof Modify)){var Be=Oe[ke].getProperties(),Ue=Be.name;if(typeof Ue<"u"&&this._extensions.indexOf(Ue)>-1){if(t.current&&t.current===Ue)continue;Oe[ke].setActive(!1);var je=Be.source;if(typeof je<"u"&&je instanceof Control){for(var We in t)if(t.hasOwnProperty(We)){if(We==="current")continue;if(typeof je[We]=="function"){var Qe=Array.isArray(t[We])?t[We]:[t[We]];je[We].apply(je,Qe)}}}}else Oe[ke].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let Oe=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&Oe&&Oe.getUnits()==="tile-pixels"&&(Oe=get$3(Oe),Oe.setWorldExtent(t.extent)),t={dataProjection:Oe,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(Ae,e,t){const Oe=t?get$3(t.featureProjection):null,ke=t?get$3(t.dataProjection):null;let Be=Ae;if(Oe&&ke&&!equivalent(Oe,ke)){e&&(Be=Ae.clone());const Ue=e?Oe:ke,je=e?ke:Oe;Ue.getUnits()==="tile-pixels"?Be.transform(Ue,je):Be.applyTransform(getTransform(Ue,je))}if(e&&t&&t.decimals!==void 0){const Ue=Math.pow(10,t.decimals),je=function(We){for(let Qe=0,Cn=We.length;Qe<Cn;++Qe)We[Qe]=Math.round(We[Qe]*Ue)/Ue;return We};Be===Ae&&(Be=Ae.clone()),Be.applyTransform(je)}return Be}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(Ae,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(Ae,0,e,t)||(Ae=Ae.slice(),orientLinearRingsArray(Ae,0,e,t)),Ae):(linearRingsAreOriented(Ae,0,e,t)||(Ae=Ae.slice(),orientLinearRings(Ae,0,e,t)),Ae)}function createRenderFeature(Ae,e){var Be;const t=Ae.geometry;if(!t)return[];if(Array.isArray(t))return t.map(Ue=>createRenderFeature({...Ae,geometry:Ue})).flat();const Oe=t.type==="MultiPolygon"?"Polygon":t.type;if(Oe==="GeometryCollection"||Oe==="Circle")throw new Error("Unsupported geometry type: "+Oe);const ke=t.layout.length;return transformGeometryWithOptions(new RenderFeature(Oe,Oe==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,ke):t.flatCoordinates,(Be=t.ends)==null?void 0:Be.flat(),ke,Ae.properties||{},Ae.id).enableSimplifyTransformed(),!1,e)}function createGeometry(Ae,e){if(!Ae)return null;if(Array.isArray(Ae)){const Oe=Ae.map(ke=>createGeometry(ke,e));return new GeometryCollection(Oe)}const t=GeometryConstructor[Ae.type];return transformGeometryWithOptions(new t(Ae.flatCoordinates,Ae.layout,Ae.ends),!1,e)}const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(Ae,e){return getDocument().createElementNS(Ae,e)}function getAllTextContent(Ae,e){return getAllTextContent_(Ae,e,[]).join("")}function getAllTextContent_(Ae,e,t){if(Ae.nodeType==Node.CDATA_SECTION_NODE||Ae.nodeType==Node.TEXT_NODE)t.push(Ae.nodeValue);else{let Oe;for(Oe=Ae.firstChild;Oe;Oe=Oe.nextSibling)getAllTextContent_(Oe,e,t)}return t}function isDocument(Ae){return"documentElement"in Ae}function parse$1(Ae){return new DOMParser().parseFromString(Ae,"application/xml")}function makeArrayExtender(Ae,e){return function(t,Oe){const ke=Ae.call(e??this,t,Oe);if(ke!==void 0){const Be=Oe[Oe.length-1];extend$4(Be,ke)}}}function makeArrayPusher(Ae,e){return function(t,Oe){const ke=Ae.call(e??this,t,Oe);ke!==void 0&&Oe[Oe.length-1].push(ke)}}function makeReplacer(Ae,e){return function(t,Oe){const ke=Ae.call(this,t,Oe);ke!==void 0&&(Oe[Oe.length-1]=ke)}}function makeObjectPropertyPusher(Ae,e,t){return function(Oe,ke){const Be=Ae.call(this,Oe,ke);if(Be!==void 0){const Ue=ke[ke.length-1],je=Oe.localName;let We;je in Ue?We=Ue[je]:(We=[],Ue[je]=We),We.push(Be)}}}function makeObjectPropertySetter(Ae,e,t){return function(Oe,ke){const Be=Ae.call(this,Oe,ke);if(Be!==void 0){const Ue=ke[ke.length-1],je=e!==void 0?e:Oe.localName;Ue[je]=Be}}}function makeChildAppender(Ae,e){return function(t,Oe,ke){Ae.call(this,t,Oe,ke),ke[ke.length-1].node.appendChild(t)}}function makeArraySerializer(Ae,e){let t,Oe;return function(ke,Be,Ue){if(t===void 0){t={};const je={};je[ke.localName]=Ae,t[ke.namespaceURI]=je,Oe=makeSimpleNodeFactory(ke.localName)}serialize(t,Oe,Be,Ue)}}function makeSimpleNodeFactory(Ae,e){return function(t,Oe,ke){const Ue=Oe[Oe.length-1].node;let je=Ae;je===void 0&&(je=ke);const We=Ue.namespaceURI;return createElementNS(We,je)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(Ae,e){const t=e.length,Oe=new Array(t);for(let ke=0;ke<t;++ke)Oe[ke]=Ae[e[ke]];return Oe}function makeStructureNS(Ae,e,t){t=t!==void 0?t:{};let Oe,ke;for(Oe=0,ke=Ae.length;Oe<ke;++Oe)t[Ae[Oe]]=e;return t}function parseNode(Ae,e,t,Oe){let ke;for(ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Be=Ae[ke.namespaceURI];if(Be!==void 0){const Ue=Be[ke.localName];Ue!==void 0&&Ue.call(Oe,ke,t)}}}function pushParseAndPop(Ae,e,t,Oe,ke){return Oe.push(Ae),parseNode(e,t,Oe,ke),Oe.pop()}function serialize(Ae,e,t,Oe,ke,Be){const Ue=(ke!==void 0?ke:t).length;let je,We;for(let Qe=0;Qe<Ue;++Qe)je=t[Qe],je!==void 0&&(We=e.call(Be,je,Oe,ke!==void 0?ke[Qe]:void 0),We!==void 0&&Ae[We.namespaceURI][We.localName].call(Be,We,je,Oe))}function pushSerializeAndPop(Ae,e,t,Oe,ke,Be,Ue){return ke.push(Ae),serialize(e,t,Oe,ke,Be,Ue),ke.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readFeatureFromDocument(Oe,t)}return isDocument(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const Oe=this.readFeaturesFromDocument(e,t);return Oe.length>0?Oe[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const Oe=parse$1(e);return this.readFeaturesFromDocument(Oe,t)}return isDocument(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const Oe=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(Oe,this.readFeaturesFromNode(ke,t));return Oe}readFeaturesFromNode(e,t){return abstract()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const Oe=parse$1(e);return this.readGeometryFromDocument(Oe,t)}return isDocument(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readProjectionFromDocument(t)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const Oe=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const Oe=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const Oe=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(Oe)}writeGeometryNode(e,t){return null}}function readBoolean(Ae){const e=getAllTextContent(Ae,!1);return readBooleanString(e)}function readBooleanString(Ae){const e=/^\s*(true|1)|(false|0)\s*$/.exec(Ae);if(e)return e[1]!==void 0||!1}function readDateTime(Ae){const e=getAllTextContent(Ae,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function readDecimal(Ae){const e=getAllTextContent(Ae,!1);return readDecimalString(e)}function readDecimalString(Ae){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(Ae);if(e)return parseFloat(e[1])}function readPositiveInteger(Ae){const e=getAllTextContent(Ae,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(Ae){const e=/^\s*(\d+)\s*$/.exec(Ae);if(e)return parseInt(e[1],10)}function readString(Ae){return getAllTextContent(Ae,!1).trim()}function writeBooleanTextNode(Ae,e){writeStringTextNode(Ae,e?"1":"0")}function writeCDATASection(Ae,e){Ae.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(Ae,e){const t=new Date(e*1e3),Oe=t.getUTCFullYear()+"-"+padNumber(t.getUTCMonth()+1,2)+"-"+padNumber(t.getUTCDate(),2)+"T"+padNumber(t.getUTCHours(),2)+":"+padNumber(t.getUTCMinutes(),2)+":"+padNumber(t.getUTCSeconds(),2)+"Z";Ae.appendChild(getDocument().createTextNode(Oe))}function writeDecimalTextNode(Ae,e){const t=e.toPrecision();Ae.appendChild(getDocument().createTextNode(t))}function writeNonNegativeIntegerTextNode(Ae,e){const t=e.toString();Ae.appendChild(getDocument().createTextNode(t))}function writeStringTextNode(Ae,e){Ae.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(Ae){return 32/Math.min(Ae[0],Ae[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE]}let TEXTAREA;function defaultIconUrlFunction(Ae){return Ae}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const Oe=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),ke=pushParseAndPop([],Oe,e,t,this);if(ke)return ke}readPlacemark_(e,t){const Oe=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,t,this);if(!Oe)return;const ke=new Feature,Be=e.getAttribute("id");Be!==null&&ke.setId(Be);const Ue=t[0],je=Oe.geometry;if(je&&transformGeometryWithOptions(je,!1,Ue),ke.setGeometry(je),delete Oe.geometry,this.extractStyles_){const We=Oe.Style,Qe=Oe.styleUrl,Cn=createFeatureStyleFunction(We,Qe,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);ke.setStyle(Cn)}return delete Oe.Style,ke.setProperties(Oe,!0),ke}readSharedStyle_(e,t){const Oe=e.getAttribute("id");if(Oe!==null){const ke=readStyle$2.call(this,e,t);if(ke){let Be,Ue=e.baseURI;(!Ue||Ue=="about:blank")&&(Ue=window.location.href),Ue?Be=new URL("#"+Oe,Ue).href:Be="#"+Oe,this.sharedStyles_[Be]=ke}}}readSharedStyleMap_(e,t){const Oe=e.getAttribute("id");if(Oe===null)return;const ke=readStyleMapValue.call(this,e,t);if(!ke)return;let Be,Ue=e.baseURI;(!Ue||Ue=="about:blank")&&(Ue=window.location.href),Ue?Be=new URL("#"+Oe,Ue).href:Be="#"+Oe,this.sharedStyles_[Be]=ke}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const Oe=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Oe||null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let Oe;const ke=e.localName;if(ke=="Document"||ke=="Folder")return Oe=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),Oe||[];if(ke=="Placemark"){const Be=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Be?[Be]:[]}if(ke=="kml"){Oe=[];for(let Be=e.firstElementChild;Be;Be=Be.nextElementSibling){const Ue=this.readFeaturesFromNode(Be,t);Ue&&extend$4(Oe,Ue)}return Oe}return[]}readName(e){if(e){if(typeof e=="string"){const t=parse$1(e);return this.readNameFromDocument(t)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const Oe=this.readNameFromNode(t);if(Oe)return Oe}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&t.localName=="name")return readString(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const Oe=t.localName;if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&(Oe=="Document"||Oe=="Folder"||Oe=="Placemark"||Oe=="kml")){const ke=this.readNameFromNode(t);if(ke)return ke}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readNetworkLinksFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readNetworkLinksFromDocument(e)):extend$4(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readNetworkLinksFromNode(Oe));return t}readNetworkLinksFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="NetworkLink"){const ke=pushParseAndPop({},NETWORK_LINK_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="kml")&&extend$4(t,this.readNetworkLinksFromNode(Oe))}return t}readRegion(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readRegionFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readRegionFromDocument(e)):extend$4(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readRegionFromNode(Oe));return t}readRegionFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName=="Region"){const ke=pushParseAndPop({},REGION_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="kml")&&extend$4(t,this.readRegionFromNode(Oe))}return t}readCamera(e){const t=[];if(typeof e=="string"){const Oe=parse$1(e);extend$4(t,this.readCameraFromDocument(Oe))}else isDocument(e)?extend$4(t,this.readCameraFromDocument(e)):extend$4(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType===Node.ELEMENT_NODE&&extend$4(t,this.readCameraFromNode(Oe));return t}readCameraFromNode(e){const t=[];for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling)if(NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&Oe.localName==="Camera"){const ke=pushParseAndPop({},CAMERA_PARSERS,Oe,[]);t.push(ke)}for(let Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const ke=Oe.localName;NAMESPACE_URIS$4.includes(Oe.namespaceURI)&&(ke==="Document"||ke==="Folder"||ke==="Placemark"||ke==="kml")&&extend$4(t,this.readCameraFromNode(Oe))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const Oe=createElementNS(NAMESPACE_URIS$4[4],"kml"),ke="http://www.w3.org/2000/xmlns/";Oe.setAttributeNS(ke,"xmlns:gx",GX_NAMESPACE_URIS[0]),Oe.setAttributeNS(ke,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Be={node:Oe},Ue={};e.length>1?Ue.Document=e:e.length==1&&(Ue.Placemark=e[0]);const je=KML_SEQUENCE[Oe.namespaceURI],We=makeSequence(Ue,je);return pushSerializeAndPop(Be,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,[t],je,this),Oe}};function createNameStyleFunction(Ae,e){const t=[0,0];let Oe="start";const ke=Ae.getImage();if(ke){const je=ke.getSize();if(je&&je.length==2){const We=ke.getScaleArray(),Qe=ke.getAnchor();t[0]=We[0]*(je[0]-Qe[0]),t[1]=We[1]*(je[1]/2-Qe[1]),Oe="left"}}let Be=Ae.getText();return Be?(Be=Be.clone(),Be.setFont(Be.getFont()||DEFAULT_TEXT_STYLE.getFont()),Be.setScale(Be.getScale()||DEFAULT_TEXT_STYLE.getScale()),Be.setFill(Be.getFill()||DEFAULT_TEXT_STYLE.getFill()),Be.setStroke(Be.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Be=DEFAULT_TEXT_STYLE.clone(),Be.setText(e),Be.setOffsetX(t[0]),Be.setOffsetY(t[1]),Be.setTextAlign(Oe),new Style$1({image:ke,text:Be})}function createFeatureStyleFunction(Ae,e,t,Oe,ke){return function(Be,Ue){let je=ke,We="",Qe=[];if(je){const An=Be.getGeometry();if(An)if(An instanceof GeometryCollection)Qe=An.getGeometriesArrayRecursive().filter(function(En){const Sn=En.getType();return Sn==="Point"||Sn==="MultiPoint"}),je=Qe.length>0;else{const En=An.getType();je=En==="Point"||En==="MultiPoint"}}je&&(We=Be.get("name"),je=je&&!!We,je&&/&[^&]+;/.test(We)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=We,We=TEXTAREA.value));let Cn=t;if(Ae?Cn=Ae:e&&(Cn=findStyle(e,t,Oe)),je){const An=createNameStyleFunction(Cn[0],We);if(Qe.length>0){An.setGeometry(new GeometryCollection(Qe));const En=new Style$1({geometry:Cn[0].getGeometry(),image:null,fill:Cn[0].getFill(),stroke:Cn[0].getStroke(),text:null});return[An,En].concat(Cn.slice(1))}return An}return Cn}}function findStyle(Ae,e,t){return Array.isArray(Ae)?Ae:typeof Ae=="string"?findStyle(t[Ae],e,t):e}function readColor(Ae){const e=getAllTextContent(Ae,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const Oe=t[1];return[parseInt(Oe.substr(6,2),16),parseInt(Oe.substr(4,2),16),parseInt(Oe.substr(2,2),16),parseInt(Oe.substr(0,2),16)/255]}}function readFlatCoordinates(Ae){let e=getAllTextContent(Ae,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const Oe=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let ke;for(;ke=Oe.exec(e);){const Be=parseFloat(ke[1]),Ue=parseFloat(ke[2]),je=ke[3]?parseFloat(ke[3]):0;t.push(Be,Ue,je),e=e.substr(ke[0].length)}if(e==="")return t}function readURI(Ae){const e=getAllTextContent(Ae,!1).trim();let t=Ae.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readStyleURL(Ae){const e=getAllTextContent(Ae,!1).trim().replace(/^(?!.*#)/,"#");let t=Ae.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readVec2(Ae){const e=Ae.getAttribute("xunits"),t=Ae.getAttribute("yunits");let Oe;return e!=="insetPixels"?t!=="insetPixels"?Oe="bottom-left":Oe="top-left":t!=="insetPixels"?Oe="bottom-right":Oe="top-right",{x:parseFloat(Ae.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(Ae.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[t],origin:Oe}}function readScale(Ae){return readDecimal(Ae)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(Ae,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,Ae,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(Ae,e){const t=pushParseAndPop({},ICON_STYLE_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1],ke="Icon"in t?t.Icon:{},Be=!("Icon"in t)||Object.keys(ke).length>0;let Ue;const je=ke.href;je?Ue=je:Be&&(Ue=DEFAULT_IMAGE_STYLE_SRC);let We,Qe,Cn,An="bottom-left";const En=t.hotSpot;En?(We=[En.x,En.y],Qe=En.xunits,Cn=En.yunits,An=En.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(Ue)&&(Ue.includes("pushpin")?(We=DEFAULT_IMAGE_STYLE_ANCHOR,Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Cn=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Ue.includes("arrow-reverse")?(We=[54,42],Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Cn=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Ue.includes("paddle")&&(We=[32,1],Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Cn=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let Sn;const Tn=ke.x,Dn=ke.y;Tn!==void 0&&Dn!==void 0&&(Sn=[Tn,Dn]);let ti;const ni=ke.w,ii=ke.h;ni!==void 0&&ii!==void 0&&(ti=[ni,ii]);let si;const oi=t.heading;oi!==void 0&&(si=toRadians(oi));const ci=t.scale,Pi=t.color;if(Be){Ue==DEFAULT_IMAGE_STYLE_SRC&&(ti=DEFAULT_IMAGE_STYLE_SIZE);const Ai=new Icon({anchor:We,anchorOrigin:An,anchorXUnits:Qe,anchorYUnits:Cn,crossOrigin:this.crossOrigin_,offset:Sn,offsetOrigin:"bottom-left",rotation:si,scale:ci,size:ti,src:this.iconUrlFunction_(Ue),color:Pi}),fi=Ai.getScaleArray()[0],Oi=Ai.getSize();if(Oi===null){const Ni=Ai.getImageState();if(Ni===ImageState.IDLE||Ni===ImageState.LOADING){const ui=function(){const li=Ai.getImageState();if(!(li===ImageState.IDLE||li===ImageState.LOADING)){const Ri=Ai.getSize();if(Ri&&Ri.length==2){const Mi=scaleForSize(Ri);Ai.setScale(fi*Mi)}Ai.unlistenImageChange(ui)}};Ai.listenImageChange(ui),Ni===ImageState.IDLE&&Ai.load()}}else if(Oi.length==2){const Ni=scaleForSize(Oi);Ai.setScale(fi*Ni)}Oe.imageStyle=Ai}else Oe.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(Ae,e){const t=pushParseAndPop({},LABEL_STYLE_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1],ke=new Text({fill:new Fill({color:"color"in t?t.color:DEFAULT_COLOR}),scale:t.scale});Oe.textStyle=ke}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(Ae,e){const t=pushParseAndPop({},LINE_STYLE_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1],ke=new Stroke({color:"color"in t?t.color:DEFAULT_COLOR,width:"width"in t?t.width:1});Oe.strokeStyle=ke}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(Ae,e){const t=pushParseAndPop({},POLY_STYLE_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1],ke=new Fill({color:"color"in t?t.color:DEFAULT_COLOR});Oe.fillStyle=ke;const Be=t.fill;Be!==void 0&&(Oe.fill=Be);const Ue=t.outline;Ue!==void 0&&(Oe.outline=Ue)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(Ae,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,Ae,e)}function gxCoordParser(Ae,e){const Oe=e[e.length-1].coordinates,ke=getAllTextContent(Ae,!1),Ue=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(ke);if(Ue){const je=parseFloat(Ue[1]),We=parseFloat(Ue[2]),Qe=parseFloat(Ue[3]);Oe.push([je,We,Qe])}else Oe.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(Ae,e){const t=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,Ae,e);if(t)return new MultiLineString(t)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(Ae,e){const t=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,Ae,e);if(!t)return;const Oe=[],ke=t.coordinates,Be=t.whens;for(let Ue=0,je=Math.min(ke.length,Be.length);Ue<je;++Ue)ke[Ue].length==3&&Oe.push(ke[Ue][0],ke[Ue][1],ke[Ue][2],Be[Ue]);return new LineString(Oe,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(Ae,e){const t=pushParseAndPop({},ICON_PARSERS,Ae,e);return t||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(Ae,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,Ae,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(Ae,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Ae,e),Oe=readFlatCoordinatesFromNode(Ae,e);if(Oe){const ke=new LineString(Oe,"XYZ");return ke.setProperties(t,!0),ke}}function readLinearRing(Ae,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Ae,e),Oe=readFlatCoordinatesFromNode(Ae,e);if(Oe){const ke=new Polygon(Oe,"XYZ",[Oe.length]);return ke.setProperties(t,!0),ke}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(Ae,e){const t=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,Ae,e);if(!t)return null;if(t.length===0)return new GeometryCollection(t);let Oe,ke=!0;const Be=t[0].getType();let Ue;for(let je=1,We=t.length;je<We;++je)if(Ue=t[je],Ue.getType()!=Be){ke=!1;break}if(ke){let je,We;if(Be=="Point"){const Qe=t[0];je=Qe.getLayout(),We=Qe.getFlatCoordinates();for(let Cn=1,An=t.length;Cn<An;++Cn)Ue=t[Cn],extend$4(We,Ue.getFlatCoordinates());Oe=new MultiPoint(We,je),setCommonGeometryProperties(Oe,t)}else if(Be=="LineString")Oe=new MultiLineString(t),setCommonGeometryProperties(Oe,t);else if(Be=="Polygon")Oe=new MultiPolygon(t),setCommonGeometryProperties(Oe,t);else if(Be=="GeometryCollection"||Be.startsWith("Multi"))Oe=new GeometryCollection(t);else throw new Error("Unknown geometry type found")}else Oe=new GeometryCollection(t);return Oe}function readPoint(Ae,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Ae,e),Oe=readFlatCoordinatesFromNode(Ae,e);if(Oe){const ke=new Point$1(Oe,"XYZ");return ke.setProperties(t,!0),ke}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(Ae,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Ae,e),Oe=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,Ae,e);if(Oe&&Oe[0]){const ke=Oe[0],Be=[ke.length];for(let je=1,We=Oe.length;je<We;++je)extend$4(ke,Oe[je]),Be.push(ke.length);const Ue=new Polygon(ke,"XYZ",Be);return Ue.setProperties(t,!0),Ue}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(Ae,e){const t=pushParseAndPop({},STYLE_PARSERS$2,Ae,e,this);if(!t)return null;let Oe="fillStyle"in t?t.fillStyle:DEFAULT_FILL_STYLE;const ke=t.fill;ke!==void 0&&!ke&&(Oe=null);let Be;"imageStyle"in t?t.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Be=t.imageStyle):Be=DEFAULT_IMAGE_STYLE;const Ue="textStyle"in t?t.textStyle:DEFAULT_TEXT_STYLE,je="strokeStyle"in t?t.strokeStyle:DEFAULT_STROKE_STYLE,We=t.outline;return We!==void 0&&!We?[new Style$1({geometry:function(Qe){const Cn=Qe.getGeometry(),An=Cn.getType();if(An==="GeometryCollection"){const En=Cn;return new GeometryCollection(En.getGeometriesArrayRecursive().filter(function(Sn){const Tn=Sn.getType();return Tn!=="Polygon"&&Tn!=="MultiPolygon"}))}if(An!=="Polygon"&&An!=="MultiPolygon")return Cn},fill:Oe,image:Be,stroke:je,text:Ue,zIndex:void 0}),new Style$1({geometry:function(Qe){const Cn=Qe.getGeometry(),An=Cn.getType();if(An==="GeometryCollection"){const En=Cn;return new GeometryCollection(En.getGeometriesArrayRecursive().filter(function(Sn){const Tn=Sn.getType();return Tn==="Polygon"||Tn==="MultiPolygon"}))}if(An==="Polygon"||An==="MultiPolygon")return Cn},fill:Oe,stroke:null,zIndex:void 0})]:[new Style$1({fill:Oe,image:Be,stroke:je,text:Ue,zIndex:void 0})]}function setCommonGeometryProperties(Ae,e){const t=e.length,Oe=new Array(e.length),ke=new Array(e.length),Be=new Array(e.length);let Ue,je,We;Ue=!1,je=!1,We=!1;for(let Qe=0;Qe<t;++Qe){const Cn=e[Qe];Oe[Qe]=Cn.get("extrude"),ke[Qe]=Cn.get("tessellate"),Be[Qe]=Cn.get("altitudeMode"),Ue=Ue||Oe[Qe]!==void 0,je=je||ke[Qe]!==void 0,We=We||Be[Qe]}Ue&&Ae.set("extrude",Oe),je&&Ae.set("tessellate",ke),We&&Ae.set("altitudeMode",Be)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(Ae,e){const t=Ae.getAttribute("name");parseNode(DATA_PARSERS,Ae,e);const Oe=e[e.length-1];t&&Oe.displayName?Oe[t]={value:Oe.value,displayName:Oe.displayName,toString:function(){return Oe.value}}:t!==null?Oe[t]=Oe.value:Oe.displayName!==null&&(Oe[Oe.displayName]=Oe.value),delete Oe.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(Ae,e){parseNode(EXTENDED_DATA_PARSERS,Ae,e)}function regionParser(Ae,e){parseNode(REGION_PARSERS,Ae,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(Ae,e){const t=pushParseAndPop({},PAIR_PARSERS,Ae,e,this);if(!t)return;const Oe=t.key;if(Oe&&Oe=="normal"){const ke=t.styleUrl;ke&&(e[e.length-1]=ke);const Be=t.Style;Be&&(e[e.length-1]=Be)}}function placemarkStyleMapParser(Ae,e){const t=readStyleMapValue.call(this,Ae,e);if(!t)return;const Oe=e[e.length-1];if(Array.isArray(t))Oe.Style=t;else if(typeof t=="string")Oe.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(Ae,e){parseNode(SCHEMA_DATA_PARSERS,Ae,e)}function simpleDataParser(Ae,e){const t=Ae.getAttribute("name");if(t!==null){const Oe=readString(Ae),ke=e[e.length-1];ke[t]=Oe}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(Ae,e){const t=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1],ke=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];Oe.extent=ke,Oe.altitudeMode=t.altitudeMode,Oe.minAltitude=parseFloat(t.minAltitude),Oe.maxAltitude=parseFloat(t.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(Ae,e){const t=pushParseAndPop({},LOD_PARSERS,Ae,e);if(!t)return;const Oe=e[e.length-1];Oe.minLodPixels=parseFloat(t.minLodPixels),Oe.maxLodPixels=parseFloat(t.maxLodPixels),Oe.minFadeExtent=parseFloat(t.minFadeExtent),Oe.maxFadeExtent=parseFloat(t.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(Ae,e){const t=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,Ae,e);t.length>0&&e[e.length-1].push(...t)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(Ae,e){const t=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,Ae,e);if(t){const Oe=e[e.length-1];Oe[0]=t}}function linkParser(Ae,e){parseNode(LINK_PARSERS$1,Ae,e)}function whenParser(Ae,e){const Oe=e[e.length-1].whens,ke=getAllTextContent(Ae,!1),Be=Date.parse(ke);Oe.push(isNaN(Be)?0:Be)}function writeColorTextNode(Ae,e){const t=asArray(e),ke=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let Be=0;Be<4;++Be){const Ue=Math.floor(ke[Be]).toString(16);ke[Be]=Ue.length==1?"0"+Ue:Ue}writeStringTextNode(Ae,ke.join(""))}function writeCoordinatesTextNode(Ae,e,t){const Oe=t[t.length-1],ke=Oe.layout,Be=Oe.stride;let Ue;if(ke=="XY"||ke=="XYM")Ue=2;else if(ke=="XYZ"||ke=="XYZM")Ue=3;else throw new Error("Invalid geometry layout");const je=e.length;let We="";if(je>0){We+=e[0];for(let Qe=1;Qe<Ue;++Qe)We+=","+e[Qe];for(let Qe=Be;Qe<je;Qe+=Be){We+=" "+e[Qe];for(let Cn=1;Cn<Ue;++Cn)We+=","+e[Qe+Cn]}}writeStringTextNode(Ae,We)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(Ae,e,t){Ae.setAttribute("name",e.name);const Oe={node:Ae},ke=e.value;typeof ke=="object"?(ke!==null&&ke.displayName&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke.displayName],t,["displayName"]),ke!==null&&ke.value&&pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke.value],t,["value"])):pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[ke],t,["value"])}function writeDataNodeName(Ae,e){writeCDATASection(Ae,e)}function writeDataNodeValue(Ae,e){writeStringTextNode(Ae,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(Ae,e,t){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,"Placemark")};function writeDocument(Ae,e,t){pushSerializeAndPop({node:Ae},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,t,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(Ae,e,t){const Oe={node:Ae},ke=e.names,Be=e.values,Ue=ke.length;for(let je=0;je<Ue;je++)pushSerializeAndPop(Oe,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:ke[je],value:Be[je]}],t)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(Ae,e,t){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+t)};function writeIcon(Ae,e,t){const Oe={node:Ae},ke=t[t.length-1].node;let Be=ICON_SEQUENCE[ke.namespaceURI],Ue=makeSequence(e,Be);pushSerializeAndPop(Oe,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ue,t,Be),Be=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],Ue=makeSequence(e,Be),pushSerializeAndPop(Oe,ICON_SERIALIZERS,GX_NODE_FACTORY,Ue,t,Be)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(Ae,e,t){const Oe={node:Ae},ke={},Be=e.getSrc(),Ue=e.getSize(),je=e.getImageSize(),We={href:Be};if(Ue){We.w=Ue[0],We.h=Ue[1];const ti=e.getAnchor(),ni=e.getOrigin();if(ni&&je&&ni[0]!==0&&ni[1]!==Ue[1]&&(We.x=ni[0],We.y=je[1]-(ni[1]+Ue[1])),ti&&(ti[0]!==Ue[0]/2||ti[1]!==Ue[1]/2)){const ii={x:ti[0],xunits:"pixels",y:Ue[1]-ti[1],yunits:"pixels"};ke.hotSpot=ii}}ke.Icon=We;let Qe=e.getScaleArray()[0],Cn=Ue;if(Cn===null&&(Cn=DEFAULT_IMAGE_STYLE_SIZE),Cn.length==2){const ti=scaleForSize(Cn);Qe=Qe/ti}Qe!==1&&(ke.scale=Qe);const An=e.getRotation();An!==0&&(ke.heading=An);const En=e.getColor();En&&(ke.color=En);const Sn=t[t.length-1].node,Tn=ICON_STYLE_SEQUENCE[Sn.namespaceURI],Dn=makeSequence(ke,Tn);pushSerializeAndPop(Oe,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Dn,t,Tn)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(Ae,e,t){const Oe={node:Ae},ke={},Be=e.getFill();Be&&(ke.color=Be.getColor());const Ue=e.getScale();Ue&&Ue!==1&&(ke.scale=Ue);const je=t[t.length-1].node,We=LABEL_STYLE_SEQUENCE[je.namespaceURI],Qe=makeSequence(ke,We);pushSerializeAndPop(Oe,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,We)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(Ae,e,t){const Oe={node:Ae},ke={color:e.getColor(),width:Number(e.getWidth())||1},Be=t[t.length-1].node,Ue=LINE_STYLE_SEQUENCE[Be.namespaceURI],je=makeSequence(ke,Ue);pushSerializeAndPop(Oe,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,je,t,Ue)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(Ae,e,t){if(Ae){const Oe=e[e.length-1].node;return createElementNS(Oe.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[Ae.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(Ae,e,t){const Oe={node:Ae},ke=e.getType();let Be=[],Ue;if(ke==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(je){const We=je.getType();if(We==="MultiPoint")Be=Be.concat(je.getPoints());else if(We==="MultiLineString")Be=Be.concat(je.getLineStrings());else if(We==="MultiPolygon")Be=Be.concat(je.getPolygons());else if(We==="Point"||We==="LineString"||We==="Polygon")Be.push(je);else throw new Error("Unknown geometry type")}),Ue=GEOMETRY_NODE_FACTORY;else if(ke==="MultiPoint")Be=e.getPoints(),Ue=POINT_NODE_FACTORY;else if(ke==="MultiLineString")Be=e.getLineStrings(),Ue=LINE_STRING_NODE_FACTORY;else if(ke==="MultiPolygon")Be=e.getPolygons(),Ue=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(Oe,MULTI_GEOMETRY_SERIALIZERS,Ue,Be,t)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(Ae,e,t){pushSerializeAndPop({node:Ae},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],t)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(Ae,e,t){const Oe={node:Ae};e.getId()&&Ae.setAttribute("id",e.getId());const ke=e.getProperties(),Be={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Be[e.getGeometryName()]=1;const Ue=Object.keys(ke||{}).sort().filter(function(Sn){return!Be[Sn]}),je=e.getStyleFunction();if(je){const Sn=je(e,0);if(Sn){const Tn=Array.isArray(Sn)?Sn:[Sn];let Dn=Tn;if(e.getGeometry()&&(Dn=Tn.filter(function(ti){const ni=ti.getGeometryFunction()(e);if(ni){const ii=ni.getType();return ii==="GeometryCollection"?ni.getGeometriesArrayRecursive().filter(function(si){const oi=si.getType();return oi==="Point"||oi==="MultiPoint"}).length:ii==="Point"||ii==="MultiPoint"}})),this.writeStyles_){let ti=Tn,ni=Tn;e.getGeometry()&&(ti=Tn.filter(function(ii){const si=ii.getGeometryFunction()(e);if(si){const oi=si.getType();return oi==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(ci){const Pi=ci.getType();return Pi==="LineString"||Pi==="MultiLineString"}).length:oi==="LineString"||oi==="MultiLineString"}}),ni=Tn.filter(function(ii){const si=ii.getGeometryFunction()(e);if(si){const oi=si.getType();return oi==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(ci){const Pi=ci.getType();return Pi==="Polygon"||Pi==="MultiPolygon"}).length:oi==="Polygon"||oi==="MultiPolygon"}})),ke.Style={pointStyles:Dn,lineStyles:ti,polyStyles:ni}}if(Dn.length&&ke.name===void 0){const ti=Dn[0].getText();ti&&(ke.name=ti.getText())}}}const We=t[t.length-1].node,Qe=PLACEMARK_SEQUENCE[We.namespaceURI],Cn=makeSequence(ke,Qe);if(pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,t,Qe),Ue.length>0){const Sn=makeSequence(ke,Ue);pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:Ue,values:Sn}],t)}const An=t[0];let En=e.getGeometry();En&&(En=transformGeometryWithOptions(En,!0,An)),pushSerializeAndPop(Oe,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[En],t)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(Ae,e,t){const Oe=e.getFlatCoordinates(),ke={node:Ae};ke.layout=e.getLayout(),ke.stride=e.getStride();const Be=e.getProperties();Be.coordinates=Oe;const Ue=t[t.length-1].node,je=PRIMITIVE_GEOMETRY_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,je);pushSerializeAndPop(ke,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,t,je)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(Ae,e,t){const Oe=e.getLinearRings(),ke=Oe.shift(),Be={node:Ae};pushSerializeAndPop(Be,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,Oe,t),pushSerializeAndPop(Be,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[ke],t)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(Ae,e,t){const Oe={node:Ae},ke=e.getFill(),Be=e.getStroke(),Ue={color:ke?ke.getColor():void 0,fill:ke?void 0:!1,outline:Be?void 0:!1},je=t[t.length-1].node,We=POLY_STYLE_SEQUENCE[je.namespaceURI],Qe=makeSequence(Ue,We);pushSerializeAndPop(Oe,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,We)}function writeScaleTextNode(Ae,e){writeDecimalTextNode(Ae,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(Ae,e,t){const Oe={node:Ae},ke={};if(e.pointStyles.length){const We=e.pointStyles[0].getText();We&&(ke.LabelStyle=We);const Qe=e.pointStyles[0].getImage();Qe&&typeof Qe.getSrc=="function"&&(ke.IconStyle=Qe)}if(e.lineStyles.length){const We=e.lineStyles[0].getStroke();We&&(ke.LineStyle=We)}if(e.polyStyles.length){const We=e.polyStyles[0].getStroke();We&&!ke.LineStyle&&(ke.LineStyle=We),ke.PolyStyle=e.polyStyles[0]}const Be=t[t.length-1].node,Ue=STYLE_SEQUENCE[Be.namespaceURI],je=makeSequence(ke,Ue);pushSerializeAndPop(Oe,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,je,t,Ue)}function writeVec2(Ae,e){Ae.setAttribute("x",String(e.x)),Ae.setAttribute("y",String(e.y)),Ae.setAttribute("xunits",e.xunits),Ae.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(Ae){if(Ae>255)throw new Error("'"+Ae+"'' is greater than 255(0xff);");var e=Number(Ae).toString(16);return("0"+e).slice(-2)},num:function(Ae){return parseInt(Ae,16)},arrayToRgba:function(Ae){if(!Array.isArray(Ae))throw new Error("Not an array !");var e=Ae[0],t=Ae[1],Oe=Ae[2],ke=Ae[3]||1,Be="rgba("+e+", "+t+", "+Oe+", "+parseFloat(ke)+")";return Be},arrayToHex:function(Ae){if(!Array.isArray(Ae))throw new Error("Not an array !");var e=Ae[0],t=Ae[1],Oe=Ae[2],ke=Ae[3],Be=[this.hex(e),this.hex(t),this.hex(Oe)],Ue={};return Ue.hex="#"+Be.join(""),ke&&(Ue.opacity=parseFloat(ke)),Ue},rgbaToHex:function(Ae){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Ae);if(!t)throw new Error("Invalid format: "+Ae);var Oe=t[1],ke=t[2],Be=t[3],Ue=t[4],je=[this.hex(Oe),this.hex(ke),this.hex(Be)],We={};return We.hex="#"+je.join(""),Ue&&(We.opacity=parseFloat(Ue)),We},hexToRgba:function(Ae,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!Ae)throw new Error("Invalid format");Ae=Ae.replace(t,function(Be,Ue,je,We){return Ue+Ue+je+je+We+We});var Oe=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Ae);Oe=Oe?{r:parseInt(Oe[1],16),g:parseInt(Oe[2],16),b:parseInt(Oe[3],16)}:null;var ke=Oe?"rgba("+Oe.r+", "+Oe.g+", "+Oe.b+", "+e+")":null;return ke},isHex:function(Ae){if(!Ae||Ae.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(Ae);return!!t},isRGB:function(Ae){if(!Ae)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Ae);return!!t}},logger$D=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var Ae=this.getStyle();if(Ae&&!(Array.isArray(Ae)&&Ae.length===0)){var e=Ae.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(ColorUtils.isRGB(t)){var ke=ColorUtils.rgbaToHex(t);this.set("fill",ke.hex),this.set("fill-opacity",ke.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var Ae=this.getStyle();if(Ae&&!(Array.isArray(Ae)&&Ae.length===0)){var e=Ae.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(ColorUtils.isRGB(t)){var ke=ColorUtils.rgbaToHex(t);this.set("stroke",ke.hex),this.set("stroke-opacity",ke.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var Ae=this.getStyle();if(Ae&&!(Array.isArray(Ae)&&Ae.length===0)){var e=this.get("name")!==void 0,t=Ae.getText();if(t&&e){var Oe=Ae.getText().getFill();if(Oe){var ke=Oe.getColor();if(Array.isArray(ke)){var Be="rgba(";Be+=ke[0]+",",Be+=ke[1]+",",Be+=ke[2]+",",Be+=ke[3]+")",ke=Be}if(ColorUtils.isRGB(ke)){var Ue=ColorUtils.rgbaToHex(ke);this.set("label-fill",Ue.hex),this.set("label-fill-opacity",Ue.opacity)}else this.set("label-fill",ke),this.set("label-fill-opacity",1)}var je=Ae.getText().getStroke();if(je){var We=je.getColor();if(Array.isArray(We)){var Qe="rgba(";Qe+=We[0]+",",Qe+=We[1]+",",Qe+=We[2]+",",Qe+=We[3]+")",We=Qe}if(ColorUtils.isRGB(We)){var Cn=ColorUtils.rgbaToHex(We);this.set("label-stroke",Cn.hex),this.set("label-stroke-opacity",Cn.opacity)}else this.set("label-stroke",We),this.set("label-stroke-opacity",1);this.set("label-stroke-width",je.getWidth())}this.set("label-font",Ae.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",Ae.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var Ae=this.getStyle();if(Ae&&!(Array.isArray(Ae)&&Ae.length===0)){var e=Ae.getImage();if(e)if(e instanceof Icon){var t=e.getColor();if(Array.isArray(t)){var Oe="rgba(";Oe+=t[0]+",",Oe+=t[1]+",",Oe+=t[2]+",",Oe+=t[3]+")",t=Oe}if(t){var ke=ColorUtils.rgbaToHex(t);this.set("marker-color",ke.hex)}var Be=e.getScale();switch(Math.round(Be*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var Ue=e.getSrc();Ue&&this.set("marker-symbol",Ue),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var je=e.getFill();if(je){var We=je.getColor();if(Array.isArray(We)){var Qe="rgba(";Qe+=We[0]+",",Qe+=We[1]+",",Qe+=We[2]+",",Qe+=We[3]+")",We=Qe}if(ColorUtils.isRGB(We)){var Cn=ColorUtils.rgbaToHex(We);this.set("circle-fill",Cn.hex),this.set("circle-fill-opacity",Cn.opacity)}else this.set("circle-fill",We),this.set("circle-fill-opacity",1)}var An=e.getStroke();if(An){var En=An.getColor();if(Array.isArray(En)){var Sn="rgba(";Sn+=En[0]+",",Sn+=En[1]+",",Sn+=En[2]+",",Sn+=En[3]+")",En=Sn}if(ColorUtils.isRGB(En)){var Tn=ColorUtils.rgbaToHex(En);this.set("circle-stroke",Tn.hex),this.set("circle-stroke-opacity",Tn.opacity)}else this.set("circle-stroke",En),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",An.getWidth())}var Dn=e.getRadius();this.set("circle-radius",Dn)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(Ae){var e=null,t={},Oe=null;if(Ae.get("marker-color")||Ae.get("marker-size")||Ae.get("marker-symbol")){Oe={},Oe.src=this.DEFAULT_ICON.src,Oe.anchor=this.DEFAULT_ICON.anchor;var ke=Ae.get("marker-symbol");ke&&ke.search("data:image/png;base64")!==-1&&(Oe.src=ke);var Be=Ae.get("marker-color");ColorUtils.isHex(Be)&&(Oe.color=ColorUtils.hexToRgba(Be,1));var Ue=Ae.get("marker-size");if(Ue)switch(Ue){case"small":Oe.scale=.5;break;case"medium":Oe.scale=1;break;case"large":Oe.scale=1.5;break;default:Oe.scale=this.DEFAULT_ICON.scale;break}}var je=null;(Ae.get("stroke")||Ae.get("stroke-opacity")||Ae.get("stroke-width"))&&(je={},je.color=ColorUtils.hexToRgba(Ae.get("stroke"),+Ae.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),je.width=+Ae.get("stroke-width")||this.DEFAULT_STROKE.width);var We=null;(Ae.get("fill")||Ae.get("fill-opacity"))&&(We={},We.color=ColorUtils.hexToRgba(Ae.get("fill"),+Ae.get("fill-opacity")||this.DEFAULT_FILL.opacity));var Qe=null,Cn=null,An=Ae.get("name")!=="";An&&((Ae.get("label-fill")||Ae.get("label-fill-opacity"))&&(Cn={},Cn.color=ColorUtils.hexToRgba(Ae.get("label-fill"),+Ae.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(Ae.get("label-stroke")||Ae.get("label-stroke-opacity")||Ae.get("label-stroke-width"))&&(Qe={},Qe.color=ColorUtils.hexToRgba(Ae.get("label-stroke"),+Ae.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),Qe.width=+Ae.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var En=Ae.get("circle-radius")||this.DEFAULT_CIRCLE.radius,Sn=null;(Ae.get("circle-stroke")||Ae.get("circle-stroke-opacity")||Ae.get("circle-stroke-width"))&&(Sn={},Sn.color=ColorUtils.hexToRgba(Ae.get("circle-stroke"),+Ae.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),Sn.width=+Ae.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var Tn=null;if((Ae.get("circle-fill")||Ae.get("circle-fill-opacity"))&&(Tn={},Tn.color=ColorUtils.hexToRgba(Ae.get("circle-fill"),+Ae.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),Ae.getGeometry()){var Dn=Ae.getGeometry().getType();switch(Dn){case"Circle":case"Point":case"MultiPoint":var ti=!1,ni={};if(Sn&&(ni.stroke=new Stroke(Sn)),Tn&&(ni.fill=new Fill(Tn)),Object.keys(ni).length!==0&&(ti=!0,ni.radius=+En,t.image=new CircleStyle(ni)),Oe&&(t.image=new Icon(Oe)),An){var ii={};if(Qe&&(ii.stroke=new Stroke(Qe)),Cn&&(ii.fill=new Fill(Cn)),Object.keys(ii).length!==0)ii.text=Ae.get("name"),ii.textAlign=Ae.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,ii.font=Ae.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Text(Object.assign({},this.DEFAULT_TEXT,ii));else if(Oe||ti){var si=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(si){var oi=si.clone();oi.setText(Ae.get("name")),t.text=oi}}}break;case"Polygon":case"MultiPolygon":je&&(t.stroke=new Stroke(je)),We&&(t.fill=new Fill(We));break;case"LineString":case"MultiLineString":if(je&&(t.stroke=new Stroke(je)),this.APPLY_CONVERT_GEOM_GPX&&We){var ci=Ae.get("type");if(ci&&(ci==="Polygon"||ci==="MultiPolygon")){t.fill=new Fill(We);var Pi=Ae.clone(),Ai=Dn==="LineString"?Polygon:MultiPolygon;Ae.setGeometry(new Ai([Pi.getGeometry().getCoordinates()]))}}break}}return Object.keys(t).length!==0&&(e=new Style$1(t)),e},defineStyleFunctionByDefault:function(Ae){if(!Ae)return[];if(Object.keys(Ae).length===0)return[];var e=(t,Oe)=>{if(t.getGeometry()){var ke=null,Be=t.getGeometry().getType();switch(Be){case"Point":case"MultiPoint":var Ue={};if(Ae.getImage()&&(Ue.image=Ae.getImage()),Ae.getText()&&t.get("name")){var je=Ae.getText().clone();je.setText(t.get("name")),Ue.text=je}ke=new Style$1(Ue);break;case"Circle":var We={},Qe={};if(Ae.getFill()&&(Qe.fill=Ae.getFill()),Ae.getStroke()&&(Qe.stroke=Ae.getStroke()),Ae.getText()&&t.get("name")){var Cn=Ae.getText().clone();Cn.setText(t.get("name")),We.text=Cn}Object.keys(Qe).length!==0&&(Qe.radius=3,We.image=new CircleStyle(Qe)),ke=new Style$1(We);break;case"Polygon":case"MultiPolygon":var An={};Ae.getFill()&&(An.fill=Ae.getFill()),Ae.getStroke()&&(An.stroke=Ae.getStroke()),ke=new Style$1(An);break;case"LineString":case"LinearRing":case"MultiLineString":var En={};Ae.getStroke()&&(En.stroke=Ae.getStroke()),ke=new Style$1(En);break}return[ke]}};return e},definePropertiesFromStyleByType:function(Ae){if(Ae.getGeometry()){var e=Ae.getGeometry().getType();switch(e){case"Point":case"MultiPoint":Ae.setPropertyMarker(),Ae.setPropertyLabel();break;case"LineString":case"MultiLineString":Ae.setPropertyStroke();break;case"Polygon":case"MultiPolygon":Ae.setPropertyStroke(),Ae.setPropertyFill();break}}},definePropertiesFromStyle:function(Ae){var e=Ae.getStyle()||Ae.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,Ae,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,Ae.setStyle(e);else return}this.definePropertiesFromStyleByType(Ae)}},defineTagFromStyle:function(Ae,e){return logger$D.trace("todo..."),null}},logger$C=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(Ae){var e=null,t=null,Oe=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var ke=require("@xmldom/xmldom").DOMParser;t=new ke,e=t.parseFromString(Ae,"text/xml")}else Oe.DOMParser?(t=new Oe.DOMParser,e=t.parseFromString(Ae,"text/xml")):Oe.ActiveXObject?(e=new Oe.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(Ae)):logger$C.log("Incompatible environment for DOM Parser !");var Be=e.querySelector("parsererror");return Be?(console.error(Be),null):(logger$C.trace(e),e)},toString:function(Ae){var e=new XMLSerializer,t=e.serializeToString(Ae);return logger$C.trace(t),t},format:function(Ae){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,Oe=/(<.+>)(.+\n)/g;Ae=Ae.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(Oe,`$1
$2`);for(var ke="",Be=Ae.split(`
`),Ue=0,je="other",We={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},Qe=0;Qe<Be.length;Qe++){var Cn=Be[Qe],An=!!Cn.match(/<.+\/>/),En=!!Cn.match(/<\/.+>/),Sn=!!Cn.match(/<[^!].*>/),Tn=An?"single":En?"closing":Sn?"opening":"other",Dn=je+"->"+Tn;je=Tn;var ti="";Ue+=We[Dn];for(var ni=0;ni<Ue;ni++)ti+="	";Dn==="opening->closing"?ke=ke.substr(0,ke.length-1)+Cn+`
`:ke+=ti+Cn+`
`}return logger$C.trace(ke),ke}},logger$B=LoggerByDefault.getLogger("extended KML format"),KML=class Gf extends KML$1{constructor(e){if(super(e),!(this instanceof Gf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,Oe){for(var ke=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Be=ke,Ue=0;Ue<ke.length;Ue++){const pr=ke[Ue];if(pr.nodeName==="Document"){Be=pr.childNodes;break}if(pr.nodeName==="Placemark"){Be=[pr];break}}for(var je={},We=-1,Qe=0;Qe<Be.length;Qe++){var Cn=Be[Qe];switch(Cn.nodeName){case"Style":var An=Cn.attributes[0];if(An&&An.nodeName==="id"){var En=An.nodeValue,Sn=Cn;je[En]=Sn}break;case"Placemark":We++;for(var Tn=Cn.childNodes,Dn=!1,ti=!1,ni=!1,ii=null,si=null,oi=null,ci=Cn,Pi=0;Pi<Tn.length;Pi++)switch(Tn[Pi].nodeName){case"Polygon":ni=!0;break;case"LineString":ti=!0;break;case"Point":Dn=!0;break;case"Style":si=Tn[Pi],ii=Tn[Pi].childNodes;break;case"styleUrl":var Ai=Tn[Pi].textContent.slice(1);je[Ai]&&(ii=je[Ai].childNodes);break;case"ExtendedData":oi=Tn[Pi].childNodes;break;case"name":ci=null;break}if(oi){logger$B.log("ExtendedData :",oi);var fi=Oe.extendedData;fi&&typeof fi=="function"&&fi(t[We],oi)}if(ci){logger$B.log("Name :",ci);var Oi=Oe.nameData;Oi&&typeof Oi=="function"&&Oi(t[We],ci)}if(Dn&&ii&&ii.length!==0){for(var Ni=null,ui=null,li=0;li<ii.length;li++)switch(ii[li].nodeName){case"LabelStyle":Ni=ii[li];break;case"IconStyle":ui=ii[li];break}var Ri=t[We].getProperties().name,Mi=t[We].getProperties().description,Bi=Ri||Mi;if(logger$B.trace(Bi),!ui&&Ni){var er=Oe.labelStyle;er&&typeof er=="function"&&er(t[We],Ni)}else if(ui&&!Ni){var nr=Oe.iconStyle;nr&&typeof nr=="function"&&nr(t[We],ui)}else if(ui&&Ni){var lr=Oe.iconLabelStyle;lr&&typeof lr=="function"&&lr(t[We],ui,Ni)}}else{var hr=t[We],ar=hr.getStyle();if(ar&&typeof ar=="function"){var wr=ar.call(this,hr,0);wr&&wr.length!==0&&(ar=wr[0])}if(ni){var Fi=Oe.polygonStyle;Fi&&typeof Fi=="function"&&Fi(t[We],ii)}if(ti){var cr=Oe.lineStringStyle;cr&&typeof cr=="function"&&cr(t[We],ii)}if(Dn&&ar){var rr=ar.getImage();if(rr&&rr instanceof CircleStyle){var gr=Oe.circleStyle;gr&&typeof gr=="function"&&gr(t[We],si)}else if(rr&&rr instanceof Icon){var vr=Oe.pointStyle;vr&&typeof vr=="function"&&vr(t[We],si)}}}break;default:logger$B.trace("tag is not processing !")}}}writeFeatures(e,t){logger$B.log("overload : ol.format.KML.writeFeatures");var Oe=super.writeFeaturesNode(e,t);if(Oe===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(Oe,this.extensions);var ke=this._writeExtendStylesFeatures(Oe,e,t),Be=Parser$1.format(ke);return Be===""?null:Be}_writeExtendStylesFeatures(e,t,Oe){function ke(Sn,Tn){var Dn=Sn.toString(16);Dn.charAt(0)==="#"&&(Dn=Dn.slice(1)),Tn=Tn||1,Tn=parseInt(Tn*255,10),Tn=Tn.toString(16);var ti=Tn;return ti=ti+Dn.substr(4,2),ti=ti+Dn.substr(2,2),ti=ti+Dn.substr(0,2),ti.toLowerCase()}var Be=function(Sn,Tn){if(logger$B.trace("label with style :",Tn),!!Sn&&Sn.getStyle()instanceof Style$1){var Dn=Sn.getStyle().getText();if(!Dn)return;var ti="Sans",ni="16px",ii=Dn.getFont();if(ii){var si=ii.split(" ",2);ni=si[0],ti=si[1]}var oi=Sn.getStyle().getText().getStroke();if(!oi)return;if(oi instanceof Stroke){var ci=ke("#FFFFFF"),Pi=oi.getColor();if(Array.isArray(Pi)){var Ai="rgba(";Ai+=Pi[0]+",",Ai+=Pi[1]+",",Ai+=Pi[2]+",",Ai+=Pi[3]+")",Pi=Ai}if(ColorUtils.isRGB(Pi)){var fi=ColorUtils.rgbaToHex(Pi);ci=ke(fi.hex,fi.opacity)}else ci=ke(Pi);var Oi=oi.getWidth()||"0",Ni="1";if(Tn&&Tn.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var ui=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");ui.setAttribute("fontSize",ni),ui.setAttribute("fontFamily",ti),ui.setAttribute("haloColor",ci),ui.setAttribute("haloRadius",Oi),ui.setAttribute("haloOpacity",Ni),Tn.appendChild(ui)}}var li=Sn.getStyle().getImage();if(!li)return;if(li instanceof CircleStyle){var Ri=null,Mi=null;if(li.getStroke()){if(Mi=li.getStroke().getWidth(),Ri=li.getStroke().getColor(),Array.isArray(Ri)){var Bi="rgba(";Bi+=Ri[0]+",",Bi+=Ri[1]+",",Bi+=Ri[2]+",",Bi+=Ri[3]+")",Ri=Bi}if(ColorUtils.isRGB(Ri)){var er=ColorUtils.rgbaToHex(Ri);Ri=ke(er.hex,er.opacity)}else Ri=ke(Ri)}var nr=null;if(li.getFill()){if(nr=li.getFill().getColor(),Array.isArray(nr)){var lr="rgba(";lr+=nr[0]+",",lr+=nr[1]+",",lr+=nr[2]+",",lr+=nr[3]+")",nr=lr}if(ColorUtils.isRGB(nr)){var hr=ColorUtils.rgbaToHex(nr);nr=ke(hr.hex,hr.opacity)}else nr=ke(nr)}if(Tn&&Tn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var ar=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");ar.setAttribute("type","circle"),ar.setAttribute("radius",li.getRadius()),ar.setAttribute("fillColor",nr),ar.setAttribute("strokeColor",Ri),ar.setAttribute("strokeWidth",Mi),Tn.appendChild(ar)}}}},Ue=function(Sn,Tn){if(logger$B.trace("marker with style (hotspot):",Tn),!!Sn&&Sn.getStyle()instanceof Style$1){var Dn=Sn.getStyle().getImage();if(!Dn)return;if(Dn instanceof Icon){var ti=0,ni=0,ii="pixels",si="pixels",oi=Dn.getSize(),ci=Dn.getAnchor();if(ci.length&&(ti=ci[0],ni=ci[1],si==="fraction"?ni=ni===1?0:1-ni:ni=si==="pixels"&&ni===oi[1]?0:oi[1]-ni),Tn&&Tn.getElementsByTagName("hotSpot").length===0){var Pi=document.createElementNS(e.namespaceURI,"hotSpot");Pi.setAttribute("x",ti),Pi.setAttribute("y",ni),Pi.setAttribute("xunits",ii),Pi.setAttribute("yunits",si),Tn.appendChild(Pi)}}}},je=function(Sn,Tn){if(Sn&&Sn.getStyle()instanceof Style$1){var Dn=Sn.getStyle().getImage();if(!Dn)return;if(Dn instanceof CircleStyle){var ti=null,ni=null;if(Dn.getStroke()){if(ni=Dn.getStroke().getWidth(),ti=Dn.getStroke().getColor(),Array.isArray(ti)){var ii="rgba(";ii+=ti[0]+",",ii+=ti[1]+",",ii+=ti[2]+",",ii+=ti[3]+")",ti=ii}if(ColorUtils.isRGB(ti)){var si=ColorUtils.rgbaToHex(ti);ti=ke(si.hex,si.opacity)}else ti=ke(ti)}var oi=null;if(Dn.getFill()){if(oi=Dn.getFill().getColor(),Array.isArray(oi)){var ci="rgba(";ci+=oi[0]+",",ci+=oi[1]+",",ci+=oi[2]+",",ci+=oi[3]+")",oi=ci}if(ColorUtils.isRGB(oi)){var Pi=ColorUtils.rgbaToHex(oi);oi=ke(Pi.hex,Pi.opacity)}else oi=ke(oi)}if(Tn&&Tn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var Ai=document.createElementNS(e.namespaceURI,"LabelStyle"),fi=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");fi.setAttribute("type","circle"),fi.setAttribute("radius",Dn.getRadius()),fi.setAttribute("fillColor",oi),fi.setAttribute("strokeColor",ti),fi.setAttribute("strokeWidth",ni),Ai.appendChild(fi),Tn.appendChild(Ai)}}}},We=function(Sn,Tn){},Qe=function(Sn,Tn,Dn){logger$B.trace("write an icon with a label"),Ue(Sn,Tn),Be(Sn,Dn)},Cn=function(Sn,Tn){for(var Dn=0;Dn<Tn.length;Dn++){var ti=Tn[Dn];if(ti.nodeName==="name")return}var ni=Sn.getProperties().name;if(ni){var ii=document.createElement("name");ii.innerHTML=ni,Tn.appendChild(ii)}},An=function(Sn,Tn){if(Tn&&Tn.length){for(var Dn=[],ti=0;ti<Tn.length;ti++){const ii=Tn[ti];if(ii.nodeName==="Data"){var ni=ii.getAttribute("name");Styling.getListTags().includes(ni)&&Dn.push(ii)}}Dn&&Dn.length&&Dn.forEach(ii=>{ii.remove()})}};this._processKml(e,t,{labelStyle:Be,iconStyle:Ue,iconLabelStyle:Qe,circleStyle:je,pointStyle:We,nameData:Cn,extendedData:An});var En=Parser$1.toString(e);return En||null}_writeRootExtensions(e,t){var Oe=document.createElementNS(e.namespaceURI,"ExtendedData");for(const je in t)if(Object.hasOwnProperty.call(t,je)){const We=t[je];var ke=document.createElementNS(e.namespaceURI,"Data");ke.setAttribute("name",je);var Be=document.createTextNode(JSON.stringify(We));ke.appendChild(Be),Oe.appendChild(ke)}var Ue=e.firstChild;e.insertBefore(Oe,Ue)}readFeatures(e,t){logger$B.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Oe=this._readExtendStylesFeatures(e,t);return logger$B.trace("Styles étendus",Oe),Oe.forEach(ke=>{Styling.definePropertiesFromStyle(ke)}),Oe}_readExtendStylesFeatures(e,t){var Oe=super.readFeatures(e,t),ke=null,Be="";if(typeof e=="string"?Be=e:Be=e.documentElement.outerHTML,Be=Be.replace(/\n/g,""),Be=Be.replace(/(>)\s*(<)/g,"$1$2"),ke=Parser$1.parse(Be),ke===null)return Oe;function Ue(En){var Sn="";Sn=Sn+En.substr(6,2),Sn=Sn+En.substr(4,2),Sn=Sn+En.substr(2,2);for(var Tn=parseInt(Sn,16).toString(16),Dn="",ti=Tn.length||0,ni=0;ni<6-ti;ni++)Dn+="0";return Tn="#"+Dn+Tn,Tn}var je=function(En,Sn){if(logger$B.trace("label with style :",Sn),!!En){for(var Tn=En.getProperties().name,Dn=Ue("ff000000"),ti="#FFFFFF",ni=0,ii="Sans",si="16px",oi=null,ci=5,Pi="#000000",Ai="#ffffff",fi=1,Oi=!1,Ni=!1,ui=Sn.childNodes,li=0;li<ui.length;li++)switch(ui[li].nodeName){case"scale":break;case"colorMode":break;case"color":Dn=Ue(ui[li].textContent);break;case"LabelStyleSimpleExtensionGroup":Oi=!0;for(var Ri=ui[li].attributes,Mi=0;Mi<Ri.length;Mi++)switch(Ri[Mi].nodeName){case"fontFamily":ii=Ri[Mi].nodeValue;break;case"fontSize":si=Ri[Mi].nodeValue;break;case"haloColor":ti=Ue(Ri[Mi].nodeValue);break;case"haloRadius":ni=parseInt(Ri[Mi].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Ni=!0;for(var Bi=ui[li].attributes,er=0;er<Bi.length;er++)switch(Bi[er].nodeName){case"type":oi=Bi[er].nodeValue;break;case"radius":ci=parseInt(Bi[er].nodeValue,10);break;case"fillColor":var nr=Bi[er].nodeValue,lr=Math.round(ColorUtils.num(nr.substr(0,2))/255*10)/10,hr=Ue(nr);Pi=ColorUtils.hexToRgba(hr,lr);break;case"strokeColor":var ar=Bi[er].nodeValue,wr=Math.round(ColorUtils.num(ar.substr(0,2))/255*10)/10,Fi=Ue(ar);Ai=ColorUtils.hexToRgba(Fi,wr);break;case"strokeWidth":fi=parseInt(Bi[er].nodeValue,10);break}break}var cr=null;Ni&&oi==="circle"?cr=new CircleStyle({radius:ci,fill:new Fill({color:Pi}),stroke:new Stroke({color:Ai,width:fi})}):Oi&&(cr=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),En.setStyle(new Style$1({image:cr,text:new Text({font:si+" "+ii,textAlign:"left",text:Tn,fill:new Fill({color:Dn}),stroke:new Stroke({color:ti,width:ni})})}))}},We=function(En,Sn){logger$B.trace("hotspot :",Sn);for(var Tn=null,Dn=null,ti=Ue("ffffffff"),ni=!1,ii=51,si=38,oi=!1,ci=25.5,Pi="pixels",Ai=38,fi="pixels",Oi=Sn.childNodes,Ni=!1,ui=0;ui<Oi.length;ui++)switch(Oi[ui].nodeName){case"Icon":Ni=!0;for(var li=Oi[ui].childNodes,Ri=0;Ri<li.length;Ri++)switch(li[Ri].nodeName){case"href":Tn=li[Ri].textContent;break;case"gx:w":ni=!0,ii=parseFloat(li[Ri].textContent);break;case"gx:h":ni=!0,si=parseFloat(li[Ri].textContent);break}break;case"hotSpot":oi=!0;for(var Mi=Oi[ui].attributes,Bi=0;Bi<Mi.length;Bi++)switch(Mi[Bi].nodeName){case"x":ci=parseFloat(Mi[Bi].nodeValue);break;case"y":Ai=parseFloat(Mi[Bi].nodeValue);break;case"yunits":Pi=Mi[Bi].nodeValue;break;case"xunits":fi=Mi[Bi].nodeValue;break}break;case"scale":Dn=parseFloat(Oi[ui].textContent);break;case"color":ti=Ue(Oi[ui].textContent);break}var er=null;if(Ni){var nr={src:Tn||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:ti,crossOrigin:"anonymous",scale:Dn||1};ni&&Helper.mergeParams(nr,{size:[ii,si]}),oi&&Helper.mergeParams(nr,{anchor:[ci,Ai],anchorOrigin:"bottom-left",anchorXUnits:Pi||"pixels",anchorYUnits:fi||"pixels"}),er=new Icon(nr)}var lr=En.getStyleFunction();if(lr){var hr=lr(En,0);if(hr&&!Array.isArray(hr)&&(hr=[hr]),hr&&hr.length!==0){var ar=hr.length===1?hr[0]:hr[hr.length-1];En.setStyle(new Style$1({image:er,text:ar.getText()}))}}},Qe=function(En,Sn){if(logger$B.trace("extendData :",Sn),!!En){for(var Tn={},Dn=En.get("name")||"",ti=En.get("description")||"",ni=null,ii=0;ii<Sn.length;ii++){var si=Sn[ii],oi=si.attributes[0],ci=si.childNodes;if(oi.nodeName==="name")switch(oi.nodeValue){case"label":Dn=si.textContent,Tn.name=Dn;break;case"title":case"attributetitle":for(var Pi=0;Pi<ci.length;Pi++)ci[Pi].nodeName==="value"&&(ni=ci[Pi].textContent);break;default:Tn[oi.nodeValue]=si.textContent;break}}ni&&(ti=ti?ni+" : "+ti:ni,Tn.description=ti),Object.keys(Tn).length&&En.setProperties(Tn,!0)}},Cn=function(En,Sn,Tn){logger$B.trace("display icon and label"),je(En,Tn),We(En,Sn)},An=function(En,Sn){};return this._processKml(ke,Oe,{lineStringStyle:An,polygonStyle:An,pointStyle:An,labelStyle:this.showPointNames_?je:null,iconStyle:We,iconLabelStyle:this.showPointNames_?Cn:We,extendedData:Qe}),Oe}readRootExtensions(e){for(var t={},Oe=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,ke=Oe.childNodes,Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.nodeName==="ExtendedData")for(var je=Ue.childNodes,We=0;We<je.length;We++){var Qe=je[We];if(Qe.nodeName==="Data"){var Cn=Qe.attributes[0];if(Cn&&Cn.nodeName==="name"&&Cn.nodeValue===e){t=JSON.parse(Qe.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),AUTHOR_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),email:parseEmail,link:parseLink}),METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),author:makeObjectPropertySetter(readAuthor),copyright:makeObjectPropertySetter(readCopyright),link:parseLink,time:makeObjectPropertySetter(readDateTime),keywords:makeObjectPropertySetter(readString),bounds:parseBounds,extensions:parseExtensions}),COPYRIGHT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{year:makeObjectPropertySetter(readPositiveInteger),license:makeObjectPropertySetter(readString)}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];if(this.readExtensions_){const Be=ke.get("extensionsNode_")||null;this.readExtensions_(ke,Be)}ke.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(parse$1(e)):isDocument(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const Oe=this.readMetadataFromNode(t);if(Oe)return Oe}return null}readMetadataFromNode(e){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$3.includes(t.namespaceURI)&&t.localName==="metadata")return pushParseAndPop({},METADATA_PARSERS,t,[]);return null}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const Oe=FEATURE_READER[e.localName];if(!Oe)return null;const ke=Oe(e,[this.getReadOptions(e,t)]);return ke?(this.handleReadExtensions_([ke]),ke):null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const Oe=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,t)]);return Oe?(this.handleReadExtensions_(Oe),Oe):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const Oe=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return Oe.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),Oe.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),Oe.setAttribute("version","1.1"),Oe.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:Oe},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[t]),Oe}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(Ae,e,t){const Oe=Ae.getGeometry();if(Oe){const ke=GEOMETRY_TYPE_TO_NODENAME[Oe.getType()];if(ke){const Be=e[e.length-1].node;return createElementNS(Be.namespaceURI,ke)}}}function appendCoordinate(Ae,e,t,Oe){return Ae.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in Oe?(Ae.push(Oe.ele),delete Oe.ele,e.hasZ=!0):Ae.push(0),"time"in Oe?(Ae.push(Oe.time),delete Oe.time,e.hasM=!0):Ae.push(0),Ae}function applyLayoutOptions(Ae,e,t){let Oe="XY",ke=2;if(Ae.hasZ&&Ae.hasM?(Oe="XYZM",ke=4):Ae.hasZ?(Oe="XYZ",ke=3):Ae.hasM&&(Oe="XYM",ke=3),ke!==4){for(let Be=0,Ue=e.length/4;Be<Ue;Be++)e[Be*ke]=e[Be*4],e[Be*ke+1]=e[Be*4+1],Ae.hasZ&&(e[Be*ke+2]=e[Be*4+2]),Ae.hasM&&(e[Be*ke+2]=e[Be*4+3]);if(e.length=e.length/4*ke,t)for(let Be=0,Ue=t.length;Be<Ue;Be++)t[Be]=t[Be]/4*ke}return Oe}function readAuthor(Ae,e){const t=pushParseAndPop({},AUTHOR_PARSERS,Ae,e);if(t)return t}function readCopyright(Ae,e){const t=pushParseAndPop({},COPYRIGHT_PARSERS,Ae,e);if(t){const Oe=Ae.getAttribute("author");return Oe!==null&&(t.author=Oe),t}}function parseBounds(Ae,e){const t=e[e.length-1],Oe=Ae.getAttribute("minlat"),ke=Ae.getAttribute("minlon"),Be=Ae.getAttribute("maxlat"),Ue=Ae.getAttribute("maxlon");ke!==null&&Oe!==null&&Ue!==null&&Be!==null&&(t.bounds=[[parseFloat(ke),parseFloat(Oe)],[parseFloat(Ue),parseFloat(Be)]])}function parseEmail(Ae,e){const t=e[e.length-1],Oe=Ae.getAttribute("id"),ke=Ae.getAttribute("domain");Oe!==null&&ke!==null&&(t.email=`${Oe}@${ke}`)}function parseLink(Ae,e){const t=e[e.length-1],Oe=Ae.getAttribute("href");Oe!==null&&(t.link=Oe),parseNode(LINK_PARSERS,Ae,e)}function parseExtensions(Ae,e){const t=e[e.length-1];t.extensionsNode_=Ae}function parseRtePt(Ae,e){const t=pushParseAndPop({},RTEPT_PARSERS,Ae,e);if(t){const Oe=e[e.length-1],ke=Oe.flatCoordinates,Be=Oe.layoutOptions;appendCoordinate(ke,Be,Ae,t)}}function parseTrkPt(Ae,e){const t=pushParseAndPop({},TRKPT_PARSERS,Ae,e);if(t){const Oe=e[e.length-1],ke=Oe.flatCoordinates,Be=Oe.layoutOptions;appendCoordinate(ke,Be,Ae,t)}}function parseTrkSeg(Ae,e){const t=e[e.length-1];parseNode(TRKSEG_PARSERS,Ae,e);const Oe=t.flatCoordinates;t.ends.push(Oe.length)}function readRte(Ae,e){const t=e[0],Oe=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,Ae,e);if(!Oe)return;const ke=Oe.flatCoordinates;delete Oe.flatCoordinates;const Be=Oe.layoutOptions;delete Oe.layoutOptions;const Ue=applyLayoutOptions(Be,ke),je=new LineString(ke,Ue);transformGeometryWithOptions(je,!1,t);const We=new Feature(je);return We.setProperties(Oe,!0),We}function readTrk(Ae,e){const t=e[0],Oe=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,Ae,e);if(!Oe)return;const ke=Oe.flatCoordinates;delete Oe.flatCoordinates;const Be=Oe.ends;delete Oe.ends;const Ue=Oe.layoutOptions;delete Oe.layoutOptions;const je=applyLayoutOptions(Ue,ke,Be),We=new MultiLineString(ke,je,Be);transformGeometryWithOptions(We,!1,t);const Qe=new Feature(We);return Qe.setProperties(Oe,!0),Qe}function readWpt(Ae,e){const t=e[0],Oe=pushParseAndPop({},WPT_PARSERS,Ae,e);if(!Oe)return;const ke={},Be=appendCoordinate([],ke,Ae,Oe),Ue=applyLayoutOptions(ke,Be),je=new Point$1(Be,Ue);transformGeometryWithOptions(je,!1,t);const We=new Feature(je);return We.setProperties(Oe,!0),We}function writeLink(Ae,e,t){Ae.setAttribute("href",e);const ke=t[t.length-1].properties,Be=[ke.linkText,ke.linkType];pushSerializeAndPop({node:Ae},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Be,t,LINK_SEQUENCE)}function writeWptType(Ae,e,t){const Oe=t[t.length-1],Be=Oe.node.namespaceURI,Ue=Oe.properties;switch(Ae.setAttributeNS(null,"lat",String(e[1])),Ae.setAttributeNS(null,"lon",String(e[0])),Oe.geometryLayout){case"XYZM":e[3]!==0&&(Ue.time=e[3]);case"XYZ":e[2]!==0&&(Ue.ele=e[2]);break;case"XYM":e[2]!==0&&(Ue.time=e[2]);break}const We=Ae.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Be]:WPT_TYPE_SEQUENCE[Be],Qe=makeSequence(Ue,We);pushSerializeAndPop({node:Ae,properties:Ue},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,We)}function writeRte(Ae,e,t){const Oe=t[0],ke=e.getProperties(),Be={node:Ae};Be.properties=ke;const Ue=e.getGeometry();if(Ue.getType()=="LineString"){const Cn=transformGeometryWithOptions(Ue,!0,Oe);Be.geometryLayout=Cn.getLayout(),ke.rtept=Cn.getCoordinates()}const je=t[t.length-1].node,We=RTE_SEQUENCE[je.namespaceURI],Qe=makeSequence(ke,We);pushSerializeAndPop(Be,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,We)}function writeTrk(Ae,e,t){const Oe=t[0],ke=e.getProperties(),Be={node:Ae};Be.properties=ke;const Ue=e.getGeometry();if(Ue.getType()=="MultiLineString"){const Cn=transformGeometryWithOptions(Ue,!0,Oe);ke.trkseg=Cn.getLineStrings()}const je=t[t.length-1].node,We=TRK_SEQUENCE[je.namespaceURI],Qe=makeSequence(ke,We);pushSerializeAndPop(Be,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,We)}function writeTrkSeg(Ae,e,t){const Oe={node:Ae};Oe.geometryLayout=e.getLayout(),Oe.properties={},pushSerializeAndPop(Oe,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),t)}function writeWpt(Ae,e,t){const Oe=t[0],ke=t[t.length-1];ke.properties=e.getProperties();const Be=e.getGeometry();if(Be.getType()=="Point"){const Ue=transformGeometryWithOptions(Be,!0,Oe);ke.geometryLayout=Ue.getLayout(),writeWptType(Ae,Ue.getCoordinates(),t)}}var GPX=class Ff extends GPX$1{constructor(e){if(super(e),!(this instanceof Ff))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(Oe,ke){this.readExtensions(Oe,ke),t.call(this,Oe,ke)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var Oe=super.readFeatures(e,t);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var ke=this;return Oe.forEach(function(Be,Ue,je){Be.setId(Ue+1);var We=Be.getProperties().desc;We&&Be.setProperties({description:We});var Qe=Be.getStyleFunction();if(!Qe){var Cn=Styling.defineStyleFunctionByDefault(ke.options.defaultStyle);Cn&&Be.setStyle(Cn)}}),Oe}writeFeatures(e,t){if(e.forEach(function(We,Qe,Cn){var An=We.getProperties().description;An&&We.setProperties({desc:An}),Styling.definePropertiesFromStyle(We);var En=We.getGeometry().getType();if(En==="Polygon"){var Sn=We.clone();Sn.set("type",En),Sn.setGeometry(new LineString(We.getGeometry().getCoordinates())),e.push(Sn),Cn.splice(Qe,1)}else if(En==="MultiPolygon"){var Tn=We.clone();Tn.set("type",En),Tn.setGeometry(new MultiLineString(We.getGeometry().getCoordinates())),e.push(Tn),Cn.splice(Qe,1)}}),this.options.orderBy!==void 0){var Oe=this.options.orderBy;if(Oe){var ke=function(We,Qe){var Cn=We.get(Oe)||0,An=Qe.get(Oe)||0;return Cn.toString().localeCompare(An.toString(),void 0,{numeric:!0})};e.sort(ke)}}var Be=super.writeFeaturesNode(e,t);if(Be===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Be,this.options.extensions),this.processExtensions_(Be,e,{extensions:this.writeExtensions_});var Ue=Parser$1.toString(Be);if(!Ue)return null;var je=Parser$1.format(Ue);return je===""?null:je}readExtensions(e,t){var Oe=t;if(!t){var ke=e.getProperties();for(const We in ke)if(Object.hasOwnProperty.call(ke,We)){const Qe=ke[We];if(Qe instanceof Node){Oe=Qe;break}}}if(!Oe){console.warn("node not found !");return}for(var Be=0;Be<Oe.childNodes.length;Be++){var Ue=Oe.childNodes[Be];Ue.nodeType===1&&e.set(Ue.nodeName,Ue.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var je=Styling.defineStyleFromProperties(e);je&&e.setStyle(je)}readRootExtensions(e){for(var t={},Oe=this.source.childNodes[0],ke=Oe.childNodes,Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.nodeName==="metadata")for(var je=Ue.childNodes,We=0;We<je.length;We++){var Qe=je[We];if(Qe.nodeName==="extensions")for(var Cn=Qe.childNodes,An=0;An<Cn.length;An++){var En=Cn[An];if(En.nodeName==="data"){var Sn=En.attributes[0];if(Sn&&Sn.nodeName==="name"&&Sn.nodeValue===e){t=JSON.parse(En.textContent);break}}}}}return t}writeRootExtensions_(e,t,Oe){var ke=document.createElement("metadata"),Be=document.createElement("extensions");function Ue(Cn,An){for(const ii in An)if(Object.hasOwnProperty.call(An,ii)){var En=An[ii]||"",Sn=document.createElement(ii);if(typeof En=="string"||typeof En=="number")Sn.innerHTML=En,Cn.appendChild(Sn);else if(En instanceof Array){Sn.setAttribute("type","array"),Sn.setAttribute("index",En.length);for(let si=0;si<En.length;si++){var Tn=En[si]||"",Dn=document.createElement("value");if(typeof Tn=="string"||typeof Tn=="number")Dn.innerHTML=Tn,Sn.appendChild(Dn);else if(Tn instanceof Array){Dn.setAttribute("type","array"),Dn.setAttribute("index",Tn.length);for(let oi=0;oi<Tn.length;oi++){var ti=Tn[oi]||"",ni=document.createElement("value");(typeof ti=="string"||typeof ti=="number")&&(ni.innerHTML=ti,Dn.appendChild(ni))}Sn.appendChild(Dn)}else Tn instanceof Object&&Sn.appendChild(Ue(Dn,Tn))}Cn.appendChild(Sn)}else En instanceof Object&&Cn.appendChild(Ue(Sn,En))}return Cn}if(Oe)Ue(Be,t);else for(const Cn in t)if(Object.hasOwnProperty.call(t,Cn)){const An=t[Cn];var je=document.createElement("data");je.setAttribute("name",Cn);var We=document.createTextNode(JSON.stringify(An));je.appendChild(We),Be.appendChild(je)}ke.appendChild(Be);var Qe=e.firstChild;e.insertBefore(ke,Qe)}writeExtensions_(e,t){var Oe=document.createElementNS(t.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(ke=>{if(e.get(ke)){var Be=document.createElementNS(t.parentNode.namespaceURI,ke);Be.innerHTML=e.get(ke),Oe.appendChild(Be)}}),t.appendChild(Oe)}processExtensions_(e,t,Oe){for(var ke=-1,Be=e.childNodes,Ue=0;Ue<Be.length;Ue++){var je=Be[Ue];switch(je.nodeName){case"wpt":case"rte":case"trk":ke++;var We=t[ke],Qe=We.getStyle();if(Qe){var Cn=Oe.extensions;Cn&&typeof Cn=="function"&&Cn(We,je)}break;case"metadata":break;default:console.warn("nodename unknown :",je.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(Ae){if(typeof Ae=="string"){const e=JSON.parse(Ae);return e||null}return Ae!==null?Ae:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let Oe=null;e.type==="Feature"?Oe=e:Oe={type:"Feature",geometry:e,properties:null};const ke=readGeometryInternal(Oe.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:ke,id:Oe.id,properties:Oe.properties},t);const Be=new Feature;return this.geometryName_?Be.setGeometryName(this.geometryName_):this.extractGeometryName_&&Oe.geometry_name&&Be.setGeometryName(Oe.geometry_name),Be.setGeometry(createGeometry(ke,t)),"id"in Oe&&Be.setId(Oe.id),Oe.properties&&Be.setProperties(Oe.properties,!0),Be}readFeaturesFromObject(e,t){const Oe=e;let ke=null;if(Oe.type==="FeatureCollection"){const Be=e;ke=[];const Ue=Be.features;for(let je=0,We=Ue.length;je<We;++je){const Qe=this.readFeatureFromObject(Ue[je],t);Qe&&ke.push(Qe)}}else ke=[this.readFeatureFromObject(e,t)];return ke.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let Oe;if(t)if(t.type=="name")Oe=get$3(t.properties.name);else if(t.type==="EPSG")Oe=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else Oe=this.dataProjection;return Oe}writeFeatureObject(e,t){t=this.adaptOptions(t);const Oe={type:"Feature",geometry:null,properties:null},ke=e.getId();if(ke!==void 0&&(Oe.id=ke),!e.hasProperties())return Oe;const Be=e.getProperties(),Ue=e.getGeometry();return Ue&&(Oe.geometry=writeGeometry(Ue,t),delete Be[e.getGeometryName()]),isEmpty$1(Be)||(Oe.properties=Be),Oe}writeFeaturesObject(e,t){t=this.adaptOptions(t);const Oe=[];for(let ke=0,Be=e.length;ke<Be;++ke)Oe.push(this.writeFeatureObject(e[ke],t));return{type:"FeatureCollection",features:Oe}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}};function readGeometryInternal(Ae,e){if(!Ae)return null;let t;switch(Ae.type){case"Point":{t=readPointGeometry(Ae);break}case"LineString":{t=readLineStringGeometry(Ae);break}case"Polygon":{t=readPolygonGeometry(Ae);break}case"MultiPoint":{t=readMultiPointGeometry(Ae);break}case"MultiLineString":{t=readMultiLineStringGeometry(Ae);break}case"MultiPolygon":{t=readMultiPolygonGeometry(Ae);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(Ae);break}default:throw new Error("Unsupported GeoJSON type: "+Ae.type)}return t}function readGeometry(Ae,e){const t=readGeometryInternal(Ae);return createGeometry(t,e)}function readGeometryCollectionGeometry(Ae,e){return Ae.geometries.map(function(Oe){return readGeometryInternal(Oe)})}function readPointGeometry(Ae){const e=Ae.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(Ae){var Oe;const e=Ae.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(((Oe=e[0])==null?void 0:Oe.length)||2)}}function readMultiLineStringGeometry(Ae){var Be,Ue;const e=Ae.coordinates,t=((Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue.length)||2,Oe=[],ke=deflateCoordinatesArray(Oe,0,e,t);return{type:"MultiLineString",flatCoordinates:Oe,ends:ke,layout:getLayoutForStride(t)}}function readMultiPointGeometry(Ae){var t;const e=Ae.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((t=e[0])==null?void 0:t.length)||2)}}function readMultiPolygonGeometry(Ae){var Be,Ue;const e=Ae.coordinates,t=[],Oe=((Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue[0].length)||2,ke=deflateMultiCoordinatesArray(t,0,e,Oe);return{type:"MultiPolygon",flatCoordinates:t,ends:ke,layout:getLayoutForStride(Oe)}}function readPolygonGeometry(Ae){var Be,Ue;const e=Ae.coordinates,t=[],Oe=(Ue=(Be=e[0])==null?void 0:Be[0])==null?void 0:Ue.length,ke=deflateCoordinatesArray(t,0,e,Oe);return{type:"Polygon",flatCoordinates:t,ends:ke,layout:getLayoutForStride(Oe)}}function writeGeometry(Ae,e){Ae=transformGeometryWithOptions(Ae,!0,e);const t=Ae.getType();let Oe;switch(t){case"Point":{Oe=writePointGeometry(Ae);break}case"LineString":{Oe=writeLineStringGeometry(Ae);break}case"Polygon":{Oe=writePolygonGeometry(Ae,e);break}case"MultiPoint":{Oe=writeMultiPointGeometry(Ae);break}case"MultiLineString":{Oe=writeMultiLineStringGeometry(Ae);break}case"MultiPolygon":{Oe=writeMultiPolygonGeometry(Ae,e);break}case"GeometryCollection":{Oe=writeGeometryCollectionGeometry(Ae,e);break}case"Circle":{Oe={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return Oe}function writeGeometryCollectionGeometry(Ae,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:Ae.getGeometriesArray().map(function(Oe){return writeGeometry(Oe,e)})}}function writeLineStringGeometry(Ae,e){return{type:"LineString",coordinates:Ae.getCoordinates()}}function writeMultiLineStringGeometry(Ae,e){return{type:"MultiLineString",coordinates:Ae.getCoordinates()}}function writeMultiPointGeometry(Ae,e){return{type:"MultiPoint",coordinates:Ae.getCoordinates()}}function writeMultiPolygonGeometry(Ae,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:Ae.getCoordinates(t)}}function writePointGeometry(Ae,e){return{type:"Point",coordinates:Ae.getCoordinates()}}function writePolygonGeometry(Ae,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:Ae.getCoordinates(t)}}var GeoJSON=class Bf extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof Bf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var Oe=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),Oe.forEach(ke=>{var Be=ke.getStyleFunction();if(Be){var Ue=Be.call(this,ke,0);Ue&&Ue.length!==0&&ke.setStyle(Ue[0])}else{var je=Styling.defineStyleFromProperties(ke);if(je)ke.setStyle(je);else{var We=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);We&&(ke.setStyle(We),Styling.definePropertiesFromStyle(ke))}}}),Oe}writeFeatures(e,t){e.forEach(function(ke){Styling.definePropertiesFromStyle(ke)});var Oe=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(Oe,this.options.extensions),JSON.stringify(Oe)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,Oe,ke){var Be=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,Ue=this.tileGrid,je=this.tileGrid.getTileCoordForCoordAndResolution(e,t),We=function(si,oi,ci){var Pi=[0,0,0],Ai=createEmpty(),fi=si[1],Oi=si[2],Ni=oi.getTileCoordExtent(si),ui=ci.getExtent();if(ui!=null&&ci.isGlobal()){var li=Math.ceil(getWidth(ui)/getWidth(Ni));fi=fi%li,Pi[0]=si[0],Pi[1]=fi,Pi[2]=si[2],Ni=oi.getTileCoordExtent(Pi,Ai)}return intersects$1(Ni,ui)?[si[0],fi,Oi]:null},Qe=Ue.getTileCoordExtent(je),Cn=We(je,Ue,Oe);if(!(Ue.getResolutions().length<=je[0])){var An=Ue.getResolution(je[0]),En=Ue.getMatrixIds()[je[0]],Sn={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:Cn[1],TILEROW:Cn[2],TILEMATRIX:En,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(Sn,ke);var Tn=Math.floor((e[0]-Qe[0])/(An/Be)),Dn=Math.floor((Qe[3]-e[1])/(An/Be)),ti=Ue.getTileSize(je[0]);Tn=Math.min(Tn,(ti[0]|ti)-1),Dn=Math.max(Dn,0),Sn.I=Tn,Sn.J=Dn;var ni=this.urls[0],ii=Gp.Helper.normalyzeUrl(ni,Sn);return ii}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(Ae,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var Oe=Ae*28e-5;for(var ke in t)if(t.hasOwnProperty(ke)&&t[ke]<=Oe)return ke=parseInt(ke,10),ke;return 0},getAttributions:function(Ae){var e=Ae.zoom,t=[];if(Ae.originators!=null&&Ae.visibility)for(var Oe,ke=0,Be=Ae.originators.length;ke<Be;ke++){Oe=!0;for(var Ue=Ae.originators[ke],je=Ae.originators[ke].constraints||[],We=0,Qe=je.length;We<Qe;We++){var Cn=je[We];Oe=!0;var An=this.getZoomLevelFromScaleDenominator(Cn.maxScaleDenominator,Ae.crs),En=this.getZoomLevelFromScaleDenominator(Cn.minScaleDenominator,Ae.crs)||21;An&&An>e&&(Oe=!1),Oe&&En&&En<e&&(Oe=!1);var Sn=Cn.bbox;if(Oe&&Sn){Oe=!1;var Tn=Ae.extent;if(Tn){var Dn=[Sn.top,Sn.left,Sn.bottom,Sn.right];if(this.intersects(Tn,Dn)){Oe=!0;break}}}}if(Oe){var ti=Ue.logo,ni=Ue.url,ii=Ue.name?Ue.name:"",si=Ue.attribution,oi=document.createElement("div");oi.className="gp-control-attribution";var ci=null;ci=document.createElement("a"),ci.className="gp-control-attribution-link",ci.target="_blank",oi.appendChild(ci),ni&&(ci.href=ni);var Pi=!!ti,Ai=null;Pi?(Ai=document.createElement("img"),ci?(Ai.className="gp-control-attribution-image",ci.appendChild(Ai)):(Ai.className="",oi.appendChild(Ai)),Ai.src=ti,Ai.title=si||ii,Ai.style.height="30px",Ai.style.width="30px"):ii?ci.textContent=ii:si?ci.textContent=si:ni?ci.textContent=ni:ci.textContent="",t.push(oi.innerHTML+" ")}}return t},intersects:function(Ae,e){var t=Ae[1]<=e[3]&&e[1]<=Ae[3],Oe=Ae[2]<=e[0]&&e[2]<=Ae[0];return t&&Oe}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var Ae=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return Ae.Gp&&Ae.Gp.Config&&Ae.Gp.Config.layers&&Object.keys(Ae.Gp.Config.layers).length!==0?(this.configuration=Ae.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMTS");if(!Be)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMTS")}var Ue=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=We}var Qe={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),je,!1),version:Oe.version,style:Oe.styles,format:Oe.format,projection:Oe.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(Oe.minScale),layer:e.layer,matrixSet:Oe.TMSLink,tileGrid:new WMTSTileGrid({resolutions:Oe.nativeResolutions,matrixIds:Oe.matrixIds,origin:[Object.values(Oe.tileMatrices)[0].topLeftCorner.x,Object.values(Oe.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(Qe,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(Qe),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._description=e.description||Oe.description,this._title=e.title||Oe.title,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMS");if(!Be)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WMS")}var Ue=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=We}var Qe={url:Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),je,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:Oe.version,STYLES:Oe.styles,FORMAT:Oe.format},crossOrigin:"anonymous"};return Helper.mergeParams(Qe,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(Qe),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,Oe=t?t.params:null,ke=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WFS");if(!Be)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");ke=Config.configuration.getLayerKey(Be)[0],Oe=Config.configuration.getLayerParams(e.layer,"WFS")}var Ue=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(Oe.url.includes("/private/")){var We=e.apiKey||ke;if(!We)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=We}var Qe=(An,En,Sn,Tn)=>{const Dn=new XMLHttpRequest;Dn.open("GET",En);const ti=function(){An.removeLoadedExtent(extent),Tn()};Dn.onerror=ti,Dn.onload=function(){if(Dn.status==200){var ni=JSON.parse(Dn.responseText);const ii=An.getFormat().readFeatures(ni);if(An.addFeatures(ii),Sn(ii),ni.links)for(let si=0;si<ni.links.length;si++){const oi=ni.links[si];oi.rel==="next"&&Qe(An,oi.href,Sn,Tn)}}else ti()},Dn.send()},Cn={format:new GeoJSON$1,loader:function(An,En,Sn,Tn,Dn){var ti=this;const ni=e.maxFeatures,ii=e.layer,si=Sn.getCode(),oi=Gp.Helper.normalyzeUrl(Oe.url.replace(/(http|https):\/\//,Ue),je,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+ii+"&outputFormat=application/json&srsname="+si+"&bbox="+An.join(",")+","+si+"&maxFeatures="+ni+"&count="+ni+"&startIndex=0";Qe(ti,oi,Tn,Dn)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(Cn,e.olParams),e.olParams&&!Oe.originators&&(Oe.originators=e.olParams.attributions),super(Cn),this._originators=Oe.originators,this._legends=e.legends||Oe.legends,this._metadata=e.metadata||Oe.metadata,this._title=e.title||Oe.title,this._description=e.description||Oe.description,this._quicklookUrl=e.quicklookUrl||Oe.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e),Oe=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=Oe,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function asImageLike(Ae){return Ae instanceof Image||Ae instanceof HTMLCanvasElement||Ae instanceof HTMLVideoElement||Ae instanceof ImageBitmap?Ae:null}function asArrayLike(Ae){return Ae instanceof Uint8Array||Ae instanceof Uint8ClampedArray||Ae instanceof Float32Array||Ae instanceof DataView?Ae:null}const disposedError=new Error("disposed");let sharedContext=null;function toArray(Ae){sharedContext||(sharedContext=createCanvasContext2D(Ae.width,Ae.height,void 0,{willReadFrequently:!0}));const e=sharedContext.canvas,t=Ae.width;e.width!==t&&(e.width=t);const Oe=Ae.height;return e.height!==Oe&&(e.height=Oe),sharedContext.clearRect(0,0,t,Oe),sharedContext.drawImage(Ae,0,0),sharedContext.getImageData(0,0,t,Oe).data}const defaultSize=[256,256];class DataTile extends Tile{constructor(e){const t=TileState.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=TileState.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const Oe=this.entries_[e];return assert(Oe!==void 0,"Tried to get a value for a key that does not exist in the cache"),Oe===this.newest_||(Oe===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(Oe.newer.older=Oe.older,Oe.older.newer=Oe.newer),Oe.newer=null,Oe.older=this.newest_,this.newest_.newer=Oe,this.newest_=Oe),Oe.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[t++]=Oe.key_;return e}getValues(){const e=new Array(this.count_);let t=0,Oe;for(Oe=this.newest_;Oe;Oe=Oe.older)e[t++]=Oe.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const Oe={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=Oe:this.oldest_=Oe,this.newest_=Oe,this.entries_[e]=Oe,++this.count_}setSize(e){this.highWaterMark=e}}function create(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function orthographic(Ae,e,t,Oe,ke,Be,Ue){Ue=Ue??create();const je=1/(Ae-e),We=1/(t-Oe),Qe=1/(ke-Be);return Ue[0]=-2*je,Ue[1]=0,Ue[2]=0,Ue[3]=0,Ue[4]=0,Ue[5]=-2*We,Ue[6]=0,Ue[7]=0,Ue[8]=0,Ue[9]=0,Ue[10]=2*Qe,Ue[11]=0,Ue[12]=(Ae+e)*je,Ue[13]=(Oe+t)*We,Ue[14]=(Be+ke)*Qe,Ue[15]=1,Ue}function scale(Ae,e,t,Oe,ke){return ke=ke??create(),ke[0]=Ae[0]*e,ke[1]=Ae[1]*e,ke[2]=Ae[2]*e,ke[3]=Ae[3]*e,ke[4]=Ae[4]*t,ke[5]=Ae[5]*t,ke[6]=Ae[6]*t,ke[7]=Ae[7]*t,ke[8]=Ae[8]*Oe,ke[9]=Ae[9]*Oe,ke[10]=Ae[10]*Oe,ke[11]=Ae[11]*Oe,ke[12]=Ae[12],ke[13]=Ae[13],ke[14]=Ae[14],ke[15]=Ae[15],ke}function translate(Ae,e,t,Oe,ke){ke=ke??create();let Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti;return Ae===ke?(ke[12]=Ae[0]*e+Ae[4]*t+Ae[8]*Oe+Ae[12],ke[13]=Ae[1]*e+Ae[5]*t+Ae[9]*Oe+Ae[13],ke[14]=Ae[2]*e+Ae[6]*t+Ae[10]*Oe+Ae[14],ke[15]=Ae[3]*e+Ae[7]*t+Ae[11]*Oe+Ae[15]):(Be=Ae[0],Ue=Ae[1],je=Ae[2],We=Ae[3],Qe=Ae[4],Cn=Ae[5],An=Ae[6],En=Ae[7],Sn=Ae[8],Tn=Ae[9],Dn=Ae[10],ti=Ae[11],ke[0]=Be,ke[1]=Ue,ke[2]=je,ke[3]=We,ke[4]=Qe,ke[5]=Cn,ke[6]=An,ke[7]=En,ke[8]=Sn,ke[9]=Tn,ke[10]=Dn,ke[11]=ti,ke[12]=Be*e+Qe*t+Sn*Oe+Ae[12],ke[13]=Ue*e+Cn*t+Tn*Oe+Ae[13],ke[14]=je*e+An*t+Dn*Oe+Ae[14],ke[15]=We*e+En*t+ti*Oe+Ae[15]),ke}function translation(Ae,e,t,Oe){return Oe=Oe??create(),Oe[0]=1,Oe[1]=0,Oe[2]=0,Oe[3]=0,Oe[4]=0,Oe[5]=1,Oe[6]=0,Oe[7]=0,Oe[8]=0,Oe[9]=0,Oe[10]=1,Oe[11]=0,Oe[12]=Ae,Oe[13]=e,Oe[14]=t,Oe[15]=1,Oe}const VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Canvas{constructor(e){this.gl_=e,this.program_=createProgram(e,FRAGMENT_SHADER,VERTEX_SHADER),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn){const Tn=this.gl_;We===void 0&&(We=ke),Qe===void 0&&(Qe=Be),Ue===void 0&&(Ue=t),je===void 0&&(je=Oe),Cn===void 0&&(Cn=Ue),An===void 0&&(An=je),En===void 0&&(En=Tn.canvas.width),Sn===void 0&&(Sn=Tn.canvas.height),Tn.bindTexture(Tn.TEXTURE_2D,e),Tn.useProgram(this.program_),Tn.bindBuffer(Tn.ARRAY_BUFFER,this.positionBuffer),Tn.enableVertexAttribArray(this.positionLocation),Tn.vertexAttribPointer(this.positionLocation,2,Tn.FLOAT,!1,0,0),Tn.bindBuffer(Tn.ARRAY_BUFFER,this.texcoordBuffer),Tn.enableVertexAttribArray(this.texcoordLocation),Tn.vertexAttribPointer(this.texcoordLocation,2,Tn.FLOAT,!1,0,0);let Dn=orthographic(0,En,0,Sn,-1,1);Dn=translate(Dn,We,Qe,0),Dn=scale(Dn,Cn,An,1),Tn.uniformMatrix4fv(this.matrixLocation,!1,Dn);let ti=translation(ke/t,Be/Oe,0);ti=scale(ti,Ue/t,je/Oe,1),Tn.uniformMatrix4fv(this.textureMatrixLocation,!1,ti),Tn.uniform1i(this.textureLocation,0),Tn.drawArrays(Tn.TRIANGLES,0,this.positions.length/2)}}function createShader(Ae,e,t){const Oe=Ae.createShader(e);if(Oe===null)throw new Error("Shader compilation failed");if(Ae.shaderSource(Oe,t),Ae.compileShader(Oe),!Ae.getShaderParameter(Oe,Ae.COMPILE_STATUS)){const ke=Ae.getShaderInfoLog(Oe);throw ke===null?new Error("Shader info log creation failed"):new Error(ke)}return Oe}function createProgram(Ae,e,t){const Oe=Ae.createProgram(),ke=createShader(Ae,Ae.VERTEX_SHADER,t),Be=createShader(Ae,Ae.FRAGMENT_SHADER,e);if(Oe===null)throw new Error("Program creation failed");if(Ae.attachShader(Oe,ke),Ae.attachShader(Oe,Be),Ae.linkProgram(Oe),!Ae.getProgramParameter(Oe,Ae.LINK_STATUS))throw Ae.getProgramInfoLog(Oe)===null?new Error("Program info log creation failed"):new Error;return Oe}const EDGE_VERTEX_SHADER=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,EDGE_FRAGMENT_SHADER=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,TRIANGLE_VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,TRIANGLE_FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function createCanvasContextWebGL(Ae,e,t,Oe){let ke;return t&&t.length?ke=t.shift():WORKER_OFFSCREEN_CANVAS?ke=new OffscreenCanvas(Ae||300,e||300):ke=document.createElement("canvas"),Ae&&(ke.width=Ae),e&&(ke.height=e),ke.getContext("webgl",Oe)}function releaseGLCanvas(Ae){const e=Ae.canvas;e.width=1,e.height=1,Ae.clear(Ae.COLOR_BUFFER_BIT|Ae.DEPTH_BUFFER_BIT|Ae.STENCIL_BUFFER_BIT)}const canvasGLPool=[];function render(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn){const Tn=Math.round(Oe*e),Dn=Math.round(Oe*t);Ae.canvas.width=Tn,Ae.canvas.height=Dn;let ti,ni;if(ni=Ae.createTexture(),Ae.bindTexture(Ae.TEXTURE_2D,ni),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),En?(Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR)):(Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.NEAREST),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.NEAREST)),Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Tn,Dn,0,Ae.RGBA,Cn,null),ti=Ae.createFramebuffer(),Ae.bindFramebuffer(Ae.FRAMEBUFFER,ti),Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,ni,0),ti===null)throw new Error("Could not create framebuffer");if(ni===null)throw new Error("Could not create texture");if(We.length===0)return{width:Tn,height:Dn,framebuffer:ti,texture:ni};const ii=createEmpty();We.forEach(function(Ni,ui,li){extend$3(ii,Ni.extent)});let si,oi,ci;const Pi=1/ke;{if(si=Ae.createTexture(),ni===null)throw new Error("Could not create texture");oi=Math.round(getWidth(ii)*Pi),ci=Math.round(getHeight(ii)*Pi);const Ni=Ae.getParameter(Ae.MAX_TEXTURE_SIZE),ui=Math.max(oi,ci),li=ui>Ni?Ni/ui:1,Ri=Math.round(oi*li),Mi=Math.round(ci*li);Ae.bindTexture(Ae.TEXTURE_2D,si),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_S,Ae.CLAMP_TO_EDGE),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_WRAP_T,Ae.CLAMP_TO_EDGE),En?(Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.LINEAR),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.LINEAR)):(Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MIN_FILTER,Ae.NEAREST),Ae.texParameteri(Ae.TEXTURE_2D,Ae.TEXTURE_MAG_FILTER,Ae.NEAREST)),Ae.texImage2D(Ae.TEXTURE_2D,0,Ae.RGBA,Ri,Mi,0,Ae.RGBA,Cn,null);const Bi=Ae.createFramebuffer();Ae.bindFramebuffer(Ae.FRAMEBUFFER,Bi),Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,si,0);const er=new Canvas(Ae);We.forEach(function(nr,lr,hr){const ar=(nr.extent[0]-ii[0])*Pi*li,wr=-(nr.extent[3]-ii[3])*Pi*li,Fi=getWidth(nr.extent)*Pi*li,cr=getHeight(nr.extent)*Pi*li;if(Ae.bindFramebuffer(Ae.FRAMEBUFFER,Bi),Ae.viewport(0,0,Ri,Mi),nr.clipExtent){const rr=(nr.clipExtent[0]-ii[0])*Pi*li,gr=-(nr.clipExtent[3]-ii[3])*Pi*li,vr=getWidth(nr.clipExtent)*Pi*li,pr=getHeight(nr.clipExtent)*Pi*li;Ae.enable(Ae.SCISSOR_TEST),Ae.scissor(En?rr:Math.round(rr),En?gr:Math.round(gr),En?vr:Math.round(rr+vr)-Math.round(rr),En?pr:Math.round(gr+pr)-Math.round(gr))}er.drawImage(nr.texture,nr.width,nr.height,Qe,Qe,nr.width-2*Qe,nr.height-2*Qe,En?ar:Math.round(ar),En?wr:Math.round(wr),En?Fi:Math.round(ar+Fi)-Math.round(ar),En?cr:Math.round(wr+cr)-Math.round(wr),Ri,Mi),Ae.disable(Ae.SCISSOR_TEST)}),Ae.deleteFramebuffer(Bi)}const Ai=getTopLeft(Ue),fi=getTopLeft(ii),Oi=Ni=>{const ui=(Ni[0][0]-Ai[0])/Be*Oe,li=-(Ni[0][1]-Ai[1])/Be*Oe,Ri=(Ni[1][0]-Ai[0])/Be*Oe,Mi=-(Ni[1][1]-Ai[1])/Be*Oe,Bi=(Ni[2][0]-Ai[0])/Be*Oe,er=-(Ni[2][1]-Ai[1])/Be*Oe;return{u1:Ri,v1:Mi,u0:ui,v0:li,u2:Bi,v2:er}};Ae.bindFramebuffer(Ae.FRAMEBUFFER,ti),Ae.viewport(0,0,Tn,Dn);{const Ni=[],ui=[],li=createProgram(Ae,TRIANGLE_FRAGMENT_SHADER,TRIANGLE_VERTEX_SHADER);Ae.useProgram(li);const Ri=Ae.getUniformLocation(li,"u_texture");Ae.bindTexture(Ae.TEXTURE_2D,si),Ae.uniform1i(Ri,0),je.getTriangles().forEach(function(ar,wr,Fi){const cr=ar.source,rr=ar.target,{u1:gr,v1:vr,u0:pr,v0:_r,u2:Ar,v2:Sr}=Oi(rr),Hr=(cr[0][0]-fi[0])/ke/oi,es=-(cr[0][1]-fi[1])/ke/ci,ir=(cr[1][0]-fi[0])/ke/oi,mr=-(cr[1][1]-fi[1])/ke/ci,dr=(cr[2][0]-fi[0])/ke/oi,tr=-(cr[2][1]-fi[1])/ke/ci;Ni.push(gr,vr,pr,_r,Ar,Sr),ui.push(ir,mr,Hr,es,dr,tr)});const Mi=orthographic(0,Tn,Dn,0,-1,1),Bi=Ae.getUniformLocation(li,"u_matrix");Ae.uniformMatrix4fv(Bi,!1,Mi);const er=Ae.getAttribLocation(li,"a_position"),nr=Ae.createBuffer();Ae.bindBuffer(Ae.ARRAY_BUFFER,nr),Ae.bufferData(Ae.ARRAY_BUFFER,new Float32Array(Ni),Ae.STATIC_DRAW),Ae.vertexAttribPointer(er,2,Ae.FLOAT,!1,0,0),Ae.enableVertexAttribArray(er);const lr=Ae.getAttribLocation(li,"a_texcoord"),hr=Ae.createBuffer();Ae.bindBuffer(Ae.ARRAY_BUFFER,hr),Ae.bufferData(Ae.ARRAY_BUFFER,new Float32Array(ui),Ae.STATIC_DRAW),Ae.vertexAttribPointer(lr,2,Ae.FLOAT,!1,0,0),Ae.enableVertexAttribArray(lr),Ae.drawArrays(Ae.TRIANGLES,0,Ni.length/2)}if(An){const Ni=createProgram(Ae,EDGE_FRAGMENT_SHADER,EDGE_VERTEX_SHADER);Ae.useProgram(Ni);const ui=orthographic(0,Tn,Dn,0,-1,1),li=Ae.getUniformLocation(Ni,"u_matrix");Ae.uniformMatrix4fv(li,!1,ui);const Ri=Array.isArray(An)?An:[0,0,0,255],Mi=Ae.getUniformLocation(Ni,"u_val");Ae.uniform4fv(Mi,Ri);const Bi=Ae.getAttribLocation(Ni,"a_position"),er=Ae.createBuffer();Ae.bindBuffer(Ae.ARRAY_BUFFER,er),Ae.vertexAttribPointer(Bi,2,Ae.FLOAT,!1,0,0),Ae.enableVertexAttribArray(Bi);const nr=je.getTriangles().reduce(function(lr,hr){const ar=hr.target,{u1:wr,v1:Fi,u0:cr,v0:rr,u2:gr,v2:vr}=Oi(ar);return lr.concat([wr,Fi,cr,rr,cr,rr,gr,vr,gr,vr,wr,Fi])},[]);Ae.bufferData(Ae.ARRAY_BUFFER,new Float32Array(nr),Ae.STATIC_DRAW),Ae.drawArrays(Ae.LINES,0,nr.length/2)}return{width:Tn,height:Dn,framebuffer:ti,texture:ni}}class ReprojDataTile extends DataTile{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,Oe=t.getExtent(),ke=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?ke?getIntersection(Oe,ke):Oe:ke;const Be=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),Ue=this.targetTileGrid_.getExtent();let je=this.sourceTileGrid_.getExtent();const We=Ue?getIntersection(Be,Ue):Be;if(getArea$1(We)===0){this.state=TileState.EMPTY;return}Oe&&(je?je=getIntersection(je,Oe):je=Oe);const Qe=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),Cn=e.targetProj,An=calculateSourceExtentResolution(t,Cn,We,Qe);if(!isFinite(An)||An<=0){this.state=TileState.EMPTY;return}const En=e.errorThreshold!==void 0?e.errorThreshold:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(t,Cn,We,je,An*En,Qe,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(An);let Sn=this.triangulation_.calculateSourceExtent();if(je&&(t.canWrapX()?(Sn[1]=clamp(Sn[1],je[1],je[3]),Sn[3]=clamp(Sn[3],je[1],je[3])):Sn=getIntersection(Sn,je)),!getArea$1(Sn))this.state=TileState.EMPTY;else{let Tn=0,Dn=0;t.canWrapX()&&(Tn=getWidth(Oe),Dn=Math.floor((Sn[0]-Oe[0])/Tn)),wrapAndSliceX(Sn.slice(),t,!0).forEach(ni=>{const ii=this.sourceTileGrid_.getTileRangeForExtentAndZ(ni,this.sourceZ_),si=e.getTileFunction;for(let oi=ii.minX;oi<=ii.maxX;oi++)for(let ci=ii.minY;ci<=ii.maxY;ci++){const Pi=si(this.sourceZ_,oi,ci,this.pixelRatio_);if(Pi){const Ai=Dn*Tn;this.sourceTiles_.push({tile:Pi,offset:Ai})}}++Dn}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(oi=>{var wr;const ci=oi.tile;if(!ci||ci.getState()!==TileState.LOADED)return;const Pi=ci.getSize(),Ai=this.gutter_;let fi;const Oi=asArrayLike(ci.getData());Oi?fi=Oi:(t=!0,fi=toArray(asImageLike(ci.getData())));const Ni=[Pi[0]+2*Ai,Pi[1]+2*Ai],ui=fi instanceof Float32Array,li=Ni[0]*Ni[1],Ri=ui?Float32Array:Uint8ClampedArray,Mi=new Ri(fi.buffer),Bi=Ri.BYTES_PER_ELEMENT,er=Bi*Mi.length/li,nr=Mi.byteLength/Ni[1],lr=Math.floor(nr/Bi/Ni[0]),hr=this.sourceTileGrid_.getTileCoordExtent(ci.tileCoord);hr[0]+=oi.offset,hr[2]+=oi.offset;const ar=(wr=this.clipExtent_)==null?void 0:wr.slice();ar&&(ar[0]+=oi.offset,ar[2]+=oi.offset),e.push({extent:hr,clipExtent:ar,data:Mi,dataType:Ri,bytesPerPixel:er,pixelSize:Ni,bandCount:lr})}),this.sourceTiles_.length=0,e.length===0){this.state=TileState.ERROR,this.changed();return}const Oe=this.wrappedTileCoord_[0],ke=this.targetTileGrid_.getTileSize(Oe),Be=typeof ke=="number"?ke:ke[0],Ue=typeof ke=="number"?ke:ke[1],je=Be*this.pixelRatio_,We=Ue*this.pixelRatio_,Qe=this.targetTileGrid_.getResolution(Oe),Cn=this.sourceTileGrid_.getResolution(this.sourceZ_),An=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),En=e[0].bandCount,Sn=new e[0].dataType(En*je*We),Tn=createCanvasContextWebGL(je,We,canvasGLPool,{premultipliedAlpha:!1,antialias:!1});let Dn;const ti=Tn.RGBA;let ni;e[0].dataType==Float32Array?(ni=Tn.FLOAT,Tn.getExtension("WEBGL_color_buffer_float"),Tn.getExtension("OES_texture_float"),Tn.getExtension("EXT_float_blend"),Dn=Tn.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(ni=Tn.UNSIGNED_BYTE,Dn=this.interpolate);const ii=4,si=Math.ceil(En/ii);for(let oi=si-1;oi>=0;--oi){const ci=[];for(let Ri=0,Mi=e.length;Ri<Mi;++Ri){const Bi=e[Ri],er=Bi.pixelSize,nr=er[0],lr=er[1],hr=new Bi.dataType(ii*nr*lr),ar=Bi.data;let wr=oi*ii;for(let cr=0,rr=hr.length;cr<rr;cr+=ii)hr[cr]=ar[wr],hr[cr+1]=ar[wr+1],hr[cr+2]=ar[wr+2],hr[cr+3]=ar[wr+3],wr+=En;const Fi=Tn.createTexture();Tn.bindTexture(Tn.TEXTURE_2D,Fi),Dn?(Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_MIN_FILTER,Tn.LINEAR),Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_MAG_FILTER,Tn.LINEAR)):(Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_MIN_FILTER,Tn.NEAREST),Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_MAG_FILTER,Tn.NEAREST)),Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_WRAP_S,Tn.CLAMP_TO_EDGE),Tn.texParameteri(Tn.TEXTURE_2D,Tn.TEXTURE_WRAP_T,Tn.CLAMP_TO_EDGE),Tn.texImage2D(Tn.TEXTURE_2D,0,ti,nr,lr,0,ti,ni,hr),ci.push({extent:Bi.extent,clipExtent:Bi.clipExtent,texture:Fi,width:nr,height:lr})}const{framebuffer:Pi,width:Ai,height:fi}=render(Tn,Be,Ue,this.pixelRatio_,Cn,Qe,An,this.triangulation_,ci,this.gutter_,ni,this.renderEdges_,Dn),Oi=Ai,Ni=fi*ii,ui=new e[0].dataType(Oi*Ni);Tn.bindFramebuffer(Tn.FRAMEBUFFER,Pi),Tn.readPixels(0,0,Ai,fi,Tn.RGBA,ni,ui);let li=oi*ii;for(let Ri=0,Mi=ui.length;Ri<Mi;Ri+=ii){const Bi=(Oi-1-(Ri/Ni|0))*Ni+Ri%Ni;Sn[li]=ui[Bi],Sn[li+1]=ui[Bi+1],Sn[li+2]=ui[Bi+2],Sn[li+3]=ui[Bi+3],li+=En}}if(releaseGLCanvas(Tn),canvasGLPool.push(Tn.canvas),t){const oi=createCanvasContext2D(Be,Ue),ci=new ImageData(Sn,Be);oi.putImageData(ci,0,0),this.reprojData_=oi.canvas}else this.reprojData_=Sn;this.reprojSize_=[Math.round(je),Math.round(We)],this.state=TileState.LOADED,this.changed()}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const Oe=t.getState();if(Oe!==TileState.IDLE&&Oe!==TileState.LOADING)return;e++;const ke=listen(t,EventType.CHANGE,()=>{const Be=t.getState();(Be==TileState.LOADED||Be==TileState.ERROR||Be==TileState.EMPTY)&&(unlistenByKey(ke),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(ke)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==TileState.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}}function getCacheKey(Ae,e,t,Oe){return`${Ae},${getKeyZXY(e,t,Oe)}`}function addTileToLookup(Ae,e,t){if(!(t in Ae))return Ae[t]=new Set([e]),!0;const Oe=Ae[t],ke=Oe.has(e);return ke||Oe.add(e),!ke}function removeTileFromLookup(Ae,e,t){const Oe=Ae[t];return Oe?Oe.delete(e):!1}function getRenderExtent(Ae,e){const t=Ae.layerStatesArray[Ae.layerIndex];t.extent&&(e=getIntersection(e,fromUserExtent(t.extent,Ae.viewState.projection)));const Oe=t.layer.getRenderSource();if(!Oe.getWrapX()){const ke=Oe.getTileGridForProjection(Ae.viewState.projection).getExtent();ke&&(e=getIntersection(e,ke))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const Oe=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new LRUCache(Oe),this.maxStaleKeys=Oe*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,Oe,ke){const Be=this.tileCache_,je=this.getLayer().getSource(),We=getCacheKey(je.getKey(),e,t,Oe);let Qe;if(Be.containsKey(We))Qe=Be.get(We);else{if(Qe=je.getTile(e,t,Oe,ke.pixelRatio,ke.viewState.projection),!Qe)return null;Be.set(We,Qe)}return Qe}getTile(e,t,Oe,ke){const Be=this.getOrCreateTile(e,t,Oe,ke);return Be||null}getData(e){const t=this.frameState;if(!t)return null;const Oe=this.getLayer(),ke=apply(t.pixelToCoordinateTransform,e.slice()),Be=Oe.getExtent();if(Be&&!containsCoordinate(Be,ke))return null;const Ue=t.viewState,je=Oe.getRenderSource(),We=je.getTileGridForProjection(Ue.projection),Qe=je.getTilePixelRatio(t.pixelRatio);for(let Cn=We.getZForResolution(Ue.resolution);Cn>=We.getMinZoom();--Cn){const An=We.getTileCoordForCoordAndZ(ke,Cn),En=this.getTile(Cn,An[1],An[2],t);if(!En||En.getState()!==TileState.LOADED)continue;const Sn=We.getOrigin(Cn),Tn=toSize(We.getTileSize(Cn)),Dn=We.getResolution(Cn);let ti;if(En instanceof ImageTile||En instanceof ReprojTile)ti=En.getImage();else if(En instanceof DataTile){if(ti=asImageLike(En.getData()),!ti)continue}else continue;const ni=Math.floor(Qe*((ke[0]-Sn[0])/Dn-An[1]*Tn[0])),ii=Math.floor(Qe*((Sn[1]-ke[1])/Dn-An[2]*Tn[1])),si=Math.round(Qe*je.getGutterForProjection(Ue.projection));return this.getImageData(ti,ni+si,ii+si)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const Oe=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==Oe&&(this.renderedRevision_=Oe,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=Oe,!0}enqueueTiles(e,t,Oe,ke,Be){const Ue=e.viewState,je=this.getLayer(),We=je.getRenderSource(),Qe=We.getTileGridForProjection(Ue.projection),Cn=getUid(We);Cn in e.wantedTiles||(e.wantedTiles[Cn]={});const An=e.wantedTiles[Cn],En=je.getMapInternal(),Sn=Math.max(Oe-Be,Qe.getMinZoom(),Qe.getZForResolution(Math.min(je.getMaxResolution(),En?En.getView().getResolutionForZoom(Math.max(je.getMinZoom(),0)):Qe.getResolution(0)),We.zDirection));for(let Tn=Oe;Tn>=Sn;--Tn){const Dn=Qe.getTileRangeForExtentAndZ(t,Tn,this.tempTileRange_),ti=Qe.getResolution(Tn);for(let ni=Dn.minX;ni<=Dn.maxX;++ni)for(let ii=Dn.minY;ii<=Dn.maxY;++ii){const si=this.getTile(Tn,ni,ii,e);if(!si||!addTileToLookup(ke,si,Tn))continue;const ci=si.getKey();if(An[ci]=!0,si.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(ci)){const Pi=createOrUpdate(Tn,ni,ii,this.tempTileCoord_);e.tileQueue.enqueue([si,Cn,Qe.getTileCoordCenter(Pi),ti])}}}}findStaleTile_(e,t){const Oe=this.tileCache_,ke=e[0],Be=e[1],Ue=e[2],je=this.getStaleKeys();for(let We=0;We<je.length;++We){const Qe=getCacheKey(je[We],ke,Be,Ue);if(Oe.containsKey(Qe)){const Cn=Oe.get(Qe);if(Cn.getState()===TileState.LOADED)return Cn.endTransition(getUid(this)),addTileToLookup(t,Cn,ke),!0}}return!1}findAltTiles_(e,t,Oe,ke){const Be=e.getTileRangeForTileCoordAndZ(t,Oe,this.tempTileRange_);if(!Be)return!1;let Ue=!0;const je=this.tileCache_,Qe=this.getLayer().getRenderSource().getKey();for(let Cn=Be.minX;Cn<=Be.maxX;++Cn)for(let An=Be.minY;An<=Be.maxY;++An){const En=getCacheKey(Qe,Oe,Cn,An);let Sn=!1;if(je.containsKey(En)){const Tn=je.get(En);Tn.getState()===TileState.LOADED&&(addTileToLookup(ke,Tn,Oe),Sn=!0)}Sn||(Ue=!1)}return Ue}renderFrame(e,t){let Oe=!0;this.renderComplete=!0;const ke=e.layerStatesArray[e.layerIndex],Be=e.viewState,Ue=Be.projection,je=Be.resolution,We=Be.center,Qe=e.pixelRatio,Cn=this.getLayer(),An=Cn.getSource(),En=An.getRevision(),Sn=An.getTileGridForProjection(Ue),Tn=Sn.getZForResolution(je,An.zDirection),Dn=Sn.getResolution(Tn),ti=An.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==ti&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=ti):this.renderedSourceKey_=ti;let ni=e.extent;const ii=An.getTilePixelRatio(Qe);this.prepareContainer(e,t);const si=this.context.canvas.width,oi=this.context.canvas.height,ci=ke.extent&&fromUserExtent(ke.extent);ci&&(ni=getIntersection(ni,fromUserExtent(ke.extent)));const Pi=Dn*si/2/ii,Ai=Dn*oi/2/ii,fi=[We[0]-Pi,We[1]-Ai,We[0]+Pi,We[1]+Ai],Oi={};this.renderedTiles.length=0;const Ni=Cn.getPreload();if(e.nextExtent){const ar=Sn.getZForResolution(Be.nextResolution,An.zDirection),wr=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,wr,ar,Oi,Ni)}const ui=getRenderExtent(e,ni);if(this.enqueueTiles(e,ui,Tn,Oi,0),Ni>0&&setTimeout(()=>{this.enqueueTiles(e,ui,Tn-1,Oi,Ni-1)},0),!(Tn in Oi))return this.container;const li=getUid(this),Ri=e.time;for(const ar of Oi[Tn]){const wr=ar.getState();if((ar instanceof ReprojTile||ar instanceof ReprojDataTile)&&wr===TileState.EMPTY)continue;const Fi=ar.tileCoord;if(wr===TileState.LOADED&&ar.getAlpha(li,Ri)===1){ar.endTransition(li);continue}if(wr!==TileState.IDLE&&(Oe=!1),wr!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Fi,Oi)){removeTileFromLookup(Oi,ar,Tn),e.animate=!0;continue}if(this.findAltTiles_(Sn,Fi,Tn+1,Oi))continue;const gr=Sn.getMinZoom();for(let vr=Tn-1;vr>=gr&&!this.findAltTiles_(Sn,Fi,vr,Oi);--vr);}const Mi=Dn/je*Qe/ii,Bi=this.getRenderContext(e);compose(this.tempTransform,si/2,oi/2,Mi,Mi,0,-si/2,-oi/2),ke.extent&&this.clipUnrotated(Bi,e,ci),An.getInterpolate()||(Bi.imageSmoothingEnabled=!1),this.preRender(Bi,e);const er=Object.keys(Oi).map(Number);er.sort(ascending);let nr;const lr=[],hr=[];for(let ar=er.length-1;ar>=0;--ar){const wr=er[ar],Fi=An.getTilePixelSize(wr,Qe,Ue),rr=Sn.getResolution(wr)/Dn,gr=Fi[0]*rr*Mi,vr=Fi[1]*rr*Mi,pr=Sn.getTileCoordForCoordAndZ(getTopLeft(fi),wr),_r=Sn.getTileCoordExtent(pr),Ar=apply(this.tempTransform,[ii*(_r[0]-fi[0])/Dn,ii*(fi[3]-_r[3])/Dn]),Sr=ii*An.getGutterForProjection(Ue);for(const Hr of Oi[wr]){if(Hr.getState()!==TileState.LOADED)continue;const es=Hr.tileCoord,ir=pr[1]-es[1],mr=Math.round(Ar[0]-(ir-1)*gr),dr=pr[2]-es[2],tr=Math.round(Ar[1]-(dr-1)*vr),Dr=Math.round(Ar[0]-ir*gr),Nr=Math.round(Ar[1]-dr*vr),Pr=mr-Dr,kr=tr-Nr,Rr=er.length===1;let Tr=!1;nr=[Dr,Nr,Dr+Pr,Nr,Dr+Pr,Nr+kr,Dr,Nr+kr];for(let Er=0,br=lr.length;Er<br;++Er)if(!Rr&&wr<hr[Er]){const Ir=lr[Er];intersects$1([Dr,Nr,Dr+Pr,Nr+kr],[Ir[0],Ir[3],Ir[4],Ir[7]])&&(Tr||(Bi.save(),Tr=!0),Bi.beginPath(),Bi.moveTo(nr[0],nr[1]),Bi.lineTo(nr[2],nr[3]),Bi.lineTo(nr[4],nr[5]),Bi.lineTo(nr[6],nr[7]),Bi.moveTo(Ir[6],Ir[7]),Bi.lineTo(Ir[4],Ir[5]),Bi.lineTo(Ir[2],Ir[3]),Bi.lineTo(Ir[0],Ir[1]),Bi.clip())}lr.push(nr),hr.push(wr),this.drawTile(Hr,e,Dr,Nr,Pr,kr,Sr,Rr),Tr&&Bi.restore(),this.renderedTiles.unshift(Hr),this.updateUsedTiles(e.usedTiles,An,Hr)}}if(this.renderedRevision=En,this.renderedResolution=Dn,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,fi),this.renderedExtent_=fi,this.renderedPixelRatio=Qe,this.postRender(this.context,e),ke.extent&&Bi.restore(),Bi.imageSmoothingEnabled=!0,this.renderComplete){const ar=(wr,Fi)=>{const cr=getUid(An),rr=Fi.wantedTiles[cr],gr=rr?Object.keys(rr).length:0;this.updateCacheSize(gr),this.tileCache_.expireCache()};e.postRenderFunctions.push(ar)}return!this.renderComplete&&!Oe&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,Oe,ke,Be,Ue,je,We){let Qe;if(e instanceof DataTile){if(Qe=asImageLike(e.getData()),!Qe)throw new Error("Rendering array data is not yet supported")}else Qe=this.getTileImage(e);if(!Qe)return;const Cn=this.getRenderContext(t),An=getUid(this),En=t.layerStatesArray[t.layerIndex],Sn=En.opacity*(We?e.getAlpha(An,t.time):1),Tn=Sn!==Cn.globalAlpha;Tn&&(Cn.save(),Cn.globalAlpha=Sn),Cn.drawImage(Qe,je,je,Qe.width-2*je,Qe.height-2*je,Oe,ke,Be,Ue),Tn&&Cn.restore(),Sn!==En.opacity?t.animate=!0:We&&e.endTransition(An)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,Oe){const ke=getUid(t);ke in e||(e[ke]={}),e[ke][Oe.getKey()]=!0}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMTS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:ke}),Ue={source:Be};if(Be.getLayer()!==void 0&&t.globalConstrainWFSts&&t.globalConstraints.projection){var je;typeof t.globalConstraints.projection=="string"&&(je=get$3(t.globalConstraints.projection)),je&&je.getUnits()&&(je.getUnits()==="m"?(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5,Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):je.getUnits()==="degrees"&&(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WMTS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WMS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:ke}),Ue={source:Be};if(Be.getParams().LAYERS!==void 0&&ke&&ke.projection){var je=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];Ue.extent=transformExtent(je,"EPSG:4326",ke.projection);var We;typeof ke.projection=="string"?We=get$3(ke.projection):typeof ke.projection=="object"&&ke.projection.getCode()&&(We=get$3(ke.projection.getCode())),We&&We.getUnits()&&(We.getUnits()==="m"?(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5,Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):We.getUnits()==="degrees"&&(Ue.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Ue.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WMS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Oe=Config.configuration.getLayerId(e.layer,"WFS");if(t=Config.configuration.getLayerConf(Oe),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var ke;e.olParams&&e.olParams.sourceParams&&(ke=e.olParams.sourceParams);var Be=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:ke||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),Ue={source:Be};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(Ue,e.olParams),super(Ue),this.name=e.layer,this.service="WFS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create$1(),this.tileClipContexts_=null}drawTile(e,t,Oe,ke,Be,Ue,je,We){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,Oe,ke,Be,Ue,je,We)}getTile(e,t,Oe,ke){const Be=this.getOrCreateTile(e,t,Oe,ke);if(!Be)return null;const je=ke.viewState.resolution,We=ke.viewHints;return(!(We[ViewHint.ANIMATING]||We[ViewHint.INTERACTING])||!Be.wantedResolution)&&(Be.wantedResolution=je),Be}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,Oe){const ke=this.getLayer(),Be=ke.getRevision(),Ue=ke.getRenderOrder()||null,je=e.wantedResolution,We=e.getReplayState(ke);if(!We.dirty&&We.renderedResolution===je&&We.renderedRevision==Be&&We.renderedRenderOrder==Ue)return;const Qe=ke.getSource(),Cn=!!ke.getDeclutter(),An=Qe.getTileGrid(),Sn=Qe.getTileGridForProjection(Oe).getTileCoordExtent(e.wrappedTileCoord),Tn=Qe.getSourceTiles(t,Oe,e),Dn=getUid(ke);delete e.hitDetectionImageData[Dn],e.executorGroups[Dn]=[],We.dirty=!1;for(let ti=0,ni=Tn.length;ti<ni;++ti){const ii=Tn[ti];if(ii.getState()!=TileState.LOADED)continue;const si=ii.tileCoord,oi=An.getTileCoordExtent(si),ci=getIntersection(Sn,oi),Pi=buffer(ci,ke.getRenderBuffer()*je,this.tempExtent),Ai=equals$1(oi,ci)?null:Pi,fi=new BuilderGroup(0,ci,je,t),Oi=getSquaredTolerance(je,t),Ni=function(Bi,er){let nr;const lr=Bi.getStyleFunction()||ke.getStyleFunction();if(lr&&(nr=lr(Bi,je)),nr){const hr=this.renderFeature(Bi,Oi,nr,fi,Cn,er);We.dirty=We.dirty||hr}},ui=ii.getFeatures();Ue&&Ue!==We.renderedRenderOrder&&ui.sort(Ue);for(let Bi=0,er=ui.length;Bi<er;++Bi){const nr=ui[Bi];(!Ai||intersects$1(Ai,nr.getGeometry().getExtent()))&&Ni.call(this,nr,Bi)}const li=fi.finish(),Ri=ke.getRenderMode()!=="vector"&&Cn&&Tn.length===1?null:ci,Mi=new ExecutorGroup(Ri,je,t,Qe.getOverlaps(),li,ke.getRenderBuffer(),!0);e.executorGroups[Dn].push(Mi)}We.renderedRevision=Be,We.renderedRenderOrder=Ue,We.renderedResolution=je}forEachFeatureAtCoordinate(e,t,Oe,ke,Be){const Ue=t.viewState.resolution,je=t.viewState.rotation;Oe=Oe??0;const We=this.getLayer(),Cn=We.getSource().getTileGridForProjection(t.viewState.projection),An=boundingExtent([e]);buffer(An,Ue*Oe,An);const En={},Sn=function(si,oi,ci){let Pi=si.getId();Pi===void 0&&(Pi=getUid(si));const Ai=En[Pi];if(Ai){if(Ai!==!0&&ci<Ai.distanceSq){if(ci===0)return En[Pi]=!0,Be.splice(Be.lastIndexOf(Ai),1),ke(si,We,oi);Ai.geometry=oi,Ai.distanceSq=ci}}else{if(ci===0)return En[Pi]=!0,ke(si,We,oi);Be.push(En[Pi]={feature:si,layer:We,geometry:oi,distanceSq:ci,callback:ke})}},Tn=this.renderedTiles,Dn=getUid(We),ti=We.getDeclutter(),ni=ti?t.declutter[ti].all().map(si=>si.value):null;let ii;e:for(let si=0,oi=Tn.length;si<oi;++si){const ci=Tn[si],Pi=Cn.getTileCoordExtent(ci.wrappedTileCoord);if(!intersects$1(Pi,An))continue;const Ai=ci.executorGroups[Dn];for(let fi=0,Oi=Ai.length;fi<Oi;++fi)if(ii=Ai[fi].forEachFeatureAtCoordinate(e,Ue,je,Oe,Sn,ni),ii)break e}return ii}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,Oe)=>{const ke=this.getLayer(),Be=ke.getSource(),Ue=this.renderedProjection,je=Ue.getExtent(),We=this.renderedResolution,Qe=Be.getTileGridForProjection(Ue),Cn=apply(this.renderedPixelToCoordinateTransform_,e.slice()),An=Qe.getTileCoordForCoordAndResolution(Cn,We).toString(),En=this.renderedTiles.find(si=>si.tileCoord.toString()===An&&si.getState()===TileState.LOADED);if(!En||En.loadingSourceTiles>0){t([]);return}Be.getWrapX()&&Ue.canWrapX()&&!containsExtent(je,Qe.getTileCoordExtent(En.tileCoord))&&wrapX$1(Cn,Ue);const Sn=getUid(ke),Tn=Qe.getTileCoordExtent(En.wrappedTileCoord),Dn=getTopLeft(Tn),ti=[(Cn[0]-Dn[0])/We,(Dn[1]-Cn[1])/We],ni=En.getSourceTiles().reduce((si,oi)=>si.concat(oi.getFeatures()),[]);let ii=En.hitDetectionImageData[Sn];if(!ii){const si=toSize(Qe.getTileSize(Qe.getZForResolution(We,Be.zDirection))),oi=this.renderedRotation_,ci=[this.getRenderTransform(Qe.getTileCoordCenter(En.wrappedTileCoord),We,0,HIT_DETECT_RESOLUTION,si[0]*HIT_DETECT_RESOLUTION,si[1]*HIT_DETECT_RESOLUTION,0)];ii=createHitDetectionImageData(si,ci,ni,ke.getStyleFunction(),Qe.getTileCoordExtent(En.wrappedTileCoord),En.getReplayState(ke).renderedResolution,oi),En.hitDetectionImageData[Sn]=ii}t(hitDetect(ti,ni,ii))})}getFeaturesInExtent(e){const t=[],Oe=this.getTileCache();if(Oe.getCount()===0)return t;const Be=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),Ue=Be.getZForResolution(this.renderedResolution),je={};return Oe.forEach(We=>{if(We.tileCoord[0]!==Ue||We.getState()!==TileState.LOADED)return;const Qe=We.getSourceTiles();for(let Cn=0,An=Qe.length;Cn<An;++Cn){const En=Qe[Cn],Sn=En.getKey();if(Sn in je)continue;je[Sn]=!0;const Tn=En.tileCoord;if(intersects$1(e,Be.getTileCoordExtent(Tn))){const Dn=En.getFeatures();if(Dn)for(let ti=0,ni=Dn.length;ti<ni;++ti){const ii=Dn[ti],si=ii.getGeometry();intersects$1(e,si.getExtent())&&t.push(ii)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const Oe=this.context,ke=Oe.globalAlpha;Oe.globalAlpha=t.opacity;const Be=e.viewHints,Ue=!(Be[ViewHint.ANIMATING]||Be[ViewHint.INTERACTING]),je=[this.context.canvas.width,this.context.canvas.height],We=this.getLayer().getDeclutter(),Qe=We?e.declutter[We]:void 0,Cn=getUid(this.getLayer()),An=this.renderedTiles;for(let En=0,Sn=An.length;En<Sn;++En){const Tn=An[En],Dn=Tn.executorGroups[Cn];if(Dn)for(let ti=Dn.length-1;ti>=0;--ti)Dn[ti].execute(this.context,je,this.getTileRenderTransform(Tn,e),e.viewState.rotation,Ue,DECLUTTER,Qe)}Oe.globalAlpha=ke}renderDeferredInternal(e){const t=this.renderedTiles,Oe=getUid(this.getLayer()),ke=t.reduce((We,Qe,Cn)=>(Qe.executorGroups[Oe].forEach(An=>We.push({executorGroup:An,index:Cn})),We),[]),Be=ke.map(({executorGroup:We})=>We.getDeferredZIndexContexts()),Ue={};for(let We=0,Qe=ke.length;We<Qe;++We){const Cn=ke[We].executorGroup.getDeferredZIndexContexts();for(const An in Cn)Ue[An]=!0}Object.keys(Ue).map(Number).sort(ascending).forEach(We=>{Be.forEach((Qe,Cn)=>{Qe[We]&&(Qe[We].forEach(An=>{const{executorGroup:En,index:Sn}=ke[Cn],Tn=En.getRenderedContext(),Dn=Tn.globalAlpha;Tn.globalAlpha=this.renderedOpacity_;const ti=this.tileClipContexts_[Sn];ti&&ti.draw(Tn),An.draw(Tn),ti&&Tn.restore(),Tn.globalAlpha=Dn,An.clear()}),Qe[We].length=0)})})}getTileRenderTransform(e,t){const Oe=t.pixelRatio,ke=t.viewState,Be=ke.center,Ue=ke.resolution,je=ke.rotation,We=t.size,Qe=Math.round(We[0]*Oe),Cn=Math.round(We[1]*Oe),En=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),Sn=e.tileCoord,Tn=En.getTileCoordExtent(e.wrappedTileCoord),Dn=En.getTileCoordExtent(Sn,this.tempExtent)[0]-Tn[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/Oe,1/Oe),this.getRenderTransform(Be,Ue,je,Oe,Qe,Cn,Dn))}postRender(e,t){var ci;const Oe=t.viewHints,ke=!(Oe[ViewHint.ANIMATING]||Oe[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const Be=this.getLayer(),Ue=Be.getRenderMode(),je=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const We=Be.getDeclutter(),Qe=We?VECTOR_REPLAYS[Ue].filter(Pi=>!DECLUTTER.includes(Pi)):VECTOR_REPLAYS[Ue],Cn=t.viewState,An=Cn.rotation,En=Be.getSource(),Tn=En.getTileGridForProjection(Cn.projection).getZForResolution(Cn.resolution,En.zDirection),Dn=this.renderedTiles,ti=[],ni=[],ii=[],si=getUid(Be);let oi=!0;for(let Pi=Dn.length-1;Pi>=0;--Pi){const Ai=Dn[Pi];oi=oi&&!Ai.getReplayState(Be).dirty;const fi=Ai.executorGroups[si].filter(Bi=>Bi.hasExecutors(Qe));if(fi.length===0)continue;const Oi=this.getTileRenderTransform(Ai,t),Ni=Ai.tileCoord[0];let ui=!1;const li=fi[0].getClipCoords(Oi);let Ri=e,Mi;if(li){Mi=new ZIndexContext,Ri=Mi.getContext();for(let Bi=0,er=ti.length;Bi<er;++Bi)if(Tn!==Ni&&Ni<ni[Bi]){const nr=ti[Bi];intersects$1([li[0],li[3],li[4],li[7]],[nr[0],nr[3],nr[4],nr[7]])&&(ui||(Ri.save(),ui=!0),Ri.beginPath(),Ri.moveTo(li[0],li[1]),Ri.lineTo(li[2],li[3]),Ri.lineTo(li[4],li[5]),Ri.lineTo(li[6],li[7]),Ri.moveTo(nr[6],nr[7]),Ri.lineTo(nr[4],nr[5]),Ri.lineTo(nr[2],nr[3]),Ri.lineTo(nr[0],nr[1]),Ri.clip())}ti.push(li),ni.push(Ni)}for(let Bi=0,er=fi.length;Bi<er;++Bi)fi[Bi].execute(e,[e.canvas.width,e.canvas.height],Oi,An,ke,Qe,(ci=t.declutter)==null?void 0:ci[We]);ui&&(Ri===e?Ri.restore():ii[Pi]=Mi)}e.globalAlpha=je,this.ready=oi,this.tileClipContexts_=ii,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,Oe,ke,Be,Ue){if(!Oe)return!1;let je=!1;if(Array.isArray(Oe))for(let We=0,Qe=Oe.length;We<Qe;++We)je=renderFeature$1(ke,e,Oe[We],t,this.boundHandleStyleImageChange_,void 0,Be,Ue)||je;else je=renderFeature$1(ke,e,Oe,t,this.boundHandleStyleImageChange_,void 0,Be,Ue);return je}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const Oe=e.getReplayState(t),ke=t.getRevision(),Be=e.wantedResolution;return Oe.renderedTileResolution!==Be||Oe.renderedTileRevision!==ke}renderTileImage_(e,t){const Oe=this.getLayer(),ke=e.getReplayState(Oe),Be=Oe.getRevision(),Ue=e.executorGroups[getUid(Oe)];ke.renderedTileRevision=Be;const je=e.wrappedTileCoord,We=je[0],Qe=Oe.getSource();let Cn=t.pixelRatio;const En=t.viewState.projection,Sn=Qe.getTileGridForProjection(En),Tn=Sn.getResolution(e.tileCoord[0]),Dn=t.pixelRatio/e.wantedResolution*Tn,ti=Sn.getResolution(We),ni=e.getContext();Cn=Math.round(Math.max(Cn,Dn/Cn));const ii=Qe.getTilePixelSize(We,Cn,En);ni.canvas.width=ii[0],ni.canvas.height=ii[1];const si=Cn/Dn;if(si!==1){const Ai=reset(this.tmpTransform_);scale$2(Ai,si,si),ni.setTransform.apply(ni,Ai)}const oi=Sn.getTileCoordExtent(je,this.tempExtent),ci=Dn/ti,Pi=reset(this.tmpTransform_);scale$2(Pi,ci,-ci),translate$2(Pi,-oi[0],-oi[3]);for(let Ai=0,fi=Ue.length;Ai<fi;++Ai)Ue[Ai].execute(ni,[ni.canvas.width*si,ni.canvas.height*si],Pi,0,!0,IMAGE_REPLAYS[Oe.getRenderMode()],null);ke.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const Oe=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=Oe;const ke=e.renderMode||"hybrid";assert(ke=="hybrid"||ke=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=ke,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(Ae,e,t,Oe){const ke=document.createElement("script"),Be="olc_"+getUid(e);function Ue(){delete window[Be],ke.parentNode.removeChild(ke)}ke.async=!0,ke.src=Ae+(Ae.includes("?")?"&":"?")+"callback="+Be;const je=setTimeout(function(){Ue(),t&&t()},1e4);window[Be]=function(We){clearTimeout(je),Ue(),e(We)},document.head.appendChild(ke)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let Oe;try{Oe=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(Oe)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),Oe=this.getProjection();let ke;if(e.bounds!==void 0){const Qe=getTransformFromProjections(t,Oe);ke=applyTransform(e.bounds,Qe)}const Be=extentFromProjection(Oe),Ue=e.minzoom||0,je=e.maxzoom||22,We=createXYZ({extent:Be,maxZoom:je,minZoom:Ue,tileSize:this.tileSize_});if(this.tileGrid=We,this.tileUrlFunction=createFromTemplates(e.tiles,We),e.attribution&&!this.getAttributions()){const Qe=ke!==void 0?ke:Be;this.setAttributions(function(Cn){return intersects$1(Qe,Cn.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,Oe=this.length){for(;this.pos<Oe;){const ke=this.readVarint(),Be=ke>>3,Ue=this.pos;this.type=ke&7,e(Be,t,this),this.pos===Ue&&this.skip(ke)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let Oe,ke;return ke=t[this.pos++],Oe=ke&127,ke<128||(ke=t[this.pos++],Oe|=(ke&127)<<7,ke<128)||(ke=t[this.pos++],Oe|=(ke&127)<<14,ke<128)||(ke=t[this.pos++],Oe|=(ke&127)<<21,ke<128)?Oe:(ke=t[this.pos],Oe|=(ke&15)<<28,readVarintRemainder(Oe,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(t,e)):readUtf8(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const Oe=this.readPackedEnd();for(;this.pos<Oe;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(t===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(t===PBF_FIXED32)this.pos+=4;else if(t===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const Oe=new Uint8Array(t);Oe.set(this.buf),this.buf=Oe,this.dataView=new DataView(Oe.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const Oe=this.pos-t;Oe>=128&&makeRoomForExtraLength(t,Oe,this),this.pos=t-1,this.writeVarint(Oe),this.pos+=Oe}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let Oe=0;Oe<t;Oe++)this.buf[this.pos++]=e[Oe]}writeRawMessage(e,t){this.pos++;const Oe=this.pos;e(t,this);const ke=this.pos-Oe;ke>=128&&makeRoomForExtraLength(Oe,ke,this),this.pos=Oe-1,this.writeVarint(ke),this.pos+=ke}writeMessage(e,t,Oe){this.writeTag(e,PBF_BYTES),this.writeRawMessage(t,Oe)}writePackedVarint(e,t){t.length&&this.writeMessage(e,writePackedVarint,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,writePackedSVarint,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,writePackedBoolean,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,writePackedFloat,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,writePackedDouble,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,writePackedFixed32,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,writePackedSFixed32,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,writePackedFixed64,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,writePackedSFixed64,t)}writeBytesField(e,t){this.writeTag(e,PBF_BYTES),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,PBF_BYTES),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,PBF_FIXED32),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,PBF_FIXED64),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function readVarintRemainder(Ae,e,t){const Oe=t.buf;let ke,Be;if(Be=Oe[t.pos++],ke=(Be&112)>>4,Be<128||(Be=Oe[t.pos++],ke|=(Be&127)<<3,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<10,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<17,Be<128)||(Be=Oe[t.pos++],ke|=(Be&127)<<24,Be<128)||(Be=Oe[t.pos++],ke|=(Be&1)<<31,Be<128))return toNum(Ae,ke,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(Ae,e,t){return t?e*4294967296+(Ae>>>0):(e>>>0)*4294967296+(Ae>>>0)}function writeBigVarint(Ae,e){let t,Oe;if(Ae>=0?(t=Ae%4294967296|0,Oe=Ae/4294967296|0):(t=~(-Ae%4294967296),Oe=~(-Ae/4294967296),t^4294967295?t=t+1|0:(t=0,Oe=Oe+1|0)),Ae>=18446744073709552e3||Ae<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,Oe,e),writeBigVarintHigh(Oe,e)}function writeBigVarintLow(Ae,e,t){t.buf[t.pos++]=Ae&127|128,Ae>>>=7,t.buf[t.pos++]=Ae&127|128,Ae>>>=7,t.buf[t.pos++]=Ae&127|128,Ae>>>=7,t.buf[t.pos++]=Ae&127|128,Ae>>>=7,t.buf[t.pos]=Ae&127}function writeBigVarintHigh(Ae,e){const t=(Ae&7)<<4;e.buf[e.pos++]|=t|((Ae>>>=3)?128:0),Ae&&(e.buf[e.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(e.buf[e.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(e.buf[e.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(e.buf[e.pos++]=Ae&127|((Ae>>>=7)?128:0),Ae&&(e.buf[e.pos++]=Ae&127)))))}function makeRoomForExtraLength(Ae,e,t){const Oe=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(Oe);for(let ke=t.pos-1;ke>=Ae;ke--)t.buf[ke+Oe]=t.buf[ke]}function writePackedVarint(Ae,e){for(let t=0;t<Ae.length;t++)e.writeVarint(Ae[t])}function writePackedSVarint(Ae,e){for(let t=0;t<Ae.length;t++)e.writeSVarint(Ae[t])}function writePackedFloat(Ae,e){for(let t=0;t<Ae.length;t++)e.writeFloat(Ae[t])}function writePackedDouble(Ae,e){for(let t=0;t<Ae.length;t++)e.writeDouble(Ae[t])}function writePackedBoolean(Ae,e){for(let t=0;t<Ae.length;t++)e.writeBoolean(Ae[t])}function writePackedFixed32(Ae,e){for(let t=0;t<Ae.length;t++)e.writeFixed32(Ae[t])}function writePackedSFixed32(Ae,e){for(let t=0;t<Ae.length;t++)e.writeSFixed32(Ae[t])}function writePackedFixed64(Ae,e){for(let t=0;t<Ae.length;t++)e.writeFixed64(Ae[t])}function writePackedSFixed64(Ae,e){for(let t=0;t<Ae.length;t++)e.writeSFixed64(Ae[t])}function readUtf8(Ae,e,t){let Oe="",ke=e;for(;ke<t;){const Be=Ae[ke];let Ue=null,je=Be>239?4:Be>223?3:Be>191?2:1;if(ke+je>t)break;let We,Qe,Cn;je===1?Be<128&&(Ue=Be):je===2?(We=Ae[ke+1],(We&192)===128&&(Ue=(Be&31)<<6|We&63,Ue<=127&&(Ue=null))):je===3?(We=Ae[ke+1],Qe=Ae[ke+2],(We&192)===128&&(Qe&192)===128&&(Ue=(Be&15)<<12|(We&63)<<6|Qe&63,(Ue<=2047||Ue>=55296&&Ue<=57343)&&(Ue=null))):je===4&&(We=Ae[ke+1],Qe=Ae[ke+2],Cn=Ae[ke+3],(We&192)===128&&(Qe&192)===128&&(Cn&192)===128&&(Ue=(Be&15)<<18|(We&63)<<12|(Qe&63)<<6|Cn&63,(Ue<=65535||Ue>=1114112)&&(Ue=null))),Ue===null?(Ue=65533,je=1):Ue>65535&&(Ue-=65536,Oe+=String.fromCharCode(Ue>>>10&1023|55296),Ue=56320|Ue&1023),Oe+=String.fromCharCode(Ue),ke+=je}return Oe}function writeUtf8(Ae,e,t){for(let Oe=0,ke,Be;Oe<e.length;Oe++){if(ke=e.charCodeAt(Oe),ke>55295&&ke<57344)if(Be)if(ke<56320){Ae[t++]=239,Ae[t++]=191,Ae[t++]=189,Be=ke;continue}else ke=Be-55296<<10|ke-56320|65536,Be=null;else{ke>56319||Oe+1===e.length?(Ae[t++]=239,Ae[t++]=191,Ae[t++]=189):Be=ke;continue}else Be&&(Ae[t++]=239,Ae[t++]=191,Ae[t++]=189,Be=null);ke<128?Ae[t++]=ke:(ke<2048?Ae[t++]=ke>>6|192:(ke<65536?Ae[t++]=ke>>12|224:(Ae[t++]=ke>>18|240,Ae[t++]=ke>>12&63|128),Ae[t++]=ke>>6&63|128),Ae[t++]=ke&63|128)}return t}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,Oe,ke){e.pos=t.geometry;const Be=e.readVarint()+e.pos;let Ue=1,je=0,We=0,Qe=0,Cn=0,An=0;for(;e.pos<Be;){if(!je){const En=e.readVarint();Ue=En&7,je=En>>3}if(je--,Ue===1||Ue===2)We+=e.readSVarint(),Qe+=e.readSVarint(),Ue===1&&Cn>An&&(ke.push(Cn),An=Cn),Oe.push(We,Qe),Cn+=2;else if(Ue===7)Cn>An&&(Oe.push(Oe[An],Oe[An+1]),Cn+=2);else throw new Error("Invalid command found in the PBF")}Cn>An&&(ke.push(Cn),An=Cn)}createFeature_(e,t,Oe){const ke=t.type;if(ke===0)return null;let Be;const Ue=t.properties;let je;this.idProperty_?(je=Ue[this.idProperty_],delete Ue[this.idProperty_]):je=t.id,Ue[this.layerName_]=t.layer.name;const We=[],Qe=[];this.readRawGeometry_(e,t,We,Qe);const Cn=getGeometryType(ke,Qe.length);if(this.featureClass===RenderFeature)Be=new this.featureClass(Cn,We,Qe,2,Ue,je),Be.transform(Oe.dataProjection);else{let An;if(Cn=="Polygon"){const Tn=inflateEnds(We,Qe);An=Tn.length>1?new MultiPolygon(We,"XY",Tn):new Polygon(We,"XY",Qe)}else An=Cn==="Point"?new Point$1(We,"XY"):Cn==="LineString"?new LineString(We,"XY"):Cn==="MultiPoint"?new MultiPoint(We,"XY"):Cn==="MultiLineString"?new MultiLineString(We,"XY",Qe):null;const En=this.featureClass;Be=new En,this.geometryName_&&Be.setGeometryName(this.geometryName_);const Sn=transformGeometryWithOptions(An,!1,Oe);Be.setGeometry(Sn),je!==void 0&&Be.setId(je),Be.setProperties(Ue,!0)}return Be}getType(){return"arraybuffer"}readFeatures(e,t){const Oe=this.layers_;t=this.adaptOptions(t);const ke=get$3(t.dataProjection);ke.setWorldExtent(t.extent),t.dataProjection=ke;const Be=new Pbf(e),Ue=Be.readFields(layersPBFReader,{}),je=[];for(const We in Ue){if(Oe&&!Oe.includes(We))continue;const Qe=Ue[We],Cn=Qe?[0,0,Qe.extent,Qe.extent]:null;ke.setExtent(Cn);for(let An=0,En=Qe.length;An<En;++An){const Sn=readRawFeature(Be,Qe,An),Tn=this.createFeature_(Be,Sn,t);Tn!==null&&je.push(Tn)}}return je}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(Ae,e,t){if(Ae===3){const Oe={keys:[],values:[],features:[]},ke=t.readVarint()+t.pos;t.readFields(layerPBFReader,Oe,ke),Oe.length=Oe.features.length,Oe.length&&(e[Oe.name]=Oe)}}function layerPBFReader(Ae,e,t){if(Ae===15)e.version=t.readVarint();else if(Ae===1)e.name=t.readString();else if(Ae===5)e.extent=t.readVarint();else if(Ae===2)e.features.push(t.pos);else if(Ae===3)e.keys.push(t.readString());else if(Ae===4){let Oe=null;const ke=t.readVarint()+t.pos;for(;t.pos<ke;)Ae=t.readVarint()>>3,Oe=Ae===1?t.readString():Ae===2?t.readFloat():Ae===3?t.readDouble():Ae===4?t.readVarint64():Ae===5?t.readVarint():Ae===6?t.readSVarint():Ae===7?t.readBoolean():null;e.values.push(Oe)}}function featurePBFReader(Ae,e,t){if(Ae==1)e.id=t.readVarint();else if(Ae==2){const Oe=t.readVarint()+t.pos;for(;t.pos<Oe;){const ke=e.layer.keys[t.readVarint()],Be=e.layer.values[t.readVarint()];e.properties[ke]=Be}}else Ae==3?e.type=t.readVarint():Ae==4&&(e.geometry=t.pos)}function readRawFeature(Ae,e,t){Ae.pos=e.features[t];const Oe=Ae.readVarint()+Ae.pos,ke={layer:e,type:0,properties:{}};return Ae.readFields(featurePBFReader,ke,Oe),ke}function getGeometryType(Ae,e){let t;return Ae===1?t=e===1?"Point":"MultiPoint":Ae===2?t=e===1?"LineString":"MultiLineString":Ae===3&&(t="Polygon"),t}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,Oe=e.coordinateToPixelTransform,ke=e.pixelToCoordinateTransform;compose(Oe,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(ke,Oe)}forEachFeatureAtCoordinate(e,t,Oe,ke,Be,Ue,je,We){let Qe;const Cn=t.viewState;function An(oi,ci,Pi,Ai){return Be.call(Ue,ci,oi?Pi:null,Ai)}const En=Cn.projection,Sn=wrapX$1(e.slice(),En),Tn=[[0,0]];if(En.canWrapX()&&ke){const oi=En.getExtent(),ci=getWidth(oi);Tn.push([-ci,0],[ci,0])}const Dn=t.layerStatesArray,ti=Dn.length,ni=[],ii=[];for(let oi=0;oi<Tn.length;oi++)for(let ci=ti-1;ci>=0;--ci){const Pi=Dn[ci],Ai=Pi.layer;if(Ai.hasRenderer()&&inView(Pi,Cn)&&je.call(We,Ai)){const fi=Ai.getRenderer(),Oi=Ai.getSource();if(fi&&Oi){const Ni=Oi.getWrapX()?Sn:e,ui=An.bind(null,Pi.managed);ii[0]=Ni[0]+Tn[oi][0],ii[1]=Ni[1]+Tn[oi][1],Qe=fi.forEachFeatureAtCoordinate(ii,t,Oe,ui,ni)}if(Qe)return Qe}}if(ni.length===0)return;const si=1/ni.length;return ni.forEach((oi,ci)=>oi.distanceSq+=ci*si),ni.sort((oi,ci)=>oi.distanceSq-ci.distanceSq),ni.some(oi=>Qe=oi.callback(oi.feature,oi.layer,oi.geometry)),Qe}hasFeatureAtCoordinate(e,t,Oe,ke,Be,Ue){return this.forEachFeatureAtCoordinate(e,t,Oe,ke,TRUE,this,Be,Ue)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(Ae,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const Oe=e.getViewport();Oe.insertBefore(this.element_,Oe.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const Oe=this.getMap();if(Oe.hasListener(e)){const ke=new RenderEvent(e,void 0,t);Oe.dispatchEvent(ke)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort((je,We)=>je.zIndex-We.zIndex);t.some(je=>je.layer instanceof BaseVectorLayer&&je.layer.getDeclutter())&&(e.declutter={});const ke=e.viewState;this.children_.length=0;const Be=[];let Ue=null;for(let je=0,We=t.length;je<We;++je){const Qe=t[je];e.layerIndex=je;const Cn=Qe.layer,An=Cn.getSourceState();if(!inView(Qe,ke)||An!="ready"&&An!="undefined"){Cn.unrender();continue}const En=Cn.render(e,Ue);En&&(En!==Ue&&(this.children_.push(En),Ue=En),Be.push(Qe))}this.declutter(e,Be),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let Oe=t.length-1;Oe>=0;--Oe){const ke=t[Oe],Be=ke.layer;Be.getDeclutter()&&Be.renderDeclutter(e,ke)}t.forEach(Oe=>Oe.layer.renderDeferred(e))}}}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let Oe=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),Oe?Array.isArray(Oe)?Oe=new Collection(Oe.slice(),{unique:!0}):assert(typeof Oe.getArray=="function","Expected `layers` to be an array or a `Collection`"):Oe=new Collection(void 0,{unique:!0}),this.setLayers(Oe)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const Oe in this.listenerKeys_)this.listenerKeys_[Oe].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let Oe=0,ke=t.length;Oe<ke;Oe++){const Be=t[Oe];this.registerLayerListeners_(Be),this.dispatchEvent(new GroupEvent("addlayer",Be))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,Oe=getUid(t);this.listenerKeys_[Oe].forEach(unlistenByKey),delete this.listenerKeys_[Oe],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const Oe=t.getArray();for(let ke=0,Be=Oe.length;ke<Be;++ke)this.dispatchEvent(new GroupEvent("removelayer",Oe[ke]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],Oe=t.length;this.getLayers().forEach(function(Ue){Ue.getLayerStatesArray(t)});const ke=this.getLayerState();let Be=ke.zIndex;!e&&ke.zIndex===void 0&&(Be=0);for(let Ue=Oe,je=t.length;Ue<je;Ue++){const We=t[Ue];We.opacity*=ke.opacity,We.visible=We.visible&&ke.visible,We.maxResolution=Math.min(We.maxResolution,ke.maxResolution),We.minResolution=Math.max(We.minResolution,ke.minResolution),We.minZoom=Math.max(We.minZoom,ke.minZoom),We.maxZoom=Math.min(We.maxZoom,ke.maxZoom),ke.extent!==void 0&&(We.extent!==void 0?We.extent=getIntersection(We.extent,ke.extent):We.extent=ke.extent),We.zIndex===void 0&&(We.zIndex=Be)}return t}getSourceState(){return"ready"}}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const Oe=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=Oe,this.pointerdownListenerKey_=listen(Oe,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(Oe,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const Oe=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(Oe)},250)}updateActivePointers_(e){const t=e,Oe=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[Oe];for(const ke in this.trackedTouches_)if(this.trackedTouches_[ke].target!==t.target){delete this.trackedTouches_[ke];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[Oe]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const Oe=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(Oe,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(Oe,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==Oe&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,Oe=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const ke=this.keyFunction_(Oe);return delete this.queuedElements_[ke],Oe}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,Oe=this.priorities_,ke=t.length,Be=t[e],Ue=Oe[e],je=e;for(;e<ke>>1;){const We=this.getLeftChildIndex_(e),Qe=this.getRightChildIndex_(e),Cn=Qe<ke&&Oe[Qe]<Oe[We]?Qe:We;t[e]=t[Cn],Oe[e]=Oe[Cn],e=Cn}t[e]=Be,Oe[e]=Ue,this.siftDown_(je,e)}siftDown_(e,t){const Oe=this.elements_,ke=this.priorities_,Be=Oe[t],Ue=ke[t];for(;t>e;){const je=this.getParentIndex_(t);if(ke[je]>Ue)Oe[t]=Oe[je],ke[t]=ke[je],t=je;else break}Oe[t]=Be,ke[t]=Ue}reprioritize(){const e=this.priorityFunction_,t=this.elements_,Oe=this.priorities_;let ke=0;const Be=t.length;let Ue,je,We;for(je=0;je<Be;++je)Ue=t[je],We=e(Ue),We==DROP?delete this.queuedElements_[this.keyFunction_(Ue)]:(Oe[ke]=We,t[ke++]=Ue);t.length=ke,Oe.length=ke,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,t){super(function(Oe){return e.apply(null,Oe)},function(Oe){return Oe[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,Oe=t.getState();if(Oe===TileState.LOADED||Oe===TileState.ERROR||Oe===TileState.EMPTY){Oe!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const ke=t.getKey();ke in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[ke],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let Oe=0;for(;this.tilesLoading_<e&&Oe<t&&this.getCount()>0;){const ke=this.dequeue()[0],Be=ke.getKey();ke.getState()===TileState.IDLE&&!(Be in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Be]=!0,++this.tilesLoading_,++Oe,ke.load())}}}function getTilePriority(Ae,e,t,Oe,ke){if(!Ae||!(t in Ae.wantedTiles)||!Ae.wantedTiles[t][e.getKey()])return DROP;const Be=Ae.viewState.center,Ue=Oe[0]-Be[0],je=Oe[1]-Be[1];return 65536*Math.log(ke)+Math.sqrt(Ue*Ue+je*je)/ke}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",Oe=e.tipLabel!==void 0?e.tipLabel:"Attributions",ke=e.expandClassName!==void 0?e.expandClassName:t+"-expand",Be=e.collapseLabel!==void 0?e.collapseLabel:"›",Ue=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof Be=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Be,this.collapseLabel_.className=Ue):this.collapseLabel_=Be;const je=e.label!==void 0?e.label:"i";typeof je=="string"?(this.label_=document.createElement("span"),this.label_.textContent=je,this.label_.className=ke):this.label_=je;const We=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=Oe,this.toggleButton_.appendChild(We),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Qe=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),Cn=this.element;Cn.className=Qe,Cn.appendChild(this.toggleButton_),Cn.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),Oe=new Set(t.flatMap(ke=>ke.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(ke=>Oe.add(ke)):Oe.add(this.attributions_)),!this.overrideCollapsible_){const ke=!t.some(Be=>{var Ue;return((Ue=Be.getSource())==null?void 0:Ue.getAttributionsCollapsible())===!1});this.setCollapsible(ke)}return Array.from(Oe)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(ke=>toPromise(()=>ke))),Oe=t.length>0;if(this.renderedVisible_!=Oe&&(this.element.style.display=Oe?"":"none",this.renderedVisible_=Oe),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let ke=0,Be=t.length;ke<Be;++ke){const Ue=document.createElement("li");Ue.innerHTML=t[ke],this.ulElement_.appendChild(Ue)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",Oe=e.label!==void 0?e.label:"⇧",ke=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof Oe=="string"?(this.label_=document.createElement("span"),this.label_.className=ke,this.label_.textContent=Oe):(this.label_=Oe,this.label_.classList.add(ke));const Be=e.tipLabel?e.tipLabel:"Reset rotation",Ue=document.createElement("button");Ue.className=t+"-reset",Ue.setAttribute("type","button"),Ue.title=Be,Ue.appendChild(this.label_),Ue.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const je=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,We=this.element;We.className=je,We.appendChild(Ue),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const Oe=t.getRotation();Oe!==void 0&&(this.duration_>0&&Oe%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const Oe=t.viewState.rotation;if(Oe!=this.rotation_){const ke="rotate("+Oe+"rad)";if(this.autoHide_){const Be=this.element.classList.contains(CLASS_HIDDEN);!Be&&Oe===0?this.element.classList.add(CLASS_HIDDEN):Be&&Oe!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=ke}this.rotation_=Oe}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",Oe=e.delta!==void 0?e.delta:1,ke=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",Be=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",Ue=e.zoomInLabel!==void 0?e.zoomInLabel:"+",je=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",We=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",Qe=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",Cn=document.createElement("button");Cn.className=ke,Cn.setAttribute("type","button"),Cn.title=We,Cn.appendChild(typeof Ue=="string"?document.createTextNode(Ue):Ue),Cn.addEventListener(EventType.CLICK,this.handleClick_.bind(this,Oe),!1);const An=document.createElement("button");An.className=Be,An.setAttribute("type","button"),An.title=Qe,An.appendChild(typeof je=="string"?document.createTextNode(je):je),An.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-Oe),!1);const En=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Sn=this.element;Sn.className=En,Sn.appendChild(Cn),Sn.appendChild(An),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const Oe=this.getMap().getView();if(!Oe)return;const ke=Oe.getZoom();if(ke!==void 0){const Be=Oe.getConstrainedZoom(ke+e);this.duration_>0?(Oe.getAnimating()&&Oe.cancelAnimations(),Oe.animate({zoom:Be,duration:this.duration_,easing:easeOut})):Oe.setZoom(Be)}}}function defaults$1(Ae){Ae=Ae||{};const e=new Collection;return(Ae.zoom!==void 0?Ae.zoom:!0)&&e.push(new Zoom(Ae.zoomOptions)),(Ae.rotate!==void 0?Ae.rotate:!0)&&e.push(new Rotate(Ae.rotateOptions)),(Ae.attribution!==void 0?Ae.attribution:!0)&&e.push(new Attribution(Ae.attributionOptions)),e}function removeLayerMapProperty(Ae){if(Ae instanceof Layer$1){Ae.setMapInternal(null);return}Ae instanceof LayerGroup&&Ae.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(Ae,e){if(Ae instanceof Layer$1){Ae.setMapInternal(e);return}if(Ae instanceof LayerGroup){const t=Ae.getLayers().getArray();for(let Oe=0,ke=t.length;Oe<ke;++Oe)setLayerMapProperty(t[Oe],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create$1(),this.pixelToCoordinateTransform_=create$1(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$1(),this.interactions=t.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const Oe=this;e.view&&!(e.view instanceof View)&&e.view.then(function(ke){Oe.setView(new View(ke))}),this.controls.addEventListener(CollectionEventType.ADD,ke=>{ke.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,ke=>{ke.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,ke=>{ke.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,ke=>{ke.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,ke=>{this.addOverlayInternal_(ke.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,ke=>{const Be=ke.element.getId();Be!==void 0&&delete this.overlayIdIndex_[Be.toString()],ke.element.setMap(null)}),this.controls.forEach(ke=>{ke.setMap(this)}),this.interactions.forEach(ke=>{ke.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,Oe){if(!this.frameState_||!this.renderer_)return;const ke=this.getCoordinateFromPixelInternal(e);Oe=Oe!==void 0?Oe:{};const Be=Oe.hitTolerance!==void 0?Oe.hitTolerance:0,Ue=Oe.layerFilter!==void 0?Oe.layerFilter:TRUE,je=Oe.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(ke,this.frameState_,Be,je,t,null,Ue,null)}getFeaturesAtPixel(e,t){const Oe=[];return this.forEachFeatureAtPixel(e,function(ke){Oe.push(ke)},t),Oe}getAllLayers(){const e=[];function t(Oe){Oe.forEach(function(ke){ke instanceof LayerGroup?t(ke.getLayers()):e.push(ke)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const Oe=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const ke=t.layerFilter!==void 0?t.layerFilter:TRUE,Be=t.hitTolerance!==void 0?t.hitTolerance:0,Ue=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(Oe,this.frameState_,Be,Ue,ke,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const Oe=this.viewport_.getBoundingClientRect(),ke=this.getSize(),Be=Oe.width/ke[0],Ue=Oe.height/ke[1],je="changedTouches"in e?e.changedTouches[0]:e;return[(je.clientX-Oe.left)/Be,(je.clientY-Oe.top)/Ue]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const Oe=t.getLayers();Oe.clear(),Oe.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];if(!ke.visible)continue;const Be=ke.layer.getRenderer();if(Be&&!Be.ready)return!0;const Ue=ke.layer.getSource();if(Ue&&Ue.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,Oe,ke){return getTilePriority(this.frameState_,e,t,Oe,ke)}handleBrowserEvent(e,t){t=t||e.type;const Oe=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(Oe)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,Oe=t.type;if(Oe===PointerEventType.POINTERDOWN||Oe===EventType.WHEEL||Oe===EventType.KEYDOWN){const ke=this.getOwnerDocument(),Be=this.viewport_.getRootNode?this.viewport_.getRootNode():ke,Ue=t.target,je=Be instanceof ShadowRoot?Be.host===Ue?Be.host.ownerDocument:Be:Be===ke?ke.documentElement:Be;if(this.overlayContainerStopEvent_.contains(Ue)||!je.contains(Ue))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const ke=this.getInteractions().getArray().slice();for(let Be=ke.length-1;Be>=0;Be--){const Ue=ke[Be];if(Ue.getMap()!==this||!Ue.getActive()||!this.getTargetElement())continue;if(!Ue.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let ke=this.maxTilesLoading_,Be=ke;if(e){const Ue=e.viewHints;if(Ue[ViewHint.ANIMATING]||Ue[ViewHint.INTERACTING]){const je=Date.now()-e.time>8;ke=je?0:8,Be=je?0:2}}t.getTilesLoading()<ke&&(t.reprioritize(),t.loadMoreTiles(ke,Be))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const Oe=this.postRenderFunctions_;if(e)for(let ke=0,Be=Oe.length;ke<Be;++ke)Oe[ke](this,e);Oe.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let Oe=0,ke=this.targetChangeHandlerKeys_.length;Oe<ke;++Oe)unlistenByKey(this.targetChangeHandlerKeys_[Oe]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const Oe=this.targetElement_.getRootNode();Oe instanceof ShadowRoot&&this.resizeObserver_.unobserve(Oe.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Be in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Be],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let Oe;if(this.keyboardEventTarget_)Oe=this.keyboardEventTarget_;else{const Be=t.getRootNode();Oe=Be instanceof ShadowRoot?Be.host:t}this.targetChangeHandlerKeys_=[listen(Oe,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(Oe,EventType.KEYPRESS,this.handleBrowserEvent,this)];const ke=t.getRootNode();ke instanceof ShadowRoot&&this.resizeObserver_.observe(ke.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t].layer;ke.hasRenderer()&&ke.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),Oe=this.getView(),ke=this.frameState_;let Be=null;if(t!==void 0&&hasArea(t)&&Oe&&Oe.isDef()){const Ue=Oe.getHints(this.frameState_?this.frameState_.viewHints:void 0),je=Oe.getState();if(Be={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(je.center,je.resolution,je.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:je,viewHints:Ue,wantedTiles:{},mapId:getUid(this),renderTargets:{}},je.nextCenter&&je.nextResolution){const We=isNaN(je.nextRotation)?je.rotation:je.nextRotation;Be.nextExtent=getForViewAndSize(je.nextCenter,je.nextResolution,We,t)}}this.frameState_=Be,this.renderer_.renderFrame(Be),Be&&(Be.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Be.postRenderFunctions),ke&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Be.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,ke)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Be.viewHints[ViewHint.ANIMATING]&&!Be.viewHints[ViewHint.INTERACTING]&&!equals$1(Be.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Be)),clone$1(Be.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Be)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(Oe){t.setView(new View(Oe))})}updateSize(){const e=this.getTargetElement();let t;if(e){const ke=getComputedStyle(e),Be=e.offsetWidth-parseFloat(ke.borderLeftWidth)-parseFloat(ke.paddingLeft)-parseFloat(ke.paddingRight)-parseFloat(ke.borderRightWidth),Ue=e.offsetHeight-parseFloat(ke.borderTopWidth)-parseFloat(ke.paddingTop)-parseFloat(ke.paddingBottom)-parseFloat(ke.borderBottomWidth);!isNaN(Be)&&!isNaN(Ue)&&(t=[Math.max(0,Be),Math.max(0,Ue)],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const Oe=this.getSize();t&&(!Oe||!equals$2(t,Oe))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(Ae){let e=null;Ae.keyboardEventTarget!==void 0&&(e=typeof Ae.keyboardEventTarget=="string"?document.getElementById(Ae.keyboardEventTarget):Ae.keyboardEventTarget);const t={},Oe=Ae.layers&&typeof Ae.layers.getLayers=="function"?Ae.layers:new LayerGroup({layers:Ae.layers});t[MapProperty.LAYERGROUP]=Oe,t[MapProperty.TARGET]=Ae.target,t[MapProperty.VIEW]=Ae.view instanceof View?Ae.view:new View;let ke;Ae.controls!==void 0&&(Array.isArray(Ae.controls)?ke=new Collection(Ae.controls.slice()):(assert(typeof Ae.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),ke=Ae.controls));let Be;Ae.interactions!==void 0&&(Array.isArray(Ae.interactions)?Be=new Collection(Ae.interactions.slice()):(assert(typeof Ae.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Be=Ae.interactions));let Ue;return Ae.overlays!==void 0?Array.isArray(Ae.overlays)?Ue=new Collection(Ae.overlays.slice()):(assert(typeof Ae.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),Ue=Ae.overlays):Ue=new Collection,{controls:ke,interactions:Be,keyboardEventTarget:e,overlays:Ue,values:t}}function getDefaultExportFromCjs(Ae){return Ae&&Ae.__esModule&&Object.prototype.hasOwnProperty.call(Ae,"default")?Ae.default:Ae}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(Ae){return Ae=Math.round(Ae),Ae<0?0:Ae>255?255:Ae}function clamp_css_float(Ae){return Ae<0?0:Ae>1?1:Ae}function parse_css_int(Ae){return Ae[Ae.length-1]==="%"?clamp_css_byte(parseFloat(Ae)/100*255):clamp_css_byte(parseInt(Ae))}function parse_css_float(Ae){return Ae[Ae.length-1]==="%"?clamp_css_float(parseFloat(Ae)/100):clamp_css_float(parseFloat(Ae))}function css_hue_to_rgb(Ae,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?Ae+(e-Ae)*t*6:t*2<1?e:t*3<2?Ae+(e-Ae)*(2/3-t)*6:Ae}function parseCSSColor(Ae){var e=Ae.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var Oe=e.indexOf("("),ke=e.indexOf(")");if(Oe!==-1&&ke+1===e.length){var Be=e.substr(0,Oe),Ue=e.substr(Oe+1,ke-(Oe+1)).split(","),je=1;switch(Be){case"rgba":if(Ue.length!==4)return null;je=parse_css_float(Ue.pop());case"rgb":return Ue.length!==3?null:[parse_css_int(Ue[0]),parse_css_int(Ue[1]),parse_css_int(Ue[2]),je];case"hsla":if(Ue.length!==4)return null;je=parse_css_float(Ue.pop());case"hsl":if(Ue.length!==3)return null;var We=(parseFloat(Ue[0])%360+360)%360/360,Qe=parse_css_float(Ue[1]),Cn=parse_css_float(Ue[2]),An=Cn<=.5?Cn*(Qe+1):Cn+Qe-Cn*Qe,En=Cn*2-An;return[clamp_css_byte(css_hue_to_rgb(En,An,We+1/3)*255),clamp_css_byte(css_hue_to_rgb(En,An,We)*255),clamp_css_byte(css_hue_to_rgb(En,An,We-1/3)*255),je];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,t,Oe,ke=1){this.r=e,this.g=t,this.b=Oe,this.a=ke}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCSSColor_1(e);if(t)return new Color(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,Oe,ke]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(Oe)},${ke})`}toArray(){const{r:e,g:t,b:Oe,a:ke}=this;return ke===0?[0,0,0,0]:[e*255/ke,t*255/ke,Oe*255/ke,ke]}toArray01(){const{r:e,g:t,b:Oe,a:ke}=this;return ke===0?[0,0,0,0]:[e/ke,t/ke,Oe/ke,ke]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:Oe,a:ke}=this;return[e,t,Oe,ke]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(Ae){return typeof Ae=="object"?["literal",Ae]:Ae}function convertFunction(Ae,e){let t=Ae.stops;if(!t)return convertIdentityFunction(Ae,e);const Oe=t&&typeof t[0][0]=="object",ke=Oe||Ae.property!==void 0,Be=Oe||!ke;return t=t.map(Ue=>!ke&&e.tokens&&typeof Ue[1]=="string"?[Ue[0],convertTokenString(Ue[1])]:[Ue[0],convertLiteral(Ue[1])]),Oe?convertZoomAndPropertyFunction(Ae,e,t):Be?convertZoomFunction(Ae,e,t):convertPropertyFunction(Ae,e,t)}function convertIdentityFunction(Ae,e){const t=["get",Ae.property];if(Ae.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,Ae.default];{const Oe=[e.type==="color"?"to-color":e.type,t,convertLiteral(Ae.default)];return e.type==="array"&&Oe.splice(1,0,e.value,e.length||null),Oe}}function getInterpolateOperator(Ae){switch(Ae.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(Ae,e,t){const Oe={},ke={},Be=[];for(let je=0;je<t.length;je++){const We=t[je],Qe=We[0].zoom;Oe[Qe]===void 0&&(Oe[Qe]={zoom:Qe,type:Ae.type,property:Ae.property,default:Ae.default},ke[Qe]=[],Be.push(Qe)),ke[Qe].push([We[0].value,We[1]])}if(getFunctionType({},e)==="exponential"){const je=[getInterpolateOperator(Ae),["linear"],["zoom"]];for(const We of Be){const Qe=convertPropertyFunction(Oe[We],e,ke[We]);appendStopPair(je,We,Qe,!1)}return je}else{const je=["step",["zoom"]];for(const We of Be){const Qe=convertPropertyFunction(Oe[We],e,ke[We]);appendStopPair(je,We,Qe,!0)}return fixupDegenerateStepCurve(je),je}}function coalesce(Ae,e){if(Ae!==void 0)return Ae;if(e!==void 0)return e}function getFallback(Ae,e){const t=convertLiteral(coalesce(Ae.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(Ae,e,t){const Oe=getFunctionType(Ae,e),ke=["get",Ae.property];if(Oe==="categorical"&&typeof t[0][0]=="boolean"){const Be=["case"];for(const Ue of t)Be.push(["==",ke,Ue[0]],Ue[1]);return Be.push(getFallback(Ae,e)),Be}else if(Oe==="categorical"){const Be=["match",ke];for(const Ue of t)appendStopPair(Be,Ue[0],Ue[1],!1);return Be.push(getFallback(Ae,e)),Be}else if(Oe==="interval"){const Be=["step",["number",ke]];for(const Ue of t)appendStopPair(Be,Ue[0],Ue[1],!0);return fixupDegenerateStepCurve(Be),Ae.default===void 0?Be:["case",["==",["typeof",ke],"number"],Be,convertLiteral(Ae.default)]}else if(Oe==="exponential"){const Be=Ae.base!==void 0?Ae.base:1,Ue=[getInterpolateOperator(Ae),Be===1?["linear"]:["exponential",Be],["number",ke]];for(const je of t)appendStopPair(Ue,je[0],je[1],!1);return Ae.default===void 0?Ue:["case",["==",["typeof",ke],"number"],Ue,convertLiteral(Ae.default)]}else throw new Error(`Unknown property function type ${Oe}`)}function convertZoomFunction(Ae,e,t,Oe=["zoom"]){const ke=getFunctionType(Ae,e);let Be,Ue=!1;if(ke==="interval")Be=["step",Oe],Ue=!0;else if(ke==="exponential"){const je=Ae.base!==void 0?Ae.base:1;Be=[getInterpolateOperator(Ae),je===1?["linear"]:["exponential",je],Oe]}else throw new Error(`Unknown zoom function type "${ke}"`);for(const je of t)appendStopPair(Be,je[0],je[1],Ue);return fixupDegenerateStepCurve(Be),Be}function fixupDegenerateStepCurve(Ae){Ae[0]==="step"&&Ae.length===3&&(Ae.push(0),Ae.push(Ae[3]))}function appendStopPair(Ae,e,t,Oe){Ae.length>3&&e===Ae[Ae.length-2]||(Oe&&Ae.length===2||Ae.push(e),Ae.push(t))}function getFunctionType(Ae,e){return Ae.type?Ae.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(Ae){const e=["concat"],t=/{([^{}]+)}/g;let Oe=0;for(let ke=t.exec(Ae);ke!==null;ke=t.exec(Ae)){const Be=Ae.slice(Oe,t.lastIndex-ke[0].length);Oe=t.lastIndex,Be.length>0&&e.push(Be),e.push(["get",ke[1]])}if(e.length===1)return Ae;if(Oe<Ae.length)e.push(Ae.slice(Oe));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[Oe,ke]of t)this.bindings[Oe]=ke}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(Ae,e){return{kind:"array",itemType:Ae,N:e}}function toString$1(Ae){if(Ae.kind==="array"){const e=toString$1(Ae.itemType);return typeof Ae.N=="number"?`array<${e}, ${Ae.N}>`:Ae.itemType.kind==="value"?"array":`array<${e}>`}else return Ae.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(Ae,e){if(e.kind==="error")return null;if(Ae.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(Ae.itemType,e.itemType))&&(typeof Ae.N!="number"||Ae.N===e.N))return null}else{if(Ae.kind===e.kind)return null;if(Ae.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${toString$1(Ae)} but found ${toString$1(e)} instead.`}function isValidType(Ae,e){return e.some(t=>t.kind===Ae.kind)}function isValidNativeType(Ae,e){return e.some(t=>t==="null"?Ae===null:t==="array"?Array.isArray(Ae):t==="object"?Ae&&!Array.isArray(Ae)&&typeof Ae=="object":t===typeof Ae)}class Collator{constructor(e,t,Oe){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=Oe,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,t,Oe,ke,Be){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=Oe,this.fontStack=ke,this.textColor=Be}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const Oe={};t.fontStack&&(Oe["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(Oe["font-scale"]=t.scale),t.textColor&&(Oe["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(Oe)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(Ae,e,t,Oe){return typeof Ae=="number"&&Ae>=0&&Ae<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof Oe>"u"||typeof Oe=="number"&&Oe>=0&&Oe<=1?null:`Invalid rgba value [${[Ae,e,t,Oe].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof Oe=="number"?[Ae,e,t,Oe]:[Ae,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(Ae){if(Ae===null)return!0;if(typeof Ae=="string")return!0;if(typeof Ae=="boolean")return!0;if(typeof Ae=="number")return!0;if(Ae instanceof Color$1)return!0;if(Ae instanceof Collator)return!0;if(Ae instanceof Formatted)return!0;if(Ae instanceof ResolvedImage)return!0;if(Array.isArray(Ae)){for(const e of Ae)if(!isValue(e))return!1;return!0}else if(typeof Ae=="object"){for(const e in Ae)if(!isValue(Ae[e]))return!1;return!0}else return!1}function typeOf(Ae){if(Ae===null)return NullType;if(typeof Ae=="string")return StringType;if(typeof Ae=="boolean")return BooleanType;if(typeof Ae=="number")return NumberType;if(Ae instanceof Color$1)return ColorType;if(Ae instanceof Collator)return CollatorType;if(Ae instanceof Formatted)return FormattedType;if(Ae instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(Ae)){const e=Ae.length;let t;for(const Oe of Ae){const ke=typeOf(Oe);if(!t)t=ke;else{if(t===ke)continue;t=ValueType;break}}return array$1(t||ValueType,e)}else return ObjectType}function toString(Ae){const e=typeof Ae;return Ae===null?"":e==="string"||e==="number"||e==="boolean"?String(Ae):Ae instanceof Color$1||Ae instanceof Formatted||Ae instanceof ResolvedImage?Ae.toString():JSON.stringify(Ae)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const Oe=e[1];let ke=typeOf(Oe);const Be=t.expectedType;return ke.kind==="array"&&ke.N===0&&Be&&Be.kind==="array"&&(typeof Be.N!="number"||Be.N===0)&&(ke=Be),new Literal(ke,Oe)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let Oe=1,ke;const Be=e[0];if(Be==="array"){let je;if(e.length>2){const Qe=e[1];if(typeof Qe!="string"||!(Qe in types$2)||Qe==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);je=types$2[Qe],Oe++}else je=ValueType;let We;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);We=e[2],Oe++}ke=array$1(je,We)}else ke=types$2[Be];const Ue=[];for(;Oe<e.length;Oe++){const je=t.parse(e[Oe],Oe,ValueType);if(!je)return null;Ue.push(je)}return new Assertion(ke,Ue)}evaluate(e){for(let t=0;t<this.args.length;t++){const Oe=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(Oe))){if(t===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(Oe))} instead.`)}else return Oe}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const Oe=e.itemType;if(Oe.kind==="string"||Oe.kind==="number"||Oe.kind==="boolean"){t.push(Oe.kind);const ke=e.N;(typeof ke=="number"||this.args.length>1)&&t.push(ke)}}return t.concat(this.args.map(Oe=>Oe.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const Oe=e[1];if(!Array.isArray(Oe)&&typeof Oe=="object")return t.error("First argument must be an image or text section.");const ke=[];let Be=!1;for(let Ue=1;Ue<=e.length-1;++Ue){const je=e[Ue];if(Be&&typeof je=="object"&&!Array.isArray(je)){Be=!1;let We=null;if(je["font-scale"]&&(We=t.parse(je["font-scale"],1,NumberType),!We))return null;let Qe=null;if(je["text-font"]&&(Qe=t.parse(je["text-font"],1,array$1(StringType)),!Qe))return null;let Cn=null;if(je["text-color"]&&(Cn=t.parse(je["text-color"],1,ColorType),!Cn))return null;const An=ke[ke.length-1];An.scale=We,An.font=Qe,An.textColor=Cn}else{const We=t.parse(e[Ue],1,ValueType);if(!We)return null;const Qe=We.type.kind;if(Qe!=="string"&&Qe!=="value"&&Qe!=="null"&&Qe!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Be=!0,ke.push({content:We,scale:null,font:null,textColor:null})}}return new FormatExpression(ke)}evaluate(e){const t=Oe=>{const ke=Oe.content.evaluate(e);return typeOf(ke)===ResolvedImageType?new FormattedSection("",ke,null,null,null):new FormattedSection(toString(ke),null,Oe.scale?Oe.scale.evaluate(e):null,Oe.font?Oe.font.evaluate(e).join(","):null,Oe.textColor?Oe.textColor.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const Oe={};t.scale&&(Oe["font-scale"]=t.scale.serialize()),t.font&&(Oe["text-font"]=t.font.serialize()),t.textColor&&(Oe["text-color"]=t.textColor.serialize()),e.push(Oe)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const Oe=t.parse(e[1],1,StringType);return Oe?new ImageExpression(Oe):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),Oe=ResolvedImage.fromString(t);return Oe&&e.availableImages&&(Oe.available=e.availableImages.indexOf(t)>-1),Oe}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const Oe=e[0];if((Oe==="to-boolean"||Oe==="to-string")&&e.length!==2)return t.error("Expected one argument.");const ke=types$1[Oe],Be=[];for(let Ue=1;Ue<e.length;Ue++){const je=t.parse(e[Ue],Ue,ValueType);if(!je)return null;Be.push(je)}return new Coercion(ke,Be)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,Oe;for(const ke of this.args){if(t=ke.evaluate(e),Oe=null,t instanceof Color$1)return t;if(typeof t=="string"){const Be=e.parseColor(t);if(Be)return Be}else if(Array.isArray(t)&&(t.length<3||t.length>4?Oe=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:Oe=validateRGBA(t[0],t[1],t[2],t[3]),!Oe))return new Color$1(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError$1(Oe||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const Oe of this.args){if(t=Oe.evaluate(e),t===null)return 0;const ke=Number(t);if(!isNaN(ke))return ke}throw new RuntimeError$1(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:Oe,y:ke}=this.featureTileCoord,Be=Oe*t-e[0],Ue=ke*t-e[1],je=this.featureDistanceData.bearing[0],We=this.featureDistanceData.bearing[1];return je*Be+We*Ue}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color$1.parse(e)),t}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,t,Oe,ke){this.name=e,this.type=t,this._evaluate=Oe,this.args=ke}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const Oe=e[0],ke=CompoundExpression.definitions[Oe];if(!ke)return t.error(`Unknown expression "${Oe}". If you wanted a literal array, use ["literal", [...]].`,0);const Be=Array.isArray(ke)?ke[0]:ke.type,Ue=Array.isArray(ke)?[[ke[1],ke[2]]]:ke.overloads,je=Ue.filter(([Qe])=>!Array.isArray(Qe)||Qe.length===e.length-1);let We=null;for(const[Qe,Cn]of je){We=new ParsingContext$1(t.registry,t.path,null,t.scope);const An=[];let En=!1;for(let Sn=1;Sn<e.length;Sn++){const Tn=e[Sn],Dn=Array.isArray(Qe)?Qe[Sn-1]:Qe.type,ti=We.parse(Tn,1+An.length,Dn);if(!ti){En=!0;break}An.push(ti)}if(!En){if(Array.isArray(Qe)&&Qe.length!==An.length){We.error(`Expected ${Qe.length} arguments, but found ${An.length} instead.`);continue}for(let Sn=0;Sn<An.length;Sn++){const Tn=Array.isArray(Qe)?Qe[Sn]:Qe.type,Dn=An[Sn];We.concat(Sn+1).checkSubtype(Tn,Dn.type)}if(We.errors.length===0)return new CompoundExpression(Oe,Be,Cn,An)}}if(je.length===1)t.errors.push(...We.errors);else{const Cn=(je.length?je:Ue).map(([En])=>stringifySignature(En)).join(" | "),An=[];for(let En=1;En<e.length;En++){const Sn=t.parse(e[En],1+An.length);if(!Sn)return null;An.push(toString$1(Sn.type))}t.error(`Expected arguments of type ${Cn}, but found (${An.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const Oe in t)e[Oe]=CompoundExpression}}function stringifySignature(Ae){return Array.isArray(Ae)?`(${Ae.map(toString$1).join(", ")})`:`(${toString$1(Ae.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,t,Oe){this.type=CollatorType,this.locale=Oe,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const Oe=e[1];if(typeof Oe!="object"||Array.isArray(Oe))return t.error("Collator options argument must be an object.");const ke=t.parse(Oe["case-sensitive"]===void 0?!1:Oe["case-sensitive"],1,BooleanType);if(!ke)return null;const Be=t.parse(Oe["diacritic-sensitive"]===void 0?!1:Oe["diacritic-sensitive"],1,BooleanType);if(!Be)return null;let Ue=null;return Oe.locale&&(Ue=t.parse(Oe.locale,1,StringType),!Ue)?null:new CollatorExpression(ke,Be,Ue)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(Ae,e){Ae[0]=Math.min(Ae[0],e[0]),Ae[1]=Math.min(Ae[1],e[1]),Ae[2]=Math.max(Ae[2],e[0]),Ae[3]=Math.max(Ae[3],e[1])}function mercatorXfromLng(Ae){return(180+Ae)/360}function mercatorYfromLat(Ae){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Ae*Math.PI/360)))/360}function boxWithinBox(Ae,e){return!(Ae[0]<=e[0]||Ae[2]>=e[2]||Ae[1]<=e[1]||Ae[3]>=e[3])}function getTileCoordinates(Ae,e){const t=mercatorXfromLng(Ae[0]),Oe=mercatorYfromLat(Ae[1]),ke=Math.pow(2,e.z);return[Math.round(t*ke*EXTENT),Math.round(Oe*ke*EXTENT)]}function onBoundary(Ae,e,t){const Oe=Ae[0]-e[0],ke=Ae[1]-e[1],Be=Ae[0]-t[0],Ue=Ae[1]-t[1];return Oe*Ue-Be*ke===0&&Oe*Be<=0&&ke*Ue<=0}function rayIntersect(Ae,e,t){return e[1]>Ae[1]!=t[1]>Ae[1]&&Ae[0]<(t[0]-e[0])*(Ae[1]-e[1])/(t[1]-e[1])+e[0]}function pointWithinPolygon(Ae,e){let t=!1;for(let Oe=0,ke=e.length;Oe<ke;Oe++){const Be=e[Oe];for(let Ue=0,je=Be.length;Ue<je-1;Ue++){if(onBoundary(Ae,Be[Ue],Be[Ue+1]))return!1;rayIntersect(Ae,Be[Ue],Be[Ue+1])&&(t=!t)}}return t}function pointWithinPolygons(Ae,e){for(let t=0;t<e.length;t++)if(pointWithinPolygon(Ae,e[t]))return!0;return!1}function perp(Ae,e){return Ae[0]*e[1]-Ae[1]*e[0]}function twoSided(Ae,e,t,Oe){const ke=Ae[0]-t[0],Be=Ae[1]-t[1],Ue=e[0]-t[0],je=e[1]-t[1],We=Oe[0]-t[0],Qe=Oe[1]-t[1],Cn=ke*Qe-We*Be,An=Ue*Qe-We*je;return Cn>0&&An<0||Cn<0&&An>0}function lineIntersectLine(Ae,e,t,Oe){const ke=[e[0]-Ae[0],e[1]-Ae[1]],Be=[Oe[0]-t[0],Oe[1]-t[1]];return perp(Be,ke)===0?!1:!!(twoSided(Ae,e,t,Oe)&&twoSided(t,Oe,Ae,e))}function lineIntersectPolygon(Ae,e,t){for(const Oe of t)for(let ke=0;ke<Oe.length-1;++ke)if(lineIntersectLine(Ae,e,Oe[ke],Oe[ke+1]))return!0;return!1}function lineStringWithinPolygon(Ae,e){for(let t=0;t<Ae.length;++t)if(!pointWithinPolygon(Ae[t],e))return!1;for(let t=0;t<Ae.length-1;++t)if(lineIntersectPolygon(Ae[t],Ae[t+1],e))return!1;return!0}function lineStringWithinPolygons(Ae,e){for(let t=0;t<e.length;t++)if(lineStringWithinPolygon(Ae,e[t]))return!0;return!1}function getTilePolygon(Ae,e,t){const Oe=[];for(let ke=0;ke<Ae.length;ke++){const Be=[];for(let Ue=0;Ue<Ae[ke].length;Ue++){const je=getTileCoordinates(Ae[ke][Ue],t);updateBBox(e,je),Be.push(je)}Oe.push(Be)}return Oe}function getTilePolygons(Ae,e,t){const Oe=[];for(let ke=0;ke<Ae.length;ke++){const Be=getTilePolygon(Ae[ke],e,t);Oe.push(Be)}return Oe}function updatePoint(Ae,e,t,Oe){if(Ae[0]<t[0]||Ae[0]>t[2]){const ke=Oe*.5;let Be=Ae[0]-t[0]>ke?-Oe:t[0]-Ae[0]>ke?Oe:0;Be===0&&(Be=Ae[0]-t[2]>ke?-Oe:t[2]-Ae[0]>ke?Oe:0),Ae[0]+=Be}updateBBox(e,Ae)}function resetBBox(Ae){Ae[0]=Ae[1]=1/0,Ae[2]=Ae[3]=-1/0}function getTilePoints(Ae,e,t,Oe){const ke=Math.pow(2,Oe.z)*EXTENT,Be=[Oe.x*EXTENT,Oe.y*EXTENT],Ue=[];if(!Ae)return Ue;for(const je of Ae)for(const We of je){const Qe=[We.x+Be[0],We.y+Be[1]];updatePoint(Qe,e,t,ke),Ue.push(Qe)}return Ue}function getTileLines(Ae,e,t,Oe){const ke=Math.pow(2,Oe.z)*EXTENT,Be=[Oe.x*EXTENT,Oe.y*EXTENT],Ue=[];if(!Ae)return Ue;for(const je of Ae){const We=[];for(const Qe of je){const Cn=[Qe.x+Be[0],Qe.y+Be[1]];updateBBox(e,Cn),We.push(Cn)}Ue.push(We)}if(e[2]-e[0]<=ke/2){resetBBox(e);for(const je of Ue)for(const We of je)updatePoint(We,e,t,ke)}return Ue}function pointsWithinPolygons(Ae,e){const t=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],ke=Ae.canonicalID();if(!ke)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,Oe,ke),Ue=getTilePoints(Ae.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const je of Ue)if(!pointWithinPolygon(je,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,Oe,ke),Ue=getTilePoints(Ae.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const je of Ue)if(!pointWithinPolygons(je,Be))return!1}return!0}function linesWithinPolygons(Ae,e){const t=[1/0,1/0,-1/0,-1/0],Oe=[1/0,1/0,-1/0,-1/0],ke=Ae.canonicalID();if(!ke)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,Oe,ke),Ue=getTileLines(Ae.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const je of Ue)if(!lineStringWithinPolygon(je,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,Oe,ke),Ue=getTileLines(Ae.geometry(),t,Oe,ke);if(!boxWithinBox(t,Oe))return!1;for(const je of Ue)if(!lineStringWithinPolygons(je,Be))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const Oe=e[1];if(Oe.type==="FeatureCollection")for(let ke=0;ke<Oe.features.length;++ke){const Be=Oe.features[ke].geometry.type;if(Be==="Polygon"||Be==="MultiPolygon")return new Within(Oe,Oe.features[ke].geometry)}else if(Oe.type==="Feature"){const ke=Oe.geometry.type;if(ke==="Polygon"||ke==="MultiPolygon")return new Within(Oe,Oe.geometry)}else if(Oe.type==="Polygon"||Oe.type==="MultiPolygon")return new Within(Oe,Oe)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(Ae){if(Ae instanceof CompoundExpression$1){if(Ae.name==="get"&&Ae.args.length===1)return!1;if(Ae.name==="feature-state")return!1;if(Ae.name==="has"&&Ae.args.length===1)return!1;if(Ae.name==="properties"||Ae.name==="geometry-type"||Ae.name==="id")return!1;if(/^filter-/.test(Ae.name))return!1}if(Ae instanceof Within$1)return!1;let e=!0;return Ae.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(Ae){if(Ae instanceof CompoundExpression$1&&Ae.name==="feature-state")return!1;let e=!0;return Ae.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(Ae,e){if(Ae instanceof CompoundExpression$1&&e.indexOf(Ae.name)>=0)return!1;let t=!0;return Ae.eachChild(Oe=>{t&&!isGlobalPropertyConstant(Oe,e)&&(t=!1)}),t}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const Oe=e[1];return t.scope.has(Oe)?new Var(Oe,t.scope.get(Oe)):t.error(`Unknown variable "${Oe}". Make sure "${Oe}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,t=[],Oe,ke=new Scope$1,Be=[]){this.registry=e,this.path=t,this.key=t.map(Ue=>`[${Ue}]`).join(""),this.scope=ke,this.errors=Be,this.expectedType=Oe}parse(e,t,Oe,ke,Be={}){return t?this.concat(t,Oe,ke)._parse(e,Be):this._parse(e,Be)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function Oe(ke,Be,Ue){return Ue==="assert"?new Assertion$1(Be,[ke]):Ue==="coerce"?new Coercion$1(Be,[ke]):ke}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ke=e[0];if(typeof ke!="string")return this.error(`Expression name must be a string, but found ${typeof ke} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Be=this.registry[ke];if(Be){let Ue=Be.parse(e,this);if(!Ue)return null;if(this.expectedType){const je=this.expectedType,We=Ue.type;if((je.kind==="string"||je.kind==="number"||je.kind==="boolean"||je.kind==="object"||je.kind==="array")&&We.kind==="value")Ue=Oe(Ue,je,t.typeAnnotation||"assert");else if((je.kind==="color"||je.kind==="formatted"||je.kind==="resolvedImage")&&(We.kind==="value"||We.kind==="string"))Ue=Oe(Ue,je,t.typeAnnotation||"coerce");else if(this.checkSubtype(je,We))return null}if(!(Ue instanceof Literal$1)&&Ue.type.kind!=="resolvedImage"&&isConstant(Ue)){const je=new EvaluationContext$1;try{Ue=new Literal$1(Ue.type,Ue.evaluate(je))}catch(We){return this.error(We.message),null}}return Ue}return this.error(`Unknown expression "${ke}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,Oe){const ke=typeof e=="number"?this.path.concat(e):this.path,Be=Oe?this.scope.concat(Oe):this.scope;return new ParsingContext(this.registry,ke,t||null,Be,this.errors)}error(e,...t){const Oe=`${this.key}${t.map(ke=>`[${ke}]`).join("")}`;this.errors.push(new ParsingError$1(Oe,e))}checkSubtype(e,t){const Oe=checkSubtype(e,t);return Oe&&this.error(Oe),Oe}}var ParsingContext$1=ParsingContext;function isConstant(Ae){if(Ae instanceof Var$1)return isConstant(Ae.boundExpression);if(Ae instanceof CompoundExpression$1&&Ae.name==="error")return!1;if(Ae instanceof CollatorExpression)return!1;if(Ae instanceof Within$1)return!1;const e=Ae instanceof Coercion$1||Ae instanceof Assertion$1;let t=!0;return Ae.eachChild(Oe=>{e?t=t&&isConstant(Oe):t=t&&Oe instanceof Literal$1}),t?isFeatureConstant(Ae)&&isGlobalPropertyConstant(Ae,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(Ae,e){const t=Ae.length-1;let Oe=0,ke=t,Be=0,Ue,je;for(;Oe<=ke;)if(Be=Math.floor((Oe+ke)/2),Ue=Ae[Be],je=Ae[Be+1],Ue<=e){if(Be===t||e<je)return Be;Oe=Be+1}else if(Ue>e)ke=Be-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,t,Oe){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[ke,Be]of Oe)this.labels.push(ke),this.outputs.push(Be)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const Oe=t.parse(e[1],1,NumberType);if(!Oe)return null;const ke=[];let Be=null;t.expectedType&&t.expectedType.kind!=="value"&&(Be=t.expectedType);for(let Ue=1;Ue<e.length;Ue+=2){const je=Ue===1?-1/0:e[Ue],We=e[Ue+1],Qe=Ue,Cn=Ue+1;if(typeof je!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Qe);if(ke.length&&ke[ke.length-1][0]>=je)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Qe);const An=t.parse(We,Cn,Be);if(!An)return null;Be=Be||An.type,ke.push([je,An])}return new Step(Be,Oe,ke)}evaluate(e){const t=this.labels,Oe=this.outputs;if(t.length===1)return Oe[0].evaluate(e);const ke=this.input.evaluate(e);if(ke<=t[0])return Oe[0].evaluate(e);const Be=t.length;if(ke>=t[Be-1])return Oe[Be-1].evaluate(e);const Ue=findStopLessThanOrEqualTo(t,ke);return Oe[Ue].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(Ae,e,t,Oe){this.cx=3*Ae,this.bx=3*(t-Ae)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(Oe-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=Ae,this.p1y=Oe,this.p2x=t,this.p2y=Oe}UnitBezier.prototype.sampleCurveX=function(Ae){return((this.ax*Ae+this.bx)*Ae+this.cx)*Ae};UnitBezier.prototype.sampleCurveY=function(Ae){return((this.ay*Ae+this.by)*Ae+this.cy)*Ae};UnitBezier.prototype.sampleCurveDerivativeX=function(Ae){return(3*this.ax*Ae+2*this.bx)*Ae+this.cx};UnitBezier.prototype.solveCurveX=function(Ae,e){typeof e>"u"&&(e=1e-6);var t,Oe,ke,Be,Ue;for(ke=Ae,Ue=0;Ue<8;Ue++){if(Be=this.sampleCurveX(ke)-Ae,Math.abs(Be)<e)return ke;var je=this.sampleCurveDerivativeX(ke);if(Math.abs(je)<1e-6)break;ke=ke-Be/je}if(t=0,Oe=1,ke=Ae,ke<t)return t;if(ke>Oe)return Oe;for(;t<Oe;){if(Be=this.sampleCurveX(ke),Math.abs(Be-Ae)<e)return ke;Ae>Be?t=ke:Oe=ke,ke=(Oe-t)*.5+t}return ke};UnitBezier.prototype.solve=function(Ae,e){return this.sampleCurveY(this.solveCurveX(Ae,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(Ae,e,t){return Ae*(1-t)+e*t}function color(Ae,e,t){return new Color$1(number(Ae.r,e.r,t),number(Ae.g,e.g,t),number(Ae.b,e.b,t),number(Ae.a,e.a,t))}function array(Ae,e,t){return Ae.map((Oe,ke)=>number(Oe,e[ke],t))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(Ae){return Ae>t3?Math.pow(Ae,1/3):Ae/t2+t0}function lab2xyz(Ae){return Ae>t1?Ae*Ae*Ae:t2*(Ae-t0)}function xyz2rgb(Ae){return 255*(Ae<=.0031308?12.92*Ae:1.055*Math.pow(Ae,1/2.4)-.055)}function rgb2xyz(Ae){return Ae/=255,Ae<=.04045?Ae/12.92:Math.pow((Ae+.055)/1.055,2.4)}function rgbToLab(Ae){const e=rgb2xyz(Ae.r),t=rgb2xyz(Ae.g),Oe=rgb2xyz(Ae.b),ke=xyz2lab((.4124564*e+.3575761*t+.1804375*Oe)/Xn),Be=xyz2lab((.2126729*e+.7151522*t+.072175*Oe)/Yn),Ue=xyz2lab((.0193339*e+.119192*t+.9503041*Oe)/Zn);return{l:116*Be-16,a:500*(ke-Be),b:200*(Be-Ue),alpha:Ae.a}}function labToRgb(Ae){let e=(Ae.l+16)/116,t=isNaN(Ae.a)?e:e+Ae.a/500,Oe=isNaN(Ae.b)?e:e-Ae.b/200;return e=Yn*lab2xyz(e),t=Xn*lab2xyz(t),Oe=Zn*lab2xyz(Oe),new Color$1(xyz2rgb(3.2404542*t-1.5371385*e-.4985314*Oe),xyz2rgb(-.969266*t+1.8760108*e+.041556*Oe),xyz2rgb(.0556434*t-.2040259*e+1.0572252*Oe),Ae.alpha)}function interpolateLab(Ae,e,t){return{l:number(Ae.l,e.l,t),a:number(Ae.a,e.a,t),b:number(Ae.b,e.b,t),alpha:number(Ae.alpha,e.alpha,t)}}function rgbToHcl(Ae){const{l:e,a:t,b:Oe}=rgbToLab(Ae),ke=Math.atan2(Oe,t)*rad2deg;return{h:ke<0?ke+360:ke,c:Math.sqrt(t*t+Oe*Oe),l:e,alpha:Ae.a}}function hclToRgb(Ae){const e=Ae.h*deg2rad$1,t=Ae.c,Oe=Ae.l;return labToRgb({l:Oe,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:Ae.alpha})}function interpolateHue(Ae,e,t){const Oe=e-Ae;return Ae+t*(Oe>180||Oe<-180?Oe-360*Math.round(Oe/360):Oe)}function interpolateHcl(Ae,e,t){return{h:interpolateHue(Ae.h,e.h,t),c:number(Ae.c,e.c,t),l:number(Ae.l,e.l,t),alpha:number(Ae.alpha,e.alpha,t)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,t,Oe,ke,Be){this.type=e,this.operator=t,this.interpolation=Oe,this.input=ke,this.labels=[],this.outputs=[];for(const[Ue,je]of Be)this.labels.push(Ue),this.outputs.push(je)}static interpolationFactor(e,t,Oe,ke){let Be=0;if(e.name==="exponential")Be=exponentialInterpolation(t,e.base,Oe,ke);else if(e.name==="linear")Be=exponentialInterpolation(t,1,Oe,ke);else if(e.name==="cubic-bezier"){const Ue=e.controlPoints;Be=new UnitBezier$1(Ue[0],Ue[1],Ue[2],Ue[3]).solve(exponentialInterpolation(t,1,Oe,ke))}return Be}static parse(e,t){let[Oe,ke,Be,...Ue]=e;if(!Array.isArray(ke)||ke.length===0)return t.error("Expected an interpolation type expression.",1);if(ke[0]==="linear")ke={name:"linear"};else if(ke[0]==="exponential"){const Qe=ke[1];if(typeof Qe!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);ke={name:"exponential",base:Qe}}else if(ke[0]==="cubic-bezier"){const Qe=ke.slice(1);if(Qe.length!==4||Qe.some(Cn=>typeof Cn!="number"||Cn<0||Cn>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ke={name:"cubic-bezier",controlPoints:Qe}}else return t.error(`Unknown interpolation type ${String(ke[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(Be=t.parse(Be,2,NumberType),!Be)return null;const je=[];let We=null;Oe==="interpolate-hcl"||Oe==="interpolate-lab"?We=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(We=t.expectedType);for(let Qe=0;Qe<Ue.length;Qe+=2){const Cn=Ue[Qe],An=Ue[Qe+1],En=Qe+3,Sn=Qe+4;if(typeof Cn!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',En);if(je.length&&je[je.length-1][0]>=Cn)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',En);const Tn=t.parse(An,Sn,We);if(!Tn)return null;We=We||Tn.type,je.push([Cn,Tn])}return We.kind!=="number"&&We.kind!=="color"&&!(We.kind==="array"&&We.itemType.kind==="number"&&typeof We.N=="number")?t.error(`Type ${toString$1(We)} is not interpolatable.`):new Interpolate(We,Oe,ke,Be,je)}evaluate(e){const t=this.labels,Oe=this.outputs;if(t.length===1)return Oe[0].evaluate(e);const ke=this.input.evaluate(e);if(ke<=t[0])return Oe[0].evaluate(e);const Be=t.length;if(ke>=t[Be-1])return Oe[Be-1].evaluate(e);const Ue=findStopLessThanOrEqualTo(t,ke),je=t[Ue],We=t[Ue+1],Qe=Interpolate.interpolationFactor(this.interpolation,ke,je,We),Cn=Oe[Ue].evaluate(e),An=Oe[Ue+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](Cn,An,Qe):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(Cn),hcl.forward(An),Qe)):lab.reverse(lab.interpolate(lab.forward(Cn),lab.forward(An),Qe))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let Oe=0;Oe<this.labels.length;Oe++)t.push(this.labels[Oe],this.outputs[Oe].serialize());return t}}function exponentialInterpolation(Ae,e,t,Oe){const ke=Oe-t,Be=Ae-t;return ke===0?0:e===1?Be/ke:(Math.pow(e,Be)-1)/(Math.pow(e,ke)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let Oe=null;const ke=t.expectedType;ke&&ke.kind!=="value"&&(Oe=ke);const Be=[];for(const je of e.slice(1)){const We=t.parse(je,1+Be.length,Oe,void 0,{typeAnnotation:"omit"});if(!We)return null;Oe=Oe||We.type,Be.push(We)}return ke&&Be.some(je=>checkSubtype(ke,je.type))?new Coalesce(ValueType,Be):new Coalesce(Oe,Be)}evaluate(e){let t=null,Oe=0,ke;for(const Be of this.args){if(Oe++,t=Be.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(ke||(ke=t),t=null,Oe===this.args.length))return ke;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const Oe=[];for(let Be=1;Be<e.length-1;Be+=2){const Ue=e[Be];if(typeof Ue!="string")return t.error(`Expected string, but found ${typeof Ue} instead.`,Be);if(/[^a-zA-Z0-9_]/.test(Ue))return t.error("Variable names must contain only alphanumeric characters or '_'.",Be);const je=t.parse(e[Be+1],Be+1);if(!je)return null;Oe.push([Ue,je])}const ke=t.parse(e[e.length-1],e.length-1,t.expectedType,Oe);return ke?new Let(Oe,ke):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,Oe]of this.bindings)e.push(t,Oe.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;let At$1=class Uf{constructor(e,t,Oe){this.type=e,this.index=t,this.input=Oe}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,NumberType),ke=t.parse(e[2],2,array$1(t.expectedType||ValueType));if(!Oe||!ke)return null;const Be=ke.type;return new Uf(Be.itemType,Oe,ke)}evaluate(e){const t=this.index.evaluate(e),Oe=this.input.evaluate(e);if(t<0)throw new RuntimeError$1(`Array index out of bounds: ${t} < 0.`);if(t>=Oe.length)throw new RuntimeError$1(`Array index out of bounds: ${t} > ${Oe.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError$1(`Array index must be an integer, but found ${t} instead.`);return Oe[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}};var At$1$1=At$1;class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,ValueType);return!Oe||!ke?null:isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(Oe,ke):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(Oe.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(Oe==null)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(Oe,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(Oe))} instead.`);return Oe.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,t,Oe){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=Oe}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,ValueType);if(!Oe||!ke)return null;if(!isValidType(Oe.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(Oe.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new IndexOf(Oe,ke,Be):null}else return new IndexOf(Oe,ke)}evaluate(e){const t=this.needle.evaluate(e),Oe=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(Oe,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(Oe))} instead.`);if(this.fromIndex){const ke=this.fromIndex.evaluate(e);return Oe.indexOf(t,ke)}return Oe.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,t,Oe,ke,Be,Ue){this.inputType=e,this.type=t,this.input=Oe,this.cases=ke,this.outputs=Be,this.otherwise=Ue}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let Oe,ke;t.expectedType&&t.expectedType.kind!=="value"&&(ke=t.expectedType);const Be={},Ue=[];for(let Qe=2;Qe<e.length-1;Qe+=2){let Cn=e[Qe];const An=e[Qe+1];Array.isArray(Cn)||(Cn=[Cn]);const En=t.concat(Qe);if(Cn.length===0)return En.error("Expected at least one branch label.");for(const Tn of Cn){if(typeof Tn!="number"&&typeof Tn!="string")return En.error("Branch labels must be numbers or strings.");if(typeof Tn=="number"&&Math.abs(Tn)>Number.MAX_SAFE_INTEGER)return En.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Tn=="number"&&Math.floor(Tn)!==Tn)return En.error("Numeric branch labels must be integer values.");if(!Oe)Oe=typeOf(Tn);else if(En.checkSubtype(Oe,typeOf(Tn)))return null;if(typeof Be[String(Tn)]<"u")return En.error("Branch labels must be unique.");Be[String(Tn)]=Ue.length}const Sn=t.parse(An,Qe,ke);if(!Sn)return null;ke=ke||Sn.type,Ue.push(Sn)}const je=t.parse(e[1],1,ValueType);if(!je)return null;const We=t.parse(e[e.length-1],e.length-1,ke);return!We||je.type.kind!=="value"&&t.concat(1).checkSubtype(Oe,je.type)?null:new Match(Oe,ke,je,Be,Ue,We)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),Oe=[],ke={};for(const Ue of t){const je=ke[this.cases[Ue]];je===void 0?(ke[this.cases[Ue]]=Oe.length,Oe.push([this.cases[Ue],[Ue]])):Oe[je][1].push(Ue)}const Be=Ue=>this.inputType.kind==="number"?Number(Ue):Ue;for(const[Ue,je]of Oe)je.length===1?e.push(Be(je[0])):e.push(je.map(Be)),e.push(this.outputs[Ue].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,t,Oe){this.type=e,this.branches=t,this.otherwise=Oe}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let Oe;t.expectedType&&t.expectedType.kind!=="value"&&(Oe=t.expectedType);const ke=[];for(let Ue=1;Ue<e.length-1;Ue+=2){const je=t.parse(e[Ue],Ue,BooleanType);if(!je)return null;const We=t.parse(e[Ue+1],Ue+1,Oe);if(!We)return null;ke.push([je,We]),Oe=Oe||We.type}const Be=t.parse(e[e.length-1],e.length-1,Oe);return Be?new Case(Oe,ke,Be):null}evaluate(e){for(const[t,Oe]of this.branches)if(t.evaluate(e))return Oe.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,Oe]of this.branches)e(t),e(Oe);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,t,Oe,ke){this.type=e,this.input=t,this.beginIndex=Oe,this.endIndex=ke}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1,ValueType),ke=t.parse(e[2],2,NumberType);if(!Oe||!ke)return null;if(!isValidType(Oe.type,[array$1(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${toString$1(Oe.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new Slice(Oe.type,Oe,ke,Be):null}else return new Slice(Oe.type,Oe,ke)}evaluate(e){const t=this.input.evaluate(e),Oe=this.beginIndex.evaluate(e);if(!isValidNativeType(t,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(t))} instead.`);if(this.endIndex){const ke=this.endIndex.evaluate(e);return t.slice(Oe,ke)}return t.slice(Oe)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(Ae,e){return Ae==="=="||Ae==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(Ae,e,t){return e===t}function neq(Ae,e,t){return e!==t}function lt$1(Ae,e,t){return e<t}function gt$1(Ae,e,t){return e>t}function lteq(Ae,e,t){return e<=t}function gteq(Ae,e,t){return e>=t}function eqCollate(Ae,e,t,Oe){return Oe.compare(e,t)===0}function neqCollate(Ae,e,t,Oe){return!eqCollate(Ae,e,t,Oe)}function ltCollate(Ae,e,t,Oe){return Oe.compare(e,t)<0}function gtCollate(Ae,e,t,Oe){return Oe.compare(e,t)>0}function lteqCollate(Ae,e,t,Oe){return Oe.compare(e,t)<=0}function gteqCollate(Ae,e,t,Oe){return Oe.compare(e,t)>=0}function makeComparison(Ae,e,t){const Oe=Ae!=="=="&&Ae!=="!=";return class jf{constructor(Be,Ue,je){this.type=BooleanType,this.lhs=Be,this.rhs=Ue,this.collator=je,this.hasUntypedArgument=Be.type.kind==="value"||Ue.type.kind==="value"}static parse(Be,Ue){if(Be.length!==3&&Be.length!==4)return Ue.error("Expected two or three arguments.");const je=Be[0];let We=Ue.parse(Be[1],1,ValueType);if(!We)return null;if(!isComparableType(je,We.type))return Ue.concat(1).error(`"${je}" comparisons are not supported for type '${toString$1(We.type)}'.`);let Qe=Ue.parse(Be[2],2,ValueType);if(!Qe)return null;if(!isComparableType(je,Qe.type))return Ue.concat(2).error(`"${je}" comparisons are not supported for type '${toString$1(Qe.type)}'.`);if(We.type.kind!==Qe.type.kind&&We.type.kind!=="value"&&Qe.type.kind!=="value")return Ue.error(`Cannot compare types '${toString$1(We.type)}' and '${toString$1(Qe.type)}'.`);Oe&&(We.type.kind==="value"&&Qe.type.kind!=="value"?We=new Assertion$1(Qe.type,[We]):We.type.kind!=="value"&&Qe.type.kind==="value"&&(Qe=new Assertion$1(We.type,[Qe])));let Cn=null;if(Be.length===4){if(We.type.kind!=="string"&&Qe.type.kind!=="string"&&We.type.kind!=="value"&&Qe.type.kind!=="value")return Ue.error("Cannot use collator to compare non-string types.");if(Cn=Ue.parse(Be[3],3,CollatorType),!Cn)return null}return new jf(We,Qe,Cn)}evaluate(Be){const Ue=this.lhs.evaluate(Be),je=this.rhs.evaluate(Be);if(Oe&&this.hasUntypedArgument){const We=typeOf(Ue),Qe=typeOf(je);if(We.kind!==Qe.kind||!(We.kind==="string"||We.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${Ae}" to be (string, string) or (number, number), but found (${We.kind}, ${Qe.kind}) instead.`)}if(this.collator&&!Oe&&this.hasUntypedArgument){const We=typeOf(Ue),Qe=typeOf(je);if(We.kind!=="string"||Qe.kind!=="string")return e(Be,Ue,je)}return this.collator?t(Be,Ue,je,this.collator.evaluate(Be)):e(Be,Ue,je)}eachChild(Be){Be(this.lhs),Be(this.rhs),this.collator&&Be(this.collator)}outputDefined(){return!0}serialize(){const Be=[Ae];return this.eachChild(Ue=>{Be.push(Ue.serialize())}),Be}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,t,Oe,ke,Be,Ue){this.type=StringType,this.number=e,this.locale=t,this.currency=Oe,this.unit=ke,this.minFractionDigits=Be,this.maxFractionDigits=Ue}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const Oe=t.parse(e[1],1,NumberType);if(!Oe)return null;const ke=e[2];if(typeof ke!="object"||Array.isArray(ke))return t.error("NumberFormat options argument must be an object.");let Be=null;if(ke.locale&&(Be=t.parse(ke.locale,1,StringType),!Be))return null;let Ue=null;if(ke.currency&&(Ue=t.parse(ke.currency,1,StringType),!Ue))return null;let je=null;if(ke.unit&&(je=t.parse(ke.unit,1,StringType),!je))return null;let We=null;if(ke["min-fraction-digits"]&&(We=t.parse(ke["min-fraction-digits"],1,NumberType),!We))return null;let Qe=null;return ke["max-fraction-digits"]&&(Qe=t.parse(ke["max-fraction-digits"],1,NumberType),!Qe)?null:new NumberFormat(Oe,Be,Ue,je,We,Qe)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const Oe=t.parse(e[1],1);return Oe?Oe.type.kind!=="array"&&Oe.type.kind!=="string"&&Oe.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${toString$1(Oe.type)} instead.`):new Length(Oe):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(Ae,[e,t,Oe,ke]){e=e.evaluate(Ae),t=t.evaluate(Ae),Oe=Oe.evaluate(Ae);const Be=ke?ke.evaluate(Ae):1,Ue=validateRGBA(e,t,Oe,Be);if(Ue)throw new RuntimeError$1(Ue);return new Color$1(e/255*Be,t/255*Be,Oe/255*Be,Be)}function has(Ae,e){return Ae in e}function get$1(Ae,e){const t=e[Ae];return typeof t>"u"?null:t}function binarySearch(Ae,e,t,Oe){for(;t<=Oe;){const ke=t+Oe>>1;if(e[ke]===Ae)return!0;e[ke]>Ae?Oe=ke-1:t=ke+1}return!1}function varargs(Ae){return{type:Ae}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(Ae,[e])=>{throw new RuntimeError$1(e.evaluate(Ae))}],typeof:[StringType,[ValueType],(Ae,[e])=>toString$1(typeOf(e.evaluate(Ae)))],"to-rgba":[array$1(NumberType,4),[ColorType],(Ae,[e])=>e.evaluate(Ae).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(Ae,[e])=>has(e.evaluate(Ae),Ae.properties())],[[StringType,ObjectType],(Ae,[e,t])=>has(e.evaluate(Ae),t.evaluate(Ae))]]},get:{type:ValueType,overloads:[[[StringType],(Ae,[e])=>get$1(e.evaluate(Ae),Ae.properties())],[[StringType,ObjectType],(Ae,[e,t])=>get$1(e.evaluate(Ae),t.evaluate(Ae))]]},"feature-state":[ValueType,[StringType],(Ae,[e])=>get$1(e.evaluate(Ae),Ae.featureState||{})],properties:[ObjectType,[],Ae=>Ae.properties()],"geometry-type":[StringType,[],Ae=>Ae.geometryType()],id:[ValueType,[],Ae=>Ae.id()],zoom:[NumberType,[],Ae=>Ae.globals.zoom],pitch:[NumberType,[],Ae=>Ae.globals.pitch||0],"distance-from-center":[NumberType,[],Ae=>Ae.distanceFromCenter()],"heatmap-density":[NumberType,[],Ae=>Ae.globals.heatmapDensity||0],"line-progress":[NumberType,[],Ae=>Ae.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],Ae=>Ae.globals.skyRadialProgress||0],accumulated:[ValueType,[],Ae=>Ae.globals.accumulated===void 0?null:Ae.globals.accumulated],"+":[NumberType,varargs(NumberType),(Ae,e)=>{let t=0;for(const Oe of e)t+=Oe.evaluate(Ae);return t}],"*":[NumberType,varargs(NumberType),(Ae,e)=>{let t=1;for(const Oe of e)t*=Oe.evaluate(Ae);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(Ae,[e,t])=>e.evaluate(Ae)-t.evaluate(Ae)],[[NumberType],(Ae,[e])=>-e.evaluate(Ae)]]},"/":[NumberType,[NumberType,NumberType],(Ae,[e,t])=>e.evaluate(Ae)/t.evaluate(Ae)],"%":[NumberType,[NumberType,NumberType],(Ae,[e,t])=>e.evaluate(Ae)%t.evaluate(Ae)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(Ae,[e,t])=>Math.pow(e.evaluate(Ae),t.evaluate(Ae))],sqrt:[NumberType,[NumberType],(Ae,[e])=>Math.sqrt(e.evaluate(Ae))],log10:[NumberType,[NumberType],(Ae,[e])=>Math.log(e.evaluate(Ae))/Math.LN10],ln:[NumberType,[NumberType],(Ae,[e])=>Math.log(e.evaluate(Ae))],log2:[NumberType,[NumberType],(Ae,[e])=>Math.log(e.evaluate(Ae))/Math.LN2],sin:[NumberType,[NumberType],(Ae,[e])=>Math.sin(e.evaluate(Ae))],cos:[NumberType,[NumberType],(Ae,[e])=>Math.cos(e.evaluate(Ae))],tan:[NumberType,[NumberType],(Ae,[e])=>Math.tan(e.evaluate(Ae))],asin:[NumberType,[NumberType],(Ae,[e])=>Math.asin(e.evaluate(Ae))],acos:[NumberType,[NumberType],(Ae,[e])=>Math.acos(e.evaluate(Ae))],atan:[NumberType,[NumberType],(Ae,[e])=>Math.atan(e.evaluate(Ae))],min:[NumberType,varargs(NumberType),(Ae,e)=>Math.min(...e.map(t=>t.evaluate(Ae)))],max:[NumberType,varargs(NumberType),(Ae,e)=>Math.max(...e.map(t=>t.evaluate(Ae)))],abs:[NumberType,[NumberType],(Ae,[e])=>Math.abs(e.evaluate(Ae))],round:[NumberType,[NumberType],(Ae,[e])=>{const t=e.evaluate(Ae);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(Ae,[e])=>Math.floor(e.evaluate(Ae))],ceil:[NumberType,[NumberType],(Ae,[e])=>Math.ceil(e.evaluate(Ae))],"filter-==":[BooleanType,[StringType,ValueType],(Ae,[e,t])=>Ae.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(Ae,[e])=>Ae.id()===e.value],"filter-type-==":[BooleanType,[StringType],(Ae,[e])=>Ae.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(Ae,[e,t])=>{const Oe=Ae.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe<ke}],"filter-id-<":[BooleanType,[ValueType],(Ae,[e])=>{const t=Ae.id(),Oe=e.value;return typeof t==typeof Oe&&t<Oe}],"filter->":[BooleanType,[StringType,ValueType],(Ae,[e,t])=>{const Oe=Ae.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe>ke}],"filter-id->":[BooleanType,[ValueType],(Ae,[e])=>{const t=Ae.id(),Oe=e.value;return typeof t==typeof Oe&&t>Oe}],"filter-<=":[BooleanType,[StringType,ValueType],(Ae,[e,t])=>{const Oe=Ae.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe<=ke}],"filter-id-<=":[BooleanType,[ValueType],(Ae,[e])=>{const t=Ae.id(),Oe=e.value;return typeof t==typeof Oe&&t<=Oe}],"filter->=":[BooleanType,[StringType,ValueType],(Ae,[e,t])=>{const Oe=Ae.properties()[e.value],ke=t.value;return typeof Oe==typeof ke&&Oe>=ke}],"filter-id->=":[BooleanType,[ValueType],(Ae,[e])=>{const t=Ae.id(),Oe=e.value;return typeof t==typeof Oe&&t>=Oe}],"filter-has":[BooleanType,[ValueType],(Ae,[e])=>e.value in Ae.properties()],"filter-has-id":[BooleanType,[],Ae=>Ae.id()!==null&&Ae.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(Ae,[e])=>e.value.indexOf(Ae.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(Ae,[e])=>e.value.indexOf(Ae.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(Ae,[e,t])=>t.value.indexOf(Ae.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(Ae,[e,t])=>binarySearch(Ae.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Ae,[e,t])=>e.evaluate(Ae)&&t.evaluate(Ae)],[varargs(BooleanType),(Ae,e)=>{for(const t of e)if(!t.evaluate(Ae))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Ae,[e,t])=>e.evaluate(Ae)||t.evaluate(Ae)],[varargs(BooleanType),(Ae,e)=>{for(const t of e)if(t.evaluate(Ae))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(Ae,[e])=>!e.evaluate(Ae)],"is-supported-script":[BooleanType,[StringType],(Ae,[e])=>{const t=Ae.globals&&Ae.globals.isSupportedScript;return t?t(e.evaluate(Ae)):!0}],upcase:[StringType,[StringType],(Ae,[e])=>e.evaluate(Ae).toUpperCase()],downcase:[StringType,[StringType],(Ae,[e])=>e.evaluate(Ae).toLowerCase()],concat:[StringType,varargs(ValueType),(Ae,e)=>e.map(t=>toString(t.evaluate(Ae))).join("")],"resolved-locale":[StringType,[CollatorType],(Ae,[e])=>e.evaluate(Ae).resolvedLocale()]});var definitions=expressions;function success(Ae){return{result:"success",value:Ae}}function error(Ae){return{result:"error",value:Ae}}function supportsPropertyExpression(Ae){return Ae["property-type"]==="data-driven"}function supportsZoomExpression(Ae){return!!Ae.expression&&Ae.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(Ae){return!!Ae.expression&&Ae.expression.interpolated}function isFunction(Ae){return typeof Ae=="object"&&Ae!==null&&!Array.isArray(Ae)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue,je,We){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=Oe,this._evaluator.canonical=ke||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=Ue,this._evaluator.featureTileCoord=je||null,this._evaluator.featureDistanceData=We||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,Oe,ke,Be,Ue,je,We){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=Oe||null,this._evaluator.canonical=ke||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=Ue||null,this._evaluator.featureTileCoord=je||null,this._evaluator.featureDistanceData=We||null;try{const Qe=this.expression.evaluate(this._evaluator);if(Qe==null||typeof Qe=="number"&&Qe!==Qe)return this._defaultValue;if(this._enumValues&&!(Qe in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(Cn=>JSON.stringify(Cn)).join(", ")}, but found ${JSON.stringify(Qe)} instead.`);return Qe}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}}}function isExpression(Ae){return Array.isArray(Ae)&&Ae.length>0&&typeof Ae[0]=="string"&&Ae[0]in definitions}function createExpression(Ae,e){const t=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),Oe=t.parse(Ae,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return Oe?success(new StyleExpression(Oe,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue)}evaluate(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluate(e,t,Oe,ke,Be,Ue)}}class ZoomDependentExpression{constructor(e,t,Oe,ke){this.kind=e,this.zoomStops=Oe,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=ke}evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluateWithoutErrorHandling(e,t,Oe,ke,Be,Ue)}evaluate(e,t,Oe,ke,Be,Ue){return this._styleExpression.evaluate(e,t,Oe,ke,Be,Ue)}interpolationFactor(e,t,Oe){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,t,Oe):0}}function createPropertyExpression(Ae,e){if(Ae=createExpression(Ae,e),Ae.result==="error")return Ae;const t=Ae.value.expression,Oe=isFeatureConstant(t);if(!Oe&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const ke=isGlobalPropertyConstant(t,["zoom","pitch","distance-from-center"]);if(!ke&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const Be=findZoomCurve(t);if(!Be&&!ke)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Be instanceof ParsingError$1)return error([Be]);if(Be instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!Be)return success(Oe?new ZoomConstantExpression("constant",Ae.value):new ZoomConstantExpression("source",Ae.value));const Ue=Be instanceof Interpolate$1?Be.interpolation:void 0;return success(Oe?new ZoomDependentExpression("camera",Ae.value,Be.labels,Ue):new ZoomDependentExpression("composite",Ae.value,Be.labels,Ue))}function findZoomCurve(Ae){let e=null;if(Ae instanceof Let$1)e=findZoomCurve(Ae.result);else if(Ae instanceof Coalesce$1){for(const t of Ae.args)if(e=findZoomCurve(t),e)break}else(Ae instanceof Step$1||Ae instanceof Interpolate$1)&&Ae.input instanceof CompoundExpression$1&&Ae.input.name==="zoom"&&(e=Ae);return e instanceof ParsingError$1||Ae.eachChild(t=>{const Oe=findZoomCurve(t);Oe instanceof ParsingError$1?e=Oe:!e&&Oe?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&Oe&&e!==Oe&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(Ae){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return Ae.type==="array"?array$1(e[Ae.value]||ValueType,Ae.length):e[Ae.type]}function getDefaultValue(Ae){return Ae.type==="color"&&(isFunction(Ae.default)||Array.isArray(Ae.default))?new Color$1(0,0,0,0):Ae.type==="color"?Color$1.parse(Ae.default)||null:Ae.default===void 0?null:Ae.default}function unbundle(Ae){return Ae instanceof Number||Ae instanceof String||Ae instanceof Boolean?Ae.valueOf():Ae}function deepUnbundle(Ae){if(Array.isArray(Ae))return Ae.map(deepUnbundle);if(Ae instanceof Object&&!(Ae instanceof Number||Ae instanceof String||Ae instanceof Boolean)){const e={};for(const t in Ae)e[t]=deepUnbundle(Ae[t]);return e}return unbundle(Ae)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(Ae){if(Ae===!0||Ae===!1)return!0;if(!Array.isArray(Ae)||Ae.length===0)return!1;switch(Ae[0]){case"has":return Ae.length>=2&&Ae[1]!=="$id"&&Ae[1]!=="$type";case"in":return Ae.length>=3&&(typeof Ae[1]!="string"||Array.isArray(Ae[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return Ae.length!==3||Array.isArray(Ae[1])||Array.isArray(Ae[2]);case"any":case"all":for(const e of Ae.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(Ae,e="fill"){if(Ae==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(Ae)||(Ae=convertFilter(Ae));const t=Ae;let Oe=!0;try{Oe=extractStaticFilter(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const ke=spec[`filter_${e}`],Be=createExpression(Oe,ke);let Ue=null;if(Be.result==="error")throw new Error(Be.value.map(Cn=>`${Cn.key}: ${Cn.message}`).join(", "));Ue=(Cn,An,En)=>Be.value.evaluate(Cn,An,{},En);let je=null,We=null;if(Oe!==t){const Cn=createExpression(t,ke);if(Cn.result==="error")throw new Error(Cn.value.map(An=>`${An.key}: ${An.message}`).join(", "));je=(An,En,Sn,Tn,Dn)=>Cn.value.evaluate(An,En,{},Sn,void 0,void 0,Tn,Dn),We=!isFeatureConstant(Cn.value.expression)}Ue=Ue;const Qe=geometryNeeded(Oe);return{filter:Ue,dynamicFilter:je||void 0,needGeometry:Qe,needFeature:!!We}}function extractStaticFilter(Ae){if(!isDynamicFilter(Ae))return Ae;let e=deepUnbundle(Ae);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(Ae){if(!Array.isArray(Ae))return Ae;const e=collapsedExpression(Ae);return e===!0?e:e.map(t=>collapseDynamicBooleanExpressions(t))}function unionDynamicBranches(Ae){let e=!1;const t=[];if(Ae[0]==="case"){for(let Oe=1;Oe<Ae.length-1;Oe+=2)e=e||isDynamicFilter(Ae[Oe]),t.push(Ae[Oe+1]);t.push(Ae[Ae.length-1])}else if(Ae[0]==="match"){e=e||isDynamicFilter(Ae[1]);for(let Oe=2;Oe<Ae.length-1;Oe+=2)t.push(Ae[Oe+1]);t.push(Ae[Ae.length-1])}else if(Ae[0]==="step"){e=e||isDynamicFilter(Ae[1]);for(let Oe=1;Oe<Ae.length-1;Oe+=2)t.push(Ae[Oe+1])}e&&(Ae.length=0,Ae.push("any",...t));for(let Oe=1;Oe<Ae.length;Oe++)unionDynamicBranches(Ae[Oe])}function isDynamicFilter(Ae){if(!Array.isArray(Ae))return!1;if(isRootExpressionDynamic(Ae[0]))return!0;for(let e=1;e<Ae.length;e++){const t=Ae[e];if(isDynamicFilter(t))return!0}return!1}function isRootExpressionDynamic(Ae){return Ae==="pitch"||Ae==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(Ae){if(dynamicConditionExpressions.has(Ae[0]))for(let e=1;e<Ae.length;e++){const t=Ae[e];if(isDynamicFilter(t))return!0}return Ae}function compare(Ae,e){return Ae<e?-1:Ae>e?1:0}function geometryNeeded(Ae){if(!Array.isArray(Ae))return!1;if(Ae[0]==="within")return!0;for(let e=1;e<Ae.length;e++)if(geometryNeeded(Ae[e]))return!0;return!1}function convertFilter(Ae){if(!Ae)return!0;const e=Ae[0];return Ae.length<=1?e!=="any":e==="=="?convertComparisonOp(Ae[1],Ae[2],"=="):e==="!="?convertNegation(convertComparisonOp(Ae[1],Ae[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(Ae[1],Ae[2],e):e==="any"?convertDisjunctionOp(Ae.slice(1)):e==="all"?["all"].concat(Ae.slice(1).map(convertFilter)):e==="none"?["all"].concat(Ae.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(Ae[1],Ae.slice(2)):e==="!in"?convertNegation(convertInOp(Ae[1],Ae.slice(2))):e==="has"?convertHasOp(Ae[1]):e==="!has"?convertNegation(convertHasOp(Ae[1])):e==="within"?Ae:!0}function convertComparisonOp(Ae,e,t){switch(Ae){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,Ae,e]}}function convertDisjunctionOp(Ae){return["any"].concat(Ae.map(convertFilter))}function convertInOp(Ae,e){if(e.length===0)return!1;switch(Ae){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",Ae,["literal",e.sort(compare)]]:["filter-in-small",Ae,["literal",e]]}}function convertHasOp(Ae){switch(Ae){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",Ae]}}function convertNegation(Ae){return["!",Ae]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(Ae,e){const t={};for(const Oe in Ae)Oe!=="ref"&&(t[Oe]=Ae[Oe]);return refProperties.forEach(Oe=>{Oe in e&&(t[Oe]=e[Oe])}),t}function derefLayers(Ae){Ae=Ae.slice();const e=Object.create(null);for(let t=0;t<Ae.length;t++)e[Ae[t].id]=Ae[t];for(let t=0;t<Ae.length;t++)"ref"in Ae[t]&&(Ae[t]=deref(Ae[t],e[Ae[t].ref]));return Ae}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(Ae,e,t){var Oe=fontCache[Ae];if(!Oe){Array.isArray(Ae)||(Ae=[Ae]);for(var ke=400,Be="normal",Ue=[],je,We,Qe=0,Cn=Ae.length;Qe<Cn;++Qe){var An=Ae[Qe],En=An.split(" "),Sn=En[En.length-1].toLowerCase();Sn=="normal"||Sn=="italic"||Sn=="oblique"?(Be=We?Be:Sn,We=!0,En.pop(),Sn=En[En.length-1].toLowerCase()):italicRE.test(Sn)&&(Sn=Sn.replace(italicRE,""),Be=We?Be:En[En.length-1].replace(Sn,""),We=!0);for(var Tn in fontWeights){var Dn=En.length>1?En[En.length-2].toLowerCase():"";if(Sn==Tn||Sn==Tn.replace("-","")||Dn+"-"+Sn==Tn){ke=je?ke:fontWeights[Tn],En.pop(),Dn&&Tn.startsWith(Dn)&&En.pop();break}}!je&&typeof Sn=="number"&&(ke=Sn,je=!0);var ti=En.join(sp).replace("Klokantech Noto Sans","Noto Sans");ti.indexOf(sp)!==-1&&(ti='"'+ti+'"'),Ue.push(ti)}Oe=fontCache[Ae]=[Be,ke,Ue]}return Oe[0]+sp+Oe[1]+sp+e+"px"+(t?"/"+t:"")+sp+Oe[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(Ae){const e="mapbox://";return Ae.indexOf(e)!==0?"":Ae.slice(e.length)}function normalizeSpriteUrl(Ae,e,t){const Oe=getMapboxPath(Ae);if(!Oe)return decodeURI(new URL(Ae,t).href);const ke="sprites/";if(Oe.indexOf(ke)!==0)throw new Error(`unexpected sprites url: ${Ae}`);const Be=Oe.slice(ke.length);return`${mapboxBaseUrl}/styles/v1/${Be}/sprite?access_token=${e}`}function normalizeStyleUrl(Ae,e){const t=getMapboxPath(Ae);if(!t)return decodeURI(new URL(Ae,location.href).href);const Oe="styles/";if(t.indexOf(Oe)!==0)throw new Error(`unexpected style url: ${Ae}`);const ke=t.slice(Oe.length);return`${mapboxBaseUrl}/styles/v1/${ke}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(Ae,e,t,Oe){const ke=new URL(Ae,Oe),Be=getMapboxPath(Ae);if(!Be)return e?(ke.searchParams.has(t)||ke.searchParams.set(t,e),[decodeURI(ke.href)]):[decodeURI(ke.href)];if(Be==="mapbox.satellite"){const Ue=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${Be}/{z}/{x}/{y}${Ue}.webp?access_token=${e}`]}return mapboxSubdomains.map(Ue=>`https://${Ue}.tiles.mapbox.com/v4/${Be}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(Ae){return Ae.id||(Ae.id=styleId++),Ae.id}function getStyleFunctionKey(Ae,e){return getStyleId(Ae)+"."+getUid(e)}function getFunctionCache(Ae){let e=functionCacheByStyleId[Ae.id];return e||(e={},functionCacheByStyleId[getStyleId(Ae)]=e),e}function getFilterCache(Ae){let e=filterCacheByStyleId[Ae.id];return e||(e={},filterCacheByStyleId[getStyleId(Ae)]=e),e}function deg2rad(Ae){return Ae*Math.PI/180}const defaultResolutions=function(){const Ae=[];for(let e=78271.51696402048;Ae.length<=24;e/=2)Ae.push(e);return Ae}();function createCanvas(Ae,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(Ae,e);const t=document.createElement("canvas");return t.width=Ae,t.height=e,t}function getZoomForResolution(Ae,e){let t=0;const Oe=e.length;for(;t<Oe;++t)if(e[t]<Ae&&t+1<Oe){const Be=e[t]/e[t+1];return t+Math.log(e[t]/Ae)/Math.log(Be)}return Oe-1}function getResolutionForZoom(Ae,e){const t=Math.floor(Ae),Oe=Math.pow(2,Ae-t);return e[t]/Oe}const pendingRequests={};function fetchResource(Ae,e,t={},Oe){if(e in pendingRequests)return Oe&&(Oe.request=pendingRequests[e][0]),pendingRequests[e][1];const ke=t.transformRequest&&t.transformRequest(e,Ae)||e,Be=toPromise(()=>ke).then(Ue=>(Ue instanceof Request||(Ue=new Request(Ue)),Ue.headers.get("Accept")||Ue.headers.set("Accept","application/json"),Oe&&(Oe.request=Ue),fetch(Ue).then(function(je){return delete pendingRequests[e],je.ok?je.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(je){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[ke,Be],Be}function getGlStyle(Ae,e){if(typeof Ae=="string")if(Ae.trim().startsWith("{"))try{const t=JSON.parse(Ae);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return Ae=normalizeStyleUrl(Ae,e.accessToken),fetchResource("Style",Ae,e);else return Promise.resolve(Ae)}const tilejsonCache={};function getTileJson(Ae,e,t={}){const Oe=[e,JSON.stringify(Ae)].toString();let ke=tilejsonCache[Oe];if(!ke||t.transformRequest){let Be;t.transformRequest&&(Be=(je,We)=>{const Qe=t.transformRequest&&t.transformRequest(We,"Tiles")||We;if(je instanceof VectorTile$1)je.setLoader((Cn,An,En)=>{toPromise(()=>Qe).then(Sn=>{fetch(Sn).then(Tn=>Tn.arrayBuffer()).then(Tn=>{const ti=je.getFormat().readFeatures(Tn,{extent:Cn,featureProjection:En});je.setFeatures(ti)}).catch(Tn=>je.setState(TileState.ERROR))})});else{const Cn=je.getImage();toPromise(()=>Qe).then(An=>{An instanceof Request?fetch(An).then(En=>En.blob()).then(En=>{const Sn=URL.createObjectURL(En);Cn.addEventListener("load",()=>URL.revokeObjectURL(Sn)),Cn.addEventListener("error",()=>URL.revokeObjectURL(Sn)),Cn.src=Sn}).catch(En=>je.setState(TileState.ERROR)):Cn.src=An})}});const Ue=Ae.url;if(Ue&&!Ae.tiles){const je=normalizeSourceUrl(Ue,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(Ue.startsWith("mapbox://"))ke=Promise.resolve({tileJson:Object.assign({},Ae,{url:void 0,tiles:je}),tileLoadFunction:Be});else{const We={};ke=fetchResource("Source",je[0],t,We).then(function(Qe){return Qe.tiles=Qe.tiles.map(function(Cn){return Qe.scheme==="tms"&&(Cn=Cn.replace("{y}","{-y}")),normalizeSourceUrl(Cn,t.accessToken,t.accessTokenParam||"access_token",We.request.url)[0]}),Promise.resolve({tileJson:Qe,tileLoadFunction:Be})})}}else Ae=Object.assign({},Ae,{tiles:Ae.tiles.map(function(je){return Ae.scheme==="tms"&&(je=je.replace("{y}","{-y}")),normalizeSourceUrl(je,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),ke=Promise.resolve({tileJson:Object.assign({},Ae),tileLoadFunction:Be});tilejsonCache[Oe]=ke}return ke}function drawIconHalo(Ae,e,t,Oe){const ke=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],Be=createCanvas(ke[0],ke[1]),Ue=Be.getContext("2d");Ue.drawImage(Ae,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const je=Ue.getImageData(0,0,ke[0],ke[1]);Ue.globalCompositeOperation="destination-over",Ue.fillStyle=`rgba(${Oe.r*255},${Oe.g*255},${Oe.b*255},${Oe.a})`;const We=je.data;for(let Qe=0,Cn=je.width;Qe<Cn;++Qe)for(let An=0,En=je.height;An<En;++An){const Sn=(An*Cn+Qe)*4;We[Sn+3]>0&&Ue.arc(Qe,An,t*e.pixelRatio,0,2*Math.PI)}return Ue.fill(),Be}function smoothstep(Ae,e,t){const Oe=Math.max(0,Math.min(1,(t-Ae)/(e-Ae)));return Oe*Oe*(3-2*Oe)}function drawSDF(Ae,e,t){const Oe=createCanvas(e.width,e.height),ke=Oe.getContext("2d");ke.drawImage(Ae,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Be=ke.getImageData(0,0,e.width,e.height),Ue=Be.data;for(let je=0,We=Be.width;je<We;++je)for(let Qe=0,Cn=Be.height;Qe<Cn;++Qe){const An=(Qe*We+je)*4,En=Ue[An+3]/255,Sn=.75,Tn=.1,Dn=smoothstep(Sn-Tn,Sn+Tn,En);Dn>0?(Ue[An+0]=Math.round(255*t.r*Dn),Ue[An+1]=Math.round(255*t.g*Dn),Ue[An+2]=Math.round(255*t.b*Dn),Ue[An+3]=Math.round(255*Dn)):Ue[An+3]=0}return ke.putImageData(Be,0,0),Oe}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(Ae,e){if(e>=.05){let t="";const Oe=Ae.split(`
`),ke=hairSpacePool.slice(0,Math.round(e/.1));for(let Be=0,Ue=Oe.length;Be<Ue;++Be)Be>0&&(t+=`
`),t+=Oe[Be].split("").join(ke);return t}return Ae}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(Ae,e){return getMeasureContext().measureText(Ae).width+(Ae.length-1)*e}const measureCache={};function wrapText(Ae,e,t,Oe){if(Ae.indexOf(`
`)!==-1){const Ue=Ae.split(`
`),je=[];for(let We=0,Qe=Ue.length;We<Qe;++We)je.push(wrapText(Ue[We],e,t,Oe));return je.join(`
`)}const ke=t+","+e+","+Ae+","+Oe;let Be=measureCache[ke];if(!Be){const Ue=Ae.split(" ");if(Ue.length>1){const je=getMeasureContext();je.font=e;const Qe=je.measureText("M").width*t;let Cn="";const An=[];for(let En=0,Sn=Ue.length;En<Sn;++En){const Tn=Ue[En],Dn=Cn+(Cn?" ":"")+Tn;measureText(Dn,Oe)<=Qe?Cn=Dn:(Cn&&An.push(Cn),Cn=Tn)}Cn&&An.push(Cn);for(let En=0,Sn=An.length;En<Sn&&Sn>1;++En){const Tn=An[En];if(measureText(Tn,Oe)<Qe*.35){const Dn=En>0?measureText(An[En-1],Oe):1/0,ti=En<Sn-1?measureText(An[En+1],Oe):1/0;An.splice(En,1),Sn-=1,Dn<ti?(An[En-1]+=" "+Tn,En-=1):An[En]=Tn+" "+An[En]}}for(let En=0,Sn=An.length-1;En<Sn;++En){const Tn=An[En],Dn=An[En+1];if(measureText(Tn,Oe)>Qe*.7&&measureText(Dn,Oe)<Qe*.6){const ti=Tn.split(" "),ni=ti.pop();measureText(ni,Oe)<Qe*.2&&(An[En]=ti.join(" "),An[En+1]=ni+" "+Dn),Sn-=1}}Be=An.join(`
`)}else Be=Ae;Be=applyLetterSpacing(Be,Oe),measureCache[ke]=Be}return Be}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(Ae){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,Oe=e.length;t<Oe;++t){const ke=e[t];try{const Be=ke.rules||ke.cssRules;if(Be)for(let Ue=0,je=Be.length;Ue<je;++Ue){const We=Be[Ue];if(We.type==5){const Qe=We.cssText.match(fontFamilyRegEx);loadedFontFamilies[Qe[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return Ae in loadedFontFamilies}const processedFontFamilies={};function getFonts(Ae,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=Ae.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const Oe=[];for(let ke=0,Be=Ae.length;ke<Be;++ke){Ae[ke]=Ae[ke].replace("Arial Unicode MS","Arial");const Ue=Ae[ke],je=mb2css(Ue,1);registerFont(je);const We=je.split(" ");Oe.push([We.slice(3).join(" ").replace(/"/g,""),We[1],We[0]])}for(let ke=0,Be=Oe.length;ke<Be;++ke){const Ue=Oe[ke],je=Ue[0];if(!hasFontFamily(je)&&checkedFonts.get(`${Ue[2]}
${Ue[1]} 
${je}`)!==100){const We=e.replace("{font-family}",je.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",je.replace(/ /g,"+")).replace("{fontweight}",Ue[1]).replace("{-fontstyle}",Ue[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",Ue[2]);if(!document.querySelector('link[href="'+We+'"]')){const Qe=document.createElement("link");Qe.href=We,Qe.rel="stylesheet",document.head.appendChild(Qe)}}}return processedFontFamilies[t]=Ae,Ae}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(Ae,e){const t=createPropertyExpression(Ae,e);if(t.result==="error")throw new Error(t.value.map(Oe=>`${Oe.key}: ${Oe.message}`).join(", "));return t.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(Ae,e,t,Oe,ke,Be,Ue){const je=Ae.id;Be||(Be={},console.warn("No functionCache provided to getValue()")),Be[je]||(Be[je]={});const We=Be[je];if(!We[t]){let Qe=(Ae[e]||emptyObj$1)[t];const Cn=spec[`${e}_${Ae.type}`][t];Qe===void 0&&(Qe=Cn.default);let An=isExpression(Qe);if(!An&&isFunction(Qe)&&(Qe=convertFunction(Qe,Cn),An=!0),An){const En=expressionData(Qe,Cn);We[t]=En.evaluate.bind(En)}else Cn.type=="color"&&(Qe=Color$1.parse(Qe)),We[t]=function(){return Qe}}return zoomObj.zoom=Oe,We[t](zoomObj,ke,Ue)}function getDeclutterMode(Ae,e,t,Oe,ke){return getValue(Ae,"layout",`${Oe}-allow-overlap`,e,t,ke)?getValue(Ae,"layout",`${Oe}-ignore-placement`,e,t,ke)?"none":"obstacle":"declutter"}function evaluateFilter(Ae,e,t,Oe,ke){return ke||console.warn("No filterCache provided to evaluateFilter()"),Ae in ke||(ke[Ae]=createFilter(e).filter),zoomObj.zoom=Oe,ke[Ae](zoomObj,t)}function colorWithOpacity(Ae,e){if(Ae){if(Ae.a===0||e===0)return;const t=Ae.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(Ae.r*255/t)+","+Math.round(Ae.g*255/t)+","+Math.round(Ae.b*255/t)+","+t*e+")"}return Ae}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(Ae,e){return Ae.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(Ae,e,t,Oe=defaultResolutions,ke=void 0,Be=void 0,Ue=void 0,je=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,Ae)]=Array.from(arguments);let We,Qe,Cn;if(Be){if(typeof Image<"u"){const Ai=new Image;let fi;toPromise(()=>Be).then(Oi=>{Oi instanceof Request?fetch(Oi).then(Ni=>Ni.blob()).then(Ni=>{fi=URL.createObjectURL(Ni),Ai.src=fi}).catch(()=>{}):(Ai.crossOrigin="anonymous",Ai.src=Oi,fi&&URL.revokeObjectURL(fi))}),Ai.onload=function(){We=Ai,Qe=[Ai.width,Ai.height],Ae.changed(),Ai.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const Ai=self;Ai.postMessage({action:"loadImage",src:Be}),Ai.addEventListener("message",function(Oi){Oi.data.action==="imageLoaded"&&Oi.data.src===Be&&(We=Oi.data.image,Qe=[We.width,We.height])})}}const An=derefLayers(e.layers),En={},Sn=[],Tn={},Dn={},ti=getFunctionCache(e),ni=getFilterCache(e);let ii;for(let Ai=0,fi=An.length;Ai<fi;++Ai){const Oi=An[Ai],Ni=Oi.id;if(typeof t=="string"&&Oi.source==t||Array.isArray(t)&&t.indexOf(Ni)!==-1){const ui=Oi["source-layer"];if(ii){if(Oi.source!==ii)throw new Error(`Layer "${Ni}" does not use source "${ii}`)}else{ii=Oi.source;const Ri=e.sources[ii];if(!Ri)throw new Error(`Source "${ii}" is not defined`);const Mi=Ri.type;if(Mi!=="vector"&&Mi!=="geojson")throw new Error(`Source "${ii}" is not of type "vector" or "geojson", but "${Mi}"`)}let li=En[ui];li||(li=[],En[ui]=li),li.push({layer:Oi,index:Ai}),Sn.push(Ni)}}const si=new Stroke,oi=new Fill,ci=[],Pi=function(Ai,fi,Oi){const Ni=Ai.getProperties(),ui=En[Ni.layer];if(!ui)return;let li=Oe.indexOf(fi);li==-1&&(li=getZoomForResolution(fi,Oe));const Ri=types[Ai.getGeometry().getType()],Mi={id:Ai.getId(),properties:Ni,type:Ri},Bi=Ae.get("mapbox-featurestate")[Ai.getId()];let er=-1;for(let nr=0,lr=ui.length;nr<lr;++nr){const hr=ui[nr],ar=hr.layer,wr=ar.id;if(Oi!==void 0&&Oi!==wr)continue;const Fi=ar.layout||emptyObj$1,cr=ar.paint||emptyObj$1;if(Fi.visibility==="none"||"minzoom"in ar&&li<ar.minzoom||"maxzoom"in ar&&li>=ar.maxzoom)continue;const rr=ar.filter;if(!rr||evaluateFilter(wr,rr,Mi,li,ni)){let gr,vr,pr,_r,Ar,Sr;const Hr=hr.index;if(Ri==3&&(ar.type=="fill"||ar.type=="fill-extrusion"))if(vr=getValue(ar,"paint",ar.type+"-opacity",li,Mi,ti,Bi),ar.type+"-pattern"in cr){const br=getValue(ar,"paint",ar.type+"-pattern",li,Mi,ti,Bi);if(br){const Ir=typeof br=="string"?fromTemplate(br,Ni):br.toString();if(We&&ke&&ke[Ir]){++er,Sr=ci[er],(!Sr||!Sr.getFill()||Sr.getStroke()||Sr.getText())&&(Sr=new Style$1({fill:new Fill}),ci[er]=Sr),pr=Sr.getFill(),Sr.setZIndex(Hr);const jr=Ir+"."+vr;let qr=Dn[jr];if(!qr){const Wr=ke[Ir],Kr=createCanvas(Wr.width,Wr.height),ps=Kr.getContext("2d");ps.globalAlpha=vr,ps.drawImage(We,Wr.x,Wr.y,Wr.width,Wr.height,0,0,Wr.width,Wr.height),qr=ps.createPattern(Kr,"repeat"),Dn[jr]=qr}pr.setColor(qr)}}}else gr=colorWithOpacity(getValue(ar,"paint",ar.type+"-color",li,Mi,ti,Bi),vr),ar.type+"-outline-color"in cr&&(Ar=colorWithOpacity(getValue(ar,"paint",ar.type+"-outline-color",li,Mi,ti,Bi),vr)),Ar||(Ar=gr),(gr||Ar)&&(++er,Sr=ci[er],(!Sr||gr&&!Sr.getFill()||!gr&&Sr.getFill()||Ar&&!Sr.getStroke()||!Ar&&Sr.getStroke()||Sr.getText())&&(Sr=new Style$1({fill:gr?new Fill:void 0,stroke:Ar?new Stroke:void 0}),ci[er]=Sr),gr&&(pr=Sr.getFill(),pr.setColor(gr)),Ar&&(_r=Sr.getStroke(),_r.setColor(Ar),_r.setWidth(.5)),Sr.setZIndex(Hr));if(Ri!=1&&ar.type=="line"){"line-pattern"in cr?gr=void 0:gr=colorWithOpacity(getValue(ar,"paint","line-color",li,Mi,ti,Bi),getValue(ar,"paint","line-opacity",li,Mi,ti,Bi));const br=getValue(ar,"paint","line-width",li,Mi,ti,Bi);gr&&br>0&&(++er,Sr=ci[er],(!Sr||!Sr.getStroke()||Sr.getFill()||Sr.getText())&&(Sr=new Style$1({stroke:new Stroke}),ci[er]=Sr),_r=Sr.getStroke(),_r.setLineCap(getValue(ar,"layout","line-cap",li,Mi,ti,Bi)),_r.setLineJoin(getValue(ar,"layout","line-join",li,Mi,ti,Bi)),_r.setMiterLimit(getValue(ar,"layout","line-miter-limit",li,Mi,ti,Bi)),_r.setColor(gr),_r.setWidth(br),_r.setLineDash(cr["line-dasharray"]?getValue(ar,"paint","line-dasharray",li,Mi,ti,Bi).map(function(Ir){return Ir*br}):null),Sr.setZIndex(Hr))}let es=!1,ir=null,mr=0,dr,tr,Dr;if((Ri==1||Ri==2)&&"icon-image"in Fi){const br=getValue(ar,"layout","icon-image",li,Mi,ti,Bi);if(br){dr=typeof br=="string"?fromTemplate(br,Ni):br.toString();let Ir;const jr=je?je(Ae,dr):void 0;if(We&&ke&&ke[dr]||jr){const qr=getValue(ar,"layout","icon-rotation-alignment",li,Mi,ti,Bi);if(Ri==2){const Wr=Ai.getGeometry();if(Wr.getFlatMidpoint||Wr.getFlatMidpoints){const Kr=Wr.getExtent();if(Math.sqrt(Math.max(Math.pow((Kr[2]-Kr[0])/fi,2),Math.pow((Kr[3]-Kr[1])/fi,2)))>150){const rs=Wr.getType()==="MultiLineString"?Wr.getFlatMidpoints():Wr.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),Ir=renderFeature,renderFeatureCoordinates[0]=rs[0],renderFeatureCoordinates[1]=rs[1],getValue(ar,"layout","symbol-placement",li,Mi,ti,Bi)==="line"&&qr==="map"){const Cs=Wr.getStride(),Ns=Wr.getFlatCoordinates();for(let Rs=0,vs=Ns.length-Cs;Rs<vs;Rs+=Cs){const Ts=Ns[Rs],Is=Ns[Rs+1],js=Ns[Rs+Cs],Ms=Ns[Rs+Cs+1],Qs=Math.min(Ts,js),Do=Math.max(Ts,js),ks=rs[0],ws=rs[1],Ds=(Ms-Is)*(ks-Ts)-(js-Ts)*(ws-Is);if(Math.abs(Ds)<.001&&ks<=Do&&ks>=Qs){mr=Math.atan2(Is-Ms,js-Ts);break}}}}}}if(Ri!==2||Ir){const Wr=getValue(ar,"layout","icon-size",li,Mi,ti,Bi),Kr=cr["icon-color"]!==void 0?getValue(ar,"paint","icon-color",li,Mi,ti,Bi):null;if(!Kr||Kr.a!==0){const ps=getValue(ar,"paint","icon-halo-color",li,Mi,ti,Bi),rs=getValue(ar,"paint","icon-halo-width",li,Mi,ti,Bi);let Ps=`${dr}.${Wr}.${rs}.${ps}`;if(Kr!==null&&(Ps+=`.${Kr}`),tr=Tn[Ps],!tr){const Cs=getDeclutterMode(ar,li,Mi,"icon",ti);let Ns;"icon-offset"in Fi&&(Ns=getValue(ar,"layout","icon-offset",li,Mi,ti,Bi).slice(0),Ns[0]*=Wr,Ns[1]*=-Wr);let Rs=Kr?[Kr.r*255,Kr.g*255,Kr.b*255,Kr.a]:void 0;if(jr){const vs={color:Rs,rotateWithView:qr==="map",displacement:Ns,declutterMode:Cs,scale:Wr};typeof jr=="string"?vs.src=jr:(vs.img=jr,vs.imgSize=[jr.width,jr.height]),tr=new Icon(vs)}else{const vs=ke[dr];let Ts,Is,js;rs?vs.sdf?(Ts=drawIconHalo(drawSDF(We,vs,Kr||[0,0,0,1]),{x:0,y:0,width:vs.width,height:vs.height,pixelRatio:vs.pixelRatio},rs,ps),Rs=void 0):Ts=drawIconHalo(We,vs,rs,ps):(vs.sdf?(Cn||(Cn=drawSDF(We,{x:0,y:0,width:Qe[0],height:Qe[1]},{r:1,g:1,b:1})),Ts=Cn):Ts=We,Is=[vs.width,vs.height],js=[vs.x,vs.y]),tr=new Icon({color:Rs,img:Ts,imgSize:Qe,size:Is,offset:js,rotateWithView:qr==="map",scale:Wr/vs.pixelRatio,displacement:Ns,declutterMode:Cs})}Tn[Ps]=tr}}tr&&(++er,Sr=ci[er],(!Sr||!Sr.getImage()||Sr.getFill()||Sr.getStroke())&&(Sr=new Style$1,ci[er]=Sr),Sr.setGeometry(Ir),tr.setRotation(mr+deg2rad(getValue(ar,"layout","icon-rotate",li,Mi,ti,Bi))),tr.setOpacity(getValue(ar,"paint","icon-opacity",li,Mi,ti,Bi)),tr.setAnchor(anchor[getValue(ar,"layout","icon-anchor",li,Mi,ti,Bi)]),Sr.setImage(tr),ir=Sr.getText(),Sr.setText(void 0),Sr.setZIndex(Hr),es=!0,Dr=!1)}else Dr=!0}}}if(Ri==1&&ar.type==="circle"){++er,Sr=ci[er],(!Sr||!Sr.getImage()||Sr.getFill()||Sr.getStroke())&&(Sr=new Style$1,ci[er]=Sr);const br="circle-radius"in cr?getValue(ar,"paint","circle-radius",li,Mi,ti,Bi):5,Ir=colorWithOpacity(getValue(ar,"paint","circle-stroke-color",li,Mi,ti,Bi),getValue(ar,"paint","circle-stroke-opacity",li,Mi,ti,Bi)),jr=getValue(ar,"paint","circle-translate",li,Mi,ti,Bi),qr=colorWithOpacity(getValue(ar,"paint","circle-color",li,Mi,ti,Bi),getValue(ar,"paint","circle-opacity",li,Mi,ti,Bi)),Wr=getValue(ar,"paint","circle-stroke-width",li,Mi,ti,Bi),Kr=br+"."+Ir+"."+qr+"."+Wr+"."+jr[0]+"."+jr[1];tr=Tn[Kr],tr||(tr=new CircleStyle({radius:br,displacement:[jr[0],-jr[1]],stroke:Ir&&Wr>0?new Stroke({width:Wr,color:Ir}):void 0,fill:qr?new Fill({color:qr}):void 0,declutterMode:"none"}),Tn[Kr]=tr),Sr.setImage(tr),ir=Sr.getText(),Sr.setText(void 0),Sr.setGeometry(void 0),Sr.setZIndex(Hr),es=!0}let Nr,Pr,kr,Rr,Tr,Er;if("text-field"in Fi){Rr=Math.round(getValue(ar,"layout","text-size",li,Mi,ti,Bi));const br=getValue(ar,"layout","text-font",li,Mi,ti,Bi);kr=getValue(ar,"layout","text-line-height",li,Mi,ti,Bi),Pr=mb2css(Ue?Ue(br,e.metadata?e.metadata["ol:webfonts"]:void 0):br,Rr,kr),Pr.includes("sans-serif")||(Pr+=",sans-serif"),Tr=getValue(ar,"layout","text-letter-spacing",li,Mi,ti,Bi),Er=getValue(ar,"layout","text-max-width",li,Mi,ti,Bi);const Ir=getValue(ar,"layout","text-field",li,Mi,ti,Bi);typeof Ir=="object"&&Ir.sections?Ir.sections.length===1?Nr=Ir.toString():Nr=Ir.sections.reduce((jr,qr,Wr)=>{const Kr=qr.fontStack?qr.fontStack.split(","):br,ps=mb2css(Ue?Ue(Kr):Kr,Rr*(qr.scale||1),kr);let rs=qr.text;if(rs===`
`)return jr.push(`
`,""),jr;if(Ri==2)return jr.push(applyLetterSpacing(rs,Tr),ps),jr;rs=wrapText(rs,ps,Er,Tr).split(`
`);for(let Ps=0,Cs=rs.length;Ps<Cs;++Ps)Ps>0&&jr.push(`
`,""),jr.push(rs[Ps],ps);return jr},[]):Nr=fromTemplate(Ir,Ni).trim(),vr=getValue(ar,"paint","text-opacity",li,Mi,ti,Bi)}if(Nr&&vr&&!Dr){es||(++er,Sr=ci[er],(!Sr||!Sr.getText()||Sr.getFill()||Sr.getStroke())&&(Sr=new Style$1,ci[er]=Sr),Sr.setImage(void 0),Sr.setGeometry(void 0));const br=getDeclutterMode(ar,li,Mi,"text",ti);Sr.getText()||Sr.setText(ir),ir=Sr.getText(),(!ir||"getDeclutterMode"in ir&&ir.getDeclutterMode()!==br)&&(ir=new Text({padding:[2,2,2,2],declutterMode:br}),Sr.setText(ir));const Ir=getValue(ar,"layout","text-transform",li,Mi,ti,Bi);Ir=="uppercase"?Nr=Array.isArray(Nr)?Nr.map((Ms,Qs)=>Qs%2?Ms:Ms.toUpperCase()):Nr.toUpperCase():Ir=="lowercase"&&(Nr=Array.isArray(Nr)?Nr.map((Ms,Qs)=>Qs%2?Ms:Ms.toLowerCase()):Nr.toLowerCase());const jr=Array.isArray(Nr)?Nr:Ri==2?applyLetterSpacing(Nr,Tr):wrapText(Nr,Pr,Er,Tr);if(ir.setText(jr),ir.setFont(Pr),ir.setRotation(deg2rad(getValue(ar,"layout","text-rotate",li,Mi,ti,Bi))),typeof ir.setKeepUpright=="function"){const Ms=getValue(ar,"layout","text-keep-upright",li,Mi,ti,Bi);ir.setKeepUpright(Ms)}const qr=getValue(ar,"layout","text-anchor",li,Mi,ti,Bi),Wr=es||Ri==1?"point":getValue(ar,"layout","symbol-placement",li,Mi,ti,Bi);let Kr;if(Wr==="line-center"?(ir.setPlacement("line"),Kr="center"):ir.setPlacement(Wr),Wr==="line"&&typeof ir.setRepeat=="function"){const Ms=getValue(ar,"layout","symbol-spacing",li,Mi,ti,Bi);ir.setRepeat(Ms*2)}ir.setOverflow(Wr==="point");let ps=getValue(ar,"paint","text-halo-width",li,Mi,ti,Bi);const rs=getValue(ar,"layout","text-offset",li,Mi,ti,Bi),Ps=getValue(ar,"paint","text-translate",li,Mi,ti,Bi);let Cs=0,Ns=0;if(Wr=="point"){Kr="center",qr.indexOf("left")!==-1?(Kr="left",Ns=ps):qr.indexOf("right")!==-1&&(Kr="right",Ns=-ps);const Ms=getValue(ar,"layout","text-rotation-alignment",li,Mi,ti,Bi);ir.setRotateWithView(Ms=="map")}else ir.setMaxAngle(deg2rad(getValue(ar,"layout","text-max-angle",li,Mi,ti,Bi))*Nr.length/jr.length),ir.setRotateWithView(!1);ir.setTextAlign(Kr);let Rs="middle";qr.indexOf("bottom")==0?(Rs="bottom",Cs=-ps-.5*(kr-1)*Rr):qr.indexOf("top")==0&&(Rs="top",Cs=ps+.5*(kr-1)*Rr),ir.setTextBaseline(Rs);const vs=getValue(ar,"layout","text-justify",li,Mi,ti,Bi);ir.setJustify(vs==="auto"?void 0:vs),ir.setOffsetX(rs[0]*Rr+Ns+Ps[0]),ir.setOffsetY(rs[1]*Rr+Cs+Ps[1]),oi.setColor(colorWithOpacity(getValue(ar,"paint","text-color",li,Mi,ti,Bi),vr)),ir.setFill(oi);const Ts=colorWithOpacity(getValue(ar,"paint","text-halo-color",li,Mi,ti,Bi),vr);if(Ts&&ps>0){si.setColor(Ts),ps*=2;const Ms=.5*Rr;si.setWidth(ps<=Ms?ps:Ms),ir.setStroke(si)}else ir.setStroke(void 0);const Is=getValue(ar,"layout","text-padding",li,Mi,ti,Bi),js=ir.getPadding();Is!==js[0]&&(js[0]=Is,js[1]=Is,js[2]=Is,js[3]=Is),Sr.setZIndex(Hr)}}}if(er>-1)return ci.length=er+1,ci};return Ae.setStyle(Pi),Ae.set("mapbox-source",ii),Ae.set("mapbox-layers",Sn),Ae.set("mapbox-featurestate",Ae.get("mapbox-featurestate")||{}),Pi}function getTileResolutions(Ae,e=512){return Ae.getExtent()?createXYZ({extent:Ae.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(Ae,e){return e.accessToken||(e=Object.assign({},e),new URL(Ae).searchParams.forEach((Oe,ke)=>{e.accessToken=Oe,e.accessTokenParam=ke})),e}function applyStyle(Ae,e,t="",Oe={},ke=void 0){let Be,Ue,je,We,Qe=!0;return typeof t!="string"&&!Array.isArray(t)?(je=t,We=je.source||je.layers,Oe=je):We=t,typeof Oe=="string"?(Be=Oe,je={}):(Be=Oe.styleUrl,je=Oe),je.updateSource===!1&&(Qe=!1),ke||(ke=je.resolutions),!Be&&typeof e=="string"&&!e.trim().startsWith("{")&&(Be=e),Be&&(Be=Be.startsWith("data:")?location.href:normalizeStyleUrl(Be,je.accessToken),je=completeOptions(Be,je)),new Promise(function(Cn,An){getGlStyle(e,je).then(function(En){if(En.version!=8)return An(new Error("glStyle version 8 required."));if(!(Ae instanceof VectorLayer||Ae instanceof VectorTileLayer))return An(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Sn=Ae instanceof VectorTileLayer?"vector":"geojson";if(We?Array.isArray(We)?Ue=En.layers.find(function(oi){return oi.id===We[0]}).source:Ue=We:(Ue=Object.keys(En.sources).find(function(oi){return En.sources[oi].type===Sn}),We=Ue),!Ue)return An(new Error(`No ${Sn} source found in the glStyle.`));function Tn(){if(!Qe)return Promise.resolve();if(Ae instanceof VectorTileLayer)return setupVectorSource(En.sources[Ue],Be,je).then(function(Ai){const fi=Ae.getSource();fi?Ai!==fi&&(fi.setTileUrlFunction(Ai.getTileUrlFunction()),typeof fi.setUrls=="function"&&typeof Ai.getUrls=="function"&&fi.setUrls(Ai.getUrls()),fi.format_||(fi.format_=Ai.format_),fi.getAttributions()||fi.setAttributions(Ai.getAttributions()),fi.getTileLoadFunction()===defaultLoadFunction&&fi.setTileLoadFunction(Ai.getTileLoadFunction()),equivalent(fi.getProjection(),Ai.getProjection())&&(fi.tileGrid=Ai.getTileGrid())):Ae.setSource(Ai);const Oi=Ae.getSource().getTileGrid();!isFinite(Ae.getMaxResolution())&&!isFinite(Ae.getMinZoom())&&Oi.getMinZoom()>0&&Ae.setMaxResolution(getResolutionForZoom(Math.max(0,Oi.getMinZoom()-1e-12),Oi.getResolutions()))});const oi=En.sources[Ue];let ci=Ae.getSource();(!ci||ci.get("mapbox-source")!==oi)&&(ci=setupGeoJSONSource(oi,Be,je));const Pi=Ae.getSource();return Pi?ci!==Pi&&(Pi.getAttributions()||Pi.setAttributions(ci.getAttributions()),Pi.format_||(Pi.format_=ci.getFormat()),Pi.url_=ci.getUrl()):Ae.setSource(ci),Promise.resolve()}let Dn,ti,ni,ii;function si(){if(!ii&&(!En.sprite||ti)){if(je.projection&&!ke){const ci=get$3(je.projection).getUnits();ci!=="m"&&(ke=defaultResolutions.map(Pi=>Pi/METERS_PER_UNIT$1[ci]))}ii=stylefunction(Ae,En,We,ke,ti,ni,(oi,ci=je.webfonts)=>getFonts(oi,ci),je.getImage),Ae.getStyle()?Tn().then(Cn).catch(An):An(new Error(`Nothing to show for source [${Ue}]`))}else ii?(Ae.setStyle(ii),Tn().then(Cn).catch(An)):An(new Error("Something went wrong trying to apply style."))}if(En.sprite){const oi=new URL(normalizeSpriteUrl(En.sprite,je.accessToken,Be||location.href));Dn=window.devicePixelRatio>=1.5?.5:1;const ci=Dn==.5?"@2x":"";let Pi=oi.origin+oi.pathname+ci+".json"+oi.search;new Promise(function(Ai,fi){fetchResource("Sprite",Pi,je).then(Ai).catch(function(Oi){Pi=oi.origin+oi.pathname+".json"+oi.search,fetchResource("Sprite",Pi,je).then(Ai).catch(fi)})}).then(function(Ai){if(Ai===void 0&&An(new Error("No sprites found.")),ti=Ai,ni=oi.origin+oi.pathname+ci+".png"+oi.search,je.transformRequest){const fi=je.transformRequest(ni,"SpriteImage")||ni;(fi instanceof Request||fi instanceof Promise)&&(ni=fi)}si()}).catch(function(Ai){An(new Error(`Sprites cannot be loaded: ${Pi}: ${Ai.message}`))})}else si()}).catch(An)})}function extentFromTileJSON(Ae,e){const t=Ae.bounds;if(t){const Oe=fromLonLat([t[0],t[1]],e),ke=fromLonLat([t[2],t[3]],e);return[Oe[0],Oe[1],ke[0],ke[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(Ae,e,t){const Oe=new TileJSON({tileJSON:e,tileSize:Ae.tileSize||e.tileSize||512}),ke=Oe.getTileJSON(),Be=Oe.getTileGrid(),Ue=get$3(t.projection||"EPSG:3857"),je=extentFromTileJSON(ke,Ue),We=Ue.getExtent(),Qe=ke.minzoom||0,Cn=ke.maxzoom||22,An={attributions:Oe.getAttributions(),projection:Ue,tileGrid:new TileGrid({origin:We?getTopLeft(We):Be.getOrigin(0),extent:je||Be.getExtent(),minZoom:Qe,resolutions:getTileResolutions(Ue,e.tileSize).slice(0,Cn+1),tileSize:Be.getTileSize(0)})};return Array.isArray(ke.tiles)?An.urls=ke.tiles:An.url=ke.tiles,An}function setupVectorSource(Ae,e,t){return new Promise(function(Oe,ke){getTileJson(Ae,e,t).then(function({tileJson:Be,tileLoadFunction:Ue}){const je=sourceOptionsFromTileJSON(Ae,Be,t);je.tileLoadFunction=Ue,je.format=new MVT,Oe(new VectorTile(je))}).catch(ke)})}function getBboxTemplate(Ae){return`{bbox-${(Ae?Ae.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(Ae,e,t){const Oe=t.projection?new GeoJSON$1({dataProjection:t.projection}):new GeoJSON$1,ke=Ae.data,Be={};if(typeof ke=="string"){const[je]=normalizeSourceUrl(ke,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(je)){const Qe=(An,En,Sn)=>{const Tn=getBboxTemplate(Sn);return je.replace(Tn,`${An.join(",")}`)},Cn=new VectorSource({attributions:Ae.attribution,format:Oe,loader:(An,En,Sn,Tn,Dn)=>{const ti=typeof Qe=="function"?Qe(An,En,Sn):Qe;fetchResource("GeoJSON",ti,t).then(ni=>{const ii=Cn.getFormat().readFeatures(ni,{featureProjection:Sn});Cn.addFeatures(ii),Tn(ii)}).catch(ni=>{Cn.removeLoadedExtent(An),Dn()})},strategy:bbox});return Cn.set("mapbox-source",Ae),Cn}const We=new VectorSource({attributions:Ae.attribution,format:Oe,url:je,loader:(Qe,Cn,An,En,Sn)=>{fetchResource("GeoJSON",je,t).then(Tn=>{const Dn=We.getFormat().readFeatures(Tn,{featureProjection:An});We.addFeatures(Dn),En(Dn)}).catch(Tn=>{We.removeLoadedExtent(Qe),Sn()})}});return We}Be.features=Oe.readFeatures(ke,{featureProjection:"EPSG:3857"});const Ue=new VectorSource(Object.assign({attributions:Ae.attribution,format:Oe},Be));return Ue.set("mapbox-source",Ae),Ue}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Oe=e.ssl===!1?"http://":"https://",ke=e.configuration;if(!ke){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=e.layer+"$GEOPORTAIL:GPP:TMS";if(ke=Config.configuration.getLayerConf(Be),!ke)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var Ue=null,je="",We=e.style,Qe=0;Qe<ke.styles.length;Qe++){var Cn=ke.styles[Qe];if(We&&Cn.name===We){Ue=Cn.url,je=Cn.title;break}else if(!We&&Cn.current){We=Cn.name,Ue=Cn.url,je=Cn.title;break}}if(!Ue)throw new Error("ERROR : Style URL not found !?");Ue.replace(/(http|https):\/\//,Oe);var An=new VectorTile({state:"loading",format:new MVT});An._originators=ke.originators,An._legends=ke.legends,An._metadata=ke.metadata,An._description=ke.description,An._title=ke.title+" ("+je+")",An._quicklookUrl=ke.quicklookUrl;var En={source:An};return Helper.mergeParams(En,t),e.olParams&&!ke.originators&&(An._originators=e.olParams.attributions),super(En),this.name=e.layer,this.service="TMS",this.protocol=Oe,this.sourceId=e.source,this.styleUrl=Ue,this.config=ke,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(Oe){e.onStyleMapBoxLoad(Oe)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var Oe=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var ke=new TileJSON({url:t.url}),Be=this,Ue=ke.on("change",function(){if(ke.getState()==="ready"){var We=ke.getTileJSON();if(!We)return;Be.set("mapbox-extensions",We);for(var Qe=Array.isArray(We.tiles)?We.tiles:[We.tiles],Cn=0;Cn<t.tiles.length;Cn++)Qe[Cn].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(Qe),unByKey(Ue)}})}if(t.tiles){for(var je=0;je<t.tiles.length;je++)t.tiles[je].replace(/(http|https):\/\//,this.protocol);Oe.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{Oe.setState("ready"),this.set("mapbox-styles",e)}).catch(We=>{this.onStyleMapBoxError(We)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(Ae,e){var t=[...exceptions,e],Oe=[];if(Ae&&Ae.includes("left")){var ke=document.getElementById("position-container-bottom-left"),Be=document.getElementById("position-container-top-left");Oe=[...ke.children,...Be.children]}if(Ae&&Ae.includes("right")){var Ue=document.getElementById("position-container-bottom-right"),je=document.getElementById("position-container-top-right");Oe=[...Ue.children,...je.children]}return Oe.filter(We=>{var Qe=We.id.match(/(\w+)-[0-9]+/)[1],Cn=t.includes(Qe),An=We.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(An==="true"&&!Cn)return We})}var PanelManager=function(Ae,e){var t=getSameSideOpenedPanel(Ae,e);t.length>0&&t[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var Ae=getComputedStyle(document.documentElement),e=Ae.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Tl,Vf,md,nf;class PositionFactory{constructor(e){pd(this,Tl);return this.caller=e,this.container=null,pc(this,Tl,md).call(this,"top-left"),pc(this,Tl,md).call(this,"top-right"),pc(this,Tl,md).call(this,"bottom-left"),pc(this,Tl,md).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(pc(this,Tl,nf).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&pc(this,Tl,nf).call(this,e,!0)}}Tl=new WeakSet,Vf=function(e){var t=this.container.children["position-container-"+e];return!!t},md=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!pc(this,Tl,Vf).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},nf=function(e,t){var Oe=this;const ke=Cn=>{var An=Oe.container.children["position-container-"+Cn];return An.children.length},Be=Cn=>{var An=Oe.container.children["position-container-"+Cn],En=An.offsetWidth;return En},Ue=Cn=>{var An=Oe.container.children["position-container-"+Cn],En=An.offsetHeight;if(t){Cn.includes("top")&&(En=0);for(let Sn=0;Sn<An.children.length;Sn++){if(An.children[Sn].id===Oe.caller.element.id){En=Cn.includes("bottom")?En-Oe.caller.element.offsetHeight:En*-1;break}En-=An.children[Sn].offsetHeight}}return En},je=Cn=>{Cn.style.top="unset",Cn.style.bottom="unset",Cn.style.left="unset",Cn.style.right="unset"};je(this.caller.element),this.caller.element.style.position="unset";var We=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(We.length!==0){var Qe=0;We.forEach(Cn=>{if(Cn.nodeName.toLowerCase()==="dialog"){switch(je(Cn),e.toLowerCase()){case"top-left":checkDsfr()?Cn.style.top="0px":Cn.style.top=ke(e)?Ue(e)+"px":"0px",Cn.style.left=Be(e)+Qe+"px";break;case"bottom-left":checkDsfr()?Cn.style.top="0px":Cn.style.bottom=ke(e)?Ue(e)+"px":"0px",Cn.style.left=Be(e)+Qe+"px";break;case"top-right":checkDsfr()?Cn.style.top="0px":Cn.style.top=ke(e)?Ue(e)+"px":"0px",Cn.style.right=Be(e)+Qe+"px";break;case"bottom-right":checkDsfr()?Cn.style.top="0px":Cn.style.bottom=ke(e)?Ue(e)+"px":"0px",Cn.style.right=Be(e)+Qe+"px";break}Qe+=Cn.offsetWidth}})}};var SelectorID={generate:function(){var Ae=Math.floor(Date.now());return function(){return Ae++}}(),name:function(Ae){var e=null,t=Ae.lastIndexOf("-");return t===-1?e=Ae:e=Ae.substring(0,t),e},index:function(Ae){var e=null,t=this.name(Ae),Oe=t.lastIndexOf("_");return Oe!==-1&&(e=t.substring(Oe+1)),e},uuid:function(Ae){var e=null,t=Ae.lastIndexOf("-");return t!==-1&&(e=parseInt(Ae.substring(t+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(Ae,e){var t=Object.keys(Ae);if(Object.getOwnPropertySymbols){var Oe=Object.getOwnPropertySymbols(Ae);e&&(Oe=Oe.filter(function(ke){return Object.getOwnPropertyDescriptor(Ae,ke).enumerable})),t.push.apply(t,Oe)}return t}function _objectSpread2(Ae){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(Oe){_defineProperty(Ae,Oe,t[Oe])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ae,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(Oe){Object.defineProperty(Ae,Oe,Object.getOwnPropertyDescriptor(t,Oe))})}return Ae}function _typeof$1(Ae){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(Ae)}function _defineProperty(Ae,e,t){return e in Ae?Object.defineProperty(Ae,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Ae[e]=t,Ae}function _extends(){return _extends=Object.assign||function(Ae){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var Oe in t)Object.prototype.hasOwnProperty.call(t,Oe)&&(Ae[Oe]=t[Oe])}return Ae},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(Ae,e){if(Ae==null)return{};var t={},Oe=Object.keys(Ae),ke,Be;for(Be=0;Be<Oe.length;Be++)ke=Oe[Be],!(e.indexOf(ke)>=0)&&(t[ke]=Ae[ke]);return t}function _objectWithoutProperties(Ae,e){if(Ae==null)return{};var t=_objectWithoutPropertiesLoose(Ae,e),Oe,ke;if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Ae);for(ke=0;ke<Be.length;ke++)Oe=Be[ke],!(e.indexOf(Oe)>=0)&&Object.prototype.propertyIsEnumerable.call(Ae,Oe)&&(t[Oe]=Ae[Oe])}return t}var version="1.15.3";function userAgent(Ae){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(Ae)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(Ae,e,t){Ae.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(Ae,e,t){Ae.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(Ae,e){if(e){if(e[0]===">"&&(e=e.substring(1)),Ae)try{if(Ae.matches)return Ae.matches(e);if(Ae.msMatchesSelector)return Ae.msMatchesSelector(e);if(Ae.webkitMatchesSelector)return Ae.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(Ae){return Ae.host&&Ae!==document&&Ae.host.nodeType?Ae.host:Ae.parentNode}function closest(Ae,e,t,Oe){if(Ae){t=t||document;do{if(e!=null&&(e[0]===">"?Ae.parentNode===t&&matches(Ae,e):matches(Ae,e))||Oe&&Ae===t)return Ae;if(Ae===t)break}while(Ae=getParentOrHost(Ae))}return null}var R_SPACE=/\s+/g;function toggleClass(Ae,e,t){if(Ae&&e)if(Ae.classList)Ae.classList[t?"add":"remove"](e);else{var Oe=(" "+Ae.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");Ae.className=(Oe+(t?" "+e:"")).replace(R_SPACE," ")}}function css(Ae,e,t){var Oe=Ae&&Ae.style;if(Oe){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(Ae,""):Ae.currentStyle&&(t=Ae.currentStyle),e===void 0?t:t[e];!(e in Oe)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),Oe[e]=t+(typeof t=="string"?"":"px")}}function matrix(Ae,e){var t="";if(typeof Ae=="string")t=Ae;else do{var Oe=css(Ae,"transform");Oe&&Oe!=="none"&&(t=Oe+" "+t)}while(!e&&(Ae=Ae.parentNode));var ke=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return ke&&new ke(t)}function find(Ae,e,t){if(Ae){var Oe=Ae.getElementsByTagName(e),ke=0,Be=Oe.length;if(t)for(;ke<Be;ke++)t(Oe[ke],ke);return Oe}return[]}function getWindowScrollingElement(){var Ae=document.scrollingElement;return Ae||document.documentElement}function getRect(Ae,e,t,Oe,ke){if(!(!Ae.getBoundingClientRect&&Ae!==window)){var Be,Ue,je,We,Qe,Cn,An;if(Ae!==window&&Ae.parentNode&&Ae!==getWindowScrollingElement()?(Be=Ae.getBoundingClientRect(),Ue=Be.top,je=Be.left,We=Be.bottom,Qe=Be.right,Cn=Be.height,An=Be.width):(Ue=0,je=0,We=window.innerHeight,Qe=window.innerWidth,Cn=window.innerHeight,An=window.innerWidth),(e||t)&&Ae!==window&&(ke=ke||Ae.parentNode,!IE11OrLess))do if(ke&&ke.getBoundingClientRect&&(css(ke,"transform")!=="none"||t&&css(ke,"position")!=="static")){var En=ke.getBoundingClientRect();Ue-=En.top+parseInt(css(ke,"border-top-width")),je-=En.left+parseInt(css(ke,"border-left-width")),We=Ue+Be.height,Qe=je+Be.width;break}while(ke=ke.parentNode);if(Oe&&Ae!==window){var Sn=matrix(ke||Ae),Tn=Sn&&Sn.a,Dn=Sn&&Sn.d;Sn&&(Ue/=Dn,je/=Tn,An/=Tn,Cn/=Dn,We=Ue+Cn,Qe=je+An)}return{top:Ue,left:je,bottom:We,right:Qe,width:An,height:Cn}}}function isScrolledPast(Ae,e,t){for(var Oe=getParentAutoScrollElement(Ae,!0),ke=getRect(Ae)[e];Oe;){var Be=getRect(Oe)[t],Ue=void 0;if(Ue=ke>=Be,!Ue)return Oe;if(Oe===getWindowScrollingElement())break;Oe=getParentAutoScrollElement(Oe,!1)}return!1}function getChild(Ae,e,t,Oe){for(var ke=0,Be=0,Ue=Ae.children;Be<Ue.length;){if(Ue[Be].style.display!=="none"&&Ue[Be]!==Sortable.ghost&&(Oe||Ue[Be]!==Sortable.dragged)&&closest(Ue[Be],t.draggable,Ae,!1)){if(ke===e)return Ue[Be];ke++}Be++}return null}function lastChild(Ae,e){for(var t=Ae.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(Ae,e){var t=0;if(!Ae||!Ae.parentNode)return-1;for(;Ae=Ae.previousElementSibling;)Ae.nodeName.toUpperCase()!=="TEMPLATE"&&Ae!==Sortable.clone&&(!e||matches(Ae,e))&&t++;return t}function getRelativeScrollOffset(Ae){var e=0,t=0,Oe=getWindowScrollingElement();if(Ae)do{var ke=matrix(Ae),Be=ke.a,Ue=ke.d;e+=Ae.scrollLeft*Be,t+=Ae.scrollTop*Ue}while(Ae!==Oe&&(Ae=Ae.parentNode));return[e,t]}function indexOfObject(Ae,e){for(var t in Ae)if(Ae.hasOwnProperty(t)){for(var Oe in e)if(e.hasOwnProperty(Oe)&&e[Oe]===Ae[t][Oe])return Number(t)}return-1}function getParentAutoScrollElement(Ae,e){if(!Ae||!Ae.getBoundingClientRect)return getWindowScrollingElement();var t=Ae,Oe=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var ke=css(t);if(t.clientWidth<t.scrollWidth&&(ke.overflowX=="auto"||ke.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(ke.overflowY=="auto"||ke.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(Oe||e)return t;Oe=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(Ae,e){if(Ae&&e)for(var t in e)e.hasOwnProperty(t)&&(Ae[t]=e[t]);return Ae}function isRectEqual(Ae,e){return Math.round(Ae.top)===Math.round(e.top)&&Math.round(Ae.left)===Math.round(e.left)&&Math.round(Ae.height)===Math.round(e.height)&&Math.round(Ae.width)===Math.round(e.width)}var _throttleTimeout;function throttle(Ae,e){return function(){if(!_throttleTimeout){var t=arguments,Oe=this;t.length===1?Ae.call(Oe,t[0]):Ae.apply(Oe,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(Ae,e,t){Ae.scrollLeft+=e,Ae.scrollTop+=t}function clone(Ae){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(Ae).cloneNode(!0):t?t(Ae).clone(!0)[0]:Ae.cloneNode(!0)}function getChildContainingRectFromElement(Ae,e,t){var Oe={};return Array.from(Ae.children).forEach(function(ke){var Be,Ue,je,We;if(!(!closest(ke,e.draggable,Ae,!1)||ke.animated||ke===t)){var Qe=getRect(ke);Oe.left=Math.min((Be=Oe.left)!==null&&Be!==void 0?Be:1/0,Qe.left),Oe.top=Math.min((Ue=Oe.top)!==null&&Ue!==void 0?Ue:1/0,Qe.top),Oe.right=Math.max((je=Oe.right)!==null&&je!==void 0?je:-1/0,Qe.right),Oe.bottom=Math.max((We=Oe.bottom)!==null&&We!==void 0?We:-1/0,Qe.bottom)}}),Oe.width=Oe.right-Oe.left,Oe.height=Oe.bottom-Oe.top,Oe.x=Oe.left,Oe.y=Oe.top,Oe}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var Ae=[],e;return{captureAnimationState:function(){if(Ae=[],!!this.options.animation){var Oe=[].slice.call(this.el.children);Oe.forEach(function(ke){if(!(css(ke,"display")==="none"||ke===Sortable.ghost)){Ae.push({target:ke,rect:getRect(ke)});var Be=_objectSpread2({},Ae[Ae.length-1].rect);if(ke.thisAnimationDuration){var Ue=matrix(ke,!0);Ue&&(Be.top-=Ue.f,Be.left-=Ue.e)}ke.fromRect=Be}})}},addAnimationState:function(Oe){Ae.push(Oe)},removeAnimationState:function(Oe){Ae.splice(indexOfObject(Ae,{target:Oe}),1)},animateAll:function(Oe){var ke=this;if(!this.options.animation){clearTimeout(e),typeof Oe=="function"&&Oe();return}var Be=!1,Ue=0;Ae.forEach(function(je){var We=0,Qe=je.target,Cn=Qe.fromRect,An=getRect(Qe),En=Qe.prevFromRect,Sn=Qe.prevToRect,Tn=je.rect,Dn=matrix(Qe,!0);Dn&&(An.top-=Dn.f,An.left-=Dn.e),Qe.toRect=An,Qe.thisAnimationDuration&&isRectEqual(En,An)&&!isRectEqual(Cn,An)&&(Tn.top-An.top)/(Tn.left-An.left)===(Cn.top-An.top)/(Cn.left-An.left)&&(We=calculateRealTime(Tn,En,Sn,ke.options)),isRectEqual(An,Cn)||(Qe.prevFromRect=Cn,Qe.prevToRect=An,We||(We=ke.options.animation),ke.animate(Qe,Tn,An,We)),We&&(Be=!0,Ue=Math.max(Ue,We),clearTimeout(Qe.animationResetTimer),Qe.animationResetTimer=setTimeout(function(){Qe.animationTime=0,Qe.prevFromRect=null,Qe.fromRect=null,Qe.prevToRect=null,Qe.thisAnimationDuration=null},We),Qe.thisAnimationDuration=We)}),clearTimeout(e),Be?e=setTimeout(function(){typeof Oe=="function"&&Oe()},Ue):typeof Oe=="function"&&Oe(),Ae=[]},animate:function(Oe,ke,Be,Ue){if(Ue){css(Oe,"transition",""),css(Oe,"transform","");var je=matrix(this.el),We=je&&je.a,Qe=je&&je.d,Cn=(ke.left-Be.left)/(We||1),An=(ke.top-Be.top)/(Qe||1);Oe.animatingX=!!Cn,Oe.animatingY=!!An,css(Oe,"transform","translate3d("+Cn+"px,"+An+"px,0)"),this.forRepaintDummy=repaint(Oe),css(Oe,"transition","transform "+Ue+"ms"+(this.options.easing?" "+this.options.easing:"")),css(Oe,"transform","translate3d(0,0,0)"),typeof Oe.animated=="number"&&clearTimeout(Oe.animated),Oe.animated=setTimeout(function(){css(Oe,"transition",""),css(Oe,"transform",""),Oe.animated=!1,Oe.animatingX=!1,Oe.animatingY=!1},Ue)}}}}function repaint(Ae){return Ae.offsetWidth}function calculateRealTime(Ae,e,t,Oe){return Math.sqrt(Math.pow(e.top-Ae.top,2)+Math.pow(e.left-Ae.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*Oe.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(Oe){if(Oe.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,Oe){var ke=this;this.eventCanceled=!1,Oe.cancel=function(){ke.eventCanceled=!0};var Be=e+"Global";plugins.forEach(function(Ue){t[Ue.pluginName]&&(t[Ue.pluginName][Be]&&t[Ue.pluginName][Be](_objectSpread2({sortable:t},Oe)),t.options[Ue.pluginName]&&t[Ue.pluginName][e]&&t[Ue.pluginName][e](_objectSpread2({sortable:t},Oe)))})},initializePlugins:function(e,t,Oe,ke){plugins.forEach(function(je){var We=je.pluginName;if(!(!e.options[We]&&!je.initializeByDefault)){var Qe=new je(e,t,e.options);Qe.sortable=e,Qe.options=e.options,e[We]=Qe,_extends(Oe,Qe.defaults)}});for(var Be in e.options)if(e.options.hasOwnProperty(Be)){var Ue=this.modifyOption(e,Be,e.options[Be]);typeof Ue<"u"&&(e.options[Be]=Ue)}},getEventProperties:function(e,t){var Oe={};return plugins.forEach(function(ke){typeof ke.eventProperties=="function"&&_extends(Oe,ke.eventProperties.call(t[ke.pluginName],e))}),Oe},modifyOption:function(e,t,Oe){var ke;return plugins.forEach(function(Be){e[Be.pluginName]&&Be.optionListeners&&typeof Be.optionListeners[t]=="function"&&(ke=Be.optionListeners[t].call(e[Be.pluginName],Oe))}),ke}};function dispatchEvent(Ae){var e=Ae.sortable,t=Ae.rootEl,Oe=Ae.name,ke=Ae.targetEl,Be=Ae.cloneEl,Ue=Ae.toEl,je=Ae.fromEl,We=Ae.oldIndex,Qe=Ae.newIndex,Cn=Ae.oldDraggableIndex,An=Ae.newDraggableIndex,En=Ae.originalEvent,Sn=Ae.putSortable,Tn=Ae.extraEventProperties;if(e=e||t&&t[expando],!!e){var Dn,ti=e.options,ni="on"+Oe.charAt(0).toUpperCase()+Oe.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?Dn=new CustomEvent(Oe,{bubbles:!0,cancelable:!0}):(Dn=document.createEvent("Event"),Dn.initEvent(Oe,!0,!0)),Dn.to=Ue||t,Dn.from=je||t,Dn.item=ke||t,Dn.clone=Be,Dn.oldIndex=We,Dn.newIndex=Qe,Dn.oldDraggableIndex=Cn,Dn.newDraggableIndex=An,Dn.originalEvent=En,Dn.pullMode=Sn?Sn.lastPutMode:void 0;var ii=_objectSpread2(_objectSpread2({},Tn),PluginManager.getEventProperties(Oe,e));for(var si in ii)Dn[si]=ii[si];t&&t.dispatchEvent(Dn),ti[ni]&&ti[ni].call(e,Dn)}}var _excluded=["evt"],pluginEvent=function(e,t){var Oe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ke=Oe.evt,Be=_objectWithoutProperties(Oe,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:ke,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(je){_dispatchEvent({sortable:t,name:je,originalEvent:ke})}},Be))};function _dispatchEvent(Ae){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},Ae))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var Ae=document.createElement("x");return Ae.style.cssText="pointer-events:auto",Ae.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var Oe=css(e),ke=parseInt(Oe.width)-parseInt(Oe.paddingLeft)-parseInt(Oe.paddingRight)-parseInt(Oe.borderLeftWidth)-parseInt(Oe.borderRightWidth),Be=getChild(e,0,t),Ue=getChild(e,1,t),je=Be&&css(Be),We=Ue&&css(Ue),Qe=je&&parseInt(je.marginLeft)+parseInt(je.marginRight)+getRect(Be).width,Cn=We&&parseInt(We.marginLeft)+parseInt(We.marginRight)+getRect(Ue).width;if(Oe.display==="flex")return Oe.flexDirection==="column"||Oe.flexDirection==="column-reverse"?"vertical":"horizontal";if(Oe.display==="grid")return Oe.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Be&&je.float&&je.float!=="none"){var An=je.float==="left"?"left":"right";return Ue&&(We.clear==="both"||We.clear===An)?"vertical":"horizontal"}return Be&&(je.display==="block"||je.display==="flex"||je.display==="table"||je.display==="grid"||Qe>=ke&&Oe[CSSFloatProperty]==="none"||Ue&&Oe[CSSFloatProperty]==="none"&&Qe+Cn>ke)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,Oe){var ke=Oe?e.left:e.top,Be=Oe?e.right:e.bottom,Ue=Oe?e.width:e.height,je=Oe?t.left:t.top,We=Oe?t.right:t.bottom,Qe=Oe?t.width:t.height;return ke===je||Be===We||ke+Ue/2===je+Qe/2},_detectNearestEmptySortable=function(e,t){var Oe;return sortables.some(function(ke){var Be=ke[expando].options.emptyInsertThreshold;if(!(!Be||lastChild(ke))){var Ue=getRect(ke),je=e>=Ue.left-Be&&e<=Ue.right+Be,We=t>=Ue.top-Be&&t<=Ue.bottom+Be;if(je&&We)return Oe=ke}}),Oe},_prepareGroup=function(e){function t(Be,Ue){return function(je,We,Qe,Cn){var An=je.options.group.name&&We.options.group.name&&je.options.group.name===We.options.group.name;if(Be==null&&(Ue||An))return!0;if(Be==null||Be===!1)return!1;if(Ue&&Be==="clone")return Be;if(typeof Be=="function")return t(Be(je,We,Qe,Cn),Ue)(je,We,Qe,Cn);var En=(Ue?je:We).options.group.name;return Be===!0||typeof Be=="string"&&Be===En||Be.join&&Be.indexOf(En)>-1}}var Oe={},ke=e.group;(!ke||_typeof$1(ke)!="object")&&(ke={name:ke}),Oe.name=ke.name,Oe.checkPull=t(ke.pull,!0),Oe.checkPut=t(ke.put),Oe.revertClone=ke.revertClone,e.group=Oe},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(Ae){if(ignoreNextClick)return Ae.preventDefault(),Ae.stopPropagation&&Ae.stopPropagation(),Ae.stopImmediatePropagation&&Ae.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var Oe={};for(var ke in e)e.hasOwnProperty(ke)&&(Oe[ke]=e[ke]);Oe.target=Oe.rootEl=t,Oe.preventDefault=void 0,Oe.stopPropagation=void 0,t[expando]._onDragOver(Oe)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(Ae,e){if(!(Ae&&Ae.nodeType&&Ae.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(Ae));this.el=Ae,this.options=e=_extends({},e),Ae[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(Ae.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(Ae,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Ue,je){Ue.setData("Text",je.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,Ae,t);for(var Oe in t)!(Oe in e)&&(e[Oe]=t[Oe]);_prepareGroup(e);for(var ke in this)ke.charAt(0)==="_"&&typeof this[ke]=="function"&&(this[ke]=this[ke].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(Ae,"pointerdown",this._onTapStart):(on(Ae,"mousedown",this._onTapStart),on(Ae,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(Ae,"dragover",this),on(Ae,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,Oe=this.el,ke=this.options,Be=ke.preventOnFilter,Ue=e.type,je=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,We=(je||e).target,Qe=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||We,Cn=ke.filter;if(_saveInputCheckedState(Oe),!dragEl&&!(/mousedown|pointerdown/.test(Ue)&&e.button!==0||ke.disabled)&&!Qe.isContentEditable&&!(!this.nativeDraggable&&Safari&&We&&We.tagName.toUpperCase()==="SELECT")&&(We=closest(We,ke.draggable,Oe,!1),!(We&&We.animated)&&lastDownEl!==We)){if(oldIndex=index(We),oldDraggableIndex=index(We,ke.draggable),typeof Cn=="function"){if(Cn.call(this,e,We,this)){_dispatchEvent({sortable:t,rootEl:Qe,name:"filter",targetEl:We,toEl:Oe,fromEl:Oe}),pluginEvent("filter",t,{evt:e}),Be&&e.cancelable&&e.preventDefault();return}}else if(Cn&&(Cn=Cn.split(",").some(function(An){if(An=closest(Qe,An.trim(),Oe,!1),An)return _dispatchEvent({sortable:t,rootEl:An,name:"filter",targetEl:We,fromEl:Oe,toEl:Oe}),pluginEvent("filter",t,{evt:e}),!0}),Cn)){Be&&e.cancelable&&e.preventDefault();return}ke.handle&&!closest(Qe,ke.handle,Oe,!1)||this._prepareDragStart(e,je,We)}}},_prepareDragStart:function(e,t,Oe){var ke=this,Be=ke.el,Ue=ke.options,je=Be.ownerDocument,We;if(Oe&&!dragEl&&Oe.parentNode===Be){var Qe=getRect(Oe);if(rootEl=Be,dragEl=Oe,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=Oe,activeGroup=Ue.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-Qe.left,tapDistanceTop=tapEvt.clientY-Qe.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",We=function(){if(pluginEvent("delayEnded",ke,{evt:e}),Sortable.eventCanceled){ke._onDrop();return}ke._disableDelayedDragEvents(),!FireFox&&ke.nativeDraggable&&(dragEl.draggable=!0),ke._triggerDragStart(e,t),_dispatchEvent({sortable:ke,name:"choose",originalEvent:e}),toggleClass(dragEl,Ue.chosenClass,!0)},Ue.ignore.split(",").forEach(function(Cn){find(dragEl,Cn.trim(),_disableDraggable)}),on(je,"dragover",nearestEmptyInsertDetectEvent),on(je,"mousemove",nearestEmptyInsertDetectEvent),on(je,"touchmove",nearestEmptyInsertDetectEvent),on(je,"mouseup",ke._onDrop),on(je,"touchend",ke._onDrop),on(je,"touchcancel",ke._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),Ue.delay&&(!Ue.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(je,"mouseup",ke._disableDelayedDrag),on(je,"touchend",ke._disableDelayedDrag),on(je,"touchcancel",ke._disableDelayedDrag),on(je,"mousemove",ke._delayedDragTouchMoveHandler),on(je,"touchmove",ke._delayedDragTouchMoveHandler),Ue.supportPointer&&on(je,"pointermove",ke._delayedDragTouchMoveHandler),ke._dragStartTimer=setTimeout(We,Ue.delay)}else We()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var Oe=this.options;!e&&toggleClass(dragEl,Oe.dragClass,!1),toggleClass(dragEl,Oe.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var Oe=void 0;if(Oe=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),Oe&&!this.options.dragoverBubble)break}e=t}while(t=getParentOrHost(t));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,Oe=t.fallbackTolerance,ke=t.fallbackOffset,Be=e.touches?e.touches[0]:e,Ue=ghostEl&&matrix(ghostEl,!0),je=ghostEl&&Ue&&Ue.a,We=ghostEl&&Ue&&Ue.d,Qe=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),Cn=(Be.clientX-tapEvt.clientX+ke.x)/(je||1)+(Qe?Qe[0]-ghostRelativeParentInitialScroll[0]:0)/(je||1),An=(Be.clientY-tapEvt.clientY+ke.y)/(We||1)+(Qe?Qe[1]-ghostRelativeParentInitialScroll[1]:0)/(We||1);if(!Sortable.active&&!awaitingDragStarted){if(Oe&&Math.max(Math.abs(Be.clientX-this._lastX),Math.abs(Be.clientY-this._lastY))<Oe)return;this._onDragStart(e,!0)}if(ghostEl){Ue?(Ue.e+=Cn-(lastDx||0),Ue.f+=An-(lastDy||0)):Ue={a:1,b:0,c:0,d:1,e:Cn,f:An};var En="matrix(".concat(Ue.a,",").concat(Ue.b,",").concat(Ue.c,",").concat(Ue.d,",").concat(Ue.e,",").concat(Ue.f,")");css(ghostEl,"webkitTransform",En),css(ghostEl,"mozTransform",En),css(ghostEl,"msTransform",En),css(ghostEl,"transform",En),lastDx=Cn,lastDy=An,touchEvt=Be}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),Oe=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,Oe.ghostClass,!1),toggleClass(ghostEl,Oe.fallbackClass,!0),toggleClass(ghostEl,Oe.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var Oe=this,ke=e.dataTransfer,Be=Oe.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),Oe.cloneId=_nextTick(function(){pluginEvent("clone",Oe),!Sortable.eventCanceled&&(Oe.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),Oe._hideClone(),_dispatchEvent({sortable:Oe,name:"clone"}))}),!t&&toggleClass(dragEl,Be.dragClass,!0),t?(ignoreNextClick=!0,Oe._loopId=setInterval(Oe._emulateDragOver,50)):(off(document,"mouseup",Oe._onDrop),off(document,"touchend",Oe._onDrop),off(document,"touchcancel",Oe._onDrop),ke&&(ke.effectAllowed="move",Be.setData&&Be.setData.call(Oe,ke,dragEl)),on(document,"drop",Oe),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,Oe._dragStartId=_nextTick(Oe._dragStarted.bind(Oe,t,e)),on(document,"selectstart",Oe),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,Oe=e.target,ke,Be,Ue,je=this.options,We=je.group,Qe=Sortable.active,Cn=activeGroup===We,An=je.sort,En=putSortable||Qe,Sn,Tn=this,Dn=!1;if(_silent)return;function ti(lr,hr){pluginEvent(lr,Tn,_objectSpread2({evt:e,isOwner:Cn,axis:Sn?"vertical":"horizontal",revert:Ue,dragRect:ke,targetRect:Be,canSort:An,fromSortable:En,target:Oe,completed:ii,onMove:function(wr,Fi){return _onMove(rootEl,t,dragEl,ke,wr,getRect(wr),e,Fi)},changed:si},hr))}function ni(){ti("dragOverAnimationCapture"),Tn.captureAnimationState(),Tn!==En&&En.captureAnimationState()}function ii(lr){return ti("dragOverCompleted",{insertion:lr}),lr&&(Cn?Qe._hideClone():Qe._showClone(Tn),Tn!==En&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:Qe.options.ghostClass,!1),toggleClass(dragEl,je.ghostClass,!0)),putSortable!==Tn&&Tn!==Sortable.active?putSortable=Tn:Tn===Sortable.active&&putSortable&&(putSortable=null),En===Tn&&(Tn._ignoreWhileAnimating=Oe),Tn.animateAll(function(){ti("dragOverAnimationComplete"),Tn._ignoreWhileAnimating=null}),Tn!==En&&(En.animateAll(),En._ignoreWhileAnimating=null)),(Oe===dragEl&&!dragEl.animated||Oe===t&&!Oe.animated)&&(lastTarget=null),!je.dragoverBubble&&!e.rootEl&&Oe!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!lr&&nearestEmptyInsertDetectEvent(e)),!je.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),Dn=!0}function si(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,je.draggable),_dispatchEvent({sortable:Tn,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),Oe=closest(Oe,je.draggable,t,!0),ti("dragOver"),Sortable.eventCanceled)return Dn;if(dragEl.contains(e.target)||Oe.animated&&Oe.animatingX&&Oe.animatingY||Tn._ignoreWhileAnimating===Oe)return ii(!1);if(ignoreNextClick=!1,Qe&&!je.disabled&&(Cn?An||(Ue=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,Qe,dragEl,e))&&We.checkPut(this,Qe,dragEl,e))){if(Sn=this._getDirection(e,Oe)==="vertical",ke=getRect(dragEl),ti("dragOverValid"),Sortable.eventCanceled)return Dn;if(Ue)return parentEl=rootEl,ni(),this._hideClone(),ti("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),ii(!0);var oi=lastChild(t,je.draggable);if(!oi||_ghostIsLast(e,Sn,this)&&!oi.animated){if(oi===dragEl)return ii(!1);if(oi&&t===e.target&&(Oe=oi),Oe&&(Be=getRect(Oe)),_onMove(rootEl,t,dragEl,ke,Oe,Be,e,!!Oe)!==!1)return ni(),oi&&oi.nextSibling?t.insertBefore(dragEl,oi.nextSibling):t.appendChild(dragEl),parentEl=t,si(),ii(!0)}else if(oi&&_ghostIsFirst(e,Sn,this)){var ci=getChild(t,0,je,!0);if(ci===dragEl)return ii(!1);if(Oe=ci,Be=getRect(Oe),_onMove(rootEl,t,dragEl,ke,Oe,Be,e,!1)!==!1)return ni(),t.insertBefore(dragEl,ci),parentEl=t,si(),ii(!0)}else if(Oe.parentNode===t){Be=getRect(Oe);var Pi=0,Ai,fi=dragEl.parentNode!==t,Oi=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||ke,Oe.animated&&Oe.toRect||Be,Sn),Ni=Sn?"top":"left",ui=isScrolledPast(Oe,"top","top")||isScrolledPast(dragEl,"top","top"),li=ui?ui.scrollTop:void 0;lastTarget!==Oe&&(Ai=Be[Ni],pastFirstInvertThresh=!1,isCircumstantialInvert=!Oi&&je.invertSwap||fi),Pi=_getSwapDirection(e,Oe,Be,Sn,Oi?1:je.swapThreshold,je.invertedSwapThreshold==null?je.swapThreshold:je.invertedSwapThreshold,isCircumstantialInvert,lastTarget===Oe);var Ri;if(Pi!==0){var Mi=index(dragEl);do Mi-=Pi,Ri=parentEl.children[Mi];while(Ri&&(css(Ri,"display")==="none"||Ri===ghostEl))}if(Pi===0||Ri===Oe)return ii(!1);lastTarget=Oe,lastDirection=Pi;var Bi=Oe.nextElementSibling,er=!1;er=Pi===1;var nr=_onMove(rootEl,t,dragEl,ke,Oe,Be,e,er);if(nr!==!1)return(nr===1||nr===-1)&&(er=nr===1),_silent=!0,setTimeout(_unsilent,30),ni(),er&&!Bi?t.appendChild(dragEl):Oe.parentNode.insertBefore(dragEl,er?Bi:Oe),ui&&scrollBy(ui,0,li-ui.scrollTop),parentEl=dragEl.parentNode,Ai!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(Ai-getRect(Oe)[Ni])),si(),ii(!0)}if(t.contains(dragEl))return ii(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,Oe=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,Oe.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!Oe.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,Oe=this.el.children,ke=0,Be=Oe.length,Ue=this.options;ke<Be;ke++)t=Oe[ke],closest(t,Ue.draggable,this.el,!1)&&e.push(t.getAttribute(Ue.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var Oe={},ke=this.el;this.toArray().forEach(function(Be,Ue){var je=ke.children[Ue];closest(je,this.options.draggable,ke,!1)&&(Oe[Be]=je)},this),t&&this.captureAnimationState(),e.forEach(function(Be){Oe[Be]&&(ke.removeChild(Oe[Be]),ke.appendChild(Oe[Be]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var Oe=this.options;if(t===void 0)return Oe[e];var ke=PluginManager.modifyOption(this,e,t);typeof ke<"u"?Oe[e]=ke:Oe[e]=t,e==="group"&&_prepareGroup(Oe)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(Ae){Ae.dataTransfer&&(Ae.dataTransfer.dropEffect="move"),Ae.cancelable&&Ae.preventDefault()}function _onMove(Ae,e,t,Oe,ke,Be,Ue,je){var We,Qe=Ae[expando],Cn=Qe.options.onMove,An;return window.CustomEvent&&!IE11OrLess&&!Edge?We=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(We=document.createEvent("Event"),We.initEvent("move",!0,!0)),We.to=e,We.from=Ae,We.dragged=t,We.draggedRect=Oe,We.related=ke||e,We.relatedRect=Be||getRect(e),We.willInsertAfter=je,We.originalEvent=Ue,Ae.dispatchEvent(We),Cn&&(An=Cn.call(Qe,We,Ue)),An}function _disableDraggable(Ae){Ae.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(Ae,e,t){var Oe=getRect(getChild(t.el,0,t.options,!0)),ke=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Ae.clientX<ke.left-Be||Ae.clientY<Oe.top&&Ae.clientX<Oe.right:Ae.clientY<ke.top-Be||Ae.clientY<Oe.bottom&&Ae.clientX<Oe.left}function _ghostIsLast(Ae,e,t){var Oe=getRect(lastChild(t.el,t.options.draggable)),ke=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Ae.clientX>ke.right+Be||Ae.clientY>Oe.bottom&&Ae.clientX>Oe.left:Ae.clientY>ke.bottom+Be||Ae.clientX>Oe.right&&Ae.clientY>Oe.top}function _getSwapDirection(Ae,e,t,Oe,ke,Be,Ue,je){var We=Oe?Ae.clientY:Ae.clientX,Qe=Oe?t.height:t.width,Cn=Oe?t.top:t.left,An=Oe?t.bottom:t.right,En=!1;if(!Ue){if(je&&targetMoveDistance<Qe*ke){if(!pastFirstInvertThresh&&(lastDirection===1?We>Cn+Qe*Be/2:We<An-Qe*Be/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)En=!0;else if(lastDirection===1?We<Cn+targetMoveDistance:We>An-targetMoveDistance)return-lastDirection}else if(We>Cn+Qe*(1-ke)/2&&We<An-Qe*(1-ke)/2)return _getInsertDirection(e)}return En=En||Ue,En&&(We<Cn+Qe*Be/2||We>An-Qe*Be/2)?We>Cn+Qe/2?1:-1:0}function _getInsertDirection(Ae){return index(dragEl)<index(Ae)?1:-1}function _generateId(Ae){for(var e=Ae.tagName+Ae.className+Ae.src+Ae.href+Ae.textContent,t=e.length,Oe=0;t--;)Oe+=e.charCodeAt(t);return Oe.toString(36)}function _saveInputCheckedState(Ae){savedInputChecked.length=0;for(var e=Ae.getElementsByTagName("input"),t=e.length;t--;){var Oe=e[t];Oe.checked&&savedInputChecked.push(Oe)}}function _nextTick(Ae){return setTimeout(Ae,0)}function _cancelNextTick(Ae){return clearTimeout(Ae)}documentExists&&on(document,"touchmove",function(Ae){(Sortable.active||awaitingDragStarted)&&Ae.cancelable&&Ae.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(Ae){return Ae[expando]};Sortable.mount=function(){for(var Ae=arguments.length,e=new Array(Ae),t=0;t<Ae;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(Oe){if(!Oe.prototype||!Oe.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(Oe));Oe.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),Oe.utils)),PluginManager.mount(Oe)})};Sortable.create=function(Ae,e){return new Sortable(Ae,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function Ae(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return Ae.prototype={dragStarted:function(t){var Oe=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):Oe.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var Oe=t.originalEvent;!this.options.dragOverBubble&&!Oe.rootEl&&this._handleAutoScroll(Oe)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,Oe){var ke=this,Be=(t.touches?t.touches[0]:t).clientX,Ue=(t.touches?t.touches[0]:t).clientY,je=document.elementFromPoint(Be,Ue);if(touchEvt$1=t,Oe||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,je,Oe);var We=getParentAutoScrollElement(je,!0);scrolling&&(!pointerElemChangedInterval||Be!==lastAutoScrollX||Ue!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var Qe=getParentAutoScrollElement(document.elementFromPoint(Be,Ue),!0);Qe!==We&&(We=Qe,clearAutoScrolls()),autoScroll(t,ke.options,Qe,Oe)},10),lastAutoScrollX=Be,lastAutoScrollY=Ue)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(je,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(je,!1),!1)}}},_extends(Ae,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(Ae){clearInterval(Ae.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(Ae,e,t,Oe){if(e.scroll){var ke=(Ae.touches?Ae.touches[0]:Ae).clientX,Be=(Ae.touches?Ae.touches[0]:Ae).clientY,Ue=e.scrollSensitivity,je=e.scrollSpeed,We=getWindowScrollingElement(),Qe=!1,Cn;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,Cn=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var An=0,En=scrollEl;do{var Sn=En,Tn=getRect(Sn),Dn=Tn.top,ti=Tn.bottom,ni=Tn.left,ii=Tn.right,si=Tn.width,oi=Tn.height,ci=void 0,Pi=void 0,Ai=Sn.scrollWidth,fi=Sn.scrollHeight,Oi=css(Sn),Ni=Sn.scrollLeft,ui=Sn.scrollTop;Sn===We?(ci=si<Ai&&(Oi.overflowX==="auto"||Oi.overflowX==="scroll"||Oi.overflowX==="visible"),Pi=oi<fi&&(Oi.overflowY==="auto"||Oi.overflowY==="scroll"||Oi.overflowY==="visible")):(ci=si<Ai&&(Oi.overflowX==="auto"||Oi.overflowX==="scroll"),Pi=oi<fi&&(Oi.overflowY==="auto"||Oi.overflowY==="scroll"));var li=ci&&(Math.abs(ii-ke)<=Ue&&Ni+si<Ai)-(Math.abs(ni-ke)<=Ue&&!!Ni),Ri=Pi&&(Math.abs(ti-Be)<=Ue&&ui+oi<fi)-(Math.abs(Dn-Be)<=Ue&&!!ui);if(!autoScrolls[An])for(var Mi=0;Mi<=An;Mi++)autoScrolls[Mi]||(autoScrolls[Mi]={});(autoScrolls[An].vx!=li||autoScrolls[An].vy!=Ri||autoScrolls[An].el!==Sn)&&(autoScrolls[An].el=Sn,autoScrolls[An].vx=li,autoScrolls[An].vy=Ri,clearInterval(autoScrolls[An].pid),(li!=0||Ri!=0)&&(Qe=!0,autoScrolls[An].pid=setInterval((function(){Oe&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Bi=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*je:0,er=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*je:0;typeof Cn=="function"&&Cn.call(Sortable.dragged.parentNode[expando],er,Bi,Ae,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,er,Bi)}).bind({layer:An}),24))),An++}while(e.bubbleScroll&&En!==We&&(En=getParentAutoScrollElement(En,!1)));scrolling=Qe}},30),drop=function(e){var t=e.originalEvent,Oe=e.putSortable,ke=e.dragEl,Be=e.activeSortable,Ue=e.dispatchSortableEvent,je=e.hideGhostForTarget,We=e.unhideGhostForTarget;if(t){var Qe=Oe||Be;je();var Cn=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,An=document.elementFromPoint(Cn.clientX,Cn.clientY);We(),Qe&&!Qe.el.contains(An)&&(Ue("spill"),this.onSpill({dragEl:ke,putSortable:Oe}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,Oe=e.putSortable;this.sortable.captureAnimationState(),Oe&&Oe.captureAnimationState();var ke=getChild(this.sortable.el,this.startIndex,this.options);ke?this.sortable.el.insertBefore(t,ke):this.sortable.el.appendChild(t),this.sortable.animateAll(),Oe&&Oe.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,Oe=e.putSortable,ke=Oe||this.sortable;ke.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),ke.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(Ae,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(Ae,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}}):Sortable.create(Ae,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(Oe){e._onEndDragAndDropLayerClick(Oe)}})},_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPlayerSwitcher"),Ae.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",Ae},_createMainLayersShowElement:function(){var Ae=document.createElement("input");return Ae.id=this._addUID("GPshowLayersList"),Ae.type="checkbox",Ae},_createMainLayersElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPlayersList"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createMainLayersDivElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelBody gpf-panel__body_ls fr-modal__body",Ae},_createMainPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),document.getElementById(Ae._addUID("GPshowLayersList")).checked=ke,document.getElementById(Ae._addUID("GPshowLayersList")).checked&&(document.getElementById(Ae._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Ae._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Ae.onShowLayerSwitcherClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),document.getElementById(Ae._addUID("GPshowLayersList")).checked&&(document.getElementById(Ae._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Ae._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Ae.onShowLayerSwitcherClick(Oe)}),e},_createMainCounterLayersElement:function(){var Ae=document.createElement("span");return Ae.id=this._addUID("GPlayerCounter"),Ae.className="GPlayerCounter",Ae.innerHTML="0",Ae},_createMainInfoElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPlayerInfoPanel"),Ae.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",Ae},_createMainInfoDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createLayersPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader gpf-panel__header_ls",Ae},_createLayersPanelIconElement:function(){var Ae=document.createElement("label");return Ae.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",Ae.title="Couches de données",Ae},_createLayersPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelTitle gpf-panel__title_ls",Ae.id=this._addUID("GPlayersHeaderTitle"),Ae.innerHTML="Couches de données",Ae},_createLayersPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible fr-mx-1w",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(Ae){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+Ae.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(Ae)),e.appendChild(this._createAdvancedToolShowElement(Ae)),e.appendChild(this._createAdvancedToolElement(Ae)),e},_createBasicToolElement:function(Ae){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+Ae.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(Ae)),e.appendChild(this._createBasicToolVisibilityElement(Ae)),e.appendChild(this._createBasicToolDragNDropElement(Ae)),e},_createBasicToolDragNDropElement:function(Ae){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+Ae.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var t=this;return e.addEventListener?e.addEventListener("click",function(Oe){t._onStartDragAndDropLayerClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){t._onStartDragAndDropLayerClick(Oe)}),e},_createBasicToolNameElement:function(Ae){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+Ae.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=Ae.description||Ae.title,e.innerHTML=Ae.title,e},_createBasicToolVisibilityElement:function(Ae){var e=typeof Ae.visibility<"u"?Ae.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+Ae.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onVisibilityLayerClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onVisibilityLayerClick(ke)}),t},_createAdvancedToolShowElement:function(Ae){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+Ae.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke);var Be=document.getElementById(t._addUID("GPadvancedTools_ID_"+Ae.id));ke?(Be.classList.replace("GPelementVisible","GPelementHidden"),Be.classList.replace("gpf-visible","gpf-hidden")):(Be.classList.replace("GPelementHidden","GPelementVisible"),Be.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(Ae){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+Ae.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(Ae)),e.appendChild(this._createAdvancedToolInformationElement(Ae)),Ae.type!=="feature")for(var t=this._createAdvancedToolOpacityElement(Ae),Oe=0;Oe<t.length;Oe++)e.appendChild(t[Oe]);if(e.appendChild(this._createAdvancedToolExtentElement(Ae)),checkDsfr()){var ke=document.createElement("button");ke.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",ke.setAttribute("aria-pressed",!1),ke.addEventListener?ke.addEventListener("click",function(Ue){var je=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!je)}):ke.attachEvent&&ke.attachEvent("onclick",function(Ue){var je=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!je)});var Be=document.createElement("div");Be.appendChild(this._createAdvancedToolDeleteElement(Ae,!0)),Be.appendChild(this._createAdvancedToolInformationElement(Ae,!0)),Be.appendChild(this._createAdvancedToolExtentElement(Ae,!0)),e.appendChild(ke),e.appendChild(Be)}return e},_createAdvancedToolDeleteElement:function(Ae,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPremoveContextual_ID_"+Ae.id):t.id=this._addUID("GPremove_ID_"+Ae.id),t.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Supprimer la couche",t.layerId=Ae.id,e&&(t.innerText="Supprimer"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){Oe._onDropLayerClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){Oe._onDropLayerClick(ke)}),t},_createAdvancedToolInformationElement:function(Ae,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPinfoContextual_ID_"+Ae.id):t.id=this._addUID("GPinfo_ID_"+Ae.id),t.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!Ae.title||!Ae.description)&&(t.style.opacity="0",t.style.visibility="hidden",e&&(t.style.display="none")),t.title="Informations/légende",t.layerId=Ae.id,e&&(t.innerText="Informations"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){Oe._onOpenLayerInfoClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){Oe._onOpenLayerInfoClick(ke)}),t},_createAdvancedToolOpacityElement:function(Ae){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+Ae.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.title="Opacité";var Oe=typeof Ae.opacity<"u"?Ae.opacity:1;Oe=Math.round(Oe*100),t.style.setProperty("--progress-right",Oe+"%");var ke=document.createElement("input");ke.id=this._addUID("GPopacityValueDiv_ID_"+Ae.id),ke.type="range",ke.value=Oe,ke.ariaLabel="Opacité";var Be=this;ke.addEventListener?ke.addEventListener("change",function(We){Be._onChangeLayerOpacity(We)}):ke.attachEvent&&ke.attachEvent("onchange",function(We){Be._onChangeLayerOpacity(We)}),ke.addEventListener?ke.addEventListener("input",function(We){Be._onChangeLayerOpacity(We)}):ke.attachEvent&&ke.attachEvent("oninput",function(We){Be._onChangeLayerOpacity(We)}),t.appendChild(ke);var Ue=document.createElement("div");Ue.id=this._addUID("GPopacityValueDiv_ID_"+Ae.id),Ue.className="GPlayerOpacityValue";var je=document.createElement("span");return je.id=this._addUID("GPopacityValue_ID_"+Ae.id),je.className="gpf-range__output fr-range__output gpf-visible",je.innerHTML=Oe+"%",Ue.appendChild(je),e.push(t),e.push(Ue),e},_createAdvancedToolExtentElement:function(Ae,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPextentContextual_ID_"+Ae.id):t.id=this._addUID("GPextent_ID_"+Ae.id),t.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Zoomer dans l'étendue",t.layerId=Ae.id,e&&(t.innerText="Zoomer"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.setAttribute("type","button");var Oe=this;return t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onZoomToExtentClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onZoomToExtentClick(ke)}),t},_createContainerLayerInfoElement:function(Ae){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var Oe=document.createElement("label");Oe.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",Oe.title="Informations",t.appendChild(Oe);var ke=document.createElement("div");ke.id=this._addUID("GPlayerInfoTitle"),ke.innerHTML=Ae.title,ke.className="gpf-panel__title_ls",t.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPlayerInfoClose"),Be.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer la fenêtre";var Ue=this,je=function(){document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Ae.id).classList.add("GPlayerInfoClosed"),document.getElementById(Ae.id).classList.remove("GPlayerInfoOpened")};Be.addEventListener?Be.addEventListener("click",je):Be.attachEvent&&Be.attachEvent("onclick",je),this.addEventListener("layerswitcher:remove",Ri=>{parseInt(Ae.id.split("-")[0].split("GPinfo_ID_")[1])===Ri.layer.id&&(document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Ue._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),t.appendChild(Be),e.appendChild(t);var We=document.createElement("div");if(We.id=this._addUID("GPlayerInfoContent"),We.className="gpf-panel__content fr-modal__content",e.appendChild(We),Ae.quicklookUrl){var Qe=document.createElement("div");Qe.id=this._addUID("GPlayerInfoQuicklook"),Qe.title="Afficher un aperçu de la couche";var Cn=document.createElement("a");Cn.href=Ae.quicklookUrl,Cn.appendChild(Qe),We.appendChild(Cn)}var An=document.createElement("div");if(An.id=this._addUID("GPlayerInfoDescription"),An.innerHTML=Ae.description,We.appendChild(An),Ae.metadata){var En=document.createElement("div");En.id=this._addUID("GPlayerInfoMetadata");var Sn=document.createElement("div");Sn.className="GPlayerInfoSubtitle",Sn.innerHTML="Métadonnées",En.appendChild(Sn);for(var Tn=0;Tn<Ae.metadata.length;Tn++){var Dn=Ae.metadata[Tn].url,ti=document.createElement("div");ti.className="GPlayerInfoLink";var ni=document.createElement("a");ni.href=Dn,ni.innerHTML=Dn,ti.appendChild(ni),En.appendChild(ti)}Ae.metadata.length!==0&&We.appendChild(En)}if(Ae.legends){var ii=document.createElement("div");ii.id=this._addUID("GPlayerInfoLegend");var si=document.createElement("div");si.className="GPlayerInfoSubtitle",si.innerHTML="Légende",ii.appendChild(si);for(var oi={},ci=Ae.maxScaleDenominator||56e7,Pi=0;Pi<Ae.legends.length;Pi++){var Ai=Ae.legends[Pi].minScaleDenominator;if(Ai){var fi=Ai.toString();Ai=Math.round(parseInt(fi.substring(0,3),10)/10)*Math.pow(10,fi.length-2)}else Ai=270;oi[Ai]=Ae.legends[Pi]}for(var Oi in oi)if(oi.hasOwnProperty(Oi)){var Ni=oi[Oi].url;if(typeof Ni=="string"&&Ni.toLowerCase().indexOf("nolegend.jpg")===-1){var ui=document.createElement("div");ui.className="GPlayerInfoLink",ci=oi[Oi].maxScaleDenominator||ci;var li=document.createElement("a");li.className="fr-link",li.href=Ni,li.target="_blank",li.innerHTML="Du 1/"+Oi+" au 1/"+ci,ui.appendChild(li),ii.appendChild(ui)}else delete oi[Oi]}Object.keys(oi).length!==0&&We.appendChild(ii)}return e}},logger$A=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class zf extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},Oe=e.layers||[];if(super(t),!(this instanceof zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(Oe))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,Oe),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",Oe=>{var ke=Oe.element,Be;ke.hasOwnProperty("gpLayerId")?Be=ke.gpLayerId:(Be=this._layerId,ke.gpLayerId=Be,this._layerId++),this._layers[Be]||this.addLayer(ke)}),this._listeners.onRemoveListener=e.getLayers().on("remove",Oe=>{var ke=Oe.element,Be=ke.gpLayerId;this._layers[Be]&&this.removeLayer(ke)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,t){var Oe=this.getMap();if(t=t||{},!e){logger$A.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var ke=e.gpLayerId;if(typeof ke>"u"){logger$A.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Be=!1;if(Oe.getLayers().forEach(ti=>{ti.gpLayerId===ke&&(Be=!0)}),!Be){logger$A.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[ke]){for(var En in t)t.hasOwnProperty(En)&&(this._layers[ke][En]=t[En]);if(t.title){var Sn=document.getElementById(this._addUID("GPname_ID_"+ke));Sn&&(Sn.innerHTML=t.title,Sn.title=t.description||t.title)}var Tn=document.getElementById(this._addUID("GPinfo_ID_"+ke));if(!document.getElementById(this._addUID("GPinfo_ID_"+ke))&&t.description){var Dn=document.getElementById(this._addUID("GPadvancedTools_ID_"+ke));Dn&&Dn.appendChild(this._createAdvancedToolInformationElement({id:ke}))}Tn&&Tn.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var Ue=this.getLayerInfo(e)||{},je=e.getOpacity(),We=e.getVisible(),Qe=this.isInRange(e,Oe),Cn={layer:e,id:ke,name:e.name,service:e.service,opacity:je??1,visibility:We??!0,inRange:Qe??!0,title:t.title!=null?t.title:Ue._title||ke,description:t.description||Ue._description||null,legends:t.legends||Ue._legends||[],metadata:t.metadata||Ue._metadata||[],quicklookUrl:t.quicklookUrl||Ue._quicklookUrl||null};this._layers[ke]=Cn;var An=this._createLayerDiv(Cn);this._layers[ke].div=An,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(Cn),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(An,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners.updateLayerVisibility=e.on("change:visible",ti=>this._updateLayerVisibility(ti)),this._layers[ke].onZIndexChangeEvent==null&&(this._layers[ke].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[ke]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$A.trace(e);var t=e.gpLayerId,Oe=document.getElementById(this._addUID("GPinfo_ID_"+t));Oe&&Oe.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var ke=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));ke&&this._layerListContainer.removeChild(ke);var Be=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Be,1),this._lastZIndex--;for(var Ue=this._layersOrder,je=0;je<Ue.length;je++)Ue[je].layer.setZIndex(this._lastZIndex-je);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$A.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var Oe=e.gpLayerId;if(Oe==null){logger$A.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var ke=document.getElementById(this._addUID("GPremove_ID_"+Oe));ke&&(t===!1?ke.style.display="none":t===!0&&(ke.style.display="block"))}}getContainer(){return this.container}_initialize(e,t){this._uid=e.id||SelectorID.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe].layer;if(ke){var Be;ke.hasOwnProperty("gpLayerId")?Be=ke.gpLayerId:(Be=this._layerId,ke.gpLayerId=Be,this._layerId++);var Ue=t[Oe].config||{},je=ke.getOpacity(),We=ke.getVisible(),Qe={layer:ke,id:Be,name:ke.name,service:ke.service,opacity:je??1,visibility:We??!0,title:Ue.title!=null?Ue.title:Ue.id?Ue.id:Be,description:Ue.description||null,legends:Ue.legends||[],metadata:Ue.metadata||[],quicklookUrl:Ue.quicklookUrl||null};this._layers[Be]=Qe}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var Oe=this,ke=function(Dn){this.collapsed=!Dn.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(Dn){ke.call(Oe,Dn)});var Be=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Be),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var Ue=this._layerSwitcherCounter=this._createMainCounterLayersElement();Be.appendChild(Ue)}var je=this._createMainLayersElement();if(e.appendChild(je),this.options.panel){var We=this._createLayersPanelHeaderElement();je.appendChild(We);var Qe=this._createLayersPanelIconElement();We.appendChild(Qe);var Cn=this._createLayersPanelTitleElement();We.appendChild(Cn);var An=this._createLayersPanelCloseElement();We.appendChild(An)}var En=this._layerListContainer=this._createMainLayersDivElement();je.appendChild(En),this._createDraggableElement(En,this);var Sn=this._createMainInfoElement(),Tn=this._createMainInfoDivElement();return Sn.appendChild(Tn),e.appendChild(Sn),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(We=>{var Qe=null;We.hasOwnProperty("gpLayerId")?Qe=We.gpLayerId:(Qe=this._layerId,We.gpLayerId=Qe,this._layerId++);var Cn=this.getLayerInfo(We)||{};if(this._layers[Qe])this._layers[Qe].opacity=We.getOpacity(),this._layers[Qe].visibility=We.getVisible(),this._layers[Qe].inRange=this.isInRange(We,e);else{var An=We.getOpacity(),En=We.getVisible(),Sn=this.isInRange(We,e),Tn={layer:We,id:Qe,name:We.name,service:We.service,opacity:An??1,visibility:En??!0,inRange:Sn??!0,title:Cn._title||Qe,description:Cn._description||null,legends:Cn._legends||[],metadata:Cn._metadata||[],quicklookUrl:Cn._quicklookUrl||null};this._layers[Qe]=Tn}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=We.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners._updateLayerVisibility=We.on("change:visible",ti=>this._updateLayerVisibility(ti)),We.getZIndex!==void 0){var Dn=We.getZIndex()||0;(!this._layersIndex[Dn]||!Array.isArray(this._layersIndex[Dn]))&&(this._layersIndex[Dn]=[]),this._layersIndex[Dn].push(this._layers[Qe])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var Oe=this._layersIndex[t],ke=0;ke<Oe.length;ke++)this._layersOrder.unshift(Oe[ke]),this._lastZIndex++,Oe[ke].layer.setZIndex(this._lastZIndex),this._layers[Oe[ke].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Oe[ke].layer.gpLayerId].onZIndexChangeEvent=Oe[ke].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Be=0;Be<this._layersOrder.length;Be++){var Ue=this._layersOrder[Be],je=this._createLayerDiv(Ue);this._layerListContainer.querySelector("#"+je.id)||this._layerListContainer.appendChild(je),this._layers[Ue.id].div=je}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,Oe=e.metadata&&e.metadata.length!==0,ke=e.quicklookUrl;(t||Oe||ke)&&(e.displayInformationElement=!0);var Be=this._createContainerLayerElement(e);return e.inRange||Be.classList.add("outOfRange"),Be}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this._showLayerSwitcherButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer,Be=e.target.value,Ue=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));Ue.innerHTML=Be+"%",ke.setOpacity(Be/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var Oe=e.target.gpLayerId,ke=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+Oe));ke&&(ke.value=Math.round(t*100));var Be=document.getElementById(this._addUID("GPopacityValue_ID_"+Oe));Be&&(Be.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[Oe]})}_onVisibilityLayerClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer;ke.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),Oe=e.target.gpLayerId,ke=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+Oe));ke&&(ke.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[Oe]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,Oe;e.getLayers().forEach(Qe=>{Oe=Qe.gpLayerId,unByKey(this._layers[Oe].onZIndexChangeEvent),this._layers[Oe].onZIndexChangeEvent=null,t=null,Qe.getZIndex!==void 0&&(t=Qe.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[Oe]))}),this._lastZIndex=0,this._layersOrder=[];for(var ke in this._layersIndex)if(this._layersIndex.hasOwnProperty(ke))for(var Be=this._layersIndex[ke],Ue=0;Ue<Be.length;Ue++)this._layersOrder.unshift(Be[Ue]),this._lastZIndex++,this._layers[Be[Ue].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Be[Ue].layer.gpLayerId].onZIndexChangeEvent=Be[Ue].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let Qe=0;Qe<this._layerListContainer.childNodes.length;Qe++){const Cn=this._layerListContainer.childNodes[Qe];Cn.id!==""&&Cn.remove()}for(var je=0;je<this._layersOrder.length;je++){var We=this._layersOrder[je];this._layerListContainer.appendChild(We.div)}}else logger$A.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe],Be,Ue,je=document.getElementById(e.target.id);if(je.classList.contains("GPlayerInfoOpened")){je.classList.remove("GPlayerInfoOpened"),je.classList.add("GPlayerInfoClosed"),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Be.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),Ue=document.getElementById(this._addUID("GPlayerInfoContent")),Ue&&Ue.parentNode.remove();return}je.classList.contains("GPlayerInfoClosed")&&(je.classList.remove("GPlayerInfoClosed"),je.classList.add("GPlayerInfoOpened")),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Be.classList.add("GPlayerInfoPanelOpened","gpf-visible"),Ue=document.getElementById(this._addUID("GPlayerInfoContent")),Ue&&Ue.parentNode.remove();var We={id:t,title:ke.title,description:ke.description,quicklookUrl:ke.quicklookUrl,metadata:ke.metadata,legends:ke.legends},Qe=ke.layer.getMaxResolution();Qe===1/0?We._maxScaleDenominator=56e7:We._maxScaleDenominator=Math.round(Qe/28e-5);var Cn=this._createContainerLayerInfoElement(We);Be.firstChild.appendChild(Cn)}_onDropLayerClick(e){var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe].layer;this.getMap().getLayers().remove(ke)}_onEndDragAndDropLayerClick(e){logger$A.trace(e);var t=this.getMap(),Oe=document.querySelectorAll("div.GPlayerSwitcher_layer"),ke=Oe.length;this._layersOrder=[];for(var Be=0;Be<Oe.length;Be++){var Ue=Oe[Be].id,je=SelectorID.index(Ue),We=this._layers[je].layer;unByKey(this._layers[je].onZIndexChangeEvent),this._layers[je].onZIndexChangeEvent=null,We.setZIndex&&(We.setZIndex(ke),this._layersOrder.push(this._layers[je]),ke--),this._layers[je].onZIndexChangeEvent==null&&(this._layers[je].onZIndexChangeEvent=We.on("change:zIndex",()=>this._updateLayersOrder()))}t.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$A.debug(e)}_onZoomToExtentClick(e){logger$A.debug(e);var t=e.target.id,Oe=SelectorID.index(t),ke=this._layers[Oe],Be=null,Ue=null,je=this.getMap();if(ke.layer.hasOwnProperty("gpResultLayerId")&&(ke.layer.gpResultLayerId.split(":")[0]==="layerimport"||ke.layer.gpResultLayerId.split(":")[0]==="drawing"||ke.layer.gpResultLayerId.split(":")[0]==="compute"||ke.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(je.getView()&&je.getSize()){var We=ke.layer.getExtent();if(!We){var Qe=ke.layer.getSource();Qe&&Qe.getExtent?We=Qe.getExtent():We=Qe.getTileGrid().getExtent()}We&&We[0]!==1/0&&je.getView().fit(We,je.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Cn=ke.layer.name||ke.layer.getSource().name,An=ke.layer.service||ke.layer.getSource().service,En=Config.configuration.getLayerId(Cn,An);if(!En)throw"ERROR : Layer ID not found into the catalogue !?";var Sn=Config.configuration.getGlobalConstraints(En);if(Sn){if(!je||!je.getView())return;var Tn=je.getView(),Dn=Tn.getProjection(),ti=[Sn.extent.left,Sn.extent.bottom,Sn.extent.right,Sn.extent.top],ni=Sn.crs;ni||(ni="EPSG:4326"),Be=transformExtent(ti,ni,Dn),Be&&Tn.fit(Be)}}catch(ii){Ue=ii}this.dispatchEvent({type:"layerswitcher:extent",extent:Be,layer:ke,error:Ue})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var Oe=t.gpLayerId;if(this._layers[Oe]){var ke=this._layers[Oe],Be;this.isInRange(t,e)&&!ke.inRange?(ke.inRange=!0,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Be.classList.remove("outOfRange")):!this.isInRange(t,e)&&ke.inRange&&(ke.inRange=!1,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Oe)),Be.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(Oe=>{Oe===e&&(t=Oe.hasOwnProperty("gpLayerId")?Oe.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var Oe=t.getView().getResolution();if(Oe>e.getMaxResolution()||Oe<e.getMinResolution())return!1;var ke=t.getView().calculateExtent(t.getSize()),Be=e.getExtent();return!(Be&&!intersects$1(ke,Be))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var Oe=e.getProperties(),ke=Oe.source;ke&&(t._title=ke._title||Oe.title||Oe.id||"",t._description=ke._description||Oe.description||"",t._quicklookUrl=ke._quicklookUrl||Oe.quicklookUrl||"",t._metadata=ke._metadata||Oe.metadata||[],t._legends=ke._legends||Oe.legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(Ae,e,t){let Oe=0,ke=0,Be=0,Ue=0,je=0,We=0;e?e.addEventListener("mousedown",An,!0):Ae.addEventListener("mousedown",An,!0);var Qe,Cn={bottom:0,left:0,right:0,top:0};function An(Tn){Tn=Tn||window.event,Tn.preventDefault(),Oe=Tn.clientX,ke=Tn.clientY,Qe=Ae.getBoundingClientRect();const Dn=t.getBoundingClientRect();Cn={bottom:Dn.bottom,left:Dn.left,right:Dn.right,top:Dn.top},document.addEventListener("mouseup",En,!0),document.addEventListener("mousemove",Sn,!0)}function En(){je-=Be,We-=Ue,document.removeEventListener("mouseup",En,!0),document.removeEventListener("mousemove",Sn,!0)}function Sn(Tn){Tn=Tn||window.event;let Dn=Tn.clientX,ti=Tn.clientY,ni=Be,ii=Ue;Be=Oe-Dn,Ue=ke-ti;var si=Qe.left-Be,oi=Qe.top-Ue;if(si<Cn.left||oi<Cn.top||si+Qe.width>Cn.right||oi+Qe.height>Cn.bottom)Be=ni,Ue=ii;else{let ci=je-Be,Pi=We-Ue;Ae.style.transform="translate("+ci+"px,"+Pi+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,t){this.data[e]=t;const Oe=this.subscribers.map(async ke=>{await ke(e,t)});await Promise.allSettled(Oe)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e},stringToHTML:function(Ae){var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,Oe=t.parseFromString(Ae,"text/html");return Oe.body}var ke=document.createElement("div");return ke.innerHTML=Ae,ke},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPgetFeatureInfo"),Ae.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowGetFeatureInfoPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/désactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowGetFeatureInfoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowGetFeatureInfoClick(Oe)}),e},_createGetFeatureInfoPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPgetFeatureInfoPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createGetFeatureInfoPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelBody gpf-panel__body fr-modal__body",Ae},_createGetFeatureInfoPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader gpf-panel__header fr-modal__header",Ae},_createGetFeatureInfoPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ae.innerHTML="GetFeatureInfo",Ae},_createGetFeatureInfoPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(Oe){e.setAttribute("aria-pressed",!1),Ae.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(Oe){e.setAttribute("aria-pressed",!1),Ae.onCloseGetFeatureInfoClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createGetFeatureInfoWaitingDiv:function(){var Ae=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return Ae},_createGetFeatureInfoAccordionGroup:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPgetFeatureInfoAccordionGroup"),Ae.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",Ae},_createGetFeatureInfoLayerAccordion:function(Ae){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${Ae}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${Ae}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${Ae}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),t=e.firstChild,Oe=t.querySelector("button, button.fr-accordion__btn");return Oe.addEventListener("click",ke=>{ke.currentTarget.ariaExpanded=ke.currentTarget.ariaExpanded!=="true";var Be=document.getElementById(ke.currentTarget.getAttribute("aria-controls"));ke.currentTarget.ariaExpanded==="true"?(Be.classList.add("fr-collapse--expanded"),Be.classList.remove("GPelementHidden")):(Be.classList.remove("fr-collapse--expanded"),Be.classList.add("GPelementHidden"))}),t}},logger$z=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class $f extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof $f))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(t);var Oe=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),ke=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();Oe.appendChild(ke);var Be=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),Ue=this._createGetFeatureInfoPanelTitleElement();Be.appendChild(Ue);var je=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Be.appendChild(je),ke.appendChild(Be);var We=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return ke.appendChild(We),e.appendChild(Oe),logger$z.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners.singleclick=function(Oe){logger$z.trace(Oe),t.onMapClick(Oe)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.layers=e.map.getLayers().getArray().filter(Oe=>{if(Oe.isVisible(e.map.getView())&&Oe.getOpacity()>0)return Oe}).sort((Oe,ke)=>ke.getZIndex()-Oe.getZIndex()),this.layers.length>0){var t=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(t),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else return}getGetFeatureInfoLayer(e){var t={};let Oe=this.getLayerFormat(e);if(t={format:Oe,layer:e},Oe==="wmts"){let ke=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});t={...t,url:ke}}if(Oe==="wms"){let ke=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});t={...t,url:ke}}return t}getFeaturesAtClick(e){var t=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(Oe,ke){e==ke&&t.push(Oe)}),t}async getGetFeatureInfoContent(e){var t=null;if(e.format==="vector"){var Oe=this.getFeaturesAtClick(e.layer);return Oe&&(t=this.features2html(Oe)),t}else return fetch(e.url).then(ke=>ke.text()).then(ke=>{var Be=!1;if((ke.trim().length===0||ke.indexOf("ServiceExceptionReport")!==-1||ke.indexOf("java.lang.NullPointerException")!==-1||ke.indexOf("java.lang.OutOfMemoryError")!==-1||ke.indexOf("not queryable")!==-1||ke.indexOf("No data")!==-1||ke.indexOf("non interrogeable")!==-1)&&(Be=!0),Be)return null;var Ue=this.stringToHTML(ke);return Ue&&Ue.innerHTML&&Ue.innerHTML.trim().length>0?ke:null}).catch(ke=>(logger$z.log(ke),ke))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var t=e.layer.getProperties(),Oe=t.source,ke="";Oe&&(ke=Oe._title||Oe.name||t.title||t.name||Oe.url_||"Couche de données")}return ke}displayGetFeatureInfo(){var e=this.layers.map(Oe=>this.getGetFeatureInfoLayer(Oe)),t=e.map(Oe=>{var ke=this.getLayerTitle(Oe),Be=null,Ue=this._createGetFeatureInfoLayerAccordion(ke);Ue.style.display="none";var je=!0;return new AsyncData({...Oe,layername:ke,content:Be,contentDiv:Ue,pending:je})});for(let Oe=0;Oe<t.length;Oe++)this.getFeatureInfoAccordionGroup.append(t[Oe].data.contentDiv);t.forEach(Oe=>{Oe.subscribe((ke,Be)=>{ke=="content"&&(Oe.set("pending",!1),Oe.get("content")?(Oe.get("contentDiv").querySelector("div.fr-collapse").innerHTML=Oe.get("content"),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),Oe.get("contentDiv").style.display="block"):Oe.get("contentDiv").remove(),t.filter(Ue=>Ue.get("pending")===!0).length==0&&t.filter(Ue=>Ue.get("content")).length==0&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1))})}),t.forEach(Oe=>{this.getGetFeatureInfoContent(Oe.data).then(ke=>{Oe.set("content",ke)})})}getLayerFormat(e){var t=typeof e.getType=="function"?e.getType():null,Oe=e.getSource();if(t){if(t==="VECTOR"||t==="VECTOR_TILE")return"vector";if(t==="TILE")return Oe.tileGrid?"wmts":"wms";if(t==="IMAGE")return"wms"}else{if(Oe instanceof TileWMS||Oe instanceof ImageWMS)return"wms";if(Oe instanceof WMTS$1)return"wmts";if(Oe instanceof VectorSource||Oe instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var t=document.createElement("div");return e.forEach(function(Oe){var ke=Oe.getProperties();if(ke.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",ke.render);else{if(ke.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",ke.name),t.appendChild(Be)}if(ke.hasOwnProperty("description")){var Ue=document.createElement("div");Ue.className="gp-att-description-div",Ue.insertAdjacentHTML("afterbegin",ke.description),t.appendChild(Ue)}var je=null,We=!1,Qe=null,Cn=null,An=null,En=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(je in ke)if(ke[je]!==void 0&&En.indexOf(je)===-1){We||(Qe=document.createElement("div"),Qe.className="gp-att-others-div",Cn=document.createElement("ul"),We=!0),An=document.createElement("li");var Sn=document.createElement("span");Sn.className="gp-attname-others-span",Sn.appendChild(document.createTextNode(je+" : ")),An.appendChild(Sn),An.appendChild(document.createTextNode(ke[je])),Cn.appendChild(An)}Cn&&(Qe.appendChild(Cn),t.appendChild(Qe))}}),t.hasChildNodes()?t=t.innerHTML:t="",t}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$z.trace(e)}onCloseGetFeatureInfoClick(e){logger$z.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$z.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(Ae,e){var t=Ae%e;return t*e<0?t+e:t},decimalToDMS:function(Ae,e,t){var Oe=this.modulo(Ae+180,360)-180,ke=Math.abs(3600*Oe),Be=t||0,Ue=Math.pow(10,Be),je=Math.floor(ke/3600),We=Math.floor((ke-je*3600)/60),Qe=ke-je*3600-We*60;Qe=Math.ceil(Qe*Ue)/Ue,Qe>=60&&(Qe=0,We+=1),We>=60&&(We=0,je+=1);var Cn=e.charAt(Oe<0?1:0);return{d:je,m:We,s:Qe,direction:Cn}},dmsToDecimal(Ae,e,t,Oe){var ke=Ae+e/60+t/3600;return(Oe=="S"||Oe=="O")&&(ke=ke*-1),ke},coordinateToDecimal(Ae){var e={};return e.lat=Ae[1].toFixed(6),e.lng=Ae[0].toFixed(6),e.unit="°",e},coordinateToDMS(Ae){return{lng:MathUtils.decimalToDMS(Ae[0],"EO",2),lat:MathUtils.decimalToDMS(Ae[1],"NS",2),unit:"DMS"}},coordinateToRad(Ae){var e={},t=.017453292519943295;return e.lng=Ae[0]*t,e.lng=e.lng.toFixed(8),e.lat=Ae[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(Ae){var e={},t=1.1111111111111112;return e.lng=Ae[0]*t,e.lng=e.lng.toFixed(8),e.lat=Ae[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(Ae){var e={};return e.x=Ae[0].toFixed(2),e.y=Ae[1].toFixed(2),e.unit="m",e},coordinateToKMeter(Ae){var e={};return e.x=(Ae[0]/1e3).toFixed(2),e.y=(Ae[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(Ae,e){var t=e||10,Oe=parseInt(Ae,t);return!isNaN(Oe)&&isFinite(Oe)?Oe:null},isInteger:function(Ae){if(isNaN(Ae))return!1;var e=parseFloat(Ae);return(e|0)===e},toFloat:function(Ae){var e=parseFloat(Ae);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(Ae){var e=15,t=Ae.service,Oe=Ae.fields,ke=Ae.type,Be={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&ke==="PositionOfInterest"&&(e=Be[Oe.classification]),t==="GeocodedLocation"&&ke==="PositionOfInterest"&&(e=Be[Oe.importance]||14),ke==="StreetAddress"&&(e=17),ke==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(Ae){var e=Ae.placeAttributes;if(e.label)return e.label;if(Ae.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return Ae.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:Ae.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(Ae){if(Ae.fullText)return Ae.fullText;var e=[];return e.push(Ae.street||""),e.push(Ae.postalCode||""),e.push(Ae.commune||""),Ae.type==="PositionOfInterest"&&(e.push(Ae.poi||""),e.push(Ae.kind||"")),e.join(" - ")}};function globals(Ae){Ae("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),Ae("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),Ae("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)Ae("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),Ae("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");Ae.WGS84=Ae["EPSG:4326"],Ae["EPSG:3785"]=Ae["EPSG:3857"],Ae.GOOGLE=Ae["EPSG:3857"],Ae["EPSG:900913"]=Ae["EPSG:3857"],Ae["EPSG:102113"]=Ae["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(Ae,e){if(Ae[e])return Ae[e];for(var t=Object.keys(Ae),Oe=e.toLowerCase().replace(ignoredChar,""),ke=-1,Be,Ue;++ke<t.length;)if(Be=t[ke],Ue=Be.toLowerCase().replace(ignoredChar,""),Ue===Oe)return Ae[Be]}function projStr(Ae){var e={},t=Ae.split("+").map(function(je){return je.trim()}).filter(function(je){return je}).reduce(function(je,We){var Qe=We.split("=");return Qe.push(!0),je[Qe[0].toLowerCase()]=Qe[1],je},{}),Oe,ke,Be,Ue={proj:"projName",datum:"datumCode",rf:function(je){e.rf=parseFloat(je)},lat_0:function(je){e.lat0=je*D2R$1},lat_1:function(je){e.lat1=je*D2R$1},lat_2:function(je){e.lat2=je*D2R$1},lat_ts:function(je){e.lat_ts=je*D2R$1},lon_0:function(je){e.long0=je*D2R$1},lon_1:function(je){e.long1=je*D2R$1},lon_2:function(je){e.long2=je*D2R$1},alpha:function(je){e.alpha=parseFloat(je)*D2R$1},gamma:function(je){e.rectified_grid_angle=parseFloat(je)},lonc:function(je){e.longc=je*D2R$1},x_0:function(je){e.x0=parseFloat(je)},y_0:function(je){e.y0=parseFloat(je)},k_0:function(je){e.k0=parseFloat(je)},k:function(je){e.k0=parseFloat(je)},a:function(je){e.a=parseFloat(je)},b:function(je){e.b=parseFloat(je)},r:function(je){e.a=e.b=parseFloat(je)},r_a:function(){e.R_A=!0},zone:function(je){e.zone=parseInt(je,10)},south:function(){e.utmSouth=!0},towgs84:function(je){e.datum_params=je.split(",").map(function(We){return parseFloat(We)})},to_meter:function(je){e.to_meter=parseFloat(je)},units:function(je){e.units=je;var We=match(units,je);We&&(e.to_meter=We.to_meter)},from_greenwich:function(je){e.from_greenwich=je*D2R$1},pm:function(je){var We=match(exports$2,je);e.from_greenwich=(We||parseFloat(je))*D2R$1},nadgrids:function(je){je==="@null"?e.datumCode="none":e.nadgrids=je},axis:function(je){var We="ewnsud";je.length===3&&We.indexOf(je.substr(0,1))!==-1&&We.indexOf(je.substr(1,1))!==-1&&We.indexOf(je.substr(2,1))!==-1&&(e.axis=je)},approx:function(){e.approx=!0}};for(Oe in t)ke=t[Oe],Oe in Ue?(Be=Ue[Oe],typeof Be=="function"?Be(ke):e[Be]=ke):e[Oe]=ke;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(Ae){if(typeof Ae!="string")throw new Error("not a string");this.text=Ae.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var Ae=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(Ae);){if(this.place>=this.text.length)return;Ae=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(Ae);case KEYWORD:return this.keyword(Ae);case QUOTED:return this.quoted(Ae);case AFTERQUOTE:return this.afterquote(Ae);case NUMBER:return this.number(Ae);case ENDED:return}};Parser.prototype.afterquote=function(Ae){if(Ae==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(Ae)){this.word=this.word.trim(),this.afterItem(Ae);return}throw new Error(`havn't handled "`+Ae+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(Ae){if(Ae===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(Ae==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(Ae){if(digets.test(Ae)){this.word+=Ae;return}if(endThings.test(Ae)){this.word=parseFloat(this.word),this.afterItem(Ae);return}throw new Error(`havn't handled "`+Ae+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(Ae){if(Ae==='"'){this.state=AFTERQUOTE;return}this.word+=Ae};Parser.prototype.keyword=function(Ae){if(keyword.test(Ae)){this.word+=Ae;return}if(Ae==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(Ae)){this.afterItem(Ae);return}throw new Error(`havn't handled "`+Ae+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(Ae){if(latin.test(Ae)){this.word=Ae,this.state=KEYWORD;return}if(Ae==='"'){this.word="",this.state=QUOTED;return}if(digets.test(Ae)){this.word=Ae,this.state=NUMBER;return}if(endThings.test(Ae)){this.afterItem(Ae);return}throw new Error(`havn't handled "`+Ae+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(Ae){var e=new Parser(Ae);return e.output()}function mapit(Ae,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var Oe=e?{}:Ae,ke=t.reduce(function(Be,Ue){return sExpr(Ue,Be),Be},Oe);e&&(Ae[e]=ke)}function sExpr(Ae,e){if(!Array.isArray(Ae)){e[Ae]=!0;return}var t=Ae.shift();if(t==="PARAMETER"&&(t=Ae.shift()),Ae.length===1){if(Array.isArray(Ae[0])){e[t]={},sExpr(Ae[0],e[t]);return}e[t]=Ae[0];return}if(!Ae.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=Ae;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(Ae);return}Array.isArray(t)||(e[t]={});var Oe;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:Ae[0].toLowerCase(),convert:Ae[1]},Ae.length===3&&sExpr(Ae[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:Ae[0],a:Ae[1],rf:Ae[2]},Ae.length===4&&sExpr(Ae[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":Ae[0]=["name",Ae[0]],mapit(e,t,Ae);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":Ae[0]=["name",Ae[0]],mapit(e,t,Ae),e[t].type=t;return;default:for(Oe=-1;++Oe<Ae.length;)if(!Array.isArray(Ae[Oe]))return sExpr(Ae,e[t]);return mapit(e,t,Ae)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(Ae,e){var t=e[0],Oe=e[1];!(t in Ae)&&Oe in Ae&&(Ae[t]=Ae[Oe],e.length===3&&(Ae[t]=e[2](Ae[t])))}function d2r(Ae){return Ae*D2R}function cleanWKT(Ae){for(var e=Object.keys(Ae),t=0,Oe=e.length;t<Oe;++t){var ke=e[t];knownTypes.indexOf(ke)!==-1&&setPropertiesFromWkt(Ae[ke]),typeof Ae[ke]=="object"&&cleanWKT(Ae[ke])}}function setPropertiesFromWkt(Ae){if(Ae.AUTHORITY){var e=Object.keys(Ae.AUTHORITY)[0];e&&e in Ae.AUTHORITY&&(Ae.title=e+":"+Ae.AUTHORITY[e])}if(Ae.type==="GEOGCS"?Ae.projName="longlat":Ae.type==="LOCAL_CS"?(Ae.projName="identity",Ae.local=!0):typeof Ae.PROJECTION=="object"?Ae.projName=Object.keys(Ae.PROJECTION)[0]:Ae.projName=Ae.PROJECTION,Ae.AXIS){for(var t="",Oe=0,ke=Ae.AXIS.length;Oe<ke;++Oe){var Be=[Ae.AXIS[Oe][0].toLowerCase(),Ae.AXIS[Oe][1].toLowerCase()];Be[0].indexOf("north")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="north"?t+="n":Be[0].indexOf("south")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="south"?t+="s":Be[0].indexOf("east")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="east"?t+="e":(Be[0].indexOf("west")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(Ae.axis=t)}Ae.UNIT&&(Ae.units=Ae.UNIT.name.toLowerCase(),Ae.units==="metre"&&(Ae.units="meter"),Ae.UNIT.convert&&(Ae.type==="GEOGCS"?Ae.DATUM&&Ae.DATUM.SPHEROID&&(Ae.to_meter=Ae.UNIT.convert*Ae.DATUM.SPHEROID.a):Ae.to_meter=Ae.UNIT.convert));var Ue=Ae.GEOGCS;Ae.type==="GEOGCS"&&(Ue=Ae),Ue&&(Ue.DATUM?Ae.datumCode=Ue.DATUM.name.toLowerCase():Ae.datumCode=Ue.name.toLowerCase(),Ae.datumCode.slice(0,2)==="d_"&&(Ae.datumCode=Ae.datumCode.slice(2)),Ae.datumCode==="new_zealand_1949"&&(Ae.datumCode="nzgd49"),(Ae.datumCode==="wgs_1984"||Ae.datumCode==="world_geodetic_system_1984")&&(Ae.PROJECTION==="Mercator_Auxiliary_Sphere"&&(Ae.sphere=!0),Ae.datumCode="wgs84"),Ae.datumCode==="belge_1972"&&(Ae.datumCode="rnb72"),Ue.DATUM&&Ue.DATUM.SPHEROID&&(Ae.ellps=Ue.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),Ae.ellps.toLowerCase().slice(0,13)==="international"&&(Ae.ellps="intl"),Ae.a=Ue.DATUM.SPHEROID.a,Ae.rf=parseFloat(Ue.DATUM.SPHEROID.rf,10)),Ue.DATUM&&Ue.DATUM.TOWGS84&&(Ae.datum_params=Ue.DATUM.TOWGS84),~Ae.datumCode.indexOf("osgb_1936")&&(Ae.datumCode="osgb36"),~Ae.datumCode.indexOf("osni_1952")&&(Ae.datumCode="osni52"),(~Ae.datumCode.indexOf("tm65")||~Ae.datumCode.indexOf("geodetic_datum_of_1965"))&&(Ae.datumCode="ire65"),Ae.datumCode==="ch1903+"&&(Ae.datumCode="ch1903"),~Ae.datumCode.indexOf("israel")&&(Ae.datumCode="isr93")),Ae.b&&!isFinite(Ae.b)&&(Ae.b=Ae.a);function je(Cn){var An=Ae.to_meter||1;return Cn*An}var We=function(Cn){return rename(Ae,Cn)},Qe=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",je],["y0","false_northing",je],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];Qe.forEach(We),!Ae.long0&&Ae.longc&&(Ae.projName==="Albers_Conic_Equal_Area"||Ae.projName==="Lambert_Azimuthal_Equal_Area")&&(Ae.long0=Ae.longc),!Ae.lat_ts&&Ae.lat1&&(Ae.projName==="Stereographic_South_Pole"||Ae.projName==="Polar Stereographic (variant B)")?(Ae.lat0=d2r(Ae.lat1>0?90:-90),Ae.lat_ts=Ae.lat1):!Ae.lat_ts&&Ae.lat0&&Ae.projName==="Polar_Stereographic"&&(Ae.lat_ts=Ae.lat0,Ae.lat0=d2r(Ae.lat0>0?90:-90))}function wkt(Ae){var e=parseString(Ae),t=e[0],Oe={};return sExpr(e,Oe),cleanWKT(Oe),Oe[t]}function defs(Ae){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[Ae]=projStr(arguments[1]):defs[Ae]=wkt(arguments[1]):defs[Ae]=t}else if(arguments.length===1){if(Array.isArray(Ae))return Ae.map(function(Oe){Array.isArray(Oe)?defs.apply(e,Oe):defs(Oe)});if(typeof Ae=="string"){if(Ae in defs)return defs[Ae]}else"EPSG"in Ae?defs["EPSG:"+Ae.EPSG]=Ae:"ESRI"in Ae?defs["ESRI:"+Ae.ESRI]=Ae:"IAU2000"in Ae?defs["IAU2000:"+Ae.IAU2000]=Ae:console.log(Ae);return}}globals(defs);function testObj(Ae){return typeof Ae=="string"}function testDef(Ae){return Ae in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(Ae){return codeWords.some(function(e){return Ae.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(Ae){var e=match(Ae,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(Ae){var e=match(Ae,"extension");if(e)return match(e,"proj4")}function testProj(Ae){return Ae[0]==="+"}function parse(Ae){if(testObj(Ae)){if(testDef(Ae))return defs[Ae];if(testWKT(Ae)){var e=wkt(Ae);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(Ae))return projStr(Ae)}else return Ae}function extend(Ae,e){Ae=Ae||{};var t,Oe;if(!e)return Ae;for(Oe in e)t=e[Oe],t!==void 0&&(Ae[Oe]=t);return Ae}function msfnz(Ae,e,t){var Oe=Ae*e;return t/Math.sqrt(1-Oe*Oe)}function sign(Ae){return Ae<0?-1:1}function adjust_lon(Ae){return Math.abs(Ae)<=SPI?Ae:Ae-sign(Ae)*TWO_PI}function tsfnz(Ae,e,t){var Oe=Ae*t,ke=.5*Ae;return Oe=Math.pow((1-Oe)/(1+Oe),ke),Math.tan(.5*(HALF_PI-e))/Oe}function phi2z(Ae,e){for(var t=.5*Ae,Oe,ke,Be=HALF_PI-2*Math.atan(e),Ue=0;Ue<=15;Ue++)if(Oe=Ae*Math.sin(Be),ke=HALF_PI-2*Math.atan(e*Math.pow((1-Oe)/(1+Oe),t))-Be,Be+=ke,Math.abs(ke)<=1e-10)return Be;return-9999}function init$x(){var Ae=this.b/this.a;this.es=1-Ae*Ae,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(Ae){var e=Ae.x,t=Ae.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var Oe,ke;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),ke=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var Be=Math.sin(t),Ue=tsfnz(this.e,t,Be);Oe=this.x0+this.a*this.k0*adjust_lon(e-this.long0),ke=this.y0-this.a*this.k0*Math.log(Ue)}return Ae.x=Oe,Ae.y=ke,Ae}function inverse$v(Ae){var e=Ae.x-this.x0,t=Ae.y-this.y0,Oe,ke;if(this.sphere)ke=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var Be=Math.exp(-t/(this.a*this.k0));if(ke=phi2z(this.e,Be),ke===-9999)return null}return Oe=adjust_lon(this.long0+e/(this.a*this.k0)),Ae.x=Oe,Ae.y=ke,Ae}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(Ae){return Ae}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(Ae,e){var t=projStore.length;return Ae.names?(projStore[t]=Ae,Ae.names.forEach(function(Oe){names$v[Oe.toLowerCase()]=t}),this):(console.log(e),!0)}function get(Ae){if(!Ae)return!1;var e=Ae.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(Ae,e,t,Oe){var ke=Ae*Ae,Be=e*e,Ue=(ke-Be)/ke,je=0;Oe?(Ae*=1-Ue*(SIXTH+Ue*(RA4+Ue*RA6)),ke=Ae*Ae,Ue=0):je=Math.sqrt(Ue);var We=(ke-Be)/Be;return{es:Ue,e:je,ep2:We}}function sphere(Ae,e,t,Oe,ke){if(!Ae){var Be=match(exports$1,Oe);Be||(Be=WGS84),Ae=Be.a,e=Be.b,t=Be.rf}return t&&!e&&(e=(1-1/t)*Ae),(t===0||Math.abs(Ae-e)<EPSLN)&&(ke=!0,e=Ae),{a:Ae,b:e,rf:t,sphere:ke}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(Ae,e,t,Oe,ke,Be,Ue){var je={};return Ae===void 0||Ae==="none"?je.datum_type=PJD_NODATUM:je.datum_type=PJD_WGS84,e&&(je.datum_params=e.map(parseFloat),(je.datum_params[0]!==0||je.datum_params[1]!==0||je.datum_params[2]!==0)&&(je.datum_type=PJD_3PARAM),je.datum_params.length>3&&(je.datum_params[3]!==0||je.datum_params[4]!==0||je.datum_params[5]!==0||je.datum_params[6]!==0)&&(je.datum_type=PJD_7PARAM,je.datum_params[3]*=SEC_TO_RAD,je.datum_params[4]*=SEC_TO_RAD,je.datum_params[5]*=SEC_TO_RAD,je.datum_params[6]=je.datum_params[6]/1e6+1)),Ue&&(je.datum_type=PJD_GRIDSHIFT,je.grids=Ue),je.a=t,je.b=Oe,je.es=ke,je.ep2=Be,je}var loadedNadgrids={};function nadgrid(Ae,e){var t=new DataView(e),Oe=detectLittleEndian(t),ke=readHeader(t,Oe),Be=readSubgrids(t,ke,Oe),Ue={header:ke,subgrids:Be};return loadedNadgrids[Ae]=Ue,Ue}function getNadgrids(Ae){if(Ae===void 0)return null;var e=Ae.split(",");return e.map(parseNadgridString)}function parseNadgridString(Ae){if(Ae.length===0)return null;var e=Ae[0]==="@";return e&&(Ae=Ae.slice(1)),Ae==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:Ae,mandatory:!e,grid:loadedNadgrids[Ae]||null,isNull:!1}}function secondsToRadians(Ae){return Ae/3600*Math.PI/180}function detectLittleEndian(Ae){var e=Ae.getInt32(8,!1);return e===11?!1:(e=Ae.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(Ae,e){return{nFields:Ae.getInt32(8,e),nSubgridFields:Ae.getInt32(24,e),nSubgrids:Ae.getInt32(40,e),shiftType:decodeString(Ae,56,64).trim(),fromSemiMajorAxis:Ae.getFloat64(120,e),fromSemiMinorAxis:Ae.getFloat64(136,e),toSemiMajorAxis:Ae.getFloat64(152,e),toSemiMinorAxis:Ae.getFloat64(168,e)}}function decodeString(Ae,e,t){return String.fromCharCode.apply(null,new Uint8Array(Ae.buffer.slice(e,t)))}function readSubgrids(Ae,e,t){for(var Oe=176,ke=[],Be=0;Be<e.nSubgrids;Be++){var Ue=readGridHeader(Ae,Oe,t),je=readGridNodes(Ae,Oe,Ue,t),We=Math.round(1+(Ue.upperLongitude-Ue.lowerLongitude)/Ue.longitudeInterval),Qe=Math.round(1+(Ue.upperLatitude-Ue.lowerLatitude)/Ue.latitudeInterval);ke.push({ll:[secondsToRadians(Ue.lowerLongitude),secondsToRadians(Ue.lowerLatitude)],del:[secondsToRadians(Ue.longitudeInterval),secondsToRadians(Ue.latitudeInterval)],lim:[We,Qe],count:Ue.gridNodeCount,cvs:mapNodes(je)}),Oe+=176+Ue.gridNodeCount*16}return ke}function mapNodes(Ae){return Ae.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(Ae,e,t){return{name:decodeString(Ae,e+8,e+16).trim(),parent:decodeString(Ae,e+24,e+24+8).trim(),lowerLatitude:Ae.getFloat64(e+72,t),upperLatitude:Ae.getFloat64(e+88,t),lowerLongitude:Ae.getFloat64(e+104,t),upperLongitude:Ae.getFloat64(e+120,t),latitudeInterval:Ae.getFloat64(e+136,t),longitudeInterval:Ae.getFloat64(e+152,t),gridNodeCount:Ae.getInt32(e+168,t)}}function readGridNodes(Ae,e,t,Oe){for(var ke=e+176,Be=16,Ue=[],je=0;je<t.gridNodeCount;je++){var We={latitudeShift:Ae.getFloat32(ke+je*Be,Oe),longitudeShift:Ae.getFloat32(ke+je*Be+4,Oe),latitudeAccuracy:Ae.getFloat32(ke+je*Be+8,Oe),longitudeAccuracy:Ae.getFloat32(ke+je*Be+12,Oe)};Ue.push(We)}return Ue}function Projection(Ae,e){if(!(this instanceof Projection))return new Projection(Ae);e=e||function(Qe){if(Qe)throw Qe};var t=parse(Ae);if(typeof t!="object"){e("Could not parse to valid json: "+Ae);return}var Oe=Projection.projections.get(t.projName);if(!Oe){e("Could not get projection name from: "+Ae);return}if(t.datumCode&&t.datumCode!=="none"){var ke=match(datums,t.datumCode);ke&&(t.datum_params=t.datum_params||(ke.towgs84?ke.towgs84.split(","):null),t.ellps=ke.ellipse,t.datumName=ke.datumName?ke.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var Be=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),Ue=eccentricity(Be.a,Be.b,Be.rf,t.R_A),je=getNadgrids(t.nadgrids),We=t.datum||datum(t.datumCode,t.datum_params,Be.a,Be.b,Ue.es,Ue.ep2,je);extend(this,t),extend(this,Oe),this.a=Be.a,this.b=Be.b,this.rf=Be.rf,this.sphere=Be.sphere,this.es=Ue.es,this.e=Ue.e,this.ep2=Ue.ep2,this.datum=We,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(Ae,e){return Ae.datum_type!==e.datum_type||Ae.a!==e.a||Math.abs(Ae.es-e.es)>5e-11?!1:Ae.datum_type===PJD_3PARAM?Ae.datum_params[0]===e.datum_params[0]&&Ae.datum_params[1]===e.datum_params[1]&&Ae.datum_params[2]===e.datum_params[2]:Ae.datum_type===PJD_7PARAM?Ae.datum_params[0]===e.datum_params[0]&&Ae.datum_params[1]===e.datum_params[1]&&Ae.datum_params[2]===e.datum_params[2]&&Ae.datum_params[3]===e.datum_params[3]&&Ae.datum_params[4]===e.datum_params[4]&&Ae.datum_params[5]===e.datum_params[5]&&Ae.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(Ae,e,t){var Oe=Ae.x,ke=Ae.y,Be=Ae.z?Ae.z:0,Ue,je,We,Qe;if(ke<-HALF_PI&&ke>-1.001*HALF_PI)ke=-HALF_PI;else if(ke>HALF_PI&&ke<1.001*HALF_PI)ke=HALF_PI;else{if(ke<-HALF_PI)return{x:-1/0,y:-1/0,z:Ae.z};if(ke>HALF_PI)return{x:1/0,y:1/0,z:Ae.z}}return Oe>Math.PI&&(Oe-=2*Math.PI),je=Math.sin(ke),Qe=Math.cos(ke),We=je*je,Ue=t/Math.sqrt(1-e*We),{x:(Ue+Be)*Qe*Math.cos(Oe),y:(Ue+Be)*Qe*Math.sin(Oe),z:(Ue*(1-e)+Be)*je}}function geocentricToGeodetic(Ae,e,t,Oe){var ke=1e-12,Be=ke*ke,Ue=30,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si,oi=Ae.x,ci=Ae.y,Pi=Ae.z?Ae.z:0,Ai,fi,Oi;if(je=Math.sqrt(oi*oi+ci*ci),We=Math.sqrt(oi*oi+ci*ci+Pi*Pi),je/t<ke){if(Ai=0,We/t<ke)return fi=HALF_PI,Oi=-Oe,{x:Ae.x,y:Ae.y,z:Ae.z}}else Ai=Math.atan2(ci,oi);Qe=Pi/We,Cn=je/We,An=1/Math.sqrt(1-e*(2-e)*Cn*Cn),Tn=Cn*(1-e)*An,Dn=Qe*An,si=0;do si++,Sn=t/Math.sqrt(1-e*Dn*Dn),Oi=je*Tn+Pi*Dn-Sn*(1-e*Dn*Dn),En=e*Sn/(Sn+Oi),An=1/Math.sqrt(1-En*(2-En)*Cn*Cn),ti=Cn*(1-En)*An,ni=Qe*An,ii=ni*Tn-ti*Dn,Tn=ti,Dn=ni;while(ii*ii>Be&&si<Ue);return fi=Math.atan(ni/Math.abs(ti)),{x:Ai,y:fi,z:Oi}}function geocentricToWgs84(Ae,e,t){if(e===PJD_3PARAM)return{x:Ae.x+t[0],y:Ae.y+t[1],z:Ae.z+t[2]};if(e===PJD_7PARAM){var Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],je=t[4],We=t[5],Qe=t[6];return{x:Qe*(Ae.x-We*Ae.y+je*Ae.z)+Oe,y:Qe*(We*Ae.x+Ae.y-Ue*Ae.z)+ke,z:Qe*(-je*Ae.x+Ue*Ae.y+Ae.z)+Be}}}function geocentricFromWgs84(Ae,e,t){if(e===PJD_3PARAM)return{x:Ae.x-t[0],y:Ae.y-t[1],z:Ae.z-t[2]};if(e===PJD_7PARAM){var Oe=t[0],ke=t[1],Be=t[2],Ue=t[3],je=t[4],We=t[5],Qe=t[6],Cn=(Ae.x-Oe)/Qe,An=(Ae.y-ke)/Qe,En=(Ae.z-Be)/Qe;return{x:Cn+We*An-je*En,y:-We*Cn+An+Ue*En,z:je*Cn-Ue*An+En}}}function checkParams(Ae){return Ae===PJD_3PARAM||Ae===PJD_7PARAM}function datum_transform(Ae,e,t){if(compareDatums(Ae,e)||Ae.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var Oe=Ae.a,ke=Ae.es;if(Ae.datum_type===PJD_GRIDSHIFT){var Be=applyGridShift(Ae,!1,t);if(Be!==0)return;Oe=SRS_WGS84_SEMIMAJOR,ke=SRS_WGS84_ESQUARED}var Ue=e.a,je=e.b,We=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(Ue=SRS_WGS84_SEMIMAJOR,je=SRS_WGS84_SEMIMINOR,We=SRS_WGS84_ESQUARED),ke===We&&Oe===Ue&&!checkParams(Ae.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,ke,Oe),checkParams(Ae.datum_type)&&(t=geocentricToWgs84(t,Ae.datum_type,Ae.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,We,Ue,je),e.datum_type===PJD_GRIDSHIFT){var Qe=applyGridShift(e,!0,t);if(Qe!==0)return}return t}function applyGridShift(Ae,e,t){if(Ae.grids===null||Ae.grids.length===0)return console.log("Grid shift grids not found"),-1;var Oe={x:-t.x,y:t.y},ke={x:Number.NaN,y:Number.NaN},Be=[];e:for(var Ue=0;Ue<Ae.grids.length;Ue++){var je=Ae.grids[Ue];if(Be.push(je.name),je.isNull){ke=Oe;break}if(je.mandatory,je.grid===null){if(je.mandatory)return console.log("Unable to find mandatory grid '"+je.name+"'"),-1;continue}for(var We=je.grid.subgrids,Qe=0,Cn=We.length;Qe<Cn;Qe++){var An=We[Qe],En=(Math.abs(An.del[1])+Math.abs(An.del[0]))/1e4,Sn=An.ll[0]-En,Tn=An.ll[1]-En,Dn=An.ll[0]+(An.lim[0]-1)*An.del[0]+En,ti=An.ll[1]+(An.lim[1]-1)*An.del[1]+En;if(!(Tn>Oe.y||Sn>Oe.x||ti<Oe.y||Dn<Oe.x)&&(ke=applySubgridShift(Oe,e,An),!isNaN(ke.x)))break e}}return isNaN(ke.x)?(console.log("Failed to find a grid shift table for location '"+-Oe.x*R2D+" "+Oe.y*R2D+" tried: '"+Be+"'"),-1):(t.x=-ke.x,t.y=ke.y,0)}function applySubgridShift(Ae,e,t){var Oe={x:Number.NaN,y:Number.NaN};if(isNaN(Ae.x))return Oe;var ke={x:Ae.x,y:Ae.y};ke.x-=t.ll[0],ke.y-=t.ll[1],ke.x=adjust_lon(ke.x-Math.PI)+Math.PI;var Be=nadInterpolate(ke,t);if(e){if(isNaN(Be.x))return Oe;Be.x=ke.x-Be.x,Be.y=ke.y-Be.y;var Ue=9,je=1e-12,We,Qe;do{if(Qe=nadInterpolate(Be,t),isNaN(Qe.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}We={x:ke.x-(Qe.x+Be.x),y:ke.y-(Qe.y+Be.y)},Be.x+=We.x,Be.y+=We.y}while(Ue--&&Math.abs(We.x)>je&&Math.abs(We.y)>je);if(Ue<0)return console.log("Inverse grid shift iterator failed to converge."),Oe;Oe.x=adjust_lon(Be.x+t.ll[0]),Oe.y=Be.y+t.ll[1]}else isNaN(Be.x)||(Oe.x=Ae.x+Be.x,Oe.y=Ae.y+Be.y);return Oe}function nadInterpolate(Ae,e){var t={x:Ae.x/e.del[0],y:Ae.y/e.del[1]},Oe={x:Math.floor(t.x),y:Math.floor(t.y)},ke={x:t.x-1*Oe.x,y:t.y-1*Oe.y},Be={x:Number.NaN,y:Number.NaN},Ue;if(Oe.x<0||Oe.x>=e.lim[0]||Oe.y<0||Oe.y>=e.lim[1])return Be;Ue=Oe.y*e.lim[0]+Oe.x;var je={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue++;var We={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue+=e.lim[0];var Qe={x:e.cvs[Ue][0],y:e.cvs[Ue][1]};Ue--;var Cn={x:e.cvs[Ue][0],y:e.cvs[Ue][1]},An=ke.x*ke.y,En=ke.x*(1-ke.y),Sn=(1-ke.x)*(1-ke.y),Tn=(1-ke.x)*ke.y;return Be.x=Sn*je.x+En*We.x+Tn*Cn.x+An*Qe.x,Be.y=Sn*je.y+En*We.y+Tn*Cn.y+An*Qe.y,Be}function adjust_axis(Ae,e,t){var Oe=t.x,ke=t.y,Be=t.z||0,Ue,je,We,Qe={};for(We=0;We<3;We++)if(!(e&&We===2&&t.z===void 0))switch(We===0?(Ue=Oe,"ew".indexOf(Ae.axis[We])!==-1?je="x":je="y"):We===1?(Ue=ke,"ns".indexOf(Ae.axis[We])!==-1?je="y":je="x"):(Ue=Be,je="z"),Ae.axis[We]){case"e":Qe[je]=Ue;break;case"w":Qe[je]=-Ue;break;case"n":Qe[je]=Ue;break;case"s":Qe[je]=-Ue;break;case"u":t[je]!==void 0&&(Qe.z=Ue);break;case"d":t[je]!==void 0&&(Qe.z=-Ue);break;default:return null}return Qe}function common(Ae){var e={x:Ae[0],y:Ae[1]};return Ae.length>2&&(e.z=Ae[2]),Ae.length>3&&(e.m=Ae[3]),e}function checkSanity(Ae){checkCoord(Ae.x),checkCoord(Ae.y)}function checkCoord(Ae){if(typeof Number.isFinite=="function"){if(Number.isFinite(Ae))return;throw new TypeError("coordinates must be finite numbers")}if(typeof Ae!="number"||Ae!==Ae||!isFinite(Ae))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(Ae,e){return(Ae.datum.datum_type===PJD_3PARAM||Ae.datum.datum_type===PJD_7PARAM||Ae.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&Ae.datumCode!=="WGS84"}function transform(Ae,e,t,Oe){var ke;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var Be=t.z!==void 0;if(checkSanity(t),Ae.datum&&e.datum&&checkNotWGS(Ae,e)&&(ke=new Projection("WGS84"),t=transform(Ae,ke,t,Oe),Ae=ke),Oe&&Ae.axis!=="enu"&&(t=adjust_axis(Ae,!1,t)),Ae.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(Ae.to_meter&&(t={x:t.x*Ae.to_meter,y:t.y*Ae.to_meter,z:t.z||0}),t=Ae.inverse(t),!t)return;if(Ae.from_greenwich&&(t.x+=Ae.from_greenwich),t=datum_transform(Ae.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),Oe&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!Be&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(Ae,e,t,Oe){var ke,Be,Ue;return Array.isArray(t)?(ke=transform(Ae,e,t,Oe)||{x:NaN,y:NaN},t.length>2?typeof Ae.name<"u"&&Ae.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof ke.z=="number"?[ke.x,ke.y,ke.z].concat(t.slice(3)):[ke.x,ke.y,t[2]].concat(t.slice(3)):[ke.x,ke.y].concat(t.slice(2)):[ke.x,ke.y]):(Be=transform(Ae,e,t,Oe),Ue=Object.keys(t),Ue.length===2||Ue.forEach(function(je){if(typeof Ae.name<"u"&&Ae.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(je==="x"||je==="y"||je==="z")return}else if(je==="x"||je==="y")return;Be[je]=t[je]}),Be)}function checkProj(Ae){return Ae instanceof Projection?Ae:Ae.oProj?Ae.oProj:Projection(Ae)}function proj4(Ae,e,t){Ae=checkProj(Ae);var Oe=!1,ke;return typeof e>"u"?(e=Ae,Ae=wgs84,Oe=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=Ae,Ae=wgs84,Oe=!0),e=checkProj(e),t?transformer(Ae,e,t):(ke={forward:function(Be,Ue){return transformer(Ae,e,Be,Ue)},inverse:function(Be,Ue){return transformer(e,Ae,Be,Ue)}},Oe&&(ke.oProj=e),ke)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$2=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(Ae,e){return e=e||5,encode(LLtoUTM({lat:Ae[1],lon:Ae[0]}),e)}function inverse$u(Ae){var e=UTMtoLL(decode(Ae.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(Ae){var e=UTMtoLL(decode(Ae.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(Ae){return Ae*(Math.PI/180)}function radToDeg(Ae){return 180*(Ae/Math.PI)}function LLtoUTM(Ae){var e=Ae.lat,t=Ae.lon,Oe=6378137,ke=.00669438,Be=.9996,Ue,je,We,Qe,Cn,An,En,Sn=degToRad(e),Tn=degToRad(t),Dn,ti;ti=Math.floor((t+180)/6)+1,t===180&&(ti=60),e>=56&&e<64&&t>=3&&t<12&&(ti=32),e>=72&&e<84&&(t>=0&&t<9?ti=31:t>=9&&t<21?ti=33:t>=21&&t<33?ti=35:t>=33&&t<42&&(ti=37)),Ue=(ti-1)*6-180+3,Dn=degToRad(Ue),je=ke/(1-ke),We=Oe/Math.sqrt(1-ke*Math.sin(Sn)*Math.sin(Sn)),Qe=Math.tan(Sn)*Math.tan(Sn),Cn=je*Math.cos(Sn)*Math.cos(Sn),An=Math.cos(Sn)*(Tn-Dn),En=Oe*((1-ke/4-3*ke*ke/64-5*ke*ke*ke/256)*Sn-(3*ke/8+3*ke*ke/32+45*ke*ke*ke/1024)*Math.sin(2*Sn)+(15*ke*ke/256+45*ke*ke*ke/1024)*Math.sin(4*Sn)-35*ke*ke*ke/3072*Math.sin(6*Sn));var ni=Be*We*(An+(1-Qe+Cn)*An*An*An/6+(5-18*Qe+Qe*Qe+72*Cn-58*je)*An*An*An*An*An/120)+5e5,ii=Be*(En+We*Math.tan(Sn)*(An*An/2+(5-Qe+9*Cn+4*Cn*Cn)*An*An*An*An/24+(61-58*Qe+Qe*Qe+600*Cn-330*je)*An*An*An*An*An*An/720));return e<0&&(ii+=1e7),{northing:Math.round(ii),easting:Math.round(ni),zoneNumber:ti,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(Ae){var e=Ae.northing,t=Ae.easting,Oe=Ae.zoneLetter,ke=Ae.zoneNumber;if(ke<0||ke>60)return null;var Be=.9996,Ue=6378137,je=.00669438,We,Qe=(1-Math.sqrt(1-je))/(1+Math.sqrt(1-je)),Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si=t-5e5,oi=e;Oe<"N"&&(oi-=1e7),ti=(ke-1)*6-180+3,We=je/(1-je),Dn=oi/Be,ni=Dn/(Ue*(1-je/4-3*je*je/64-5*je*je*je/256)),ii=ni+(3*Qe/2-27*Qe*Qe*Qe/32)*Math.sin(2*ni)+(21*Qe*Qe/16-55*Qe*Qe*Qe*Qe/32)*Math.sin(4*ni)+151*Qe*Qe*Qe/96*Math.sin(6*ni),Cn=Ue/Math.sqrt(1-je*Math.sin(ii)*Math.sin(ii)),An=Math.tan(ii)*Math.tan(ii),En=We*Math.cos(ii)*Math.cos(ii),Sn=Ue*(1-je)/Math.pow(1-je*Math.sin(ii)*Math.sin(ii),1.5),Tn=si/(Cn*Be);var ci=ii-Cn*Math.tan(ii)/Sn*(Tn*Tn/2-(5+3*An+10*En-4*En*En-9*We)*Tn*Tn*Tn*Tn/24+(61+90*An+298*En+45*An*An-252*We-3*En*En)*Tn*Tn*Tn*Tn*Tn*Tn/720);ci=radToDeg(ci);var Pi=(Tn-(1+2*An+En)*Tn*Tn*Tn/6+(5-2*En+28*An-3*En*En+8*We+24*An*An)*Tn*Tn*Tn*Tn*Tn/120)/Math.cos(ii);Pi=ti+radToDeg(Pi);var Ai;if(Ae.accuracy){var fi=UTMtoLL({northing:Ae.northing+Ae.accuracy,easting:Ae.easting+Ae.accuracy,zoneLetter:Ae.zoneLetter,zoneNumber:Ae.zoneNumber});Ai={top:fi.lat,right:fi.lon,bottom:ci,left:Pi}}else Ai={lat:ci,lon:Pi};return Ai}function getLetterDesignator(Ae){var e="Z";return 84>=Ae&&Ae>=72?e="X":72>Ae&&Ae>=64?e="W":64>Ae&&Ae>=56?e="V":56>Ae&&Ae>=48?e="U":48>Ae&&Ae>=40?e="T":40>Ae&&Ae>=32?e="S":32>Ae&&Ae>=24?e="R":24>Ae&&Ae>=16?e="Q":16>Ae&&Ae>=8?e="P":8>Ae&&Ae>=0?e="N":0>Ae&&Ae>=-8?e="M":-8>Ae&&Ae>=-16?e="L":-16>Ae&&Ae>=-24?e="K":-24>Ae&&Ae>=-32?e="J":-32>Ae&&Ae>=-40?e="H":-40>Ae&&Ae>=-48?e="G":-48>Ae&&Ae>=-56?e="F":-56>Ae&&Ae>=-64?e="E":-64>Ae&&Ae>=-72?e="D":-72>Ae&&Ae>=-80&&(e="C"),e}function encode(Ae,e){var t="00000"+Ae.easting,Oe="00000"+Ae.northing;return Ae.zoneNumber+Ae.zoneLetter+get100kID(Ae.easting,Ae.northing,Ae.zoneNumber)+t.substr(t.length-5,e)+Oe.substr(Oe.length-5,e)}function get100kID(Ae,e,t){var Oe=get100kSetForZone(t),ke=Math.floor(Ae/1e5),Be=Math.floor(e/1e5)%20;return getLetter100kID(ke,Be,Oe)}function get100kSetForZone(Ae){var e=Ae%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(Ae,e,t){var Oe=t-1,ke=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(Oe),Be=SET_ORIGIN_ROW_LETTERS.charCodeAt(Oe),Ue=ke+Ae-1,je=Be+e,We=!1;Ue>Z$1&&(Ue=Ue-Z$1+A$1-1,We=!0),(Ue===I$2||ke<I$2&&Ue>I$2||(Ue>I$2||ke<I$2)&&We)&&Ue++,(Ue===O$1||ke<O$1&&Ue>O$1||(Ue>O$1||ke<O$1)&&We)&&(Ue++,Ue===I$2&&Ue++),Ue>Z$1&&(Ue=Ue-Z$1+A$1-1),je>V$1?(je=je-V$1+A$1-1,We=!0):We=!1,(je===I$2||Be<I$2&&je>I$2||(je>I$2||Be<I$2)&&We)&&je++,(je===O$1||Be<O$1&&je>O$1||(je>O$1||Be<O$1)&&We)&&(je++,je===I$2&&je++),je>V$1&&(je=je-V$1+A$1-1);var Qe=String.fromCharCode(Ue)+String.fromCharCode(je);return Qe}function decode(Ae){if(Ae&&Ae.length===0)throw"MGRSPoint coverting from nothing";for(var e=Ae.length,t=null,Oe="",ke,Be=0;!/[A-Z]/.test(ke=Ae.charAt(Be));){if(Be>=2)throw"MGRSPoint bad conversion from: "+Ae;Oe+=ke,Be++}var Ue=parseInt(Oe,10);if(Be===0||Be+3>e)throw"MGRSPoint bad conversion from: "+Ae;var je=Ae.charAt(Be++);if(je<="A"||je==="B"||je==="Y"||je>="Z"||je==="I"||je==="O")throw"MGRSPoint zone letter "+je+" not handled: "+Ae;t=Ae.substring(Be,Be+=2);for(var We=get100kSetForZone(Ue),Qe=getEastingFromChar(t.charAt(0),We),Cn=getNorthingFromChar(t.charAt(1),We);Cn<getMinNorthing(je);)Cn+=2e6;var An=e-Be;if(An%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+Ae;var En=An/2,Sn=0,Tn=0,Dn,ti,ni,ii,si;return En>0&&(Dn=1e5/Math.pow(10,En),ti=Ae.substring(Be,Be+En),Sn=parseFloat(ti)*Dn,ni=Ae.substring(Be+En),Tn=parseFloat(ni)*Dn),ii=Sn+Qe,si=Tn+Cn,{easting:ii,northing:si,zoneLetter:je,zoneNumber:Ue,accuracy:Dn}}function getEastingFromChar(Ae,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),Oe=1e5,ke=!1;t!==Ae.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>Z$1){if(ke)throw"Bad character: "+Ae;t=A$1,ke=!0}Oe+=1e5}return Oe}function getNorthingFromChar(Ae,e){if(Ae>"V")throw"MGRSPoint given invalid Northing "+Ae;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),Oe=0,ke=!1;t!==Ae.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>V$1){if(ke)throw"Bad character: "+Ae;t=A$1,ke=!0}Oe+=1e5}return Oe}function getMinNorthing(Ae){var e;switch(Ae){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+Ae}function Point(Ae,e,t){if(!(this instanceof Point))return new Point(Ae,e,t);if(Array.isArray(Ae))this.x=Ae[0],this.y=Ae[1],this.z=Ae[2]||0;else if(typeof Ae=="object")this.x=Ae.x,this.y=Ae.y,this.z=Ae.z||0;else if(typeof Ae=="string"&&typeof e>"u"){var Oe=Ae.split(",");this.x=parseFloat(Oe[0],10),this.y=parseFloat(Oe[1],10),this.z=parseFloat(Oe[2],10)||0}else this.x=Ae,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(Ae){return new Point(toPoint(Ae))};Point.prototype.toMGRS=function(Ae){return forward$u([this.x,this.y],Ae)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(Ae){var e=[];e[0]=C00-Ae*(C02+Ae*(C04+Ae*(C06+Ae*C08))),e[1]=Ae*(C22-Ae*(C04+Ae*(C06+Ae*C08)));var t=Ae*Ae;return e[2]=t*(C44-Ae*(C46+Ae*C48)),t*=Ae,e[3]=t*(C66-Ae*C68),e[4]=t*Ae*C88,e}function pj_mlfn(Ae,e,t,Oe){return t*=e,e*=e,Oe[0]*Ae-t*(Oe[1]+e*(Oe[2]+e*(Oe[3]+e*Oe[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(Ae,e,t){for(var Oe=1/(1-e),ke=Ae,Be=MAX_ITER$3;Be;--Be){var Ue=Math.sin(ke),je=1-e*Ue*Ue;if(je=(pj_mlfn(ke,Ue,Math.cos(ke),t)-Ae)*(je*Math.sqrt(je))*Oe,ke-=je,Math.abs(je)<EPSLN)return ke}return ke}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(Ae){var e=Ae.x,t=Ae.y,Oe=adjust_lon(e-this.long0),ke,Be,Ue,je=Math.sin(t),We=Math.cos(t);if(this.es){var Cn=We*Oe,An=Math.pow(Cn,2),En=this.ep2*Math.pow(We,2),Sn=Math.pow(En,2),Tn=Math.abs(We)>EPSLN?Math.tan(t):0,Dn=Math.pow(Tn,2),ti=Math.pow(Dn,2);ke=1-this.es*Math.pow(je,2),Cn=Cn/Math.sqrt(ke);var ni=pj_mlfn(t,je,We,this.en);Be=this.a*(this.k0*Cn*(1+An/6*(1-Dn+En+An/20*(5-18*Dn+ti+14*En-58*Dn*En+An/42*(61+179*ti-ti*Dn-479*Dn)))))+this.x0,Ue=this.a*(this.k0*(ni-this.ml0+je*Oe*Cn/2*(1+An/12*(5-Dn+9*En+4*Sn+An/30*(61+ti-58*Dn+270*En-330*Dn*En+An/56*(1385+543*ti-ti*Dn-3111*Dn))))))+this.y0}else{var Qe=We*Math.sin(Oe);if(Math.abs(Math.abs(Qe)-1)<EPSLN)return 93;if(Be=.5*this.a*this.k0*Math.log((1+Qe)/(1-Qe))+this.x0,Ue=We*Math.cos(Oe)/Math.sqrt(1-Math.pow(Qe,2)),Qe=Math.abs(Ue),Qe>=1){if(Qe-1>EPSLN)return 93;Ue=0}else Ue=Math.acos(Ue);t<0&&(Ue=-Ue),Ue=this.a*this.k0*(Ue-this.lat0)+this.y0}return Ae.x=Be,Ae.y=Ue,Ae}function inverse$t(Ae){var e,t,Oe,ke,Be=(Ae.x-this.x0)*(1/this.a),Ue=(Ae.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+Ue/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var An=Math.sin(t),En=Math.cos(t),Sn=Math.abs(En)>EPSLN?Math.tan(t):0,Tn=this.ep2*Math.pow(En,2),Dn=Math.pow(Tn,2),ti=Math.pow(Sn,2),ni=Math.pow(ti,2);e=1-this.es*Math.pow(An,2);var ii=Be*Math.sqrt(e)/this.k0,si=Math.pow(ii,2);e=e*Sn,Oe=t-e*si/(1-this.es)*.5*(1-si/12*(5+3*ti-9*Tn*ti+Tn-4*Dn-si/30*(61+90*ti-252*Tn*ti+45*ni+46*Tn-si/56*(1385+3633*ti+4095*ni+1574*ni*ti)))),ke=adjust_lon(this.long0+ii*(1-si/6*(1+2*ti+Tn-si/20*(5+28*ti+24*ni+8*Tn*ti+6*Tn-si/42*(61+662*ti+1320*ni+720*ni*ti))))/En)}else Oe=HALF_PI*sign(Ue),ke=0;else{var je=Math.exp(Be/this.k0),We=.5*(je-1/je),Qe=this.lat0+Ue/this.k0,Cn=Math.cos(Qe);e=Math.sqrt((1-Math.pow(Cn,2))/(1+Math.pow(We,2))),Oe=Math.asin(e),Ue<0&&(Oe=-Oe),We===0&&Cn===0?ke=0:ke=adjust_lon(Math.atan2(We,Cn)+this.long0)}return Ae.x=ke,Ae.y=Oe,Ae}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(Ae){var e=Math.exp(Ae);return e=(e-1/e)/2,e}function hypot(Ae,e){Ae=Math.abs(Ae),e=Math.abs(e);var t=Math.max(Ae,e),Oe=Math.min(Ae,e)/(t||1);return t*Math.sqrt(1+Math.pow(Oe,2))}function log1py(Ae){var e=1+Ae,t=e-1;return t===0?Ae:Ae*Math.log(e)/t}function asinhy(Ae){var e=Math.abs(Ae);return e=log1py(e*(1+e/(hypot(1,e)+1))),Ae<0?-e:e}function gatg(Ae,e){for(var t=2*Math.cos(2*e),Oe=Ae.length-1,ke=Ae[Oe],Be=0,Ue;--Oe>=0;)Ue=-Be+t*ke+Ae[Oe],Be=ke,ke=Ue;return e+Ue*Math.sin(2*e)}function clens(Ae,e){for(var t=2*Math.cos(e),Oe=Ae.length-1,ke=Ae[Oe],Be=0,Ue;--Oe>=0;)Ue=-Be+t*ke+Ae[Oe],Be=ke,ke=Ue;return Math.sin(e)*Ue}function cosh(Ae){var e=Math.exp(Ae);return e=(e+1/e)/2,e}function clens_cmplx(Ae,e,t){for(var Oe=Math.sin(e),ke=Math.cos(e),Be=sinh(t),Ue=cosh(t),je=2*ke*Ue,We=-2*Oe*Be,Qe=Ae.length-1,Cn=Ae[Qe],An=0,En=0,Sn=0,Tn,Dn;--Qe>=0;)Tn=En,Dn=An,En=Cn,An=Sn,Cn=-Tn+je*En-We*An+Ae[Qe],Sn=-Dn+We*En+je*An;return je=Oe*Ue,We=ke*Be,[je*Cn-We*Sn,je*Sn+We*Cn]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var Ae=this.es/(1+Math.sqrt(1-this.es)),e=Ae/(2-Ae),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var Oe=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(Oe+clens(this.gtu,2*Oe))}function forward$s(Ae){var e=adjust_lon(Ae.x-this.long0),t=Ae.y;t=gatg(this.cbg,t);var Oe=Math.sin(t),ke=Math.cos(t),Be=Math.sin(e),Ue=Math.cos(e);t=Math.atan2(Oe,Ue*ke),e=Math.atan2(Be*ke,hypot(Oe,ke*Ue)),e=asinhy(Math.tan(e));var je=clens_cmplx(this.gtu,2*t,2*e);t=t+je[0],e=e+je[1];var We,Qe;return Math.abs(e)<=2.623395162778?(We=this.a*(this.Qn*e)+this.x0,Qe=this.a*(this.Qn*t+this.Zb)+this.y0):(We=1/0,Qe=1/0),Ae.x=We,Ae.y=Qe,Ae}function inverse$s(Ae){var e=(Ae.x-this.x0)*(1/this.a),t=(Ae.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var Oe,ke;if(Math.abs(e)<=2.623395162778){var Be=clens_cmplx(this.utg,2*t,2*e);t=t+Be[0],e=e+Be[1],e=Math.atan(sinh(e));var Ue=Math.sin(t),je=Math.cos(t),We=Math.sin(e),Qe=Math.cos(e);t=Math.atan2(Ue*Qe,hypot(We,Qe*je)),e=Math.atan2(We,Qe*je),Oe=adjust_lon(e+this.long0),ke=gatg(this.cgb,t)}else Oe=1/0,ke=1/0;return Ae.x=Oe,Ae.y=ke,Ae}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(Ae,e){if(Ae===void 0){if(Ae=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,Ae<0)return 0;if(Ae>60)return 60}return Ae}var dependsOn="etmerc";function init$t(){var Ae=adjust_zone(this.zone,this.long0);if(Ae===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(Ae)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(Ae,e){return Math.pow((1-Ae)/(1+Ae),e)}var MAX_ITER$2=20;function init$s(){var Ae=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*Ae*Ae),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(Ae/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*Ae,this.ratexp))}function forward$r(Ae){var e=Ae.x,t=Ae.y;return Ae.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,Ae.x=this.C*e,Ae}function inverse$r(Ae){for(var e=1e-14,t=Ae.x/this.C,Oe=Ae.y,ke=Math.pow(Math.tan(.5*Oe+FORTPI)/this.K,1/this.C),Be=MAX_ITER$2;Be>0&&(Oe=2*Math.atan(ke*srat(this.e*Math.sin(Ae.y),-.5*this.e))-HALF_PI,!(Math.abs(Oe-Ae.y)<e));--Be)Ae.y=Oe;return Be?(Ae.x=t,Ae.y=Oe,Ae):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(Ae){var e,t,Oe,ke;return Ae.x=adjust_lon(Ae.x-this.long0),gauss.forward.apply(this,[Ae]),e=Math.sin(Ae.y),t=Math.cos(Ae.y),Oe=Math.cos(Ae.x),ke=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*Oe),Ae.x=ke*t*Math.sin(Ae.x),Ae.y=ke*(this.cosc0*e-this.sinc0*t*Oe),Ae.x=this.a*Ae.x+this.x0,Ae.y=this.a*Ae.y+this.y0,Ae}function inverse$q(Ae){var e,t,Oe,ke,Be;if(Ae.x=(Ae.x-this.x0)/this.a,Ae.y=(Ae.y-this.y0)/this.a,Ae.x/=this.k0,Ae.y/=this.k0,Be=hypot(Ae.x,Ae.y)){var Ue=2*Math.atan2(Be,this.R2);e=Math.sin(Ue),t=Math.cos(Ue),ke=Math.asin(t*this.sinc0+Ae.y*e*this.cosc0/Be),Oe=Math.atan2(Ae.x*e,Be*this.cosc0*t-Ae.y*this.sinc0*e)}else ke=this.phic0,Oe=0;return Ae.x=Oe,Ae.y=ke,gauss.inverse.apply(this,[Ae]),Ae.x=adjust_lon(Ae.x+this.long0),Ae}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(Ae,e,t){return e*=t,Math.tan(.5*(HALF_PI+Ae))*Math.pow((1-e)/(1+e),.5*t)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(Ae){var e=Ae.x,t=Ae.y,Oe=Math.sin(t),ke=Math.cos(t),Be,Ue,je,We,Qe,Cn,An=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(Ae.x=NaN,Ae.y=NaN,Ae):this.sphere?(Be=2*this.k0/(1+this.sinlat0*Oe+this.coslat0*ke*Math.cos(An)),Ae.x=this.a*Be*ke*Math.sin(An)+this.x0,Ae.y=this.a*Be*(this.coslat0*Oe-this.sinlat0*ke*Math.cos(An))+this.y0,Ae):(Ue=2*Math.atan(this.ssfn_(t,Oe,this.e))-HALF_PI,We=Math.cos(Ue),je=Math.sin(Ue),Math.abs(this.coslat0)<=EPSLN?(Qe=tsfnz(this.e,t*this.con,this.con*Oe),Cn=2*this.a*this.k0*Qe/this.cons,Ae.x=this.x0+Cn*Math.sin(e-this.long0),Ae.y=this.y0-this.con*Cn*Math.cos(e-this.long0),Ae):(Math.abs(this.sinlat0)<EPSLN?(Be=2*this.a*this.k0/(1+We*Math.cos(An)),Ae.y=Be*je):(Be=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*je+this.cosX0*We*Math.cos(An))),Ae.y=Be*(this.cosX0*je-this.sinX0*We*Math.cos(An))+this.y0),Ae.x=Be*We*Math.sin(An)+this.x0,Ae))}function inverse$p(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e,t,Oe,ke,Be,Ue=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y);if(this.sphere){var je=2*Math.atan(Ue/(2*this.a*this.k0));return e=this.long0,t=this.lat0,Ue<=EPSLN?(Ae.x=e,Ae.y=t,Ae):(t=Math.asin(Math.cos(je)*this.sinlat0+Ae.y*Math.sin(je)*this.coslat0/Ue),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(Ae.x,-1*Ae.y)):e=adjust_lon(this.long0+Math.atan2(Ae.x,Ae.y)):e=adjust_lon(this.long0+Math.atan2(Ae.x*Math.sin(je),Ue*this.coslat0*Math.cos(je)-Ae.y*this.sinlat0*Math.sin(je))),Ae.x=e,Ae.y=t,Ae)}else if(Math.abs(this.coslat0)<=EPSLN){if(Ue<=EPSLN)return t=this.lat0,e=this.long0,Ae.x=e,Ae.y=t,Ae;Ae.x*=this.con,Ae.y*=this.con,Oe=Ue*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,Oe),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(Ae.x,-1*Ae.y))}else ke=2*Math.atan(Ue*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,Ue<=EPSLN?Be=this.X0:(Be=Math.asin(Math.cos(ke)*this.sinX0+Ae.y*Math.sin(ke)*this.cosX0/Ue),e=adjust_lon(this.long0+Math.atan2(Ae.x*Math.sin(ke),Ue*this.cosX0*Math.cos(ke)-Ae.y*this.sinX0*Math.sin(ke)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Be)));return Ae.x=e,Ae.y=t,Ae}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var Ae=this.lat0;this.lambda0=this.long0;var e=Math.sin(Ae),t=this.a,Oe=this.rf,ke=1/Oe,Be=2*ke-Math.pow(ke,2),Ue=this.e=Math.sqrt(Be);this.R=this.k0*t*Math.sqrt(1-Be)/(1-Be*Math.pow(e,2)),this.alpha=Math.sqrt(1+Be/(1-Be)*Math.pow(Math.cos(Ae),4)),this.b0=Math.asin(e/this.alpha);var je=Math.log(Math.tan(Math.PI/4+this.b0/2)),We=Math.log(Math.tan(Math.PI/4+Ae/2)),Qe=Math.log((1+Ue*e)/(1-Ue*e));this.K=je-this.alpha*We+this.alpha*Ue/2*Qe}function forward$o(Ae){var e=Math.log(Math.tan(Math.PI/4-Ae.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(Ae.y))/(1-this.e*Math.sin(Ae.y))),Oe=-this.alpha*(e+t)+this.K,ke=2*(Math.atan(Math.exp(Oe))-Math.PI/4),Be=this.alpha*(Ae.x-this.lambda0),Ue=Math.atan(Math.sin(Be)/(Math.sin(this.b0)*Math.tan(ke)+Math.cos(this.b0)*Math.cos(Be))),je=Math.asin(Math.cos(this.b0)*Math.sin(ke)-Math.sin(this.b0)*Math.cos(ke)*Math.cos(Be));return Ae.y=this.R/2*Math.log((1+Math.sin(je))/(1-Math.sin(je)))+this.y0,Ae.x=this.R*Ue+this.x0,Ae}function inverse$o(Ae){for(var e=Ae.x-this.x0,t=Ae.y-this.y0,Oe=e/this.R,ke=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),Be=Math.asin(Math.cos(this.b0)*Math.sin(ke)+Math.sin(this.b0)*Math.cos(ke)*Math.cos(Oe)),Ue=Math.atan(Math.sin(Oe)/(Math.cos(this.b0)*Math.cos(Oe)-Math.sin(this.b0)*Math.tan(ke))),je=this.lambda0+Ue/this.alpha,We=0,Qe=Be,Cn=-1e3,An=0;Math.abs(Qe-Cn)>1e-7;){if(++An>20)return;We=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Be/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Qe))/2)),Cn=Qe,Qe=2*Math.atan(Math.exp(We))-Math.PI/2}return Ae.x=je,Ae.y=Qe,Ae}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(Ae){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof Ae.PROJECTION=="object"?Object.keys(Ae.PROJECTION)[0]:Ae.PROJECTION;return"no_uoff"in Ae||"no_off"in Ae||e.indexOf(t)!==-1}function init$o(){var Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn=0,An,En=0,Sn=0,Tn=0,Dn=0,ti=0,ni=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var ii=!1;"alpha"in this&&(ii=!0);var si=!1;if("rectified_grid_angle"in this&&(si=!0),ii&&(ni=this.alpha),si&&(Cn=this.rectified_grid_angle*D2R$1),ii||si)En=this.longc;else if(Sn=this.long1,Dn=this.lat1,Tn=this.long2,ti=this.lat2,Math.abs(Dn-ti)<=TOL||(Ae=Math.abs(Dn))<=TOL||Math.abs(Ae-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(ti)-HALF_PI)<=TOL)throw new Error;var oi=1-this.es;e=Math.sqrt(oi),Math.abs(this.lat0)>EPSLN?(je=Math.sin(this.lat0),t=Math.cos(this.lat0),Ae=1-this.es*je*je,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/oi),this.A=this.B*this.k0*e/Ae,Oe=this.B*e/(t*Math.sqrt(Ae)),ke=Oe*Oe-1,ke<=0?ke=0:(ke=Math.sqrt(ke),this.lat0<0&&(ke=-ke)),this.E=ke+=Oe,this.E*=Math.pow(tsfnz(this.e,this.lat0,je),this.B)):(this.B=1/e,this.A=this.k0,this.E=Oe=ke=1),ii||si?(ii?(An=Math.asin(Math.sin(ni)/Oe),si||(Cn=ni)):(An=Cn,ni=Math.asin(Oe*Math.sin(An))),this.lam0=En-Math.asin(.5*(ke-1/ke)*Math.tan(An))/this.B):(Be=Math.pow(tsfnz(this.e,Dn,Math.sin(Dn)),this.B),Ue=Math.pow(tsfnz(this.e,ti,Math.sin(ti)),this.B),ke=this.E/Be,We=(Ue-Be)/(Ue+Be),Qe=this.E*this.E,Qe=(Qe-Ue*Be)/(Qe+Ue*Be),Ae=Sn-Tn,Ae<-Math.pi?Tn-=TWO_PI:Ae>Math.pi&&(Tn+=TWO_PI),this.lam0=adjust_lon(.5*(Sn+Tn)-Math.atan(Qe*Math.tan(.5*this.B*(Sn-Tn))/We)/this.B),An=Math.atan(2*Math.sin(this.B*adjust_lon(Sn-this.lam0))/(ke-1/ke)),Cn=ni=Math.asin(Oe*Math.sin(An))),this.singam=Math.sin(An),this.cosgam=Math.cos(An),this.sinrot=Math.sin(Cn),this.cosrot=Math.cos(Cn),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(Oe*Oe-1)/Math.cos(ni))),this.lat0<0&&(this.u_0=-this.u_0)),ke=.5*An,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-ke)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+ke))}function forward$n(Ae){var e={},t,Oe,ke,Be,Ue,je,We,Qe;if(Ae.x=Ae.x-this.lam0,Math.abs(Math.abs(Ae.y)-HALF_PI)>EPSLN){if(Ue=this.E/Math.pow(tsfnz(this.e,Ae.y,Math.sin(Ae.y)),this.B),je=1/Ue,t=.5*(Ue-je),Oe=.5*(Ue+je),Be=Math.sin(this.B*Ae.x),ke=(t*this.singam-Be*this.cosgam)/Oe,Math.abs(Math.abs(ke)-1)<EPSLN)throw new Error;Qe=.5*this.ArB*Math.log((1-ke)/(1+ke)),je=Math.cos(this.B*Ae.x),Math.abs(je)<TOL?We=this.A*Ae.x:We=this.ArB*Math.atan2(t*this.cosgam+Be*this.singam,je)}else Qe=Ae.y>0?this.v_pole_n:this.v_pole_s,We=this.ArB*Ae.y;return this.no_rot?(e.x=We,e.y=Qe):(We-=this.u_0,e.x=Qe*this.cosrot+We*this.sinrot,e.y=We*this.cosrot-Qe*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(Ae){var e,t,Oe,ke,Be,Ue,je,We={};if(Ae.x=(Ae.x-this.x0)*(1/this.a),Ae.y=(Ae.y-this.y0)*(1/this.a),this.no_rot?(t=Ae.y,e=Ae.x):(t=Ae.x*this.cosrot-Ae.y*this.sinrot,e=Ae.y*this.cosrot+Ae.x*this.sinrot+this.u_0),Oe=Math.exp(-this.BrA*t),ke=.5*(Oe-1/Oe),Be=.5*(Oe+1/Oe),Ue=Math.sin(this.BrA*e),je=(Ue*this.cosgam+ke*this.singam)/Be,Math.abs(Math.abs(je)-1)<EPSLN)We.x=0,We.y=je<0?-HALF_PI:HALF_PI;else{if(We.y=this.E/Math.sqrt((1+je)/(1-je)),We.y=phi2z(this.e,Math.pow(We.y,1/this.B)),We.y===1/0)throw new Error;We.x=-this.rB*Math.atan2(ke*this.cosgam-Ue*this.singam,Math.cos(this.BrA*e))}return We.x+=this.lam0,We}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var Ae=this.b/this.a;this.e=Math.sqrt(1-Ae*Ae);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),Oe=msfnz(this.e,e,t),ke=tsfnz(this.e,this.lat1,e),Be=Math.sin(this.lat2),Ue=Math.cos(this.lat2),je=msfnz(this.e,Be,Ue),We=tsfnz(this.e,this.lat2,Be),Qe=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(Oe/je)/Math.log(ke/We):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=Oe/(this.ns*Math.pow(ke,this.ns)),this.rh=this.a*this.f0*Math.pow(Qe,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(Ae){var e=Ae.x,t=Ae.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var Oe=Math.abs(Math.abs(t)-HALF_PI),ke,Be;if(Oe>EPSLN)ke=tsfnz(this.e,t,Math.sin(t)),Be=this.a*this.f0*Math.pow(ke,this.ns);else{if(Oe=t*this.ns,Oe<=0)return null;Be=0}var Ue=this.ns*adjust_lon(e-this.long0);return Ae.x=this.k0*(Be*Math.sin(Ue))+this.x0,Ae.y=this.k0*(this.rh-Be*Math.cos(Ue))+this.y0,Ae}function inverse$m(Ae){var e,t,Oe,ke,Be,Ue=(Ae.x-this.x0)/this.k0,je=this.rh-(Ae.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(Ue*Ue+je*je),t=1):(e=-Math.sqrt(Ue*Ue+je*je),t=-1);var We=0;if(e!==0&&(We=Math.atan2(t*Ue,t*je)),e!==0||this.ns>0){if(t=1/this.ns,Oe=Math.pow(e/(this.a*this.f0),t),ke=phi2z(this.e,Oe),ke===-9999)return null}else ke=-HALF_PI;return Be=adjust_lon(We/this.ns+this.long0),Ae.x=Be,Ae.y=ke,Ae}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(Ae){var e,t,Oe,ke,Be,Ue,je,We=Ae.x,Qe=Ae.y,Cn=adjust_lon(We-this.long0);return e=Math.pow((1+this.e*Math.sin(Qe))/(1-this.e*Math.sin(Qe)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(Qe/2+this.s45),this.alfa)/e)-this.s45),Oe=-Cn*this.alfa,ke=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(Oe)),Be=Math.asin(Math.cos(t)*Math.sin(Oe)/Math.cos(ke)),Ue=this.n*Be,je=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(ke/2+this.s45),this.n),Ae.y=je*Math.cos(Ue)/1,Ae.x=je*Math.sin(Ue)/1,this.czech||(Ae.y*=-1,Ae.x*=-1),Ae}function inverse$l(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe=Ae.x;Ae.x=Ae.y,Ae.y=Qe,this.czech||(Ae.y*=-1,Ae.x*=-1),Ue=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),Be=Math.atan2(Ae.y,Ae.x),ke=Be/Math.sin(this.s0),Oe=2*(Math.atan(Math.pow(this.ro0/Ue,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(Oe)-Math.sin(this.ad)*Math.cos(Oe)*Math.cos(ke)),t=Math.asin(Math.cos(Oe)*Math.sin(ke)/Math.cos(e)),Ae.x=this.long0-t/this.alfa,je=e,We=0;var Cn=0;do Ae.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(je))/(1-this.e*Math.sin(je)),this.e/2))-this.s45),Math.abs(je-Ae.y)<1e-10&&(We=1),je=Ae.y,Cn+=1;while(We===0&&Cn<15);return Cn>=15?null:Ae}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(Ae,e,t,Oe,ke){return Ae*ke-e*Math.sin(2*ke)+t*Math.sin(4*ke)-Oe*Math.sin(6*ke)}function e0fn(Ae){return 1-.25*Ae*(1+Ae/16*(3+1.25*Ae))}function e1fn(Ae){return .375*Ae*(1+.25*Ae*(1+.46875*Ae))}function e2fn(Ae){return .05859375*Ae*Ae*(1+.75*Ae)}function e3fn(Ae){return Ae*Ae*Ae*(35/3072)}function gN(Ae,e,t){var Oe=e*t;return Ae/Math.sqrt(1-Oe*Oe)}function adjust_lat(Ae){return Math.abs(Ae)<HALF_PI?Ae:Ae-sign(Ae)*Math.PI}function imlfn(Ae,e,t,Oe,ke){var Be,Ue;Be=Ae/e;for(var je=0;je<15;je++)if(Ue=(Ae-(e*Be-t*Math.sin(2*Be)+Oe*Math.sin(4*Be)-ke*Math.sin(6*Be)))/(e-2*t*Math.cos(2*Be)+4*Oe*Math.cos(4*Be)-6*ke*Math.cos(6*Be)),Be+=Ue,Math.abs(Ue)<=1e-10)return Be;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(Ae){var e,t,Oe=Ae.x,ke=Ae.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(ke)*Math.sin(Oe)),t=this.a*(Math.atan2(Math.tan(ke),Math.cos(Oe))-this.lat0);else{var Be=Math.sin(ke),Ue=Math.cos(ke),je=gN(this.a,this.e,Be),We=Math.tan(ke)*Math.tan(ke),Qe=Oe*Math.cos(ke),Cn=Qe*Qe,An=this.es*Ue*Ue/(1-this.es),En=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,ke);e=je*Qe*(1-Cn*We*(1/6-(8-We+8*An)*Cn/120)),t=En-this.ml0+je*Be/Ue*Cn*(.5+(5-We+6*An)*Cn/24)}return Ae.x=e+this.x0,Ae.y=t+this.y0,Ae}function inverse$k(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e=Ae.x/this.a,t=Ae.y/this.a,Oe,ke;if(this.sphere){var Be=t+this.lat0;Oe=Math.asin(Math.sin(Be)*Math.cos(e)),ke=Math.atan2(Math.tan(e),Math.cos(Be))}else{var Ue=this.ml0/this.a+t,je=imlfn(Ue,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(je)-HALF_PI)<=EPSLN)return Ae.x=this.long0,Ae.y=HALF_PI,t<0&&(Ae.y*=-1),Ae;var We=gN(this.a,this.e,Math.sin(je)),Qe=We*We*We/this.a/this.a*(1-this.es),Cn=Math.pow(Math.tan(je),2),An=e*this.a/We,En=An*An;Oe=je-We*Math.tan(je)/Qe*An*An*(.5-(1+3*Cn)*An*An/24),ke=An*(1-En*(Cn/3+(1+3*Cn)*Cn*En/15))/Math.cos(je)}return Ae.x=adjust_lon(ke+this.long0),Ae.y=adjust_lat(Oe),Ae}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(Ae,e){var t;return Ae>1e-7?(t=Ae*e,(1-Ae*Ae)*(e/(1-t*t)-.5/Ae*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var Ae=Math.abs(this.lat0);if(Math.abs(Ae-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(Ae)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An=Ae.x,En=Ae.y;if(An=adjust_lon(An-this.long0),this.sphere){if(Be=Math.sin(En),Cn=Math.cos(En),Oe=Math.cos(An),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+Cn*Oe:1+this.sinph0*Be+this.cosph0*Cn*Oe,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*Cn*Math.sin(An),t*=this.mode===this.EQUIT?Be:this.cosph0*Be-this.sinph0*Cn*Oe}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Oe=-Oe),Math.abs(En+this.lat0)<EPSLN)return null;t=FORTPI-En*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(An),t*=Oe}}else{switch(je=0,We=0,Qe=0,Oe=Math.cos(An),ke=Math.sin(An),Be=Math.sin(En),Ue=qsfnz(this.e,Be),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(je=Ue/this.qp,We=Math.sqrt(1-je*je)),this.mode){case this.OBLIQ:Qe=1+this.sinb1*je+this.cosb1*We*Oe;break;case this.EQUIT:Qe=1+We*Oe;break;case this.N_POLE:Qe=HALF_PI+En,Ue=this.qp-Ue;break;case this.S_POLE:Qe=En-HALF_PI,Ue=this.qp+Ue;break}if(Math.abs(Qe)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Qe=Math.sqrt(2/Qe),this.mode===this.OBLIQ?t=this.ymf*Qe*(this.cosb1*je-this.sinb1*We*Oe):t=(Qe=Math.sqrt(2/(1+We*Oe)))*je*this.ymf,e=this.xmf*Qe*We*ke;break;case this.N_POLE:case this.S_POLE:Ue>=0?(e=(Qe=Math.sqrt(Ue))*ke,t=Oe*(this.mode===this.S_POLE?Qe:-Qe)):e=t=0;break}}return Ae.x=this.a*e+this.x0,Ae.y=this.a*t+this.y0,Ae}function inverse$j(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e=Ae.x/this.a,t=Ae.y/this.a,Oe,ke,Be,Ue,je,We,Qe;if(this.sphere){var Cn=0,An,En=0;if(An=Math.sqrt(e*e+t*t),ke=An*.5,ke>1)return null;switch(ke=2*Math.asin(ke),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(En=Math.sin(ke),Cn=Math.cos(ke)),this.mode){case this.EQUIT:ke=Math.abs(An)<=EPSLN?0:Math.asin(t*En/An),e*=En,t=Cn*An;break;case this.OBLIQ:ke=Math.abs(An)<=EPSLN?this.lat0:Math.asin(Cn*this.sinph0+t*En*this.cosph0/An),e*=En*this.cosph0,t=(Cn-Math.sin(ke)*this.sinph0)*An;break;case this.N_POLE:t=-t,ke=HALF_PI-ke;break;case this.S_POLE:ke-=HALF_PI;break}Oe=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(Qe=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,We=Math.sqrt(e*e+t*t),We<EPSLN)return Ae.x=this.long0,Ae.y=this.lat0,Ae;Ue=2*Math.asin(.5*We/this.rq),Be=Math.cos(Ue),e*=Ue=Math.sin(Ue),this.mode===this.OBLIQ?(Qe=Be*this.sinb1+t*Ue*this.cosb1/We,je=this.qp*Qe,t=We*this.cosb1*Be-t*this.sinb1*Ue):(Qe=t*Ue/We,je=this.qp*Qe,t=We*Be)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),je=e*e+t*t,!je)return Ae.x=this.long0,Ae.y=this.lat0,Ae;Qe=1-je/this.qp,this.mode===this.S_POLE&&(Qe=-Qe)}Oe=Math.atan2(e,t),ke=authlat(Math.asin(Qe),this.apa)}return Ae.x=adjust_lon(this.long0+Oe),Ae.y=ke,Ae}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(Ae){var e,t=[];return t[0]=Ae*P00,e=Ae*Ae,t[0]+=e*P01,t[1]=e*P10,e*=Ae,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(Ae,e){var t=Ae+Ae;return Ae+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(Ae){return Math.abs(Ae)>1&&(Ae=Ae>1?1:-1),Math.asin(Ae)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(Ae){var e=Ae.x,t=Ae.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var Oe=qsfnz(this.e3,this.sin_phi),ke=this.a*Math.sqrt(this.c-this.ns0*Oe)/this.ns0,Be=this.ns0*adjust_lon(e-this.long0),Ue=ke*Math.sin(Be)+this.x0,je=this.rh-ke*Math.cos(Be)+this.y0;return Ae.x=Ue,Ae.y=je,Ae}function inverse$i(Ae){var e,t,Oe,ke,Be,Ue;return Ae.x-=this.x0,Ae.y=this.rh-Ae.y+this.y0,this.ns0>=0?(e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),Oe=1):(e=-Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),Oe=-1),ke=0,e!==0&&(ke=Math.atan2(Oe*Ae.x,Oe*Ae.y)),Oe=e*this.ns0/this.a,this.sphere?Ue=Math.asin((this.c-Oe*Oe)/(2*this.ns0)):(t=(this.c-Oe*Oe)/this.ns0,Ue=this.phi1z(this.e3,t)),Be=adjust_lon(ke/this.ns0+this.long0),Ae.x=Be,Ae.y=Ue,Ae}function phi1z(Ae,e){var t,Oe,ke,Be,Ue,je=asinz(.5*e);if(Ae<EPSLN)return je;for(var We=Ae*Ae,Qe=1;Qe<=25;Qe++)if(t=Math.sin(je),Oe=Math.cos(je),ke=Ae*t,Be=1-ke*ke,Ue=.5*Be*Be/Oe*(e/(1-We)-t/Be+.5/Ae*Math.log((1-ke)/(1+ke))),je=je+Ue,Math.abs(Ue)<=1e-7)return je;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe=Ae.x,Cn=Ae.y;return Oe=adjust_lon(Qe-this.long0),e=Math.sin(Cn),t=Math.cos(Cn),ke=Math.cos(Oe),Ue=this.sin_p14*e+this.cos_p14*t*ke,Be=1,Ue>0||Math.abs(Ue)<=EPSLN?(je=this.x0+this.a*Be*t*Math.sin(Oe)/Ue,We=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*ke)/Ue):(je=this.x0+this.infinity_dist*t*Math.sin(Oe),We=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*ke)),Ae.x=je,Ae.y=We,Ae}function inverse$h(Ae){var e,t,Oe,ke,Be,Ue;return Ae.x=(Ae.x-this.x0)/this.a,Ae.y=(Ae.y-this.y0)/this.a,Ae.x/=this.k0,Ae.y/=this.k0,(e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y))?(ke=Math.atan2(e,this.rc),t=Math.sin(ke),Oe=Math.cos(ke),Ue=asinz(Oe*this.sin_p14+Ae.y*t*this.cos_p14/e),Be=Math.atan2(Ae.x*t,e*this.cos_p14*Oe-Ae.y*this.sin_p14*t),Be=adjust_lon(this.long0+Be)):(Ue=this.phic0,Be=0),Ae.x=Be,Ae.y=Ue,Ae}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(Ae,e){var t=1-(1-Ae*Ae)/(2*Ae)*Math.log((1-Ae)/(1+Ae));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var Oe=Math.asin(.5*e),ke,Be,Ue,je,We=0;We<30;We++)if(Be=Math.sin(Oe),Ue=Math.cos(Oe),je=Ae*Be,ke=Math.pow(1-je*je,2)/(2*Ue)*(e/(1-Ae*Ae)-Be/(1-je*je)+.5/Ae*Math.log((1-je)/(1+je))),Oe+=ke,Math.abs(ke)<=1e-10)return Oe;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(Ae){var e=Ae.x,t=Ae.y,Oe,ke,Be=adjust_lon(e-this.long0);if(this.sphere)Oe=this.x0+this.a*Be*Math.cos(this.lat_ts),ke=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var Ue=qsfnz(this.e,Math.sin(t));Oe=this.x0+this.a*this.k0*Be,ke=this.y0+this.a*Ue*.5/this.k0}return Ae.x=Oe,Ae.y=ke,Ae}function inverse$g(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+Ae.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(Ae.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*Ae.y*this.k0/this.a),e=adjust_lon(this.long0+Ae.x/(this.a*this.k0))),Ae.x=e,Ae.y=t,Ae}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(Ae){var e=Ae.x,t=Ae.y,Oe=adjust_lon(e-this.long0),ke=adjust_lat(t-this.lat0);return Ae.x=this.x0+this.a*Oe*this.rc,Ae.y=this.y0+this.a*ke,Ae}function inverse$f(Ae){var e=Ae.x,t=Ae.y;return Ae.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),Ae.y=adjust_lat(this.lat0+(t-this.y0)/this.a),Ae}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(Ae){var e=Ae.x,t=Ae.y,Oe,ke,Be,Ue=adjust_lon(e-this.long0);if(Be=Ue*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(Oe=this.a*Ue,ke=-1*this.a*this.lat0):(Oe=this.a*Math.sin(Be)/Math.tan(t),ke=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(Be))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)Oe=this.a*Ue,ke=-1*this.ml0;else{var je=gN(this.a,this.e,Math.sin(t))/Math.tan(t);Oe=je*Math.sin(Be),ke=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+je*(1-Math.cos(Be))}return Ae.x=Oe+this.x0,Ae.y=ke+this.y0,Ae}function inverse$e(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe;if(Oe=Ae.x-this.x0,ke=Ae.y-this.y0,this.sphere)if(Math.abs(ke+this.a*this.lat0)<=EPSLN)e=adjust_lon(Oe/this.a+this.long0),t=0;else{Ue=this.lat0+ke/this.a,je=Oe*Oe/this.a/this.a+Ue*Ue,We=Ue;var Cn;for(Be=MAX_ITER$1;Be;--Be)if(Cn=Math.tan(We),Qe=-1*(Ue*(We*Cn+1)-We-.5*(We*We+je)*Cn)/((We-Ue)/Cn-1),We+=Qe,Math.abs(Qe)<=EPSLN){t=We;break}e=adjust_lon(this.long0+Math.asin(Oe*Math.tan(We)/this.a)/Math.sin(t))}else if(Math.abs(ke+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+Oe/this.a);else{Ue=(this.ml0+ke)/this.a,je=Oe*Oe/this.a/this.a+Ue*Ue,We=Ue;var An,En,Sn,Tn,Dn;for(Be=MAX_ITER$1;Be;--Be)if(Dn=this.e*Math.sin(We),An=Math.sqrt(1-Dn*Dn)*Math.tan(We),En=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,We),Sn=this.e0-2*this.e1*Math.cos(2*We)+4*this.e2*Math.cos(4*We)-6*this.e3*Math.cos(6*We),Tn=En/this.a,Qe=(Ue*(An*Tn+1)-Tn-.5*An*(Tn*Tn+je))/(this.es*Math.sin(2*We)*(Tn*Tn+je-2*Ue*Tn)/(4*An)+(Ue-Tn)*(An*Sn-2/Math.sin(2*We))-Sn),We-=Qe,Math.abs(Qe)<=EPSLN){t=We;break}An=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(Oe*An/this.a)/Math.sin(t))}return Ae.x=e,Ae.y=t,Ae}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(Ae){var e,t=Ae.x,Oe=Ae.y,ke=Oe-this.lat0,Be=t-this.long0,Ue=ke/SEC_TO_RAD*1e-5,je=Be,We=1,Qe=0;for(e=1;e<=10;e++)We=We*Ue,Qe=Qe+this.A[e]*We;var Cn=Qe,An=je,En=1,Sn=0,Tn,Dn,ti=0,ni=0;for(e=1;e<=6;e++)Tn=En*Cn-Sn*An,Dn=Sn*Cn+En*An,En=Tn,Sn=Dn,ti=ti+this.B_re[e]*En-this.B_im[e]*Sn,ni=ni+this.B_im[e]*En+this.B_re[e]*Sn;return Ae.x=ni*this.a+this.x0,Ae.y=ti*this.a+this.y0,Ae}function inverse$d(Ae){var e,t=Ae.x,Oe=Ae.y,ke=t-this.x0,Be=Oe-this.y0,Ue=Be/this.a,je=ke/this.a,We=1,Qe=0,Cn,An,En=0,Sn=0;for(e=1;e<=6;e++)Cn=We*Ue-Qe*je,An=Qe*Ue+We*je,We=Cn,Qe=An,En=En+this.C_re[e]*We-this.C_im[e]*Qe,Sn=Sn+this.C_im[e]*We+this.C_re[e]*Qe;for(var Tn=0;Tn<this.iterations;Tn++){var Dn=En,ti=Sn,ni,ii,si=Ue,oi=je;for(e=2;e<=6;e++)ni=Dn*En-ti*Sn,ii=ti*En+Dn*Sn,Dn=ni,ti=ii,si=si+(e-1)*(this.B_re[e]*Dn-this.B_im[e]*ti),oi=oi+(e-1)*(this.B_im[e]*Dn+this.B_re[e]*ti);Dn=1,ti=0;var ci=this.B_re[1],Pi=this.B_im[1];for(e=2;e<=6;e++)ni=Dn*En-ti*Sn,ii=ti*En+Dn*Sn,Dn=ni,ti=ii,ci=ci+e*(this.B_re[e]*Dn-this.B_im[e]*ti),Pi=Pi+e*(this.B_im[e]*Dn+this.B_re[e]*ti);var Ai=ci*ci+Pi*Pi;En=(si*ci+oi*Pi)/Ai,Sn=(oi*ci-si*Pi)/Ai}var fi=En,Oi=Sn,Ni=1,ui=0;for(e=1;e<=9;e++)Ni=Ni*fi,ui=ui+this.D[e]*Ni;var li=this.lat0+ui*SEC_TO_RAD*1e5,Ri=this.long0+Oi;return Ae.x=Ri,Ae.y=li,Ae}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(Ae){var e=Ae.x,t=Ae.y,Oe=adjust_lon(e-this.long0),ke=this.x0+this.a*Oe,Be=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return Ae.x=ke,Ae.y=Be,Ae}function inverse$c(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e=adjust_lon(this.long0+Ae.x/this.a),t=2.5*(Math.atan(Math.exp(.8*Ae.y/this.a))-Math.PI/4);return Ae.x=e,Ae.y=t,Ae}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(Ae){var e,t,Oe=Ae.x,ke=Ae.y;if(Oe=adjust_lon(Oe-this.long0),this.sphere){if(!this.m)ke=this.n!==1?Math.asin(this.n*Math.sin(ke)):ke;else for(var Be=this.n*Math.sin(ke),Ue=MAX_ITER;Ue;--Ue){var je=(this.m*ke+Math.sin(ke)-Be)/(this.m+Math.cos(ke));if(ke-=je,Math.abs(je)<EPSLN)break}e=this.a*this.C_x*Oe*(this.m+Math.cos(ke)),t=this.a*this.C_y*ke}else{var We=Math.sin(ke),Qe=Math.cos(ke);t=this.a*pj_mlfn(ke,We,Qe,this.en),e=this.a*Oe*Qe/Math.sqrt(1-this.es*We*We)}return Ae.x=e,Ae.y=t,Ae}function inverse$b(Ae){var e,t,Oe,ke;return Ae.x-=this.x0,Oe=Ae.x/this.a,Ae.y-=this.y0,e=Ae.y/this.a,this.sphere?(e/=this.C_y,Oe=Oe/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),Oe=adjust_lon(Oe+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(Ae.y/this.a,this.es,this.en),ke=Math.abs(e),ke<HALF_PI?(ke=Math.sin(e),t=this.long0+Ae.x*Math.sqrt(1-this.es*ke*ke)/(this.a*Math.cos(e)),Oe=adjust_lon(t)):ke-EPSLN<HALF_PI&&(Oe=this.long0)),Ae.x=Oe,Ae.y=e,Ae}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(Ae){for(var e=Ae.x,t=Ae.y,Oe=adjust_lon(e-this.long0),ke=t,Be=Math.PI*Math.sin(t);;){var Ue=-(ke+Math.sin(ke)-Be)/(1+Math.cos(ke));if(ke+=Ue,Math.abs(Ue)<EPSLN)break}ke/=2,Math.PI/2-Math.abs(t)<EPSLN&&(Oe=0);var je=.900316316158*this.a*Oe*Math.cos(ke)+this.x0,We=1.4142135623731*this.a*Math.sin(ke)+this.y0;return Ae.x=je,Ae.y=We,Ae}function inverse$a(Ae){var e,t;Ae.x-=this.x0,Ae.y-=this.y0,t=Ae.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var Oe=adjust_lon(this.long0+Ae.x/(.900316316158*this.a*Math.cos(e)));Oe<-Math.PI&&(Oe=-Math.PI),Oe>Math.PI&&(Oe=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var ke=Math.asin(t);return Ae.x=Oe,Ae.y=ke,Ae}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(Ae){var e=Ae.x,t=Ae.y,Oe;if(this.sphere)Oe=this.a*(this.g-t);else{var ke=mlfn(this.e0,this.e1,this.e2,this.e3,t);Oe=this.a*(this.g-ke)}var Be=this.ns*adjust_lon(e-this.long0),Ue=this.x0+Oe*Math.sin(Be),je=this.y0+this.rh-Oe*Math.cos(Be);return Ae.x=Ue,Ae.y=je,Ae}function inverse$9(Ae){Ae.x-=this.x0,Ae.y=this.rh-Ae.y+this.y0;var e,t,Oe,ke;this.ns>=0?(t=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),e=1):(t=-Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),e=-1);var Be=0;if(t!==0&&(Be=Math.atan2(e*Ae.x,e*Ae.y)),this.sphere)return ke=adjust_lon(this.long0+Be/this.ns),Oe=adjust_lat(this.g-t/this.a),Ae.x=ke,Ae.y=Oe,Ae;var Ue=this.g-t/this.a;return Oe=imlfn(Ue,this.e0,this.e1,this.e2,this.e3),ke=adjust_lon(this.long0+Be/this.ns),Ae.x=ke,Ae.y=Oe,Ae}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(Ae){var e=Ae.x,t=Ae.y,Oe=adjust_lon(e-this.long0),ke,Be;Math.abs(t)<=EPSLN&&(ke=this.x0+this.R*Oe,Be=this.y0);var Ue=asinz(2*Math.abs(t/Math.PI));(Math.abs(Oe)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(ke=this.x0,t>=0?Be=this.y0+Math.PI*this.R*Math.tan(.5*Ue):Be=this.y0+Math.PI*this.R*-Math.tan(.5*Ue));var je=.5*Math.abs(Math.PI/Oe-Oe/Math.PI),We=je*je,Qe=Math.sin(Ue),Cn=Math.cos(Ue),An=Cn/(Qe+Cn-1),En=An*An,Sn=An*(2/Qe-1),Tn=Sn*Sn,Dn=Math.PI*this.R*(je*(An-Tn)+Math.sqrt(We*(An-Tn)*(An-Tn)-(Tn+We)*(En-Tn)))/(Tn+We);Oe<0&&(Dn=-Dn),ke=this.x0+Dn;var ti=We+An;return Dn=Math.PI*this.R*(Sn*ti-je*Math.sqrt((Tn+We)*(We+1)-ti*ti))/(Tn+We),t>=0?Be=this.y0+Dn:Be=this.y0-Dn,Ae.x=ke,Ae.y=Be,Ae}function inverse$8(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn;return Ae.x-=this.x0,Ae.y-=this.y0,An=Math.PI*this.R,Oe=Ae.x/An,ke=Ae.y/An,Be=Oe*Oe+ke*ke,Ue=-Math.abs(ke)*(1+Be),je=Ue-2*ke*ke+Oe*Oe,We=-2*Ue+1+2*ke*ke+Be*Be,Sn=ke*ke/We+(2*je*je*je/We/We/We-9*Ue*je/We/We)/27,Qe=(Ue-je*je/3/We)/We,Cn=2*Math.sqrt(-Qe/3),An=3*Sn/Qe/Cn,Math.abs(An)>1&&(An>=0?An=1:An=-1),En=Math.acos(An)/3,Ae.y>=0?t=(-Cn*Math.cos(En+Math.PI/3)-je/3/We)*Math.PI:t=-(-Cn*Math.cos(En+Math.PI/3)-je/3/We)*Math.PI,Math.abs(Oe)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Be-1+Math.sqrt(1+2*(Oe*Oe-ke*ke)+Be*Be))/2/Oe),Ae.x=e,Ae.y=t,Ae}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(Ae){var e=Ae.x,t=Ae.y,Oe=Math.sin(Ae.y),ke=Math.cos(Ae.y),Be=adjust_lon(e-this.long0),Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si,oi,ci,Pi,Ai,fi,Oi,Ni,ui,li;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(Ae.x=this.x0+this.a*(HALF_PI-t)*Math.sin(Be),Ae.y=this.y0-this.a*(HALF_PI-t)*Math.cos(Be),Ae):Math.abs(this.sin_p12+1)<=EPSLN?(Ae.x=this.x0+this.a*(HALF_PI+t)*Math.sin(Be),Ae.y=this.y0+this.a*(HALF_PI+t)*Math.cos(Be),Ae):(Ai=this.sin_p12*Oe+this.cos_p12*ke*Math.cos(Be),ci=Math.acos(Ai),Pi=ci?ci/Math.sin(ci):1,Ae.x=this.x0+this.a*Pi*ke*Math.sin(Be),Ae.y=this.y0+this.a*Pi*(this.cos_p12*Oe-this.sin_p12*ke*Math.cos(Be)),Ae):(Ue=e0fn(this.es),je=e1fn(this.es),We=e2fn(this.es),Qe=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Cn=this.a*mlfn(Ue,je,We,Qe,HALF_PI),An=this.a*mlfn(Ue,je,We,Qe,t),Ae.x=this.x0+(Cn-An)*Math.sin(Be),Ae.y=this.y0-(Cn-An)*Math.cos(Be),Ae):Math.abs(this.sin_p12+1)<=EPSLN?(Cn=this.a*mlfn(Ue,je,We,Qe,HALF_PI),An=this.a*mlfn(Ue,je,We,Qe,t),Ae.x=this.x0+(Cn+An)*Math.sin(Be),Ae.y=this.y0+(Cn+An)*Math.cos(Be),Ae):(En=Oe/ke,Sn=gN(this.a,this.e,this.sin_p12),Tn=gN(this.a,this.e,Oe),Dn=Math.atan((1-this.es)*En+this.es*Sn*this.sin_p12/(Tn*ke)),ti=Math.atan2(Math.sin(Be),this.cos_p12*Math.tan(Dn)-this.sin_p12*Math.cos(Be)),ti===0?fi=Math.asin(this.cos_p12*Math.sin(Dn)-this.sin_p12*Math.cos(Dn)):Math.abs(Math.abs(ti)-Math.PI)<=EPSLN?fi=-Math.asin(this.cos_p12*Math.sin(Dn)-this.sin_p12*Math.cos(Dn)):fi=Math.asin(Math.sin(Be)*Math.cos(Dn)/Math.sin(ti)),ni=this.e*this.sin_p12/Math.sqrt(1-this.es),ii=this.e*this.cos_p12*Math.cos(ti)/Math.sqrt(1-this.es),si=ni*ii,oi=ii*ii,Oi=fi*fi,Ni=Oi*fi,ui=Ni*fi,li=ui*fi,ci=Sn*fi*(1-Oi*oi*(1-oi)/6+Ni/8*si*(1-2*oi)+ui/120*(oi*(4-7*oi)-3*ni*ni*(1-7*oi))-li/48*si),Ae.x=this.x0+ci*Math.sin(ti),Ae.y=this.y0+ci*Math.cos(ti),Ae))}function inverse$7(Ae){Ae.x-=this.x0,Ae.y-=this.y0;var e,t,Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si,oi,ci,Pi,Ai,fi;return this.sphere?(e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,Oe=Math.sin(t),ke=Math.cos(t),Be=this.long0,Math.abs(e)<=EPSLN?Ue=this.lat0:(Ue=asinz(ke*this.sin_p12+Ae.y*Oe*this.cos_p12/e),je=Math.abs(this.lat0)-HALF_PI,Math.abs(je)<=EPSLN?this.lat0>=0?Be=adjust_lon(this.long0+Math.atan2(Ae.x,-Ae.y)):Be=adjust_lon(this.long0-Math.atan2(-Ae.x,Ae.y)):Be=adjust_lon(this.long0+Math.atan2(Ae.x*Oe,e*this.cos_p12*ke-Ae.y*this.sin_p12*Oe))),Ae.x=Be,Ae.y=Ue,Ae)):(We=e0fn(this.es),Qe=e1fn(this.es),Cn=e2fn(this.es),An=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(En=this.a*mlfn(We,Qe,Cn,An,HALF_PI),e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),Sn=En-e,Ue=imlfn(Sn/this.a,We,Qe,Cn,An),Be=adjust_lon(this.long0+Math.atan2(Ae.x,-1*Ae.y)),Ae.x=Be,Ae.y=Ue,Ae):Math.abs(this.sin_p12+1)<=EPSLN?(En=this.a*mlfn(We,Qe,Cn,An,HALF_PI),e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),Sn=e-En,Ue=imlfn(Sn/this.a,We,Qe,Cn,An),Be=adjust_lon(this.long0+Math.atan2(Ae.x,Ae.y)),Ae.x=Be,Ae.y=Ue,Ae):(e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),ti=Math.atan2(Ae.x,Ae.y),Tn=gN(this.a,this.e,this.sin_p12),ni=Math.cos(ti),ii=this.e*this.cos_p12*ni,si=-ii*ii/(1-this.es),oi=3*this.es*(1-si)*this.sin_p12*this.cos_p12*ni/(1-this.es),ci=e/Tn,Pi=ci-si*(1+si)*Math.pow(ci,3)/6-oi*(1+3*si)*Math.pow(ci,4)/24,Ai=1-si*Pi*Pi/2-ci*Pi*Pi*Pi/6,Dn=Math.asin(this.sin_p12*Math.cos(Pi)+this.cos_p12*Math.sin(Pi)*ni),Be=adjust_lon(this.long0+Math.asin(Math.sin(ti)*Math.sin(Pi)/Math.cos(Dn))),fi=Math.sin(Dn),Ue=Math.atan2((fi-this.es*Ai*this.sin_p12)*Math.tan(Dn),fi*(1-this.es)),Ae.x=Be,Ae.y=Ue,Ae))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe=Ae.x,Cn=Ae.y;return Oe=adjust_lon(Qe-this.long0),e=Math.sin(Cn),t=Math.cos(Cn),ke=Math.cos(Oe),Ue=this.sin_p14*e+this.cos_p14*t*ke,Be=1,(Ue>0||Math.abs(Ue)<=EPSLN)&&(je=this.a*Be*t*Math.sin(Oe),We=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*ke)),Ae.x=je,Ae.y=We,Ae}function inverse$6(Ae){var e,t,Oe,ke,Be,Ue,je;return Ae.x-=this.x0,Ae.y-=this.y0,e=Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y),t=asinz(e/this.a),Oe=Math.sin(t),ke=Math.cos(t),Ue=this.long0,Math.abs(e)<=EPSLN?(je=this.lat0,Ae.x=Ue,Ae.y=je,Ae):(je=asinz(ke*this.sin_p14+Ae.y*Oe*this.cos_p14/e),Be=Math.abs(this.lat0)-HALF_PI,Math.abs(Be)<=EPSLN?(this.lat0>=0?Ue=adjust_lon(this.long0+Math.atan2(Ae.x,-Ae.y)):Ue=adjust_lon(this.long0-Math.atan2(-Ae.x,Ae.y)),Ae.x=Ue,Ae.y=je,Ae):(Ue=adjust_lon(this.long0+Math.atan2(Ae.x*Oe,e*this.cos_p14*ke-Ae.y*this.sin_p14*Oe)),Ae.x=Ue,Ae.y=je,Ae))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(Ae){var e={x:0,y:0},t,Oe,ke,Be,Ue,je,We={value:0};if(Ae.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(Ae.y)):t=Ae.y,Oe=Ae.x,this.face===FACE_ENUM.TOP)Be=HALF_PI-t,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(We.value=AREA_ENUM.AREA_0,ke=Oe-HALF_PI):Oe>HALF_PI+FORTPI||Oe<=-(HALF_PI+FORTPI)?(We.value=AREA_ENUM.AREA_1,ke=Oe>0?Oe-SPI:Oe+SPI):Oe>-(HALF_PI+FORTPI)&&Oe<=-FORTPI?(We.value=AREA_ENUM.AREA_2,ke=Oe+HALF_PI):(We.value=AREA_ENUM.AREA_3,ke=Oe);else if(this.face===FACE_ENUM.BOTTOM)Be=HALF_PI+t,Oe>=FORTPI&&Oe<=HALF_PI+FORTPI?(We.value=AREA_ENUM.AREA_0,ke=-Oe+HALF_PI):Oe<FORTPI&&Oe>=-FORTPI?(We.value=AREA_ENUM.AREA_1,ke=-Oe):Oe<-FORTPI&&Oe>=-(HALF_PI+FORTPI)?(We.value=AREA_ENUM.AREA_2,ke=-Oe-HALF_PI):(We.value=AREA_ENUM.AREA_3,ke=Oe>0?-Oe+SPI:-Oe-SPI);else{var Qe,Cn,An,En,Sn,Tn,Dn;this.face===FACE_ENUM.RIGHT?Oe=qsc_shift_lon_origin(Oe,+HALF_PI):this.face===FACE_ENUM.BACK?Oe=qsc_shift_lon_origin(Oe,3.14159265359):this.face===FACE_ENUM.LEFT&&(Oe=qsc_shift_lon_origin(Oe,-HALF_PI)),En=Math.sin(t),Sn=Math.cos(t),Tn=Math.sin(Oe),Dn=Math.cos(Oe),Qe=Sn*Dn,Cn=Sn*Tn,An=En,this.face===FACE_ENUM.FRONT?(Be=Math.acos(Qe),ke=qsc_fwd_equat_face_theta(Be,An,Cn,We)):this.face===FACE_ENUM.RIGHT?(Be=Math.acos(Cn),ke=qsc_fwd_equat_face_theta(Be,An,-Qe,We)):this.face===FACE_ENUM.BACK?(Be=Math.acos(-Qe),ke=qsc_fwd_equat_face_theta(Be,An,-Cn,We)):this.face===FACE_ENUM.LEFT?(Be=Math.acos(-Cn),ke=qsc_fwd_equat_face_theta(Be,An,Qe,We)):(Be=ke=0,We.value=AREA_ENUM.AREA_0)}return je=Math.atan(12/SPI*(ke+Math.acos(Math.sin(ke)*Math.cos(FORTPI))-HALF_PI)),Ue=Math.sqrt((1-Math.cos(Be))/(Math.cos(je)*Math.cos(je))/(1-Math.cos(Math.atan(1/Math.cos(ke))))),We.value===AREA_ENUM.AREA_1?je+=HALF_PI:We.value===AREA_ENUM.AREA_2?je+=SPI:We.value===AREA_ENUM.AREA_3&&(je+=1.5*SPI),e.x=Ue*Math.cos(je),e.y=Ue*Math.sin(je),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,Ae.x=e.x,Ae.y=e.y,Ae}function inverse$5(Ae){var e={lam:0,phi:0},t,Oe,ke,Be,Ue,je,We,Qe,Cn,An={value:0};if(Ae.x=(Ae.x-this.x0)/this.a,Ae.y=(Ae.y-this.y0)/this.a,Oe=Math.atan(Math.sqrt(Ae.x*Ae.x+Ae.y*Ae.y)),t=Math.atan2(Ae.y,Ae.x),Ae.x>=0&&Ae.x>=Math.abs(Ae.y)?An.value=AREA_ENUM.AREA_0:Ae.y>=0&&Ae.y>=Math.abs(Ae.x)?(An.value=AREA_ENUM.AREA_1,t-=HALF_PI):Ae.x<0&&-Ae.x>=Math.abs(Ae.y)?(An.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(An.value=AREA_ENUM.AREA_3,t+=HALF_PI),Cn=SPI/12*Math.tan(t),Ue=Math.sin(Cn)/(Math.cos(Cn)-1/Math.sqrt(2)),je=Math.atan(Ue),ke=Math.cos(t),Be=Math.tan(Oe),We=1-ke*ke*Be*Be*(1-Math.cos(Math.atan(1/Math.cos(je)))),We<-1?We=-1:We>1&&(We=1),this.face===FACE_ENUM.TOP)Qe=Math.acos(We),e.phi=HALF_PI-Qe,An.value===AREA_ENUM.AREA_0?e.lam=je+HALF_PI:An.value===AREA_ENUM.AREA_1?e.lam=je<0?je+SPI:je-SPI:An.value===AREA_ENUM.AREA_2?e.lam=je-HALF_PI:e.lam=je;else if(this.face===FACE_ENUM.BOTTOM)Qe=Math.acos(We),e.phi=Qe-HALF_PI,An.value===AREA_ENUM.AREA_0?e.lam=-je+HALF_PI:An.value===AREA_ENUM.AREA_1?e.lam=-je:An.value===AREA_ENUM.AREA_2?e.lam=-je-HALF_PI:e.lam=je<0?-je-SPI:-je+SPI;else{var En,Sn,Tn;En=We,Cn=En*En,Cn>=1?Tn=0:Tn=Math.sqrt(1-Cn)*Math.sin(je),Cn+=Tn*Tn,Cn>=1?Sn=0:Sn=Math.sqrt(1-Cn),An.value===AREA_ENUM.AREA_1?(Cn=Sn,Sn=-Tn,Tn=Cn):An.value===AREA_ENUM.AREA_2?(Sn=-Sn,Tn=-Tn):An.value===AREA_ENUM.AREA_3&&(Cn=Sn,Sn=Tn,Tn=-Cn),this.face===FACE_ENUM.RIGHT?(Cn=En,En=-Sn,Sn=Cn):this.face===FACE_ENUM.BACK?(En=-En,Sn=-Sn):this.face===FACE_ENUM.LEFT&&(Cn=En,En=Sn,Sn=-Cn),e.phi=Math.acos(-Tn)-HALF_PI,e.lam=Math.atan2(Sn,En),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var Dn,ti,ni;Dn=e.phi<0?1:0,ti=Math.tan(e.phi),ni=this.b/Math.sqrt(ti*ti+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-ni*ni)/(this.one_minus_f*ni)),Dn&&(e.phi=-e.phi)}return e.lam+=this.long0,Ae.x=e.lam,Ae.y=e.phi,Ae}function qsc_fwd_equat_face_theta(Ae,e,t,Oe){var ke;return Ae<EPSLN?(Oe.value=AREA_ENUM.AREA_0,ke=0):(ke=Math.atan2(e,t),Math.abs(ke)<=FORTPI?Oe.value=AREA_ENUM.AREA_0:ke>FORTPI&&ke<=HALF_PI+FORTPI?(Oe.value=AREA_ENUM.AREA_1,ke-=HALF_PI):ke>HALF_PI+FORTPI||ke<=-(HALF_PI+FORTPI)?(Oe.value=AREA_ENUM.AREA_2,ke=ke>=0?ke-SPI:ke+SPI):(Oe.value=AREA_ENUM.AREA_3,ke+=HALF_PI)),ke}function qsc_shift_lon_origin(Ae,e){var t=Ae+e;return t<-3.14159265359?t+=TWO_PI:t>3.14159265359&&(t-=TWO_PI),t}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(Ae,e){return Ae[0]+e*(Ae[1]+e*(Ae[2]+e*Ae[3]))},poly3_der=function(Ae,e){return Ae[1]+e*(2*Ae[2]+e*3*Ae[3])};function newton_rapshon(Ae,e,t,Oe){for(var ke=e;Oe;--Oe){var Be=Ae(ke);if(ke-=Be,Math.abs(Be)<t)break}return ke}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(Ae){var e=adjust_lon(Ae.x-this.long0),t=Math.abs(Ae.y),Oe=Math.floor(t*C1);Oe<0?Oe=0:Oe>=NODES&&(Oe=NODES-1),t=R2D*(t-RC1*Oe);var ke={x:poly3_val(COEFS_X[Oe],t)*e,y:poly3_val(COEFS_Y[Oe],t)};return Ae.y<0&&(ke.y=-ke.y),ke.x=ke.x*this.a*FXC+this.x0,ke.y=ke.y*this.a*FYC+this.y0,ke}function inverse$4(Ae){var e={x:(Ae.x-this.x0)/(this.a*FXC),y:Math.abs(Ae.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=Ae.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var Oe=COEFS_Y[t],ke=5*(e.y-Oe[0])/(COEFS_Y[t+1][0]-Oe[0]);ke=newton_rapshon(function(Be){return(poly3_val(Oe,Be)-e.y)/poly3_der(Oe,Be)},ke,EPSLN,100),e.x/=poly3_val(COEFS_X[t],ke),e.y=(5*t+ke)*D2R$1,Ae.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(Ae){var e=geodeticToGeocentric(Ae,this.es,this.a);return e}function inverse$3(Ae){var e=geocentricToGeodetic(Ae,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var Ae=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(Ae),this.sw=Math.sin(Ae)}function forward$2(Ae){Ae.x-=this.long0;var e=Math.sin(Ae.y),t=Math.cos(Ae.y),Oe=Math.cos(Ae.x),ke,Be;switch(this.mode){case mode.OBLIQ:Be=this.sinph0*e+this.cosph0*t*Oe;break;case mode.EQUIT:Be=t*Oe;break;case mode.S_POLE:Be=-e;break;case mode.N_POLE:Be=e;break}switch(Be=this.pn1/(this.p-Be),ke=Be*t*Math.sin(Ae.x),this.mode){case mode.OBLIQ:Be*=this.cosph0*e-this.sinph0*t*Oe;break;case mode.EQUIT:Be*=e;break;case mode.N_POLE:Be*=-(t*Oe);break;case mode.S_POLE:Be*=t*Oe;break}var Ue,je;return Ue=Be*this.cg+ke*this.sg,je=1/(Ue*this.sw*this.h1+this.cw),ke=(ke*this.cg-Be*this.sg)*this.cw*je,Be=Ue*je,Ae.x=ke*this.a,Ae.y=Be*this.a,Ae}function inverse$2(Ae){Ae.x/=this.a,Ae.y/=this.a;var e={x:Ae.x,y:Ae.y},t,Oe,ke;ke=1/(this.pn1-Ae.y*this.sw),t=this.pn1*Ae.x*ke,Oe=this.pn1*Ae.y*this.cw*ke,Ae.x=t*this.cg+Oe*this.sg,Ae.y=Oe*this.cg-t*this.sg;var Be=hypot(Ae.x,Ae.y);if(Math.abs(Be)<EPSLN)e.x=0,e.y=Ae.y;else{var Ue,je;switch(je=1-Be*Be*this.pfact,je=(this.p-Math.sqrt(je))/(this.pn1/Be+Be/this.pn1),Ue=Math.sqrt(1-je*je),this.mode){case mode.OBLIQ:e.y=Math.asin(Ue*this.sinph0+Ae.y*je*this.cosph0/Be),Ae.y=(Ue-this.sinph0*Math.sin(e.y))*Be,Ae.x*=je*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(Ae.y*je/Be),Ae.y=Ue*Be,Ae.x*=je;break;case mode.N_POLE:e.y=Math.asin(Ue),Ae.y=-Ae.y;break;case mode.S_POLE:e.y=-Math.asin(Ue);break}e.x=Math.atan2(Ae.x,Ae.y)}return Ae.x=e.x+this.long0,Ae.y=e.y,Ae}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var Ae=1-this.es,e=1/Ae;this.radius_p=Math.sqrt(Ae),this.radius_p2=Ae,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(Ae){var e=Ae.x,t=Ae.y,Oe,ke,Be,Ue;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var je=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(ke=je*Math.cos(e)*Math.cos(t),Be=je*Math.sin(e)*Math.cos(t),Ue=je*Math.sin(t),(this.radius_g-ke)*ke-Be*Be-Ue*Ue*this.radius_p_inv2<0)return Ae.x=Number.NaN,Ae.y=Number.NaN,Ae;Oe=this.radius_g-ke,this.flip_axis?(Ae.x=this.radius_g_1*Math.atan(Be/hypot(Ue,Oe)),Ae.y=this.radius_g_1*Math.atan(Ue/Oe)):(Ae.x=this.radius_g_1*Math.atan(Be/Oe),Ae.y=this.radius_g_1*Math.atan(Ue/hypot(Be,Oe)))}else this.shape==="sphere"&&(Oe=Math.cos(t),ke=Math.cos(e)*Oe,Be=Math.sin(e)*Oe,Ue=Math.sin(t),Oe=this.radius_g-ke,this.flip_axis?(Ae.x=this.radius_g_1*Math.atan(Be/hypot(Ue,Oe)),Ae.y=this.radius_g_1*Math.atan(Ue/Oe)):(Ae.x=this.radius_g_1*Math.atan(Be/Oe),Ae.y=this.radius_g_1*Math.atan(Ue/hypot(Be,Oe))));return Ae.x=Ae.x*this.a,Ae.y=Ae.y*this.a,Ae}function inverse$1(Ae){var e=-1,t=0,Oe=0,ke,Be,Ue,je;if(Ae.x=Ae.x/this.a,Ae.y=Ae.y/this.a,this.shape==="ellipse"){this.flip_axis?(Oe=Math.tan(Ae.y/this.radius_g_1),t=Math.tan(Ae.x/this.radius_g_1)*hypot(1,Oe)):(t=Math.tan(Ae.x/this.radius_g_1),Oe=Math.tan(Ae.y/this.radius_g_1)*hypot(1,t));var We=Oe/this.radius_p;if(ke=t*t+We*We+e*e,Be=2*this.radius_g*e,Ue=Be*Be-4*ke*this.C,Ue<0)return Ae.x=Number.NaN,Ae.y=Number.NaN,Ae;je=(-Be-Math.sqrt(Ue))/(2*ke),e=this.radius_g+je*e,t*=je,Oe*=je,Ae.x=Math.atan2(t,e),Ae.y=Math.atan(Oe*Math.cos(Ae.x)/e),Ae.y=Math.atan(this.radius_p_inv2*Math.tan(Ae.y))}else if(this.shape==="sphere"){if(this.flip_axis?(Oe=Math.tan(Ae.y/this.radius_g_1),t=Math.tan(Ae.x/this.radius_g_1)*Math.sqrt(1+Oe*Oe)):(t=Math.tan(Ae.x/this.radius_g_1),Oe=Math.tan(Ae.y/this.radius_g_1)*Math.sqrt(1+t*t)),ke=t*t+Oe*Oe+e*e,Be=2*this.radius_g*e,Ue=Be*Be-4*ke*this.C,Ue<0)return Ae.x=Number.NaN,Ae.y=Number.NaN,Ae;je=(-Be-Math.sqrt(Ue))/(2*ke),e=this.radius_g+je*e,t*=je,Oe*=je,Ae.x=Math.atan2(t,e),Ae.y=Math.atan(Oe*Math.cos(Ae.x)/e)}return Ae.x=Ae.x+this.long0,Ae}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$2=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(Ae){var e=adjust_lon(Ae.x-this.long0),t=Ae.y,Oe=Math.asin(M$2*Math.sin(t)),ke=Oe*Oe,Be=ke*ke*ke;return Ae.x=e*Math.cos(Oe)/(M$2*(A1+3*A2*ke+Be*(7*A3+9*A4*ke))),Ae.y=Oe*(A1+A2*ke+Be*(A3+A4*ke)),Ae.x=this.a*Ae.x+this.x0,Ae.y=this.a*Ae.y+this.y0,Ae}function inverse(Ae){Ae.x=(Ae.x-this.x0)/this.a,Ae.y=(Ae.y-this.y0)/this.a;var e=1e-9,t=12,Oe=Ae.y,ke,Be,Ue,je,We,Qe;for(Qe=0;Qe<t&&(ke=Oe*Oe,Be=ke*ke*ke,Ue=Oe*(A1+A2*ke+Be*(A3+A4*ke))-Ae.y,je=A1+3*A2*ke+Be*(7*A3+9*A4*ke),Oe-=We=Ue/je,!(Math.abs(We)<e));++Qe);return ke=Oe*Oe,Be=ke*ke*ke,Ae.x=M$2*Ae.x*(A1+3*A2*ke+Be*(7*A3+9*A4*ke))/Math.cos(Oe),Ae.y=Math.asin(Math.sin(Oe)/M$2),Ae.x=adjust_lon(Ae.x+this.long0),Ae}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var Ae;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),Ae=Math.cos(this.phi1),this.en),this.am1=Ae/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(Ae){var e=adjust_lon(Ae.x-(this.long0||0)),t=Ae.y,Oe,ke,Be;return Oe=this.am1+this.m1-pj_mlfn(t,ke=Math.sin(t),Be=Math.cos(t),this.en),ke=Be*e/(Oe*Math.sqrt(1-this.es*ke*ke)),Ae.x=Oe*Math.sin(ke),Ae.y=this.am1-Oe*Math.cos(ke),Ae.x=this.a*Ae.x+(this.x0||0),Ae.y=this.a*Ae.y+(this.y0||0),Ae}function e_inv(Ae){Ae.x=(Ae.x-(this.x0||0))/this.a,Ae.y=(Ae.y-(this.y0||0))/this.a;var e,t,Oe,ke;if(t=hypot(Ae.x,Ae.y=this.am1-Ae.y),ke=pj_inv_mlfn(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(ke))<HALF_PI)e=Math.sin(ke),Oe=t*Math.atan2(Ae.x,Ae.y)*Math.sqrt(1-this.es*e*e)/Math.cos(ke);else if(Math.abs(e-HALF_PI)<=EPS10)Oe=0;else throw new Error;return Ae.x=adjust_lon(Oe+(this.long0||0)),Ae.y=adjust_lat(ke),Ae}function s_fwd(Ae){var e=adjust_lon(Ae.x-(this.long0||0)),t=Ae.y,Oe,ke;return ke=this.cphi1+this.phi1-t,Math.abs(ke)>EPS10?(Ae.x=ke*Math.sin(Oe=e*Math.cos(t)/ke),Ae.y=this.cphi1-ke*Math.cos(Oe)):Ae.x=Ae.y=0,Ae.x=this.a*Ae.x+(this.x0||0),Ae.y=this.a*Ae.y+(this.y0||0),Ae}function s_inv(Ae){Ae.x=(Ae.x-(this.x0||0))/this.a,Ae.y=(Ae.y-(this.y0||0))/this.a;var e,t,Oe=hypot(Ae.x,Ae.y=this.cphi1-Ae.y);if(t=this.cphi1+this.phi1-Oe,Math.abs(t)>HALF_PI)throw new Error;return Math.abs(Math.abs(t)-HALF_PI)<=EPS10?e=0:e=Oe*Math.atan2(Ae.x,Ae.y)/Math.cos(t),Ae.x=adjust_lon(e+(this.long0||0)),Ae.y=adjust_lat(t),Ae}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(Ae){Ae.Proj.projections.add(tmerc),Ae.Proj.projections.add(etmerc),Ae.Proj.projections.add(utm),Ae.Proj.projections.add(sterea),Ae.Proj.projections.add(stere),Ae.Proj.projections.add(somerc),Ae.Proj.projections.add(omerc),Ae.Proj.projections.add(lcc),Ae.Proj.projections.add(krovak),Ae.Proj.projections.add(cass),Ae.Proj.projections.add(laea),Ae.Proj.projections.add(aea),Ae.Proj.projections.add(gnom),Ae.Proj.projections.add(cea),Ae.Proj.projections.add(eqc),Ae.Proj.projections.add(poly),Ae.Proj.projections.add(nzmg),Ae.Proj.projections.add(mill),Ae.Proj.projections.add(sinu),Ae.Proj.projections.add(moll),Ae.Proj.projections.add(eqdc),Ae.Proj.projections.add(vandg),Ae.Proj.projections.add(aeqd),Ae.Proj.projections.add(ortho),Ae.Proj.projections.add(qsc),Ae.Proj.projections.add(robin),Ae.Proj.projections.add(geocent),Ae.Proj.projections.add(tpers),Ae.Proj.projections.add(geos),Ae.Proj.projections.add(eqearth),Ae.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$y=LoggerByDefault.getLogger("CRS");function register(Ae){const e=Object.keys(Ae.defs);logger$y.trace("proj. codes :",e);const t=e.length;let Oe,ke;for(Oe=0;Oe<t;++Oe){const Be=e[Oe];if(!get$3(Be)){const Ue=Ae.defs(Be);addProjection(new Projection$1({code:Be,axisOrientation:Ue.axis,metersPerUnit:Ue.to_meter,units:Ue.units}))}}for(Oe=0;Oe<t;++Oe){const Be=e[Oe],Ue=get$3(Be);for(ke=0;ke<t;++ke){const je=e[ke],We=get$3(je);if(!get$4(Be,je))if(Ae.defs[Be]===Ae.defs[je])addEquivalentProjections([Ue,We]);else{const Qe=Ae(Be,je);addCoordinateTransforms(Ue,We,Qe.forward,Qe.inverse)}}}}var Register={isLoaded:!1,get:function(Ae){if(!(Ae===""||Ae===null||typeof Ae>"u")){var e=Ae.split(":");if(e.length===2){var t=e[0],Oe=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(Oe))return this[t][Oe]}}},exist:function(Ae){if(Ae===""||Ae===null||typeof Ae>"u")return!1;var e=Ae.split(":");if(e.length!==2)return!1;var t=e[0],Oe=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(Oe))},load:function(Ae){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var Oe=e[t],ke=this[Oe];for(var Be in ke)if(ke.hasOwnProperty(Be)){var Ue=Oe+":"+Be;Ae.defs(Ue,this.get(Ue))}}this.isLoaded=!0}},loadByDefault:function(Ae){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var Oe=e[t];for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=t+":"+ke;Ae.defs(Be,Oe[ke])}}},loadByName:function(Ae,e){if(!this.exist(e))return!1;try{Ae.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$x=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$x.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Ae){logger$x.error(Ae)}}},loadByDefault:function(){if(logger$x.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Ae){logger$x.error(Ae)}}},loadByName:function(Ae){if(logger$x.trace("Loading a custom definition projection : ",Ae),!Register.isLoaded){Register.loadByName(proj4,Ae);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$x.error(e)}}},overload:function(){logger$x.trace("Loading projections aera (extent)");for(var Ae in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(Ae)){var e=this.projectionsExtent[Ae],t=get$3(Ae),Oe=getTransform("EPSG:4326",t),ke=applyTransform([e.bottom,e.right,e.top,e.left],Oe);t.setExtent(ke),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async Ae=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:Ae,fields:m_fields,size:m_size};Object.keys(t).forEach(We=>e.searchParams.append(We,t[We]));var Oe=await fetch(e,{}),ke=await Oe.json();if(Oe.status!==200)throw new Error(Oe.message);if(!(!ke||ke.length===0)){for(let We=0;We<ke.length;We++){const Qe=ke[We];m_filterByLayerPriority.findIndex(An=>An.includes(Qe.source.layer_name))>=0&&(ke[We].score+=100)}ke.sort((We,Qe)=>Qe.score-We.score);var Be=null;m_filterWMTSPriority&&(Be=inventory(ke));for(let We=0;We<ke.length;We++){const Qe=ke[We];var Ue=m_filterByService.length===0||m_filterByService.includes(Qe.source.type);if(Ue){if(unique().length>=m_maximumResponses)break;var je={attribution:Qe.source.attribution||{},srs:Qe.source.srs||[],keywords:Qe.source.keywords||[],extent:Qe.source.extent||{},metadata:Qe.source.metadata_urls||[],name:Qe.source.layer_name||"",title:Qe.source.title||"",description:Qe.source.description,service:Qe.source.type||"",url:Qe.source.url||"",tech:Qe.source.tech||{},tags:Qe.source.tags||{},theme:Qe.source.theme||"",producer:Qe.source.producer||""};if(m_filterByTMS.length&&(je.service==="WMTS"&&m_filterByTMS.includes(je.name)||je.service==="TMS"&&!m_filterByTMS.includes(je.name))||m_filterByProjection.length&&m_filterByProjection.includes(je.srs[0])||Be&&Be[je.name]&&je.service==="WMS")continue;m_suggestions.push(je)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((Ae,e,t)=>e===t.findIndex(Oe=>Oe.service===Ae.service&&Oe.name===Ae.name&&Oe.title===Ae.title&&Oe.description===Ae.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=Ae=>{var e={};for(let t=0;t<Ae.length;t++){const Oe=Ae[t].source.type,ke=Ae[t].source.layer_name;(Oe==="WMTS"||Oe==="WMS")&&(e[ke]===void 0&&(e[ke]=Oe==="WMTS"),e[ke]||(e[ke]=Oe==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(Ae=>Ae.name),getTitles=()=>unique().map(Ae=>Ae.title),setIndex=Ae=>{m_index=Ae},setFields=Ae=>{m_fields=Ae},setSize=Ae=>{m_size=parseInt(Ae)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=Ae=>{m_maximumResponses=parseInt(Ae)},setFiltersByService=Ae=>{m_filterByService=Ae===""?[]:Ae.split(",")},setFiltersByProjection=Ae=>{m_filterByProjection=Ae===""?[]:Ae.split(",")},setFiltersByLayerPriority=Ae=>{m_filterByLayerPriority=Ae===""?[]:Ae.split(",")},setFilterWMTSPriority=Ae=>{m_filterWMTSPriority=Ae},setFiltersByTMS=Ae=>{m_filterByTMS=Ae===""?[]:Ae.split(",")},updateFilterByTMS=async Ae=>{var e=Ae;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const t=await fetch(e),Oe=await t.json();if(t.status!==200)throw new Error(t.message);if(!Oe)throw new Error("Liste vide !");var ke=Object.keys(Oe.layers).map(Be=>Be.split("$")[0]);return ke&&setFiltersByTMS(ke.toString()),m_filterByTMS},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority};var SearchEngineDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPsearchEngine"),Ae.className="GPwidget gpf-widget",Ae},_createSearchDivElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPshowSearchDiv"),Ae},_createShowSearchEnginePictoElement:function(Ae){var e=this;checkDsfr()&&(Ae=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!Ae),t.disabled=!Ae,t.setAttribute("type","button"),t.addEventListener("click",function(Oe){if(checkDsfr()){var ke=document.getElementById(e._addUID("GPautocompleteResults")),Be=ke.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Ue=ke.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),je=Ue.length;if(!je)return;var We=null;Be.length?We=Be[0]:(We=Ue[0],We.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",We.style.color="#000000",We.style["background-color"]="#CEDBEF"),We.click();return}var Qe=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Qe),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var Cn=document.getElementById(e._addUID("GPshowAdvancedSearch"));Cn&&(Cn.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var An=document.getElementById(e._addUID("GPshowGeolocate"));An&&(An.style.display=null);var En=document.getElementById(e._addUID("GPshowSearchByCoordinate"));En&&(En.style.display=null);var Sn="#GPsearchInput-"+e._uid;document.querySelector(Sn+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(Oe)}),t},_createSearchInputElement:function(Ae){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(ke){return ke.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(ke)),!1});var Oe=document.createElement("input");return Oe.id=this._addUID("GPsearchInputText"),Oe.className="GPsearchInputText gpf-input fr-input",Oe.type="text",Oe.placeholder=Ae,Oe.autocomplete="off",Oe.addEventListener("keyup",function(ke){var Be=ke.which||ke.keyCode;Be===13||Be===10||Be===38||Be===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Oe.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(ke))}),Oe.addEventListener("keydown",function(ke){var Be=ke.which||ke.keyCode;Be===13&&ke.preventDefault();var Ue=document.getElementById(e._addUID("GPautocompleteResults"));if(Ue){var je=Ue.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),We=Ue.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),Qe=We.length;if(Qe){var Cn=null;if(je.length)Cn=je[0];else if(Cn=We[0],Cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Cn.style.color="#000000",Cn.style["background-color"]="#CEDBEF",Be!==13)return;var An=parseInt(SelectorID.index(Cn.id),10),En=An===Qe-1?We[0]:We[An+1],Sn=An===0?We[Qe-1]:We[An-1];switch(Cn.style["background-color"]="",Cn.style.color="",Sn.style["background-color"]="",Sn.style.color="",En.style["background-color"]="",En.style.color="",Be){case 38:Cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Sn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Sn.style.color="#000000",Sn.style["background-color"]="#CEDBEF",Cn.scrollIntoView();break;case 40:Cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",En.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",En.style.color="#000000",En.style["background-color"]="#CEDBEF",Cn.scrollIntoView();break;case 13:ke.preventDefault(),Cn.click(ke);break}Cn.focus()}}}),t.appendChild(Oe),t},_createSearchResetElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(Ae._addUID("GPsearchInputText")).value="",document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Ae.onSearchResetClick()}),e},_createButtonsElement:function(){var Ae=document.createElement("div");return Ae.className="GPbuttonsContainer",Ae},_createFirstLineWrapper:function(){var Ae=document.createElement("div");return Ae.className="GPsearchFirstLineWrapper",Ae},_createRadioContainer:function(){var Ae=document.createElement("div");return Ae.className="GPsearchRadioContainer",Ae},_createRadioElements:function(){var Ae=document.createElement("div");Ae.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var Oe=document.createElement("label");Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GPsearchSplitLocations"),Oe.title="Adresses",Oe.innerHTML="Adresses",e.appendChild(Oe),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var ke=document.createElement("div");ke.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GPsearchSplitData"),Be.type="radio",Be.name="GPsearchSplit",Be.value="data",ke.appendChild(Be);var Ue=document.createElement("label");return Ue.className="gpf-label fr-label",Ue.htmlFor=this._addUID("GPsearchSplitData"),Ue.title="Cartes et données",Ue.innerHTML="Cartes et données",ke.appendChild(Ue),Be.addEventListener?Be.addEventListener("change",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Be.attachEvent&&Be.attachEvent("onchange",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),Ae.appendChild(e),Ae.appendChild(ke),[Ae,t,Be]},_createShowAdvancedSearchElement:function(){var Ae=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe);var ke="#GPsearchInput-"+Ae._uid;Oe?(document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(ke+" input").disabled=!1,document.querySelector(ke+" .GPsearchInputReset")&&(document.querySelector(ke+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1)):(document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(ke+" input").disabled=!0,document.querySelector(ke+" .GPsearchInputReset")&&(document.querySelector(ke+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!0)),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Ae.onShowSearchGeolocateClick(t)}),e},_createShowSearchByCoordinateElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe);var ke="#GPsearchInput-"+Ae._uid;Oe?(document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(ke+" input").disabled=!1,document.querySelector(ke+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1)):(document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(ke+" input").disabled=!0,document.querySelector(ke+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!0)),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPadvancedSearchPanel"),Ae.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Ae},_createAdvancedSearchPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createGeocodeResultsElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPgeocodeResultsList"),Ae.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Ae.appendChild(this._createGeocodeResultsHeaderElement()),Ae},_createGeocodeResultsDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createAutoCompleteElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPautoCompleteList"),Ae.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",Ae},_createCoordinateSearchPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPcoordinateSearchPanel"),Ae.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Ae},_createCoordinateSearchPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createAutoCompleteListElement:function(){var Ae=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPautocompleteResultsLocation"),Ae.className="GPelementHidden gpf-hidden gpf-select",Ae.size=20,Ae.autofocus=!0,Ae},_createAutoCompletedLocationTitleElement(){var Ae=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",Ae.appendChild(e)},_createAutoCompletedLocationElement:function(Ae,e){var t=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsLocation")),ke=document.createElement("p");ke.id=this._addUID("AutoCompletedLocation_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Be=GeocodeUtils.getSuggestedLocationFreeform(Ae);ke.innerHTML=Be,ke.title=Be,ke.addEventListener?ke.addEventListener("click",function(Ue){t.onAutoCompletedResultsItemClick(Ue)},!1):ke.attachEvent&&ke.attachEvent("onclick",function(Ue){t.onAutoCompletedResultsItemClick(Ue)}),Oe.appendChild(ke)},_createSearchedSuggestContainer(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPautocompleteResultsSuggest"),Ae.className="GPelementHidden gpf-hidden gpf-select",Ae.size=6,Ae.autofocus=!0,Ae},_createSearchedSuggestTitleElement(){var Ae=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et données",Ae.appendChild(e)},_createSearchedSuggestElement:function(Ae,e){var t=this,Oe=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),ke=document.createElement("p");ke.id=this._addUID("AutoCompletedSuggest_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",ke.innerHTML=Ae.title+" ("+Ae.service+")",ke.dataset.layer=Ae.name,ke.title=`${Ae.description} (nom technique : ${Ae.name})`,ke.addEventListener?ke.addEventListener("click",function(Be){t.onSearchedResultsItemClick(Be)},!1):ke.attachEvent&&ke.attachEvent("onclick",function(Be){t.onSearchedResultsItemClick(Be)}),Oe.appendChild(ke)},_createAdvancedSearchPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avancée",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPadvancedSearchClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche avancée",Oe.addEventListener?Oe.addEventListener("click",function(){var Be="#GPsearchInput-"+Ae._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Ae._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Ae._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createAdvancedSearchPanelFormElement:function(Ae){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(Ue){Ue.preventDefault();for(var je=[],We="#GPadvancedSearchFilters-"+e._uid,Qe=document.querySelectorAll(We+" > div > div > input,select#category"),Cn=0;Cn<Qe.length;Cn++){var An=Qe[Cn];je.push({key:An.name,value:An.value})}return e.onGeocodingAdvancedSearchSubmit(Ue,je),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var Oe=document.createElement("div");Oe.className="GPflexInput gpf-flex-column ";var ke=document.createElement("label");ke.className="GPadvancedSearchCodeLabel gpf-label fr-label",ke.innerHTML="Recherche par",Oe.appendChild(ke);var Be=this._createAdvancedSearchFormCodeElement(Ae);return Oe.appendChild(Be),t.appendChild(Oe),t},_createAdvancedSearchFormCodeElement:function(Ae){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(Be){e.onGeocodingAdvancedSearchCodeChange(Be)},!1),Ae||(Ae=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var Oe=0;Oe<Ae.length;Oe++){var ke=document.createElement("option");ke.value=Ae[Oe].id,ke.text=Ae[Oe].title,t.appendChild(ke)}return t},_createAdvancedSearchFormInputElement:function(){var Ae=document.createElement("input");return Ae.type="submit",Ae.id=this._addUID("GPadvancedSearchSubmit"),Ae.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Ae.value="Chercher",Ae},_createAdvancedSearchFormFiltersElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPadvancedSearchFilters"),Ae},_createAdvancedSearchFiltersTableElement:function(Ae,e){var t=document.createElement("div");return t.id=this._addUID(Ae),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(Ae){var e=null,t=Ae.name,Oe=Ae.title,ke=Ae.description,Be=Ae.code,Ue=Ae.value,je=document.createElement("div");je.className="GPflexInput gpf-flex-column ";var We=document.createElement("label");if(We.className="GPadvancedSearchFilterLabel gpf-label fr-label",We.htmlFor=t,We.title=ke||Oe,We.innerHTML=Oe,je.appendChild(We),t==="category"){var Qe=document.createElement("select");if(Qe.id=t,Qe.name=t,Qe.title=Oe,Qe.className="GPadvancedSearchFilterInput gpf-select fr-select",Ue&&Array.isArray(Ue))for(var Cn=0;Cn<Ue.length;Cn++){var An=document.createElement("option");An.value=Ue[Cn],An.text=Ue[Cn],Qe.appendChild(An)}je.appendChild(Qe)}else{var En=document.createElement("input");if(En.id=t,En.className="GPadvancedSearchFilterInput gpf-input fr-input",En.type="text",En.name=t,Ue)if(Array.isArray(Ue)){var Sn=t+"_list";En.setAttribute("list",Sn);var Tn=document.createElement("datalist");Tn.id=Sn;for(var Cn=0;Cn<Ue.length;++Cn){var An=document.createElement("option");An.value=Ue[Cn],Tn.appendChild(An)}je.appendChild(Tn)}else En.value=Ue;je.appendChild(En)}return e=document.getElementById(this._addUID(Be)),e?e.appendChild(je):e=je,e},_createGeocodeResultsHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Résultats de la recherche",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPgeocodeResultsClose"),Oe.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la fenêtre de résultats",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createGeocodeResultsListElement:function(){var Ae=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Ae.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Ae.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(Ae,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),Oe=document.createElement("div");Oe.id=this._addUID("GeocodedLocation_"+e),Oe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof Ae=="string"?Oe.innerHTML=Ae:Oe.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(Ae),t.appendChild(Oe)},_createCoordinateSearchPanelHeaderElement(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnées",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPcoordinateSearchClose"),Oe.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer la recherche par coordonnées",Oe.addEventListener?Oe.addEventListener("click",function(){var Be="#GPsearchInput-"+Ae._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1),document.getElementById(Ae._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Ae.onCoordinateSearchClose()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Ae._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Ae._uid).disabled=!1),document.getElementById(Ae._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Ae.onCoordinateSearchClose()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createCoordinateSearchPanelFormElement(){var Ae=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Ae.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var Ae=document.createElement("div");return Ae.className="GPflexInput gpf-flex-column ",Ae},_createCoordinateSearchSystemsLabelElement(){var Ae=document.createElement("label");return Ae.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",Ae.innerHTML="Système de référence",Ae},_setCoordinateSearchSystemsSelectElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un système de réference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onCoordinateSearchSystemChange(Ue)});for(var Oe=0;Oe<Ae.length;Oe++){var ke=Ae[Oe],Be=document.createElement("option");Be.value=ke.code,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_createCoordinateSearchUnitsLabelElement(){var Ae=document.createElement("label");return Ae.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",Ae.innerHTML="Unités",Ae},_setCoordinateSearchUnitsSelectElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unité",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onCoordinateSearchUnitsChange(Ue)});for(var Oe=0;Oe<Ae.length;Oe++){var ke=Ae[Oe],Be=document.createElement("option");Be.value=ke.code?ke.code:Oe,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_setCoordinateSearchLngLabelElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=Ae==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",Ae){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPcoordinateSearchLngDMS"),Ae.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,Ae},_setCoordinateSearchLatLabelElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=Ae==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(Ae){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",Ae){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPcoordinateSearchLatDMS"),Ae.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,Ae},_createCoordinateSearchSubmitElement(){var Ae=document.createElement("input");return Ae.type="submit",Ae.id=this._addUID("GPcoordinateSearchSubmit"),Ae.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Ae.value="Chercher",Ae}},logger$w=LoggerByDefault.getLogger("searchengine"),SearchEngine=class Hf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Hf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$w.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterVectortiles&&Search$1.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search$1.updateFilterByTMS()),Search$1.target.addEventListener("suggest",ke=>{logger$w.debug(ke),this._fillSearchedSuggestListContainer(ke.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle,Oe=this.options.markerUrl;Oe?this._markerUrl=Oe:this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var Oe=e.resources.geocode;if(Oe)if(Array.isArray(Oe)){var ke=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<Oe.length;t++)ke.indexOf(Oe[t])===-1&&logger$w.log("[SearchEngine] options.resources.geocode : "+Oe[t]+" is not a resource for geocode")}else logger$w.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),Oe=null;var Be=e.resources.autocomplete;if(Be)if(Array.isArray(Be)){var Ue=["StreetAddress","PositionOfInterest"];for(t=0;t<Be.length;t++)Ue.indexOf(Be[t])===-1&&logger$w.log("[SearchEngine] options.resources.autocomplete : "+Be[t]+" is not a resource for autocomplete")}else logger$w.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Be=null}else logger$w.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$w.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$w.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var Oe=0;Oe<t.length;Oe++){var ke=t[Oe];this._setSystem(ke)}if(this._coordinateSearchSystems.length===0)for(var Be=0;Be<e.length;Be++)this._setSystem(e[Be])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var ke=!1,Be=0;Be<e[Oe].length;Be++)for(var Ue=e[Oe][Be],je=0;je<t.length;je++){var We=t[je];Ue.code===We&&(ke=!0,this._coordinateSearchUnits[Oe]||(this._coordinateSearchUnits[Oe]=[]),this._coordinateSearchUnits[Oe].push(Ue))}ke||(this._coordinateSearchUnits[Oe]=e[Oe])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div gpf-widget-color";var Oe=document.createElement("button");return Oe.title="Fermer la pop-up",Oe.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(Oe),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),Oe=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(Oe),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var ke=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&ke.appendChild(this._createSearchResetElement());var Be=this;ke.addEventListener?ke.addEventListener("click",function(){Be.onAutoCompleteInputClick()}):ke.attachEvent&&ke.attachEvent("onclick",function(){Be.onAutoCompleteInputClick()}),t.appendChild(ke);var Ue=this._createButtonsElement(),je=this._createFirstLineWrapper();if(je.appendChild(t),je.appendChild(Ue),e.appendChild(je),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var We=this._createRadioContainer();e.appendChild(We)}if(checkDsfr()&&this.options.splitResults){var Qe;[Qe,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),We.appendChild(Qe)}if(this.options.displayButtonAdvancedSearch){var Cn=this._createShowAdvancedSearchElement();We.appendChild(Cn);var An=this._createAdvancedSearchPanelElement(),En=this._createAdvancedSearchPanelDivElement(),Sn=this._createAdvancedSearchPanelHeaderElement(),Tn=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),Dn=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var ti=this._createAdvancedSearchFormInputElement();Tn.appendChild(Dn),Tn.appendChild(ti),En.appendChild(Sn),En.appendChild(Tn),An.appendChild(En),e.appendChild(An)}if(this.options.displayButtonGeolocate){var ni=this._createShowGeolocateElement();Ue.appendChild(ni)}if(this.options.displayButtonCoordinateSearch){var ii=this._createShowSearchByCoordinateElement();Ue.appendChild(ii);var si=this._createCoordinateSearchPanelElement(),oi=this._createCoordinateSearchPanelDivElement(),ci=this._createCoordinateSearchPanelHeaderElement(),Pi=this._createCoordinateSearchPanelFormElement(),Ai=null;Ai=this._containerSystems=this.__createCoordinateSearchDivElement(),Pi.appendChild(Ai);var fi=this._createCoordinateSearchSystemsLabelElement(),Oi=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);Ai.appendChild(fi),Ai.appendChild(Oi),Ai=this._containerUnits=this.__createCoordinateSearchDivElement(),Pi.appendChild(Ai);var Ni=this._createCoordinateSearchUnitsLabelElement(),ui=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);Ai.appendChild(Ni),Ai.appendChild(ui),Ai=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),Pi.appendChild(Ai);var li=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Ri=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);Ai.appendChild(li),Ai.appendChild(Ri),Ai=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),Pi.appendChild(Ai);var Mi=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),Bi=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);Ai.appendChild(Mi),Ai.appendChild(Bi);var er=this._createCoordinateSearchSubmitElement();Pi.appendChild(er),oi.appendChild(ci),oi.appendChild(Pi),si.appendChild(oi),e.appendChild(si)}var nr=this._autocompleteContainer=this._createAutoCompleteElement(),lr=this._createAutoCompleteListElement(),hr=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),ar=this._containerResultsSuggest=this._createSearchedSuggestContainer();lr.appendChild(hr),lr.appendChild(ar),nr.appendChild(lr),e.appendChild(nr);var wr=this._createGeocodeResultsElement(),Fi=this._createGeocodeResultsDivElement();wr.appendChild(Fi);var cr=this._geocodedContainer=this._createGeocodeResultsListElement();return Fi.appendChild(cr),e.appendChild(wr),e}_setFilter(e){for(var t=this._filterContainer,Oe=!1,ke=0;ke<this._advancedSearchCodes.length;ke++)if(this._advancedSearchCodes[ke].id===e){Oe=!0;break}if(!Oe){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var Be=this._advancedSearchFilters[e];if(!(!Be||Be.length===0)){for(var Ue=this._createAdvancedSearchFiltersTableElement(e,!0),je=0;je<Be.length;je++){var We=this._createAdvancedSearchFiltersAttributElement(Be[je]);Ue.appendChild(We)}return t.appendChild(Ue),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$w.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions.serviceOptions),Helper.assign(t,e);var Oe=this.options.resources.autocomplete;Oe&&Array.isArray(Oe)&&(t.type||(t.type=Oe)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var Oe=0;Oe<e.length;Oe++)this._createAutoCompletedLocationElement(e[Oe],Oe)}}}_fillSearchedSuggestListContainer(e){var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let Oe=0;Oe<e.length;Oe++){const ke=e[Oe];this._createSearchedSuggestElement(ke,Oe)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$w.log(e);var t={};Helper.assign(t,this.options.geocodeOptions.serviceOptions),Helper.assign(t,e);var Oe=this,ke=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Be=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Be){var Ue=function(Qe){e.onSuccess.call(Oe,Qe),Oe.options.geocodeOptions.serviceOptions.onSuccess.call(Oe,Qe)};t.onSuccess=Ue}if(ke){var je=function(Qe){e.onFailure.call(Oe,Qe),Oe.options.geocodeOptions.serviceOptions.onFailure.call(Oe,Qe)};t.onFailure=je}var We=this.options.resources.geocode;We&&(t.index||(t.index=We)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=0;Oe<e.length;Oe++)logger$w.log(e[Oe]),this._createGeocodedLocationElement(e[Oe],Oe);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var Oe=this.getMap().getView();Oe.setCenter(e),Oe.setZoom(t)}_setMarker(e,t){var Oe=this.getMap(),ke=this;if(this._marker!=null&&(Oe.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,Be.addEventListener?Be.addEventListener("click",function(){ke._onResultMarkerSelect(t)}):Be.attachEvent&&Be.attachEvent("onclick",function(){ke._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Be,stopEvent:!1}),Oe.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),Oe=this.options.zoomTo,ke=null;if(typeof Oe=="function"&&(logger$w.trace("zoom function"),ke=Oe.call(this,e)),typeof Oe=="number"&&(logger$w.trace("zoom level"),ke=Oe),typeof Oe=="string")if(Oe==="auto")logger$w.trace("zoom auto"),ke=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$w.trace("zoom level parsing");var Be=parseInt(Oe,10);isNaN(Be)||(logger$w.trace("zoom parsing"),ke=Be)}Number.isInteger=Number.isInteger||function(We){return typeof We=="number"&&isFinite(We)&&Math.floor(We)===We},(!ke||ke===""||!Number.isInteger(ke))&&(logger$w.trace("zoom not found, current zoom..."),ke=t.getView().getZoom());var Ue=t.minZoom,je=t.maxZoom;return ke<Ue&&(logger$w.trace("zoom level min..."),ke=Ue),ke>je&&(logger$w.trace("zoom level max..."),ke=je),logger$w.trace("zoom",ke),ke}_onResultMarkerSelect(e){var t=this.getMap(),Oe="";if(typeof e!="string")if(e.service==="GeocodedLocation"){Oe="<ul>";var ke=e.location.placeAttributes;for(var Be in ke)ke.hasOwnProperty(Be)&&Be!=="trueGeometry"&&Be!=="extraFields"&&Be!=="houseNumberInfos"&&Be!=="_count"&&(Oe+="<li>",Oe+='<span class="gp-attname-others-span">'+Be.toUpperCase()+" : </span>",Oe+=ke[Be],Oe+=" </li>");Oe+=" </ul>"}else e.service==="SuggestedLocation"?Oe=GeocodeUtils.getSuggestedLocationFreeform(e.location):Oe="sans informations.";else Oe=e;this._popupContent.innerHTML=Oe,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$w.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$w.error("crs not defined !");return}if(e.label||(logger$w.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$w.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$w.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var Oe=this._coordinateSearchSystems[t];e.crs===Oe.crs&&logger$w.info("crs '{}' already configured",Oe.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showSearchEngineButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),Oe=t.getProjection().getCode(),ke=[e.coords.longitude,e.coords.latitude],Be;if(Oe!=="EPSG:4326"?Be=transform$1(ke,"EPSG:4326",Oe):Be=ke,isNaN(Be[0])||isNaN(Be[1])){this._setMarker();return}if(this._setPosition(Be,15),this._displayMarker){var Ue="<h6> Ma position </h6> longitude : "+ke[0]+"<br/> latitude : "+ke[1];this._setMarker(Be,Ue)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Be})})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var Oe=[e,t],ke=this.getMap().getView(),Be=ke.getProjection().getCode();if(Be!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",Be)),isNaN(Oe[0])||isNaN(Oe[1])){this._setMarker();return}this._setPosition(Oe,10),this._displayMarker&&this._setMarker(Oe,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:Oe})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var Oe=MathUtils.toInteger(t[0].value),ke=MathUtils.toInteger(t[1].value),Be=MathUtils.toInteger(t[2].value),Ue=t[3].options[t[3].selectedIndex].text;return!Oe||!ke||!Be||!Ue?void 0:MathUtils.dmsToDecimal(Oe,ke,Be,Ue)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var Oe=this.options.autocompleteOptions.triggerGeocode,ke=this.options.autocompleteOptions.triggerDelay,Be=this.options.autocompleteOptions.maximumEntries,Ue=this.options.autocompleteOptions.prettifyResults,je=this;this._requestAutoComplete({text:t,onSuccess:function(Qe){if(logger$w.log("request from AutoComplete",Qe),Qe){je._suggestedLocations=Qe.suggestedLocations,je._locationsToBeDisplayed=[];for(var Cn=0;Cn<je._suggestedLocations.length;Cn++){var An=je._suggestedLocations[Cn];An.position&&An.position.x===0&&An.position.y===0&&An.fullText?je._getGeocodeCoordinatesFromFullText(An,Cn):je._locationsToBeDisplayed.push(An)}Ue===!0&&je._prettifyAutocompleteResults(je._locationsToBeDisplayed),Be&&(je._locationsToBeDisplayed=je._locationsToBeDisplayed.slice(0,Be)),je._fillAutoCompletedLocationListContainer(je._locationsToBeDisplayed),je._triggerHandler&&(clearTimeout(je._triggerHandler),je._triggerHandler=null,logger$w.warn("Cancel a geocode request !"))}},onFailure:function(Qe){je._clearSuggestedLocation(),logger$w.log(Qe.message),Qe.message==="No suggestion matching the search"&&Oe&&(je._triggerHandler&&(clearTimeout(je._triggerHandler),logger$w.warn("Cancel the last geocode request !")),je._triggerHandler=setTimeout(function(){logger$w.warn("Launch a geocode request !"),je._requestGeocoding({location:t,onSuccess:function(Cn){if(logger$w.log("request from Geocoding",Cn),Cn){je._locationsToBeDisplayed=[];for(var An=Cn.locations,En=0;En<An.length;En++){var Sn=An[En];Sn.fullText=GeocodeUtils.getGeocodedLocationFreeform(Sn),Sn.position={x:Sn.position.lon,y:Sn.position.lat},je._locationsToBeDisplayed.push(Sn)}je._fillAutoCompletedLocationListContainer(An)}},onFailure:function(Cn){logger$w.log(Cn.message)}})},ke))}}),this.options.resources.search&&Search$1.suggest(t);var We=this.getMap();We.on("click",this._hideSuggestedLocation,this),We.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var Oe=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(ke){logger$w.log("request from Geocoding (coordinates null)",ke),ke.locations&&ke.locations.length!==0&&ke.locations[0].position&&Oe._suggestedLocations&&Oe._suggestedLocations[t]&&(Oe._suggestedLocations[t].position={lon:ke.locations[0].position.y,lat:ke.locations[0].position.x},Oe._locationsToBeDisplayed.unshift(Oe._suggestedLocations[t]),Oe._fillAutoCompletedLocationListContainer(Oe._locationsToBeDisplayed))},onFailure:function(){Oe._suggestedLocations&&Oe._suggestedLocations[t]&&Oe._createAutoCompletedLocationElement(Oe._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger$w.log(t),logger$w.log(this._locationsToBeDisplayed[t]),!!t){var Oe=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],ke={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(Be),this._currentGeocodingLocation=Be;var Ue=this.getMap().getView(),je=Ue.getProjection().getCode();je!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",je));var We=this._getZoom(ke);this._setPosition(Oe,We),this._displayMarker&&this._setMarker(Oe,ke),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),Oe=null;try{var ke=Search$1.getSuggestions()[t];if(!ke)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Be=ke.service,Ue=ke.name,je=null;switch(Be){case"WMS":je=new LayerWMS({layer:Ue});break;case"WMTS":je=new LayerWMTS({layer:Ue});break;case"TMS":je=new LayerMapBox({layer:Ue},{declutter:!0});default:break}if(je){var We=this.getMap();We.addLayer(je)}}}catch(Qe){Oe=Qe}this.dispatchEvent({type:"searchengine:search:click",suggest:ke,error:Oe})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var Oe=this;this._requestGeocoding({query:t,onSuccess:function(ke){if(logger$w.log("request from Geocoding",ke),ke){var Be=ke.locations;Oe._fillGeocodedLocationListContainer(Be)}},onFailure:function(ke){Oe._clearGeocodedLocation(),logger$w.log(ke.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var Oe=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],ke={service:"GeocodedLocation",location:this._geocodedLocations[t]},Be=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(Be);var Ue=this.getMap().getView(),je=Ue.getProjection().getCode();je!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",je));var We=this._getZoom(this.options.zoomTo);this._setPosition(Oe,We),this._displayMarker&&this._setMarker(Oe,ke),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger$w.log(e);var t=e.target.selectedIndex,Oe=e.target.options[t].value;Oe&&this._setFilter(Oe)}onGeocodingAdvancedSearchSubmit(e,t){if(logger$w.log(t),!(!t||t.length===0)){for(var Oe,ke={},Be=0;Be<t.length;Be++){var Ue=t[Be];Ue.value&&(Ue.key==="section"&&(Ue.value=Ue.value.toUpperCase()),ke[Ue.key]=Ue.value)}var je=document.getElementById("GPsearchInputText-"+this._uid);Oe=je.value,this._currentGeocodingCode==="CadastralParcel"&&(Oe="");var We=this;this._requestGeocoding({query:Oe,index:this._currentGeocodingCode,filters:ke,onSuccess:function(Qe){if(logger$w.log(Qe),Qe){var Cn=Qe.locations;We._fillGeocodedLocationListContainer(Cn)}},onFailure:function(Qe){We._clearGeocodedLocation(),logger$w.log(Qe.message)}})}}_getCadastralParcelRequestParams(e){var t="",Oe,ke=e.department;ke?(Oe=ke.length,Oe===2?t=ke:Oe===1?t="0"+ke:t=ke.substring(0,2)):t="__";var Be=e.commune;Be?(Oe=Be.length,Oe===3?t+=Be:Oe===2?t+="_"+Be:Oe===1?t+="__"+Be:t+=Be.substring(0,3)):t+="___";var Ue=e.insee;Ue&&Ue.length===5&&(t=Ue);var je=e.absorbedCity;je?(Oe=je.length,Oe===3?t+=je:Oe<3?Oe===2?t+="_"+je:Oe===1&&(t+="__"+je):t+=je.substring(0,3)):t+="___";var We=e.section;We?(Oe=We.length,Oe===2?t+=We:Oe===1?t+="_"+We:t+=We.substring(0,2)):t+="__";var Qe=e.number;return Qe?(Oe=Qe.length,Oe===4?t+=Qe:Oe===3?t+="_"+Qe:Oe===2?t+="__"+Qe:Oe===1?t+="___"+Qe:t+=Qe.substring(0,4)):t+="___",logger$w.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var ke=null,Be=0;Be<this._coordinateSearchSystems.length;++Be)if(this._coordinateSearchSystems[Be].code===Number(Oe)){ke=this._coordinateSearchSystems[Be].type;break}if(!ke){logger$w.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(Oe)],ke!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=ke,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[ke][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[ke])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=Oe,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var t=e.length-1;t>=0;t--){var Oe=e[t];(Oe.type==="StreetAddress"&&Oe.kind==="municipality"||Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="lieu-dit habité"&&Oe.poiType[1]==="zone d'habitation")&&e.splice(t,1),Oe.type==="PositionOfInterest"&&Oe.poiType[0]==="administratif"&&(Oe.poiType[1]==="département"||Oe.poiType[1]==="région")&&(Oe.fullText=Oe.fullText+", "+Oe.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPmousePosition"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowMousePositionPictoElement:function(Ae){var e=this,t=document.createElement("button"),Oe=document.createElement("span");return t.appendChild(Oe),t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Afficher les coordonnées du curseur"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(ke)}),t},_createMousePositionPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPmousePositionPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createMousePositionPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createMapCenter:function(){var Ae=document.createElement("div");return Ae.id="GPmapCenter",Ae.className="",Ae},_createMousePositionPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ae.id=this._addUID("GPmousePositionHeaderTitle"),Ae.innerHTML="Coordonnées",Ae},_createMousePositionPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader gpf-panel__header fr-modal__header",Ae},_createMousePositionPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(Ae._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(Ae._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(Ae,e,t,Oe){Ae=typeof Ae>"u"?!0:Ae,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var ke=document.createElement("div");return ke.id=this._addUID("GPmousePositionBasicPanel"),ke.classList.add("fr-mx-1w"),ke.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,Oe)),ke.appendChild(this._createMousePositionPanelEditToolsElement(t)),ke.appendChild(this._createMousePositionPanelBasicAltitudeElement(Ae)),ke},_createCoordinateElement:function(Ae,e){var t=this;if(["Lon","Lat"].indexOf(Ae)===-1)return[];var Oe=[],ke=document.createElement("input");ke.id=this._addUID("GPmousePosition"+Ae),ke.title=e===!0?"Cliquer pour saisir des coordonnées":"",ke.readOnly=!0,e&&(ke.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),ke.addEventListener("change",function(Ue){this.classList.remove("error");var je=t.validateExtentCoordinate(Ae,this.value,Ue);je?this.classList.remove("error"):this.classList.add("error")})),Oe.push(ke);var Be=document.createElement("span");return Be.className="GPmousePositionUnits",Oe.push(Be),Oe},_createDMSCoordinateElement:function(Ae,e){if(["Lon","Lat"].indexOf(Ae)===-1)return[];var t=this,Oe=[],ke=document.createElement("input");ke.id=this._addUID("GPmousePosition"+Ae+"Degrees"),ke.className="GPSexagesimal",ke.setAttribute("name","degrees"),ke.title=e===!0?"Cliquer pour saisir des coordonnées":"",ke.readOnly=!0,ke.dataset.min=0,ke.dataset.max=Ae==="Lon"?180:90,e&&(ke.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),ke.addEventListener("change",function(){this.classList.remove("error");var Sn=t._checkDMSDegrees(Ae,this);Sn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(ke);var Be=document.createElement("span");Be.className="GPmousePositionSexagesimalLabel",Be.innerHTML="°",Oe.push(Be);var Ue=document.createElement("input");Ue.id=this._addUID("GPmousePosition"+Ae+"Minutes"),Ue.className="GPSexagesimal",Ue.setAttribute("name","minutes"),Ue.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ue.readOnly=!0,Ue.dataset.min=0,Ue.dataset.max=59,e&&(Ue.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ue.addEventListener("change",function(){this.classList.remove("error");var Sn=t._checkDMSElement(this);Sn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(Ue);var je=document.createElement("span");je.className="GPmousePositionSexagesimalLabel",je.innerHTML="'",Oe.push(je);var We=document.createElement("input");We.id=this._addUID("GPmousePosition"+Ae+"Seconds"),We.className="GPSexagesimalsec",We.setAttribute("name","seconds"),We.title=e===!0?"Cliquer pour saisir des coordonnées":"",We.readOnly=!0,We.dataset.min=0,We.dataset.max=59,e&&(We.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),We.addEventListener("change",function(){this.classList.remove("error");var Sn=t._checkDMSElement(this,!0);Sn?this.classList.remove("error"):this.classList.add("error")})),Oe.push(We);var Qe=document.createElement("span");Qe.className="GPmousePositionSexagesimalLabel",Qe.innerHTML="''",Oe.push(Qe);var Cn=document.createElement("select");Cn.id=this._addUID("GPmousePosition"+Ae+"Direction"),Cn.className="GPmousePositionDirection",Cn.setAttribute("name","direction"),Cn.disabled=!0;var An=document.createElement("option");An.value=Ae==="Lon"?"E":"N",An.innerHTML=Ae==="Lon"?"E":"N",Cn.appendChild(An);var En=document.createElement("option");return En.value=Ae==="Lon"?"O":"S",En.innerHTML=Ae==="Lon"?"O":"S",Cn.appendChild(En),Oe.push(Cn),Oe},_createMousePositionPanelBasicCoordinateElement:function(Ae,e,t){var Oe=document.createElement("div");Oe.id=this._addUID("GPmousePositionCoordinate"),Oe.style.display=Ae?"block":"none";var ke=document.createElement("div");ke.classList.add("fr-mb-1w");var Be=document.createElement("span");Be.className="GPmousePositionLabel",Be.id=this._addUID("GPmousePositionLatLabel"),Be.innerHTML="Latitude : ",ke.appendChild(Be);var Ue=document.createElement("span");Ue.id=this._addUID("GPmousePositionLatCoordinate");var je;t==="DMS"?je=this._createDMSCoordinateElement("Lat",e):je=this._createCoordinateElement("Lat",e);for(var We=0;We<je.length;We++)Ue.appendChild(je[We]);ke.appendChild(Ue),Oe.appendChild(ke);var Qe=document.createElement("div");Qe.classList.add("fr-mb-1w");var Cn=document.createElement("span");Cn.className="GPmousePositionLabel",Cn.id=this._addUID("GPmousePositionLonLabel"),Cn.innerHTML="Longitude : ",Qe.appendChild(Cn);var An=document.createElement("span");An.id=this._addUID("GPmousePositionLonCoordinate");var En;t==="DMS"?En=this._createDMSCoordinateElement("Lon",e):En=this._createCoordinateElement("Lon",e);for(var Sn=0;Sn<En.length;Sn++)An.appendChild(En[Sn]);return Qe.appendChild(An),Oe.appendChild(Qe),Oe},_createMousePositionPanelBasicAltitudeElement:function(Ae){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=Ae?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var Oe=document.createElement("span");Oe.className="GPmousePositionCoords",Oe.id=this._addUID("GPmousePositionAlt"),Oe.innerHTML="...",e.appendChild(Oe);var ke=document.createElement("span");return ke.className="GPmousePositionAltitudeUnits",ke.innerHTML="m",e.appendChild(ke),e},_createMousePositionPanelEditToolsElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),Ae||(t.style.display="none");var Oe=document.createElement("span");Oe.className="GPmousePositionEditTool",Oe.id=this._addUID("GPmousePositionLocate"),Oe.title=Ae===!0?"Cliquer pour saisir des coordonnées":"",Ae&&Oe.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(Oe);var ke=document.createElement("span");return ke.className="GPmousePositionEditTool",ke.id=this._addUID("GPmousePositionCloseEdit"),ke.title="Quitter la saisie des coordonnées",ke.style.display="none",Ae&&ke.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(ke),t},_createShowMousePositionSettingsElement:function(Ae){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",t.title="Réglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.addEventListener?t.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),e.onShowMousePositionSettingsClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),e.onShowMousePositionSettingsClick(Oe)}),t},_createMousePositionSettingsElement:function(Ae){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=Ae===void 0||Ae?"block":"none",e.classList.add("fr-m-1w");var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Système de référence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(Ae){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",t.addEventListener("change",function(Ue){e.onMousePositionProjectionSystemChange(Ue)}),t.addEventListener("mouseover",function(Ue){Ue.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(Ue)}),t.title="Type de système";for(var Oe=0;Oe<Ae.length;Oe++){var ke=Ae[Oe],Be=document.createElement("option");Be.value=ke.code,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_createMousePositionSettingsUnitsElement:function(Ae){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(Ue){e.onMousePositionProjectionUnitsChange(Ue)}),t.title="Unités du système";for(var Oe=0;Oe<Ae.length;Oe++){var ke=Ae[Oe],Be=document.createElement("option");Be.value=ke.code?ke.code:Oe,Be.text=ke.label||Oe,t.appendChild(Be)}return t},_resetLabelElements:function(Ae){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=Ae==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=Ae==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(Ae){var e="";(Ae==="M"||Ae==="KM")&&(e=Ae.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),Oe=0;Oe<t.length;Oe++)t[Oe].innerHTML=e},_resetCoordinateElements:function(Ae,e,t){for(var Oe=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));Oe.firstChild;)Oe.removeChild(Oe.firstChild);var ke;t==="DMS"?ke=this._createDMSCoordinateElement("Lat",Ae):ke=this._createCoordinateElement("Lat",Ae);for(var Be=0;Be<ke.length;Be++)Oe.appendChild(ke[Be]);for(var Ue=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));Ue.firstChild;)Ue.removeChild(Ue.firstChild);var je;t==="DMS"?je=this._createDMSCoordinateElement("Lon",Ae):je=this._createCoordinateElement("Lon",Ae);for(var We=0;We<je.length;We++)Ue.appendChild(je[We])},_setEditMode:function(Ae){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=Ae?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=Ae?"inline-block":"none";for(var Oe="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",ke=document.querySelectorAll(Oe+" input"),Be=0;Be<ke.length;Be++)ke[Be].readOnly=!Ae,Ae&&(ke[Be].value="",ke[Be].classList.remove("error"));for(var Ue=document.querySelectorAll(Oe+" select"),je=0;je<Ue.length;je++)Ue[je].disabled=!Ae},_checkDMSElement:function(Ae,e){var t=e!==void 0,Oe=Ae.value;if(t&&(Oe=Oe.replace(",",".")),isNaN(Oe))return!1;var ke=parseFloat(Oe);if(!t&&(ke|0)!==ke)return!1;var Be=Number(Ae.dataset.min),Ue=Number(Ae.dataset.max);return ke>=Be&&ke<=Ue},_checkDMSDegrees:function(Ae,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var Oe=Number(e.dataset.min),ke=Number(e.dataset.max);if(t<Oe||t>ke)return!1;var Be=document.getElementById(this._addUID("GPmousePosition"+Ae+"Minutes")),Ue=document.getElementById(this._addUID("GPmousePosition"+Ae+"Seconds"));return t>=ke?(Be.dataset.max=0,Ue.dataset.max=0):(Be.dataset.max=59,Ue.dataset.max=59.9999),!0},GPdisplayCoords:function(Ae){if(Ae){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(Ae.x||Ae.y?(t.innerHTML="X : ",e.innerHTML="Y : "):Ae.e||Ae.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof Ae.lat=="object"&&typeof Ae.lng=="object"){var Oe={lng:"Lon",lat:"Lat"},ke=["Degrees","Minutes","Seconds"];for(var Be in Oe)for(var Ue=0;Ue<ke.length;++Ue){var je="GPmousePosition"+Oe[Be]+ke[Ue],We=document.getElementById(this._addUID(je)),Qe=ke[Ue].charAt(0).toLowerCase();We.value=Ae[Be][Qe]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=Ae.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=Ae.lat.direction}else{var Cn=document.getElementById(this._addUID("GPmousePositionLat")),An=document.getElementById(this._addUID("GPmousePositionLon"));Cn.value=Ae.x||Ae.lat||Ae.e||"0",An.value=Ae.y||Ae.lng||Ae.lon||Ae.n||"0",Cn.title="Latitude",An.title="Longitude",Cn.type="text",An.type="text";for(var En=Ae.unit===void 0?"":Ae.unit,Sn=document.getElementsByClassName("GPmousePositionUnits"),Tn=0;Tn<Sn.length;++Tn)Sn[Tn].innerHTML=En}}},GPdisplayElevation:function(Ae,e,t,Oe){var ke=this,Be;e||(e=500),clearTimeout(Be),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),Oe==null&&(Oe=99980);var Ue=t+Oe,je=t-Oe;Ae&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Be=setTimeout(function(){ke.onRequestAltitude(Ae,function(We){je<We&&We<Ue?ke.GPresetElevation():document.getElementById(ke._addUID("GPmousePositionAlt")).innerHTML=We})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$v=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var t=this;if(e){var Oe=this._createMapCenter();if(e.getViewport().appendChild(Oe),!this.collapsed&&!this._isDesktop&&(Oe.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",Ue=>{this.onMouseMove(Ue)}):this.listenerKey=e.on("moveend",Ue=>this.onMapMove(Ue)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var ke=document.createElement("img");ke.id=this._addUID("GPmousePositionMarker"),ke.src=this._markerUrl,ke.title="Cliquer pour supprimer",ke.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:ke,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Be=document.getElementById("GPshowMousePosition-"+this._uid);Be.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var Oe=this._projectionSystems[t];e.crs===Oe.crs&&logger$v.info("crs '{}' already configured",Oe.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var ke=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(ke){var Be=document.createElement("option");Be.value=e.code,Be.text=e.label,ke.appendChild(Be)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$v.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){logger$v.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),Oe=null,ke=0;ke<this._projectionSystems.length;ke++){var Be=this._projectionSystems[ke];if(e===Be.crs){Oe=Be.code,this._projectionSystems.splice(ke,1);break}}if(Oe==null){logger$v.log("[WARN] MousePosition:removeSystem - system not found");return}for(var Ue=[],je=0;je<this._projectionSystems.length;je++)Ue[Number(this._projectionSystems[je].code)]=je,this._projectionSystems[je].code=je;for(var We=null,Qe=0;Qe<t.childNodes.length;Qe++){if(Oe===t.childNodes[je].value){We=Qe;continue}t.childNodes[je].value=Ue[Number(t.childNodes[je].value)]}We!=null&&t.removeChild(t.childNodes[We]),this._currentProjectionSystems.code===Number(Oe)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$v.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[t]!==void 0?Marker[t]:Marker.lightOrange:this._markerUrl=t:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,Oe=0;Oe<t.length;Oe++){var ke=t[Oe];this.addSystem(ke)}if(this._projectionSystems.length===0)for(var Be=0;Be<e.length;Be++)this.addSystem(e[Be])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.units;for(var Oe in e)if(e.hasOwnProperty(Oe)){for(var ke=!1,Be=0;Be<e[Oe].length;Be++)for(var Ue=e[Oe][Be],je=0;je<t.length;je++){var We=t[je];Ue.code===We&&(ke=!0,this._projectionUnits[Oe]||(this._projectionUnits[Oe]=[]),this._projectionUnits[Oe].push(Ue))}ke||(this._projectionUnits[Oe]=e[Oe])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],Oe=0;Oe<t.length;++Oe)if(t[Oe].code===this._currentProjectionUnits){e.push(t[Oe].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var Oe=this._panelMousePositionContainer=this._createMousePositionPanelElement(),ke=this._createMousePositionPanelDivElement();Oe.appendChild(ke);var Be=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),Ue=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Be.appendChild(Ue);var je=this._panelCloseButton=this._createMousePositionPanelCloseElement();Be.appendChild(je),ke.appendChild(Be);var We=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);ke.appendChild(We);var Qe=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);ke.appendChild(Qe);var Cn=this._createMousePositionSettingsElement(),An=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),En=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return Cn.appendChild(An),Cn.appendChild(En),ke.appendChild(Cn),e.appendChild(Oe),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),Oe=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",Oe.style.display=""):(t.style.display="none",Oe.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=this._projectionUnits[e],ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code?Be.code:ke,Ue.text=Be.label||ke,t.appendChild(Ue)}var je=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||je==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,je),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(je),this._currentProjectionUnits=je}_setCoordinate(e,t){var Oe={},ke=this._currentProjectionSystems.crs;if(!ke){logger$v.log("ERROR : system crs not found");return}e=transform$1(e,t,ke);for(var Be=this._currentProjectionSystems.type,Ue=null,je=this._projectionUnits[Be],We=0;We<je.length;We++)if(je[We].code===this._currentProjectionUnits){Ue=je[We].format;break}if(!Ue||typeof Ue!="function"){logger$v.log("WARNING : coordinates format function not found");return}else Oe=Ue(e);!Oe||Object.keys(Oe).length===0||this.GPdisplayCoords(Oe)}_setElevation(e){var t=this.options.altitude.responseDelay,Oe=this.options.altitude.noDataValue,ke=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,Oe,ke)}onMoveStopped(e,t){var Oe=transform$1(e,t,"EPSG:4326");this._setElevation(Oe)}onMouseMove(e){var t=this,Oe=e.coordinate;if(!(!e.map||!e.map.getView())){var ke=e.map.getView().getProjection();this._setCoordinate(Oe,ke),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(Oe,ke)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var Oe=t.getView(),ke=Oe.getCenter(),Be=Oe.getProjection();this._setCoordinate(ke,Be),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(ke,Be)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var Oe=this.options.altitude.serviceOptions||{},ke=Oe.protocol||"XHR",Be=Oe.timeOut||0;ke==="JSONP"&&Be===0&&(Be=15e3);var Ue=Oe.outputFormat||"json",je=!0,je;Oe.zonly===!1?je=Oe.zonly:je=!0;var We=Oe.measures||!1,Qe=[{lon:e[0],lat:e[1]}],Cn=Oe.resource,An=this,En=Oe.rawResponse||!1,Sn=Oe.onSuccess||null,Tn=null,Dn=null;En?Tn=function(ii){Sn&&Sn.call(this,ii),logger$v.log("alti service raw response : ",ii)}:Tn=function(ii){ii&&Object.keys(ii).length&&(Sn&&Sn.call(this,ii),t.call(this,ii.elevations[0].z))},Dn=function(ii){logger$v.log("[getAltitude] ERROR : "+ii.message)};var ti=Oe.apiKey||this.options.apiKey;typeof Oe.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Oe.ssl=this.options.ssl:Oe.ssl=!0);var ni=Oe.ssl;Gp.Services.getAltitude({apiKey:ti,protocol:ke,ssl:ni,timeOut:Be,scope:An,outputFormat:Ue,rawResponse:En,onSuccess:Tn,onFailure:Dn,zonly:je,measures:We,resource:Cn,positions:Qe})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showMousePositionButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),Oe==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=t.on("pointermove",ke=>{this.onMouseMove(ke)}):(this.listenerKey=t.on("moveend",ke=>this.onMapMove(ke)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("pointermove",Oe=>{this.onMouseMove(Oe)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("moveend",Oe=>this.onMapMove(Oe)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),Oe=t.value;if(!Oe||(Oe=Oe.replace(",","."),!MathUtils.isInteger(Oe)))return null;var ke=MathUtils.toInteger(Oe);if(ke<Number(t.dataset.min)||ke>Number(t.dataset.max))return null;var Be=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,Ue=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),je=Ue.value;if(je&&(je=je.replace(",","."),MathUtils.isInteger(je))){var We=MathUtils.toInteger(je);We>=Number(Ue.dataset.min)&&We<=Number(Ue.dataset.max)&&(ke+=We/60)}var Qe=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),Cn=Qe.value;if(Cn){Cn=Cn.replace(",",".");var An=MathUtils.toFloat(Cn);An&&An>=Number(Qe.dataset.min)&&An<=Number(Qe.dataset.max)&&(ke+=An/3600)}return(Be==="O"||Be==="S")&&(ke=-ke),ke}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){logger$v.log("ERROR : system crs not found");return}var Oe=this.getMap().getView(),ke=transform$1(e,t,Oe.getProjection());Oe.setCenter(ke),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(ke)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=MathUtils.toFloat(t),t!==null){var Oe=this._currentProjectionSystems.crs;if(!Oe){logger$v.log("ERROR : system crs not found");return}var ke;this._currentProjectionSystems.type==="Geographical"?ke=[this.convert(e),this.convert(t)]:ke=[this.convert(t),this.convert(e)];var Be=transform$1(ke,this._currentProjectionSystems.crs,"EPSG:4326"),Ue=this._currentProjectionSystems.geoBBox;if(Ue){var je=[Ue.left,Ue.bottom,Ue.right,Ue.top];if(Be[0]<je[0]||Be[0]>je[2]||Be[1]<je[1]||Be[1]>je[3])return}var We=this.getMap().getView(),Qe=transform$1(ke,Oe,We.getProjection());We.setCenter(Qe),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Qe)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),Oe=t.getCenter();e.call(this,Oe)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;this._setCurrentSystem(Oe)}_setCurrentSystem(e){for(var t=null,Oe=0;Oe<this._projectionSystems.length;++Oe)if(this._projectionSystems[Oe].code===Number(e)){t=this._projectionSystems[Oe].type;break}if(!t){logger$v.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$v.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var Oe=t.getView(),ke=Oe.getProjection(),Be=Oe.calculateExtent(t.getSize());Be=transformExtent(Be,ke,"EPSG:4326");var Ue=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));Ue.innerHTML="";for(var je=0;je<this._projectionSystems.length;je++){var We=this._projectionSystems[je],Qe=null;if(We.geoBBox&&(Be[0]>We.geoBBox.right||Be[1]>We.geoBBox.top||Be[2]<We.geoBBox.left||Be[3]<We.geoBBox.bottom)){We===this._currentProjectionSystems&&(Qe=document.createElement("option"),Qe.value=We.code,Qe.text=We.label||je,Qe.setAttribute("selected","selected"),Qe.setAttribute("disabled","disabled"),Ue.appendChild(Qe));continue}var Cn=document.createElement("option");Cn.value=We.code,Cn.text=We.label||je,We===this._currentProjectionSystems&&Cn.setAttribute("selected","selected"),Ue.appendChild(Cn)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value,ke=this._currentProjectionUnits;this._currentProjectionUnits=Oe,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(ke==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var Oe=(180/Math.PI).toFixed(20);t=(e*Oe).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var ke=.9.toFixed(20);t=(e*ke).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var Oe=t.replace(",",".");if(Oe=MathUtils.toFloat(Oe),Oe===null)return!1;Oe=this.convert(Oe);var ke=this._currentProjectionSystems.geoBBox;if(ke===void 0)return!0;var Be=[ke.left,ke.bottom,ke.right,ke.top];return Be=transformExtent(Be,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(Oe<Be[0]||Oe>Be[2])||e==="Lon"&&(Oe<Be[1]||Oe>Be[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$u=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPdrawing"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowDrawingPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowDrawingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowDrawingClick(Oe)}),e},_createDrawingPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPdrawingPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createDrawingPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createDrawingToolsDivSections:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__content fr-px-3w fr-modal__content",Ae},_createDrawingButtonsPluginDiv:function(){var Ae=document.createElement("div");return Ae.className="container-buttons-plugin fr-mx-2w",Ae},_createDrawingPanelHeaderElement:function(){var Ae=document.createElement("div");Ae.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",Ae.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var Oe=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowDrawingPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",t.appendChild(ke),Ae.appendChild(t),Ae},_createDrawingToolsSections:function(){var Ae=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&Ae.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&Ae.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&Ae.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),Ae},_createDrawingToolSection:function(Ae,e){var t=document.createElement("div");t.className="drawing-tool-section fr-mx-2w";var Oe=document.createElement("p");Oe.className="drawing-tool-section-title",Oe.innerHTML=Ae,t.appendChild(Oe);var ke=document.createElement("div");ke.className="drawing-tools-flex-display";var Be=this;function Ue(Qe){Be._handleDOMToolClick(Qe,this.id,Be),Be._handleToolClick(Qe,this.id,Be)}for(var je in this.dtOptions)if(this.dtOptions[je].panel===e){var We=document.createElement("button");We.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",We.id=this._addUID("drawing-tool-"+this.dtOptions[je].id),We.title=this.dtOptions[je].label,We.addEventListener("click",Ue),ke.appendChild(We)}return t.appendChild(ke),t},_createSavingSection:function(Ae,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var Oe=document.createElement("button");Oe.title=e,Oe.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",Oe.id=this._addUID("drawing-export"),Oe.setAttribute("type","button"),Oe.textContent=Ae;var ke=this;return Oe.onclick=function(){ke.onExportFeatureClick()},t.appendChild(Oe),t},_createMarkersChooser:function(Ae){var e=document.createElement("div");e.className=Ae.className;var t=document.createElement("input");t.type="checkbox",t.className="gpf-custom-dropdown-toggle",t.id=this._addUID("gpf-custom-dropdown-toggle"),e.appendChild(t);var Oe=document.createElement("span");Oe.innerText="Sélectionner le pictogramme :",e.appendChild(Oe);for(var ke=0;ke<this.options.markersList.length;ke++){var Be=document.createElement("input");Be.type="radio",Be.name="gpf-dropdown-radio-style",Be.value=this.options.markersList[ke].src,Be.className="gpf-custom-dropdown-display",Be.id=this._addUID(`gpf-custom-dropdown-display-${ke}`),e.appendChild(Be),ke===0&&(Be.checked=!0);var Ue=document.createElement("label");Ue.htmlFor=this._addUID("gpf-custom-dropdown-toggle"),Ue.className="fr-select GPselect gpf-select",e.appendChild(Ue);var je=document.createElement("img");je.src=this.options.markersList[ke].src,je.alt=`Option ${ke+1}`,Ue.appendChild(je)}var We=document.createElement("div");We.className="gpf-custom-dropdown-options",e.append(We);for(var ke=0;ke<this.options.markersList.length;ke++){var Qe=document.createElement("label");Qe.htmlFor=this._addUID(`gpf-custom-dropdown-display-${ke}`),Qe.className="gpf-custom-dropdown-option",We.appendChild(Qe);var Cn=document.createElement("img");Cn.src=this.options.markersList[ke].src,Cn.alt=`Option ${ke+1}`,Qe.appendChild(Cn),Qe.addEventListener("click",()=>{t.click()})}return e},_createStylingElement:function(Ae){var e=document.createElement("div");e.className=Ae.className;var t=document.createTextNode(Ae.label);e.appendChild(t);var Oe=document.createElement("input");try{Oe.type=Ae.type}catch{Oe.type="text"}if(Ae.type==="range"){e.dataset.frJsRange="true",e.title=Ae.label;var ke=Ae.defaultValue;ke=Math.round((ke-Ae.min)/(Ae.max-Ae.min)*100),e.style.setProperty("--progress-right",ke+"%"),Oe.addEventListener("change",Be=>{Be.target.parentNode.style.setProperty("--progress-right",`${(Be.target.value-Ae.min)/(Ae.max-Ae.min)*100}%`)})}return Oe.id=Ae.id,Oe.value=Ae.defaultValue,Ae.title&&(Oe.title=Ae.title),Ae.checked!==void 0&&(Oe.checked=Ae.checked),Ae.min!==void 0&&(Oe.min=Ae.min),Ae.max!==void 0&&(Oe.max=Ae.max),Ae.step!==void 0&&(Oe.step=Ae.step),e.appendChild(Oe),e},_createStylingDiv:function(Ae){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Modifier le style",Oe.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Ae.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Ae.applyFunc.call(this,"cancel")});var Ue=document.createElement("span");Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),Oe.appendChild(Be),t.appendChild(Oe)}var je=document.createElement("div");je.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(je);var We=document.createElement("div"),Qe=null,Cn=Ae.geomType.toLowerCase();switch(Cn){case"point&text":case"point":Qe=this._createMarkersChooser({className:"gp-styling-option",defaultValue:Ae.initValues.markerSrc}),We.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:Ae.initValues.markerSize*10}),We.appendChild(Qe),Ae.initValues.markerCustom,Cn==="point&text"&&(Qe=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:Ae.initValues.labelDisplay,defaultValue:Ae.initValues.labelDisplay}),We.appendChild(Qe));break;case"text":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Ae.initValues.fillColor}),We.appendChild(Qe),Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Ae.initValues.strokeColor}),We.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Ae.initValues.strokeWidth}),We.appendChild(Qe);break;case"line":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Ae.initValues.strokeColor}),We.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Ae.initValues.strokeWidth}),We.appendChild(Qe);break;case"polygon":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Ae.initValues.strokeColor}),We.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Ae.initValues.strokeWidth}),We.appendChild(Qe),Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Ae.initValues.fillColor}),We.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:Ae.initValues.fillOpacity*10}),We.appendChild(Qe);break;default:logger$u.log("Unhandled geometry type for styling.")}je.appendChild(We);var An=document.createElement("div");An.className="gpf-flex-row",je.appendChild(An);var En=document.createElement("input");En.type="button",En.className="gp-styling-button fr-btn fr-btn--secondary",En.value=this.options.labels.applyToObject,En.onclick=function(){Ae.applyFunc.call(this,"apply")};var Sn=document.createElement("input");Sn.type="button",Sn.value=this.options.labels.setAsDefault,Sn.className="gp-styling-button fr-btn fr-btn--tertiary",Sn.onclick=function(){Ae.applyFunc.call(this,"default")},An.appendChild(Sn),An.appendChild(En);var Tn=document.createElement("input");return Tn.type="button",Tn.className="gp-styling-button closer",Tn.onclick=function(){Ae.applyFunc.call(this,"cancel")},je.appendChild(Tn),e},_createLabelDiv:function(Ae){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Ajouter une description",Ae.geomType==="Text"&&(ke.innerHTML="Texte de l'annotation"),Oe.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Ae.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Ae.applyFunc.call(this,"cancel")});var Ue=document.createElement("span");Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),Oe.appendChild(Be),t.appendChild(Oe)}var je=document.createElement("div");je.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(je);var We=null;if(Ae.geomType==="Text"?(We=document.createElement("input"),We.type="text",We.className="gp-input-label-style fr-input fr-mb-3w"):(We=document.createElement("textArea"),We.rows=2,We.cols=40,We.className="gp-textarea-att-label-style fr-input"),Ae.text&&(We.value=Ae.text),We.autocomplete="off",We.placeholder=Ae.placeholder,We.id=Ae.inputId,je.appendChild(We),We.onkeyup=function(En){Ae.geomType==="Text"&&En.keyCode===13&&Ae.applyFunc.call(this,Ae.key,We.value,!0),En.keyCode===27&&Ae.applyFunc.call(this,Ae.key,We.value,!1)},Ae.measure&&Ae.geomType!=="Text"){var Qe=document.createElement("input");Qe.type="text",Qe.readonly=!0,Qe.className="gp-input-measure-style",Qe.value=Ae.measure,je.appendChild(Qe)}var Cn=document.createElement("input");Cn.type="button",Cn.className="gp-styling-button fr-btn fr-btn--tertiary",Cn.value=this.options.labels.saveDescription,Cn.onclick=function(){Ae.applyFunc.call(this,Ae.key,We.value,!0)},je.appendChild(Cn);var An=document.createElement("input");return An.type="button",An.className="gp-styling-button closer",An.onclick=function(){Ae.applyFunc.call(this,Ae.key,We.value,!1)},je.appendChild(An),e},_handleDOMToolClick:function(Ae,e,t){for(var Oe in t.dtOptions){var ke=t._addUID("drawing-tool-"+t.dtOptions[Oe].id),Be=document.getElementById(ke);if(ke!==e){Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[Oe].active=!1;continue}t.dtOptions[Oe].active?Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary":Be.className="drawing-tool drawing-tool-active fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[Oe].active=!t.dtOptions[Oe].active}}},logger$t=LoggerByDefault.getLogger("Drawing"),aa,Drawing=(aa=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof aa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$t.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$t.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$t.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new KML({writeStyles:!0});break;case"GPX":t=new GPX({});break;case"GEOJSON":t=new GeoJSON({});break}if(!t)return logger$t.log("Impossible to export : format unknown !?"),e;var Oe=this.layer.getSource().getProjection();return Oe=Oe||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:Oe}),e}setCollapsed(e){if(e===void 0){logger$t.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$t.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var Oe=!1;t.forEach(ke=>{ke===e&&(logger$t.trace("layer already in map. Not adding."),Oe=!0)}),Oe||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(ke=>{var Be=ke.getStyle();if(typeof Be=="function"){var Ue=ke.getStyleFunction();if(Ue){var je=Ue.call(this,ke,0);je&&je.length!==0&&ke.setStyle(Array.isArray(je)?je[0]:je)}}}),this.layer=e,this.getMap().getControls().forEach(ke=>{if(ke instanceof LayerSwitcher){var Be=this.layer.gpLayerId;ke._layers[Be].title===Be&&ke.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,Oe=0;Oe<this.options.markersList.length;Oe++)if(e&&this.options.markersList[Oe].src===e)return t=this.options.markersList[Oe],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(Oe=>{switch(Oe){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[Oe]=e[Oe];break}}),t}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(aa.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=aa.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(aa.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=aa.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(aa.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=aa.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(aa.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=aa.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=aa.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var Oe=parseInt(e.defaultStyles[t],10);if(isNaN(Oe)||Oe<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=aa.DefaultStyles[t];return}this.options.defaultStyles[t]=Oe}if(t==="markerSize"){var ke=parseFloat(e.defaultStyles[t]);if(isNaN(ke)||ke<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=aa.DefaultStyles[t];return}this.options.defaultStyles[t]=ke}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.tooltipOvl=null,this.tooltipElem=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,t=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var Oe=this._drawingPanel=this._createDrawingPanelElement(),ke=this._createDrawingPanelDivElement();Oe.appendChild(ke);var Be=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();ke.appendChild(Be);var Ue=this._createDrawingToolsDivSections();ke.appendChild(Ue);for(var je=this._createDrawingToolsSections(),We=0;We<je.length;We++)Ue.appendChild(je[We]);var Qe=this._createDrawingButtonsPluginDiv();return Ue.appendChild(Qe),e.appendChild(Oe),e}_drawEndFeature(e,t){var Oe=null;switch(t){case"Point":Oe=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":Oe=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":Oe=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(Oe),this._updateMeasure(e,t),this.options.popup.display){var ke=this,Be=function(Cn,An,En){if(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null,En&&An&&An.trim().length>0){var Sn={};Sn[Cn]=An.replace(/\n/g,"<br>"),e.setProperties(Sn)}},Ue=null,je=!0,We=this.options.popup.function;We&&typeof We=="function"&&(Ue=We.call(ke,{feature:e,geomType:t,closeFunc:function(){Be(null,!1)},saveFunc:function(Cn){Be(Cn,!0)}}),Ue&&(je=!1,Ue.tabIndex=-1,Ue.onblur=function(){ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null})),je&&(Ue=this._createLabelDiv({applyFunc:Be,inputId:this._addUID("att-input"),placeholder:"Saisir une description... (facultatif)",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:Ue,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var Qe=e.getGeometry().getExtent();this.popupOvl.setPosition([(Qe[0]+Qe[2])/2,(Qe[1]+Qe[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var Oe=null,ke=null,Be=null,Ue=null,je={},We=t.selected[0].getGeometry(),Qe=t.selected[0].getStyle();if(We instanceof Point$1||We instanceof MultiPoint){if(Qe&&Qe.getImage()&&typeof Qe.getImage().getSrc=="function"&&Qe.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(Ue="Point",typeof Qe.getImage().getSrc=="function"?(je.markerSrc=Qe.getImage().getSrc(),je.markerSize=Qe.getImage().getScale()||1,je.markerAnchor=Qe.getImage().getAnchor(),Qe.getImage().getColor()?(Oe=Qe.getImage().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.markerColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.markerColor=ke.hex,je.markerOpacity=ke.opacity):je.markerColor=this.options.markersList[0].color||"#ffffff"):(je.markerSrc=this.options.markersList[0].src,je.markerSize=this.options.markersList[0].scale||1,je.markerColor=this.options.markersList[0].color||"#ffffff",je.markerAnchor=this.options.markersList[0].anchor),je.markerCustom=!this._getsMarkersOptionsFromSrc(je.markerSrc)),Qe&&Qe.getText()){var Cn=t.selected[0].getProperties().name;if(Cn&&(Ue=Ue==="Point"?"Point&Text":"Text",Qe.getText().getStroke()&&Qe.getText().getStroke().getColor()&&(Oe=Qe.getText().getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.strokeColor=ke.hex,je.strokeOpacity=ke.opacity),Qe.getText().getStroke()&&Qe.getText().getStroke().getWidth()&&(je.strokeWidth=Qe.getText().getStroke().getWidth()),Qe.getText().getFill()&&Qe.getText().getFill().getColor()&&(Oe=Qe.getText().getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.fillColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.fillColor=ke.hex,je.fillOpacity=ke.opacity),je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.textStrokeColor,je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.textStrokeWidth,je.fillColor=je.hasOwnProperty("fillColor")?je.fillColor:this.options.defaultStyles.textFillColor,Ue==="Point&Text")){var An=Qe.getText().getText();An||Qe.getText().setText(Cn);var En=t.selected[0].get("checked");je.labelDisplay=En===void 0?this.options.defaultStyles.labelDisplay:En}}}else We instanceof LineString||We instanceof MultiLineString?(Ue="Line",Qe&&Qe.getStroke()&&(Qe.getStroke().getWidth()&&(je.strokeWidth=Qe.getStroke().getWidth()),Qe.getStroke().getColor()&&(Oe=Qe.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.strokeColor=ke.hex,je.strokeOpacity=ke.opacity)),je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.strokeWidth,je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.strokeColor):(We instanceof Polygon||We instanceof MultiPolygon)&&(Ue="Polygon",Qe&&Qe.getStroke()&&(Qe.getStroke().getWidth()&&(je.strokeWidth=Qe.getStroke().getWidth()),Qe.getStroke().getColor()&&(Oe=Qe.getStroke().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.strokeColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.strokeColor=ke.hex,je.strokeOpacity=ke.opacity)),Qe&&Qe.getFill()&&Qe.getFill().getColor()&&(Oe=Qe.getFill().getColor(),Array.isArray(Oe)?Oe="rgba("+Oe.join()+")":je.fillColor=Oe,ke=ColorUtils.isRGB(Oe)?ColorUtils.rgbaToHex(Oe):{hex:Oe,opacity:1},je.fillColor=ke.hex,je.fillOpacity=ke.opacity),je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.polyStrokeWidth,je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.polyStrokeColor,je.fillColor=je.hasOwnProperty("fillColor")?je.fillColor:this.options.defaultStyles.polyFillColor,je.fillOpacity=je.hasOwnProperty("fillOpacity")?je.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!Ue){logger$t.log("Unhandled geometry type for styling.");return}var Sn=this,Tn=function(ti){if(ti==="cancel"){Sn.getMap().removeOverlay(Be);return}var ni=ti!=="apply",ii=document.getElementById(Sn._addUID("fillColor")),si=document.getElementById(Sn._addUID("fillOpacity")),oi=document.getElementById(Sn._addUID("strokeColor")),ci=document.getElementById(Sn._addUID("strokeWidth")),Pi=document.getElementById(Sn._addUID("markerSize"));switch(Ue.toLowerCase()){case"text":ni?(Sn.options.defaultStyles.textStrokeColor=oi.value,Sn.options.defaultStyles.textStrokeWidth=ci.value,Sn.options.defaultStyles.textFillColor=ii.value):t.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:Qe.getText().getText(),fill:new Fill({color:ii.value}),stroke:new Stroke({color:oi.value,width:parseInt(ci.value,10)})})}));break;case"point&text":case"point":var Ai=document.querySelector("input[type='checkbox']"),fi=null,Oi=parseInt(Pi.value,10)/10,Ni=document.querySelector("input[name='gpf-dropdown-radio-style']:checked");if(Ni&&(fi=Sn._getsMarkersOptionsFromSrc(Ni.value),fi.scale=Oi),ni){if(Sn.options.defaultStyles.markerSize=Oi,Sn.options.markersList.length>1){var ui=Sn.options.markersList.findIndex(function(Mi){return Mi===fi});ui>0&&(Sn.options.markersList.splice(ui,1),Sn.options.markersList.splice(0,0,fi))}Ue.toLowerCase()==="point&text"&&(Sn.options.defaultStyles.textStrokeColor=je.strokeColor,Sn.options.defaultStyles.textStrokeWidth=je.strokeWidth,Sn.options.defaultStyles.textFillColor=je.fillColor,Sn.options.defaultStyles.labelDisplay=je.labelDisplay)}else{var li={};Ue.toLowerCase()==="point&text"&&(t.selected[0].set("checked",Ai.checked),li={text:new Text({font:"16px sans",textAlign:"left",text:Ai.checked?t.selected[0].get("name"):"",fill:new Fill({color:je.fillColor}),stroke:new Stroke({color:je.strokeColor,width:parseInt(je.strokeWidth,10)})})}),fi?t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(Sn._getIconStyleOptions(fi))},li))):t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:je.markerSrc,anchor:je.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Oi})},li)))}break;case"line":ni?(Sn.options.defaultStyles.strokeColor=oi.value,Sn.options.defaultStyles.strokeWidth=parseInt(ci.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:oi.value})}));break;case"polygon":var Ri=parseInt(si.value,10)/10;ni?(Sn.options.defaultStyles.polyStrokeColor=oi.value,Sn.options.defaultStyles.polyFillColor=ii.value,Sn.options.defaultStyles.polyFillOpacity=Ri,Sn.options.defaultStyles.polyStrokeWidth=parseInt(ci.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(ci.value,10),color:oi.value}),fill:new Fill({color:ColorUtils.hexToRgba(ii.value,Ri)})}));break}ni||Sn.getMap().removeOverlay(Be)},Dn=this._createStylingDiv({geomType:Ue,initValues:je,applyFunc:Tn});Be=new Overlay({element:Dn,positioning:"top-center"}),this.getMap().addOverlay(Be),Be.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=Be,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var Oe=null,ke=null,Be=null,Ue=null,je=t.selected[0].getGeometry(),We=t.selected[0].getStyle();if(je instanceof Point$1||je instanceof MultiPoint){var Qe=t.selected[0].getProperties().name;We&&We.getText()&&Qe?ke="Text":We&&We.getImage()&&(ke="Point")}else if(je instanceof LineString||je instanceof MultiLineString)ke="Line";else if(je instanceof Polygon||je instanceof MultiPolygon)ke="Polygon";else{logger$t.log("Geometry type for styling not supported .");return}if(!ke){logger$t.log("Unhandled geometry type for styling.");return}if(ke==="Text")Be=We.getText().getText();else{var Cn=t.selected[0].getProperties();Cn&&(Cn.hasOwnProperty("description")||Cn.hasOwnProperty("desc"))&&(Be=Cn.description||Cn.desc),Cn&&Cn.hasOwnProperty("measure")&&(Ue=Cn.measure)}var An=this,En=function(Tn,Dn,ti){if(An.getMap().removeOverlay(Oe),!!ti){var ni=t.selected[0];if(ke==="Text"){var ii=ni.getStyle();ii.getText().setText(Dn),ni.setProperties({name:Dn}),ni.setStyle(ii);return}var si={};si[Tn]=Dn.replace(/\n/g,"<br>"),ni.setProperties(si)}},Sn=this._createLabelDiv({applyFunc:En,inputId:this._addUID("label-input"),placeholder:ke==="Text"?"Saisir un label...":"Saisir une description... (facultatif)",text:Be,key:"description",measure:this.options.tools.measure?Ue:null,geomType:ke});Oe=new Overlay({element:Sn,positioning:"top-center"}),this.getMap().addOverlay(Oe),Oe.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=Oe,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){logger$t.log(e);var Oe=null,ke=this.getMap().getView().getProjection();function Be(ci,Pi){Pi=Pi||2;var Ai=Math.pow(10,Pi);return Math.round(ci*Ai)/Ai}var Ue=t||e.getProperties().type;switch(Ue){case"Point":var je=e.getGeometry().getCoordinates(),We=transform$1(je,ke,"EPSG:4326");Oe="lon : ",Oe+=Be(We[0],4)+"°",Oe+=" / ",Oe+="lat : ",Oe+=Be(We[1],4)+"°";break;case"LineString":for(var Qe=0,Cn=e.getGeometry().getCoordinates(),An=0,En=Cn.length-1;An<En;++An){var Sn=transform$1(Cn[An],ke,"EPSG:4326"),Tn=transform$1(Cn[An+1],ke,"EPSG:4326");Qe+=getDistance(Sn,Tn)}Oe=Qe>1e3?Be(Qe/1e3,3)+" km":Be(Qe,3)+" m";break;case"Polygon":var Dn=0,ti=e.getGeometry().clone(),ni=ti.getLinearRing(0).getCoordinates();Dn=Math.abs(getArea(new Polygon([ni])));var ii=ti.getLinearRings();if(ii.length>1)for(var si=1;si<ii.length;si++){var oi=ii[si].getCoordinates();Dn-=Math.abs(getArea(new Polygon([oi])))}Oe=Dn>1e6?Be(Dn/1e6,3)+" km^2":Be(Dn,2)+" m^2";break}e.setProperties({measure:Oe,type:Ue})}_handleToolClick(e,t,Oe){var ke=Oe.getMap();if(!ke){logger$t.trace("Drawing control not attached to any map.");return}Interactions.unset(ke,{current:"Drawing"}),Oe.interactionCurrent&&(ke.removeInteraction(Oe.interactionCurrent),Oe.interactionCurrent=null),Oe.interactionSelectEdit&&(ke.removeInteraction(Oe.interactionSelectEdit),Oe.interactionSelectEdit=null),Oe.popupOvl&&(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null),Oe.stylingOvl&&(Oe.getMap().removeOverlay(Oe.stylingOvl),Oe.stylingOvl=null),Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null),this.layer||this._createEmptyLayer();const Be=je=>{if(je.dragging||!Oe.tooltipOvl)return;const We=je.coordinate;Oe.tooltipOvl.setPosition(We)},Ue=()=>{Oe.tooltipOvl&&(Oe.getMap().removeOverlay(Oe.tooltipOvl),Oe.tooltipOvl=null)};switch(t){case this._addUID("drawing-tool-point"):Oe.dtOptions.points.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),Oe.interactionCurrent.on("drawend",function(je){Oe._drawEndFeature(je.feature,"Point")},Oe));break;case this._addUID("drawing-tool-line"):Oe.dtOptions.lines.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString",handleMoveEvent:Be}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(je){Oe._drawEndFeature(je.feature,"LineString"),Ue()},Oe),Oe.interactionCurrent.on("drawabort",Ue,Oe));break;case this._addUID("drawing-tool-polygon"):Oe.dtOptions.polygons.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon",handleMoveEvent:Be}),Oe.tootlTipElem||(Oe.tootlTipElem=document.createElement("div"),Oe.tootlTipElem.className="gpf-draw-linestring-tooltip"),Oe.tootlTipElem.innerText="Double-cliquer pour terminer",Oe.tooltipOvl=new Overlay({element:Oe.tootlTipElem,positioning:"top-right"}),Oe.interactionCurrent.on("drawend",function(je){Oe._drawEndFeature(je.feature,"Polygon"),Ue()},Oe),Oe.interactionCurrent.on("drawabort",Ue,Oe));break;case this._addUID("drawing-tool-holes"):Oe.dtOptions.holes.active&&(Oe.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),ke.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),Oe.interactionCurrent.on("drawstart",function(je){},Oe),Oe.interactionCurrent.on("drawend",function(je){var We=Oe.interactionSelectEdit.getFeatures();if(We.getLength()){for(var Qe=We.item(0),Cn=je.feature.getGeometry().getCoordinates()[0],An=!0,En=0;En<Cn.length;En++)if(!Qe.getGeometry().intersectsCoordinate(Cn[En])){An=!1;break}if(!An)return;Qe.getGeometry().appendLinearRing(new LinearRing(Cn)),je.feature=Qe,Oe._drawEndFeature(je.feature,"Polygon")}},Oe));break;case this._addUID("drawing-tool-text"):Oe.dtOptions.text.active&&(Oe.interactionCurrent=new Draw({stopClick:!0,source:Oe.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),Oe.interactionCurrent.on("drawend",je=>{var We=function(Cn,An,En){if(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null,!En||!An){Oe.layer.getSource().removeFeature(je.feature);return}var Sn={};Sn[Cn]=An,je.feature.setProperties(Sn),je.feature.setStyle(new Style$1({image:new Icon(Oe._getIconStyleOptions(Oe.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:An,fill:new Fill({color:Oe.options.defaultStyles.textFillColor}),stroke:new Stroke({color:Oe.options.defaultStyles.textStrokeColor,width:3})})}))},Qe=this._createLabelDiv({applyFunc:We,inputId:Oe._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});Oe.popupOvl&&Oe.popupOvl.element.querySelector(".gp-styling-button.closer").click(),Oe.popupOvl=new Overlay({element:Qe,positioning:"top-center"}),Oe.getMap().addOverlay(Oe.popupOvl),Oe.popupOvl.setPosition(je.feature.getGeometry().getCoordinates()),document.getElementById(Oe._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):Oe.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,Oe.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),Oe.interactionSelectEdit.on("select",je=>{}),Oe.interactionSelectEdit.setProperties({name:"Drawing",source:Oe}),ke.addInteraction(Oe.interactionSelectEdit),Oe.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),Oe.interactionCurrent.on("modifyend",je=>{var We=je.features.item(0);Oe._updateMeasure(We)}));break;case this._addUID("drawing-tool-display"):Oe.dtOptions.display.active&&(Oe.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):Oe.dtOptions.tooltip.active&&(Oe.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):Oe.dtOptions.remove.active&&(Oe.interactionCurrent=Oe._createRemoveInteraction());break;default:logger$t.trace("unhandled tool type")}Oe.interactionCurrent&&(Oe.interactionCurrent.setProperties({name:"Drawing",source:this}),ke.addInteraction(Oe.interactionCurrent),Oe.tooltipOvl&&ke.addOverlay(Oe.tooltipOvl)),logger$t.log("interactions",ke.getInteractions())}onShowDrawingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showDrawingButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position);for(var ke in this.dtOptions)if(this.dtOptions.hasOwnProperty(ke)&&this.dtOptions[ke].active){var Be=this._addUID("drawing-tool-"+this.dtOptions[ke].id);document.getElementById(Be).className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[ke].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),Oe="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+Oe+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var ke=document.createEvent("MouseEvents");ke.initEvent("click",!0,!0),t.dispatchEvent(ke)}else t.click()}}},Tc(aa,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Tc(aa,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Créer",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Éditer",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Tc(aa,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#000091",polyFillOpacity:.7,polyStrokeColor:"#000091",polyStrokeWidth:4,strokeColor:"#FF7F00",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Tc(aa,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),aa);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$s=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.className=this._addUID("GPlocationPoint"),Ae.className+=" GPwidget gpf-widget ",Ae},_createLocationPointElement:function(Ae,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+Ae),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(Ae,e){var t=this,Oe=document.createElement("button");return Oe.id=this._addUID("GPlocationOriginLabel_"+Ae),Oe.innerHTML=e,Oe.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",Oe.setAttribute("type","button"),Oe.addEventListener("click",function(ke){for(var Be=SelectorID.index(this.id),Ue=document.getElementsByClassName(t._addUID("GPlocationPoint")),je=0;je<Ue.length;je++){var We=Ue[je].childNodes[0].id,Qe=SelectorID.index(We);document.getElementById(t._addUID("GPlocationPoint_"+Qe)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+Be)).value="",document.getElementById(t._addUID("GPlocationPoint_"+Be)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+Be)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),t.onLocationClearPointClick(ke)}),Oe},_createLocationAutoCompleteteInputElement:function(Ae){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+Ae),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse, un lieu...",t.autocomplete="off",t.addEventListener("keyup",function(Oe){var ke=Oe.which||Oe.keyCode;if(!(ke===13||ke===10||ke===38||ke===40)){var Be=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Be)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Oe)}}),t.addEventListener("keydown",function(Oe){var ke=Oe.which||Oe.keyCode,Be=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+Ae));if(Be){var Ue=Be.getElementsByClassName("GPautoCompleteProposal current"),je=Be.getElementsByClassName("GPautoCompleteProposal"),We=je.length;if(We){var Qe=null;if(Ue.length)Qe=Ue[0];else{Qe=je[0],Qe.className="GPautoCompleteProposal current",Qe.style.color="#000000",Qe.style["background-color"]="#CEDBEF";return}var Cn=parseInt(SelectorID.index(Qe.id),10),An=Cn===We-1?je[0]:je[Cn+1],En=Cn===0?je[We-1]:je[Cn-1];switch(Qe.style["background-color"]="",Qe.style.color="",En.style["background-color"]="",En.style.color="",An.style["background-color"]="",An.style.color="",ke){case 38:logger$s.log("arrow up"),Qe.className="GPautoCompleteProposal",En.className="GPautoCompleteProposal current",En.style.color="#000000",En.style["background-color"]="#CEDBEF";break;case 40:logger$s.log("arrow down"),Qe.className="GPautoCompleteProposal",An.className="GPautoCompleteProposal current",An.style.color="#000000",An.style["background-color"]="#CEDBEF";break;case 13:logger$s.log("enter"),Qe.click(Oe);break}Qe.focus()}}}),t},_createLocationCoordinateInputElement:function(Ae){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+Ae),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var Oe=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+Oe)).click()}),t},_createLocationPointerShowInputElement:function(Ae){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+Ae),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(Ae){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+Ae),t.htmlFor=this._addUID("GPlocationOriginPointer_"+Ae),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",t.title="Pointer un lieu sur la carte",t.setAttribute("type","button"),t.addEventListener("click",function(Oe){Oe.preventDefault(),Oe.stopPropagation();var ke=SelectorID.index(this.id),Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),Ue,je,We;for(Ue=0;Ue<Be.length;Ue++)je=Be[Ue].childNodes[0].id,We=SelectorID.index(je),ke!==We&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+We)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+We)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+We)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).value="",Ue=0;Ue<Be.length;Ue++)je=Be[Ue].childNodes[0].id,We=SelectorID.index(je),document.getElementById(e._addUID("GPlocationPoint_"+We)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+ke))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+ke)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+ke)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).value="Pointer un lieu sur la carte",Ue=0;Ue<Be.length;Ue++)je=Be[Ue].childNodes[0].id,We=SelectorID.index(je),ke===We?document.getElementById(e._addUID("GPlocationPoint_"+We)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+We)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+ke))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+ke)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+ke)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+ke)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+ke)).disabled=!0}e.onActivateMapPointClick(Oe)}),t},_createLocationRemovePointElement:function(Ae){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+Ae),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",t.title="Supprimer l'étape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke);var Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),Ue=Be.length-1,je=Be[0].childNodes[0].id,We=Be[Ue].childNodes[0].id,Qe=SelectorID.index(je),Cn=SelectorID.index(We);if(Ae!==Qe&&Ae!==Cn){var An=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+An)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+An)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+An)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+An)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+An)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+An)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(Oe)}}),t},_createLocationAddPointElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(t){for(var Oe=1,ke=0,Be=document.getElementsByClassName(Ae._addUID("GPlocationPoint")),Ue=1;Ue<Be.length-1;Ue++){var je=Be[Ue].childNodes[0].id,We=SelectorID.index(je);document.getElementById(Ae._addUID("GPlocationPoint_"+We))&&(document.getElementById(Ae._addUID("GPlocationPoint_"+We)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?Oe===1&&(Oe=We):ke++)}Oe<Be.length&&(document.getElementById(Ae._addUID("GPlocationPoint_"+Oe)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(Ae._addUID("GPlocationPoint_"+Oe)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),ke===4&&(document.getElementById(Ae._addUID("GPlocationStageAdd")).style.display="none");var Qe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Qe),Ae.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(Ae){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+Ae),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(Ae){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+Ae),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ae)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ae)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ae)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ae)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(Ae,e,t){var Oe=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+Ae)),ke=document.createElement("div");ke.id=this._addUID("AutoCompletedLocation_"+t),ke.className="GPautoCompleteProposal gpf-panel__items",ke.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),Oe.appendChild(ke)},GPdisplayCoordinate:function(Ae){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var Oe=e[t].childNodes[0].id,ke=SelectorID.index(Oe);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+ke)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)).value=Ae,document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)).disabled=!1;for(var Be=0;Be<e.length;Be++){Oe=e[Be].childNodes[0].id;var Ue=SelectorID.index(Oe);document.getElementById(this._addUID("GPlocationPoint_"+Ue)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+Ue))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+Ue)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+ke)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$r=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Wf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Wf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$r.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var Oe=this.getMap(),ke=Oe.getView().getProjection().getCode();t||(t=ke),this._setCoordinate(e,t),e=transform$1(e,t,ke),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),Oe=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(Oe);var ke=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);Oe.appendChild(ke);var Be=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Be.addEventListener?Be.addEventListener("click",()=>this.onAutoCompleteInputClick()):Be.attachEvent&&Be.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),Oe.appendChild(Be);var Ue=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);Oe.appendChild(Ue);var je=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);Oe.appendChild(je);var We=this._inputShowPointer=this._createLocationPointerInputElement(e);if(Oe.appendChild(We),this.options.tag.addOption){var Qe=this._addPointElement=this._createLocationAddPointElement();Oe.appendChild(Qe)}if(this.options.tag.removeOption){var Cn=this._removePointElement=this._createLocationRemovePointElement(e);Oe.appendChild(Cn)}var An=this._suggestedContainer=this._createLocationAutoCompleteElement(e),En=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return An.appendChild(En),t.appendChild(An),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var Oe=this.options.autocompleteOptions||{},ke=Oe.onSuccess||null,Be=Oe.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var Ue=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(We){if(We){var Qe=We.suggestedLocations;Ue._fillAutoCompletedLocationListContainer(Qe),ke&&ke.call(this,We)}},onFailure:function(We){Ue._clearSuggestedLocation(),logger$r.log(We.message),Be&&Be.call(this,We)}});var je=this.getMap();je.on("click",()=>this._hideSuggestedLocation()),je.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var Oe=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=Oe;var ke={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(Be);var Ue=this.getMap().getView(),je=Ue.getProjection().getCode();je!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",je)),this._setPosition(Oe),this._setMarker(Oe,ke,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$r.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var Oe=e.map.getView().getProjection();this._setCoordinate(t,Oe),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),Oe=t.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}_setCoordinate(e,t){this._coordinate=transform$1(e,t,"EPSG:4326");var Oe=this._coordinate[0].toFixed(4),ke=this._coordinate[1].toFixed(4),Be=ke+" / "+Oe;this.GPdisplayCoordinate(Be)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,Oe){var ke=this.getMap();if(this._marker!=null&&(ke.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Be,stopEvent:!1}),ke.addOverlay(this._marker),Oe&&logger$r.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$r.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$r.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions),Helper.assign(t,e);var Oe=this._resources.AutoCompletion||null;Oe&&Array.isArray(Oe)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=Oe),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$r.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var Oe=0;Oe<e.length;Oe++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[Oe],Oe);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e}},logger$q=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{layer:null,control:null,target:null,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:""},callback:null},logger$q.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:null}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.inputName=null,this.inputDesc=null,this.menu=null,this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer(),t=e.querySelector(".container-buttons-plugin");this.options.target=t||e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options={layer:null,control:null,target:null,download:!0,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:"export"},callback:null};var t=Helper.assign(this.options.icons,e.icons);Helper.assign(this.options,e),Helper.assign(this.options.icons,t),logger$q.debug(this.options),this.options.layer,this.options.control,this.options.target;var Oe=this.options.format;Oe?this.setFormat(Oe):this.setFormat(""),this.options.name||this.setName("export"),this.options.description||this.setDescription("export"),this.options.title||this.setTitle("Exporter"),this.options.kind||this.setKind("secondary"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.options.icons.menu+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer gpf-export-menu-container gpf-export-menu-container-row",this.options.direction==="column"&&t.classList.replace("gpf-export-menu-container-row","gpf-export-menu-container-column");var Oe=this.stringToHTML(`
            <div class="GPexportMenuHidden gpf-accordion fr-accordion ${this.menuClassHidden}">
                <h3 class="gpf-accordion__title fr-accordion__title">
                    <button type="button" 
                        id="GPexportBtnMenuContent-${this.uid}"
                        class="gpf-accordion__btn fr-accordion__btn" 
                        aria-expanded="false" aria-controls="GPexportMenuContent-${this.uid}">options</button>
                </h3>
                <div id="GPexportMenuContent-${this.uid}"
                    class="GPexportMenuContent fr-collapse fr-mx-2w">
                    <div id="GPexportMenuName-${this.uid}" 
                        class="GPexportMenuName">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputName-${this.uid}" title="Nom">Nom</label>
                        <input type="text" id="GPexportMenuInputName-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuDesc-${this.uid}"
                        class="GPexportMenuDesc">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputDesc-${this.uid}" title="Description">Description</label>
                        <input type="text" id="GPexportMenuInputDesc-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuFormat-${this.uid}">
                        <label class="GPlabel gpf-label fr-label" title="Formats">Formats</label>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGeojson-${this.uid}"
                                name="format" 
                                value="geojson">
                            <label class="fr-label container" for="GPmenuFormatGeojson-${this.uid}">GeoJSON
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatKml-${this.uid}"
                                name="format" 
                                value="kml">
                            <label class="fr-label container" for="GPmenuFormatKml-${this.uid}">KML
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGpx-${this.uid}"
                                name="format" 
                                value="gpx">
                            <label class="fr-label container" for="GPmenuFormatGpx-${this.uid}">GPX
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        `);if(this.menu=Oe.firstChild,this.menu){if(this.options.menu){var ke=this.menu.className;this.menu.className=ke.replace(this.menuClassHidden,"")}var Be=this.options.format.toUpperCase(),Ue=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let Cn=0;Cn<Ue.length;Cn++){var je=Ue[Cn];je.id.toUpperCase().includes(Be)&&(je.checked=!0),je.addEventListener("change",An=>this.onChangeRadioFormat(An))}var We=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid);We&&We.addEventListener("click",Cn=>this.onClickButtonToggleOptions(Cn)),this.inputName=this.menu.querySelector("#GPexportMenuInputName-"+this.uid),this.inputDesc=this.menu.querySelector("#GPexportMenuInputDesc-"+this.uid),this.inputName.addEventListener("change",Cn=>this.onChangeInputName(Cn)),this.inputDesc.addEventListener("change",Cn=>this.onChangeInputDesc(Cn))}t.appendChild(this.menu);var Qe=this.stringToHTML(`
            <button 
                type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPexportButtonExportIcon GPsubmit gpf-btn gpf-btn-icon-export-submit fr-btn fr-m-1w">
                ${e}
            </button>
        `);switch(this.button=Qe.firstChild,this.button&&this.button.addEventListener("click",Cn=>this.onClickButtonExport(Cn)),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}if(!this.options.icons.button)this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");else switch(this.options.icons.button){case"export":break;case"save":this.button.classList.replace("GPexportButtonExportIcon","GPexportButtonSaveIcon"),this.button.classList.replace("gpf-btn-icon-export-submit","gpf-btn-icon-save-submit");break;default:this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");break}t.appendChild(this.button),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var Oe=new DOMParser,ke=Oe.parseFromString(e,"text/html");return ke.body}var Be=document.createElement("div");return Be.innerHTML=e,Be}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,Oe){var ke=null;if(!e)return logger$q.warn("Impossible to export : no layer is hosting features."),ke;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$q.warn("Impossible to export : no features found."),ke;e.getSource().getFeatures().forEach(Cn=>{var An=Cn.getStyle();!An&&this.options.control&&typeof this.options.control.getStyle=="function"&&Cn.setStyle(this.options.control.getStyle())});var Be={defaultStyle:Oe,extensions:{}};t&&(Be.extensions={"geoportail:compute":t}),this.options.description&&(Be.extensions.description=this.inputDesc&&this.inputDesc.value?this.inputDesc.value:this.options.description);var Ue=null;switch(this.options.format.toUpperCase()){case"KML":Be.writeStyles=!0,Be.showPointNames=!0,Ue=new KML(Be);break;case"GPX":Ue=new GPX(Be);break;case"GEOJSON":Ue=new GeoJSON(Be);break}if(!Ue)return logger$q.warn("Impossible to export : format unknown !?"),ke;var je=e.getSource().getProjection(),We=this.getMap();We&&(je=je||We.getView().getProjection());var Qe=e.getSource().getFeatures();return ke=Ue.writeFeatures(Qe,{dataProjection:"EPSG:4326",featureProjection:je||"EPSG:3857"}),ke}onClickButtonExport(e){this.isPluggableControl()||logger$q.warn("Componant not pluggable with the control !");var t=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getLayer():this.options.layer,Oe=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},ke=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Be=this.exportFeatures(t,Oe,ke);if(!(!Be||Be==="null")){if(this.dispatchEvent({type:"button:clicked",content:Be,name:this.options.name,description:this.options.description,format:this.options.format,layer:t}),this.options.download){var Ue=document.createElement("a"),je="utf-8";if(Ue.setAttribute("href","data:"+this.mimeType+";charset="+je+","+encodeURIComponent(Be)),Ue.setAttribute("download",this.options.name+this.extension),document.createEvent){var We=document.createEvent("MouseEvents");We.initEvent("click",!0,!0),Ue.dispatchEvent(We)}else Ue.click()}this.options.callback&&typeof this.options.callback=="function"&&this.options.callback(Be,t)}}onChangeRadioFormat(e){this.setFormat(e.target.value)}onChangeInputName(e){this.setName(e.target.value)}onChangeInputDesc(e){this.setDescription(e.target.value)}onClickButtonToggleOptions(e){e.target.ariaExpanded=e.target.ariaExpanded!=="true";var t=this.menu.querySelector("#"+e.target.getAttribute("aria-controls"));t&&(e.target.ariaExpanded==="true"?(t.classList.add("fr-collapse--expanded"),this.menu.classList.add("gpf-full-container"),this.menu.classList.add("gpf-accordion--opened"),t.classList.remove("GPelementHidden")):(t.classList.remove("fr-collapse--expanded"),this.menu.classList.remove("gpf-full-container"),this.menu.classList.remove("gpf-accordion--opened"),t.classList.add("GPelementHidden")))}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setDescription(e){this.options.description=e}setTitle(e){this.options.title=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+e:e)}setKind(e){if(this.options.kind=e,this.button)switch(this.button.classList.remove("fr-btn--tertiary","gpf-btn--tertiary"),this.button.classList.remove("fr-btn--secondary","gpf-btn--secondary"),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}}setMenu(e){if(this.options.menu=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var Oe=this.options.format.toUpperCase(),ke=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let Ue=0;Ue<ke.length;Ue++){var Be=ke[Ue];Be.id.toUpperCase().includes(Oe)&&(Be.checked=!0)}}}setLayer(e){this.options.layer=e}setDownload(e){this.options.download=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$p=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GProute"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowRoutePictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinéraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowRoutePanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowRoutePanelClick(Oe)}),e},_createRoutePanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GProutePanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createRoutePanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createDrawingButtonsPluginDiv:function(){var Ae=document.createElement("div");return Ae.className="container-buttons-plugin fr-mx-2w",Ae},_createRoutePanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'itinéraire",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GProutePanelClose"),Oe.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Masquer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowRoutePicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowRoutePicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createRoutePanelFooterElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Ae},_createRoutePanelFormPointLabel:function(Ae,e=!0){var t=document.createElement("p");t.innerHTML=Ae;var Oe=e?"":" GPelementHidden gpf-hidden";return t.className="GProutePointLabelP gpf-label fr-label"+Oe,t},_createRoutePanelFormElement:function(){var Ae=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){logger$p.log(t),t.preventDefault();var Oe=document.getElementsByClassName(Ae._addUID("GPlocationPoint")),ke=Oe[0].childNodes[0].id,Be=Oe[Oe.length-1].childNodes[0].id,Ue=SelectorID.index(ke),je=SelectorID.index(Be);if(document.getElementById(Ae._addUID("GPlocationOrigin_"+Ue)).value===""&&document.getElementById(Ae._addUID("GPlocationOriginCoords_"+Ue)).value===""||document.getElementById(Ae._addUID("GPlocationOrigin_"+je)).value===""&&document.getElementById(Ae._addUID("GPlocationOriginCoords_"+je)).value==="")return!1;Ae._addRouteResultsStagesValuesElement(Oe);var We=null;document.getElementById(Ae._addUID("GProuteComputationChoice"))&&(document.getElementById(Ae._addUID("GProuteComputationFastest"))&&document.getElementById(Ae._addUID("GProuteComputationFastest")).checked&&(We=document.getElementById(Ae._addUID("GProuteComputationFastest")).value),document.getElementById(Ae._addUID("GProuteComputationShortest"))&&document.getElementById(Ae._addUID("GProuteComputationShortest")).checked&&(We=document.getElementById(Ae._addUID("GProuteComputationShortest")).value));var Qe=null;document.getElementById(Ae._addUID("GProuteTransportCar"))&&document.getElementById(Ae._addUID("GProuteTransportCar")).checked&&(Qe=document.getElementById(Ae._addUID("GProuteTransportCar")).value),document.getElementById(Ae._addUID("GProuteTransportPedestrian"))&&document.getElementById(Ae._addUID("GProuteTransportPedestrian")).checked&&(Qe=document.getElementById(Ae._addUID("GProuteTransportPedestrian")).value);for(var Cn=[],An=document.getElementsByClassName("GProuteExclusionsOption"),En=0;En<An.length;En++){var Sn=An[En].htmlFor,Tn=document.getElementById(Sn);Tn.checked||Cn.push(Tn.value)}return Ae.onRouteComputationSubmit({computation:We,transport:Qe,exclusions:Cn}),!1}),e},_createRoutePanelResultsElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GProuteResultsPanel"),Ae.className="GPelementHidden gpf-hidden",Ae.appendChild(this._createRouteResultsStagesElement()),Ae.appendChild(this._createRouteResultsElement()),Ae.appendChild(this._createRouteShowResultsDetailsElement()),Ae.appendChild(this._createRouteResultsDetailsElement()),Ae},_createRouteWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GProuteCalcWaitingContainer"),Ae.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createRouteResultsStagesElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GProuteResultsStages"),Ae},_addRouteResultsStagesValuesElement:function(Ae){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<Ae.length;e++){var t=Ae[e].childNodes[0].id,Oe=SelectorID.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+Oe)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var ke=document.createElement("div");ke.className="GProuteResultsStages";var Be=document.createElement("div");Be.className="GProuteResultStageLabel",Be.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+Oe)).innerHTML+" :",ke.appendChild(Be);var Ue=document.createElement("div");Ue.className="GProuteResultStageValue";var je=document.getElementById(this._addUID("GPlocationOriginCoords_"+Oe)),We=je.value,Qe=je.className==="GPelementVisible gpf-visible";We!==null&&We!==""&&Qe?Ue.innerHTML=We:Ue.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+Oe)).value,ke.appendChild(Ue),Ue.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(ke)}}},_createRouteResultsElement:function(){var Ae=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var Oe=document.createElement("div");Oe.id=this._addUID("GProuteResultsMode");var ke=document.createElement("select");ke.id=this._addUID("GProuteResultsComputationSelect"),ke.className="GPselect gpf-select fr-select",ke.addEventListener("change",function(Qe){Ae.onRouteModeComputationChangeAndRun(Qe)});for(var Be=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],Ue=0;Ue<Be.length;Ue++){var je=document.createElement("option");je.value=Be[Ue].code,je.text=Be[Ue].label,ke.appendChild(je)}Oe.appendChild(ke),e.appendChild(Oe);var We=document.createElement("div");return We.id=this._addUID("GProuteResultsNew"),We.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",We.title="Modifier le calcul",We.addEventListener("click",function(Qe){document.getElementById(Ae._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(Ae._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",Ae.onShowRouteResultsNewClick(Qe)}),e.appendChild(We),e},_addRouteResultsValuesElement:function(Ae,e,t){var Oe=document.getElementById(this._addUID("GProuteResultsValues"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);var ke=document.createElement("div");ke.className="GProuteResultsValue";var Be=document.createElement("label");Be.className="GProuteResultsValueLabel",Be.innerHTML="Distance :",ke.appendChild(Be);var Ue=0,je=parseInt(Ae/1e3,10);if(!je)Ue=Math.round(Ae)+" m";else{var We=Math.round(Ae);We=We/1e3,Ue=We+" km"}var Qe=document.createElement("div");Qe.id=this._addUID("GProuteResultsValueDist"),Qe.innerHTML=Ue,ke.appendChild(Qe),Oe.appendChild(ke);var Cn=document.createElement("div");Cn.className="GProuteResultsValue";var An=document.createElement("label");An.className="GProuteResultsValueLabel",An.innerHTML="Durée :",Cn.appendChild(An);var En=document.createElement("div");return En.id=this._addUID("GProuteResultsValueDist"),En.innerHTML=t(e),Cn.appendChild(En),Oe.appendChild(Cn),Oe},_createRouteShowResultsDetailsElement:function(){var Ae=document.createElement("div");if(Ae.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",Ae.appendChild(e)}var t=document.createElement("input");t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",Ae.appendChild(t);var Oe=document.createElement("label");if(Oe.className="gpf-label fr-label",Oe.htmlFor=this._addUID("GProuteResultsShowDetails"),Oe.innerHTML="Afficher le détail",Ae.appendChild(Oe),!checkDsfr()){var ke=document.createElement("label");ke.htmlFor=this._addUID("GProuteResultsShowDetails"),ke.innerHTML="Masquer le détail",Ae.appendChild(ke);var Be=document.createElement("div");Be.className="GPfakeBorder",Ae.appendChild(Be)}return Ae},_createRouteResultsDetailsElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GProuteResultsDetails"),Ae},_addRouteResultsDetailsElement:function(Ae,e){var t=this,Oe=document.getElementById(this._addUID("GProuteResultsDetails"));if(Oe.childElementCount)for(;Oe.firstChild;)Oe.removeChild(Oe.firstChild);for(var ke=0,Be=0,Ue=0;Ue<Ae.length;Ue++){var je=Ue+1,We=Ae[Ue],Qe=document.createElement("div");Qe.className="GProuteResultsDetailsNumber",Qe.innerHTML=je+".",Oe.appendChild(Qe),Be+=parseFloat(We.duration),ke+=parseFloat(We.distance);var Cn=0,An=parseInt(ke/1e3,10);if(!An)Cn=Math.round(ke)+" m";else{var En=Math.round(ke);En=En/1e3,Cn=En+" km"}var Sn=document.createElement("div");Sn.className="GProuteResultsDetailsInstruction",Sn.id=this._addUID("GProuteResultsDetailsInstruction_"+je),Sn.title="distance : "+Cn+" / temps : "+e(Be),Sn.innerHTML=We.instruction,Sn.addEventListener("mouseover",function(Tn){t.onRouteResultsDetailsMouseOver(Tn)}),Sn.addEventListener("mouseout",function(Tn){t.onRouteResultsDetailsMouseOut(Tn)}),Sn.addEventListener("click",function(Tn){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(Tn)}),Oe.appendChild(Sn)}return Oe},_createRoutePanelFormPointElement:function(Ae,e,t){var Oe=this,ke=document.createElement("div");ke.id="GProutePoint"+Ae,ke.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Be=document.createElement("label");Be.id="GProuteOriginLabel"+Ae,Be.htmlFor="GProuteOrigin"+Ae,Be.innerHTML=e,Be.addEventListener("click",function(){var Cn=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+Cn).value="";for(var An=1;An<8;An++)document.getElementById("GProutePoint"+An).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Cn).checked=!1,document.getElementById("GProuteOrigin"+Cn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Cn).className="GPelementHidden gpf-hidden"}),ke.appendChild(Be);var Ue=document.createElement("input");Ue.id="GProuteOrigin"+Ae,Ue.className="GPelementVisible gpf-visible",Ue.type="text",Ue.placeholder="Saisir une adresse, un lieu...",Ue.addEventListener("keyup",function(Cn){var An=Cn.which||Cn.keyCode;if(!(An===13||An===10)){var En=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+En).value.length>2?document.getElementById("GProuteAutoCompleteList"+En).style.display="block":document.getElementById("GProuteAutoCompleteList"+En).style.display="none",Oe.onAutoCompleteSearchText(Cn)}}),Ue.addEventListener("blur",function(){var Cn=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+Cn).style.display="none"}),ke.appendChild(Ue);var je=document.createElement("input");je.id="GProuteOriginCoords"+Ae,je.className="GPelementHidden gpf-hidden",je.type="text",je.disabled=!0,ke.appendChild(je);var We=document.createElement("input");We.id="GProuteOriginPointer"+Ae,We.type="checkbox",ke.appendChild(We);var Qe=document.createElement("label");return Qe.id="GProuteOriginPointerImg"+Ae,Qe.htmlFor="GProuteOriginPointer"+Ae,Qe.className="GProuteOriginPointerImg",Qe.title="Pointer un lieu sur la carte",Qe.addEventListener("click",function(Cn){Cn.preventDefault(),Cn.stopPropagation();var An=this.id.charAt(this.id.length-1),En;for(En=1;En<8;En++)An!==En&&(document.getElementById("GProuteOriginPointer"+En).checked=!1,document.getElementById("GProuteOriginCoords"+En).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+En).value="",document.getElementById("GProuteOrigin"+En).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+En).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+An).checked){for(document.getElementById("GProuteOriginCoords"+An).value="",En=1;En<8;En++)document.getElementById("GProutePoint"+En).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+An).checked=!1,document.getElementById("GProuteOrigin"+An).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+An).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+An).value="Pointer un lieu sur la carte",En=1;En<8;En++)An===En?document.getElementById("GProutePoint"+En).style.display="flex":document.getElementById("GProutePoint"+En).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+An).checked=!0,document.getElementById("GProuteOrigin"+An).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+An).className="GPelementVisible gpf-visible"}Oe.onRouteMapPointClick(Cn)}),ke.appendChild(Qe),ke},_createRoutePanelFormRemoveStageElement:function(Ae){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+Ae,t.className="GProuteStageRemove",t.title="Supprimer l'étape",Ae!==1&&Ae!==7&&t.addEventListener("click",function(Oe){var ke=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+ke).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+ke).value="",document.getElementById("GProuteOrigin"+ke).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+ke).value="",document.getElementById("GProuteOriginCoords"+ke).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(Oe)}),t},_createRoutePanelFormAddStageElement:function(){var Ae=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(t){for(var Oe=1,ke=0,Be=2;Be<7;Be++)document.getElementById("GProutePoint"+Be).className==="GPflexInput GProuteStageFlexInputHidden"?Oe===1&&(Oe=Be):ke++;Oe<7&&(document.getElementById("GProutePoint"+Oe).className="GPflexInput GProuteStageFlexInput"),ke===4&&(document.getElementById("GProuteStageAdd").style.display="none"),Ae.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(Ae){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+Ae,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+Ae).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(Oe){e.onAutoCompletedResultsItemClick(Oe),document.getElementById("GProuteAutoCompleteList"+Ae).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(Ae,e,t){var Oe=document.getElementById("GProuteAutoCompleteList"+e),ke=document.createElement("div");ke.id="AutoCompletedLocation"+t,ke.className="GPautoCompleteProposal",ke.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(Ae),Oe.appendChild(ke)},_createRoutePanelFormModeChoiceTransportElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var Oe=document.createElement("label");Oe.className="GProuteModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de déplacement",t.appendChild(Oe);var ke=document.createElement("div");ke.className="gpf-radio-btn-group";for(var Be=0;Be<Ae.length;Be++){var Ue=Ae[Be],je=document.createElement("div");if(je.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",Ue==="Voiture"){var We=document.createElement("input");We.id=this._addUID("GProuteTransportCar"),We.type="radio",We.name="GProuteTransport",We.value="Voiture",Be===0&&(We.checked=!0),We.addEventListener?We.addEventListener("change",function(En){e.onRouteModeTransportChange(En)}):We.attachEvent&&We.attachEvent("onchange",function(En){e.onRouteModeTransportChange(En)}),je.appendChild(We);var Qe=document.createElement("label");Qe.className="GProuteTransportImg gpf-label fr-label",Qe.htmlFor=this._addUID("GProuteTransportCar"),Qe.title="Voiture",Qe.innerHTML="Voiture",je.appendChild(Qe)}if(Ue==="Pieton"){var Cn=document.createElement("input");Cn.id=this._addUID("GProuteTransportPedestrian"),Cn.type="radio",Cn.name="GProuteTransport",Cn.value="Pieton",Be===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(En){e.onRouteModeTransportChange(En)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(En){e.onRouteModeTransportChange(En)}),je.appendChild(Cn);var An=document.createElement("label");An.className="GProuteTransportImg gpf-label fr-label",An.htmlFor=this._addUID("GProuteTransportPedestrian"),An.title="Piéton",An.innerHTML="Piéton",je.appendChild(An)}ke.appendChild(je)}return t.appendChild(ke),t},_createRoutePanelFormModeChoiceComputeElement:function(){var Ae=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var t=document.createElement("label");t.className="GProuteComputationLabel gpf-label fr-label",t.innerHTML="Mode de calcul",e.appendChild(t);var Oe=document.createElement("div");Oe.className="gpf-radio-btn-group";var ke=document.createElement("div");ke.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GProuteComputationFastest"),Be.type="radio",Be.name="GProuteComputation",Be.value="fastest",Be.checked=!0,Be.addEventListener?Be.addEventListener("change",function(Cn){Ae.onRouteModeComputationChange(Cn)}):Be.attachEvent&&Be.attachEvent("onchange",function(Cn){Ae.onRouteModeComputationChange(Cn)}),ke.appendChild(Be);var Ue=document.createElement("label");Ue.className="gpf-label fr-label",Ue.htmlFor=this._addUID("GProuteComputationFastest"),Ue.title="Plus rapide",Ue.innerHTML="Plus rapide",ke.appendChild(Ue),Oe.appendChild(ke);var je=document.createElement("div");je.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var We=document.createElement("input");We.id=this._addUID("GProuteComputationShortest"),We.type="radio",We.name="GProuteComputation",We.value="shortest",We.addEventListener?We.addEventListener("change",function(Cn){Ae.onRouteModeComputationChange(Cn)}):We.attachEvent&&We.attachEvent("onchange",function(Cn){Ae.onRouteModeComputationChange(Cn)}),je.appendChild(We);var Qe=document.createElement("label");return Qe.className="gpf-label fr-label",Qe.htmlFor=this._addUID("GProuteComputationShortest"),Qe.title="Plus court",Qe.innerHTML="Plus court",je.appendChild(Qe),Oe.appendChild(je),e.appendChild(Oe),e},_createShowRouteExclusionsPictoElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowRouteExclusionsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowRouteExclusionsClick(Oe)}),e},_createRoutePanelFormExclusionsElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GProuteExclusions"),Ae.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autorisés",Ae.appendChild(e),Ae},_createRoutePanelFormExclusionOptionsElement:function(Ae){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in Ae)if(Ae.hasOwnProperty(Oe)){var ke=Ae[Oe];switch(Oe){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GProuteExclusionsToll"),Be.type="checkbox",Be.value="Toll",Be.name="Peage",Be.checked=!ke,Be.addEventListener?Be.addEventListener("change",function(An){e.onRouteExclusionsChange(An)}):Be.attachEvent&&Be.attachEvent("onchange",function(An){e.onRouteExclusionsChange(An)}),t.appendChild(Be);var Ue=document.createElement("label");Ue.className="GProuteExclusionsOption",Ue.htmlFor=this._addUID("GProuteExclusionsToll"),Ue.innerHTML="Péages",t.appendChild(Ue);break;case"tunnel":var je=document.createElement("input");je.id=this._addUID("GProuteExclusionsTunnel"),je.type="checkbox",je.value="Tunnel",je.name="Tunnel",je.checked=!ke,je.addEventListener?je.addEventListener("change",function(An){e.onRouteExclusionsChange(An)}):je.attachEvent&&je.attachEvent("onchange",function(An){e.onRouteExclusionsChange(An)}),t.appendChild(je);var We=document.createElement("label");We.className="GProuteExclusionsOption",We.htmlFor=this._addUID("GProuteExclusionsTunnel"),We.innerHTML="Tunnels",t.appendChild(We);break;case"bridge":var Qe=document.createElement("input");Qe.id=this._addUID("GProuteExclusionsBridge"),Qe.type="checkbox",Qe.value="Bridge",Qe.name="Ponts",Qe.checked=!ke,Qe.addEventListener?Qe.addEventListener("change",function(An){e.onRouteExclusionsChange(An)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(An){e.onRouteExclusionsChange(An)}),t.appendChild(Qe);var Cn=document.createElement("label");Cn.className="GProuteExclusionsOption",Cn.htmlFor=this._addUID("GProuteExclusionsBridge"),Cn.innerHTML="Ponts",t.appendChild(Cn);break}}return t},_createRouteSubmitFormElement:function(){var Ae=document.createElement("input");return Ae.id=this._addUID("GProuteSubmit"),Ae.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",Ae.type="submit",Ae.value="Calculer l'itinéraire",Ae},_createRouteFormResetElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Ae.onRouteResetClick(t)}),e}},logger$o=LoggerByDefault.getLogger("route"),Route=class Yf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Yf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$o.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$o.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$o.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let Oe=0;Oe<this._currentPoints.length;Oe++){const ke=this._currentPoints[Oe];e.push(ke.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<e.points.length;t++){const je=e.points[t];je&&this._currentPoints[t].setCoordinate(je,"EPSG:4326")}for(var Oe=0;Oe<this._currentPoints.length;Oe++){var ke=this._currentPoints[Oe];if(ke.getCoordinate()){var Be=Oe+1+"-"+this._uid,Ue=ke.getCoordinate()[1].toFixed(4)+" / "+ke.getCoordinate()[0].toFixed(4);document.getElementById("GPlocationOriginCoords_"+Be).value=Ue,document.getElementById("GPlocationOrigin_"+Be).value=Ue,Oe>0&&Oe<6&&(document.getElementById("GPlocationPoint_"+Be).className="GPflexInput GPelementHidden gpf-flex gpf-hidden ")}}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let Sn=0;Sn<this._currentPoints.length;Sn++){const Tn=this._currentPoints[Sn];var e=Sn+1,t=Tn.getCoordinate();if(t){var Oe=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);Oe.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),Sn>0&&Sn<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var ke=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(ke);var Be;this._currentTransport==="Pieton"?(Be=document.getElementById("GProuteTransportPedestrian-"+this._uid),Be&&(Be.checked="true")):(Be=document.getElementById("GProuteTransportCar-"+this._uid),Be&&(Be.checked="true"));var Ue=document.getElementById("GProuteComputationSelect-"+this._uid);Ue&&(Ue.value=this._currentComputation);var je=document.getElementById("GProuteExclusionsToll-"+this._uid);je&&(this._currentExclusions.indexOf("toll")!==-1?je.checked=!1:je.checked=!0);var We=document.getElementById("GProuteExclusionsTunnel-"+this._uid);We&&(this._currentExclusions.indexOf("tunnel")!==-1?We.checked=!1:We.checked=!0);var Qe=document.getElementById("GProuteExclusionsBridge-"+this._uid);Qe&&(this._currentExclusions.indexOf("bridge")!==-1?Qe.checked=!1:Qe.checked=!0);var Cn=this._currentRouteInformations.totalDistance,An=this._currentRouteInformations.totalTime,En=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);En&&this._fillRouteResultsDetailsContainer(Cn,An,En),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var t={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(logger$o.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else logger$o.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var Oe=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(Oe);var ke=this._panelRouteContainer=this._createRoutePanelElement(),Be=this._createRoutePanelDivElement();ke.appendChild(Be);var Ue=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Be.appendChild(Ue);var je=this._formRouteContainer=this._createRoutePanelFormElement();je.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var We=this._createRoutePanelFormPointsElement(e),Qe=0;Qe<We.length;Qe++)je.appendChild(We[Qe]);je.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),je.appendChild(this._showRouteExclusionsElement);var Cn=this._createRoutePanelFormExclusionsElement();Cn.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),je.appendChild(Cn);var An=this._createRoutePanelFooterElement();if(je.appendChild(An),!checkDsfr()){var En=this._createRouteFormResetElement();An.appendChild(En)}var Sn=this._createRouteSubmitFormElement();An.appendChild(Sn),Be.appendChild(je);var Tn=this._resultsRouteContainer=this._createRoutePanelResultsElement();Be.appendChild(Tn);var Dn=this._createDrawingButtonsPluginDiv();Be.appendChild(Dn);var ti=this._waitingContainer=this._createRouteWaitingElement();return Be.appendChild(ti),t.appendChild(ke),t.addEventListener&&t.addEventListener("click",ni=>this._hideRouteSuggestedLocations(ni)),t}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var Oe=this.options.routeOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(Oe),t}_createRoutePanelFormPointsElement(e){var t=[],Oe=1,ke=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(ke.setMap(e),this._addFormPointsEventListeners(ke),t.push(this._createRoutePanelFormPointLabel("Départ")),t.push(ke._container),this._currentPoints.push(ke),Oe=2;Oe<7;Oe++){var Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Be.setMap(e),this._addFormPointsEventListeners(Be),t.push(this._createRoutePanelFormPointLabel("Étape",!1)),t.push(Be._container),this._currentPoints.push(Be)}var Ue=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:Oe,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return Ue.setMap(e),this._addFormPointsEventListeners(Ue),t.push(this._createRoutePanelFormPointLabel("Arrivée")),t.push(Ue._container),this._currentPoints.push(Ue),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{logger$o.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{logger$o.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){logger$o.log("onRouteComputationSubmit",e);var t=this._currentPoints,Oe;if(t[0]&&t[0].getCoordinate){var ke=t[0].getCoordinate();Oe={x:ke[0],y:ke[1]},logger$o.log("start",Oe)}var Be,Ue=t[t.length-1];if(Ue&&Ue.getCoordinate){var je=Ue.getCoordinate();Be={x:je[0],y:je[1]},logger$o.log("end",Be)}for(var We=[],Qe=1;Qe<t.length-1;Qe++)if(t[Qe]&&t[Qe].getCoordinate){var Cn=t[Qe].getCoordinate();if(Cn){var An={x:Cn[0],y:Cn[1]};logger$o.log("step",An),We.push(An)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var En=this.options.routeOptions,Sn;En.resource?Sn=En.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(Sn="bdtopo-valhalla");var Tn=En.protocol||"XHR",Dn=En.timeOut||0;Tn==="JSONP"&&Dn===0&&(Dn=15e3);var ti=En.onFailure!==null&&typeof En.onFailure=="function",ni=En.onSuccess!==null&&typeof En.onSuccess=="function",ii=this;this._requestRouting({startPoint:Oe,endPoint:Be,viaPoints:We,graph:En.graph||this._currentTransport,routePreference:En.routePreference||this._currentComputation,exclusions:En.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:Dn,protocol:Tn,resource:Sn,onSuccess:function(si){logger$o.log(si),si&&ii._fillRouteResultsDetails(si),ni&&En.onSuccess.call(ii,si)},onFailure:function(si){ii._hideWaitingContainer(),ii._clearRouteResultsDetails(),logger$o.log(si.message),ti&&En.onFailure.call(ii,si)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var Oe=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=Oe.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t),!this._geojsonSections&&!this._waiting&&this._clear();var Oe=this._showRouteButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var t=e.target.value;t&&(logger$o.log(t),this._currentComputation=t)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){logger$o.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,Oe=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var ke=!1,Be=null,Ue=0;Ue<this._currentExclusions.length;Ue++)this._currentExclusions[Ue]===t&&(Be=Ue,ke=!0);!ke&&!Oe&&this._currentExclusions.push(t),ke&&Oe&&this._currentExclusions.splice(Be,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.dispatchEvent("route:newresults")}onRouteResultsDetailsMouseOver(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var ke=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));ke.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var ke=this._geojsonSections.getSource().getFeatureById(parseInt(Oe,10));ke.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$o.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,Oe=e.totalTime,ke=this._simplifiedInstructions(e.routeInstructions);ke&&this._fillRouteResultsDetailsContainer(t,Oe,ke);var Be=e.routeGeometry;Be&&this._fillRouteResultsDetailsGeometry(Be,this._defaultFeatureStyle),ke&&ke[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(ke,this._defaultFeatureStyle);var Ue=e.bbox;if(Ue){var je=this.getMap(),We=[Ue.left,Ue.bottom,Ue.right,Ue.top],Qe=je.getView().getProjection().getCode();Qe!=="EPSG:4326"&&(We=transformExtent(We,"EPSG:4326",Qe)),je.getView().fit(We,je.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,Oe){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(Oe,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var Oe=this.getMap();if(e){var ke={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Be=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),Ue=Be.readFeatures(ke,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:Ue}),style:t,title:"Mon Itinéraire"}),Oe.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var Oe=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var ke=0;ke<e.length;ke++){for(var Be=e[ke],Ue=ke+1,je=Be.geometry.coordinates,We=0;We<je.length;We++)typeof je[We][0]=="string"&&(je[We][0]=parseFloat(je[We][0]),je[We][1]=parseFloat(je[We][1]));this._geojsonObject.features.push({type:"Feature",geometry:Be.geometry,properties:{popupContent:"("+Ue+") distance : "+this._convertDistance(Be.distance)+" / temps : "+this._convertSecondsToTime(Be.duration)},id:Ue})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var Qe=1;Qe<this._currentPoints.length-1;Qe++)if(this._currentPoints[Qe]&&this._currentPoints[Qe].getCoordinate){var Cn=this._currentPoints[Qe].getCoordinate();Cn&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:Cn},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var An=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),En=this.getMap().getView().getProjection().getCode(),Sn=An.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:En});this._geojsonSections=new VectorLayer({source:new VectorSource({features:Sn}),style:t,opacity:.9,title:"Mon Itinéraire"});var Tn;this._currentTransport==="Pieton"?(Tn="piéton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(Tn="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),Oe.addLayer(this._geojsonSections),Oe.getControls().forEach(Dn=>{if(Dn instanceof LayerSwitcher){var ti=this._geojsonSections.gpLayerId;Dn._layers[ti].title===ti&&Dn.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+Tn+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",Dn=>this._onResultsFeatureMouseOver(Dn)),Oe.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",Dn=>this._onResultsFeatureSelect(Dn)),Oe.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],Oe=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var ke=e.deselected[0],Be=document.getElementById("GProuteResultsDetailsInstruction_"+ke.getId()+"-"+this._uid);Be&&Be.classList&&Be.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var Oe=document.getElementById("GProuteExclusionsToll-"+this._uid);Oe&&(this._currentExclusions.indexOf("toll")!==-1?Oe.checked=!1:Oe.checked=!0);var ke=document.getElementById("GProuteExclusionsTunnel-"+this._uid);ke&&(this._currentExclusions.indexOf("tunnel")!==-1?ke.checked=!1:ke.checked=!0);var Be=document.getElementById("GProuteExclusionsBridge-"+this._uid);Be&&(this._currentExclusions.indexOf("bridge")!==-1?Be.checked=!1:Be.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],Oe=0;Oe<e.length;Oe++)e[Oe].id.indexOf(this._uid)!==-1&&t.push(e[Oe]);for(var ke=1;ke<t.length-1;ke++){var Be=t[ke].classList;if(Be.length!==0)for(var Ue=0;Ue<Be.length;Ue++)Be[Ue]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(ke+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,Oe=0;Oe<this._currentPoints.length;Oe++)Oe!==parseInt(t,10)&&this._currentPoints[Oe]._hideSuggestedLocation();else for(var ke=0;ke<this._currentPoints.length;ke++)this._currentPoints[ke]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],Oe=e[0];e.length===1&&t.push(Oe);for(var ke=1;ke<e.length;ke++){var Be=e[ke];if(Be.instruction===Oe.instruction){Oe.distance=(parseFloat(Be.distance)+parseFloat(Oe.distance)).toString(),Oe.duration=(parseFloat(Be.duration)+parseFloat(Oe.duration)).toString();for(var Ue=1;Ue<Be.geometry.coordinates.length;Ue++)Oe.geometry.coordinates.push(Be.geometry.coordinates[Ue])}else t.push(Oe),Oe=Be,ke===e.length-1&&(t.push(Be),Oe=null)}return logger$o.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var Oe=Math.floor(e/(60*60)),ke=e%(60*60),Be=Math.floor(ke/60);return Oe&&(t=Oe+"h "),t+=Be+" min",t}_convertDistance(e){var t="",Oe=parseInt(e/1e3,10);return Oe?t=Oe+" km":t=parseInt(e,10)+" m",t}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPisochron"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowIsoPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowIsoPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowIsoPanelClick(Oe)}),e},_createIsoPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPisochronPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createIsoPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createDrawingButtonsPluginDiv:function(){var Ae=document.createElement("div");return Ae.className="container-buttons-plugin fr-mx-2w",Ae},_createIsoPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPisochronPanelClose"),Oe.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowIsochronPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowIsochronPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createIsoPanelFormElement:function(){var Ae=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Ae.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPisochronCalcWaitingContainer"),Ae.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createIsoPanelFooterElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Ae},_createIsoPanelFormPointLabel:function(){var Ae=document.createElement("p");return Ae.id=this._addUID("GPisochronPointLabelP"),Ae.className="gpf-label fr-label",Ae.innerHTML="Départ",Ae},_createIsoPanelFormTypeChoiceElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPisochronChoice"),Ae.className="fr-mt-2w",Ae},_createIsoPanelFormTypeChoiceChronElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltChron"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!Ae,Oe.addEventListener?Oe.addEventListener("change",function(Ue){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(Ue)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),Oe.value="isochron",t.appendChild(Oe);var ke=document.createElement("label");ke.className="GPisochronChoiceAltImg gpf-label fr-label",ke.htmlFor=this._addUID("GPisochronChoiceAltChron"),ke.innerHTML="Durée",ke.title="Durée",t.appendChild(ke);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltChronTxt"),Be.className="gpf-hidden",Be.innerHTML="Durée",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(Be),t},_createIsoPanelFormTypeChoiceDistElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronChoiceAltDist"),Oe.name="GPisochronChoiceMode",Oe.type="radio",Oe.checked=!!Ae,Oe.addEventListener?Oe.addEventListener("change",function(Ue){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(Ue)},!1):Oe.attachEvent&&Oe.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),Oe.value="isodistance",t.appendChild(Oe);var ke=document.createElement("label");ke.className="GPisochronChoiceAltImg gpf-label fr-label",ke.htmlFor=this._addUID("GPisochronChoiceAltDist"),ke.innerHTML="Distance",ke.title="Distance",t.appendChild(ke);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltDistTxt"),Be.className="gpf-hidden",Be.innerHTML="Distance",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(Be),t},_createIsoPanelFormLabelIsochronElement:function(Ae){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=Ae?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=Ae?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueChronInput1"),Oe.className="gpf-input fr-input",Oe.min="0",Oe.step="1",Oe.value="0",Oe.type="number",Oe.title="Temps",Oe.addEventListener?Oe.addEventListener("change",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(je)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(je)}),t.appendChild(Oe);var ke=document.createElement("label");ke.innerHTML="h",ke.className="gpf-label fr-label",t.appendChild(ke);var Be=document.createElement("input");Be.id=this._addUID("GPisochronValueChronInput2"),Be.className="gpf-input fr-input",Be.min="0",Be.max="59",Be.step="1",Be.value="0",Be.type="number",Be.title="Heures",Be.addEventListener?Be.addEventListener("change",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(je)}):Be.attachEvent&&Be.attachEvent("onchange",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(je)}),t.appendChild(Be);var Ue=document.createElement("label");return Ue.innerHTML="min",Ue.className="gpf-label fr-label",t.appendChild(Ue),t},_createIsoPanelFormLabelIsodistanceElement:function(Ae){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=Ae?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=Ae?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var Oe=document.createElement("input");Oe.id=this._addUID("GPisochronValueDistInput"),Oe.className="gpf-input fr-input fr-ml-1w",Oe.min="0",Oe.step="any",Oe.value="0",Oe.type="number",Oe.title="Distance",Oe.addEventListener?Oe.addEventListener("change",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}),t.appendChild(Oe);var ke=document.createElement("label");return ke.innerHTML="km",ke.className="gpf-label fr-label",t.appendChild(ke),t},_createIsoPanelFormModeChoiceTransportElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var Oe=document.createElement("label");Oe.className="GPisochronModeLabel gpf-label fr-label",Oe.innerHTML="Choisir un mode de déplacement",t.appendChild(Oe);for(var ke=document.createElement("div"),Be=0;Be<Ae.length;Be++){var Ue=Ae[Be],je=document.createElement("div");if(je.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",Ue==="Voiture"){var We=document.createElement("input");We.id=this._addUID("GPisochronTransportCar"),We.type="radio",We.name="GPisochronTransport",Be===0&&(We.checked=!0),We.addEventListener?We.addEventListener("change",function(En){e.onIsoModeTransportChange(En)}):We.attachEvent&&We.attachEvent("onchange",function(En){e.onIsoModeTransportChange(En)}),We.value="Voiture",je.appendChild(We);var Qe=document.createElement("label");Qe.className="GPisochronTransportImg gpf-label fr-label",Qe.htmlFor=this._addUID("GPisochronTransportCar"),Qe.title="Voiture",Qe.innerHTML="Voiture",je.appendChild(Qe)}if(Ue==="Pieton"){var Cn=document.createElement("input");Cn.id=this._addUID("GPisochronTransportPedestrian"),Cn.type="radio",Cn.name="GPisochronTransport",Be===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(En){e.onIsoModeTransportChange(En)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(En){e.onIsoModeTransportChange(En)}),Cn.value="Pieton",je.appendChild(Cn);var An=document.createElement("label");An.className="GPisochronTransportImg gpf-label fr-label",An.htmlFor=this._addUID("GPisochronTransportPedestrian"),An.title="Piéton",An.innerHTML="Piéton",je.appendChild(An)}ke.appendChild(je)}return t.appendChild(ke),t},_createIsoPanelFormModeChoiceDirectionElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice"),t.className="fr-my-2w";var Oe=document.createElement("label");Oe.innerHTML="Définir un sens de parcours",Oe.className="fr-label",t.appendChild(Oe);var ke=document.createElement("select");ke.id=this._addUID("GPisochronDirectionSelect"),ke.className="GPselect gpf-select fr-select",ke.title="Sens de parcours",ke.addEventListener("change",function(Qe){e.onIsoModeDirectionChange(Qe)});for(var Be=0;Be<Ae.length;Be++){var Ue=Ae[Be];if(Ue.toLowerCase()==="departure"){var je=document.createElement("option");Be===0&&(je.selected="selected"),je.value="departure",je.text="Départ",ke.appendChild(je)}if(Ue.toLowerCase()==="arrival"){var We=document.createElement("option");Be===0&&(We.selected="selected"),We.value="arrival",We.text="Arrivée",ke.appendChild(We)}}return t.appendChild(ke),t},_createShowIsoExclusionsPictoElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowIsoSettingsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){Oe.preventDefault();var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowIsoSettingsClick(Oe)}),e},_createIsoPanelFormExclusionsElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",Ae.appendChild(e),Ae},_createIsoPanelFormExclusionOptionsElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var Oe in Ae)if(Ae.hasOwnProperty(Oe)){var ke=Ae[Oe];switch(Oe){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GPisoExclusionsToll"),Be.type="checkbox",Be.name="Péages",Be.checked=!ke,Be.addEventListener?Be.addEventListener("change",function(An){e.onIsoExclusionsChange(An)}):Be.attachEvent&&Be.attachEvent("onchange",function(An){e.onIsoExclusionsChange(An)}),Be.value="Toll",t.appendChild(Be);var Ue=document.createElement("label");Ue.className="GPisoExclusionsOption",Ue.htmlFor=this._addUID("GPisoExclusionsToll"),Ue.innerHTML="Péages",t.appendChild(Ue);break;case"tunnel":var je=document.createElement("input");je.id=this._addUID("GPisoExclusionsTunnel"),je.type="checkbox",je.name="Tunnel",je.checked=!ke,je.addEventListener?je.addEventListener("change",function(An){e.onIsoExclusionsChange(An)}):je.attachEvent&&je.attachEvent("onchange",function(An){e.onIsoExclusionsChange(An)}),je.value="Tunnel",t.appendChild(je);var We=document.createElement("label");We.className="GPisoExclusionsOption",We.htmlFor=this._addUID("GPisoExclusionsTunnel"),We.innerHTML="Tunnels",t.appendChild(We);break;case"bridge":var Qe=document.createElement("input");Qe.id=this._addUID("GPisoExclusionsBridge"),Qe.type="checkbox",Qe.name="Ponts",Qe.checked=!ke,Qe.addEventListener?Qe.addEventListener("change",function(An){e.onIsoExclusionsChange(An)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(An){e.onIsoExclusionsChange(An)}),Qe.value="Bridge",t.appendChild(Qe);var Cn=document.createElement("label");Cn.className="GPisoExclusionsOption",Cn.htmlFor=this._addUID("GPisoExclusionsBridge"),Cn.innerHTML="Ponts",t.appendChild(Cn);break}}return t},_createIsoSubmitFormElement:function(){var Ae=document.createElement("input");return Ae.id=this._addUID("GPisochronSubmit"),Ae.className="GPsubmit gpf-btn fr-btn",Ae.type="submit",Ae.value="Calculer l'isochrone",Ae},_createIsoFormResetElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Ae.onIsoResetClick(t)}),e}},logger$n=LoggerByDefault.getLogger("isocurve"),Isocurve=class Xf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$n.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var Oe=document.getElementById("GPlocationOrigin_1-"+this._uid),ke=document.getElementById("GPlocationOriginCoords_1-"+this._uid);ke.value=e.point,Oe.value=e.point[1].toFixed(4)+" / "+e.point[0].toFixed(4),this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,Oe){this._clear();var ke=this._pictoIsoButton.ariaPressed;ke!=="true"&&this._pictoIsoButton.click();var Be=this.getMap();if(Be){var Ue={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(Ue,Oe),this._originPoint.setCoordinate(e);var je=this._originPoint.getCoordinate(),We=document.getElementById("GPlocationOrigin_1-"+this._uid);if(We.value=je[0].toFixed(4)+" / "+je[1].toFixed(4),this._currentTransport=Ue.transport,Ue.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=Ue.exclusions,this._currentComputation=Ue.method,Ue.method==="time"){var Qe=t.split(".");this._currentTimeHour=Qe[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Qe[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=Ue.direction,Ue.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var Oe=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(Oe/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((Oe/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$n.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?logger$n.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$n.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piéton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var Oe=this.options.isocurveOptions;Array.isArray(Oe.exclusions)&&(this._currentExclusions=Oe.exclusions)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var Oe=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(Oe);var ke=this._IsoPanelContainer=this._createIsoPanelElement(),Be=this._createIsoPanelDivElement();ke.appendChild(Be);var Ue=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Be.appendChild(Ue);var je=this._formContainer=this._createIsoPanelFormElement();je.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),je.appendChild(this._createIsoPanelFormPointLabel());var We=this._createIsoPanelFormPointElement(e);je.appendChild(We);for(var Qe=!1,Cn=!1,An=this._createIsoPanelFormTypeChoiceElement(),En=0;En<this.options.methods.length;En++)this.options.methods[En]==="time"&&(Qe=En===0,An.appendChild(this._createIsoPanelFormTypeChoiceChronElement(Qe))),this.options.methods[En]==="distance"&&(Cn=En===0,An.appendChild(this._createIsoPanelFormTypeChoiceDistElement(Cn)));if(je.appendChild(An),je.appendChild(this._createIsoPanelFormLabelIsochronElement(Qe)),je.appendChild(this._createIsoPanelFormValueIsochronElement(Qe)),je.appendChild(this._createIsoPanelFormLabelIsodistanceElement(Cn)),je.appendChild(this._createIsoPanelFormValueIsodistanceElement(Cn)),je.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){je.appendChild(this._createShowIsoExclusionsPictoElement());var Sn=this._createIsoPanelFormExclusionsElement();Sn.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),je.appendChild(Sn)}var Tn=this._createIsoPanelFooterElement();if(je.appendChild(Tn),!checkDsfr()){var Dn=this._createIsoFormResetElement();Tn.appendChild(Dn)}var ti=this._submitContainer=this._createIsoSubmitFormElement();Tn.appendChild(ti),Be.appendChild(je);var ni=this._createDrawingButtonsPluginDiv();Be.appendChild(ni);var ii=this._waitingContainer=this._createIsoWaitingElement();return ke.appendChild(ii),t.appendChild(ke),t.addEventListener&&t.addEventListener("click",si=>this._hideIsoSuggestedLocations(si)),t}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var Oe=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=Oe.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$n.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};logger$n.log("origin : ",t);var Oe,ke;if(this._currentComputation.toLowerCase()==="time"){var Be=document.getElementById("GPisochronValueChronInput1-"+this._uid),Ue=parseInt(Be.value,10);isNaN&&isNaN(Ue)&&(Ue=0);var je=document.getElementById("GPisochronValueChronInput2-"+this._uid),We=parseInt(je.value,10);isNaN&&isNaN(We)&&(We=0),Oe=Ue*3600+We*60,logger$n.log("time : "+Oe)}if(this._currentComputation.toLowerCase()==="distance"){var Qe=document.getElementById("GPisochronValueDistInput-"+this._uid);ke=parseFloat(Qe.value)*1e3,logger$n.log("distance : "+ke)}if(!Oe&&!ke){logger$n.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var Cn=this.options.isocurveOptions||{},An=Cn.protocol||"XHR",En=Cn.timeOut||0;An==="JSONP"&&En===0&&(En=15e3);var Sn=Cn.onFailure!==null&&typeof Cn.onFailure=="function",Tn=Cn.onSuccess!==null&&typeof Cn.onSuccess=="function",Dn=this,ti={position:t,graph:Cn.graph||this._currentTransport,exclusions:Cn.exclusions||this._currentExclusions,method:Cn.method||this._currentComputation,smoothing:Cn.smoothing||!0,timeOut:En,protocol:An,resource:Cn.resource,onSuccess:function(ni){logger$n.log(ni),ni&&Dn._drawIsoResults(ni),Tn&&Cn.onSuccess.call(Dn,ni)},onFailure:function(ni){Dn._hideWaitingContainer(),logger$n.log(ni.message),Sn&&Cn.onFailure.call(Dn,ni)}};(this._currentDirection.toLowerCase()==="arrival"||Cn.reverse)&&(ti.reverse=!0),Oe&&(ti.time=Oe),ke&&(ti.distance=ke),this._requestIsoCurve(ti)}onShowIsoPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._pictoIsoButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,Oe=e.target.checked;if(t){for(var ke=!1,Be=null,Ue=0;Ue<this._currentExclusions.length;Ue++)deepEqual(this._currentExclusions[Ue],t.toLowerCase())&&(Be=Ue,ke=!0);!ke&&!Oe&&this._currentExclusions.push(t.toLowerCase()),ke&&Oe&&(this._currentExclusions[Be]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var Oe=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),ke=t.getView().getProjection().getCode(),Be=Oe.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:ke}),We=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Be}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+We});var Ue;if(this._currentTransport==="Pieton"?(Ue="piéton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(Ue="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Be[0]&&Be[0].getGeometry()&&Be[0].getGeometry().getExtent()){var je=Be[0].getGeometry().getExtent();t.getView().fit(je,t.getSize())}var We=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(Qe=>{if(Qe instanceof LayerSwitcher){var Cn=this._geojsonLayer.gpLayerId;Qe._layers[Cn].title===Cn&&Qe.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+We+"/"+Ue+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var Oe=document.getElementById("GPisochronValueDistInput-"+this._uid);Oe&&(Oe.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var ke;this._currentTransport==="Pieton"?(ke=document.getElementById("GPisochronTransportPedestrian-"+this._uid),ke&&(ke.checked="true")):(ke=document.getElementById("GPisochronTransportCar-"+this._uid),ke&&(ke.checked="true"));var Be;this._currentComputation.toLowerCase()==="distance"?(Be=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Be=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var Ue=document.getElementById("GPisochronDirectionSelect-"+this._uid);Ue&&(Ue.value=this._currentDirection),Ue.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var je=document.getElementById("GPisoExclusionsToll-"+this._uid);je&&(this._currentExclusions.indexOf("toll")!==-1?je.checked=!1:je.checked=!0);var We=document.getElementById("GPisoExclusionsTunnel-"+this._uid);We&&(this._currentExclusions.indexOf("tunnel")!==-1?We.checked=!1:We.checked=!0);var Qe=document.getElementById("GPisoExclusionsBridge-"+this._uid);Qe&&(this._currentExclusions.indexOf("bridge")!==-1?Qe.checked=!1:Qe.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(Ae,e){if(Ae===e)return!0;if(typeof Ae=="object"&&Ae!=null&&typeof e=="object"&&e!=null){if(Object.keys(Ae).length!==Object.keys(e).length)return!1;for(var t in Ae)if(e.hasOwnProperty(t)){if(!deepEqual(Ae[t],e[t]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPreverseGeocoding"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowReverseGeocodingPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowReverseGeocodingClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowReverseGeocodingClick(Oe)}),e},_createReverseGeocodingWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),Ae.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createReverseGeocodingResultsPanelElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPreverseGeocodingResultsPanel"),Ae.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",Ae},_createReverseGeocodingResultsListElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPreverseGeocodingResultsList"),Ae.className="gpf-panel__list",Ae.setAttribute("tabindex","0"),Ae},_createReverseGeocodingResultElement:function(Ae,e){var t=this,Oe=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),ke=document.createElement("div");ke.id=this._addUID("GPreverseGeocodedLocation_"+e),ke.setAttribute("tabindex","0"),ke.className="GPautoCompleteProposal gpf-panel__items",ke.innerHTML=Ae,ke.title=Ae,ke.addEventListener?(ke.addEventListener("mouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.addEventListener("focus",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.addEventListener("mouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.addEventListener("blur",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.addEventListener("click",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})):ke.attachEvent&&(ke.attachEvent("onmouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),ke.attachEvent("onmouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),ke.attachEvent("onclick",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})),Oe.appendChild(ke)},_createReverseGeocodingPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPreverseGeocodingPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createReverseGeocodingPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createReverseGeocodingPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader gpf-panel__header fr-modal__header",Ae},_createReverseGeocodingPanelReturnPictoElement:function(){var Ae=this,e=document.createElement("button");if(e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPimportPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline fr-m-1w",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden gpf-visible",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(Ae._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Ae._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Ae._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Ae._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Ae._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Ae.onGPreverseGeocodingReturnPictoClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(Ae._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Ae._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Ae._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Ae._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Ae._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Ae.onGPreverseGeocodingReturnPictoClick(Oe)}),e},_createReverseGeocodingPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ae.id=this._addUID("GPreverseGeocodingHeaderTitle"),Ae.innerHTML="Recherche inverse",Ae},_createReverseGeocodingPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(Oe){Oe.keyCode===13&&document.getElementById(Ae._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(Oe){Oe.keyCode===13&&document.getElementById(Ae._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var Ae=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Ae.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Ae.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var Oe=document.createElement("label");Oe.id="label-recherche-par",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Recherche par",Oe.title="Recherche par",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby","label-recherche-par"),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(Qe){e.onReverseGeocodingTypeChange(Qe)}):ke.attachEvent&&ke.attachEvent("onchange",function(Qe){e.onReverseGeocodingTypeChange(Qe)}),(!Ae||!Array.isArray(Ae))&&(Ae=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Be=0;Be<Ae.length;Be++)switch(Ae[Be]){case"PositionOfInterest":var Ue=document.createElement("option");Ue.value="PositionOfInterest",Ue.text="Lieux/toponymes",ke.appendChild(Ue);break;case"StreetAddress":var je=document.createElement("option");je.value="StreetAddress",je.text="Adresses",ke.appendChild(je);break;case"CadastralParcel":var We=document.createElement("option");We.value="CadastralParcel",We.text="Parcelles cadastrales",ke.appendChild(We);break}return t.appendChild(ke),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(Ae){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var Oe=document.createElement("label");Oe.id="label-delimitation",Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Délimitation",Oe.title="Délimitation",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby","label-delimitation"),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(Qe){e.onReverseGeocodingDelimitationChange(Qe)}):ke.attachEvent&&ke.attachEvent("onchange",function(Qe){e.onReverseGeocodingDelimitationChange(Qe)}),(!Ae||!Array.isArray(Ae))&&(Ae=["Point","Circle","Extent"]);for(var Be=0;Be<Ae.length;Be++)switch(Ae[Be].toLowerCase()){case"point":var Ue=document.createElement("option");Ue.value="point",Ue.text="Pointer un lieu",ke.appendChild(Ue);break;case"circle":var je=document.createElement("option");je.value="circle",je.text="Dessiner un cercle",ke.appendChild(je);break;case"extent":var We=document.createElement("option");We.value="extent",We.text="Dessiner une emprise",ke.appendChild(We);break}return t.appendChild(ke),t},_createReverseGeocodingSubmitFormElement:function(){var Ae=document.createElement("input");return Ae.id=this._addUID("GPreverseGeocodingSubmit"),Ae.className="GPsubmit gpf-btn fr-btn",Ae.type="submit",Ae.value="Rechercher",Ae}},logger$m=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,Oe;if(e.resources){var ke=e.resources;if(Array.isArray(ke)){var Be=["StreetAddress","PositionOfInterest","CadastralParcel"],Ue=[];for(t=0;t<ke.length;t++)Be.indexOf(ke[t])===-1&&(Ue.push(t),logger$m.log("[ReverseGeocode] options.resources : "+ke[t]+" is not a resource for reverse geocode"));if(Ue.length!==0)for(Oe=0;Oe<Ue.length;Oe++)ke.splice(Ue[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.resources' parameter should be an array"),ke=null}if(e.delimitations){var je=e.delimitations;if(Array.isArray(je)){var We=["Circle","Point","Extent"],Qe=[];for(t=0;t<je.length;t++)We.indexOf(je[t])===-1&&(Qe.push(t),logger$m.log("[ReverseGeocode] options.delimitations : "+je[t]+" is not a delimitation for reverse geocode"));if(Qe.length!==0)for(Oe=0;Oe<Qe.length;Oe++)je.splice(Qe[Oe],1)}else logger$m.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),je=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var Oe=document.createElement("button");return Oe.className="gp-styling-button closer",Oe.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(Oe),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var Oe=this._panelContainer=this._createReverseGeocodingPanelElement(),ke=this._createReverseGeocodingPanelDivElement();Oe.appendChild(ke);var Be=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),Ue=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Be.appendChild(Ue);var je=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Be.appendChild(je);var We=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Be.appendChild(We),ke.appendChild(Be);var Qe=this._formContainer=this._createReverseGeocodingPanelFormElement();Qe.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),Qe.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var Cn=this._createReverseGeocodingSubmitFormElement();Qe.appendChild(Cn),ke.appendChild(Qe);var An=this._waitingContainer=this._createReverseGeocodingWaitingElement();ke.appendChild(An);var En=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),Sn=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return En.appendChild(Sn),ke.appendChild(En),e.appendChild(Oe),logger$m.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(Oe=>{if(Oe instanceof LayerSwitcher){var ke=this._inputFeaturesLayer.gpLayerId;Oe._layers[ke].title===ke&&(Oe.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),Oe.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource,geometryFunction:function(t,Oe){const ke=t[0],Be=t[t.length-1],Ue=ke[0]-Be[0],je=ke[1]-Be[1],Qe=Math.min(Math.sqrt(Ue*Ue+je*je),500);return Oe?Oe.setCenterAndRadius(ke,Qe):Oe=new ol.geom.Circle(ke,Qe),Oe}}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry){var Oe=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=Oe,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$m.log("circle radius : ",Oe)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(Oe,ke){ke||(ke=new Polygon([]));var Be=Oe[0],Ue=Oe[1];const je=Be[0]-Ue[0],We=Be[1]-Ue[1],Qe=1e3,Cn=Math.max(-1e3,Math.min(je,Qe)),An=Math.max(-1e3,Math.min(We,Qe));return ke.setCoordinates([[Be,[Be[0],Be[1]-An],[Be[0]-Cn,Be[1]-An],[Be[0]-Cn,Be[1]],Be]]),ke};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",Oe=>{logger$m.log("on drawstart",Oe),this._inputFeatures.clear(),this._onDrawStart(Oe,"polygon")}),this._mapInteraction.on("drawend",Oe=>{logger$m.log("on drawend",Oe),this._onBoxDrawEnd(Oe)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var Oe;if(e.feature&&e.feature.getGeometry){var ke=e.feature.getGeometry();t==="point"&&(Oe=ke.getCoordinates()),t==="circle"&&(Oe=ke.getCenter()),t==="polygon"&&(Oe=ke.getFirstCoordinate())}if(Oe){var Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var Ue=this.getMap();if(!Ue||!Ue.getView())return;Be=Ue.getView().getProjection()}var je=transform$1(Oe,Be,"EPSG:4326");this._requestPosition={lon:je[0],lat:je[1]},logger$m.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],Oe=t[0],ke=t[2],Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var Ue=this.getMap();if(!Ue||!Ue.getView())return;Be=Ue.getView().getProjection()}var je=transform$1(Oe,Be,"EPSG:4326"),We=transform$1(ke,Be,"EPSG:4326"),Qe={};je[0]<We[0]?(Qe.left=je[0],Qe.right=We[0]):(Qe.left=We[0],Qe.right=je[0]),je[1]<We[1]?(Qe.bottom=je[1],Qe.top=We[1]):(Qe.bottom=We[1],Qe.top=je[1]),this._requestGeom={type:"Polygon",coordinates:[[[Qe.left,Qe.top],[Qe.left,Qe.bottom],[Qe.right,Qe.bottom],[Qe.right,Qe.top],[Qe.left,Qe.top]]]},logger$m.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var Oe=t.getTargetElement();e?Oe.style.cursor=e:Oe.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,Oe=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var ke=t.onFailure!==null&&typeof t.onFailure=="function",Be=t.onSuccess!==null&&typeof t.onSuccess=="function",Ue={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(je){je.locations&&(logger$m.log("reverseGeocode results : ",je.locations),Oe._displayGeocodedLocations(je.locations)),Be&&t.onSuccess.call(Oe,je.locations)},onFailure:function(je){Oe._hideWaitingContainer(),Oe._clearResults(),Oe._clearInputFeatures(),Oe._activateMapInteraction(e),logger$m.log(je.message),ke&&t.onFailure.call(Oe,je)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$m.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),Ue.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?Ue.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(Ue.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},Ue.maximumResponses=1):Ue.searchGeometry=this._requestGeom),logger$m.log("reverseGeocode request options : ",Ue),Ue}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var Oe=e[t];logger$m.log(Oe);var ke=this._fillGeocodedLocationDescription(Oe);ke&&ke.length!==0&&this._createReverseGeocodingResultElement(ke,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,Oe="";switch(e.type){case"StreetAddress":t.street&&(Oe+=t.housenumber?t.housenumber+" ":"",Oe+=t.street+", "),Oe+=t.postcode+" "+t.city;break;case"PositionOfInterest":Oe+=t.toponym,t.postcode&&t.postcode.length===1&&(Oe+=", "+t.postcode[0]),Oe+=" ("+t.category.join(",")+")";break;case"CadastralParcel":Oe+=t.id,Oe+=t.city?" ("+t.city+")":"";break;default:Oe+=t.city?t.city:"";break}return Oe}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var Oe=0;Oe<e.length;Oe++)this._addResultFeature(e[Oe],Oe);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var ke=this._resultsFeaturesSource.getExtent();t.getView().fit(ke,t.getSize())}}else{var Be=this._resultsFeatures.item(0),Ue=Be.getGeometry().getCoordinates();t.getView().setCenter(Ue),t.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",We=>this._onResultsFeatureMouseOver(We)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",We=>this._onResultsFeatureSelect(We)),t.addInteraction(this._resultsSelectInteraction);var je="";switch(this._currentGeocodingType){case"StreetAddress":je="adresses";break;case"PositionOfInterest":je="toponymes";break;case"CadastralParcel":je="parcelles cadastrales";break}t.getControls().forEach(We=>{if(We instanceof LayerSwitcher){var Qe=this._resultsFeaturesLayer.gpLayerId;We._layers[Qe].title===Qe&&(We.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+je}),We.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var Oe=this.getMap(),ke=[e.position.lon,e.position.lat];if(ke.length!==0){var Be=Oe.getView(),Ue=Be.getProjection().getCode();Ue!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ue));var je=new Feature({geometry:new Point$1(ke)});je.setStyle(this._resultsDefaultStyle),je.setId(t),je.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(je)}}_fillPopupContent(e){var t="<ul>",Oe=e.placeAttributes;for(var ke in Oe)Oe.hasOwnProperty(ke)&&ke!=="trueGeometry"&&ke!=="extraFields"&&ke!=="houseNumberInfos"&&ke!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+ke.toUpperCase()+" : </span>",t+=Oe[ke],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var Oe=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var ke=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var Oe=e.selected[0];this._popupContent.innerHTML=Oe.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:Oe.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();if(t){Interactions.unset(t);var Oe=this._showReverseGeocodingButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;Oe&&(logger$m.log(Oe),this._currentGeocodingType=Oe)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,Oe=e.target.options[t].value;if(Oe){logger$m.log(Oe),this._currentGeocodingDelimitation=Oe;var ke=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(ke),this._activateMapInteraction(ke)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$m.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1),ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:ke.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));ke.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,Oe=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var ke=this._resultsFeaturesSource.getFeatureById(parseInt(Oe,10));ke.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(Ae){return Ae.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"];function isV13(Ae){return compareVersions(Ae[0].version,"1.3")>=0}const PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),COMMON_CAPABILITY_PARSERS={Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)},CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_CAPABILITY_PARSERS,UserDefinedSymbolization:makeObjectPropertySetter(readUserDefinedSymbolization)}),CAPABILITY_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,COMMON_CAPABILITY_PARSERS);class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return t||null}}const COMMON_SERVICE_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString)},SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,COMMON_SERVICE_PARSERS),SERVICE_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_SERVICE_PARSERS,LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),COMMON_LAYER_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),Layer:makeObjectPropertyPusher(readLayer$1)},LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,SRS:makeObjectPropertyPusher(readString),Extent:makeObjectPropertySetter(readExtent),ScaleHint:makeObjectPropertyPusher(readScaleHint),LatLonBoundingBox:makeObjectPropertySetter((Ae,e)=>readBoundingBox$1(Ae,e,!1)),Layer:makeObjectPropertyPusher(readLayer$1)}),LAYER_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(Ae,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,Ae,e)}function readUserDefinedSymbolization(Ae,e){return{SupportSLD:!!readBooleanString(Ae.getAttribute("UserDefinedSymbolization")),UserLayer:!!readBooleanString(Ae.getAttribute("UserLayer")),UserStyle:!!readBooleanString(Ae.getAttribute("UserStyle")),RemoteWFS:!!readBooleanString(Ae.getAttribute("RemoteWFS"))}}function readBoundingBox$1(Ae,e,t=!0){const Oe=[readDecimalString(Ae.getAttribute("minx")),readDecimalString(Ae.getAttribute("miny")),readDecimalString(Ae.getAttribute("maxx")),readDecimalString(Ae.getAttribute("maxy"))],ke=[readDecimalString(Ae.getAttribute("resx")),readDecimalString(Ae.getAttribute("resy"))],Be={extent:Oe,res:ke};return t&&(isV13(e)?Be.crs=Ae.getAttribute("CRS"):Be.srs=Ae.getAttribute("SRS")),Be}function readEXGeographicBoundingBox(Ae,e){const t=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,Ae,e);if(!t)return;const Oe=t.westBoundLongitude,ke=t.southBoundLatitude,Be=t.eastBoundLongitude,Ue=t.northBoundLatitude;if(!(Oe===void 0||ke===void 0||Be===void 0||Ue===void 0))return[Oe,ke,Be,Ue]}function readCapability(Ae,e){return pushParseAndPop({},isV13(e)?CAPABILITY_PARSERS_V13:CAPABILITY_PARSERS,Ae,e)}function readService(Ae,e){return pushParseAndPop({},isV13(e)?SERVICE_PARSERS_V13:SERVICE_PARSERS,Ae,e)}function readContactInformation(Ae,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,Ae,e)}function readContactPersonPrimary(Ae,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,Ae,e)}function readContactAddress(Ae,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,Ae,e)}function readException(Ae,e){return pushParseAndPop([],EXCEPTION_PARSERS,Ae,e)}function readCapabilityLayer(Ae,e){const t=pushParseAndPop({},isV13(e)?LAYER_PARSERS_V13:LAYER_PARSERS$1,Ae,e);return t.Layer===void 0?Object.assign(t,readLayer$1(Ae,e)):t}function readLayer$1(Ae,e){const t=isV13(e),Oe=e[e.length-1],ke=pushParseAndPop({},t?LAYER_PARSERS_V13:LAYER_PARSERS$1,Ae,e);if(!ke)return;let Be=readBooleanString(Ae.getAttribute("queryable"));Be===void 0&&(Be=Oe.queryable),ke.queryable=Be!==void 0?Be:!1;let Ue=readNonNegativeIntegerString(Ae.getAttribute("cascaded"));Ue===void 0&&(Ue=Oe.cascaded),ke.cascaded=Ue;let je=readBooleanString(Ae.getAttribute("opaque"));je===void 0&&(je=Oe.opaque),ke.opaque=je!==void 0?je:!1;let We=readBooleanString(Ae.getAttribute("noSubsets"));We===void 0&&(We=Oe.noSubsets),ke.noSubsets=We!==void 0?We:!1;let Qe=readDecimalString(Ae.getAttribute("fixedWidth"));Qe||(Qe=Oe.fixedWidth),ke.fixedWidth=Qe;let Cn=readDecimalString(Ae.getAttribute("fixedHeight"));Cn||(Cn=Oe.fixedHeight),ke.fixedHeight=Cn;const An=["Style","AuthorityURL"];t?An.push("CRS"):An.push("SRS","Dimension"),An.forEach(function(Sn){if(Sn in Oe){const Tn=ke[Sn]||[];ke[Sn]=Tn.concat(Oe[Sn])}});const En=["BoundingBox","Attribution"];return t?En.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):En.push("LatLonBoundingBox","ScaleHint","Extent"),En.forEach(function(Sn){if(!(Sn in ke)){const Tn=Oe[Sn];ke[Sn]=Tn}}),ke}function readDimension(Ae,e){const t={name:Ae.getAttribute("name"),units:Ae.getAttribute("units"),unitSymbol:Ae.getAttribute("unitSymbol")};return isV13(e)&&Object.assign(t,{default:Ae.getAttribute("default"),multipleValues:readBooleanString(Ae.getAttribute("multipleValues")),nearestValue:readBooleanString(Ae.getAttribute("nearestValue")),current:readBooleanString(Ae.getAttribute("current")),values:readString(Ae)}),t}function readExtent(Ae,e){return{name:Ae.getAttribute("name"),default:Ae.getAttribute("default"),nearestValue:readBooleanString(Ae.getAttribute("nearestValue"))}}function readScaleHint(Ae,e){return{min:readDecimalString(Ae.getAttribute("min")),max:readDecimalString(Ae.getAttribute("max"))}}function readFormatOnlineresource(Ae,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,Ae,e)}function readRequest(Ae,e){return pushParseAndPop({},REQUEST_PARSERS,Ae,e)}function readDCPType(Ae,e){return pushParseAndPop({},DCPTYPE_PARSERS,Ae,e)}function readHTTP(Ae,e){return pushParseAndPop({},HTTP_PARSERS$1,Ae,e)}function readOperationType(Ae,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,Ae,e)}function readSizedFormatOnlineresource(Ae,e){const t=readFormatOnlineresource(Ae,e);if(t){const Oe=[readNonNegativeIntegerString(Ae.getAttribute("width")),readNonNegativeIntegerString(Ae.getAttribute("height"))];return t.size=Oe,t}}function readAuthorityURL(Ae,e){const t=readFormatOnlineresource(Ae,e);if(t)return t.name=Ae.getAttribute("name"),t}function readMetadataURL(Ae,e){const t=readFormatOnlineresource(Ae,e);if(t)return t.type=Ae.getAttribute("type"),t}function readStyle$1(Ae,e){return pushParseAndPop({},STYLE_PARSERS$1,Ae,e)}function readKeywordList(Ae,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,Ae,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(Ae,e){return pushParseAndPop({},ADDRESS_PARSERS,Ae,e)}function readAllowedValues(Ae,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,Ae,e)}function readConstraint(Ae,e){const t=Ae.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,Ae,e)}function readContactInfo(Ae,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,Ae,e)}function readDcp(Ae,e){return pushParseAndPop({},DCP_PARSERS,Ae,e)}function readGet(Ae,e){const t=readHref(Ae);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,Ae,e)}function readHttp(Ae,e){return pushParseAndPop({},HTTP_PARSERS,Ae,e)}function readOperation(Ae,e){const t=Ae.getAttribute("name"),Oe=pushParseAndPop({},OPERATION_PARSERS,Ae,e);if(!Oe)return;const ke=e[e.length-1];ke[t]=Oe}function readOperationsMetadata(Ae,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,Ae,e)}function readPhone(Ae,e){return pushParseAndPop({},PHONE_PARSERS,Ae,e)}function readServiceIdentification(Ae,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,Ae,e)}function readServiceContact(Ae,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,Ae,e)}function readServiceProvider(Ae,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,Ae,e)}function readValue(Ae,e){return readString(Ae)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let Oe=this.owsParser_.readFromNode(e);return Oe?(Oe.version=t,Oe=pushParseAndPop(Oe,PARSERS,e,[]),Oe||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(Ae,e){return pushParseAndPop({},CONTENTS_PARSERS,Ae,e)}function readLayer(Ae,e){return pushParseAndPop({},LAYER_PARSERS,Ae,e)}function readTileMatrixSet(Ae,e){return pushParseAndPop({},TMS_PARSERS,Ae,e)}function readStyle(Ae,e){const t=pushParseAndPop({},STYLE_PARSERS,Ae,e);if(!t)return;const Oe=Ae.getAttribute("isDefault")==="true";return t.isDefault=Oe,t}function readTileMatrixSetLink(Ae,e){return pushParseAndPop({},TMS_LINKS_PARSERS,Ae,e)}function readDimensions(Ae,e){return pushParseAndPop({},DIMENSION_PARSERS,Ae,e)}function readResourceUrl(Ae,e){const t=Ae.getAttribute("format"),Oe=Ae.getAttribute("template"),ke=Ae.getAttribute("resourceType"),Be={};return t&&(Be.format=t),Oe&&(Be.template=Oe),ke&&(Be.resourceType=ke),Be}function readBoundingBox(Ae,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,Ae,e);if(t.length==2)return boundingExtent(t)}function readBoundingBoxWithCrs(Ae,e){const t=Ae.getAttribute("crs"),Oe=pushParseAndPop([],WGS84_BBOX_READERS,Ae,e);if(Oe.length==2)return{extent:boundingExtent(Oe),crs:t}}function readLegendUrl(Ae,e){const t={};return t.format=Ae.getAttribute("format"),t.href=readHref(Ae),t}function readCoordinates(Ae,e){const t=readString(Ae).split(/\s+/);if(!t||t.length!=2)return;const Oe=+t[0],ke=+t[1];if(!(isNaN(Oe)||isNaN(ke)))return[Oe,ke]}function readTileMatrix(Ae,e){return pushParseAndPop({},TM_PARSERS,Ae,e)}function readTileMatrixLimitsList(Ae,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,Ae,e)}function readTileMatrixLimits(Ae,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,Ae,e)}var eventbus_min={exports:{}};(function(Ae,e){(function(t,Oe){Ae.exports=Oe()})(commonjsGlobal,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(ke,Be,Ue){for(var je=[],We=arguments.length,Qe=0;Qe<We;Qe++)je.push(arguments[Qe]);je=je.length>3?je.splice(3,je.length-1):[],typeof this.listeners[ke]<"u"?this.listeners[ke].push({scope:Ue,callback:Be,args:je}):this.listeners[ke]=[{scope:Ue,callback:Be,args:je}]},removeEventListener:function(ke,Be,Ue){if(typeof this.listeners[ke]<"u"){for(var je=this.listeners[ke].length,We=[],Qe=0;Qe<je;Qe++){var Cn=this.listeners[ke][Qe];Cn.scope==Ue&&Cn.callback==Be||We.push(Cn)}this.listeners[ke]=We}},hasEventListener:function(ke,Be,Ue){if(typeof this.listeners[ke]<"u"){var je=this.listeners[ke].length;if(Be===void 0&&Ue===void 0)return je>0;for(var We=0;We<je;We++){var Qe=this.listeners[ke][We];if((!Ue||Qe.scope==Ue)&&Qe.callback==Be)return!0}}return!1},dispatch:function(ke,Be){for(var Ue={type:ke,target:Be},je=[],We=arguments.length,Qe=0;Qe<We;Qe++)je.push(arguments[Qe]);if(je=je.length>2?je.splice(2,je.length-1):[],je=[Ue].concat(je),typeof this.listeners[ke]<"u")for(var Cn=this.listeners[ke].slice(),An=Cn.length,Qe=0;Qe<An;Qe++){var En=Cn[Qe];if(En&&En.callback){var Sn=je.concat(En.args);En.callback.apply(En.scope,Sn)}}},getEvents:function(){var ke="";for(var Be in this.listeners)for(var Ue=this.listeners[Be].length,je=0;je<Ue;je++){var We=this.listeners[Be][je];ke+=We.scope&&We.scope.className?We.scope.className:"anonymous",ke+=" listen for '"+Be+`'
`}return ke}};var Oe=new t;return Oe})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$l=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$l.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,Oe=JSON.parse(JSON.stringify(this.options.obj)),ke={};Oe.paint&&(t=!0,ke.paint=Oe.paint,Object.keys(Oe.paint).length===0&&logger$l.info("tag 'paint' is empty !")),Oe.layout&&(t=!0,ke.layout=Oe.layout,Oe.layout.visibility&&delete ke.visibility,Object.keys(Oe.layout).length===0&&logger$l.info("tag 'layout' is empty !"));var Be=document.createElement("div");Be.className=this.name.container;var Ue=null;if(t){var je=JSON.stringify(ke,null,4);Ue=this._syntaxHighlight(je)}var We=document.createElement("div");We.className=this.name.containerjson;var Qe=document.createElement("label");Qe.className=this.name.jsonlabel,Qe.innerHTML=this.options.title,We.appendChild(Qe);var Cn=document.createElement("pre");Cn.className=this.name.jsondisplay,Cn.innerHTML=Ue,Cn.addEventListener?Cn.addEventListener("click",function(An){e.options.tools.edition&&e.onEditJsonStyleMapBox(An)}):Cn.attachEvent&&Cn.attachEvent("onclick",function(An){e.options.tools.edition&&e.onEditJsonStyleMapBox(An)}),We.appendChild(Cn),Be.appendChild(We),this.options.tools.scale&&Be.appendChild(this._createElementToolsScale({min:ke.layout?ke.layout.minzoom:0,max:ke.layout?ke.layout.maxzoom:21})),this.options.tools.edition&&Be.appendChild(this._createElementToolsEdition()),this.container=Be}_createElementToolsScale(e){logger$l.trace("_createElementToolsScale");var t=this,Oe=this.options.obj,ke=document.createElement("div");ke.className=this.name.containertoolsscale;var Be=document.createElement("div");Be.className=this.name.containertoolsminscale;var Ue=document.createElement("label");Ue.className=this.name.scalelabelmin,Ue.innerHTML="min :",Be.appendChild(Ue);var je=document.createElement("input");je.className=this.name.scaleinputmin,je.type="range",je.value=e.min||0,je.title=e.min||0,je.disabled=!1,je.min=0,je.max=21,je.data=Oe,je.addEventListener?je.addEventListener("change",function(An){t.onChangeStyleScaleMinMapBox(An)}):je.appendChild&&je.appendChild("onchange",function(An){t.onChangeStyleScaleMinMapBox(An)}),Be.appendChild(je),ke.appendChild(Be);var We=document.createElement("div");We.className=this.name.containertoolsmaxscale;var Qe=document.createElement("label");Qe.className=this.name.scalelabelmax,Qe.innerHTML="max :",We.appendChild(Qe);var Cn=document.createElement("input");return Cn.className=this.name.scaleinputmin,Cn.type="range",Cn.value=e.max||21,Cn.title=e.max||21,Cn.disabled=!1,Cn.min=0,Cn.max=21,Cn.data=Oe,Cn.addEventListener?Cn.addEventListener("change",function(An){t.onChangeStyleScaleMaxMapBox(An)}):Cn.appendChild&&Cn.appendChild("onchange",function(An){t.onChangeStyleScaleMaxMapBox(An)}),We.appendChild(Cn),ke.appendChild(We),ke}_createElementToolsEdition(){logger$l.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var Oe="gp-json-number";return/^"/.test(t)?/:$/.test(t)?Oe="gp-json-key":Oe="gp-json-string":/true|false/.test(t)?Oe="gp-json-boolean":/null/.test(t)&&(Oe="gp-json-null"),"<span class='"+Oe+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$l.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$l.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$l.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$l.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$k=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$k.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,Oe=this.id||SelectorID.generate(),ke=document.createElement("div");ke.className=this.name.container,ke.title=t.themesSummary||"";var Be=t.themes;if(Be)for(var Ue=0;Ue<Be.length;Ue++){var je=Be[Ue],We=document.createElement("div");We.id=this.name.containerthemeID+Ue+"_"+Oe,We.className=this.name.containertheme,We.tabIndex=Ue;var Qe=je.url,Cn=je.selected||!1;if(Qe){var An=this.options.tools.button;if(An.visible){var En=An.type==="checkbox"?"checkbox":"radio",Sn=document.createElement("input");Sn.type=En,Sn.id=this.name.inputID+Ue+"_"+Oe,Sn.className=this.name.input,Sn.name=Oe,Sn.checked=Cn,Sn.data=Qe,Sn.addEventListener?Sn.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):Sn.attachEvent&&Sn.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)}),We.appendChild(Sn)}if(this.options.tools.thumbnails&&je.thumbnail){var Tn=document.createElement("img");Tn.id=this.name.imageID+Ue+"_"+Oe,Tn.className=this.name.image,Tn.src=je.thumbnail,Tn.alt=je.thumbnail,Tn.title=je.description||"",Tn.data=Qe,Tn.addEventListener?Tn.addEventListener("click",function(ni){e.onClickThemeImageMapBox(ni);var ii=ni.target.parentElement.childNodes;if(ii){var si=ii[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}):Tn.attachEvent&&Tn.attachEvent("onclick",function(ni){e.onClickThemeImageMapBox(ni);var ii=ni.target.parentElement.childNodes;if(ii){var si=ii[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}),We.appendChild(Tn)}if(je.name){var Dn=document.createElement("label");Dn.id=this.name.labelID+Ue+"_"+Oe,this.options.tools.button.visible&&(Dn.htmlFor=Sn.id),Dn.className=this.name.label,Dn.innerHTML=je.name,Dn.title=je.description||"",Dn.data=Qe,this.options.tools.button.visible||(Dn.addEventListener?Dn.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):Dn.attachEvent&&Dn.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)})),We.appendChild(Dn)}}else{var ti=document.createElement("label");ti.className=this.name.message,ti.innerHTML="Thème non disponible...",We.appendChild(ti)}ke.appendChild(We)}this.container=ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$k.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),ke=0;ke<Oe.length;ke++){var Be=Oe[ke];if(Be.id!==e.target.previousSibling.id){var Ue=Be.id.substring(Be.id.lastIndexOf("_")+1);Ue===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$k.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),Oe=document.getElementsByClassName(this.name.input),ke=0;ke<Oe.length;ke++){var Be=Oe[ke];if(Be.id!==e.target.id){var Ue=Be.id.substring(Be.id.lastIndexOf("_")+1);Ue===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$j=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$j.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,Oe=JSON.parse(JSON.stringify(this.options.obj));Oe.filter&&(t=!0,Oe.filter.length===0&&logger$j.info("tag 'filter' is empty !"));var ke=document.createElement("div");ke.className=this.name.container;var Be=null;t&&(Be=JSON.stringify(Oe.filter,null,4));var Ue=document.createElement("div");Ue.className=this.name.containerjson;var je=document.createElement("label");je.className=this.name.jsonlabel,je.innerHTML=this.options.title,Ue.appendChild(je);var We=document.createElement("pre");if(We.className=this.name.jsondisplay,We.innerHTML=Be,We.addEventListener?We.addEventListener("click",function(Cn){e.options.tools.edition&&e.onEditJsonFilterMapBox(Cn)}):We.attachEvent&&We.attachEvent("onclick",function(Cn){e.options.tools.edition&&e.onEditJsonFilterMapBox(Cn)}),Ue.appendChild(We),ke.appendChild(Ue),this.options.tools.edition){var Qe=document.createElement("div");Qe.className=this.name.containertoolsedit,ke.appendChild(Qe)}this.container=ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$j.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$i=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$i.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var Oe=Object.assign({},e.paint,e.layout),ke=Object.keys(Oe);if(ke.length===0){logger$i.info("tag 'paint' or 'layout' is empty !");return}for(var Be={},Ue=!1,je=0;je<ke.length;je++){var We=ke[je];if(/fill-/.test(We)||/line-/.test(We)||/circle-/.test(We)||/background-/.test(We)||/text-/.test(We)||/icon-/.test(We)){Ue=!0;var Qe=e.title||"",Cn=We.split("-")[0];(Cn==="text"||Cn==="icon")&&(Cn="symbol"),this.legendRender=this._getProperties(Cn,Oe),Be={edit:this.editable,title:Qe,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be));break}}Ue||(Be={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be)),logger$i.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Be),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var Oe=t["text-field"],ke=t["icon-image"];if(e=Oe&&ke?"icon":Oe?"text":ke?"icon":"unknow",e==="unknow"){logger$i.warn("type unknow !?");return}}var Be={};for(const Qe in t)if(Object.hasOwnProperty.call(t,Qe)){const Cn=t[Qe];if(Legend.PROPERTIES[e].includes(Qe)){var Ue=Qe.replace(e,"").slice(1),je=this._getValue(Cn);if(je){if((Ue==="pattern"||Ue==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[je])){var We=e+":"+Ue;logger$i.warn("sprites mandatory for key ",We);break}Be[Ue]=je}}else logger$i.warn("property not supported : ",Qe)}return{type:e,values:Be}}_renderThumbnail(e,t){var Oe=this.rendercontainer;if(!Oe)return!1;var ke=null,Be=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var Ue="font-size: 5em;font-weight: bold;";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",Ue);break;case"icon":if(t.image)ke="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=ke;else{var je="fill: transparent;stroke-width: 10;";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%style%",je)}break;case"line":var We=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",We).replace("%stroke-width%",(t.width||0)*Be);break;case"circle":var Qe=t["stroke-color"]||"#FFFFFF";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Qe.indexOf("rgb")===0?Qe:ColorUtils.hexToRgba(Qe,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*Be);break;case"background":case"fill":if(t.pattern)ke="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),Oe.innerHTML=ke;else{var Cn=t["outline-color"]||"#FFFFFF";ke=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,Oe.style.background=ke.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Cn.indexOf("rgb")===0?Cn:ColorUtils.hexToRgba(Cn,1))}break;default:return logger$i.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var Oe=!0;e.forEach(Be=>{typeof Be!="number"&&(Oe=!1)}),Oe&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((Be,Ue)=>{var je=Be[0],We=Ue[0];return je>We?-1:je<We?1:0});var ke=e.stops.slice(-1);t=ke[0][1]}}else logger$i.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,Oe=document.createElement("div");Oe.className=this.name.containerlegendrender;var ke=this.rendercontainer=document.createElement("div");ke.className=this.name.legendrender,e.edit&&(ke.className+=" ",ke.className+=this.name.legendeditable,ke.addEventListener?ke.addEventListener("click",function(je){t.onEditionLegendMapBox(je)}):ke.attachEvent&&ke.attachEvent("onclick",function(je){t.onEditionLegendMapBox(je)}));var Be=e.type;this._renderThumbnail(Be,e.values)?ke.className+=e.edit?" legend-"+Be:" legend-"+Be+"-not-editable":ke.className+=" legend-unknow",Oe.appendChild(ke);var Ue=document.createElement("span");return Ue.className=this.name.legendtitle,Ue.innerHTML=e.title||"",Oe.appendChild(Ue),Oe}_createElementEditionLegend(e){var t=this,Oe=document.createElement("div");if(Oe.className=this.name.containerlegendtools,!e.edit)return Oe;switch(e.type){case"line":ke.call(t),Be.call(t),Ue.call(t);break;case"background":case"fill":je.call(t),We.call(t);break}function ke(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var Cn=document.createElement("label");Cn.className="legend-line",Cn.htmlFor=this.id?"line-color-"+this.id:"line-color",Cn.innerHTML=this.labels["line-color"];var An=document.createElement("input");An.className="legend-styling",An.id=this.id?"line-color-"+this.id:"line-color",An.title="Selectionner une couleur de trait",An.type="color",An.value=e.values.color,An.setAttribute("data-id","line-color"),An.addEventListener?An.addEventListener("change",function(En){t._renderThumbnail(e.type,Object.assign(e.values,{color:En.target.value})),t.onChangeValueLegendMapBox(En)}):An.attachEvent&&An.attachEvent("onchange",function(En){t._renderThumbnail(e.type,Object.assign(e.values,{color:En.target.value})),t.onChangeValueLegendMapBox(En)}),Qe.appendChild(Cn),Qe.appendChild(An),Oe.appendChild(Qe)}function Be(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var Cn=document.createElement("label");Cn.className="legend-line",Cn.htmlFor=this.id?"line-width-"+this.id:"line-width",Cn.innerHTML=this.labels["line-width"];var An=document.createElement("input");An.className="legend-styling",An.id=this.id?"line-width-"+this.id:"line-width",An.title=e.values.width,An.type="range",An.min="0",An.max="10",An.step="1",An.defaultValue=e.values.width,An.setAttribute("data-id","line-width"),An.addEventListener?An.addEventListener("change",function(En){logger$i.trace(En),En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:En.target.value})),t.onChangeValueLegendMapBox(En)}):An.attachEvent&&An.attachEvent("onchange",function(En){logger$i.trace(En),En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:En.target.value})),t.onChangeValueLegendMapBox(En)}),Qe.appendChild(Cn),Qe.appendChild(An),Oe.appendChild(Qe)}function Ue(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var Cn=document.createElement("label");Cn.className="legend-line",Cn.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",Cn.innerHTML=this.labels["line-opacity"];var An=document.createElement("input");An.className="legend-styling",An.id=this.id?"line-opacity-"+this.id:"line-opacity",An.title=e.values.opacity,An.type="range",An.min="0",An.max="1",An.step="0.1",An.defaultValue=e.values.opacity,An.setAttribute("data-id","line-opacity"),An.addEventListener?An.addEventListener("change",function(En){logger$i.trace(En),En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:En.target.value})),t.onChangeValueLegendMapBox(En)}):An.attachEvent&&An.attachEvent("onchange",function(En){logger$i.trace(En),En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:En.target.value})),t.onChangeValueLegendMapBox(En)}),Qe.appendChild(Cn),Qe.appendChild(An),Oe.appendChild(Qe)}function je(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var Cn=document.createElement("label");Cn.className="legend-fill",Cn.htmlFor=this.id?"fill-color-"+this.id:"fill-color",Cn.innerHTML=this.labels["fill-color"];var An=document.createElement("input");An.className="legend-styling",An.id=this.id?"fill-color-"+this.id:"fill-color",An.title="Selectionner une couleur de remplissage",An.type="color",An.value=e.values.color,An.setAttribute("data-id","fill-color"),An.addEventListener?An.addEventListener("change",function(En){t._renderThumbnail(e.type,Object.assign(e.values,{color:En.target.value})),t.onChangeValueLegendMapBox(En)}):An.attachEvent&&An.attachEvent("onchange",function(En){t._renderThumbnail(e.type,Object.assign(e.values,{color:En.target.value})),t.onChangeValueLegendMapBox(En)}),Qe.appendChild(Cn),Qe.appendChild(An),Oe.appendChild(Qe)}function We(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var Cn=document.createElement("label");Cn.className="legend-fill",Cn.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",Cn.innerHTML=this.labels["fill-opacity"];var An=document.createElement("input");An.className="legend-styling",An.id=this.id?"fill-opacity-"+this.id:"fill-opacity",An.title=e.values.opacity,An.type="range",An.min="0",An.max="1",An.step="0.1",An.defaultValue=e.values.opacity,An.setAttribute("data-id","fill-opacity"),An.addEventListener?An.addEventListener("change",function(En){En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:En.target.value})),t.onChangeValueLegendMapBox(En)}):An.attachEvent&&An.attachEvent("onchange",function(En){En.target.title=En.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:En.target.value})),t.onChangeValueLegendMapBox(En)}),Qe.appendChild(Cn),Qe.appendChild(An),Oe.appendChild(Qe)}return Oe}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$i.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$i.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$h=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$h.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Helper.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,Oe=document.createElement("div");Oe.className=this.name.container;var ke=document.createElement("div");if(ke.id=this.name.containertitle+"-"+this.options.position,ke.className=this.name.containertitle,this.options.tools.pin){var Be=document.createElement("input");Be.id=this.name.imagelabelinput+"-"+this.options.position,Be.className=this.name.imagelabelinput,Be.type="checkbox",ke.appendChild(Be);var Ue=document.createElement("label");Ue.className=this.name.imagelabel,Ue.htmlFor=Be.id,Ue.addEventListener?Ue.addEventListener("click",function(En){e.onClickLayerMapBox(En)}):Ue.attachEvent&&Ue.attachEvent("onclick",function(En){e.onClickLayerMapBox(En)}),ke.appendChild(Ue)}var je=function(){var En=document.createElement("div");if(En.id=this.name.containertools+"-"+this.options.position,En.className=this.name.containertools,this.options.tools.visibility){var Sn=document.createElement("input");Sn.id=this.name.visibilityinput+"-"+this.options.position,Sn.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,Sn.type="checkbox",Sn.checked="checked",Sn.addEventListener?Sn.addEventListener("click",function(Dn){e.onVisibilityLayerMapBox(Dn)}):Sn.attachEvent&&Sn.attachEvent("onclick",function(Dn){e.onVisibilityLayerMapBox(Dn)}),En.appendChild(Sn),this.DomVisibility=Sn;var Tn=document.createElement("label");Tn.htmlFor=this.name.visibilityinput+"-"+this.options.position,Tn.id=this.name.visibilitylabel+"-"+this.options.position,Tn.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,Tn.title="Afficher/masquer la couche",En.appendChild(Tn),Oe.appendChild(En)}this.options.tools.clone&&logger$h.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$h.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&je.apply(this),this.options.tools.type&&t.type){var We=document.createElement("img");switch(We.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":We.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":We.style["background-position"]="-194px 0";break;case"SYMBOL":We.style["background-position"]="-84px 0";break;case"LINE":We.style["background-position"]="-28px 0";break;case"FILL":We.style["background-position"]="-56px 0";break;case"BACKGROUND":We.style["background-position"]="-140px 0";break;case"CIRCLE":We.style["background-position"]="-168px 0";break;default:We.style["background-position"]="-112px 0"}ke.appendChild(We)}var Qe=document.createElement("div");Qe.id=this.name.containerlegend+"-"+this.options.position,Qe.className=this.name.containerlegend,ke.appendChild(Qe);var Cn=document.createElement("input");Cn.id=this.name.titleinput+"-"+this.options.position,Cn.className=this.name.titleinput,Cn.type="checkbox",ke.appendChild(Cn);var An=document.createElement("label");An.className=this.name.titlelabel,An.htmlFor=Cn.id,An.innerHTML=t.id||t["source-layer"]||t.source,An.title=t["source-layer"]||t.source||t.id,An.addEventListener?An.addEventListener("click",function(En){e.onClickLayerMapBox(En)}):An.attachEvent&&An.attachEvent("onclick",function(En){e.onClickLayerMapBox(En)}),ke.appendChild(An),this.DomToggle=An,Oe.appendChild(ke),this.options.tools.icon.anchor==="end"&&je.apply(this),this.container=Oe}add(){if(logger$h.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$h.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$h.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$h.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,Oe=this.container.childNodes;if(Oe.length)for(var ke=this.options.tools.icon.anchor==="start"?1:0,Be=Oe[ke].childNodes,Ue=0;Ue<Be.length;Ue++){var je=Be[Ue];je.id.indexOf(this.name.containerlegend)!==-1&&(t=je)}if(t){var We=e.getRenderContainer();We&&(t.appendChild(We),this.bSlotLegend=!0)}}}visibility(e){if(logger$h.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$h.trace("collapse()"),this.DomToggle.click()}visible(){logger$h.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$h.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return logger$h.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$h.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),Oe=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!Oe),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!Oe),this.oStyle&&this.oStyle.display(!Oe),this.oFilter&&this.oFilter.display(!Oe),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!Oe)}onVisibilityLayerMapBox(e){logger$h.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$h.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$h.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$g=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$g.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var Oe=document.createElement("summary");Oe.className=this.name.summary,Oe.innerHTML=this.options.title,t.appendChild(Oe),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$g.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$f=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$f.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$f.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$f.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$f.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e}},logger$e=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$e.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$e.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$e.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$e.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$e.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$e.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var Oe in t)if(t.hasOwnProperty(Oe)){var ke=t[Oe];ke&&(EventBus.hasEventListener(Oe,ke,e)||EventBus.addEventListener(Oe,ke,e))}}}_initContainer(){logger$e.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var Oe=document.createElement("div");Oe.id=this.name.titleThemesID+this.id,Oe.className=this.name.titleThemes,Oe.innerHTML="Liste des 'thèmes'",e.appendChild(Oe)}var ke=new Themes({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});ke.add()}if(this.options.tools.search){var Be=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Be.add()}for(var Ue in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(Ue)){if(this.options.tools.layers){var je=Object.keys(this.mapbox.sources).length>1?1:0;if(je){var We=document.createElement("hr");We.className=this.name.sep,e.appendChild(We)}if(this.options.tools.title){var Qe=document.createElement("div");Qe.id=this.name.titleLayersID+this.id,Qe.className=this.name.titleLayers,Qe.innerHTML=je?"Liste des 'couches' ("+Ue+")":"Liste des 'couches'",e.appendChild(Qe)}}var Cn=this.mapbox.layers.slice();if(Cn.forEach(function(lr,hr){var ar=lr.metadata;ar?ar["geoportail:order"]=hr:lr.metadata={"geoportail:order":hr}}),this.options.tools.sort){var An=this.options.tools.sortBy,En=this.options.tools.sortOrder,Sn=function(lr,hr){var ar=0;if(lr.metadata&&lr.metadata["geoportail:group"]&&hr.metadata&&hr.metadata["geoportail:group"]){var wr=null,Fi=null;wr=lr.metadata["geoportail:group"],Fi=hr.metadata["geoportail:group"],ar=wr.localeCompare(Fi)}else switch(An){case"geom":ar=En==="asc"?lr.type.localeCompare(hr.type)||lr.id.localeCompare(hr.id):hr.type.localeCompare(lr.type)||hr.id.localeCompare(lr.id);break;case"class":ar=En==="asc"?lr["source-layer"].localeCompare(hr["source-layer"])||lr.id.localeCompare(hr.id):hr["source-layer"].localeCompare(lr["source-layer"])||hr.id.localeCompare(lr.id);break;case"id":default:ar=En==="asc"?lr.id.localeCompare(hr.id):hr.id.localeCompare(lr.id);break}return ar};Cn.sort(Sn)}logger$e.trace("Layers : ",Cn);var Tn=this.options.tools.sortBy,Dn=this.options.tools.groupAuto,ti={};Cn.forEach(function(lr){var hr=lr.metadata;if(hr&&hr["geoportail:group"]){var ar=hr["geoportail:group"];ti[ar]=ti[ar]?ti[ar]+1:1}else{var wr=null;switch(Tn){case"class":wr=lr["source-layer"];break;case"geom":wr=lr.type;break;case"id":default:wr=lr.id;break}var Fi=wr;if(Dn){var cr=/_|-|:|=/,rr=wr.search(cr);Fi=rr!==-1?wr.substring(0,rr).trim():wr}ti[Fi]=ti[Fi]?ti[Fi]+1:1,hr?hr["geoportail:group"]=Fi:lr.metadata={"geoportail:group":Fi}}}),logger$e.trace("Groups : ",ti);var ni=document.createElement("div");ni.className=this.name.containerLayers,e.appendChild(ni);var ii;if(this.options.tools.collapse!==void 0){ii=document.createElement("details"),ii.className="",ii.open=!this.options.tools.collapse,ni.appendChild(ii);var si=document.createElement("summary");si.className="",si.innerHTML="",ii.appendChild(si)}for(var oi=this.options.tools.collapse!==void 0?ii:ni,ci=-1,Pi=0;Pi<Cn.length;Pi++){var Ai=Cn[Pi];if(ci++,Ai.source===Ue){if(this.options.tools.group&&this.options.tools.sort){var fi=Ai.metadata;if(fi){var Oi=Ai.metadata["geoportail:group"];if(Oi)if(ti[Oi]>1){ti[Oi]=-1;var Ni=new Group({id:this.id,target:this.options.tools.collapse!==void 0?ii:ni,title:Oi,collapse:!0});Ni.add(),oi=Ni.getContainer()}else ti[Oi]===1&&(oi=this.options.tools.collapse!==void 0?ii:ni);else oi=this.options.tools.collapse!==void 0?ii:ni}else oi=this.options.tools.collapse!==void 0?ii:ni}if(this.options.tools.layers){var ui=new Layer({id:this.id,target:oi,position:ci+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:Ai.id,type:Ai.type,source:Ai.source,"source-layer":Ai["source-layer"]}});ui.add(),Ai.layout&&Ai.layout.visibility&&Ai.layout.visibility==="none"&&ui.visibility(!1),this.layers.push(ui)}if(this.options.tools.legend){var li=this.options.tools.editable;typeof li>"u"&&(li=Ai.editable);var Ri=new Legend({id:this.id,target:oi,sprites:this.sprites,obj:{id:Ai.id,source:Ai.source,title:Ai.id,editable:typeof li<"u"?li:!1,paint:Ai.paint,layout:Ai.layout}});Ri.add(),Ri.display(!1),ui&&(ui.addLegend(Ri),ui.slotLegend())}if(this.options.tools.style){var Mi=new Style({id:this.id,target:oi,position:ci+"_"+this.id,obj:{id:Ai.id,source:Ai.source,layout:Ai.layout,paint:Ai.paint}});Mi.add(),Mi.display(!1),ui&&ui.addStyle(Mi),Ai.layout&&Ai.layout.visibility&&Ai.layout.visibility==="none"&&ui.visibility(!1)}if(this.options.tools.filter){var Bi=new Filter({id:this.id,target:oi,position:ci+"_"+this.id,obj:{id:Ai.id,source:Ai.source,filter:Ai.Filter}});Bi.add(),Bi.display(!1),ui&&ui.addFilter(Bi)}}else ci>=0&&ci--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var er=document.createElement("div");er.id=this.name.target;var nr=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;nr.appendChild(er)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((Be,Ue)=>{logger$e.error("Protocole mapbox:// non géré !"),Be(t)});if(!e)return new Promise((Be,Ue)=>{logger$e.error("Auncun sprites disponibles !"),Be(t)});var Oe=function(){var Be=e+".png";return fetch(Be,{credentials:"same-origin"}).then(function(Ue){if(Ue.ok)return Ue.blob().then(function(We){t.sprites.url=Be;var Qe=new Image;return Qe.src=Be,Qe.decode().then(function(){t.sprites.size={},t.sprites.size.h=Qe.height,t.sprites.size.w=Qe.width})}).catch(We=>{logger$e.warn("fetch image sprites exception :",We)});var je=new Error("HTTP status code: "+Ue.status);throw je}).catch(Ue=>new Promise((je,We)=>{logger$e.error("fetch image sprites exception :",Ue),We(Ue)}))},ke=function(){var Be=e+".json";return fetch(Be,{credentials:"same-origin"}).then(function(Ue){if(Ue.ok)return Ue.json().then(function(We){t.sprites.json=We}).catch(We=>{logger$e.warn("fetch json sprites exception :",We)});var je=new Error("HTTP status code: "+Ue.status);throw je}).catch(Ue=>new Promise((je,We)=>{logger$e.error("fetch json sprites exception :",Ue),We(Ue)}))};return Promise.all([Oe(),ke()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{logger$e.warn("fetch sprites exception :",t)}):new Promise((t,Oe)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(Oe=>{e.mapbox=Oe}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(Oe=>{logger$e.warn("fetch sprites exception :",Oe)}):new Promise((Oe,ke)=>{e._initContainer(),Oe(e)})}).catch(Oe=>{logger$e.error("json exception :",Oe)})).catch(t=>{logger$e.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,Oe=this.getLayer(e),ke=Oe.options.obj.id,Be=0;Be<this.mapbox.layers.length;Be++){var Ue=this.mapbox.layers[Be];if(Ue.id===ke){t=Ue;break}}return t}getLayerFromStyle(e){for(var t=null,Oe=this.mapbox.layers[e],ke=0;ke<this.getLayers().length;ke++){var Be=this.getLayer(ke);if(Oe.id===Be.options.obj.id){t=Be;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createLoadingElement:function(){var Ae=document.createElement("div");return Ae.id="GPmapLoading",Ae.className="",Ae},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimport"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowImportPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae._onShowImportClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae._onShowImportClick(Oe)}),e},_createImportPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPimportPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createImportPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createImportPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",Ae},_createImportPanelReturnPictoElement:function(){var Ae=this,e=document.createElement("button");if(e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline",checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(Oe){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),Ae._onReturnPictoClick(Oe),document.getElementById(Ae._addUID("GPshowImportPicto")).click()}):e.attachEvent&&e.attachEvent("onclick",function(Oe){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),Ae._onReturnPictoClick(Oe),document.getElementById(Ae._addUID("GPshowImportPicto")).click()}),e},_createImportPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportHeaderTitle"),Ae.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ae.innerHTML="Import de données",Ae},_createImportPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var Ae=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Ae._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Ae._onImportSubmit()}),e},_createImportTypeLineElement:function(Ae){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var Oe=document.createElement("label");Oe.id=this._addUID("GPimportTypeLabel"),Oe.className="GPlabel gpf-label fr-label",Oe.innerHTML="Type de donnée",Oe.title="Type de donnée",t.appendChild(Oe);var ke=document.createElement("select");ke.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),ke.className="GPselect gpf-select fr-select",ke.addEventListener?ke.addEventListener("change",function(je){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(je)}):ke.attachEvent&&ke.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),ke.id=this._addUID("GPimportTypeSelect"),(!Ae||!Array.isArray(Ae))&&(Ae=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Be,Ue=0;Ue<Ae.length;Ue++)Be=document.createElement("option"),Be.value=Ae[Ue],Be.text=Ae[Ue]==="MAPBOX"?"Tuiles vectorielles":Ae[Ue],ke.appendChild(Be);return t.appendChild(ke),t},_createImportWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPimportWaitingContainer"),Ae.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createImportStaticParamsContainer:function(Ae){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),Ae==="KML"||Ae==="GPX"||Ae==="GeoJSON"||Ae==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var Ae=document.createElement("div");Ae.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",Ae.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",Ae.appendChild(t),Ae},_createStaticModeChoiceDiv:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportChoice"),Ae.className="fr-my-1w",Ae},_createStaticLocalChoiceDiv:function(){var Ae=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(ke){document.getElementById(Ae._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Ae._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Ae._onStaticImportTypeChange(ke)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Ae._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Ae._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Ae._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltLocal"),Oe.innerHTML="par fichier local",Oe.title="par fichier local",e.appendChild(Oe),e},_createStaticUrlChoiceDiv:function(){var Ae=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(ke){document.getElementById(Ae._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Ae._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Ae._onStaticImportTypeChange(ke)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Ae._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Ae._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Ae._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var Oe=document.createElement("label");return Oe.className="GPimportChoiceAltTxt gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportChoiceAltUrl"),Oe.innerHTML="par URL",Oe.title="par URL",e.appendChild(Oe),e},_createStaticLocalInputDiv:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportValueLocal"),Ae.className="GPimportInputLine",Ae},_createStaticLocalInputLabel:function(){var Ae=document.createElement("label");return Ae.className="GPlabel gpf-label fr-label fr-mb-1w",Ae.htmlFor=this._addUID("GPimportFile"),Ae.innerHTML="Fichier local",Ae.title="Fichier local",Ae},_createStaticLocalInput:function(){var Ae=document.createElement("input");return Ae.type="file",Ae.id=this._addUID("GPimportFile"),Ae.className="GPimportInputFile gpf-upload fr-upload",Ae},_createStaticUrlInputDiv:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportValueUrl"),Ae.className="GPelementHidden gpf-hidden",Ae},_createStaticUrlInputLabel:function(){var Ae=document.createElement("label");return Ae.className="GPlabel gpf-label fr-label",Ae.htmlFor=this._addUID("GPimportUrl"),Ae.innerHTML="URL",Ae.title="URL",Ae},_createStaticUrlInput:function(){var Ae=document.createElement("input");return Ae.type="text",Ae.id=this._addUID("GPimportUrl"),Ae.className="GPinput gpf-input fr-input",Ae},_createServiceParamsContainer:function(Ae){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),Ae==="WMS"||Ae==="WMTS"||Ae==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var Ae=document.createElement("div");return Ae.className="GPimportInputLine",Ae},_createServiceUrlInputLabel:function(){var Ae=document.createElement("label");return Ae.className="GPlabel gpf-label fr-label",Ae.htmlFor=this._addUID("GPimportServiceUrl"),Ae.innerHTML="URL du service",Ae.title="URL du service",Ae},_createServiceUrlInput:function(){var Ae=document.createElement("input");return Ae.type="text",Ae.id=this._addUID("GPimportServiceUrl"),Ae.className="GPinput gpf-input fr-input",Ae},_createImportSubmitFormElement:function(){var Ae=document.createElement("input");return Ae.id=this._addUID("GPimportSubmit"),Ae.className="GPsubmit gpf-btn fr-btn",Ae.type="submit",Ae.value="Importer",Ae},_createImportGetCapPanelElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportGetCapPanel"),Ae.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Ae},_createImportGetCapPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var Oe=document.createElement("button");Oe.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.id=this._addUID("GPimportGetCapPanelClose"),Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),document.getElementById(Ae._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Ae._onGetCapPanelClose()}):Oe.attachEvent&&Oe.attachEvent("click",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),document.getElementById(Ae._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Ae._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Ae._onGetCapPanelClose()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createImportGetCapResultsContainer:function(){var Ae=document.createElement("div");return Ae.className="GPimportGetCapRoot gpf-panel__list",Ae.id=this._addUID("GPimportGetCapResults"),Ae},_addImportGetCapResultListRubrique:function(Ae,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=Ae,e.appendChild(t),e},_addImportGetCapResultRubrique:function(Ae,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var Oe=document.createElement("input");Oe.id="GPimportGetCapRubrique-"+SelectorID.generate(),Oe.className="GPimportGetCapRubrique",Oe.type="checkbox",t.appendChild(Oe);var ke=document.createElement("label");return ke.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",ke.htmlFor=Oe.id,ke.innerHTML=Ae,ke.title=Ae,t.appendChild(ke),e.appendChild(t),e},_addImportGetCapResultListLayer:function(Ae){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",Ae.appendChild(e),Ae},_addImportGetCapResultLayer:function(Ae,e,t){var Oe=document.createElement("li");Oe.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",Oe.innerHTML=Ae.content,Oe.title=Ae.title,Oe.id="GPimportGetCapProposal_"+e;var ke=this;return Oe.addEventListener?Oe.addEventListener("click",function(Be){ke._onGetCapResponseLayerClick(Be)}):Oe.attachEvent&&Oe.attachEvent("onclick",function(){ke._onGetCapResponseLayerClick()}),t.appendChild(Oe),t},_createImportMapBoxPanelElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPimportMapBoxPanel"),Ae.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Ae},_createImportMapBoxPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Nouvel import",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",t.addEventListener?t.addEventListener("click",function(Ue){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),Ae._onMapBoxReturnPictoClick(Ue)}):t.attachEvent&&t.attachEvent("onclick",function(Ue){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),Ae._onMapBoxReturnPictoClick(Ue)}),e.appendChild(t);var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Edition des styles",Oe.title="Edition des styles",e.appendChild(Oe);var ke=document.createElement("button");ke.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.id=this._addUID("GPimportMapBoxPanelClose"),ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),document.getElementById(Ae._addUID("GPimportMapBoxPanel")).style.display="none",Ae._onMapBoxPanelClose()}):ke.attachEvent&&ke.attachEvent("click",function(){document.getElementById(Ae._addUID("GPshowImportPicto")).click(),document.getElementById(Ae._addUID("GPimportMapBoxPanel")).style.display="none",Ae._onMapBoxPanelClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createImportMapBoxResultsContainer:function(){var Ae=document.createElement("div");return Ae.className="GPimportMapBoxpRoot",Ae.id=this._addUID("GPimportMapBoxResults"),Ae}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(Ae){return Ae?this._toolboxId+"-"+Ae:this._toolboxId},getButtonID:function(Ae){return Ae?this._buttonId+"-"+Ae:this._buttonId},getWidgetID:function(Ae){return Ae?this._widgetId+"-"+Ae:this._widgetId},_createToolBoxContainerElement:function(Ae){var e=document.createElement("div");e.id=this.getToolBoxID(Ae),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(Ae),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var Oe=this;t.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),this.blur();var je=document.getElementById(Oe.getWidgetID(Ae));je.style.display==="block"?je.style.display="none":je.style.display="block"}),e.appendChild(t);var ke=document.createElement("div");return ke.id=this.getWidgetID(Ae),ke.addEventListener("click",function(){},!1),e.appendChild(ke),e}},logger$d=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(Ae,e){if(logger$d.trace("ToolBox.add()",e),!Ae){logger$d.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var Oe=Ae.getTargetElement(),ke=Oe.ownerDocument,Be=Oe.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Be]=SelectorID.generate()):this._toolbox[Be]||(this._toolbox[Be]=SelectorID.generate());var Ue=this._toolbox[Be];if(!ke.getElementById(this.getToolBoxID(Ue))){logger$d.trace("create toolbox !");var je=this._createToolBoxContainerElement(Ue);je.style.pointerEvents="auto";var We=Oe.getElementsByClassName("ol-overlaycontainer-stopevent");We[0].appendChild(je)}var Qe=ke.getElementById(this.getWidgetID(Ue));e.setTarget(Qe),t&&(t.gpShareMeasureToolBox=this._toolbox),logger$d.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$c=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var Ae=this.CLASSNAME;logger$c.trace("["+Ae+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(Ae){if(!Ae.dragging){var e=Ae.coordinate;if(this.sketch){var t,Oe=this.sketch.getGeometry();if(t=this.format(Oe),Oe.getType()==="LineString")e=Oe.getLastCoordinate();else if(Oe.getType()==="Polygon")e=Oe.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(Ae,e){Ae.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap(),Oe=t.getTargetElement().id,ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(this.tools=ke.gpShareMeasures||{});var Be=this.CLASSNAME;for(var Ue in this.tools)if(this.tools.hasOwnProperty(Ue))for(var je=this.tools[Ue],We=0;We<je.length;We++){var Qe=je[We];Qe&&Qe.active&&Ue!==Be&&Qe.map.id===Oe&&(Qe.active=!1,Qe.instance!==null&&Qe.instance.clean())}Interactions.unset(t,{current:"Measures"});var Cn=this._pictoContainer.ariaPressed;if(Cn==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var An=0;An<this.tools[Be].length;An++)this.tools[Be][An].map.id===Oe&&(this.tools[Be][An].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var En=0;En<this.tools[Be].length;En++)this.tools[Be][En].map.id===Oe&&(this.tools[Be][En].active=!1)}},clearMeasureToolTip:function(){var Ae=this.getMap();if(Ae)for(var e=Ae.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),Oe=0;Oe<t.length;Oe++){for(var ke=t[Oe],Be=ke.children.length,Ue=[],je=0;je<Be;je++){var We=ke.children[je];if(We.children.length!==0){var Qe=We.children[0];(Qe.className==="GPmeasureTooltip GPmeasureTooltip-static"||Qe.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&Ue.push(We)}}for(var Cn=0;Cn<Ue.length;Cn++)ke.removeChild(Ue[Cn])}},clearMeasure:function(){var Ae=this.getMap();this.measureVector&&(Ae.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(Ae.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(Ae){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),Ae.addOverlay(this.measureTooltip)},createHelpTooltip:function(Ae){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),Ae.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(Ae){this.options.styles=Ae||{},logger$c.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$c.trace("style finish",this.options.styles.finish);var t={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(t)},addMeasureInteraction:function(Ae){var e=this.getMap(),t=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(Oe){return Oe.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:Ae,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",Oe=>{t.sketch=Oe.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var Oe,ke,Be=t.sketch.getGeometry();if(Oe=t.format(Be),Be.getType()==="LineString")ke=Be.getLastCoordinate();else if(Be.getType()==="Polygon")ke=Be.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=Oe,t.measureTooltip.setPosition(ke)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var Ae=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",Ae.addLayer(this.measureVector),Ae.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPelevationPath"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowElevationPathPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimétrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowElevationPathClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowElevationPathClick(Oe)}),e},_createElevationPathPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPelevationPathPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createElevationPathPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createDrawingButtonsPluginDiv:function(){var Ae=document.createElement("div");return Ae.className="container-buttons-plugin fr-mx-2w",Ae},_createElevationPathPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){Ae.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){Ae.onOpenElevationPathInfoClick()}),e.appendChild(t)}var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Profil Altimétrique",e.appendChild(Oe);var ke=document.createElement("button");ke.id=this._addUID("GPelevationPathPanelReduce"),ke.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",ke.title="Masquer le panneau",ke.addEventListener?ke.addEventListener("click",function(je){typeof Ae.onReduceElevationPathPanelClick=="function"&&Ae.onReduceElevationPathPanelClick()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(je){typeof Ae.onReduceElevationPathPanelClick=="function"&&Ae.onReduceElevationPathPanelClick()}),e.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPelevationPathPanelClose"),Be.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowElevationPathPicto")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowElevationPathPicto")).click()});var Ue=document.createElement("span");return Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),e.appendChild(Be),e},_createElevationPathPanelProfilElement:function(){var Ae=document.createElement("div");Ae.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",Ae.appendChild(e),Ae},_createElevationPathWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPelevationPathCalcWaitingContainer"),Ae.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createElevationPathInformationsElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(Ae.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",Ae.appendChild(e),Ae},_addElevationPathInformationsItem:function(Ae,e){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var Oe=document.createElement("p");Oe.className="GPelevationPathInformations";var ke=document.createElement("span");ke.innerText=Ae;var Be=document.createElement("span");Be.innerText=e,Oe.appendChild(ke),Oe.appendChild(Be),t.appendChild(Oe)}return t}},ProfileElevationPathDOM={_getCssProperty:function(Ae,e){return window.getComputedStyle(Ae,null).getPropertyValue(e)},_getTextWidth:function(Ae,e,t=null){var Oe=this.canvas||(this.canvas=document.createElement("canvas")),ke=Oe.getContext("2d");t===null?ke.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:ke.font=t;var Be=ke.measureText(Ae);return Be.width},_dataZToSvgY:function(Ae,e,t,Oe){return e-(Ae-t)*Oe-.5},_dataDistToSvgX:function(Ae,e,t,Oe){return e-t+Ae*Oe},_svgXToDataDist:function(Ae,e,t,Oe){return(Ae+t-e)/Oe},_arrayBisect:function(Ae,e){let t;if(Ae.length===0)return 0;for(t=0;t<Ae.length;t++)if(e<Ae[t].dist)return t;return t-1},displayProfileByDefault:function(Ae,e,t,Oe){var ke=t;if(!e||!Ae)return;const Be={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Be.fontFamily="Marianne",Be.strokeColor="#2F4077",Be.fillColor="#2F4077",Be.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const Ue={top:25,right:15,bottom:10,left:10};var je=ke.options.displayProfileOptions,We=Ae.points,Qe=JSON.parse(JSON.stringify(We));Qe.sort(function(Os,Ss){return Os.z-Ss.z});var Cn=Qe[0].z,An=Qe[Qe.length-1].z,En=Ae.distance;let Sn="m";const Tn=document.createElement("div");Tn.id="profileElevationByDefault",e.appendChild(Tn);var Dn=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),ti=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const ni=ti-Ue.top-Ue.bottom,ii=Dn-Ue.left-Ue.right,si=17,oi=this._getTextWidth(Math.round(An).toLocaleString()+",88",e,`400 10 ${Be.fontFamily}`),ci=17,Pi=15,Ai=15,fi=this._getTextWidth(Math.round(En).toLocaleString()+",5",e),Oi=1,Ni=ni-ci-Pi,ui=ii-si-oi,li=document.createElementNS("http://www.w3.org/2000/svg","svg");li.id="profileElevationByDefaultSvg",li.setAttribute("style","display: block; margin: auto; overflow: visible;"),li.setAttribute("viewBox",`0 0 ${Dn} ${ti}`),li.setAttribute("width","100%"),li.setAttribute("height","100%");const Ri=Math.floor(Ni/Ai);let Mi;An===Cn?Mi=.1:Mi=Math.pow(10,Math.ceil(Math.log((An-Cn)/Ri)/Math.log(10)))/2;let Bi=Math.floor(Cn/Mi)*Mi,er=Math.ceil(An/Mi)*Mi;er===An&&(er+=Mi),Bi=Math.round(Bi*100)/100,er=Math.round(er*100)/100;let nr=Math.round((er-Bi)/Mi);nr+1>Ri&&(Mi=Math.pow(10,Math.ceil(Math.log((An-Cn)/Ri)/Math.log(10))),Bi=Math.floor(Cn/Mi)*Mi,er=Math.ceil(An/Mi)*Mi,er===An&&(er+=Mi),Bi=Math.round(Bi*100)/100,er=Math.round(er*100)/100,nr=Math.floor((er-Bi)/Mi)),nr=Math.max(Math.round(nr),1);const lr=document.createElementNS("http://www.w3.org/2000/svg","g");lr.setAttribute("class","profile-z-vertical");const hr=document.createElementNS("http://www.w3.org/2000/svg","g"),ar=Ni/nr;let wr;An===Cn?wr=Ni/.2:wr=Ni/(er-Bi);let Fi,cr,rr,gr,vr,pr;for(let Os=0;Os<=nr;Os++)Fi=document.createElementNS("http://www.w3.org/2000/svg","text"),Fi.setAttribute("class","profile-z-graduation"),Fi.setAttribute("font-family",Be.fontFamily),Fi.setAttribute("font-size","10px"),Fi.setAttribute("fill","#5E5E5E"),Fi.textContent=(Math.round(100*(Bi+Os*Mi))/100).toLocaleString(),cr=Ni-Os*ar,Fi.setAttribute("transform",`translate(${si+oi-8}, ${cr+5})`),Fi.setAttribute("text-anchor","end"),lr.appendChild(Fi),rr=Math.round(cr)-.5,gr=document.createElementNS("http://www.w3.org/2000/svg","g"),vr=document.createElementNS("http://www.w3.org/2000/svg","path"),vr.setAttribute("cs","100,100"),vr.setAttribute("stroke-width","1"),Os!==0?vr.setAttribute("stroke-opacity","0.2"):vr.setAttribute("stroke-opacity","1"),vr.setAttribute("stroke","#000000"),vr.setAttribute("fill","none"),vr.setAttribute("d",`M${si+oi},${rr} L${ui+si+oi},${rr}`),pr=document.createElementNS("http://www.w3.org/2000/svg","path"),pr.setAttribute("cs","100,100"),pr.setAttribute("stroke-width","1"),pr.setAttribute("stroke-opacity","1"),pr.setAttribute("stroke","#000000"),pr.setAttribute("fill","none"),pr.setAttribute("d",`M${si+oi},${rr} L${si+oi+5},${rr}`),pr.setAttribute("transform","translate(-5, 0)"),gr.appendChild(pr),gr.appendChild(vr),hr.appendChild(gr);var _r=document.createElementNS("http://www.w3.org/2000/svg","text");_r.setAttribute("class","profile-z-legend"),_r.setAttribute("font-family",Be.fontFamily),_r.setAttribute("font-size","11px"),_r.setAttribute("fill","#5E5E5E"),_r.textContent="Altitude (m)",_r.setAttribute("transform",`translate(${si-8}, ${Math.round(Ni/2)}) rotate(-90)`),_r.setAttribute("text-anchor","middle"),lr.appendChild(_r),li.appendChild(lr),li.appendChild(hr),En>2e3&&(En/=1e3,Sn="km");const Ar=Math.floor(ui/fi);let Sr=Math.pow(10,Math.ceil(Math.log(En/Ar)/Math.log(10)))/2;const Hr=En;let es=Math.floor(Hr/Sr);es>Ar?(Sr=Math.pow(10,Math.ceil(Math.log(En/Ar)/Math.log(10))),es=Math.floor(Hr/Sr)):es<Oi&&(Sr=Math.pow(10,Math.ceil(Math.log(En/Ar)/Math.log(10))-1),es=Math.floor(Hr/Sr)),es=Math.max(es,1);const ir=Sr*es,mr=document.createElementNS("http://www.w3.org/2000/svg","g");mr.setAttribute("class","profile-x-vertical");const dr=document.createElementNS("http://www.w3.org/2000/svg","g"),tr=ui/Hr,Dr=(Hr-ir)*tr,Nr=Math.round((ui-Dr)/es);let Pr,kr,Rr,Tr,Er,br;for(let Os=0;Os<=es+1;Os++)Pr=document.createElementNS("http://www.w3.org/2000/svg","text"),Pr.setAttribute("class","profile-x-graduation"),Pr.setAttribute("font-family",Be.fontFamily),Pr.setAttribute("font-size","10px"),Pr.setAttribute("fill","#5E5E5E"),Os!==es+1&&(Pr.textContent=(Math.round(100*Os*Sr)/100).toLocaleString()),kr=si+oi+Os*Nr,Os===es+1&&(kr=si+oi+ui),Pr.setAttribute("transform",`translate(${kr}, ${Ni+Pi+5})`),Pr.setAttribute("text-anchor","middle"),mr.appendChild(Pr),Rr=kr-.5,Tr=document.createElementNS("http://www.w3.org/2000/svg","g"),Er=document.createElementNS("http://www.w3.org/2000/svg","path"),Er.setAttribute("cs","100,100"),Er.setAttribute("stroke-width","1"),Os!==0?Er.setAttribute("stroke-opacity","0.2"):Er.setAttribute("stroke-opacity","1"),Er.setAttribute("stroke","#000000"),Er.setAttribute("fill","none"),Er.setAttribute("d",`M${Rr},${Ni} L${Rr},0`),br=document.createElementNS("http://www.w3.org/2000/svg","path"),br.setAttribute("cs","100,100"),br.setAttribute("stroke-width","1"),br.setAttribute("stroke-opacity","1"),br.setAttribute("stroke","#000000"),br.setAttribute("fill","none"),br.setAttribute("d",`M${Rr},${Ni} L${Rr},${Ni-5}`),br.setAttribute("transform","translate(0, 5)"),Tr.appendChild(br),Tr.appendChild(Er),dr.appendChild(Tr);var Ir=document.createElementNS("http://www.w3.org/2000/svg","text");Ir.setAttribute("class","profile-x-legend"),Ir.setAttribute("font-family",Be.fontFamily),Ir.setAttribute("font-size","11px"),Ir.setAttribute("fill","#5E5E5E"),Ir.textContent=`Distance (${Sn})`,Ir.setAttribute("transform",`translate(${si+oi+ui/2}, ${Ni+Pi+ci+3})`),Ir.setAttribute("text-anchor","middle"),mr.appendChild(Ir),li.appendChild(mr),li.appendChild(dr);const jr=document.createElementNS("http://www.w3.org/2000/svg","g");let qr=1;Sn==="km"&&(qr=1e3);let Wr=this._dataDistToSvgX(We[0].dist/qr,ii,ui,tr),Kr=this._dataZToSvgY(We[0].z,Ni,Bi,wr),ps=`M${Wr},${Kr}`;for(let Os=1;Os<We.length;Os++)Wr=this._dataDistToSvgX(We[Os].dist/qr,ii,ui,tr),Kr=this._dataZToSvgY(We[Os].z,Ni,Bi,wr),ps+=` L${Wr},${Kr}`;const rs=document.createElementNS("http://www.w3.org/2000/svg","path");rs.setAttribute("cs","100,100"),rs.setAttribute("stroke-width","1"),rs.setAttribute("stroke-opacity","1"),rs.setAttribute("stroke",Be.strokeColor),rs.setAttribute("fill","none"),rs.setAttribute("d",ps),ps+=` L${Wr},${Ni}`,ps+=` L${ii-ui},${Ni}`;const Ps=document.createElementNS("http://www.w3.org/2000/svg","path");Ps.setAttribute("cs","100,100"),Ps.setAttribute("stroke-width","1"),Ps.setAttribute("stroke-opacity","0"),Ps.setAttribute("stroke","#000000"),Ps.setAttribute("fill",Be.fillColor),Ps.setAttribute("fill-opacity","0.2"),Ps.setAttribute("d",ps),jr.appendChild(rs),jr.appendChild(Ps),li.appendChild(jr);const Cs=document.createElementNS("http://www.w3.org/2000/svg","g"),Ns=document.createElementNS("http://www.w3.org/2000/svg","rect");Ns.setAttribute("width",ui),Ns.setAttribute("height",Ni),Ns.setAttribute("transform",`translate(${ii-ui},0)`),Ns.setAttribute("visibility","hidden"),Ns.setAttribute("pointer-events","all");const Rs=JSON.parse(JSON.stringify(We));Rs.sort(function(Os,Ss){return Os.dist-Ss.dist});const vs=document.createElementNS("http://www.w3.org/2000/svg","line");vs.setAttribute("id","focusLineX"),vs.setAttribute("class","focusLine-default"),vs.setAttribute("fill","none"),vs.setAttribute("stroke",Be.focusLineColor),vs.setAttribute("stroke-width","0.5px"),vs.setAttribute("visibility","hidden");const Ts=document.createElementNS("http://www.w3.org/2000/svg","line");Ts.setAttribute("id","focusLineY"),Ts.setAttribute("class","focusLine-default"),Ts.setAttribute("fill","none"),Ts.setAttribute("stroke",Be.focusLineColor),Ts.setAttribute("stroke-width","0.5px"),Ts.setAttribute("visibility","hidden");const Is=document.createElementNS("http://www.w3.org/2000/svg","circle");Is.setAttribute("id","focusCircle"),Is.setAttribute("r",4),Is.setAttribute("class","circle-default focusCircle-default"),Is.setAttribute("fill",Be.focusLineColor),Is.setAttribute("visibility","hidden"),Cs.appendChild(Is),Cs.appendChild(vs),Cs.appendChild(Ts);const js=document.createElementNS("http://www.w3.org/2000/svg","text"),Ms=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Qs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Do=document.createElementNS("http://www.w3.org/2000/svg","tspan");js.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Be.fontFamily}; z-index:50;`),js.style.pointerEvents="none",js.style.position="fixed",js.setAttribute("class","tooltipInit"),js.setAttribute("text-anchor","middle"),Tn.appendChild(js),Ms.setAttribute("class","altiPathValue"),Ms.setAttribute("x","0"),Ms.setAttribute("dy","-.7em"),Qs.setAttribute("class","altiPathValue"),Qs.setAttribute("x","0"),Qs.setAttribute("dy","1em"),Do.setAttribute("class","altiPathCoords"),Do.setAttribute("x","0"),Do.setAttribute("dy","1em"),js.appendChild(Ms),je.currentSlope&&js.appendChild(Qs),js.appendChild(Do);const ks=document.createElementNS("http://www.w3.org/2000/svg","g");Cs.appendChild(ks);const ws=document.createElementNS("http://www.w3.org/2000/svg","path");ws.setAttribute("cs","100,100"),ws.setAttribute("fill","#FFFFFF"),ws.setAttribute("stroke","#CCCCCC"),ws.setAttribute("fill-opacity","0.8"),ws.setAttribute("stroke-width","1"),ws.setAttribute("stroke-opacity","1");const Ds=document.createElementNS("http://www.w3.org/2000/svg","path");Ds.setAttribute("cs","100,100"),Ds.setAttribute("fill","#FFFFFF"),Ds.setAttribute("stroke","#000000"),Ds.setAttribute("fill-opacity","0"),Ds.setAttribute("stroke-width","1"),Ds.setAttribute("stroke-opacity","0.4"),Ds.setAttribute("transform","translate(1,1)"),ks.appendChild(Ds),ks.appendChild(ws),ks.appendChild(js),ks.setAttribute("class","tooltipInit"),ks.style.pointerEvents="none";function ml(){vs.setAttribute("visibility","visible"),Ts.setAttribute("visibility","visible"),Is.setAttribute("visibility","visible"),Oe.__createProfileMarker(ke,We[0]),js.classList.remove("tooltipInit"),ks.classList.remove("tooltipInit"),js.classList.remove("tooltipFadeOut"),ks.classList.remove("tooltipFadeOut"),js.classList.add("tooltipFadeIn"),ks.classList.add("tooltipFadeIn")}function Ys(){vs.setAttribute("visibility","hidden"),Ts.setAttribute("visibility","hidden"),Is.setAttribute("visibility","hidden"),Oe.__removeProfileMarker(ke),js.classList.remove("tooltipFadeIn"),ks.classList.remove("tooltipFadeIn"),js.classList.add("tooltipFadeOut"),ks.classList.add("tooltipFadeOut")}function la(Os){const Ss=li.createSVGPoint();Ss.x=Os.clientX,Ss.y=Os.clientY;const _o=Ss.matrixTransform(li.getScreenCTM().inverse()),$o=this._svgXToDataDist(_o.x,ii,ui,tr)*qr,ho=Math.max(1,this._arrayBisect(Rs,$o)),Gs=We[ho-1],zs=We[ho];let Hs=Gs;$o-Gs.dist>zs.dist-$o&&(Hs=zs);const Ua=this._dataDistToSvgX(Hs.dist/qr,ii,ui,tr),Na=this._dataZToSvgY(Hs.z,Ni,Bi,wr);Is.setAttribute("cx",Ua),Is.setAttribute("cy",Na),vs.setAttribute("x1",Ua),vs.setAttribute("y1",Ni),vs.setAttribute("x2",Ua),vs.setAttribute("y2",0),Ts.setAttribute("x1",si+oi),Ts.setAttribute("y1",Na),Ts.setAttribute("x2",ui+si+oi),Ts.setAttribute("y2",Na),Oe.__updateProfileMarker(ke,Hs);const za=`Altitude : ${Hs.z.toLocaleString()} m`,Za=`Pente : ${Hs.slope} %`,Ha=`(lat : ${Hs.lat.toLocaleString()} / lon : ${Hs.lon.toLocaleString()})`;Ms.innerHTML=za,Qs.innerHTML=Za,Do.innerHTML=Ha;const va=Math.max(this._getTextWidth(Ha,Do),this._getTextWidth(za,Ms));let Aa;Hs.dist>En*qr/2?(Aa=`M -0.5 -0.5 l -6 6 l 0 16 l -${va+10} 0 l 0 -44 l ${va+10} 0 l 0 16 l 6 6`,js.setAttribute("transform",`translate(${-(va/2+12)},0)`)):Hs.dist<=En*qr/2&&(Aa=`M -0.5 -0.5 l 6 6 l 0 16 l ${va+10} 0 l 0 -44 l -${va+10} 0 l 0 16 l -6 6`,js.setAttribute("transform",`translate(${va/2+12},0)`)),ws.setAttribute("d",Aa),Ds.setAttribute("d",Aa),ks.setAttribute("transform",`translate(${Ua},${Na})`),ks.style.transform=`translate(${Ua}px,${Na}px)`}return Ns.addEventListener("pointerover",ml),Ns.addEventListener("pointerout",Ys),Ns.addEventListener("pointermove",la.bind(this)),Cs.appendChild(Ns),li.appendChild(Cs),Tn.appendChild(li),e},displayProfileRaw:function(Ae,e,t,Oe){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var ke=Ae&&Ae.points?Ae.points:{},Be=document.createElement("textarea");return Be.id="profilElevationResults",Be.rows=10,Be.cols=50,Be.style.width="100%",Be.innerHTML=JSON.stringify(ke,void 0,4),Be.addEventListener("mouseover",function(Ue){Oe.__customRawProfileMouseOverEvent(t,Ue)}),e.appendChild(Be),e}},displayProfileLibD3:function(Ae,e,t,Oe){var ke=t;if(e&&Ae){for(;e.firstChild;)e.removeChild(e.firstChild);var Be=Ae.points;if(Ae.distance>2e3){Ae.unit="km";for(let fi=0;fi<Be.length;fi++)Be[fi].dist/=1e3}var Ue=ke.options.displayProfileOptions,je={top:20,right:20,bottom:30,left:40},We=window.getComputedStyle(e).getPropertyValue("width"),Qe=window.getComputedStyle(e).getPropertyValue("height"),Cn=We.replace(/px/,"")-je.left-je.right,An=Qe.replace(/px/,"")-je.top-je.bottom,En=d3.scale.linear().range([0,Cn]),Sn=d3.scale.linear().range([An,0]),Tn=d3.svg.axis().scale(En).orient("bottom").ticks(5),Dn=d3.svg.axis().scale(Sn).orient("left").ticks(5),ti=d3.svg.line().interpolate("basis").x(function(fi){return En(fi.dist)}).y(function(fi){return Sn(fi.z)}),ni=d3.svg.area().interpolate("basis").x(function(fi){return En(fi.dist)}).y0(An).y1(function(fi){return Sn(fi.z)}),ii=d3.select(e).append("svg").attr("width",Cn+je.left+je.right).attr("height",An+je.top+je.bottom).append("g").attr("transform","translate("+je.left+","+je.top+")"),si=d3.extent(Be,function(fi){return fi.dist});En.domain(si);var oi=[0,d3.max(Be,function(fi){return fi.z})];Sn.domain(oi),ii.append("path").datum(Be).attr("class","area-d3").attr("d",ni),ii.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+An+")").call(Tn).append("text").attr("y",-15).attr("dy",".71em").attr("x",Cn).text("Distance ("+Ae.unit+")"),ii.append("g").attr("class","y axis-d3").call(Dn).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),ii.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+An+")").call(Tn.orient("bottom").tickSize(-An,0,0).tickFormat("")),ii.append("g").attr("class","grid-d3 horizontal").call(Dn.orient("left").tickSize(-Cn,0,0).tickFormat("")),ii.append("path").datum(Be).attr("class","line-d3").attr("d",ti),ii.selectAll("circle").data(Be).enter().append("circle").attr("cx",function(fi){return En(fi.dist)}).attr("cy",function(fi){return Sn(fi.z)}).attr("r",0).attr("class","circle-d3");var ci=ii.append("g").style("display","none");ci.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),ci.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),ci.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var Pi=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),Ai=d3.bisector(function(fi){return fi.dist}).left;return ii.append("rect").attr("class","overlay-d3").attr("width",Cn).attr("height",An).on("mouseover",function(){ci.style("display",null),Oe.__createProfileMarker(ke,Be[0])}).on("mouseout",function(){ci.style("display","none"),Oe.__removeProfileMarker(ke),Pi.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var fi=d3.mouse(this),Oi=En.invert(fi[0]),Ni=Math.max(1,Ai(Be,Oi)),ui=Be[Ni-1],li=Be[Ni],Ri=Oi-ui[0]>li[0]-Oi?li:ui,Mi=En(Ri.dist),Bi=Sn(Ri.z);ci.select("#focusCircle").attr("cx",Mi).attr("cy",Bi),ci.select("#focusLineX").attr("x1",Mi).attr("y1",Sn(oi[0])).attr("x2",Mi).attr("y2",Sn(oi[1])),ci.select("#focusLineY").attr("x1",En(si[0])).attr("y1",Bi).attr("x2",En(si[1])).attr("y2",Bi),Oe.__updateProfileMarker(ke,Ri),Pi.transition().duration(200).style("opacity",.9);var er="";er+=" Altitude : "+Ri.z+" m",Ue.currentSlope&&(er+="<br/> Pente : "+Ri.slope+" %"),er+="<br/> (Lat : "+Ri.lat+"/ Lon : "+Ri.lon+")",Pi.html(er).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),ii}},displayProfileLibAmCharts:function(Ae,e,t,Oe){var ke=t;if(e&&Ae){var Be=Ae.points,Ue="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",je=ke.options.displayProfileOptions.currentSlope;if(je&&(Ue+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),Ue+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),Ae.distance>2e3){Ae.unit="km";for(let En=0;En<Be.length;En++)Be[En].dist/=1e3}for(let En=0;En<Be.length;En++){var We=Be[En].dist,Qe=100;We>100?Qe=1:We>10&&(Qe=10),We=Math.round(We*Qe)/Qe,Be[En].dist=We}var Cn={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+Ae.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:Ue,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Be},An=AmCharts.makeChart(e,Cn);return An.addListener("changed",function(En){var Sn=En.chart.dataProvider[En.index];Oe.__updateProfileMarker(ke,Sn)}),An}}},logger$b=LoggerByDefault.getLogger("elevationpath"),xa,ElevationPath=(xa=class extends ControlExtended{constructor(e){if(logger$b.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof xa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var Oe=e;Oe._marker&&(Oe._measureSource.removeFeature(Oe._marker),Oe._marker=null);var ke=Oe.getMap(),Be=ke.getView().getProjection(),Ue=transform$1([t.lon,t.lat],"EPSG:4326",Be),je=Oe._measureSource.getFeatures()[0].getGeometry().getClosestPoint(Ue),We=new Point$1(je);Oe._marker=new Feature({geometry:We}),logger$b.trace(We),Oe._marker.setStyle(Oe._markerStyle),Oe._measureSource.addFeature(Oe._marker)}static __updateProfileMarker(e,t){var Oe=e;xa.__removeProfileMarker(Oe),xa.__createProfileMarker(Oe,t)}static __customRawProfileOperation(e,t){logger$b.log("__customRawProfileOperation");for(var Oe=e,ke=t.points,Be=Oe.getMap().getView().getProjection(),Ue=0;Ue<ke.length;Ue++){var je=ke[Ue],We=transform$1([je.lon,je.lat],"EPSG:4326",Be),Qe=new Point$1(We);Oe._marker=new Feature({geometry:Qe}),logger$b.trace(Qe);var Cn=xa.DEFAULT_STYLES.RESULTS,An=new CircleStyle({radius:Cn.imageRadius,stroke:new Stroke({color:Cn.imageStrokeColor,width:Cn.imageStrokeWidth}),fill:new Fill({color:Cn.imageFillColor})});Oe._marker.setStyle(new Style$1({image:An})),Oe._measureSource.addFeature(Oe._marker)}}static __customRawProfileMouseOverEvent(e,t){logger$b.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$b.log("Lib. AmCharts is not loaded !");return}var ke=ProfileElevationPathDOM.displayProfileLibAmCharts(e,t,Oe,xa);ke&&(this._profile=ke)}static DISPLAY_PROFILE_LIB_D3(e,t,Oe){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$b.log("Lib. D3 is not loaded !");return}var ke=ProfileElevationPathDOM.displayProfileLibD3(e,t,Oe,xa);ke&&(this._profile=ke)}static DISPLAY_PROFILE_RAW(e,t,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_RAW");var ke=ProfileElevationPathDOM.displayProfileRaw(e,t,Oe,xa);ke&&(this._profile=ke)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,Oe){logger$b.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var ke=ProfileElevationPathDOM.displayProfileByDefault(e,t,Oe,xa);ke&&(this._profile=ke)}setMap(e){if(logger$b.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var Oe=this;this.export.on("button:clicked",ke=>{Oe.dispatchEvent({type:"export:compute",content:ke.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$b.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$b.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$b.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new GeoJSON({defaultStyle:this._drawStyleFinish}),Oe=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return Oe}getStyle(){return this._drawStyleFinish}clean(e){logger$b.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$b.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var Oe=t.apply;this.options.displayProfileOptions.apply=typeof Oe=="function"?Oe:xa.DISPLAY_PROFILE_BY_DEFAULT;var ke=t.target;this.options.displayProfileOptions.target=typeof ke<"u"?ke:null;var Be=e.stylesOptions||{};this.options.stylesOptions.draw=Be.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Be.marker||{},this._createStylingMarker()}_initializeContainer(){logger$b.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var Oe=this._panelContainer=this._createElevationPathPanelElement(),ke=this._createElevationPathPanelDivElement();Oe.appendChild(ke);var Be=this._createElevationPathPanelHeaderElement();ke.appendChild(Be);var Ue=this._createElevationPathPanelProfilElement();this._profileContainer=Ue.firstChild,ke.appendChild(Ue);var je=this._waitingContainer=this._createElevationPathWaitingElement();ke.appendChild(je);var We=this._infoContainer=this._createElevationPathInformationsElement();ke.appendChild(We);var Qe=this._createDrawingButtonsPluginDiv();return ke.appendChild(Qe),this.options.displayProfileOptions.target===null&&e.appendChild(Oe),e}_createStylingMarker(){logger$b.trace("ElevationPath::_createStylingMarker ");var e=xa.DEFAULT_STYLES.MARKER;logger$b.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$b.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$b.trace("style start",e.start);var t={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(t.stroke=e.start),this._drawStyleStart=new Style$1(t),logger$b.trace("style finish",e.finish);var Oe={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(Oe.stroke=e.finish),this._drawStyleFinish=new Style$1(Oe)}_createStylingProfile(){logger$b.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$b.trace("style profile",e);var t=xa.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(Oe=>{if(!e.hasOwnProperty(Oe))e[Oe]=t[Oe];else{var ke=t[Oe];typeof ke=="object"&&(Helper.mergeParams(ke,e[Oe]),e[Oe]=ke)}})}_initMeasureInteraction(e){logger$b.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof LayerSwitcher){var Oe=this._measureVector.gpLayerId;t._layers[Oe].title===Oe&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$b.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{logger$b.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var Oe=this._measureSource.getFeatures(),ke=0;ke<Oe.length;ke++)this._measureSource.removeFeature(Oe[ke]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{logger$b.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){logger$b.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),Oe=t.getView().getProjection(),ke="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0;Ue<Be.length;Ue++){var je=Be[Ue],We=je;Oe!==ke&&(We=transform$1(je,Oe,ke)),e.push({lon:Math.round(We[0]*1e8)/1e8,lat:Math.round(We[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),Oe=t.getView().getProjection(),ke="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0,je=Be.length-1;Ue<je;++Ue){var We=transform$1(Be[Ue],Oe,ke),Qe=transform$1(Be[Ue+1],Oe,ke);We[0]=Math.round(We[0]*1e8)/1e8,We[1]=Math.round(We[1]*1e8)/1e8,Qe[0]=Math.round(Qe[0]*1e8)/1e8,Qe[1]=Math.round(Qe[1]*1e8)/1e8,e+=getDistance(We,Qe)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),Oe="EPSG:4326",ke=[],Be=this._currentSketch.getGeometry().getCoordinates(),Ue=0;Ue<Be.length;Ue++){var je=transform$1(Be[Ue],t,Oe);je[0]=Math.round(je[0]*1e8)/1e8,je[1]=Math.round(je[1]*1e8)/1e8,ke.push(je)}return ke}_requestService(){logger$b.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$b.trace("geometry",e),!e){logger$b.warn("missing geometry !?");return}var t={};Helper.mergeParams(t,this.options.elevationOptions),Helper.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),Helper.mergeParams(t,{ssl:t.ssl});var Oe=this,ke=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Be=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",Ue=function(Qe){logger$b.trace(Qe),Qe&&(Oe._panelContainer.style.display="block",Oe._data&&(Oe._data={}),Oe._data=Oe._computeElevationMeasure(Qe.elevations),Oe._displayProfile(Oe._data),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0)),Be&&Oe.options.elevationOptions.onSuccess.call(Oe,Oe.getData())},je=function(Qe){Oe._panelContainer.style.display="none",logger$b.error(Qe.message),Oe._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",Oe._waiting=!1,Oe._measureDraw.setActive(!0),ke&&Oe.options.elevationOptions.onFailure.call(Oe,Qe)};Helper.mergeParams(t,{onSuccess:Ue,onFailure:je});var We=t.sampling||200;We>0&&Helper.mergeParams(t,{sampling:We}),Helper.mergeParams(t,{positions:e}),logger$b.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(t)}_computeElevationMeasure(e){logger$b.trace("ElevationPath::_computeElevationMeasure",e);var t=e,Oe="m",ke=this._getSketchCoords();if(ke){t[0].dist=0,t[0].slope=0,t[0].oldlat=t[0].lat,t[0].oldlon=t[0].lon,t[0].lat=Math.round(t[0].lat*1e5)/1e5,t[0].lon=Math.round(t[0].lon*1e5)/1e5;var Be=0,Ue=0,je=0,We=0,Qe=0,Cn=0,An=[];console.log(t);for(var En=1;En<t.length;En++){var Sn=[t[En].lon,t[En].lat],Tn=getDistance(Sn,[t[En-1].oldlon,t[En-1].oldlat]),Dn=Tn+Qe,ti=t[En].z,ni=t[En-1].z;ti<0&&(ti=0),ni<0&&(ni=0);var ii=ti-ni;ii<0?(Be+=Tn,We+=ii):ii>0&&(Ue+=Tn,je+=ii),Qe=Dn,t[En].dist=Dn,An.push(Qe),Cn+=ii?Math.abs(Math.round(ii/Dn*100)):0,t[En].slope=ii?Math.abs(Math.round(ii/Dn*100)):0;var si=t[En].slope;si>15&&si<30?t[En].color="#005b4c":si>30&&si<45?t[En].color="#00362d":si>45?t[En].color="#00120f":t[En].color="#00B798",t[En].oldlat=t[En].lat,t[En].oldlon=t[En].lon,t[En].lat=Math.round(t[En].lat*1e5)/1e5,t[En].lon=Math.round(t[En].lon*1e5)/1e5}logger$b.trace("List Distances",An);for(var oi=t[0].z,ci=t[0].z,Pi=t[0].slope,Ai=0;Ai<t.length;Ai++){var fi=t[Ai];fi.z<-100&&(fi.z=0),fi.z>ci&&(ci=fi.z),fi.z<oi&&(oi=fi.z),fi.slope>Pi&&(Pi=fi.slope)}return{greaterSlope:Pi,meanSlope:Math.round(Cn/t.length),distancePlus:Ue,distanceMinus:Be,ascendingElevation:je,descendingElevation:We,altMin:oi.toLocaleString(),altMax:ci.toLocaleString(),distance:this._getLength(),unit:Oe,points:t}}}_displayProfile(e){logger$b.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var Oe=this,ke=this.options.displayProfileOptions.apply;ke.call(this,e,t,Oe);var Be=this.options.displayProfileOptions,Ue=document.getElementById("GPelevationPathPanelInfo-"+this._uid);Ue&&(Be.totalDistance||Be.greaterSlope||Be.meanSlope||Be.ascendingElevation||Be.descendingElevation)&&(Ue.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$b.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,Oe=this.options.displayProfileOptions.greaterSlope,ke=this.options.displayProfileOptions.ascendingElevation,Be=this.options.displayProfileOptions.descendingElevation,Ue=this._infoContainer;if(Ue.childElementCount)for(;Ue.firstChild;)Ue.removeChild(Ue.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : ",Math.round(this._data.distance).toLocaleString()+" m"),ke&&this._addElevationPathInformationsItem("Dénivelé positif : ",this._data.ascendingElevation.toLocaleString()+" m"),Be&&this._addElevationPathInformationsItem("Dénivelé négatif : ",this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : ",this._data.meanSlope.toLocaleString()+" %"),Oe&&this._addElevationPathInformationsItem("Plus forte pente : ",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t,{current:"ElevationPath"});var Oe=this._pictoButton.ariaPressed;Oe==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(t,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(t,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Tc(xa,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),xa);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$a=LoggerByDefault.getLogger("layerimport"),ta,LayerImport=(ta=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof ta))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(Oe){Oe.element.gpResultLayerId==="layerimport:MAPBOX"&&Oe.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(Oe.element.gpEditorId),t._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),t._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},t),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$a.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:ta.DefaultStyles.image,stroke:ta.DefaultStyles.stroke,fill:ta.DefaultStyles.fill,text:ta.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:ta.DefaultStyles.image,stroke:ta.DefaultStyles.stroke,fill:ta.DefaultStyles.fill,text:ta.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:ta.DefaultStyles.image,stroke:ta.DefaultStyles.stroke,fill:ta.DefaultStyles.fill,text:ta.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:ta.DefaultStyles.image,stroke:ta.DefaultStyles.stroke,fill:ta.DefaultStyles.fill,text:ta.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],Oe=0;Oe<e.layerTypes.length;Oe++)t.push(e.layerTypes[Oe]);this.options.layerTypes=t}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))logger$a.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var Oe=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],ke=[],Be=0;Be<t.length;Be++)typeof t[Be]!="string"?(ke.push(Be),logger$a.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[Be]+")")):(t[Be]=t[Be].toUpperCase(),Oe.indexOf(t[Be])===-1&&(ke.push(Be),logger$a.log("[ol.control.LayerImport] options.layerTypes : "+t[Be]+" is not a supported type")),t[Be]==="GEOJSON"&&(t[Be]="GeoJSON"),t[Be]==="MAPBOX"&&(t[Be]="MAPBOX"));if(ke.length!==0)for(var Ue=ke.length-1;Ue>=0;Ue--)t.splice(ke[Ue],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var Oe=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:Oe.image,stroke:Oe.stroke,fill:Oe.fill,text:Oe.text});var ke=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:ke.image,stroke:ke.stroke,fill:ke.fill,text:ke.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var Oe=this._importPanel=this._createImportPanelElement(),ke=this._createImportPanelDivElement();Oe.appendChild(ke);var Be=this._importPanelHeader=this._createImportPanelHeaderElement(),Ue=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Be.appendChild(Ue);var je=this._importPanelTitle=this._createImportPanelTitleElement();Be.appendChild(je);var We=this._panelCloseButton=this._createImportPanelCloseElement();Be.appendChild(We),ke.appendChild(Be);var Qe=this._formContainer=this._initInputFormElement();ke.appendChild(Qe);var Cn=this._getCapPanel=this._createImportGetCapPanelElement(),An=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();Cn.appendChild(An),ke.appendChild(Cn);var En=this._mapBoxPanel=this._createImportMapBoxPanelElement(),Sn=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();En.appendChild(Sn);var Tn=this._loadingContainer=this._createLoadingElement();En.appendChild(Tn),ke.appendChild(En);var Dn=this._waitingContainer=this._createImportWaitingElement();return ke.appendChild(Dn),e.appendChild(Oe),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var Oe=this._createImportStaticParamsContainer(this.options.layerTypes[0]),ke=this._createStaticNameLabel();Oe.appendChild(ke);var Be=this._createStaticModeChoiceDiv(),Ue=this._createStaticLocalChoiceDiv();Be.appendChild(Ue);var je=this._createStaticUrlChoiceDiv();Be.appendChild(je),Oe.appendChild(Be);var We=this._createStaticLocalInputDiv();We.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),We.appendChild(this._staticLocalImportInput),Oe.appendChild(We);var Qe=this._createStaticUrlInputDiv();Qe.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),Qe.appendChild(this._staticUrlImportInput),Oe.appendChild(Qe),e.appendChild(Oe);var Cn=this._createServiceParamsContainer(this.options.layerTypes[0]),An=this._createServiceUrlDiv();An.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),An.appendChild(this._serviceUrlImportInput),Cn.appendChild(An),e.appendChild(Cn);var En=this._createImportSubmitFormElement();return e.appendChild(En),e}_onShowImportClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._showImportButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._onGetCapPanelClose(),this._onMapBoxPanelClose(),this._loadingContainer.className=""}_onImportSubmit(){logger$a.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",logger$a.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$a.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$a.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(logger$a.log("url : ",t),t.length===0){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=ProxyUtils.proxifyUrl(t,this.options.webServicesOptions));var Oe=this;Gp.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(ke){Oe._hideWaitingContainer(),Oe._addFeaturesFromImportStaticLayer(ke,e)},onFailure:function(ke){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",ke)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){logger$a.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var Oe=new FileReader,ke=this;Oe.onerror=Be=>{ke._hideWaitingContainer(),logger$a.error("error fileReader : ",Be)},Oe.onprogress=()=>{logger$a.log("onprogress")},Oe.onloadstart=()=>{ke._displayWaitingContainer(),logger$a.log("onloadstart")},Oe.onabort=()=>{ke._hideWaitingContainer(),logger$a.log("onabort")},Oe.onloadend=Be=>{logger$a.log("onloadend : ",Be)},Oe.onload=Be=>{logger$a.log("fileReader onload - file content : ",Be.target.result),ke._hideWaitingContainer(),ke._addFeaturesFromImportStaticLayer(Be.target.result,e)},Oe.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var Oe=this.getMap();if(!(!Oe||!e)){var ke=null,Be=null,Ue=null,je=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var We=this,Qe=JSON.parse(e),Cn=Qe.sources,An=Object.keys(Cn).length>1?1:0;for(var En in Cn)if(Cn.hasOwnProperty(En)){var Sn="",Tn="",Dn=null,ti=null,ni=null,ii=null;if(Qe.metadata){for(var si in Qe.metadata)if(Qe.metadata.hasOwnProperty(si)){var oi=si.split(":");if(oi[0]==="geoportail"){var ci=oi[1];if(ci==="title"){Sn=Qe.metadata[si];continue}if(ci==="description"){Tn=Qe.metadata[si];continue}if(ci==="quicklookUrl"){Dn=Qe.metadata[si];continue}if(ci==="legends"){ti=Qe.metadata[si];continue}if(ci==="metadata"){ni=Qe.metadata[si];continue}if(ci==="originators"){ii=Qe.metadata[si];continue}}}}Sn||(Sn="Couche MapBox"),Tn||(Tn="Couche MapBox"),Sn=An?Sn+"("+En+")":Sn;var Pi=Cn[En],Ai=Pi.type;if(Ai==="vector"){var fi=Pi.url,Oi=Pi.tiles,Ni=Qe.sprite;if(fi&&fi.indexOf("mapbox://")===0){var ui=this._url;if(ui){if(Oi=["a","b","c","d"].map(function(dr){var tr=fi.replace("mapbox://",""),Dr=ui.split("?")[1];return"https://"+dr+".tiles.mapbox.com/v4/"+tr+"/{z}/{x}/{y}.vector.pbf?"+Dr}),Ni.indexOf("mapbox://")===0){var li=ui.split("?");Qe.sprite=li[0]+"/sprite?"+li[1]}}else logger$a.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Oi)Ue=new MVT({featureClass:Feature}),Be=new VectorTile({attributions:Pi.attribution,format:Ue,urls:Oi}),Be._title=Sn,Be._description=Tn,Be._quicklookUrl=Dn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,Be.on("tileloadstart",function(dr){We._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(dr){We._loadingContainer.className=""}),Be.on("tileloaderror",function(dr){We._loadingContainer.className=""}),ke=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),ke.id=En,ke.gpResultLayerId="layerimport:"+this._currentImportType;else if(fi){Ue=new MVT({featureClass:Feature}),ke=new VectorTileLayer({visible:!1,declutter:!0}),ke.id=En,ke.gpResultLayerId="layerimport:"+this._currentImportType;var Ri=new TileJSON({url:fi}),Mi=Ri.on("change",function(){if(Ri.getState()==="ready"){for(var dr=Ri.getTileJSON(),tr=Array.isArray(dr.tiles)?dr.tiles:[dr.tiles],Dr=0;Dr<tr.length;Dr++){var Nr=tr[Dr];Nr.indexOf("http")!==0&&(tr[Dr]=fi+Nr)}Be=new VectorTile({attributions:Ri.getAttributions()||dr.attribution,format:Ue,urls:tr}),Be._title=Sn,Be._description=Tn,Be._quicklookUrl=Dn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,Be.on("tileloadstart",function(Pr){We._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(Pr){We._loadingContainer.className=""}),ke.setSource(Be),ke.set("mapbox-extension",dr.vector_layers),unByKey(Mi)}})}}else if(Ai==="geojson"){var Bi=Pi.data;Ue=new GeoJSON,Be=new VectorTile({attributions:Pi.attribution,format:Ue,url:Bi}),Be._title=Sn,Be._description=Tn,Be._quicklookUrl=Dn,Be._metadata=ni,Be._legends=ti,Be._originators=ii,ke=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),ke.id=En,ke.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$a.warn("Type MapBox format unknown !");return}var er=JSON.parse(JSON.stringify(Qe));if(An){for(var nr=er.layers,lr=0;lr<nr.length;lr++){var hr=nr[lr];if(hr.source!==En){nr.splice(lr,1);continue}}for(var ar in er.sources)er.sources.hasOwnProperty(ar)&&ar!==En&&delete er.sources[ar]}var wr={id:En,styles:er,layer:ke,options:{title:t||Sn,description:Tn,quicklookUrl:Dn,metadata:ni,legends:ti,originators:ii}};(function(dr){var tr=()=>{applyStyle(dr.layer,dr.styles,{source:dr.id}).then(function(){var Pr=!0;dr.layer.setVisible(Pr);var kr=1;dr.layer.setOpacity(kr)}).then(function(){var Pr=Oe.getView().getProjection().getCode();Oe.getView()&&dr.styles.center&&dr.styles.center.length&&Oe.getView().setCenter(transform$1(dr.styles.center,"EPSG:4326",Pr)),Oe.getView()&&(dr.styles.zoom||dr.styles.zoom===0)&&Oe.getView().setZoom(dr.styles.zoom);var kr=dr.layer.getSource();if(Oe.getView()&&Oe.getSize()){var Rr=null;kr&&kr.getExtent?Rr=kr.getExtent():Rr=kr.getTileGrid().getExtent(),Rr&&Rr[0]!==1/0&&Oe.getView().fit(Rr,Oe.getSize())}}).then(function(){We._hideFormContainer(),We._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),We._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),We._importPanelTitle.innerHTML="Edition des styles";var Pr=new Editor({target:We._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(dr.styles)),scope:this,events:{"editor:onloaded":We._onLoadedMapBox,"editor:layer:onclickvisibility":We._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":We._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":We._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":We._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":We._onDisplayLayerSourceMapBox},tools:We.options.vectorStyleOptions.MapBox.editor});return Pr.setContext("map",Oe),Pr.setContext("layer",dr.layer),Pr.createElement().then(function(){if(Pr.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){We.options.vectorStyleOptions.MapBox.display&&(We._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),We._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),We._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),We._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),We._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),We._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var kr=We._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Rr=0;Rr<kr.length;Rr++){const Tr=kr[Rr];Tr.textContent==="bckgrd"&&(Tr.textContent="Couleur de remplissage")}}).then(function(){dr.layer.set("mapbox-editor",Pr.getID()),setTimeout(function(){Oe.dispatchEvent({id:Pr.getID(),type:"editor:loaded",style:dr.styles,layer:dr.layer})},100)}).catch(function(kr){throw kr})}).then(function(){Oe.dispatchEvent({id:dr.id,type:"render:success",style:dr.styles})}).catch(function(Pr){logger$a.error(Pr),Oe.dispatchEvent({id:dr.id,type:"render:failure",error:Pr})})};logger$a.warn(dr.layer);var Dr=Oe.get("mapbox-styles")||{},Nr=dr.id;Dr[Nr]=dr.styles,Oe.set("mapbox-styles",Dr),dr.layer.set("mapbox-styles",dr.styles),Oe.addLayer(dr.layer),this.dispatchEvent({type:"layerimport:mapbox:added",name:t,data:e,layer:dr.layer,format:this._currentImportType.toLowerCase()||"mapbox"}),dr.layer.getSource()?tr():dr.layer.once("change:source",tr),Oe.getControls().forEach(Pr=>{Pr instanceof LayerSwitcher&&Pr.addLayer(dr.layer,dr.options)})})(wr)}}else{this._currentImportType==="KML"?(je=this.options.vectorStyleOptions.KML.defaultStyle,Ue=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[je]})):this._currentImportType==="GPX"?(je=this.options.vectorStyleOptions.GPX.defaultStyle,Ue=new GPX({defaultStyle:je})):this._currentImportType==="GeoJSON"&&(je=this.options.vectorStyleOptions.GeoJSON.defaultStyle,Ue=new GeoJSON({defaultStyle:je}));var Fi=Ue.readProjection(e),cr=this._getMapProjectionCode(),rr=null;rr=Ue.readFeatures(e,{dataProjection:Fi,featureProjection:cr}),logger$a.log("loaded features : ",rr),Be=new VectorSource({features:new Collection}),Be.addFeatures(rr),logger$a.trace(Be),Be._title=Be._description=t,ke=new VectorLayer({source:Be,style:je}),ke.gpResultLayerId="layerimport:"+this._currentImportType;var gr=Ue.readRootExtensions("geoportail:compute");if(gr&&Object.keys(gr).length!==0){var vr={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},pr=gr.type,_r=gr.transport;if(pr){var Ar=vr[pr].name,Sr=_r?Ar+" ("+_r+")":Ar,Hr=vr[pr].class;if(Hr){ke.gpResultLayerId="layerimport:COMPUTE",ke.set("control",pr),ke.set("name",Ar),ke.set("graph",_r),ke.set("data",gr),ke.set("title",Sr);var es=new GeoJSON({defaultStyle:je}),ir=es.writeFeatures(rr,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});ke.set("geojson",ir),this.getMap().getControls().forEach(dr=>{dr instanceof Hr&&(dr.setData(gr),dr.setLayer(ke),dr.init())})}}}if(Oe.addLayer(ke),Oe.getView()&&Oe.getSize()&&Be.getExtent){var mr=Be.getExtent();mr&&mr[0]!==1/0&&Oe.getView().fit(mr,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,data:e,layer:ke,format:this._currentImportType.toLowerCase()})}}}_addFeaturesFromImportStaticLayerUrl(e,t){var Oe=this.getMap();if(!(!Oe||!e)){var ke,Be,Ue;if(this._currentImportType==="MAPBOX"?logger$a.trace("Not yet implemented !"):(this._currentImportType==="KML"?Ue=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?Ue=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(Ue=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),ke=new VectorSource({url:e,format:Ue}),this._currentImportType==="GPX"&&ke.forEachFeature(function(We){We.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GPX feature"),We.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&ke.forEachFeature(function(We){We.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GeoJSON feature"),We.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),ke._title=ke._description=t,Be=new VectorLayer({source:ke})),Be.gpResultLayerId="layerimport:"+this._currentImportType,Oe.addLayer(Be),Oe.getView()&&Oe.getSize()&&ke.getExtent){var je=ke.getExtent();je&&je[0]!==1/0&&Oe.getView().fit(je,Oe.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,url:e,layer:Be,format:this._currentImportType.toLowerCase()})}}_onLoadedMapBox(e){var t=e.target.data.obj,Oe=this.getContext("layer");Oe.get("mapbox-source")===t.source&&(Oe.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,je=0;je<Ue.length;je++)if(Ue[je].id===t.id){var We=Ue[je].layout;We?We.visibility=Oe.checked?"visible":"none":Ue[je].layout={visibility:Oe.checked?"visible":"none"};break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(Qe){logger$a.error(Qe)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,je=0;je<Ue.length;je++)if(Ue[je].id===t.id){Ue[je].minzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(We){logger$a.error(We)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,je=0;je<Ue.length;je++)if(Ue[je].id===t.id){Ue[je].maxzoom=Oe.value,Oe.title=Oe.value;break}applyStyle(ke,Be,{source:t.source}).then(function(){}).catch(function(We){logger$a.error(We)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,Oe=e.target.srcElement,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){for(var Be=ke.get("mapbox-styles"),Ue=Be.layers,je=0;je<Ue.length;je++)if(Ue[je].id===t.id){var We=Ue[je].paint;We&&(We[Oe.dataset.id]=Oe.value);break}applyStyle(ke,Be,{source:t.source,updateSource:!0}).then(function(){}).catch(function(Qe){logger$a.error(Qe)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){var ke=e.target.currentTarget.parentNode.id,Be=ke.substring(ke.indexOf("-")+1,ke.indexOf("_")),Ue=this.getLayer(Be);Ue.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$a.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$a.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var Oe=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(ke){Oe._hideWaitingContainer(),Oe._displayGetCapResponseLayers(ke)},onFailure:function(ke){Oe._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] getCapabilities request failed : ",ke)}})}_displayGetCapResponseLayers(e){var t,Oe,ke={content:null,title:null},Be;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){t=new WMSCapabilities;var Ue=this._getCapResponseWMS=t.read(e);if(logger$a.log("getCapabilities response : ",Ue),Ue&&Ue.Capability&&Ue.Capability.Layer){var je=Ue.Capability.Layer;if(Array.isArray(je))for(var We=0;We<je.length;We++)this._displayGetCapResponseWMSLayer(je[We]);else this._displayGetCapResponseWMSLayer(je)}}else if(this._currentImportType==="WMTS"){t=new WMTSCapabilities;var Qe=this._getCapResponseWMTS=t.read(e);if(logger$a.log("getCapabilities response : ",Qe),Qe&&Qe.Contents&&Qe.Contents.Layer&&(Oe=Qe.Contents.Layer,Array.isArray(Oe))){this._getCapResponseWMTSLayers=Oe;for(var Cn=0;Cn<Oe.length;Cn++)if(Be=this._getWMTSLayerProjection(Oe[Cn],Qe),Be&&typeof Be=="string")if(get$3(Be)||get$3(Be.toUpperCase()))ke={content:Oe[Cn].Title,title:Oe[Cn].Abstract||Oe[Cn].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(ke,Cn,this._getCapResultsListContainer);else{logger$a.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",Oe[Cn]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){logger$a.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$a.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var Oe=this._getMapProjectionCode(),ke,Be={content:null,title:null};if(t){var Ue,je,We=["CRS","Style"];for(je=0;je<We.length;je++)if(Ue=We[je],Array.isArray(t[Ue])&&t[Ue].length!==0)if(Array.isArray(e[Ue])&&e[Ue].length!==0)for(var Qe=0;Qe<t[Ue].length;Qe++)e[Ue].indexOf(t[Ue][Qe])===-1&&e[Ue].push(t[Ue][Qe]);else e[Ue]=t[Ue];var Cn=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(je=0;je<Cn.length;je++)Ue=Cn[je],t[Ue]&&!e[Ue]&&(e[Ue]=t[Ue])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var An=e?e._container:t._container,En=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(En,An).lastChild;for(var Sn=0;Sn<e.Layer.length;Sn++){for(var Tn=!1,Dn=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),ti=0;ti<Dn.length;ti++)Dn[ti].title===e.Title&&(Tn=!0,e.Layer[Sn]._container=Dn[ti].parentElement);Tn||(e.Layer[Sn]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[Sn],e)}}}else{var ni=this._getCapResponseWMSLayers.length;if(ke=this._getWMSLayerProjection(e,Oe),!ke)logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=ke,Be={content:e.Title,title:e.Abstract||e.Title};var ii=e._container;ii.localName==="ul"&&(ii=ii.lastChild),this._addImportGetCapResultLayer(Be,ni,ii),this._getCapResponseWMSLayers[ni]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var Oe;this._currentImportType==="WMS"?(Oe=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(Oe)):this._currentImportType==="WMTS"&&(Oe=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(Oe))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var Oe=this._getMapProjectionCode(),ke={},Be=this._getWMSLayerGetMapUrl();if(Be)ke.url=Be;else{var Ue=this._getCapRequestUrl.indexOf("?");Ue!==-1?ke.url=this._getCapRequestUrl.substring(0,Ue):ke.url=this._getCapRequestUrl}if(ke.params={},e.Name)ke.params.LAYERS=e.Name;else{logger$a.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}ke.params.SERVICE="WMS",this._getCapResponseWMS.version&&(ke.params.VERSION=this._getCapResponseWMS.version);var je=e._projection;if(je)je!==Oe&&(ke.projection=je);else{logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var We;if(e.Style&&Array.isArray(e.Style)){var Qe=e.Style[0];ke.params.STYLES=Qe.Name,Qe.LegendURL&&Array.isArray(Qe.LegendURL)&&Qe.LegendURL.length!==0&&(We=Qe.LegendURL[0].OnlineResource)}var Cn=new TileWMS(ke);this._getWMSLayerInfoForLayerSwitcher(e,We,Cn);var An={};An.source=Cn,this._getWMSLayerMinMaxResolution(e,Oe,An),this._getWMSLayerExtent(e,Oe,An);var En=new TileLayer(An);if(En.setExtent(An.extent),En.gpResultLayerId="layerimport:WMS",e.queryable&&(En.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(En.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(En),t.getView()&&t.getSize()&&En.getExtent){var Sn=En.getExtent();Sn&&Sn[0]!==1/0&&t.getView().fit(Sn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Name,data:e,layer:En,format:"wms"})}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var Oe=t.DCPType[0];Oe&&Oe.HTTP&&Oe.HTTP.Get&&(e=Oe.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}var ke=e.CRS;if(Array.isArray(ke)){if(ke.includes(t))return Oe=t,Oe;var Be,Ue;for(Ue=0;Ue<ke.length;Ue++)if(Be=ke[Ue],Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase())))return Oe=Be,Oe}return Oe}_getWMSLayerMinMaxResolution(e,t,Oe){var ke=get$3(t).getUnits();if(ke==="m")e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*28e-5);else if(ke==="degrees"){var Be=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(Oe.minResolution=e.MinScaleDenominator*Be),e.MaxScaleDenominator&&(Oe.maxResolution=e.MaxScaleDenominator*Be)}}_getWMSLayerExtent(e,t,Oe){if(!e){logger$a.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var ke=e.EX_GeographicBoundingBox,Be=e.BoundingBox;if(ke&&Array.isArray(ke))t==="EPSG:4326"?Oe.extent=ke:Oe.extent=transformExtent(ke,"EPSG:4326",t);else if(Be&&Array.isArray(Be)){for(var Ue,je,We=0;We<Be.length;We++)if(Ue=Be[We].crs,je=Be[We].extent,Ue){if(Ue===t){Oe.extent=je;break}else if(typeof Ue=="string"){var Qe=get$3(Ue)?get$3(Ue):get$3(Ue.toUpperCase());if(Qe){if(Qe.getUnits()==="degrees"&&Ue.toUpperCase().indexOf("EPSG")===0){var Cn=[je[1],je[0],je[3],je[2]];Oe.extent=transformExtent(Cn,Qe,t)}else Oe.extent=transformExtent(je,Qe,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,Oe){if(e.Title?(Oe._title=e.Title,Oe._description=e.Abstract?e.Abstract:e.Title):(Oe._title=e.Name,Oe._description=e.Abstract?e.Abstract:e.Name),t&&(Oe._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){Oe._metadata=[];for(var ke=0;ke<e.MetadataURL.length;ke++){var Be=e.MetadataURL[ke].OnlineResource;Be&&Oe._metadata.push({url:Be})}}if(e.Attribution){var Ue=e.Attribution;Oe._originators={},Ue.OnlineResource&&(Oe._originators.url=Ue.OnlineResource),Ue.Title&&(Oe._originators.name=Oe._originators.attribution=Ue.Title),Ue.LogoURL&&Ue.LogoURL.OnlineResource&&(Oe._originators.logo=Ue.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$a.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var Oe={};Oe.layer=e.Identifier,this._getCapResponseWMTS.version&&(Oe.version=this._getCapResponseWMTS.version);var ke=this._getWMTSLayerGetTileUrl();if(ke)Oe.url=ke;else{var Be=this._getCapRequestUrl.indexOf("?");Be!==-1?Oe.url=this._getCapRequestUrl.substring(0,Be):Oe.url=this._getCapRequestUrl}var Ue=this._getTMSParams(e);Oe.matrixSet=Ue.tms,Oe.projection=Ue.projCode,Oe.tileGrid=new WMTSTileGrid({resolutions:Ue.resolutions,matrixIds:Ue.matrixIds,origin:Ue.origin});var je,We;if(e.Style&&Array.isArray(e.Style))for(var Qe,Cn=0;Cn<e.Style.length&&(Qe=e.Style[Cn],je=Qe.Identifier,!Qe.isDefault);Cn++)Qe.LegendURL&&Array.isArray(Qe.LegendURL)&&Qe.LegendURL.length!==0&&(We=Qe.LegendURL[0].href);je==null&&logger$a.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),Oe.style=je;var An;e.Format&&Array.isArray(e.Format)&&(An=e.Format[0]),An==null&&logger$a.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),Oe.format=An;var En=new WMTS$1(Oe);e.Title?(En._title=e.Title,En._description=e.Abstract?e.Abstract:e.Title):(En._title=e.Identifier,En._description=e.Abstract?e.Abstract:e.Identifier),We&&(En._legends=[{url:We}]);var Sn={};Sn.source=En,Sn.extent=this._getWMTSLayerExtent(e);var Tn;try{Tn=new TileLayer(Sn),Tn.setExtent(Sn.extent)}catch(ti){logger$a.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",ti);return}if(Tn.gpResultLayerId="layerimport:WMTS",t.addLayer(Tn),t.getView()&&t.getSize()&&Tn.getExtent){var Dn=Tn.getExtent();Dn&&Dn[0]!==1/0&&t.getView().fit(Dn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Identifier,data:e,layer:Tn,format:"wmts"})}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var Oe;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){logger$a.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var ke=e.TileMatrixSetLink[0].TileMatrixSet,Be;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var Ue=t.Contents.TileMatrixSet,je=0;je<Ue.length;je++)if(Ue[je].Identifier===ke&&Ue[je].TileMatrix){var We=Ue[je];Be=We.SupportedCRS,Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase()))&&(Oe=Be);break}}}return Oe}_getTMSParams(e){var t={},Oe=[],ke=[],Be=[],Ue,je,We,Qe=this.getMap();if(Qe){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(Ue=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var Cn=this._getCapResponseWMTS.Contents.TileMatrixSet,An=0;An<Cn.length;An++)if(Cn[An].Identifier===Ue&&Cn[An].TileMatrix){var En=Cn[An],Sn,Tn,Dn,ti,ni;if(En.SupportedCRS&&(je=En.SupportedCRS,We=get$3(je)),We&&We.getUnits&&(ni=We.getUnits()),Array.isArray(En.TileMatrix))for(var ii=0;ii<En.TileMatrix.length;ii++)Sn=En.TileMatrix[ii],Sn.Identifier!=null&&(Tn=parseInt(Sn.Identifier,10),Oe.push(Tn)),Dn=Sn.ScaleDenominator,ni==="degrees"?ti=Dn*28e-5*180/(Math.PI*6378137):ti=Dn*28e-5,ke.push(ti),Be=Sn.TopLeftCorner;ke.sort!==void 0&&ke.sort(function(si,oi){return oi-si}),Oe.sort!==void 0&&Oe.sort(function(si,oi){return si-oi})}}else logger$a.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=Ue,t.projCode=je,t.matrixIds=Oe,t.resolutions=ke,t.origin=Be,t}}_getWMTSLayerExtent(e){var t,Oe=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=transformExtent(e.WGS84BoundingBox,"EPSG:4326",Oe)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$a.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de données"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let Oe=0;Oe<t.length;Oe++){const ke=t[Oe];ke.id==="GPEditorMapBoxContainer_ID_"+e&&ke.remove()}}}},Tc(ta,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),ta);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$9=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class rf extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof rf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(Oe=>{if(!(Oe instanceof rf)&&Oe){for(var ke=Oe.element.classList,Be=0;Be<ke.length;Be++)if(ke[Be]==="ol-attribution"){t.remove(Oe);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},Oe=e.getView(),ke=Oe.calculateExtent(e.getSize()),Be=Oe.getProjection().getCode(),Ue=transformExtent(ke,Be,"EPSG:4326"),je=[Ue[3],Ue[0],Ue[1],Ue[2]],We=Oe.getZoom(),Qe=e.getLayers().getArray(),Cn=0;Cn<Qe.length;Cn++)if(Qe[Cn].getSource)this._updateLayerAttributions(Qe[Cn],t,je,Be,We);else if(Qe[Cn].getLayers){var An=Qe[Cn].getLayers();An.forEach(En=>{En.getSource?this._updateLayerAttributions(En,t,je,Be,We):logger$9.log("cannot find layer source in layergroup ",Qe[Cn])})}}_updateLayerAttributions(e,t,Oe,ke,Be){if(!e){logger$9.trace("layer is null !?");return}var Ue=e.getSource();if(!Ue){logger$9.trace("source is not yet loaded !");return}t||(t={});var je=[],We=e.getVisible(),Qe=Ue._originators;if(typeof Qe<"u"&&Ue.setAttributions(),Qe&&We){for(var Cn=LayerUtils.getAttributions({extent:Oe,crs:ke,zoom:Be,visibility:We,originators:Qe}),An=0;An<Cn.length;An++){var En=Cn[An];t.hasOwnProperty(En)||(je.push(En),t[En]=!0)}je.length!==0&&(Ue.setAttributions(je),this.dispatchEvent({type:"attributions:update",attributions:je}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPmeasureLength"),Ae.className="GPwidget gpf-widget gpf-widget-button",Ae},_createShowMeasureLengthPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureLengthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureLengthClick(Oe)}),e}},logger$8=LoggerByDefault.getLogger("measurelength"),MeasureLength=class Zf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$8.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$8.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.unit=typeof e.unit<"u"?e.unit:null,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$8.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$8.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$8.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$8.trace("call MeasureLength::format()");var t=this.getMap(),Oe;if(this.options.geodesic){var ke=e.getCoordinates();Oe=0;for(var Be=t.getView().getProjection(),Ue=0,je=ke.length-1;Ue<je;++Ue){var We=transform$1(ke[Ue],Be,"EPSG:4326"),Qe=transform$1(ke[Ue+1],Be,"EPSG:4326");Oe+=getDistance(We,Qe)}}else Oe=Math.round(e.getLength()*100)/100;var Cn;return this.options.unit==="km"?Cn=Math.round(Oe/1e3*100)/100+" km":this.options.unit==="m"?Cn=Math.round(Oe*100)/100+" m":Oe>1e3?Cn=Math.round(Oe/1e3*100)/100+" km":Cn=Math.round(Oe*100)/100+" m",Cn}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$8.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPmeasureArea"),Ae.className="GPwidget gpf-widget gpf-widget-button",Ae},_createShowMeasureAreaPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureAreaClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureAreaClick(Oe)}),e}},logger$7=LoggerByDefault.getLogger("measurearea"),MeasureArea=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$7.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var Oe=e.clone(),ke=Oe.getLinearRing(0).getCoordinates();t=Math.abs(getArea(new Polygon([ke])))}else t=e.getArea();var Be;return t>1e6?Be=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?Be=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?Be=Math.round(t/10)*10+" m<sup>2</sup>":Be=Math.round(t*100)/100+" m<sup>2</sup>",Be}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPmeasureAzimuth"),Ae.className="GPwidget gpf-widget gpf-widget-button",Ae},_createShowMeasureAzimuthPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureAzimuthClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowMeasureAzimuthClick(Oe)}),e}},logger$6=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class Qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(Oe.gpShareMeasures||(Oe.gpShareMeasures={}),Oe.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$6.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureAzimuth::format()");var t=this.getMap(),Oe=t.getView().getProjection(),ke=transform$1(e.getFirstCoordinate(),Oe,"EPSG:4326"),Be=transform$1(e.getLastCoordinate(),Oe,"EPSG:4326");if(!this.options.geodesic){var Ue=getDistance(ke,Be);if(logger$6.trace("measure between 2 points with geodesic method",Ue),Ue>500){var je=500/Ue;logger$6.trace("%",je),Be=transform$1(e.getCoordinateAt(je),Oe,"EPSG:4326")}}var We=Math.PI/180,Qe=180/Math.PI,Cn=We*ke[0],An=We*Be[0],En=We*ke[1],Sn=We*Be[1],Tn=Math.sin(An-Cn)*Math.cos(Sn),Dn=Math.cos(En)*Math.sin(Sn)-Math.sin(En)*Math.cos(Sn)*Math.cos(An-Cn),ti=Math.atan2(Tn,Dn),ni=Qe*ti;logger$6.trace("azimut",ni),ni<0&&(ni+=360);var ii=Math.round(ni*100)/100+" °";return ii}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let ke=0;ke<t.length;ke++){const Be=t[ke];if(Be.classList.contains(this.options.className+"-in")){Be.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomIn",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Zoomer");var Oe=document.createElement("span");Be.appendChild(Oe),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Be.classList.contains(this.options.className+"-out")){Be.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomOut",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Dézoomer");var Oe=document.createElement("span");Be.appendChild(Oe),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(Oe=>{Oe.element.classList.contains("ol-zoom")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const Oe=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof Oe=="string"?document.createTextNode(Oe):Oe;const ke=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=ke,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let Oe;this.source_?Oe=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:Oe=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(Oe):requestFullScreen(Oe)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let Oe=0,ke=e.length;Oe<ke;++Oe)unlistenByKey(e[Oe]);e.length=0;const t=this.getMap();if(t){const Oe=t.getOwnerDocument();isFullScreenSupported(Oe)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let ke=0,Be=events.length;ke<Be;++ke)e.push(listen(Oe,events[ke],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(Ae){const e=Ae.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&Ae.fullscreenEnabled)}function isFullScreen(Ae){return!!(Ae.webkitIsFullScreen||Ae.fullscreenElement)}function requestFullScreen(Ae){Ae.requestFullscreen?Ae.requestFullscreen():Ae.webkitRequestFullscreen&&Ae.webkitRequestFullscreen()}function requestFullScreenWithKeys(Ae){Ae.webkitRequestFullscreen?Ae.webkitRequestFullscreen():requestFullScreen(Ae)}function exitFullScreen(Ae){Ae.exitFullscreen?Ae.exitFullscreen():Ae.webkitExitFullscreen&&Ae.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],t=document.createElement("span");e.appendChild(t),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(Oe=>{Oe.element.classList.contains("ol-full-screen")&&(Oe.element.classList.add("ol-hidden"),Oe.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",Oe=e.tipLabel!==void 0?e.tipLabel:"Overview map",ke=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof ke=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=ke):this.collapseLabel_=ke;const Be=e.label!==void 0?e.label:"›";typeof Be=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Be):this.label_=Be;const Ue=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,je=document.createElement("button");je.setAttribute("type","button"),je.title=Oe,je.appendChild(Ue),je.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const We=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=We,e.layers&&e.layers.forEach(function(ii){We.addLayer(ii)});const Qe=document.createElement("div");Qe.className="ol-overviewmap-box",Qe.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:Qe}),this.ovmap_.addOverlay(this.boxOverlay_);const Cn=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),An=this.element;An.className=Cn,An.appendChild(this.ovmapDiv_),An.appendChild(je);const En=this,Sn=this.boxOverlay_,Tn=this.boxOverlay_.getElement(),Dn=function(ii){return{clientX:ii.clientX,clientY:ii.clientY}},ti=function(ii){const si=Dn(ii),oi=We.getEventCoordinate(si);Sn.setPosition(oi)},ni=function(ii){const si=We.getEventCoordinateInternal(ii);En.getMap().getView().setCenterInternal(si),window.removeEventListener("pointermove",ti),window.removeEventListener("pointerup",ni)};this.ovmapDiv_.addEventListener("pointerdown",function(){event.target===Tn&&window.addEventListener("pointermove",ti),window.addEventListener("pointerup",ni)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const Oe=t.getView();Oe&&this.unbindView_(Oe),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const Oe=e.getView();Oe&&this.bindView_(Oe),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const Oe=this.getMap().getView();this.bindView_(Oe)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const Oe=e.getSize(),Be=e.getView().calculateExtentInternal(Oe);if(this.viewExtent_&&equals$1(Be,this.viewExtent_))return;this.viewExtent_=Be;const Ue=t.getSize(),We=t.getView().calculateExtentInternal(Ue),Qe=t.getPixelFromCoordinateInternal(getTopLeft(Be)),Cn=t.getPixelFromCoordinateInternal(getBottomRight(Be)),An=Math.abs(Qe[0]-Cn[0]),En=Math.abs(Qe[1]-Cn[1]),Sn=Ue[0],Tn=Ue[1];An<Sn*MIN_RATIO||En<Tn*MIN_RATIO||An>Sn*MAX_RATIO||En>Tn*MAX_RATIO?this.resetExtent_():containsExtent(We,Be)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,Oe=e.getSize(),Be=e.getView().calculateExtentInternal(Oe),Ue=t.getView(),je=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,We=1/(Math.pow(2,je/2)*MIN_RATIO);scaleFromCenter(Be,We),Ue.fitInternal(fromExtent(Be))}recenter_(){const e=this.getMap(),t=this.ovmap_,Oe=e.getView();t.getView().setCenterInternal(Oe.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const Oe=e.getSize(),ke=e.getView(),Be=t.getView(),Ue=this.rotateWithView_?0:-ke.getRotation(),je=this.boxOverlay_,We=this.boxOverlay_.getElement(),Qe=ke.getCenter(),Cn=ke.getResolution(),An=Be.getResolution(),En=Oe[0]*Cn/An,Sn=Oe[1]*Cn/An;if(je.setPosition(Qe),We){We.style.width=En+"px",We.style.height=Sn+"px";const Tn="rotate("+Ue+"rad)";We.style.transform=Tn}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const t={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var Oe="ol-overviewmap";e.className=e.className||Oe,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:t})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var Oe=document.createElement("div");Oe.id=t,Oe.classList.add("position"),Oe.classList.add(t),this.container.appendChild(Oe)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,t=e[1];t.id="GPshowOverviewMap-"+this._uid,t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!this.options.collapsed),t.setAttribute("type","button"),t.removeAttribute("title"),t.setAttribute("aria-label",this.options.tipLabel);var Oe=this;t.addEventListener?t.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.dispatchEvent({type:"overviewmap:toggle",status:Be})}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.dispatchEvent({type:"overviewmap:toggle",status:Be})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPlegends"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowLegendsPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les légendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowLegendsClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowLegendsClick(Oe)}),e},_createLegendsPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPlegendsPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createLegendsPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__legends",Ae},_createLegendsPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__header_legends",Ae},_createLegendsPanelIconElement:function(){var Ae=document.createElement("label");return Ae.className="gpf-btn-header-legends gpf-btn-icon-header-legends",Ae.title="Légendes",Ae},_createLegendsPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__title_legends",Ae.innerHTML="Légendes",Ae},_createLegendsPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var Ae=document.createElement("div");return Ae.className="legends-entries gpf-panel__body fr-modal__body",Ae},_createLegendEntry:function(Ae){const e=Be=>{var Ue=function(){if(!window.DOMParser)return!1;var Cn=new DOMParser;try{Cn.parseFromString("x","text/html")}catch{return!1}return!0};if(Ue()){var je=new DOMParser,We=je.parseFromString(Be,"text/html");return We.body}var Qe=document.createElement("div");return Qe.innerHTML=Be,Qe};if(Ae&&Ae.legends&&Ae.legends.length){var t=Ae.legends[0].url,Oe=e(`
                    <div
                        id="${Ae.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${Ae.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${Ae.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${Ae.id}" class="legend-entry-image gpf-hidden">
                            <img src="${t}" alt="${Ae.desc}">
                        </div>
                    </div>
                `),ke=Oe.firstChild.querySelector("button");return ke&&ke.addEventListener("click",Be=>{var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue);var je=document.getElementById("GPlegend_ID_"+Ae.id);Ue?je.classList.replace("gpf-visible","gpf-hidden"):je.classList.replace("gpf-hidden","gpf-visible")}),Oe.firstChild}}},logger$5=LoggerByDefault.getLogger("legends"),Legends=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var t=this;e.getLayers().forEach(Oe=>{t.add(Oe)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let t=0;t<e.length;t++)this.add(layer)}add(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return this.exist(t)?!1:(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}remove(e){var t=!1;if(e)for(let Oe=0;Oe<this.legends.length;Oe++){const ke=this.legends[Oe];if(e.name===ke.obj.name&&e.service===ke.obj.service){ke.dom&&this.legends[Oe].dom.remove(),this.legends.splice(Oe,1),t=!0;break}}return t}exist(e){var t=!1;for(let Oe=0;Oe<this.legends.length;Oe++)if(this.legends[Oe].dom.id===e.id){t=!0;break}return t}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var Oe=this.panelLegendsContainer=this._createLegendsPanelElement(),ke=this._createLegendsPanelDivElement();Oe.appendChild(ke);var Be=this.panelLegendsEntriesContainer=this._createLegendElement();if(Oe.appendChild(Be),this.options.panel){var Ue=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),je=this._createLegendsPanelIconElement();Ue.appendChild(je);var We=this._createLegendsPanelTitleElement();Ue.appendChild(We);var Qe=this.buttonLegendsClose=this._createLegendsPanelCloseElement();Ue.appendChild(Qe),ke.appendChild(Ue)}return e.appendChild(Oe),logger$5.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners["layer:add"]=function(Oe){if(logger$5.trace(Oe),!t.add(Oe.element)){logger$5.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(Oe){if(logger$5.trace(Oe),!t.remove(Oe.element)){logger$5.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(Oe){logger$5.trace(Oe)},this.eventsListeners["view:change:resolution"]=function(Oe){logger$5.trace(Oe);var ke=t.getMap();for(let En=0;En<t.legends.length;En++){const Sn=t.legends[En];var Be=t.getMetaInformations(Sn.obj);if(Be){var Ue=ke.getView().getResolution()||ke.getView().getResolutionForZoom(ke.getZoom()),je=Ue*3570,We=Be.legends.slice(),Qe=We[0];for(let Tn=0;Tn<We.length;++Tn){const Dn=We[Tn];Dn.minScaleDenominator||(Dn.minScaleDenominator=0),(je>Qe.minScaleDenominator&&Dn.minScaleDenominator>Qe.minScaleDenominator&&Dn.minScaleDenominator<je||je<Qe.minScaleDenominator&&Dn.minScaleDenominator<Qe.minScaleDenominator)&&(Qe=Dn)}if(Be.legends[0]!==Qe){Be.legends=[],Be.legends.push(Qe);var Cn=t._createLegendEntry(Be),An=Sn.dom;An.replaceWith(Cn),Sn.dom=Cn}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=Ae=>{var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,Oe=t.parseFromString(Ae,"text/html");return Oe.body}var ke=document.createElement("div");return ke.innerHTML=Ae,ke};var CatalogDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPcatalog"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowCatalogPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowCatalogClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowCatalogClick(Oe)}),e},_createCatalogPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPcatalogPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createCatalogPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createCatalogPanelContentDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__content fr-modal__content",Ae},_createCatalogPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelHeader gpf-panel__header fr-modal__header",Ae},_createCatalogPanelTitleElement:function(Ae){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=Ae,e},_createCatalogPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowCatalogPicto")).click(),Ae.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowCatalogPicto")).click(),Ae.onCloseCatalogClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createCatalogContentDivElement:function(){var Ae=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return Ae.firstChild},_createCatalogContentTitleElement:function(Ae){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${Ae}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var Ae=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(Ae);const t=e.attachShadow({mode:"open"});t.innerHTML=Ae.trim();var Oe=t.getElementById("search-button");Oe&&Oe.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var ke=t.getElementById("search-input");return ke&&ke.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),t},_createCatalogWaitingElement:function(){var Ae=document.createElement("div");Ae.id=this._addUID("GPcatalogCalcWaitingContainer"),Ae.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Ae.appendChild(e),Ae},_createCatalogContentCategoriesTabs:function(Ae){var e="",t=(Dn,ti,ni,ii)=>{var si="GPtabButton fr-tabs__tab",oi="false",ci=-1;return ii&&(si="GPtabButton GPtabButtonActive fr-tabs__tab",oi="true",ci=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${Dn}_${ti}" class="${si}" tabindex="${ci}" role="tabbutton" aria-selected="${oi}" aria-controls="tabpanel-${Dn}-panel_${ti}">${ni}</button>
            </li>
            `},Oe="",ke=Dn=>{var ti=Dn.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${Dn.id}" name="radio-inline" ${ti} aria-controls="tabcontent-${Dn.id}">
                    <label class="fr-label" for="radio-inline_${Dn.id}">
                        ${Dn.title}
                    </label>
                </div>
            </div>
            `},Be=(Dn,ti)=>{var ni="";for(let si=0;si<ti.length;si++){const oi=ti[si];Oe+=ke(oi);var ii="";oi.default||(ii="GPelementHidden gpf-hidden"),ni+=`<div class="tabcontent ${ii}" role="tabpanel-section" id="tabcontent-${oi.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${Dn}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${Oe}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${ni}
            `},Ue="",je=(Dn,ti,ni,ii)=>{var si="GPtabContent fr-tabs__panel",oi=-1;ni&&(si="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",oi=0);var ci='<div class="tabcontent"></div>';return ii&&(ci=Be(ti,ii)),`
            <!-- panneaux -->
            <div id="tabpanel-${Dn}-panel_${ti}" class="${si}" role="tabpanel" aria-labelledby="tabbutton-${Dn}_${ti}" tabindex="${oi}" style="max-height: 250px;overflow-y: auto;">
                ${ci}
            </div>
            `};for(let Dn=0;Dn<Ae.length;Dn++){const ti=Ae[Dn];e+=t(Dn,ti.id,ti.title,ti.default),Ue+=je(Dn,ti.id,ti.default,ti.items)}var We=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${Ue}
            </div>
        </div>
        `,Qe=stringToHTML(We.trim());const Cn=Qe.attachShadow({mode:"open"});Cn.innerHTML=We.trim();var An=Cn.querySelectorAll('[role="tabpanel-section"]'),En=Cn.querySelectorAll('[name="radio-inline"]');En&&En.forEach(Dn=>{Dn.addEventListener("change",ti=>{for(let ii=0;ii<An.length;ii++){const si=An[ii];si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden")})});var Sn=Cn.querySelectorAll('[role="tabpanel"]'),Tn=Cn.querySelectorAll('[role="tabbutton"]');return Tn&&Tn.forEach(Dn=>{Dn.addEventListener("click",ti=>{for(let ii=0;ii<Tn.length;ii++){const si=Tn[ii];si.setAttribute("tabindex",-1),si.ariaSelected=!1,si.classList.remove("GPtabButtonActive")}ti.target.setAttribute("tabindex",0),ti.target.ariaSelected=!0,ti.target.classList.add("GPtabButtonActive");for(let ii=0;ii<Sn.length;ii++){const si=Sn[ii];si.setAttribute("tabindex",-1),si.classList.remove("fr-tabs__panel--selected"),si.classList.remove("GPtabContentSelected"),si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.setAttribute("tabindex",0),ni.classList.add("fr-tabs__panel--selected"),ni.classList.add("GPtabContentSelected"),ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(ti)})}),Cn},_createCatalogContentCategoryTabContent:function(Ae,e){var t=Object.values(e),Oe="",ke=(si,oi,ci,Pi,Ai)=>`
            <div class="fr-fieldset__element" id="fieldset-${Ai}_${oi}-${Pi}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${Ai}"
                        id="checkboxes-${Ai}-${si}_${oi}-${Pi}"
                        type="checkbox"
                        data-layer="${oi}:${Pi}"
                        aria-describedby="checkboxes-messages-${Ai}-${si}_${oi}-${Pi}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${Ai}-${si}_${oi}-${Pi}" title="nom technique : ${oi}">
                        ${ci} (${Pi})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${Ai}-${si}_${oi}-${Pi}" aria-live="assertive"></div>
                </div>
            </div>
            `,Be=(si,oi,ci,Pi,Ai)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${oi}" aria-expanded="false" aria-controls="accordion-${si}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${oi}"></span>${ci}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${si}">
                    ${Ai}
                </div>
            </section>
            `,Ue=Ae.section;Ue&&(t=t.sort((si,oi)=>si[Ae.filter.field].localeCompare(oi[Ae.filter.field])));var je={};for(let si=0;si<t.length;si++){const oi=t[si];if(Ue){var We=oi[Ae.filter.field];We&&(je.hasOwnProperty(We)||(je[We]=""),je[We]+=ke(si,oi.name,oi.title,oi.service,Ae.id))}else Oe+=ke(si,oi.name,oi.title,oi.service,Ae.id)}if(Ue){for(const si in je)if(Object.prototype.hasOwnProperty.call(je,si)){const oi=je[si];var Qe=[...oi.matchAll(/fr-fieldset__element/g)].length,Cn=Math.abs(Array.from(si).reduce((ci,Pi)=>Math.imul(31,ci)+Pi.charCodeAt(0)|0,0));Oe+=Be(Cn,Ae.id,si,Qe,oi)}}var An=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${Ae.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${Oe}
            </fieldset>
        `,En=stringToHTML(An);const Sn=En.attachShadow({mode:"open"});Sn.innerHTML=An.trim();var Tn=`checkboxes-${Ae.id}`,Dn=Sn.querySelectorAll('[name="'+Tn+'"]');Dn&&Dn.forEach(si=>{si.addEventListener("click",oi=>{this.onSelectCatalogEntryClick(oi)})});var ti=`button-collapse-${Ae.id}`,ni=Sn.querySelectorAll('[role="'+ti+'"]');ni&&ni.forEach(si=>{si.addEventListener("click",oi=>{oi.target.ariaExpanded=oi.target.ariaExpanded!=="true";var ci=document.getElementById(oi.target.getAttribute("aria-controls"));ci&&(oi.target.ariaExpanded==="true"?(ci.classList.add("fr-collapse--expanded"),ci.classList.remove("GPelementHidden")):(ci.classList.remove("fr-collapse--expanded"),ci.classList.add("GPelementHidden")))},!1)}),`${Ae.id}`;var ii=Sn.querySelectorAll('[role="'+ti+'"]');return ii&&ii.forEach(si=>{si.addEventListener("click",oi=>{oi.target.parentElement.click()})}),Sn}},logger$4=LoggerByDefault.getLogger("widget"),Catalog=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(t=>{logger$4.trace(this,t),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:t})}).catch(t=>{this.hideWaiting(),logger$4.error(t)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(t=>{var Oe=t.items;return t.items&&(Oe=t.items.map(ke=>({title:ke.title,id:ke.id||Math.abs(Array.from(ke.title).reduce((Be,Ue)=>Math.imul(31,Be)+Ue.charCodeAt(0)|0,0)),section:ke.hasOwnProperty("section")?ke.section:!1,default:ke.hasOwnProperty("default")?ke.default:!1,filter:ke.filter||null}))),{title:t.title,id:t.id||Math.abs(Array.from(t.title).reduce((ke,Be)=>Math.imul(31,ke)+Be.charCodeAt(0)|0,0)),default:t.hasOwnProperty("default")?t.default:!1,filter:t.filter||null,items:Oe||null}}),this.categoryId=(()=>{var t=this.categories.findIndex(Oe=>Oe.default);return t===-1&&(t=0,this.categories[t].default=!0),this.categories[t].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),t=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(t);var Oe=this.panelCatalogContainer=this._createCatalogPanelElement(),ke=this._createCatalogPanelDivElement();Oe.appendChild(ke);var Be=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),Ue=this._createCatalogPanelTitleElement(this.options.titlePrimary);Be.appendChild(Ue);var je=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Be.appendChild(je),ke.appendChild(Be);var We=this._createCatalogPanelContentDivElement(),Qe=this.contentCatalogContainer=this._createCatalogContentDivElement();Qe.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&Qe.appendChild(this._createCatalogContentSearchElement());var Cn=this.waitingContainer=this._createCatalogWaitingElement();return Qe.appendChild(Cn),We.appendChild(Qe),ke.appendChild(We),e.appendChild(Oe),e}initMapLayers(){var e=this.getMap();if(e){var t=e.getLayers();t.forEach(Oe=>{if(Oe.name&&Oe.service){this.layersListOnMap[Oe.name+":"+Oe.service]=Oe;var ke=document.querySelectorAll(`input[data-layer="${Oe.name}:${Oe.service}"]`);ke&&ke.forEach(Be=>{Be.checked=!0})}})}}async initLayersList(){var e=null,t=this;const Oe=Qe=>{var Cn=t.contentCatalogContainer,An=t._createCatalogContentCategoriesTabs(this.categories);Cn.appendChild(An);var En=[];t.categories.forEach(Dn=>{if(Dn.items)for(let ti=0;ti<Dn.items.length;ti++){const ni=Dn.items[ti];En.push(ni)}else En.push(Dn)});var Sn=Cn.querySelectorAll(".tabcontent");for(let Dn=0;Dn<Sn.length;Dn++){const ti=Sn[Dn];var Tn=ke(En[Dn],Qe);ti.appendChild(t._createCatalogContentCategoryTabContent(En[Dn],Tn))}},ke=(Qe,Cn)=>{var An=Cn,En=Qe.filter;if(En){An={};for(const Tn in Cn)if(Object.prototype.hasOwnProperty.call(Cn,Tn)){const Dn=Cn[Tn];if(Dn[En.field]){var Sn=Array.isArray(En.value)?En.value.includes(Dn[En.field].toString()):En.value==="*"||Dn[En.field].toString()===En.value;Sn&&(An[Tn]=Dn,this.layersList[Tn].categories.push(Qe.id))}}}return An},Be=(Qe,Cn)=>Cn;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Qe in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Qe)){const Cn=e.layers[Qe];var Ue=Cn.serviceParams.id.split(":").slice(-1)[0];Cn.service=Ue,Cn.categories=[]}var je=Be(this.options.layerFilter,e.layers);return this.layersList=je,Oe(je),new Promise((Qe,Cn)=>{Qe(e)})}if(this.options.configuration.urls){var We=[];for(let Qe=0;Qe<this.options.configuration.urls.length;Qe++){const Cn=this.options.configuration.urls[Qe],An=function(){return fetch(Cn,{}).then(function(En){if(En.ok)return En.json().then(function(Tn){return Tn}).catch(Tn=>{logger$4.warn("fetch json exception :",Tn)});var Sn=new Error("HTTP status code: "+En.status);throw Sn}).catch(En=>new Promise((Sn,Tn)=>{logger$4.error("fetch json exception :",En),Tn(En)}))};We.push(An())}try{const Qe=await Promise.all(We);e=Qe[0];for(let An=1;An<Qe.length;An++){const En=Qe[An];Helper.mergeParams(e,En)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const An in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,An)){const En=e.layers[An];var Ue=En.serviceParams.id.split(":").slice(-1)[0];En.service=Ue,En.categories=[]}var je=Be(this.options.layerFilter,e.layers);return this.layersList=je,Oe(je),await new Promise((An,En)=>{An(e)})}catch(Qe){return await new Promise((Cn,An)=>{An(Qe)})}}}addEventsListeners(e){var t=this;this.eventsListeners["map:add"]=function(Oe){logger$4.trace(Oe);var ke=Oe.element.name,Be=Oe.element.service;t.layersListOnMap[ke+":"+Be]=Oe.element;var Ue=document.querySelectorAll(`input[data-layer="${ke}:${Be}"]`);Ue&&Ue.forEach(je=>{je.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(Oe){logger$4.trace(Oe);var ke=Oe.element.name,Be=Oe.element.service;delete t.layersListOnMap[ke+":"+Be];var Ue=document.querySelectorAll(`input[data-layer="${ke}:${Be}"]`);Ue&&Ue.forEach(je=>{je.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,t){var Oe=null,ke=null;switch(t){case"WMS":ke=new LayerWMS({layer:e});break;case"WMTS":ke=new LayerWMTS({layer:e});break;case"TMS":ke=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":ke=new LayerWFS({layer:e});break}if(ke){var Be=this.getMap();Be.addLayer(ke),this.layersListOnMap[e+":"+t]=ke,Oe=ke.getConfiguration()}return Oe}removeLayer(e,t){var Oe=null,ke=this.layersListOnMap[e+":"+t];if(ke){Oe=ke.getConfiguration();var Be=this.getMap();Be.removeLayer(ke),delete this.layersListOnMap[e+":"+t]}return Oe}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const t=this.layersList[e];t.hidden=!1,this.updateFilteredLayersListDOM(t.name,t.service,t.hidden)}}setFilteredLayersList(e){var t=this.options.search.criteria;for(const ke in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,ke)){const Be=this.layersList[ke];var Oe="";for(let Ue=0;Ue<t.length;Ue++){const je=t[Ue];Be[je]&&(Oe+=Be[je].toLowerCase())}Be.hidden=!Oe.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Be.name,Be.service,Be.hidden)}}updateFilteredLayersListDOM(e,t,Oe){var ke=[];this.categories.forEach(Ue=>{if(Ue.items)for(let je=0;je<Ue.items.length;je++){const We=Ue.items[je];ke.push(We.id)}else ke.push(Ue.id)});for(let Ue=0;Ue<ke.length;Ue++){const je=ke[Ue];var Be=document.getElementById(`fieldset-${je}_${e}-${t}`);Be&&(Oe?(Be.classList.add("gpf-hidden"),Be.classList.add("GPelementHidden")):(Be.classList.remove("gpf-hidden"),Be.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e)}onCloseCatalogClick(e){logger$4.trace(e)}onSelectCatalogTabClick(e){logger$4.trace(e);var t=e.target.id,Oe=t.split("_")[1];this.categoryId=Oe}onSelectCatalogEntryClick(e){logger$4.trace(e);var t=e.target.dataset.layer,Oe=t.substring(0,t.lastIndexOf(":")),ke=t.substring(t.lastIndexOf(":")+1),Be={};e.target.checked?(this.options.addToMap&&(Be=this.addLayer(Oe,ke)),this.dispatchEvent({type:"catalog:layer:add",name:Oe,service:ke,layer:Be})):(this.options.addToMap&&(Be=this.removeLayer(Oe,ke)),this.dispatchEvent({type:"catalog:layer:remove",name:Oe,service:ke,layer:Be}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France métropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Réunion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Calédonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPterritories"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowTerritoriesPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Sélecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowTerritoriesClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowTerritoriesClick(Oe)}),e},_createTerritoriesPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPterritoriesPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createTerritoriesPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__territories",Ae},_createTerritoriesPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__header_territories",Ae},_createTerritoriesPanelIconElement:function(){var Ae=document.createElement("label");return Ae.className="gpf-btn-header-territories gpf-btn-icon-header-territories",Ae.title="Selecteur de territoires",Ae},_createTerritoriesPanelTitleElement:function(Ae){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=Ae,e},_createTerritoriesPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowTerritoriesPicto")).click(),Ae.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowTerritoriesPicto")).click(),Ae.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var Ae=document.createElement("div");return Ae.className="territories-entries gpf-panel__body_territories fr-modal__body",Ae},_createTerritoryEntry:function(Ae){var e=this;const t=Qe=>{var Cn=function(){if(!window.DOMParser)return!1;var Tn=new DOMParser;try{Tn.parseFromString("x","text/html")}catch{return!1}return!0};if(Cn()){var An=new DOMParser,En=An.parseFromString(Qe,"text/html");return En.body}var Sn=document.createElement("div");return Sn.innerHTML=Qe,Sn};if(Ae){var Oe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",ke=Ae.thumbnail||Oe,Be=Ae.icon||Oe,Ue=Ae.id.toLowerCase(),je=t(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${Ae.description}">${Ae.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${Ae.id}" src="${ke}" width="100%" height="100%" title="${Ae.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${Ue}">
                        <svg>       
                            <image id="icon-${Ae.id}" xlink:href="${Be}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),We=je.firstChild;return We&&We.addEventListener("click",Qe=>{e.onImageTerritoriesClick(Qe,Ae.id)}),je.firstChild}}},logger$3=LoggerByDefault.getLogger("territories"),Territories=class np extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof np))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let t=0;t<TerritoriesJson.length;t++){const Oe=TerritoriesJson[t];this.setTerritory(Oe)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var t=this.territories.some(ke=>ke.data.id===e.id);if(e&&!t){var Oe=this._createTerritoryEntry(e);if(Oe)return this.panelTerritoriesEntriesContainer.appendChild(Oe),this.territories.push({data:e,dom:Oe}),!0}return!1}removeTerritory(e){var t=!1;if(e){for(let Oe=0;Oe<this.territories.length;Oe++)if(this.territories[Oe].data.id===e){this.territories[Oe].dom.remove(),this.territories.splice(Oe,1),t=!0;break}}return t}setCollapse(e){if(e===void 0){logger$3.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var Oe=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();Oe.classList.add("tiles-direction"),Oe.classList.add("tiles-"+this.options.tiles);var ke=this._createTerritoriesPanelDivElement();Oe.appendChild(ke);var Be=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Be.classList.add("tiles-direction"),Be.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Be.classList.add("tiles-reduce"),this.options.thumbnail?Be.classList.add("tiles-thumbnail"):Be.classList.add("tiles-icon"),Oe.appendChild(Be),this.options.panel){var Ue=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),je=this._createTerritoriesPanelIconElement();Ue.appendChild(je);var We=this._createTerritoriesPanelTitleElement(this.options.title);Ue.appendChild(We);var Qe=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();Ue.appendChild(Qe),ke.appendChild(Ue)}return e.appendChild(Oe),logger$3.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$3.trace(e)}onImageTerritoriesClick(e,t){logger$3.trace(e,t);var Oe=this.territories.find(Qe=>Qe.data.id===t);if(Oe){var ke=Oe.data.zoom,Be=Oe.data.bbox||[];if(!Be.length)return;var Ue=this.getMap(),je=Ue.getView().getProjection().getCode(),We=transformExtent(Be,"EPSG:4326",je);Ue.getView().fit(We,Ue.getSize()),ke&&Ue.getView().setZoom(ke),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:Oe})}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(Ae){var e=this._uid?Ae+"-"+this._uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPcontrolList"),Ae.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Ae},_createShowControlListPictoElement:function(){var Ae=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),t.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowControlListPanelClick(Oe)}):e.attachEvent&&e.attachEvent("onclick",function(Oe){var ke=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!ke),Ae.onShowControlListPanelClick(Oe)}),e},_createControlListPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPcontrolListPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createControlListPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__body fr-modal__body",Ae},_createControlListPanelHeaderElement:function(){var Ae=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Mes outils",e.appendChild(t);var Oe=document.createElement("button");Oe.id=this._addUID("GPcontrolListPanelClose"),Oe.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowControlListPicto")).click()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowControlListPicto")).click()});var ke=document.createElement("span");return ke.className="GPelementHidden gpf-visible",ke.innerText="Fermer",Oe.appendChild(ke),e.appendChild(Oe),e},_createControlListPanelContentElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__content fr-modal__content",Ae},_createControlListPanelFooterElement:function(Ae){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var t=document.createElement("button");return t.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),t.innerText="+ Ajouter plus d'outils",t.addEventListener("click",function(){Ae.click()}),e.appendChild(t),e},_createControlListPanelControl:function(Ae){let e;try{e=Ae.getContainer()}catch{e=Ae.container}var t=document.createElement("div"),Oe=e.querySelector(".GPshowOpen").cloneNode();Oe.id=Oe.id+"-controllist",Oe.classList.add("inside-control-list"),t.appendChild(Oe);var ke=document.createElement("div"),Be=document.createElement("span");if(ke.appendChild(Be),e.querySelector(".GPshowOpen").ariaLabel?Be.innerText=e.querySelector(".GPshowOpen").ariaLabel:e.querySelector(".GPpanelTitle")?Be.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")&&(Be.innerText=e.querySelector("[class^='gpf-btn-header-']").title),Ae.description){var Ue=document.createElement("span");Ue.innerText=Ae.description,ke.appendChild(Ue)}return t.appendChild(ke),t.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),t}},logger$2=LoggerByDefault.getLogger("controlList"),ControlList=class ip extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ip))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$2.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),t=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(t);var Oe=this._ControlListPanelContainer=this._createControlListPanelElement(),ke=this._createControlListPanelDivElement();Oe.appendChild(ke);var Be=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();ke.appendChild(Be);var Ue=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(ke.appendChild(Ue),this.controlCatalogElement){var je=this._createControlListPanelFooterElement(this.controlCatalogElement);ke.appendChild(je)}return e.appendChild(Oe),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var Oe=this._pictoControlListButton.ariaPressed;this.collapsed=Oe!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Be=>{if(Be.listable){let Ue=this._createControlListPanelControl(Be);this._ControlListPanelContentContainer.appendChild(Ue)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);var title="contextMenu",ContextMenuDOM={_addUID:function(Ae){var e=this.uid?Ae+"-"+this.uid:Ae;return e},_createMainContainerElement:function(){var Ae=document.createElement("div");return Ae.id=this._addUID("GPpointInfo"),Ae.className="GPpointInfo GPwidget gpf-widget",Ae},_createShowPointInfoPictoElement:function(){var Ae=this,e=document.createElement("button");return e.id=this._addUID("GPshowPointInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowPointInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-widget fr-btn",e.title=`${title}`,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Ae.onShowPointInfoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var Oe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Oe),Ae.onShowPointInfoClick(t)}),e},_createPointInfoPanelElement:function(){var Ae=document.createElement("dialog");return Ae.id=this._addUID("GPpointInfoPanel"),Ae.className="GPpanel gpf-panel fr-modal",Ae},_createPointInfoPanelDivElement:function(){var Ae=document.createElement("div");return Ae.className="gpf-panel__pointInfo",Ae},_createPointInfoPanelHeaderElement:function(){var Ae=document.createElement("div");return Ae.className="GPpointInfoHeader gpf-panel__header_pointInfo",Ae},_createPointInfoPanelIconElement:function(){var Ae=document.createElement("label");return Ae.className="GPpanelHeader gpf-btn-header-pointInfo gpf-btn-icon-header-pointInfo",Ae.title="Adresse et coordonnées",Ae},_createPointInfoPanelTitleElement:function(){var Ae=document.createElement("div");return Ae.className="GPpanelTitle gpf-panel__title_pointInfo fr-pt-4w",Ae.innerHTML="Adresse et coordonnées",Ae},_createPointInfoPanelCloseElement:function(){var Ae=this,e=document.createElement("button");e.className="GPpanelClose GPpointInfoPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Ae._addUID("GPshowPointInfoPicto")).click(),Ae.onClosePointInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Ae._addUID("GPshowPointInfoPicto")).click(),Ae.onClosePointInfoClick()}),e},_createEntriesElement:function(){var Ae=document.createElement("div");Ae.className="point-info-content gpf-panel__body fr-modal__body";var e=document.createElement("div");return Ae.appendChild(e),Ae},_createPinDOMOverlay:function(Ae){var e=document.createElement("div"),t=document.createElement("img");return t.src=Ae,e.appendChild(t),e}};/*!
  * ol-contextmenu - v5.5.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Wed Aug 07 2024 12:29:18 GMT+0000 (Coordinated Universal Time)
  */var k$1=Object.defineProperty,I$1=(Ae,e,t)=>e in Ae?k$1(Ae,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Ae[e]=t,a$1=(Ae,e,t)=>I$1(Ae,typeof e!="symbol"?e+"":e,t),S$1={exports:{}};function x$2(){}x$2.prototype={on:function(Ae,e,t){var Oe=this.e||(this.e={});return(Oe[Ae]||(Oe[Ae]=[])).push({fn:e,ctx:t}),this},once:function(Ae,e,t){var Oe=this;function ke(){Oe.off(Ae,ke),e.apply(t,arguments)}return ke._=e,this.on(Ae,ke,t)},emit:function(Ae){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[Ae]||[]).slice(),Oe=0,ke=t.length;for(Oe;Oe<ke;Oe++)t[Oe].fn.apply(t[Oe].ctx,e);return this},off:function(Ae,e){var t=this.e||(this.e={}),Oe=t[Ae],ke=[];if(Oe&&e)for(var Be=0,Ue=Oe.length;Be<Ue;Be++)Oe[Be].fn!==e&&Oe[Be].fn._!==e&&ke.push(Oe[Be]);return ke.length?t[Ae]=ke:delete t[Ae],this}};S$1.exports=x$2;var _$1=S$1.exports.TinyEmitter=x$2,L$1=(Ae=>(Ae.CONTEXTMENU="contextmenu",Ae.CLICK="click",Ae.DBLCLICK="dblclick",Ae))(L$1||{}),p$1=(Ae=>(Ae.BEFOREOPEN="beforeopen",Ae.OPEN="open",Ae.CLOSE="close",Ae.ADD_MENU_ENTRY="add-menu-entry",Ae))(p$1||{});let w$1=class extends MapBrowserEvent{constructor(e){super(e.type,e.map,e.originalEvent)}};const z$1={width:150,scrollAt:4,eventType:L$1.CONTEXTMENU,defaultItems:!0,items:[]},d$1="ol-ctx-menu",r={container:`${d$1}-container`,separator:`${d$1}-separator`,submenu:`${d$1}-submenu`,hidden:`${d$1}-hidden`,icon:`${d$1}-icon`,zoomIn:`${d$1}-zoom-in`,zoomOut:`${d$1}-zoom-out`,unselectable:"ol-unselectable"},C$1=[{text:"Zoom In",classname:`${r.zoomIn} ${r.icon}`,callback:(Ae,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())+1,duration:700,center:Ae.coordinate})}},{text:"Zoom Out",classname:`${r.zoomOut} ${r.icon}`,callback:(Ae,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())-1,duration:700,center:Ae.coordinate})}}];function y$1(Ae){const e=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=Ae;t.firstChild;)e.append(t.firstChild);return e}function P$1(Ae){var We,Qe;const e=document.importNode(Ae),t=Ae.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${t}px`;const Oe=y$1("<span>Foo</span>"),ke=y$1("<span>Foo</span>"),Be=document.createElement("li"),Ue=document.createElement("li");Be.append(Oe),Ue.append(ke),e.append(Be),e.append(Ue),(We=Ae.parentNode)==null||We.append(e);const je=e.offsetHeight/2;return(Qe=Ae.parentNode)==null||Qe.removeChild(e),je}function N$1({parentNode:Ae,item:e,isSubmenu:t=!1,isInsideSubmenu:Oe=!1,emitter:ke}){const Be=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const Cn=`<span>${e.text}</span>`,An=y$1(Cn),En=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=r.icon:e.classname.includes(r.icon)===!1&&(e.classname+=` ${r.icon}`),En.setAttribute("style",`background-image:url(${e.icon})`)),En.id=Be,En.className=e.classname,En.append(An),Ae.append(En);const Sn={id:Be,isSubmenu:t,isInsideSubmenu:Oe,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return ke.emit(p$1.ADD_MENU_ENTRY,Sn,En),En}const Ue=`<li id="${Be}" class="${r.separator}"><hr></li>`,je=y$1(Ue);Ae.append(je);const We=Ae.lastChild,Qe={id:Be,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return ke.emit(p$1.ADD_MENU_ENTRY,Qe,We),We}function M$1({container:Ae,items:e,menuWidth:t,isInsideSubmenu:Oe,emitter:ke}){e.forEach(Be=>{if(typeof Be!="string"&&"items"in Be&&Array.isArray(Be.items)){const Ue=N$1({parentNode:Ae,item:Be,isSubmenu:!0,emitter:ke});Ue.classList.add(r.submenu);const je=document.createElement("ul");je.classList.add(r.container),je.style.width=`${t}px`,Ue.append(je),M$1({emitter:ke,menuWidth:t,container:je,items:Be.items,isInsideSubmenu:!0})}else N$1({parentNode:Ae,item:Be,isSubmenu:!1,isInsideSubmenu:Oe,emitter:ke})})}function b$1(Ae,e){if(!Ae)throw new Error(e)}let R$1=class extends Control{constructor(e={}){b$1(typeof e=="object","@param `opts` should be object type!");const t=document.createElement("div");super({element:t}),a$1(this,"map"),a$1(this,"emitter",new _$1),a$1(this,"container"),a$1(this,"coordinate",[]),a$1(this,"pixel",[]),a$1(this,"contextMenuEventListener"),a$1(this,"entryCallbackEventListener"),a$1(this,"mapMoveListener"),a$1(this,"lineHeight",0),a$1(this,"disabled"),a$1(this,"opened"),a$1(this,"items",[]),a$1(this,"menuEntries",new Map),a$1(this,"options"),this.options={...z$1,...e};const Oe=document.createElement("ul");t.append(Oe),t.style.width=`${this.options.width}px`,t.classList.add(r.container,r.unselectable,r.hidden),this.container=t,this.contextMenuEventListener=ke=>{this.handleContextMenu(ke)},this.entryCallbackEventListener=ke=>{this.handleEntryCallback(ke)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return C$1}countItems(){return this.menuEntries.size}extend(e){b$1(Array.isArray(e),"@param `items` should be an Array."),M$1({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(r.hidden),this.dispatchEvent(p$1.CLOSE)}isOpen(){return this.opened}updatePosition(e){b$1(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(p$1.ADD_MENU_ENTRY,(Oe,ke)=>{this.handleAddMenuEntry(Oe,ke)},this),this.items=this.options.defaultItems?this.options.items.concat(C$1):this.options.items,M$1({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const t=this.getMenuEntriesLength();this.lineHeight=t>0?this.container.offsetHeight/t:P$1(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(p$1.ADD_MENU_ENTRY)}removeMenuEntry(e){let t=document.getElementById(e);t==null||t.remove(),t=null,this.menuEntries.delete(e)}handleContextMenu(e){var t;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.BEFOREOPEN})),!this.disabled&&(this.options.eventType===L$1.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(t=e.target)==null||t.addEventListener("pointerdown",Oe=>{this.opened&&(Oe.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(r.hidden),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],t={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},Oe=this.getMenuEntriesLength(),ke={w:this.container.offsetWidth,h:Math.round(this.lineHeight*Oe)},Be=t.w>=ke.w?this.pixel[0]+5:this.pixel[0]-ke.w;this.container.style.left=`${Be}px`,this.container.style.top=t.h>=ke.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-ke.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",t.w-=ke.w;const Ue=Qe=>Array.from(Qe.children).filter(Cn=>Cn.tagName==="LI"&&Cn.classList.contains(r.submenu));let je=0;const We=(Qe,Cn)=>{je+=1,Ue(Qe).forEach(An=>{const En=Cn>=ke.w?ke.w-8:(ke.w+8)*-1,Sn=An.querySelector(`ul.${r.container}`),Tn=Math.round(this.lineHeight*Array.from(Sn.children).filter(Dn=>Dn.tagName==="LI").length);Sn.style.left=`${En}px`,Sn.style.right="auto",Sn.style.top=t.h>=Tn+ke.h?"0":`-${Sn.offsetHeight-25}px`,Sn.style.bottom="auto",Sn.style.zIndex=String(je),Ue(Sn).length>0&&We(Sn,Cn-ke.w)})};We(this.container.firstElementChild,t.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var Be;e.preventDefault(),e.stopPropagation();const t=e.currentTarget,Oe=this.menuEntries.get(t.id);if(!Oe)return;const ke={data:Oe.data,coordinate:this.coordinate};this.closeMenu(),(Be=Oe.callback)==null||Be.call(Oe,ke,this.map)}handleAddMenuEntry(e,t){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&t.addEventListener("click",this.entryCallbackEventListener,!1)}};var logger$1=LoggerByDefault.getLogger("contextMenu"),ContextMenu=class rp extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof rp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ContextMenu",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(e.addControl(this.contextmenu),e.addOverlay(this._marker),this.auto&&this.addEventsListeners()):this.auto&&this.removeEventsListeners(),super.setMap(e)}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!0,contextMenuItemsOptions:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonContextMenuShow=null,this.panelContextMenuContainer=null,this.panelContextMenuHeaderContainer=null,this.buttonContextMenuClose=null,this.panelContextMenuEntriesContainer=null,this.eventsListeners=[],this.controlList=[],this.itiPoints=new Array(7),this._marker=new Overlay({element:this._createPinDOMOverlay(Marker.lightOrange),stopEvent:!1,offset:Marker.defaultOffset});var t=this.getAvailableContextMenuControls.call(this);this.contextMenuItemsOptions=[],e.contextMenuItemsOptions instanceof Array&&e.contextMenuItemsOptions&&e.contextMenuItemsOptions.length>0&&(this.contextMenuItemsOptions=e.contextMenuItemsOptions.map(Oe=>({...Oe,classname:"ol-context-menu-custom fr-text--md"}))),this.contextmenu=new R$1({defaultItems:!1,width:250,items:t})}initContainer(){var e=this._createMainContainerElement(),t=this.buttonPointInfoShow=this._createShowPointInfoPictoElement();e.appendChild(t);var Oe=this.panelPointInfoContainer=this._createPointInfoPanelElement(),ke=this._createPointInfoPanelDivElement();Oe.appendChild(ke);var Be=this.panelPointInfoEntriesContainer=this._createEntriesElement();Oe.appendChild(Be);var Ue=this.panelPointInfoHeaderContainer=this._createPointInfoPanelHeaderElement(),je=this._createPointInfoPanelIconElement();Ue.appendChild(je);var We=this._createPointInfoPanelTitleElement();Ue.appendChild(We);var Qe=this.buttonPointInfoClose=this._createPointInfoPanelCloseElement();return Ue.appendChild(Qe),ke.appendChild(Ue),e.appendChild(Oe),logger$1.log(e),e}addEventsListeners(){this.contextmenu.on("open",e=>{e.this=this,this.onOpenContextMenu(e)}),this.contextmenu.on("close",e=>{e.this=this,this.onCloseContextMenu(e)})}removeEventsListeners(){}getAvailableContextMenuControls(){var e=[{text:"Adresse / Coordonnées",classname:"ol-context-menu-custom fr-text--md",callback:this.displayAdressAndCoordinate.bind(this),control_CLASSNAME:"ContextMenu"},{text:"Itinéraire depuis ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineStartPoint.bind(this),control_CLASSNAME:"Route"},{text:"Itinéraire vers ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineEndPoint.bind(this),control_CLASSNAME:"Route"},{text:"Isochrone - à proximité",classname:"ol-context-menu-custom fr-text--md",callback:this.computeIsochrone.bind(this),control_CLASSNAME:"Isocurve"},{text:"Ajouter des cartes / données",classname:"ol-context-menu-custom fr-text--md",callback:this.openCatalogue.bind(this),control_CLASSNAME:"Catalog"},"separator",{text:"Afficher la légende",classname:"ol-context-menu-custom fr-text--md",callback:this.displayLegend.bind(this),control_CLASSNAME:"Legends"}],t=this.getMap(),Oe=[];t&&(Oe=t.getControls().getArray());var ke=e.filter(Be=>{if(Oe.filter(je=>je.CLASSNAME&&je.CLASSNAME==Be.control_CLASSNAME).length>0||Be=="separator")return Be});return Array.prototype.push.apply(ke,this.contextMenuItemsOptions),ke}defineStartPoint(e){let t=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[0]=t,Oe.setData({points:this.itiPoints})}defineEndPoint(e){let t=this.to4326(e.coordinate);var Oe=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Route")[0];Oe._showRouteButton.click(),Oe._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[6]=t,Oe.setData({points:this.itiPoints})}to4326(e){return transform$1([parseFloat(e[0]),parseFloat(e[1])],"EPSG:3857","EPSG:4326")}computeIsochrone(e){var t=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Isocurve")[0];t._pictoIsoButton.click(),t._pictoIsoButton.setAttribute("aria-pressed",!0);let Oe=this.to4326(e.coordinate);var ke=t.getData();ke.point=Oe,t.setData(ke)}displayLegend(e){var t=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Legends")[0];t.buttonLegendsShow.click(),t.buttonLegendsShow.setAttribute("aria-pressed",!0)}openCatalogue(e){var t=this.getMap().getControls().getArray().filter(Oe=>Oe.CLASSNAME=="Catalog")[0];t.buttonCatalogShow.click(),t.buttonCatalogShow.setAttribute("aria-pressed",!0)}displayAdressAndCoordinate(e){let t=this.to4326(e.coordinate);this.panelPointInfoEntriesContainer.innerHTML="",this._marker.setPosition(fromLonLat(t)),this.buttonPointInfoShow.click(),this.buttonPointInfoShow.setAttribute("aria-pressed",!0);var Oe=document.createElement("div");Oe.innerHTML=t[0].toFixed(6)+", "+t[1].toFixed(6);var ke=document.createElement("div"),Be=document.createElement("div"),Ue=document.createElement("div");this.panelPointInfoEntriesContainer.appendChild(Oe),this.panelPointInfoEntriesContainer.appendChild(ke),this.panelPointInfoEntriesContainer.appendChild(Be),this.panelPointInfoEntriesContainer.appendChild(Ue);var je={rawResponse:!1,scope:null,onSuccess:function(Cn){Cn.elevations.length>0&&Cn.elevations[0].z&&(Ue.innerHTML="Altitude : "+Cn.elevations[0].z+"m")},onFailure:function(Cn){},positions:[{lon:t[0],lat:t[1]}],outputFormat:"json"};Gp.Services.getAltitude(je);var We={onSuccess:function(Cn){Cn.locations.length>0&&(Be.innerHTML="Parcelle : "+Cn.locations[0].placeAttributes.districtcode+" / "+Cn.locations[0].placeAttributes.section+" / "+Cn.locations[0].placeAttributes.number)},onFailure:function(Cn){},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"CadastralParcel",maximumResponses:1};Gp.Services.reverseGeocode(We);var Qe={onSuccess:function(Cn){Cn.locations.length>0&&(ke.innerHTML=Cn.locations[0].placeAttributes.label)},onFailure:function(Cn){},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"StreetAddress",maximumResponses:1};Gp.Services.reverseGeocode(Qe)}onShowPointInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$1.trace(e);var t=this.buttonPointInfoShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onClosePointInfoClick(e){logger$1.trace(e),this._marker.setPosition(void 0)}onCloseContextMenu(e){e.target.clear()}onOpenContextMenu(e){var t=()=>{e.this.controlList=[];var ke=e.this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route");ke.length>0&&ke[0].on("route:newresults",()=>{e.this.itiPoints=new Array(7)})},Oe=e.this.getAvailableContextMenuControls();e.target.clear(),e.target.extend(Oe),t()}};Object.assign(ContextMenu.prototype,ContextMenuDOM);Object.assign(ContextMenu.prototype,ContextMenu);Object.assign(ContextMenu.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ContextMenu=ContextMenu);function useUrlParams(){var Ae={};const e=useUrlSearchParams("history");if(e){const ke=Object.keys(e);for(let Be=0;Be<ke.length;Be++){const Ue=ke[Be];switch(Ue){case"c":var t=e[Ue].split(",");Ae.lon=t[0],Ae.lat=t[1];var Oe=fromLonLat(t);Ae.x=Oe[0],Ae.y=Oe[1],Ae.center=[Ae.lon,Ae.lat];break;case"l":Ae.layers=e[Ue];break;case"w":Ae.controls=e[Ue];break;case"z":Ae.zoom=parseInt(e[Ue],10);break}}}return Ae}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!0,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!0,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0},ContextMenu:{id:"ContextMenu",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var Ae=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&Ae.push(useControls[e].id);return Ae}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnées",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimétrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimétrique",disabled:useControls.ElevationPath.disable},{label:"Importer des données",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de données",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplémentaires non affichés",disabled:useControls.ControlList.disable},{label:"Menu contextuel",id:"contextMenu",name:useControls.ContextMenu.id,hint:"Menu contextuel au clic droit sur la carte",disabled:useControls.ContextMenu.disable}].filter(Ae=>Object.keys(useControls).includes(Ae.name)).filter(Ae=>!Ae.disabled)}function useControlsExtensionPosition(){return{shareOptions:"top-left",printOptions:"top-right",territoriesOptions:"bottom-left",layerSwitcherOptions:"top-right",legendsOptions:"top-right",getFeatureInfoOptions:"bottom-left",overviewMapOptions:"bottom-left",zoomOptions:"bottom-right",controlListOptions:"top-right",isocurveOptions:"top-right",routeOptions:"top-right",reverseGeocodeOptions:"top-right",fullscreenOptions:"bottom-right",measureLengthOptions:"top-right",measureAreaOptions:"top-right",measureAzimuthOptions:"top-right",elevationPathOptions:"top-right",layerImportOptions:"top-right",mousePositionOptions:"top-right"}}function useControlsPosition(){let Ae=[],e=[];return useControlsExtensionPosition().shareOptions.includes("left")&&Ae.push(useControls.Share.id),useControlsExtensionPosition().shareOptions.includes("right")&&e.push(useControls.Share.id),useControlsExtensionPosition().printOptions.includes("left")&&Ae.push(useControls.Print.id),useControlsExtensionPosition().printOptions.includes("right")&&e.push(useControls.Print.id),useControlsExtensionPosition().layerSwitcherOptions.includes("left")&&Ae.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().layerSwitcherOptions.includes("right")&&e.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().legendsOptions.includes("left")&&Ae.push(useControls.Legends.id),useControlsExtensionPosition().legendsOptions.includes("right")&&e.push(useControls.Legends.id),useControlsExtensionPosition().routeOptions.includes("left")&&Ae.push(useControls.Route.id),useControlsExtensionPosition().routeOptions.includes("right")&&e.push(useControls.Route.id),useControlsExtensionPosition().isocurveOptions.includes("left")&&Ae.push(useControls.Isocurve.id),useControlsExtensionPosition().isocurveOptions.includes("right")&&e.push(useControls.Isocurve.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("left")&&Ae.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("right")&&e.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("left")&&Ae.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("right")&&e.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().territoriesOptions.includes("left")&&Ae.push(useControls.Territories.id),useControlsExtensionPosition().territoriesOptions.includes("right")&&e.push(useControls.Territories.id),useControlsExtensionPosition().measureLengthOptions.includes("left")&&Ae.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureLengthOptions.includes("right")&&e.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureAreaOptions.includes("left")&&Ae.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAreaOptions.includes("right")&&e.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAzimuthOptions.includes("left")&&Ae.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().measureAzimuthOptions.includes("right")&&e.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().mousePositionOptions.includes("left")&&Ae.push(useControls.MousePosition.id),useControlsExtensionPosition().mousePositionOptions.includes("right")&&e.push(useControls.MousePosition.id),useControlsExtensionPosition().elevationPathOptions.includes("left")&&Ae.push(useControls.ElevationPath.id),useControlsExtensionPosition().elevationPathOptions.includes("right")&&e.push(useControls.ElevationPath.id),useControlsExtensionPosition().layerImportOptions.includes("left")&&Ae.push(useControls.LayerImport.id),useControlsExtensionPosition().layerImportOptions.includes("right")&&e.push(useControls.LayerImport.id),useControlsExtensionPosition().controlListOptions.includes("left")&&Ae.push(useControls.ControlList.id),useControlsExtensionPosition().controlListOptions.includes("right")&&e.push(useControls.ControlList.id),{left:Ae,right:e}}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=Ae=>NAMESPACE+"."+Ae,useMapStore=defineStore("map",()=>{const Ae=ref({});var e=useUrlParams(),t=DEFAULT.CONTROLS.split(",");for(const hr in e)if(Object.prototype.hasOwnProperty.call(e,hr)){if(hr==="controls"){var Oe=e[hr].split(",");t.forEach(function(wr){Oe.includes(wr)||(e[hr]=e[hr]+","+wr)})}const ar=e[hr];localStorage.setItem(ns(hr),ar)}var ke=useStorage(ns("zoom"),DEFAULT.ZOOM),Be=useStorage(ns("x"),DEFAULT.X),Ue=useStorage(ns("y"),DEFAULT.Y),je=useStorage(ns("lon"),DEFAULT.LON),We=useStorage(ns("lat"),DEFAULT.LAT),Qe=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),Cn=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),An=ref();function En(){return An.value}function Sn(hr){An.value=hr}var Tn=computed(()=>{var hr=location.pathname.slice(-1),ar=hr==="/"?location.pathname.slice(0,-1):location.pathname,wr=location.origin+ar.replace("/embed","");return`${wr}?c=${ti.value}&z=${Math.round(ke.value)}&l=${ni.value}&w=${oi.value}&permalink=yes`}),Dn=computed(()=>{var hr=location.pathname.slice(-1),ar=hr==="/"?location.pathname.slice(0,-1):location.pathname,wr=location.origin+(ar.includes("/embed")?ar:ar+"/embed");return`${wr}?c=${ti.value}&z=${Math.round(ke.value)}&l=${ni.value}&permalink=yes`}),ti=computed(()=>[je.value,We.value]),ni=useStorage(ns("layers"),DEFAULT.LAYERS);if(!ni.value){var ii=DEFAULT.LAYERS.split(",").filter(function(hr){return!!hr});for(let hr=0;hr<ii.length;hr++){var si=ii[hr].replace(/\(.*\)/,"");si&&Ni(si)}}var oi=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!oi.value){var ci=DEFAULT.CONTROLS.split(",").filter(function(hr){return!!hr});for(let hr=0;hr<ci.length;hr++)nr(ci[hr])}localStorage.setItem(ns("center"),ti.value),localStorage.setItem(ns("permalink"),Tn.value),localStorage.setItem(ns("permalinkShare"),Dn.value),watch(ke,()=>{localStorage.setItem(ns("zoom"),Math.round(ke.value))}),watch(Be,()=>{localStorage.setItem(ns("x"),Be.value)}),watch(Ue,()=>{localStorage.setItem(ns("y"),Ue.value)}),watch(je,()=>{localStorage.setItem(ns("lon"),je.value)}),watch(We,()=>{localStorage.setItem(ns("lat"),We.value)}),watch(ni,()=>{localStorage.setItem(ns("layers"),ni.value.toString())}),watch(Tn,()=>{localStorage.setItem(ns("permalink"),Tn.value.toString())}),watch(Dn,()=>{localStorage.setItem(ns("permalinkShare"),Dn.value.toString())}),watch(ti,()=>{localStorage.setItem(ns("center"),ti.value.toString())}),watch(Qe,()=>{localStorage.setItem(ns("firstVisit"),Qe.value)}),watch(Cn,()=>{localStorage.setItem(ns("noInformation"),Cn.value)}),watch(oi,()=>{localStorage.setItem(ns("controls"),oi.value.toString())});function Pi(){return Ae.value}function Ai(hr){Ae.value=hr}function fi(){return ni.value.split(",").map(function(hr){const ar=/\(.*\)/gm;return hr.replace(ar,"")}).filter(hr=>hr!="")}function Oi(){ni.value=""}function Ni(hr){if(hr&&!fi().includes(hr)){var ar=ni.value===""?[]:ni.value.split(",");ar.push(hr+"(1;1;0)"),ni.value=ar.toString()}}function ui(hr){const ar=fi().indexOf(hr);if(ar!==-1){var wr=ni.value.split(",");wr.splice(ar,1),ni.value=wr.toString()}}function li(hr,ar){const wr=fi().indexOf(hr);if(wr!==-1){var Fi=ni.value.split(","),cr=Fi[wr],rr=cr.substring(cr.indexOf("(")+1,cr.indexOf(")")),gr=rr.split(";");for(const vr in ar)if(Object.prototype.hasOwnProperty.call(ar,vr)){const pr=ar[vr];vr==="opacity"&&(gr[0]=pr),vr==="visible"&&(gr[1]=+pr),vr==="gray"&&(gr[2]=+pr)}ni.value=ni.value.replace(Fi[wr],hr+"("+gr.join(";")+")")}}function Ri(hr){if(hr){var ar=[];for(let Fi=0;Fi<hr.length;Fi++){const cr=hr[Fi],rr=fi().indexOf(cr);if(rr!==-1){var wr=ni.value.split(",")[rr];ar.push(wr)}}ni.value=ar.join(",")}}function Mi(hr){const ar=fi().indexOf(hr);if(ar!==-1){var wr=ni.value.split(","),Fi=wr[ar],cr=Fi.substring(Fi.indexOf("(")+1,Fi.indexOf(")")),rr=cr.split(";");return{opacity:Number(rr[0]),visible:!!Number(rr[1]),gray:!!Number(rr[2])}}}function Bi(){return oi.value.split(",").filter(function(hr){return!!hr})}function er(){oi.value=""}function nr(hr){if(!Bi().includes(hr)){var ar=oi.value===""?[]:oi.value.split(",");ar.push(hr),oi.value=ar.toString()}}function lr(hr){const ar=Bi().indexOf(hr);if(ar!==-1){var wr=oi.value.split(",");wr.splice(ar,1),oi.value=wr.toString()}}return{map:Ae,zoom:ke,center:ti,x:Be,y:Ue,lon:je,lat:We,firstVisit:Qe,noInformation:Cn,permalink:Tn,permalinkShare:Dn,menuCatalogueButton:An,getMap:Pi,setMap:Ai,getmenuCatalogueButton:En,setmenuCatalogueButton:Sn,getLayers:fi,cleanLayers:Oi,addLayer:Ni,removeLayer:ui,updateLayerProperty:li,updateLayerPosition:Ri,getLayerProperty:Mi,getControls:Bi,cleanControls:er,addControl:nr,removeControl:lr}}),mainMap="mainMap",printMap="printMap",_hoisted_1$d=["id"],__default__$k={name:"Map"},_sfc_main$N=Object.assign(__default__$k,{props:{mapId:String},setup(Ae,{expose:e}){const t=useMapStore(),Oe=Ae,ke=ref(null),Be=new Map$1({target:Oe.mapId,controls:[]});provide(Oe.mapId,Be),onMounted(()=>{CRS.load(),Be.setTarget(ke.value);const We=ke.value.getElementsByTagName("canvas");We.length&&(We[0].tabIndex=0),Oe.mapId==mainMap&&t.setMap(Be)});const Ue=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&ke.value.focus()};return e({mapRef:ke,updateSize:()=>{Be.updateSize()}}),(We,Qe)=>(openBlock(),createElementBlock("div",{id:Ae.mapId,ref_key:"mapRef",ref:ke,tabindex:"0",onMouseover:Ue},[renderSlot(We.$slots,"default")],40,_hoisted_1$d))}}),__default__$j={name:"View"},_sfc_main$M=Object.assign(__default__$j,{props:{zoom:Number,center:Array,mapId:String},setup(Ae){const e=useMapStore(),t=Ae,Oe=inject(t.mapId),ke=new View({zoom:t.zoom,center:fromLonLat(t.center)});return ke.on("change:center",Be=>{if(t.mapId==mainMap){e.x=Be.target.getCenter()[0],e.y=Be.target.getCenter()[1];var Ue=toLonLat(Be.target.getCenter());e.lon=Ue[0],e.lat=Ue[1]}}),ke.on("change:resolution",Be=>{e.zoom=ke.getZoom()}),onMounted(()=>{Oe&&Oe.setView(ke)}),(Be,Ue)=>null}}),_sfc_main$L={__name:"FullScreen",props:{mapId:String,visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&t.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(Oe.value):t.removeControl(Oe.value)}),(ke,Be)=>null}},useDataStore=defineStore("data",()=>{const Ae=ref({}),e=ref([]),t=ref({}),Oe=ref({}),ke=ref({}),Be=ref({}),Ue=ref([]),je=ref([]),We=ref(!1),Qe=ref("");async function Cn(){try{const li="data/layers.json",Mi=await fetch("https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/edito.json"),er=await(await fetch(li)).json(),nr=await Mi.json(),lr=Object.fromEntries(Object.keys(nr.layers).map(ar=>[ar,{...er.layers[ar],...nr.layers[ar]}])),hr={...er.layers,...lr};return Object.keys(hr).map(ar=>{hr[ar].key=ar;let wr={};return wr[ar]=hr[ar],wr}),Ue.value=nr.territories,Be.value=nr.contacts,Ae.value=nr.informations,e.value=nr.thematics,je.value=nr.featured||[],t.value=hr,Oe.value=er.generalOptions,ke.value=er.tileMatrixSets,this.isLoaded=!0,hr}catch(li){console.log(li),this.isLoaded=!1,Qe.value=li.message}}function An(){return Ue.value}function En(){return Be.value}function Sn(){return Ae.value}function Tn(){return e.value}function Dn(){return je.value}function ti(){return t.value}function ni(li,Ri){for(const Mi in t.value)if(Object.hasOwnProperty.call(t.value,Mi)){const Bi=t.value[Mi];if(Bi.name===li&&Bi.serviceParams.id.split(":")[1]===Ri)return Bi.name+"$GEOPORTAIL:"+Bi.serviceParams.id}}function ii(li,Ri){const Mi=this.getLayerIdByName(li,Ri);return this.getLayerByID(Mi)}function si(li){return t.value[li]}function oi(li){return Object.values(t.value).filter(Ri=>{if(li&&Ri.title==li)return Ri})}function ci(li){var Ri=[],Mi=Oe.value.apiKeys;for(var Bi in Mi){var er=Mi[Bi];er.forEach(function(nr){nr===li&&Ri.push(Bi)})}return Ri}function Pi(li,Ri){var Mi=null;if((Ri==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var Bi=this.getLayerIdByName(li,Ri);Mi=this.getLayerParamsByID(Bi)}return Mi}function Ai(li){var Ri=null;if(li){Ri={};var Mi=this.getLayerByID(li),Bi=this.getLayerKeysByID(li);if(Bi.length===0)return;for(var er=0;er<Bi.length;er++)Mi.serviceParams.serverUrl[Bi[er]]&&(Ri.url=Mi.serviceParams.serverUrl[Bi[er]]);if(/\/v\//.test(Ri.url)?Ri.styles=" ":Ri.styles=Mi.styles[0].name,Ri.version=Mi.serviceParams.version,Ri.format=Mi.formats[0].name,Ri.projection=Mi.defaultProjection,Ri.minScale=Mi.globalConstraint.minScaleDenominator,Ri.maxScale=Mi.globalConstraint.maxScaleDenominator,Ri.extent=Mi.globalConstraint.bbox,Ri.legends=Mi.legends,Ri.title=Mi.title,Ri.description=Mi.description,Mi.wmtsOptions){Ri.tileMatrixSetLimits=Mi.wmtsOptions.tileMatrixSetLimits;var nr=Mi.wmtsOptions.tileMatrixSetLink;if(nr){Ri.TMSLink=nr;var lr=this.getTileMatrixSetByID(nr);Ri.matrixIds=Object.keys(lr.tileMatrices),Ri.tileMatrices=lr.tileMatrices,Ri.nativeResolutions=lr.nativeResolutions}}}return Ri}function fi(li){var Ri=null;if(li){var Mi=this.getLayerByID(li);Ri={},Ri.projection=Mi.defaultProjection,Ri.minScale=Mi.globalConstraint.minScaleDenominator,Ri.maxScale=Mi.globalConstraint.maxScaleDenominator,Ri.extent=Mi.globalConstraint.bbox}return Ri}function Oi(li,Ri){var Mi=this.getLayerIdByName(li,Ri);return this.getGlobalConstraintsByID(Mi)}function Ni(){return ke.value}function ui(li){return ke.value[li]}return{error:Qe,isLoaded:We,fetchData:Cn,getTerritories:An,getContacts:En,getInformations:Sn,getThematics:Tn,getFeatured:Dn,getLayers:ti,getLayerKeysByID:ci,getLayerIdByName:ni,getLayerByName:ii,getLayerByID:si,getLayerByTitle:oi,getTileMatrixSets:Ni,getTileMatrixSetByID:ui,getLayerParamsByName:Pi,getLayerParamsByID:Ai,getGlobalConstraintsByID:fi,getGlobalConstraintsByName:Oi}});function useActionButtonEulerian(Ae){Ae.setAttribute("data-fr-analytics-action",Ae.title),Ae.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$K={__name:"ReverseGeocode",props:{mapId:String,visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("reverseGeocode:onclickresult",Be),ke.value.on("reverseGeocode:compute",Ue),e.analytic)){var je=ke.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var je=ke.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(je)}});const Be=je=>{t.debug(je)},Ue=je=>{t.debug(je)};return(je,We)=>null}},IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",_sfc_main$J={__name:"SearchEngine",props:{mapId:String,visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=useMapStore(),ke=useDataStore(),Be=inject(e.mapId),Ue=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(Be.addControl(Ue.value),Ue.value.on("searchengine:search:click",je),Ue.value.on("searchengine:autocomplete:click",We),Ue.value.on("searchengine:geocode:click",Qe),Ue.value.on("searchengine:coordinates:click",Cn),Ue.value.on("searchengine:geolocation:click",An))}),onBeforeUpdate(()=>{e.visibility||Be.removeControl(Ue.value)}),onUpdated(()=>{e.visibility&&Be.addControl(Ue.value)}),onUnmounted(()=>{});const je=En=>{var Sn=ke.getLayerIdByName(En.suggest.name,En.suggest.service);t.debug("onClickSearch",Sn),Oe.addLayer(Sn)},We=En=>{},Qe=En=>{},Cn=En=>{},An=En=>{};return(En,Sn)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const Oe=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=Oe+"-inner",this.element.className=Oe+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,Oe=e.projection,ke=this.getUnits(),Be=ke=="degrees"?"degrees":"m";let Ue=getPointResolution(Oe,e.resolution,t,Be);const je=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,We=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let Qe=je*Ue,Cn="";if(ke=="degrees"){const si=METERS_PER_UNIT$1.degrees;Qe*=si,Qe<si/60?(Cn="″",Ue*=3600):Qe<si?(Cn="′",Ue*=60):Cn="°"}else if(ke=="imperial")Qe<.9144?(Cn="in",Ue/=.0254):Qe<1609.344?(Cn="ft",Ue/=.3048):(Cn="mi",Ue/=1609.344);else if(ke=="nautical")Ue/=1852,Cn="NM";else if(ke=="metric")Qe<1e-6?(Cn="nm",Ue*=1e9):Qe<.001?(Cn="μm",Ue*=1e6):Qe<1?(Cn="mm",Ue*=1e3):Qe<1e3?Cn="m":(Cn="km",Ue/=1e3);else if(ke=="us")Qe<.9144?(Cn="in",Ue*=39.37):Qe<1609.344?(Cn="ft",Ue/=.30480061):(Cn="mi",Ue/=1609.3472);else throw new Error("Invalid units");let An=3*Math.floor(Math.log(je*Ue)/Math.log(10)),En,Sn,Tn,Dn,ti,ni;for(;;){Tn=Math.floor(An/3);const si=Math.pow(10,Tn);if(En=LEADING_DIGITS[(An%3+3)%3]*si,Sn=Math.round(En/Ue),isNaN(Sn)){this.element.style.display="none",this.renderedVisible_=!1;return}if(We!==void 0&&Sn>=We){En=Dn,Sn=ti,Tn=ni;break}else if(Sn>=je)break;Dn=En,ti=Sn,ni=Tn,++An}const ii=this.scaleBar_?this.createScaleBar(Sn,En,Cn):En.toFixed(Tn<0?-Tn:0)+" "+Cn;this.renderedHTML_!=ii&&(this.innerElement_.innerHTML=ii,this.renderedHTML_=ii),this.renderedWidth_!=Sn&&(this.innerElement_.style.width=Sn+"px",this.renderedWidth_=Sn),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,Oe){const ke=this.getScaleForResolution(),Be=ke<1?Math.round(1/ke).toLocaleString()+" : 1":"1 : "+Math.round(ke).toLocaleString(),Ue=this.scaleBarSteps_,je=e/Ue,We=[this.createMarker("absolute")];for(let Cn=0;Cn<Ue;++Cn){const An=Cn%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";We.push(`<div><div class="ol-scale-singlebar ${An}" style="width: ${je}px;"></div>`+this.createMarker("relative")+(Cn%2===0||Ue===2?this.createStepText(Cn,e,!1,t,Oe):"")+"</div>")}return We.push(this.createStepText(Ue,e,!0,t,Oe)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Be+"</div>":"")+We.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,Oe,ke,Be){const je=(e===0?0:Math.round(ke/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Be),We=e===0?-3:t/this.scaleBarSteps_*-1,Qe=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${We}px;text-align: ${e===0?"left":"center"};min-width: ${Qe}px;left: ${Oe?t+"px":"unset"};">`+je+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,Oe=1e3/25.4;return e*Oe*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$I={__name:"ScaleLine",props:{mapId:String,visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&t.addControl(Oe.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(Oe.value)}),onUpdated(()=>{e.visibility&&t.addControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$H={__name:"OverviewMap",props:{mapId:String,visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var je=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}else Oe.removeControl(ke.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(Oe.addControl(ke.value),ke.value.on("overviewmap:toggle",Ue),e.analytic)){var je=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var je=ke.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}else Oe.removeControl(ke.value)});function Ue(je){t.debug(je)}return(je,We)=>null}},_sfc_main$G={__name:"Zoom",props:{mapId:String,visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(Oe.addControl(ke.value),ke.value.on("zoom:in",Be),ke.value.on("zoom:out",Ue))}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{e.visibility&&Oe.addControl(ke.value)});function Be(je){t.debug(je)}function Ue(je){t.debug(je)}return(je,We)=>null}},_sfc_main$F={__name:"LayerSwitcher",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=useMapStore(),ke=useDataStore(),Be=inject(e.mapId),Ue=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(Be.addControl(Ue.value),e.analytic){var Sn=Ue.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(Sn)}Ue.value.on("layerswitcher:add",je),Ue.value.on("layerswitcher:remove",We),Ue.value.on("layerswitcher:extent",Qe),Ue.value.on("layerswitcher:change:opacity",Cn),Ue.value.on("layerswitcher:change:visibility",An),Ue.value.on("layerswitcher:change:position",En)}}),onBeforeUpdate(()=>{if(!e.visibility&&(Be.removeControl(Ue.value),e.analytic)){var Sn=Ue.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(Sn)}}),onUpdated(()=>{e.visibility&&Be.addControl(Ue.value)});const je=Sn=>{var Tn=ke.getLayerIdByName(Sn.layer.name,Sn.layer.service);t.debug("onAddLayer",Tn),Tn&&Oe.addLayer(Tn)},We=Sn=>{var Tn=ke.getLayerIdByName(Sn.layer.name,Sn.layer.service);t.debug("onRemoveLayer",Tn),Tn&&Oe.removeLayer(Tn)},Qe=Sn=>{if(t.debug("onZoomToExtentLayer",Sn),Sn.error){var Tn=ke.getGlobalConstraintsByName(Sn.layer.name,Sn.layer.service);if(Tn){var Dn=Be.getView(),ti=Dn.getProjection(),ni=[Tn.extent.left,Tn.extent.bottom,Tn.extent.right,Tn.extent.top],ii=Tn.crs;ii||(ii="EPSG:4326");var si=transformExtent(ni,ii,ti);si&&Dn.fit(si)}}},Cn=Sn=>{var Tn=ke.getLayerIdByName(Sn.layer.name,Sn.layer.service);t.debug("onChangeOpacityLayer",Sn),Oe.updateLayerProperty(Tn,{opacity:Sn.opacity})},An=Sn=>{var Tn=ke.getLayerIdByName(Sn.layer.name,Sn.layer.service);t.debug("onChangeVisibilityLayer",Sn),Oe.updateLayerProperty(Tn,{visible:Sn.visibility})},En=Sn=>{t.debug("onChangePositionLayer",Sn),Oe.updateLayerPosition(Sn.layers.reverse().map(Tn=>{if(Tn.name&&Tn.service)return ke.getLayerIdByName(Tn.name,Tn.service)}))};return(Sn,Tn)=>null}},_sfc_main$E={__name:"Legends",props:{mapId:String,visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$D={__name:"Drawing",props:{mapId:String,visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new Drawing(e.drawingOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$C={__name:"Isocurve",props:{mapId:String,visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new Isocurve(e.isocurveOptions));onMounted(()=>{if(e.visibility){if(Oe.addControl(ke.value),e.analytic){var We=ke.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(We)}ke.value.on("isocurve:drawstart",Be),ke.value.on("socurve:drawend",Ue),ke.value.on("isocurve:compute",je)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},je=We=>{t.debug(We)};return(We,Qe)=>null}},_sfc_main$B={__name:"Route",props:{mapId:String,visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger();useDataStore();const Oe=inject(e.mapId),ke=ref(new Route(e.routeOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("route:drawstart",Be),ke.value.on("route:drawend",Ue),ke.value.on("route:compute",je),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},je=We=>{t.debug(We)};return(We,Qe)=>null}},_sfc_main$A={__name:"MeasureLength",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$z={__name:"MeasureArea",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$y={__name:"MeasureAzimuth",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(Ae){const e=Ae,t=inject(e.mapId),Oe=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(Oe.value),e.analytic){var ke=Oe.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(ke)}}else t.removeControl(Oe.value)}),(ke,Be)=>null}},_sfc_main$x={__name:"MousePosition",props:{mapId:String,visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(Ae){const e=Ae;dist.useLogger();const t=inject(e.mapId),Oe=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(ke)}}),onBeforeUpdate(()=>{e.visibility||t.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(t.addControl(Oe.value),e.analytic)){var ke=Oe.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(ke)}}),(ke,Be)=>null}},_sfc_main$w={__name:"ElevationPath",props:{mapId:String,visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new ElevationPath(e.elevationPathOptions));onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),ke.value.on("elevationpath:drawstart",Be),ke.value.on("elevationpath:drawend",Ue),ke.value.on("elevationpath:compute",je),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var We=ke.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(We)}});const Be=We=>{t.debug(We)},Ue=We=>{t.debug(We)},je=We=>{t.debug(We)};return(We,Qe)=>null}},_sfc_main$v={__name:"Territories",props:{mapId:String,visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(Ae){const e=Ae;dist.useLogger();const t=useDataStore(),Oe=inject(e.mapId),ke=ref(new Territories(e.territoriesOptions));function Be(){var Ue=t.getTerritories();for(let je=0;je<Ue.length;je++){const We=Ue[je];ke.value.setTerritory(We)}}return onMounted(()=>{if(e.visibility&&(Be(),Oe.addControl(ke.value),e.analytic)){var Ue=ke.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Ue)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Be(),Oe.addControl(ke.value),e.analytic)){var Ue=ke.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Ue)}}),(Ue,je)=>null}},_sfc_main$u={__name:"GetFeatureInfo",props:{mapId:String,visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var je=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}else Oe.removeControl(ke.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(Oe.addControl(ke.value),ke.value.on("GetFeatureInfo:toggle",Ue),e.analytic)){var je=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(Oe.addControl(ke.value),e.analytic){var je=ke.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}else Oe.removeControl(ke.value)});function Ue(je){t.debug(je)}return(je,We)=>null}},_sfc_main$t={__name:"LayerImport",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new LayerImport(e.layerImportOptions));return onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){t.debug(ke.value.element);var Be=ke.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),(Be,Ue)=>null}},selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$s={__name:"ControlList",props:{mapId:String,visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(Ae){const e=Ae,t=dist.useLogger(),Oe=inject(e.mapId),ke=ref(new ControlList(e.controlListOptions)),Be=useMatchMedia("SM"),Ue=useMatchMediaHeight("XS");return watch(Be,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(Ue,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(Oe.removeControl(ke.value),e.visibility){if(Oe.addControl(ke.value),e.analytic){t.debug(ke.value.element);var je=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){t.debug(ke.value.element);var je=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{e.visibility||Oe.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Oe.addControl(ke.value),e.analytic)){var je=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}}),(je,We)=>null}},_sfc_main$r={__name:"ContextMenu",props:{mapId:String,visibility:Boolean,analytic:Boolean,contextMenuOptions:Object},setup(Ae){const e=useMatchMedia("SM"),t=Ae,Oe=inject(t.mapId),ke=ref(new ContextMenu(t.contextMenuOptions));return onMounted(()=>{t.visibility&&!e.value&&Oe.addControl(ke.value)}),onBeforeUpdate(()=>{t.visibility&&!e.value?Oe.addControl(ke.value):Oe.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$q={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(Ae){const e=Ae,t=dist.useLogger();t.debug(e.layerOptions);const Oe=useDataStore(),ke=inject(e.mapId);var Be=null;return onMounted(()=>{var Ue=Oe.getLayerByName(e.layerOptions.name,e.layerOptions.service),je=Oe.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);Ue.params=je,t.debug("layer to add",Ue);var We=e.layerOptions.service,Qe=e.layerOptions.name,Cn={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},An={preload:1/0,cacheSize:1024};switch(We){case"WMS":Be=new LayerWMS({layer:Qe,configuration:Ue,apiKey:"ign_scan_ws",olParams:Object.assign(Cn,An)});break;case"WMTS":Be=new LayerWMTS({layer:Qe,configuration:Ue,apiKey:"ign_scan_ws",olParams:Object.assign(Cn,An)});break;case"TMS":Cn.declutter=!0,Be=new LayerMapBox({layer:Qe,configuration:Ue,apiKey:"ign_scan_ws"},Cn);break}Be&&ke.addLayer(Be)}),onUnmounted(()=>{ke.removeLayer(Be)}),(Ue,je)=>(openBlock(),createElementBlock("div",null,[renderSlot(Ue.$slots,"default")]))}},_sfc_main$p={__name:"Layers",props:{selectedLayers:Object,mapId:String},setup(Ae){const e=Ae;dist.useLogger();var t=computed(()=>toRaw(e.selectedLayers).map(Oe=>({name:Oe.name,service:Oe.serviceParams.id.split(":")[1],key:Oe.key,opacity:Oe.hasOwnProperty("opacity")?Oe.opacity:1,visible:Oe.hasOwnProperty("visible")?Oe.visible:!0,gray:Oe.hasOwnProperty("gray")?Oe.gray:!0})));return(Oe,ke)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Be=>(openBlock(),createBlock(_sfc_main$q,{key:Be.key,"layer-options":Be,"map-id":Ae.mapId},null,8,["layer-options","map-id"]))),128))}};function _typeof(Ae){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Ae)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Ae,e){for(var t=new u16(31),Oe=0;Oe<31;++Oe)t[Oe]=e+=1<<Ae[Oe-1];for(var ke=new i32(t[30]),Oe=1;Oe<30;++Oe)for(var Be=t[Oe];Be<t[Oe+1];++Be)ke[Be]=Be-t[Oe]<<5|Oe;return{b:t,r:ke}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(Ae,e,t){for(var Oe=Ae.length,ke=0,Be=new u16(e);ke<Oe;++ke)Ae[ke]&&++Be[Ae[ke]-1];var Ue=new u16(e);for(ke=1;ke<e;++ke)Ue[ke]=Ue[ke-1]+Be[ke-1]<<1;var je;if(t){je=new u16(1<<e);var We=15-e;for(ke=0;ke<Oe;++ke)if(Ae[ke])for(var Qe=ke<<4|Ae[ke],Cn=e-Ae[ke],An=Ue[Ae[ke]-1]++<<Cn,En=An|(1<<Cn)-1;An<=En;++An)je[rev[An]>>We]=Qe}else for(je=new u16(Oe),ke=0;ke<Oe;++ke)Ae[ke]&&(je[ke]=rev[Ue[Ae[ke]-1]++]>>15-Ae[ke]);return je},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Ae){for(var e=Ae[0],t=1;t<Ae.length;++t)Ae[t]>e&&(e=Ae[t]);return e},bits=function(Ae,e,t){var Oe=e/8|0;return(Ae[Oe]|Ae[Oe+1]<<8)>>(e&7)&t},bits16=function(Ae,e){var t=e/8|0;return(Ae[t]|Ae[t+1]<<8|Ae[t+2]<<16)>>(e&7)},shft=function(Ae){return(Ae+7)/8|0},slc=function(Ae,e,t){return(t==null||t>Ae.length)&&(t=Ae.length),new u8(Ae.subarray(e,t))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Ae,e,t){var Oe=new Error(e||ec[Ae]);if(Oe.code=Ae,Error.captureStackTrace&&Error.captureStackTrace(Oe,err),!t)throw Oe;return Oe},inflt=function(Ae,e,t,Oe){var ke=Ae.length,Be=0;if(!ke||e.f&&!e.l)return t||new u8(0);var Ue=!t,je=Ue||e.i!=2,We=e.i;Ue&&(t=new u8(ke*3));var Qe=function(Hr){var es=t.length;if(Hr>es){var ir=new u8(Math.max(es*2,Hr));ir.set(t),t=ir}},Cn=e.f||0,An=e.p||0,En=e.b||0,Sn=e.l,Tn=e.d,Dn=e.m,ti=e.n,ni=ke*8;do{if(!Sn){Cn=bits(Ae,An,1);var ii=bits(Ae,An+1,3);if(An+=3,ii)if(ii==1)Sn=flrm,Tn=fdrm,Dn=9,ti=5;else if(ii==2){var Pi=bits(Ae,An,31)+257,Ai=bits(Ae,An+10,15)+4,fi=Pi+bits(Ae,An+5,31)+1;An+=14;for(var Oi=new u8(fi),Ni=new u8(19),ui=0;ui<Ai;++ui)Ni[clim[ui]]=bits(Ae,An+ui*3,7);An+=Ai*3;for(var li=max(Ni),Ri=(1<<li)-1,Mi=hMap(Ni,li,1),ui=0;ui<fi;){var Bi=Mi[bits(Ae,An,Ri)];An+=Bi&15;var si=Bi>>4;if(si<16)Oi[ui++]=si;else{var er=0,nr=0;for(si==16?(nr=3+bits(Ae,An,3),An+=2,er=Oi[ui-1]):si==17?(nr=3+bits(Ae,An,7),An+=3):si==18&&(nr=11+bits(Ae,An,127),An+=7);nr--;)Oi[ui++]=er}}var lr=Oi.subarray(0,Pi),hr=Oi.subarray(Pi);Dn=max(lr),ti=max(hr),Sn=hMap(lr,Dn,1),Tn=hMap(hr,ti,1)}else err(1);else{var si=shft(An)+4,oi=Ae[si-4]|Ae[si-3]<<8,ci=si+oi;if(ci>ke){We&&err(0);break}je&&Qe(En+oi),t.set(Ae.subarray(si,ci),En),e.b=En+=oi,e.p=An=ci*8,e.f=Cn;continue}if(An>ni){We&&err(0);break}}je&&Qe(En+131072);for(var ar=(1<<Dn)-1,wr=(1<<ti)-1,Fi=An;;Fi=An){var er=Sn[bits16(Ae,An)&ar],cr=er>>4;if(An+=er&15,An>ni){We&&err(0);break}if(er||err(2),cr<256)t[En++]=cr;else if(cr==256){Fi=An,Sn=null;break}else{var rr=cr-254;if(cr>264){var ui=cr-257,gr=fleb[ui];rr=bits(Ae,An,(1<<gr)-1)+fl[ui],An+=gr}var vr=Tn[bits16(Ae,An)&wr],pr=vr>>4;vr||err(3),An+=vr&15;var hr=fd[pr];if(pr>3){var gr=fdeb[pr];hr+=bits16(Ae,An)&(1<<gr)-1,An+=gr}if(An>ni){We&&err(0);break}je&&Qe(En+131072);var _r=En+rr;if(En<hr){var Ar=Be-hr,Sr=Math.min(hr,_r);for(Ar+En<0&&err(3);En<Sr;++En)t[En]=Oe[Ar+En]}for(;En<_r;++En)t[En]=t[En-hr]}}e.l=Sn,e.p=Fi,e.b=En,e.f=Cn,Sn&&(Cn=1,e.m=Dn,e.d=Tn,e.n=ti)}while(!Cn);return En!=t.length&&Ue?slc(t,0,En):t.subarray(0,En)},wbits=function(Ae,e,t){t<<=e&7;var Oe=e/8|0;Ae[Oe]|=t,Ae[Oe+1]|=t>>8},wbits16=function(Ae,e,t){t<<=e&7;var Oe=e/8|0;Ae[Oe]|=t,Ae[Oe+1]|=t>>8,Ae[Oe+2]|=t>>16},hTree=function(Ae,e){for(var t=[],Oe=0;Oe<Ae.length;++Oe)Ae[Oe]&&t.push({s:Oe,f:Ae[Oe]});var ke=t.length,Be=t.slice();if(!ke)return{t:et$1,l:0};if(ke==1){var Ue=new u8(t[0].s+1);return Ue[t[0].s]=1,{t:Ue,l:1}}t.sort(function(ci,Pi){return ci.f-Pi.f}),t.push({s:-1,f:25001});var je=t[0],We=t[1],Qe=0,Cn=1,An=2;for(t[0]={s:-1,f:je.f+We.f,l:je,r:We};Cn!=ke-1;)je=t[t[Qe].f<t[An].f?Qe++:An++],We=t[Qe!=Cn&&t[Qe].f<t[An].f?Qe++:An++],t[Cn++]={s:-1,f:je.f+We.f,l:je,r:We};for(var En=Be[0].s,Oe=1;Oe<ke;++Oe)Be[Oe].s>En&&(En=Be[Oe].s);var Sn=new u16(En+1),Tn=ln(t[Cn-1],Sn,0);if(Tn>e){var Oe=0,Dn=0,ti=Tn-e,ni=1<<ti;for(Be.sort(function(Pi,Ai){return Sn[Ai.s]-Sn[Pi.s]||Pi.f-Ai.f});Oe<ke;++Oe){var ii=Be[Oe].s;if(Sn[ii]>e)Dn+=ni-(1<<Tn-Sn[ii]),Sn[ii]=e;else break}for(Dn>>=ti;Dn>0;){var si=Be[Oe].s;Sn[si]<e?Dn-=1<<e-Sn[si]++-1:++Oe}for(;Oe>=0&&Dn;--Oe){var oi=Be[Oe].s;Sn[oi]==e&&(--Sn[oi],++Dn)}Tn=e}return{t:new u8(Sn),l:Tn}},ln=function(Ae,e,t){return Ae.s==-1?Math.max(ln(Ae.l,e,t+1),ln(Ae.r,e,t+1)):e[Ae.s]=t},lc=function(Ae){for(var e=Ae.length;e&&!Ae[--e];);for(var t=new u16(++e),Oe=0,ke=Ae[0],Be=1,Ue=function(We){t[Oe++]=We},je=1;je<=e;++je)if(Ae[je]==ke&&je!=e)++Be;else{if(!ke&&Be>2){for(;Be>138;Be-=138)Ue(32754);Be>2&&(Ue(Be>10?Be-11<<5|28690:Be-3<<5|12305),Be=0)}else if(Be>3){for(Ue(ke),--Be;Be>6;Be-=6)Ue(8304);Be>2&&(Ue(Be-3<<5|8208),Be=0)}for(;Be--;)Ue(ke);Be=1,ke=Ae[je]}return{c:t.subarray(0,Oe),n:e}},clen=function(Ae,e){for(var t=0,Oe=0;Oe<e.length;++Oe)t+=Ae[Oe]*e[Oe];return t},wfblk=function(Ae,e,t){var Oe=t.length,ke=shft(e+2);Ae[ke]=Oe&255,Ae[ke+1]=Oe>>8,Ae[ke+2]=Ae[ke]^255,Ae[ke+3]=Ae[ke+1]^255;for(var Be=0;Be<Oe;++Be)Ae[ke+Be+4]=t[Be];return(ke+4+Oe)*8},wblk=function(Ae,e,t,Oe,ke,Be,Ue,je,We,Qe,Cn){wbits(e,Cn++,t),++ke[256];for(var An=hTree(ke,15),En=An.t,Sn=An.l,Tn=hTree(Be,15),Dn=Tn.t,ti=Tn.l,ni=lc(En),ii=ni.c,si=ni.n,oi=lc(Dn),ci=oi.c,Pi=oi.n,Ai=new u16(19),fi=0;fi<ii.length;++fi)++Ai[ii[fi]&31];for(var fi=0;fi<ci.length;++fi)++Ai[ci[fi]&31];for(var Oi=hTree(Ai,7),Ni=Oi.t,ui=Oi.l,li=19;li>4&&!Ni[clim[li-1]];--li);var Ri=Qe+5<<3,Mi=clen(ke,flt)+clen(Be,fdt)+Ue,Bi=clen(ke,En)+clen(Be,Dn)+Ue+14+3*li+clen(Ai,Ni)+2*Ai[16]+3*Ai[17]+7*Ai[18];if(We>=0&&Ri<=Mi&&Ri<=Bi)return wfblk(e,Cn,Ae.subarray(We,We+Qe));var er,nr,lr,hr;if(wbits(e,Cn,1+(Bi<Mi)),Cn+=2,Bi<Mi){er=hMap(En,Sn,0),nr=En,lr=hMap(Dn,ti,0),hr=Dn;var ar=hMap(Ni,ui,0);wbits(e,Cn,si-257),wbits(e,Cn+5,Pi-1),wbits(e,Cn+10,li-4),Cn+=14;for(var fi=0;fi<li;++fi)wbits(e,Cn+3*fi,Ni[clim[fi]]);Cn+=3*li;for(var wr=[ii,ci],Fi=0;Fi<2;++Fi)for(var cr=wr[Fi],fi=0;fi<cr.length;++fi){var rr=cr[fi]&31;wbits(e,Cn,ar[rr]),Cn+=Ni[rr],rr>15&&(wbits(e,Cn,cr[fi]>>5&127),Cn+=cr[fi]>>12)}}else er=flm,nr=flt,lr=fdm,hr=fdt;for(var fi=0;fi<je;++fi){var gr=Oe[fi];if(gr>255){var rr=gr>>18&31;wbits16(e,Cn,er[rr+257]),Cn+=nr[rr+257],rr>7&&(wbits(e,Cn,gr>>23&31),Cn+=fleb[rr]);var vr=gr&31;wbits16(e,Cn,lr[vr]),Cn+=hr[vr],vr>3&&(wbits16(e,Cn,gr>>5&8191),Cn+=fdeb[vr])}else wbits16(e,Cn,er[gr]),Cn+=nr[gr]}return wbits16(e,Cn,er[256]),Cn+nr[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Ae,e,t,Oe,ke,Be){var Ue=Be.z||Ae.length,je=new u8(Oe+Ue+5*(1+Math.ceil(Ue/7e3))+ke),We=je.subarray(Oe,je.length-ke),Qe=Be.l,Cn=(Be.r||0)&7;if(e){Cn&&(We[0]=Be.r>>3);for(var An=deo[e-1],En=An>>13,Sn=An&8191,Tn=(1<<t)-1,Dn=Be.p||new u16(32768),ti=Be.h||new u16(Tn+1),ni=Math.ceil(t/3),ii=2*ni,si=function(mr){return(Ae[mr]^Ae[mr+1]<<ni^Ae[mr+2]<<ii)&Tn},oi=new i32(25e3),ci=new u16(288),Pi=new u16(32),Ai=0,fi=0,Oi=Be.i||0,Ni=0,ui=Be.w||0,li=0;Oi+2<Ue;++Oi){var Ri=si(Oi),Mi=Oi&32767,Bi=ti[Ri];if(Dn[Mi]=Bi,ti[Ri]=Mi,ui<=Oi){var er=Ue-Oi;if((Ai>7e3||Ni>24576)&&(er>423||!Qe)){Cn=wblk(Ae,We,0,oi,ci,Pi,fi,Ni,li,Oi-li,Cn),Ni=Ai=fi=0,li=Oi;for(var nr=0;nr<286;++nr)ci[nr]=0;for(var nr=0;nr<30;++nr)Pi[nr]=0}var lr=2,hr=0,ar=Sn,wr=Mi-Bi&32767;if(er>2&&Ri==si(Oi-wr))for(var Fi=Math.min(En,er)-1,cr=Math.min(32767,Oi),rr=Math.min(258,er);wr<=cr&&--ar&&Mi!=Bi;){if(Ae[Oi+lr]==Ae[Oi+lr-wr]){for(var gr=0;gr<rr&&Ae[Oi+gr]==Ae[Oi+gr-wr];++gr);if(gr>lr){if(lr=gr,hr=wr,gr>Fi)break;for(var vr=Math.min(wr,gr-2),pr=0,nr=0;nr<vr;++nr){var _r=Oi-wr+nr&32767,Ar=Dn[_r],Sr=_r-Ar&32767;Sr>pr&&(pr=Sr,Bi=_r)}}}Mi=Bi,Bi=Dn[Mi],wr+=Mi-Bi&32767}if(hr){oi[Ni++]=268435456|revfl[lr]<<18|revfd[hr];var Hr=revfl[lr]&31,es=revfd[hr]&31;fi+=fleb[Hr]+fdeb[es],++ci[257+Hr],++Pi[es],ui=Oi+lr,++Ai}else oi[Ni++]=Ae[Oi],++ci[Ae[Oi]]}}for(Oi=Math.max(Oi,ui);Oi<Ue;++Oi)oi[Ni++]=Ae[Oi],++ci[Ae[Oi]];Cn=wblk(Ae,We,Qe,oi,ci,Pi,fi,Ni,li,Oi-li,Cn),Qe||(Be.r=Cn&7|We[Cn/8|0]<<3,Cn-=7,Be.h=ti,Be.p=Dn,Be.i=Oi,Be.w=ui)}else{for(var Oi=Be.w||0;Oi<Ue+Qe;Oi+=65535){var ir=Oi+65535;ir>=Ue&&(We[Cn/8|0]=Qe,ir=Ue),Cn=wfblk(We,Cn+1,Ae.subarray(Oi,ir))}Be.i=Ue}return slc(je,0,Oe+shft(Cn)+ke)},adler=function(){var Ae=1,e=0;return{p:function(t){for(var Oe=Ae,ke=e,Be=t.length|0,Ue=0;Ue!=Be;){for(var je=Math.min(Ue+2655,Be);Ue<je;++Ue)ke+=Oe+=t[Ue];Oe=(Oe&65535)+15*(Oe>>16),ke=(ke&65535)+15*(ke>>16)}Ae=Oe,e=ke},d:function(){return Ae%=65521,e%=65521,(Ae&255)<<24|(Ae&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(Ae,e,t,Oe,ke){if(!ke&&(ke={l:1},e.dictionary)){var Be=e.dictionary.subarray(-32768),Ue=new u8(Be.length+Ae.length);Ue.set(Be),Ue.set(Ae,Be.length),Ae=Ue,ke.w=Be.length}return dflt(Ae,e.level==null?6:e.level,e.mem==null?ke.l?Math.ceil(Math.max(8,Math.min(13,Math.log(Ae.length)))*1.5):20:12+e.mem,t,Oe,ke)},wbytes=function(Ae,e,t){for(;t;++e)Ae[e]=t,t>>>=8},zlh=function(Ae,e){var t=e.level,Oe=t==0?0:t<6?1:t==9?3:2;if(Ae[0]=120,Ae[1]=Oe<<6|(e.dictionary&&32),Ae[1]|=31-(Ae[0]<<8|Ae[1])%31,e.dictionary){var ke=adler();ke.p(e.dictionary),wbytes(Ae,2,ke.d())}},zls=function(Ae,e){return((Ae[0]&15)!=8||Ae[0]>>4>7||(Ae[0]<<8|Ae[1])%31)&&err(6,"invalid zlib data"),(Ae[1]>>5&1)==1&&err(6,"invalid zlib data: "+(Ae[1]&32?"need":"unexpected")+" dictionary"),(Ae[1]>>3&4)+2};function zlibSync(Ae,e){e||(e={});var t=adler();t.p(Ae);var Oe=dopt(Ae,e,e.dictionary?6:2,4);return zlh(Oe,e),wbytes(Oe,Oe.length-4,t.d()),Oe}function unzlibSync(Ae,e){return inflt(Ae.subarray(zls(Ae),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(Ae){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Ae){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Ae){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Ae))}};function o(Ae,e,t){var Oe=new XMLHttpRequest;Oe.open("GET",Ae),Oe.responseType="blob",Oe.onload=function(){l(Oe.response,e,t)},Oe.onerror=function(){a.error("could not download file")},Oe.send()}function s(Ae){var e=new XMLHttpRequest;e.open("HEAD",Ae,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(Ae){try{Ae.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Ae.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Ae,e,t){var Oe=n.URL||n.webkitURL,ke=document.createElement("a");e=e||Ae.name||"download",ke.download=e,ke.rel="noopener",typeof Ae=="string"?(ke.href=Ae,ke.origin!==location.origin?s(ke.href)?o(Ae,e,t):c(ke,ke.target="_blank"):c(ke)):(ke.href=Oe.createObjectURL(Ae),setTimeout(function(){Oe.revokeObjectURL(ke.href)},4e4),setTimeout(function(){c(ke)},0))}:"msSaveOrOpenBlob"in navigator?function(Ae,e,t){if(e=e||Ae.name||"download",typeof Ae=="string")if(s(Ae))o(Ae,e,t);else{var Oe=document.createElement("a");Oe.href=Ae,Oe.target="_blank",setTimeout(function(){c(Oe)})}else navigator.msSaveOrOpenBlob(function(ke,Be){return Be===void 0?Be={autoBom:!1}:_typeof(Be)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Be={autoBom:!Be}),Be.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(ke.type)?new Blob(["\uFEFF",ke],{type:ke.type}):ke}(Ae,t),e)}:function(Ae,e,t,Oe){if((Oe=Oe||open("","_blank"))&&(Oe.document.title=Oe.document.body.innerText="downloading..."),typeof Ae=="string")return o(Ae,e,t);var ke=Ae.type==="application/octet-stream",Be=/constructor/i.test(n.HTMLElement)||n.safari,Ue=/CriOS\/[\d]+/.test(navigator.userAgent);if((Ue||ke&&Be)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var je=new FileReader;je.onloadend=function(){var Cn=je.result;Cn=Ue?Cn:Cn.replace(/^data:[^;]*;/,"data:attachment/file;"),Oe?Oe.location.href=Cn:location=Cn,Oe=null},je.readAsDataURL(Ae)}else{var We=n.URL||n.webkitURL,Qe=We.createObjectURL(Ae);Oe?Oe.location=Qe:location.href=Qe,Oe=null,setTimeout(function(){We.revokeObjectURL(Qe)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Ae){var e;Ae=Ae||"",this.ok=!1,Ae.charAt(0)=="#"&&(Ae=Ae.substr(1,6)),Ae={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Ae=(Ae=Ae.replace(/ /g,"")).toLowerCase()]||Ae;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(je){return[parseInt(je[1]),parseInt(je[2]),parseInt(je[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(je){return[parseInt(je[1],16),parseInt(je[2],16),parseInt(je[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(je){return[parseInt(je[1]+je[1],16),parseInt(je[2]+je[2],16),parseInt(je[3]+je[3],16)]}}],Oe=0;Oe<t.length;Oe++){var ke=t[Oe].re,Be=t[Oe].process,Ue=ke.exec(Ae);Ue&&(e=Be(Ue),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var je=this.r.toString(16),We=this.g.toString(16),Qe=this.b.toString(16);return je.length==1&&(je="0"+je),We.length==1&&(We="0"+We),Qe.length==1&&(Qe="0"+Qe),"#"+je+We+Qe}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Ae,e){var t=Ae[0],Oe=Ae[1],ke=Ae[2],Be=Ae[3];t=g(t,Oe,ke,Be,e[0],7,-680876936),Be=g(Be,t,Oe,ke,e[1],12,-389564586),ke=g(ke,Be,t,Oe,e[2],17,606105819),Oe=g(Oe,ke,Be,t,e[3],22,-1044525330),t=g(t,Oe,ke,Be,e[4],7,-176418897),Be=g(Be,t,Oe,ke,e[5],12,1200080426),ke=g(ke,Be,t,Oe,e[6],17,-1473231341),Oe=g(Oe,ke,Be,t,e[7],22,-45705983),t=g(t,Oe,ke,Be,e[8],7,1770035416),Be=g(Be,t,Oe,ke,e[9],12,-1958414417),ke=g(ke,Be,t,Oe,e[10],17,-42063),Oe=g(Oe,ke,Be,t,e[11],22,-1990404162),t=g(t,Oe,ke,Be,e[12],7,1804603682),Be=g(Be,t,Oe,ke,e[13],12,-40341101),ke=g(ke,Be,t,Oe,e[14],17,-1502002290),t=m(t,Oe=g(Oe,ke,Be,t,e[15],22,1236535329),ke,Be,e[1],5,-165796510),Be=m(Be,t,Oe,ke,e[6],9,-1069501632),ke=m(ke,Be,t,Oe,e[11],14,643717713),Oe=m(Oe,ke,Be,t,e[0],20,-373897302),t=m(t,Oe,ke,Be,e[5],5,-701558691),Be=m(Be,t,Oe,ke,e[10],9,38016083),ke=m(ke,Be,t,Oe,e[15],14,-660478335),Oe=m(Oe,ke,Be,t,e[4],20,-405537848),t=m(t,Oe,ke,Be,e[9],5,568446438),Be=m(Be,t,Oe,ke,e[14],9,-1019803690),ke=m(ke,Be,t,Oe,e[3],14,-187363961),Oe=m(Oe,ke,Be,t,e[8],20,1163531501),t=m(t,Oe,ke,Be,e[13],5,-1444681467),Be=m(Be,t,Oe,ke,e[2],9,-51403784),ke=m(ke,Be,t,Oe,e[7],14,1735328473),t=v(t,Oe=m(Oe,ke,Be,t,e[12],20,-1926607734),ke,Be,e[5],4,-378558),Be=v(Be,t,Oe,ke,e[8],11,-2022574463),ke=v(ke,Be,t,Oe,e[11],16,1839030562),Oe=v(Oe,ke,Be,t,e[14],23,-35309556),t=v(t,Oe,ke,Be,e[1],4,-1530992060),Be=v(Be,t,Oe,ke,e[4],11,1272893353),ke=v(ke,Be,t,Oe,e[7],16,-155497632),Oe=v(Oe,ke,Be,t,e[10],23,-1094730640),t=v(t,Oe,ke,Be,e[13],4,681279174),Be=v(Be,t,Oe,ke,e[0],11,-358537222),ke=v(ke,Be,t,Oe,e[3],16,-722521979),Oe=v(Oe,ke,Be,t,e[6],23,76029189),t=v(t,Oe,ke,Be,e[9],4,-640364487),Be=v(Be,t,Oe,ke,e[12],11,-421815835),ke=v(ke,Be,t,Oe,e[15],16,530742520),t=b(t,Oe=v(Oe,ke,Be,t,e[2],23,-995338651),ke,Be,e[0],6,-198630844),Be=b(Be,t,Oe,ke,e[7],10,1126891415),ke=b(ke,Be,t,Oe,e[14],15,-1416354905),Oe=b(Oe,ke,Be,t,e[5],21,-57434055),t=b(t,Oe,ke,Be,e[12],6,1700485571),Be=b(Be,t,Oe,ke,e[3],10,-1894986606),ke=b(ke,Be,t,Oe,e[10],15,-1051523),Oe=b(Oe,ke,Be,t,e[1],21,-2054922799),t=b(t,Oe,ke,Be,e[8],6,1873313359),Be=b(Be,t,Oe,ke,e[15],10,-30611744),ke=b(ke,Be,t,Oe,e[6],15,-1560198380),Oe=b(Oe,ke,Be,t,e[13],21,1309151649),t=b(t,Oe,ke,Be,e[4],6,-145523070),Be=b(Be,t,Oe,ke,e[11],10,-1120210379),ke=b(ke,Be,t,Oe,e[2],15,718787259),Oe=b(Oe,ke,Be,t,e[9],21,-343485551),Ae[0]=_(t,Ae[0]),Ae[1]=_(Oe,Ae[1]),Ae[2]=_(ke,Ae[2]),Ae[3]=_(Be,Ae[3])}function p(Ae,e,t,Oe,ke,Be){return e=_(_(e,Ae),_(Oe,Be)),_(e<<ke|e>>>32-ke,t)}function g(Ae,e,t,Oe,ke,Be,Ue){return p(e&t|~e&Oe,Ae,e,ke,Be,Ue)}function m(Ae,e,t,Oe,ke,Be,Ue){return p(e&Oe|t&~Oe,Ae,e,ke,Be,Ue)}function v(Ae,e,t,Oe,ke,Be,Ue){return p(e^t^Oe,Ae,e,ke,Be,Ue)}function b(Ae,e,t,Oe,ke,Be,Ue){return p(t^(e|~Oe),Ae,e,ke,Be,Ue)}function y(Ae){var e,t=Ae.length,Oe=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=Ae.length;e+=64)d(Oe,w(Ae.substring(e-64,e)));Ae=Ae.substring(e-64);var ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<Ae.length;e++)ke[e>>2]|=Ae.charCodeAt(e)<<(e%4<<3);if(ke[e>>2]|=128<<(e%4<<3),e>55)for(d(Oe,ke),e=0;e<16;e++)ke[e]=0;return ke[14]=8*t,d(Oe,ke),Oe}function w(Ae){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=Ae.charCodeAt(e)+(Ae.charCodeAt(e+1)<<8)+(Ae.charCodeAt(e+2)<<16)+(Ae.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Ae){for(var e="",t=0;t<4;t++)e+=N[Ae>>8*t+4&15]+N[Ae>>8*t&15];return e}function A(Ae){return String.fromCharCode((255&Ae)>>0,(65280&Ae)>>8,(16711680&Ae)>>16,(4278190080&Ae)>>24)}function x(Ae){return y(Ae).map(A).join("")}var S=function(Ae){for(var e=0;e<Ae.length;e++)Ae[e]=L(Ae[e]);return Ae.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Ae,e){if(S){var t=(65535&Ae)+(65535&e);return(Ae>>16)+(e>>16)+(t>>16)<<16|65535&t}return Ae+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Ae,e){var t,Oe,ke,Be;if(Ae!==t){for(var Ue=(ke=Ae,Be=1+(256/Ae.length>>0),new Array(Be+1).join(ke)),je=[],We=0;We<256;We++)je[We]=We;var Qe=0;for(We=0;We<256;We++){var Cn=je[We];Qe=(Qe+Cn+Ue.charCodeAt(We))%256,je[We]=je[Qe],je[Qe]=Cn}t=Ae,Oe=je}else je=Oe;var An=e.length,En=0,Sn=0,Tn="";for(We=0;We<An;We++)Sn=(Sn+(Cn=je[En=(En+1)%256]))%256,je[En]=je[Sn],je[Sn]=Cn,Ue=je[(je[En]+je[Sn])%256],Tn+=String.fromCharCode(e.charCodeAt(We)^Ue);return Tn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Ae,e,t,Oe){this.v=1,this.r=2;var ke=192;Ae.forEach(function(je){if(k.perm!==void 0)throw new Error("Invalid permission: "+je);ke+=k[je]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Be=(e+this.padding).substr(0,32),Ue=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Be,Ue),this.P=-(1+(255^ke)),this.encryptionKey=x(Be+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(Oe)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Ae){if(/[^\u0000-\u00ff]/.test(Ae))throw new Error("Invalid PDF Name Object: "+Ae+", Only accept ASCII characters.");for(var e="",t=Ae.length,Oe=0;Oe<t;Oe++){var ke=Ae.charCodeAt(Oe);ke<33||ke===35||ke===37||ke===40||ke===41||ke===47||ke===60||ke===62||ke===91||ke===93||ke===123||ke===125||ke>126?e+="#"+("0"+ke.toString(16)).slice(-2):e+=Ae[Oe]}return e}function C(Ae){if(_typeof(Ae)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,Oe,ke){if(ke=ke||!1,typeof t!="string"||typeof Oe!="function"||typeof ke!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Be=Math.random().toString(35);return e[t][Be]=[Oe,!!ke],Be},this.unsubscribe=function(t){for(var Oe in e)if(e[Oe][t])return delete e[Oe][t],Object.keys(e[Oe]).length===0&&delete e[Oe],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var Oe=Array.prototype.slice.call(arguments,1),ke=[];for(var Be in e[t]){var Ue=e[t][Be];try{Ue[0].apply(Ae,Oe)}catch(je){n.console&&a.error("jsPDF PubSub Error",je.message,je)}Ue[1]&&ke.push(Be)}ke.length&&ke.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(Ae){if(!(this instanceof j))return new j(Ae);var e="opacity,stroke-opacity".split(",");for(var t in Ae)Ae.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=Ae[t]);this.id="",this.objectNumber=-1}function O(Ae,e){this.gState=Ae,this.matrix=e,this.id="",this.objectNumber=-1}function B(Ae,e,t,Oe,ke){if(!(this instanceof B))return new B(Ae,e,t,Oe,ke);this.type=Ae==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,Oe,ke)}function M(Ae,e,t,Oe,ke){if(!(this instanceof M))return new M(Ae,e,t,Oe,ke);this.boundingBox=Ae,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,Oe,ke)}function E(Ae){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",Oe=arguments[1],ke=arguments[2],Be=arguments[3],Ue=[],je=1,We=16,Qe="S",Cn=null;_typeof(Ae=Ae||{})==="object"&&(t=Ae.orientation,Oe=Ae.unit||Oe,ke=Ae.format||ke,Be=Ae.compress||Ae.compressPdf||Be,(Cn=Ae.encryption||null)!==null&&(Cn.userPassword=Cn.userPassword||"",Cn.ownerPassword=Cn.ownerPassword||"",Cn.userPermissions=Cn.userPermissions||[]),je=typeof Ae.userUnit=="number"?Math.abs(Ae.userUnit):1,Ae.precision!==void 0&&(e=Ae.precision),Ae.floatPrecision!==void 0&&(We=Ae.floatPrecision),Qe=Ae.defaultPathOperation||"S"),Ue=Ae.filters||(Be===!0?["FlateEncode"]:Ue),Oe=Oe||"mm",t=(""+(t||"P")).toLowerCase();var An=Ae.putOnlyUsedFonts||!1,En={},Sn={internal:{},__private__:{}};Sn.__private__.PubSub=C;var Tn="1.3",Dn=Sn.__private__.getPdfVersion=function(){return Tn};Sn.__private__.setPdfVersion=function(ai){Tn=ai};var ti={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Sn.__private__.getPageFormats=function(){return ti};var ni=Sn.__private__.getPageFormat=function(ai){return ti[ai]};ke=ke||"a4";var ii={COMPAT:"compat",ADVANCED:"advanced"},si=ii.COMPAT;function oi(){this.saveGraphicsState(),tr(new Ss(rs,0,0,-rs,0,yc()*rs).toString()+" cm"),this.setFontSize(this.getFontSize()/rs),Qe="n",si=ii.ADVANCED}function ci(){this.restoreGraphicsState(),Qe="S",si=ii.COMPAT}var Pi=Sn.__private__.combineFontStyleAndFontWeight=function(ai,Vi){if(ai=="bold"&&Vi=="normal"||ai=="bold"&&Vi==400||ai=="normal"&&Vi=="italic"||ai=="bold"&&Vi=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Vi&&(ai=Vi==400||Vi==="normal"?ai==="italic"?"italic":"normal":Vi!=700&&Vi!=="bold"||ai!=="normal"?(Vi==700?"bold":Vi)+""+ai:"bold"),ai};Sn.advancedAPI=function(ai){var Vi=si===ii.COMPAT;return Vi&&oi.call(this),typeof ai!="function"||(ai(this),Vi&&ci.call(this)),this},Sn.compatAPI=function(ai){var Vi=si===ii.ADVANCED;return Vi&&ci.call(this),typeof ai!="function"||(ai(this),Vi&&oi.call(this)),this},Sn.isAdvancedAPI=function(){return si===ii.ADVANCED};var Ai,fi=function(ai){if(si!==ii.ADVANCED)throw new Error(ai+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Oi=Sn.roundToPrecision=Sn.__private__.roundToPrecision=function(ai,Vi){var Cr=e||Vi;if(isNaN(ai)||isNaN(Cr))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ai.toFixed(Cr).replace(/0+$/,"")};Ai=Sn.hpf=Sn.__private__.hpf=typeof We=="number"?function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Oi(ai,We)}:We==="smart"?function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Oi(ai,ai>-1&&ai<1?16:5)}:function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.hpf");return Oi(ai,16)};var Ni=Sn.f2=Sn.__private__.f2=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.f2");return Oi(ai,2)},ui=Sn.__private__.f3=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.f3");return Oi(ai,3)},li=Sn.scale=Sn.__private__.scale=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.scale");return si===ii.COMPAT?ai*rs:si===ii.ADVANCED?ai:void 0},Ri=function(ai){return si===ii.COMPAT?yc()-ai:si===ii.ADVANCED?ai:void 0},Mi=function(ai){return li(Ri(ai))};Sn.__private__.setPrecision=Sn.setPrecision=function(ai){typeof parseInt(ai,10)=="number"&&(e=parseInt(ai,10))};var Bi,er="00000000000000000000000000000000",nr=Sn.__private__.getFileId=function(){return er},lr=Sn.__private__.setFileId=function(ai){return er=ai!==void 0&&/^[a-fA-F0-9]{32}$/.test(ai)?ai.toUpperCase():er.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Cn!==null&&(La=new I(Cn.userPermissions,Cn.userPassword,Cn.ownerPassword,er)),er};Sn.setFileId=function(ai){return lr(ai),this},Sn.getFileId=function(){return nr()};var hr=Sn.__private__.convertDateToPDFDate=function(ai){var Vi=ai.getTimezoneOffset(),Cr=Vi<0?"+":"-",Lr=Math.floor(Math.abs(Vi/60)),Vr=Math.abs(Vi%60),ts=[Cr,rr(Lr),"'",rr(Vr),"'"].join("");return["D:",ai.getFullYear(),rr(ai.getMonth()+1),rr(ai.getDate()),rr(ai.getHours()),rr(ai.getMinutes()),rr(ai.getSeconds()),ts].join("")},ar=Sn.__private__.convertPDFDateToDate=function(ai){var Vi=parseInt(ai.substr(2,4),10),Cr=parseInt(ai.substr(6,2),10)-1,Lr=parseInt(ai.substr(8,2),10),Vr=parseInt(ai.substr(10,2),10),ts=parseInt(ai.substr(12,2),10),fs=parseInt(ai.substr(14,2),10);return new Date(Vi,Cr,Lr,Vr,ts,fs,0)},wr=Sn.__private__.setCreationDate=function(ai){var Vi;if(ai===void 0&&(ai=new Date),ai instanceof Date)Vi=hr(ai);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ai))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Vi=ai}return Bi=Vi},Fi=Sn.__private__.getCreationDate=function(ai){var Vi=Bi;return ai==="jsDate"&&(Vi=ar(Bi)),Vi};Sn.setCreationDate=function(ai){return wr(ai),this},Sn.getCreationDate=function(ai){return Fi(ai)};var cr,rr=Sn.__private__.padd2=function(ai){return("0"+parseInt(ai)).slice(-2)},gr=Sn.__private__.padd2Hex=function(ai){return("00"+(ai=ai.toString())).substr(ai.length)},vr=0,pr=[],_r=[],Ar=0,Sr=[],Hr=[],es=!1,ir=_r,mr=function(){vr=0,Ar=0,_r=[],pr=[],Sr=[],Na=zs(),za=zs()};Sn.__private__.setCustomOutputDestination=function(ai){es=!0,ir=ai};var dr=function(ai){es||(ir=ai)};Sn.__private__.resetCustomOutputDestination=function(){es=!1,ir=_r};var tr=Sn.__private__.out=function(ai){return ai=ai.toString(),Ar+=ai.length+1,ir.push(ai),ir},Dr=Sn.__private__.write=function(ai){return tr(arguments.length===1?ai.toString():Array.prototype.join.call(arguments," "))},Nr=Sn.__private__.getArrayBuffer=function(ai){for(var Vi=ai.length,Cr=new ArrayBuffer(Vi),Lr=new Uint8Array(Cr);Vi--;)Lr[Vi]=ai.charCodeAt(Vi);return Cr},Pr=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Sn.__private__.getStandardFonts=function(){return Pr};var kr=Ae.fontSize||16;Sn.__private__.setFontSize=Sn.setFontSize=function(ai){return kr=si===ii.ADVANCED?ai/rs:ai,this};var Rr,Tr=Sn.__private__.getFontSize=Sn.getFontSize=function(){return si===ii.COMPAT?kr:kr*rs},Er=Ae.R2L||!1;Sn.__private__.setR2L=Sn.setR2L=function(ai){return Er=ai,this},Sn.__private__.getR2L=Sn.getR2L=function(){return Er};var br,Ir=Sn.__private__.setZoomMode=function(ai){var Vi=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ai))Rr=ai;else if(isNaN(ai)){if(Vi.indexOf(ai)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ai+'" is not recognized.');Rr=ai}else Rr=parseInt(ai,10)};Sn.__private__.getZoomMode=function(){return Rr};var jr,qr=Sn.__private__.setPageMode=function(ai){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ai)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ai+'" is not recognized.');br=ai};Sn.__private__.getPageMode=function(){return br};var Wr=Sn.__private__.setLayoutMode=function(ai){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ai)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ai+'" is not recognized.');jr=ai};Sn.__private__.getLayoutMode=function(){return jr},Sn.__private__.setDisplayMode=Sn.setDisplayMode=function(ai,Vi,Cr){return Ir(ai),Wr(Vi),qr(Cr),this};var Kr={title:"",subject:"",author:"",keywords:"",creator:""};Sn.__private__.getDocumentProperty=function(ai){if(Object.keys(Kr).indexOf(ai)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Kr[ai]},Sn.__private__.getDocumentProperties=function(){return Kr},Sn.__private__.setDocumentProperties=Sn.setProperties=Sn.setDocumentProperties=function(ai){for(var Vi in Kr)Kr.hasOwnProperty(Vi)&&ai[Vi]&&(Kr[Vi]=ai[Vi]);return this},Sn.__private__.setDocumentProperty=function(ai,Vi){if(Object.keys(Kr).indexOf(ai)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Kr[ai]=Vi};var ps,rs,Ps,Cs,Ns,Rs={},vs={},Ts=[],Is={},js={},Ms={},Qs={},Do=null,ks=0,ws=[],Ds=new C(Sn),ml=Ae.hotfixes||[],Ys={},la={},Os=[],Ss=function ai(Vi,Cr,Lr,Vr,ts,fs){if(!(this instanceof ai))return new ai(Vi,Cr,Lr,Vr,ts,fs);isNaN(Vi)&&(Vi=1),isNaN(Cr)&&(Cr=0),isNaN(Lr)&&(Lr=0),isNaN(Vr)&&(Vr=1),isNaN(ts)&&(ts=0),isNaN(fs)&&(fs=0),this._matrix=[Vi,Cr,Lr,Vr,ts,fs]};Object.defineProperty(Ss.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ai){this._matrix[0]=ai}}),Object.defineProperty(Ss.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ai){this._matrix[1]=ai}}),Object.defineProperty(Ss.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ai){this._matrix[2]=ai}}),Object.defineProperty(Ss.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ai){this._matrix[3]=ai}}),Object.defineProperty(Ss.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ai){this._matrix[4]=ai}}),Object.defineProperty(Ss.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ai){this._matrix[5]=ai}}),Object.defineProperty(Ss.prototype,"a",{get:function(){return this._matrix[0]},set:function(ai){this._matrix[0]=ai}}),Object.defineProperty(Ss.prototype,"b",{get:function(){return this._matrix[1]},set:function(ai){this._matrix[1]=ai}}),Object.defineProperty(Ss.prototype,"c",{get:function(){return this._matrix[2]},set:function(ai){this._matrix[2]=ai}}),Object.defineProperty(Ss.prototype,"d",{get:function(){return this._matrix[3]},set:function(ai){this._matrix[3]=ai}}),Object.defineProperty(Ss.prototype,"e",{get:function(){return this._matrix[4]},set:function(ai){this._matrix[4]=ai}}),Object.defineProperty(Ss.prototype,"f",{get:function(){return this._matrix[5]},set:function(ai){this._matrix[5]=ai}}),Object.defineProperty(Ss.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ss.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ss.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ss.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ss.prototype.join=function(ai){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(Ai).join(ai)},Ss.prototype.multiply=function(ai){var Vi=ai.sx*this.sx+ai.shy*this.shx,Cr=ai.sx*this.shy+ai.shy*this.sy,Lr=ai.shx*this.sx+ai.sy*this.shx,Vr=ai.shx*this.shy+ai.sy*this.sy,ts=ai.tx*this.sx+ai.ty*this.shx+this.tx,fs=ai.tx*this.shy+ai.ty*this.sy+this.ty;return new Ss(Vi,Cr,Lr,Vr,ts,fs)},Ss.prototype.decompose=function(){var ai=this.sx,Vi=this.shy,Cr=this.shx,Lr=this.sy,Vr=this.tx,ts=this.ty,fs=Math.sqrt(ai*ai+Vi*Vi),As=(ai/=fs)*Cr+(Vi/=fs)*Lr;Cr-=ai*As,Lr-=Vi*As;var xs=Math.sqrt(Cr*Cr+Lr*Lr);return As/=xs,ai*(Lr/=xs)<Vi*(Cr/=xs)&&(ai=-ai,Vi=-Vi,As=-As,fs=-fs),{scale:new Ss(fs,0,0,xs,0,0),translate:new Ss(1,0,0,1,Vr,ts),rotate:new Ss(ai,Vi,-Vi,ai,0,0),skew:new Ss(1,0,As,1,0,0)}},Ss.prototype.toString=function(ai){return this.join(" ")},Ss.prototype.inversed=function(){var ai=this.sx,Vi=this.shy,Cr=this.shx,Lr=this.sy,Vr=this.tx,ts=this.ty,fs=1/(ai*Lr-Vi*Cr),As=Lr*fs,xs=-Vi*fs,Us=-Cr*fs,Bs=ai*fs;return new Ss(As,xs,Us,Bs,-As*Vr-Us*ts,-xs*Vr-Bs*ts)},Ss.prototype.applyToPoint=function(ai){var Vi=ai.x*this.sx+ai.y*this.shx+this.tx,Cr=ai.x*this.shy+ai.y*this.sy+this.ty;return new eu(Vi,Cr)},Ss.prototype.applyToRectangle=function(ai){var Vi=this.applyToPoint(ai),Cr=this.applyToPoint(new eu(ai.x+ai.w,ai.y+ai.h));return new Mu(Vi.x,Vi.y,Cr.x-Vi.x,Cr.y-Vi.y)},Ss.prototype.clone=function(){var ai=this.sx,Vi=this.shy,Cr=this.shx,Lr=this.sy,Vr=this.tx,ts=this.ty;return new Ss(ai,Vi,Cr,Lr,Vr,ts)},Sn.Matrix=Ss;var _o=Sn.matrixMult=function(ai,Vi){return Vi.multiply(ai)},$o=new Ss(1,0,0,1,0,0);Sn.unitMatrix=Sn.identityMatrix=$o;var ho=function(ai,Vi){if(!js[ai]){var Cr=(Vi instanceof B?"Sh":"P")+(Object.keys(Is).length+1).toString(10);Vi.id=Cr,js[ai]=Cr,Is[Cr]=Vi,Ds.publish("addPattern",Vi)}};Sn.ShadingPattern=B,Sn.TilingPattern=M,Sn.addShadingPattern=function(ai,Vi){return fi("addShadingPattern()"),ho(ai,Vi),this},Sn.beginTilingPattern=function(ai){fi("beginTilingPattern()"),Dd(ai.boundingBox[0],ai.boundingBox[1],ai.boundingBox[2]-ai.boundingBox[0],ai.boundingBox[3]-ai.boundingBox[1],ai.matrix)},Sn.endTilingPattern=function(ai,Vi){fi("endTilingPattern()"),Vi.stream=Hr[cr].join(`
`),ho(ai,Vi),Ds.publish("endTilingPattern",Vi),Os.pop().restore()};var Gs=Sn.__private__.newObject=function(){var ai=zs();return Hs(ai,!0),ai},zs=Sn.__private__.newObjectDeferred=function(){return vr++,pr[vr]=function(){return Ar},vr},Hs=function(ai,Vi){return Vi=typeof Vi=="boolean"&&Vi,pr[ai]=Ar,Vi&&tr(ai+" 0 obj"),ai},Ua=Sn.__private__.newAdditionalObject=function(){var ai={objId:zs(),content:""};return Sr.push(ai),ai},Na=zs(),za=zs(),Za=Sn.__private__.decodeColorString=function(ai){var Vi=ai.split(" ");if(Vi.length!==2||Vi[1]!=="g"&&Vi[1]!=="G")Vi.length===5&&(Vi[4]==="k"||Vi[4]==="K")&&(Vi=[(1-Vi[0])*(1-Vi[3]),(1-Vi[1])*(1-Vi[3]),(1-Vi[2])*(1-Vi[3]),"r"]);else{var Cr=parseFloat(Vi[0]);Vi=[Cr,Cr,Cr,"r"]}for(var Lr="#",Vr=0;Vr<3;Vr++)Lr+=("0"+Math.floor(255*parseFloat(Vi[Vr])).toString(16)).slice(-2);return Lr},Ha=Sn.__private__.encodeColorString=function(ai){var Vi;typeof ai=="string"&&(ai={ch1:ai});var Cr=ai.ch1,Lr=ai.ch2,Vr=ai.ch3,ts=ai.ch4,fs=ai.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Cr=="string"&&Cr.charAt(0)!=="#"){var As=new f(Cr);if(As.ok)Cr=As.toHex();else if(!/^\d*\.?\d*$/.test(Cr))throw new Error('Invalid color "'+Cr+'" passed to jsPDF.encodeColorString.')}if(typeof Cr=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Cr)&&(Cr="#"+Cr[1]+Cr[1]+Cr[2]+Cr[2]+Cr[3]+Cr[3]),typeof Cr=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Cr)){var xs=parseInt(Cr.substr(1),16);Cr=xs>>16&255,Lr=xs>>8&255,Vr=255&xs}if(Lr===void 0||ts===void 0&&Cr===Lr&&Lr===Vr)if(typeof Cr=="string")Vi=Cr+" "+fs[0];else switch(ai.precision){case 2:Vi=Ni(Cr/255)+" "+fs[0];break;case 3:default:Vi=ui(Cr/255)+" "+fs[0]}else if(ts===void 0||_typeof(ts)==="object"){if(ts&&!isNaN(ts.a)&&ts.a===0)return Vi=["1.","1.","1.",fs[1]].join(" ");if(typeof Cr=="string")Vi=[Cr,Lr,Vr,fs[1]].join(" ");else switch(ai.precision){case 2:Vi=[Ni(Cr/255),Ni(Lr/255),Ni(Vr/255),fs[1]].join(" ");break;default:case 3:Vi=[ui(Cr/255),ui(Lr/255),ui(Vr/255),fs[1]].join(" ")}}else if(typeof Cr=="string")Vi=[Cr,Lr,Vr,ts,fs[2]].join(" ");else switch(ai.precision){case 2:Vi=[Ni(Cr),Ni(Lr),Ni(Vr),Ni(ts),fs[2]].join(" ");break;case 3:default:Vi=[ui(Cr),ui(Lr),ui(Vr),ui(ts),fs[2]].join(" ")}return Vi},va=Sn.__private__.getFilters=function(){return Ue},Aa=Sn.__private__.putStream=function(ai){var Vi=(ai=ai||{}).data||"",Cr=ai.filters||va(),Lr=ai.alreadyAppliedFilters||[],Vr=ai.addLength1||!1,ts=Vi.length,fs=ai.objectId,As=function(Ma){return Ma};if(Cn!==null&&fs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Cn!==null&&(As=La.encryptor(fs,0));var xs={};Cr===!0&&(Cr=["FlateEncode"]);var Us=ai.additionalKeyValues||[],Bs=(xs=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Vi,Cr):{data:Vi,reverseChain:[]}).reverseChain+(Array.isArray(Lr)?Lr.join(" "):Lr.toString());if(xs.data.length!==0&&(Us.push({key:"Length",value:xs.data.length}),Vr===!0&&Us.push({key:"Length1",value:ts})),Bs.length!=0)if(Bs.split("/").length-1==1)Us.push({key:"Filter",value:Bs});else{Us.push({key:"Filter",value:"["+Bs+"]"});for(var qs=0;qs<Us.length;qs+=1)if(Us[qs].key==="DecodeParms"){for(var ea=[],na=0;na<xs.reverseChain.split("/").length-1;na+=1)ea.push("null");ea.push(Us[qs].value),Us[qs].value="["+ea.join(" ")+"]"}}tr("<<");for(var ca=0;ca<Us.length;ca++)tr("/"+Us[ca].key+" "+Us[ca].value);tr(">>"),xs.data.length!==0&&(tr("stream"),tr(As(xs.data)),tr("endstream"))},Zl=Sn.__private__.putPage=function(ai){var Vi=ai.number,Cr=ai.data,Lr=ai.objId,Vr=ai.contentsObjId;Hs(Lr,!0),tr("<</Type /Page"),tr("/Parent "+ai.rootDictionaryObjId+" 0 R"),tr("/Resources "+ai.resourceDictionaryObjId+" 0 R"),tr("/MediaBox ["+parseFloat(Ai(ai.mediaBox.bottomLeftX))+" "+parseFloat(Ai(ai.mediaBox.bottomLeftY))+" "+Ai(ai.mediaBox.topRightX)+" "+Ai(ai.mediaBox.topRightY)+"]"),ai.cropBox!==null&&tr("/CropBox ["+Ai(ai.cropBox.bottomLeftX)+" "+Ai(ai.cropBox.bottomLeftY)+" "+Ai(ai.cropBox.topRightX)+" "+Ai(ai.cropBox.topRightY)+"]"),ai.bleedBox!==null&&tr("/BleedBox ["+Ai(ai.bleedBox.bottomLeftX)+" "+Ai(ai.bleedBox.bottomLeftY)+" "+Ai(ai.bleedBox.topRightX)+" "+Ai(ai.bleedBox.topRightY)+"]"),ai.trimBox!==null&&tr("/TrimBox ["+Ai(ai.trimBox.bottomLeftX)+" "+Ai(ai.trimBox.bottomLeftY)+" "+Ai(ai.trimBox.topRightX)+" "+Ai(ai.trimBox.topRightY)+"]"),ai.artBox!==null&&tr("/ArtBox ["+Ai(ai.artBox.bottomLeftX)+" "+Ai(ai.artBox.bottomLeftY)+" "+Ai(ai.artBox.topRightX)+" "+Ai(ai.artBox.topRightY)+"]"),typeof ai.userUnit=="number"&&ai.userUnit!==1&&tr("/UserUnit "+ai.userUnit),Ds.publish("putPage",{objId:Lr,pageContext:ws[Vi],pageNumber:Vi,page:Cr}),tr("/Contents "+Vr+" 0 R"),tr(">>"),tr("endobj");var ts=Cr.join(`
`);return si===ii.ADVANCED&&(ts+=`
Q`),Hs(Vr,!0),Aa({data:ts,filters:va(),objectId:Vr}),tr("endobj"),Lr},Rc=Sn.__private__.putPages=function(){var ai,Vi,Cr=[];for(ai=1;ai<=ks;ai++)ws[ai].objId=zs(),ws[ai].contentsObjId=zs();for(ai=1;ai<=ks;ai++)Cr.push(Zl({number:ai,data:Hr[ai],objId:ws[ai].objId,contentsObjId:ws[ai].contentsObjId,mediaBox:ws[ai].mediaBox,cropBox:ws[ai].cropBox,bleedBox:ws[ai].bleedBox,trimBox:ws[ai].trimBox,artBox:ws[ai].artBox,userUnit:ws[ai].userUnit,rootDictionaryObjId:Na,resourceDictionaryObjId:za}));Hs(Na,!0),tr("<</Type /Pages");var Lr="/Kids [";for(Vi=0;Vi<ks;Vi++)Lr+=Cr[Vi]+" 0 R ";tr(Lr+"]"),tr("/Count "+ks),tr(">>"),tr("endobj"),Ds.publish("postPutPages")},Vc=function(ai){Ds.publish("putFont",{font:ai,out:tr,newObject:Gs,putStream:Aa}),ai.isAlreadyPutted!==!0&&(ai.objectNumber=Gs(),tr("<<"),tr("/Type /Font"),tr("/BaseFont /"+F(ai.postScriptName)),tr("/Subtype /Type1"),typeof ai.encoding=="string"&&tr("/Encoding /"+ai.encoding),tr("/FirstChar 32"),tr("/LastChar 255"),tr(">>"),tr("endobj"))},zc=function(){for(var ai in Rs)Rs.hasOwnProperty(ai)&&(An===!1||An===!0&&En.hasOwnProperty(ai))&&Vc(Rs[ai])},$c=function(ai){ai.objectNumber=Gs();var Vi=[];Vi.push({key:"Type",value:"/XObject"}),Vi.push({key:"Subtype",value:"/Form"}),Vi.push({key:"BBox",value:"["+[Ai(ai.x),Ai(ai.y),Ai(ai.x+ai.width),Ai(ai.y+ai.height)].join(" ")+"]"}),Vi.push({key:"Matrix",value:"["+ai.matrix.toString()+"]"});var Cr=ai.pages[1].join(`
`);Aa({data:Cr,additionalKeyValues:Vi,objectId:ai.objectNumber}),tr("endobj")},Hc=function(){for(var ai in Ys)Ys.hasOwnProperty(ai)&&$c(Ys[ai])},yd=function(ai,Vi){var Cr,Lr=[],Vr=1/(Vi-1);for(Cr=0;Cr<1;Cr+=Vr)Lr.push(Cr);if(Lr.push(1),ai[0].offset!=0){var ts={offset:0,color:ai[0].color};ai.unshift(ts)}if(ai[ai.length-1].offset!=1){var fs={offset:1,color:ai[ai.length-1].color};ai.push(fs)}for(var As="",xs=0,Us=0;Us<Lr.length;Us++){for(Cr=Lr[Us];Cr>ai[xs+1].offset;)xs++;var Bs=ai[xs].offset,qs=(Cr-Bs)/(ai[xs+1].offset-Bs),ea=ai[xs].color,na=ai[xs+1].color;As+=gr(Math.round((1-qs)*ea[0]+qs*na[0]).toString(16))+gr(Math.round((1-qs)*ea[1]+qs*na[1]).toString(16))+gr(Math.round((1-qs)*ea[2]+qs*na[2]).toString(16))}return As.trim()},fh=function(ai,Vi){Vi||(Vi=21);var Cr=Gs(),Lr=yd(ai.colors,Vi),Vr=[];Vr.push({key:"FunctionType",value:"0"}),Vr.push({key:"Domain",value:"[0.0 1.0]"}),Vr.push({key:"Size",value:"["+Vi+"]"}),Vr.push({key:"BitsPerSample",value:"8"}),Vr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Vr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Aa({data:Lr,additionalKeyValues:Vr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Cr}),tr("endobj"),ai.objectNumber=Gs(),tr("<< /ShadingType "+ai.type),tr("/ColorSpace /DeviceRGB");var ts="/Coords ["+Ai(parseFloat(ai.coords[0]))+" "+Ai(parseFloat(ai.coords[1]))+" ";ai.type===2?ts+=Ai(parseFloat(ai.coords[2]))+" "+Ai(parseFloat(ai.coords[3])):ts+=Ai(parseFloat(ai.coords[2]))+" "+Ai(parseFloat(ai.coords[3]))+" "+Ai(parseFloat(ai.coords[4]))+" "+Ai(parseFloat(ai.coords[5])),tr(ts+="]"),ai.matrix&&tr("/Matrix ["+ai.matrix.toString()+"]"),tr("/Function "+Cr+" 0 R"),tr("/Extend [true true]"),tr(">>"),tr("endobj")},ph=function(ai,Vi){var Cr=zs(),Lr=Gs();Vi.push({resourcesOid:Cr,objectOid:Lr}),ai.objectNumber=Lr;var Vr=[];Vr.push({key:"Type",value:"/Pattern"}),Vr.push({key:"PatternType",value:"1"}),Vr.push({key:"PaintType",value:"1"}),Vr.push({key:"TilingType",value:"1"}),Vr.push({key:"BBox",value:"["+ai.boundingBox.map(Ai).join(" ")+"]"}),Vr.push({key:"XStep",value:Ai(ai.xStep)}),Vr.push({key:"YStep",value:Ai(ai.yStep)}),Vr.push({key:"Resources",value:Cr+" 0 R"}),ai.matrix&&Vr.push({key:"Matrix",value:"["+ai.matrix.toString()+"]"}),Aa({data:ai.stream,additionalKeyValues:Vr,objectId:ai.objectNumber}),tr("endobj")},qc=function(ai){var Vi;for(Vi in Is)Is.hasOwnProperty(Vi)&&(Is[Vi]instanceof B?fh(Is[Vi]):Is[Vi]instanceof M&&ph(Is[Vi],ai))},vd=function(ai){for(var Vi in ai.objectNumber=Gs(),tr("<<"),ai)switch(Vi){case"opacity":tr("/ca "+Ni(ai[Vi]));break;case"stroke-opacity":tr("/CA "+Ni(ai[Vi]))}tr(">>"),tr("endobj")},gh=function(){var ai;for(ai in Ms)Ms.hasOwnProperty(ai)&&vd(Ms[ai])},_u=function(){for(var ai in tr("/XObject <<"),Ys)Ys.hasOwnProperty(ai)&&Ys[ai].objectNumber>=0&&tr("/"+ai+" "+Ys[ai].objectNumber+" 0 R");Ds.publish("putXobjectDict"),tr(">>")},mh=function(){La.oid=Gs(),tr("<<"),tr("/Filter /Standard"),tr("/V "+La.v),tr("/R "+La.r),tr("/U <"+La.toHexString(La.U)+">"),tr("/O <"+La.toHexString(La.O)+">"),tr("/P "+La.P),tr(">>"),tr("endobj")},_d=function(){for(var ai in tr("/Font <<"),Rs)Rs.hasOwnProperty(ai)&&(An===!1||An===!0&&En.hasOwnProperty(ai))&&tr("/"+ai+" "+Rs[ai].objectNumber+" 0 R");tr(">>")},yh=function(){if(Object.keys(Is).length>0){for(var ai in tr("/Shading <<"),Is)Is.hasOwnProperty(ai)&&Is[ai]instanceof B&&Is[ai].objectNumber>=0&&tr("/"+ai+" "+Is[ai].objectNumber+" 0 R");Ds.publish("putShadingPatternDict"),tr(">>")}},Wc=function(ai){if(Object.keys(Is).length>0){for(var Vi in tr("/Pattern <<"),Is)Is.hasOwnProperty(Vi)&&Is[Vi]instanceof Sn.TilingPattern&&Is[Vi].objectNumber>=0&&Is[Vi].objectNumber<ai&&tr("/"+Vi+" "+Is[Vi].objectNumber+" 0 R");Ds.publish("putTilingPatternDict"),tr(">>")}},vh=function(){if(Object.keys(Ms).length>0){var ai;for(ai in tr("/ExtGState <<"),Ms)Ms.hasOwnProperty(ai)&&Ms[ai].objectNumber>=0&&tr("/"+ai+" "+Ms[ai].objectNumber+" 0 R");Ds.publish("putGStateDict"),tr(">>")}},ra=function(ai){Hs(ai.resourcesOid,!0),tr("<<"),tr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_d(),yh(),Wc(ai.objectOid),vh(),_u(),tr(">>"),tr("endobj")},Cd=function(){var ai=[];zc(),gh(),Hc(),qc(ai),Ds.publish("putResources"),ai.forEach(ra),ra({resourcesOid:za,objectOid:Number.MAX_SAFE_INTEGER}),Ds.publish("postPutResources")},Ad=function(){Ds.publish("putAdditionalObjects");for(var ai=0;ai<Sr.length;ai++){var Vi=Sr[ai];Hs(Vi.objId,!0),tr(Vi.content),tr("endobj")}Ds.publish("postPutAdditionalObjects")},Ed=function(ai){vs[ai.fontName]=vs[ai.fontName]||{},vs[ai.fontName][ai.fontStyle]=ai.id},Au=function(ai,Vi,Cr,Lr,Vr){var ts={id:"F"+(Object.keys(Rs).length+1).toString(10),postScriptName:ai,fontName:Vi,fontStyle:Cr,encoding:Lr,isStandardFont:Vr||!1,metadata:{}};return Ds.publish("addFont",{font:ts,instance:this}),Rs[ts.id]=ts,Ed(ts),ts.id},_h=function(ai){for(var Vi=0,Cr=Pr.length;Vi<Cr;Vi++){var Lr=Au.call(this,ai[Vi][0],ai[Vi][1],ai[Vi][2],Pr[Vi][3],!0);An===!1&&(En[Lr]=!0);var Vr=ai[Vi][0].split("-");Ed({id:Lr,fontName:Vr[0],fontStyle:Vr[1]||""})}Ds.publish("addFonts",{fonts:Rs,dictionary:vs})},kl=function(ai){return ai.foo=function(){try{return ai.apply(this,arguments)}catch(Lr){var Vi=Lr.stack||"";~Vi.indexOf(" at ")&&(Vi=Vi.split(" at ")[1]);var Cr="Error in function "+Vi.split(`
`)[0].split("<")[0]+": "+Lr.message;if(!n.console)throw new Error(Cr);n.console.error(Cr,Lr),n.alert&&alert(Cr)}},ai.foo.bar=ai,ai.foo},Yc=function(ai,Vi){var Cr,Lr,Vr,ts,fs,As,xs,Us,Bs;if(Vr=(Vi=Vi||{}).sourceEncoding||"Unicode",fs=Vi.outputEncoding,(Vi.autoencode||fs)&&Rs[ps].metadata&&Rs[ps].metadata[Vr]&&Rs[ps].metadata[Vr].encoding&&(ts=Rs[ps].metadata[Vr].encoding,!fs&&Rs[ps].encoding&&(fs=Rs[ps].encoding),!fs&&ts.codePages&&(fs=ts.codePages[0]),typeof fs=="string"&&(fs=ts[fs]),fs)){for(xs=!1,As=[],Cr=0,Lr=ai.length;Cr<Lr;Cr++)(Us=fs[ai.charCodeAt(Cr)])?As.push(String.fromCharCode(Us)):As.push(ai[Cr]),As[Cr].charCodeAt(0)>>8&&(xs=!0);ai=As.join("")}for(Cr=ai.length;xs===void 0&&Cr!==0;)ai.charCodeAt(Cr-1)>>8&&(xs=!0),Cr--;if(!xs)return ai;for(As=Vi.noBOM?[]:[254,255],Cr=0,Lr=ai.length;Cr<Lr;Cr++){if((Bs=(Us=ai.charCodeAt(Cr))>>8)>>8)throw new Error("Character at position "+Cr+" of string '"+ai+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");As.push(Bs),As.push(Us-(Bs<<8))}return String.fromCharCode.apply(void 0,As)},qa=Sn.__private__.pdfEscape=Sn.pdfEscape=function(ai,Vi){return Yc(ai,Vi).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Eu=Sn.__private__.beginPage=function(ai){Hr[++ks]=[],ws[ks]={objId:0,contentsObjId:0,userUnit:Number(je),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ai[0]),topRightY:Number(ai[1])}},bd(ks),dr(Hr[cr])},Sd=function(ai,Vi){var Cr,Lr,Vr;switch(t=Vi||t,typeof ai=="string"&&(Cr=ni(ai.toLowerCase()),Array.isArray(Cr)&&(Lr=Cr[0],Vr=Cr[1])),Array.isArray(ai)&&(Lr=ai[0]*rs,Vr=ai[1]*rs),isNaN(Lr)&&(Lr=ke[0],Vr=ke[1]),(Lr>14400||Vr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Lr=Math.min(14400,Lr),Vr=Math.min(14400,Vr)),ke=[Lr,Vr],t.substr(0,1)){case"l":Vr>Lr&&(ke=[Vr,Lr]);break;case"p":Lr>Vr&&(ke=[Vr,Lr])}Eu(ke),Ld(Pu),tr(Dl),Lu!==0&&tr(Lu+" J"),Ru!==0&&tr(Ru+" j"),Ds.publish("addPage",{pageNumber:ks})},Ch=function(ai){ai>0&&ai<=ks&&(Hr.splice(ai,1),ws.splice(ai,1),ks--,cr>ks&&(cr=ks),this.setPage(cr))},bd=function(ai){ai>0&&ai<=ks&&(cr=ai)},Ah=Sn.__private__.getNumberOfPages=Sn.getNumberOfPages=function(){return Hr.length-1},Id=function(ai,Vi,Cr){var Lr,Vr=void 0;return Cr=Cr||{},ai=ai!==void 0?ai:Rs[ps].fontName,Vi=Vi!==void 0?Vi:Rs[ps].fontStyle,Lr=ai.toLowerCase(),vs[Lr]!==void 0&&vs[Lr][Vi]!==void 0?Vr=vs[Lr][Vi]:vs[ai]!==void 0&&vs[ai][Vi]!==void 0?Vr=vs[ai][Vi]:Cr.disableWarning===!1&&a.warn("Unable to look up font label for font '"+ai+"', '"+Vi+"'. Refer to getFontList() for available fonts."),Vr||Cr.noFallback||(Vr=vs.times[Vi])==null&&(Vr=vs.times.normal),Vr},Eh=Sn.__private__.putInfo=function(){var ai=Gs(),Vi=function(Lr){return Lr};for(var Cr in Cn!==null&&(Vi=La.encryptor(ai,0)),tr("<<"),tr("/Producer ("+qa(Vi("jsPDF "+E.version))+")"),Kr)Kr.hasOwnProperty(Cr)&&Kr[Cr]&&tr("/"+Cr.substr(0,1).toUpperCase()+Cr.substr(1)+" ("+qa(Vi(Kr[Cr]))+")");tr("/CreationDate ("+qa(Vi(Bi))+")"),tr(">>"),tr("endobj")},Su=Sn.__private__.putCatalog=function(ai){var Vi=(ai=ai||{}).rootDictionaryObjId||Na;switch(Gs(),tr("<<"),tr("/Type /Catalog"),tr("/Pages "+Vi+" 0 R"),Rr||(Rr="fullwidth"),Rr){case"fullwidth":tr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":tr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":tr("/OpenAction [3 0 R /Fit]");break;case"original":tr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Cr=""+Rr;Cr.substr(Cr.length-1)==="%"&&(Rr=parseInt(Rr)/100),typeof Rr=="number"&&tr("/OpenAction [3 0 R /XYZ null null "+Ni(Rr)+"]")}switch(jr||(jr="continuous"),jr){case"continuous":tr("/PageLayout /OneColumn");break;case"single":tr("/PageLayout /SinglePage");break;case"two":case"twoleft":tr("/PageLayout /TwoColumnLeft");break;case"tworight":tr("/PageLayout /TwoColumnRight")}br&&tr("/PageMode /"+br),Ds.publish("putCatalog"),tr(">>"),tr("endobj")},Sh=Sn.__private__.putTrailer=function(){tr("trailer"),tr("<<"),tr("/Size "+(vr+1)),tr("/Root "+vr+" 0 R"),tr("/Info "+(vr-1)+" 0 R"),Cn!==null&&tr("/Encrypt "+La.oid+" 0 R"),tr("/ID [ <"+er+"> <"+er+"> ]"),tr(">>")},bh=Sn.__private__.putHeader=function(){tr("%PDF-"+Tn),tr("%ºß¬à")},Ih=Sn.__private__.putXRef=function(){var ai="0000000000";tr("xref"),tr("0 "+(vr+1)),tr("0000000000 65535 f ");for(var Vi=1;Vi<=vr;Vi++)typeof pr[Vi]=="function"?tr((ai+pr[Vi]()).slice(-10)+" 00000 n "):pr[Vi]!==void 0?tr((ai+pr[Vi]).slice(-10)+" 00000 n "):tr("0000000000 00000 n ")},rc=Sn.__private__.buildDocument=function(){mr(),dr(_r),Ds.publish("buildDocument"),bh(),Rc(),Ad(),Cd(),Cn!==null&&mh(),Eh(),Su();var ai=Ar;return Ih(),Sh(),tr("startxref"),tr(""+ai),tr("%%EOF"),dr(Hr[cr]),_r.join(`
`)},Xc=Sn.__private__.getBlob=function(ai){return new Blob([Nr(ai)],{type:"application/pdf"})},Kc=Sn.output=Sn.__private__.output=kl(function(ai,Vi){switch(typeof(Vi=Vi||{})=="string"?Vi={filename:Vi}:Vi.filename=Vi.filename||"generated.pdf",ai){case void 0:return rc();case"save":Sn.save(Vi.filename);break;case"arraybuffer":return Nr(rc());case"blob":return Xc(rc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Xc(rc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Cr="",Lr=rc();try{Cr=h(Lr)}catch{Cr=h(unescape(encodeURIComponent(Lr)))}return"data:application/pdf;filename="+Vi.filename+";base64,"+Cr;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Vr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ts=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Vi.pdfObjectUrl&&(Vr=Vi.pdfObjectUrl,ts="");var fs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Vr+'"'+ts+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Vi)+");<\/script></body></html>",As=n.open();return As!==null&&As.document.write(fs),As}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var xs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Vi.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Vi.filename+'" width="500px" height="400px" /></body></html>',Us=n.open();if(Us!==null){Us.document.write(xs);var Bs=this;Us.document.documentElement.querySelector("#pdfViewer").onload=function(){Us.document.title=Vi.filename,Us.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Bs.output("bloburl"))}}return Us}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var qs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Vi)+'"></iframe></body></html>',ea=n.open();if(ea!==null&&(ea.document.write(qs),ea.document.title=Vi.filename),ea||typeof safari>"u")return ea;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Vi);default:return null}}),wd=function(ai){return Array.isArray(ml)===!0&&ml.indexOf(ai)>-1};switch(Oe){case"pt":rs=1;break;case"mm":rs=72/25.4;break;case"cm":rs=72/2.54;break;case"in":rs=72;break;case"px":rs=wd("px_scaling")==1?.75:96/72;break;case"pc":case"em":rs=12;break;case"ex":rs=6;break;default:if(typeof Oe!="number")throw new Error("Invalid unit: "+Oe);rs=Oe}var La=null;wr(),lr();var wh=function(ai){return Cn!==null?La.encryptor(ai,0):function(Vi){return Vi}},Pd=Sn.__private__.getPageInfo=Sn.getPageInfo=function(ai){if(isNaN(ai)||ai%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ws[ai].objId,pageNumber:ai,pageContext:ws[ai]}},Fs=Sn.__private__.getPageInfoByObjId=function(ai){if(isNaN(ai)||ai%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Vi in ws)if(ws[Vi].objId===ai)break;return Pd(Vi)},Ph=Sn.__private__.getCurrentPageInfo=Sn.getCurrentPageInfo=function(){return{objId:ws[cr].objId,pageNumber:cr,pageContext:ws[cr]}};Sn.addPage=function(){return Sd.apply(this,arguments),this},Sn.setPage=function(){return bd.apply(this,arguments),dr.call(this,Hr[cr]),this},Sn.insertPage=function(ai){return this.addPage(),this.movePage(cr,ai),this},Sn.movePage=function(ai,Vi){var Cr,Lr;if(ai>Vi){Cr=Hr[ai],Lr=ws[ai];for(var Vr=ai;Vr>Vi;Vr--)Hr[Vr]=Hr[Vr-1],ws[Vr]=ws[Vr-1];Hr[Vi]=Cr,ws[Vi]=Lr,this.setPage(Vi)}else if(ai<Vi){Cr=Hr[ai],Lr=ws[ai];for(var ts=ai;ts<Vi;ts++)Hr[ts]=Hr[ts+1],ws[ts]=ws[ts+1];Hr[Vi]=Cr,ws[Vi]=Lr,this.setPage(Vi)}return this},Sn.deletePage=function(){return Ch.apply(this,arguments),this},Sn.__private__.text=Sn.text=function(ai,Vi,Cr,Lr,Vr){var ts,fs,As,xs,Us,Bs,qs,ea,na,ca=(Lr=Lr||{}).scope||this;if(typeof ai=="number"&&typeof Vi=="number"&&(typeof Cr=="string"||Array.isArray(Cr))){var Ma=Cr;Cr=Vi,Vi=ai,ai=Ma}if(arguments[3]instanceof Ss?(fi("The transform parameter of text() with a Matrix value"),na=Vr):(As=arguments[4],xs=arguments[5],_typeof(qs=arguments[3])==="object"&&qs!==null||(typeof As=="string"&&(xs=As,As=null),typeof qs=="string"&&(xs=qs,qs=null),typeof qs=="number"&&(As=qs,qs=null),Lr={flags:qs,angle:As,align:xs})),isNaN(Vi)||isNaN(Cr)||ai==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ai.length===0)return ca;var pa="",Ul=!1,Ja=typeof Lr.lineHeightFactor=="number"?Lr.lineHeightFactor:Oc,nc=ca.internal.scaleFactor;function Gd(wo){return wo=wo.split("	").join(Array(Lr.TabLen||9).join(" ")),qa(wo,qs)}function Gu(wo){for(var ko,oa=wo.concat(),fa=[],uc=oa.length;uc--;)typeof(ko=oa.shift())=="string"?fa.push(ko):Array.isArray(wo)&&(ko.length===1||ko[1]===void 0&&ko[2]===void 0)?fa.push(ko[0]):fa.push([ko[0],ko[1],ko[2]]);return fa}function Fu(wo,ko){var oa;if(typeof wo=="string")oa=ko(wo)[0];else if(Array.isArray(wo)){for(var fa,uc,qu=wo.concat(),fu=[],zd=qu.length;zd--;)typeof(fa=qu.shift())=="string"?fu.push(ko(fa)[0]):Array.isArray(fa)&&typeof fa[0]=="string"&&(uc=ko(fa[0],fa[1],fa[2]),fu.push([uc[0],uc[1],uc[2]]));oa=fu}return oa}var iu=!1,Bu=!0;if(typeof ai=="string")iu=!0;else if(Array.isArray(ai)){var Uu=ai.concat();fs=[];for(var su,Sa=Uu.length;Sa--;)(typeof(su=Uu.shift())!="string"||Array.isArray(su)&&typeof su[0]!="string")&&(Bu=!1);iu=Bu}if(iu===!1)throw new Error('Type of text must be string or Array. "'+ai+'" is not recognized.');typeof ai=="string"&&(ai=ai.match(/[\r?\n]/)?ai.split(/\r\n|\r|\n/g):[ai]);var ou=kr/ca.internal.scaleFactor,au=ou*(Ja-1);switch(Lr.baseline){case"bottom":Cr-=au;break;case"top":Cr+=ou-au;break;case"hanging":Cr+=ou-2*au;break;case"middle":Cr+=ou/2-au}if((Bs=Lr.maxWidth||0)>0&&(typeof ai=="string"?ai=ca.splitTextToSize(ai,Bs):Object.prototype.toString.call(ai)==="[object Array]"&&(ai=ai.reduce(function(wo,ko){return wo.concat(ca.splitTextToSize(ko,Bs))},[]))),ts={text:ai,x:Vi,y:Cr,options:Lr,mutex:{pdfEscape:qa,activeFontKey:ps,fonts:Rs,activeFontSize:kr}},Ds.publish("preProcessText",ts),ai=ts.text,As=(Lr=ts.options).angle,!(na instanceof Ss)&&As&&typeof As=="number"){As*=Math.PI/180,Lr.rotationDirection===0&&(As=-As),si===ii.ADVANCED&&(As=-As);var lu=Math.cos(As),ju=Math.sin(As);na=new Ss(lu,ju,-ju,lu,0,0)}else As&&As instanceof Ss&&(na=As);si!==ii.ADVANCED||na||(na=$o),(Us=Lr.charSpace||Qc)!==void 0&&(pa+=Ai(li(Us))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ea=Lr.horizontalScale)!==void 0&&(pa+=Ai(100*ea)+` Tz
`),Lr.lang;var Wa=-1,Gh=Lr.renderingMode!==void 0?Lr.renderingMode:Lr.stroke,Vu=ca.internal.getCurrentPageInfo().pageContext;switch(Gh){case 0:case!1:case"fill":Wa=0;break;case 1:case!0:case"stroke":Wa=1;break;case 2:case"fillThenStroke":Wa=2;break;case 3:case"invisible":Wa=3;break;case 4:case"fillAndAddForClipping":Wa=4;break;case 5:case"strokeAndAddPathForClipping":Wa=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Wa=6;break;case 7:case"addToPathForClipping":Wa=7}var Fd=Vu.usedRenderingMode!==void 0?Vu.usedRenderingMode:-1;Wa!==-1?pa+=Wa+` Tr
`:Fd!==-1&&(pa+=`0 Tr
`),Wa!==-1&&(Vu.usedRenderingMode=Wa),xs=Lr.align||"left";var yl,cu=kr*Ja,Bd=ca.internal.pageSize.getWidth(),Ud=Rs[ps];Us=Lr.charSpace||Qc,Bs=Lr.maxWidth||0,qs=Object.assign({autoencode:!0,noBOM:!0},Lr.flags);var vc=[],Dc=function(wo){return ca.getStringUnitWidth(wo,{font:Ud,charSpace:Us,fontSize:kr,doKerning:!1})*kr/nc};if(Object.prototype.toString.call(ai)==="[object Array]"){var Ya;fs=Gu(ai),xs!=="left"&&(yl=fs.map(Dc));var Ga,_c=0;if(xs==="right"){Vi-=yl[0],ai=[],Sa=fs.length;for(var oc=0;oc<Sa;oc++)oc===0?(Ga=tc(Vi),Ya=sc(Cr)):(Ga=li(_c-yl[oc]),Ya=-cu),ai.push([fs[oc],Ga,Ya]),_c=yl[oc]}else if(xs==="center"){Vi-=yl[0]/2,ai=[],Sa=fs.length;for(var ac=0;ac<Sa;ac++)ac===0?(Ga=tc(Vi),Ya=sc(Cr)):(Ga=li((_c-yl[ac])/2),Ya=-cu),ai.push([fs[ac],Ga,Ya]),_c=yl[ac]}else if(xs==="left"){ai=[],Sa=fs.length;for(var uu=0;uu<Sa;uu++)ai.push(fs[uu])}else if(xs==="justify"&&Ud.encoding==="Identity-H"){ai=[],Sa=fs.length,Bs=Bs!==0?Bs:Bd;for(var cc=0,sa=0;sa<Sa;sa++)if(Ya=sa===0?sc(Cr):-cu,Ga=sa===0?tc(Vi):cc,sa<Sa-1){var zu=li((Bs-yl[sa])/(fs[sa].split(" ").length-1)),Fa=fs[sa].split(" ");ai.push([Fa[0]+" ",Ga,Ya]),cc=0;for(var vl=1;vl<Fa.length;vl++){var du=(Dc(Fa[vl-1]+" "+Fa[vl])-Dc(Fa[vl]))*nc+zu;vl==Fa.length-1?ai.push([Fa[vl],du,0]):ai.push([Fa[vl]+" ",du,0]),cc-=du}}else ai.push([fs[sa],Ga,Ya]);ai.push(["",cc,0])}else{if(xs!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ai=[],Sa=fs.length,Bs=Bs!==0?Bs:Bd,sa=0;sa<Sa;sa++)Ya=sa===0?sc(Cr):-cu,Ga=sa===0?tc(Vi):0,sa<Sa-1?vc.push(Ai(li((Bs-yl[sa])/(fs[sa].split(" ").length-1)))):vc.push(0),ai.push([fs[sa],Ga,Ya])}}var Vd=typeof Lr.R2L=="boolean"?Lr.R2L:Er;Vd===!0&&(ai=Fu(ai,function(wo,ko,oa){return[wo.split("").reverse().join(""),ko,oa]})),ts={text:ai,x:Vi,y:Cr,options:Lr,mutex:{pdfEscape:qa,activeFontKey:ps,fonts:Rs,activeFontSize:kr}},Ds.publish("postProcessText",ts),ai=ts.text,Ul=ts.mutex.isHex||!1;var $u=Rs[ps].encoding;$u!=="WinAnsiEncoding"&&$u!=="StandardEncoding"||(ai=Fu(ai,function(wo,ko,oa){return[Gd(wo),ko,oa]})),fs=Gu(ai),ai=[];for(var Gc,Fc,Cc,Bc=0,hu=1,Uc=Array.isArray(fs[0])?hu:Bc,Ac="",Hu=function(wo,ko,oa){var fa="";return oa instanceof Ss?(oa=typeof Lr.angle=="number"?_o(oa,new Ss(1,0,0,1,wo,ko)):_o(new Ss(1,0,0,1,wo,ko),oa),si===ii.ADVANCED&&(oa=_o(new Ss(1,0,0,-1,0,0),oa)),fa=oa.join(" ")+` Tm
`):fa=Ai(wo)+" "+Ai(ko)+` Td
`,fa},_l=0;_l<fs.length;_l++){switch(Ac="",Uc){case hu:Cc=(Ul?"<":"(")+fs[_l][0]+(Ul?">":")"),Gc=parseFloat(fs[_l][1]),Fc=parseFloat(fs[_l][2]);break;case Bc:Cc=(Ul?"<":"(")+fs[_l]+(Ul?">":")"),Gc=tc(Vi),Fc=sc(Cr)}vc!==void 0&&vc[_l]!==void 0&&(Ac=vc[_l]+` Tw
`),_l===0?ai.push(Ac+Hu(Gc,Fc,na)+Cc):Uc===Bc?ai.push(Ac+Cc):Uc===hu&&ai.push(Ac+Hu(Gc,Fc,na)+Cc)}ai=Uc===Bc?ai.join(` Tj
T* `):ai.join(` Tj
`),ai+=` Tj
`;var bl=`BT
/`;return bl+=ps+" "+kr+` Tf
`,bl+=Ai(kr*Ja)+` TL
`,bl+=kc+`
`,bl+=pa,bl+=ai,tr(bl+="ET"),En[ps]=!0,ca};var xh=Sn.__private__.clip=Sn.clip=function(ai){return tr(ai==="evenodd"?"W*":"W"),this};Sn.clipEvenOdd=function(){return xh("evenodd")},Sn.__private__.discardPath=Sn.discardPath=function(){return tr("n"),this};var Jl=Sn.__private__.isValidStyle=function(ai){var Vi=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ai)!==-1&&(Vi=!0),Vi};Sn.__private__.setDefaultPathOperation=Sn.setDefaultPathOperation=function(ai){return Jl(ai)&&(Qe=ai),this};var xd=Sn.__private__.getStyle=Sn.getStyle=function(ai){var Vi=Qe;switch(ai){case"D":case"S":Vi="S";break;case"F":Vi="f";break;case"FD":case"DF":Vi="B";break;case"f":case"f*":case"B":case"B*":Vi=ai}return Vi},Td=Sn.close=function(){return tr("h"),this};Sn.stroke=function(){return tr("S"),this},Sn.fill=function(ai){return Zc("f",ai),this},Sn.fillEvenOdd=function(ai){return Zc("f*",ai),this},Sn.fillStroke=function(ai){return Zc("B",ai),this},Sn.fillStrokeEvenOdd=function(ai){return Zc("B*",ai),this};var Zc=function(ai,Vi){_typeof(Vi)==="object"?Lh(Vi,ai):tr(ai)},bu=function(ai){ai===null||si===ii.ADVANCED&&ai===void 0||(ai=xd(ai),tr(ai))};function Th(ai,Vi,Cr,Lr,Vr){var ts=new M(Vi||this.boundingBox,Cr||this.xStep,Lr||this.yStep,this.gState,Vr||this.matrix);ts.stream=this.stream;var fs=ai+"$$"+this.cloneIndex+++"$$";return ho(fs,ts),ts}var Lh=function(ai,Vi){var Cr=js[ai.key],Lr=Is[Cr];if(Lr instanceof B)tr("q"),tr(Rh(Vi)),Lr.gState&&Sn.setGState(Lr.gState),tr(ai.matrix.toString()+" cm"),tr("/"+Cr+" sh"),tr("Q");else if(Lr instanceof M){var Vr=new Ss(1,0,0,-1,0,yc());ai.matrix&&(Vr=Vr.multiply(ai.matrix||$o),Cr=Th.call(Lr,ai.key,ai.boundingBox,ai.xStep,ai.yStep,Vr).id),tr("q"),tr("/Pattern cs"),tr("/"+Cr+" scn"),Lr.gState&&Sn.setGState(Lr.gState),tr(Vi),tr("Q")}},Rh=function(ai){switch(ai){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},wu=Sn.moveTo=function(ai,Vi){return tr(Ai(li(ai))+" "+Ai(Mi(Vi))+" m"),this},Mc=Sn.lineTo=function(ai,Vi){return tr(Ai(li(ai))+" "+Ai(Mi(Vi))+" l"),this},gc=Sn.curveTo=function(ai,Vi,Cr,Lr,Vr,ts){return tr([Ai(li(ai)),Ai(Mi(Vi)),Ai(li(Cr)),Ai(Mi(Lr)),Ai(li(Vr)),Ai(Mi(ts)),"c"].join(" ")),this};Sn.__private__.line=Sn.line=function(ai,Vi,Cr,Lr,Vr){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||isNaN(Lr)||!Jl(Vr))throw new Error("Invalid arguments passed to jsPDF.line");return si===ii.COMPAT?this.lines([[Cr-ai,Lr-Vi]],ai,Vi,[1,1],Vr||"S"):this.lines([[Cr-ai,Lr-Vi]],ai,Vi,[1,1]).stroke()},Sn.__private__.lines=Sn.lines=function(ai,Vi,Cr,Lr,Vr,ts){var fs,As,xs,Us,Bs,qs,ea,na,ca,Ma,pa,Ul;if(typeof ai=="number"&&(Ul=Cr,Cr=Vi,Vi=ai,ai=Ul),Lr=Lr||[1,1],ts=ts||!1,isNaN(Vi)||isNaN(Cr)||!Array.isArray(ai)||!Array.isArray(Lr)||!Jl(Vr)||typeof ts!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(wu(Vi,Cr),fs=Lr[0],As=Lr[1],Us=ai.length,Ma=Vi,pa=Cr,xs=0;xs<Us;xs++)(Bs=ai[xs]).length===2?(Ma=Bs[0]*fs+Ma,pa=Bs[1]*As+pa,Mc(Ma,pa)):(qs=Bs[0]*fs+Ma,ea=Bs[1]*As+pa,na=Bs[2]*fs+Ma,ca=Bs[3]*As+pa,Ma=Bs[4]*fs+Ma,pa=Bs[5]*As+pa,gc(qs,ea,na,ca,Ma,pa));return ts&&Td(),bu(Vr),this},Sn.path=function(ai){for(var Vi=0;Vi<ai.length;Vi++){var Cr=ai[Vi],Lr=Cr.c;switch(Cr.op){case"m":wu(Lr[0],Lr[1]);break;case"l":Mc(Lr[0],Lr[1]);break;case"c":gc.apply(this,Lr);break;case"h":Td()}}return this},Sn.__private__.rect=Sn.rect=function(ai,Vi,Cr,Lr,Vr){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||isNaN(Lr)||!Jl(Vr))throw new Error("Invalid arguments passed to jsPDF.rect");return si===ii.COMPAT&&(Lr=-Lr),tr([Ai(li(ai)),Ai(Mi(Vi)),Ai(li(Cr)),Ai(li(Lr)),"re"].join(" ")),bu(Vr),this},Sn.__private__.triangle=Sn.triangle=function(ai,Vi,Cr,Lr,Vr,ts,fs){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||isNaN(Lr)||isNaN(Vr)||isNaN(ts)||!Jl(fs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Cr-ai,Lr-Vi],[Vr-Cr,ts-Lr],[ai-Vr,Vi-ts]],ai,Vi,[1,1],fs,!0),this},Sn.__private__.roundedRect=Sn.roundedRect=function(ai,Vi,Cr,Lr,Vr,ts,fs){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||isNaN(Lr)||isNaN(Vr)||isNaN(ts)||!Jl(fs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var As=4/3*(Math.SQRT2-1);return Vr=Math.min(Vr,.5*Cr),ts=Math.min(ts,.5*Lr),this.lines([[Cr-2*Vr,0],[Vr*As,0,Vr,ts-ts*As,Vr,ts],[0,Lr-2*ts],[0,ts*As,-Vr*As,ts,-Vr,ts],[2*Vr-Cr,0],[-Vr*As,0,-Vr,-ts*As,-Vr,-ts],[0,2*ts-Lr],[0,-ts*As,Vr*As,-ts,Vr,-ts]],ai+Vr,Vi,[1,1],fs,!0),this},Sn.__private__.ellipse=Sn.ellipse=function(ai,Vi,Cr,Lr,Vr){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||isNaN(Lr)||!Jl(Vr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ts=4/3*(Math.SQRT2-1)*Cr,fs=4/3*(Math.SQRT2-1)*Lr;return wu(ai+Cr,Vi),gc(ai+Cr,Vi-fs,ai+ts,Vi-Lr,ai,Vi-Lr),gc(ai-ts,Vi-Lr,ai-Cr,Vi-fs,ai-Cr,Vi),gc(ai-Cr,Vi+fs,ai-ts,Vi+Lr,ai,Vi+Lr),gc(ai+ts,Vi+Lr,ai+Cr,Vi+fs,ai+Cr,Vi),bu(Vr),this},Sn.__private__.circle=Sn.circle=function(ai,Vi,Cr,Lr){if(isNaN(ai)||isNaN(Vi)||isNaN(Cr)||!Jl(Lr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ai,Vi,Cr,Cr,Lr)},Sn.setFont=function(ai,Vi,Cr){return Cr&&(Vi=Pi(Vi,Cr)),ps=Id(ai,Vi,{disableWarning:!1}),this};var Mh=Sn.__private__.getFont=Sn.getFont=function(){return Rs[Id.apply(Sn,arguments)]};Sn.__private__.getFontList=Sn.getFontList=function(){var ai,Vi,Cr={};for(ai in vs)if(vs.hasOwnProperty(ai))for(Vi in Cr[ai]=[],vs[ai])vs[ai].hasOwnProperty(Vi)&&Cr[ai].push(Vi);return Cr},Sn.addFont=function(ai,Vi,Cr,Lr,Vr){var ts=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ts.indexOf(arguments[3])!==-1?Vr=arguments[3]:arguments[3]&&ts.indexOf(arguments[3])==-1&&(Cr=Pi(Cr,Lr)),Vr=Vr||"Identity-H",Au.call(this,ai,Vi,Cr,Vr)};var Oc,Pu=Ae.lineWidth||.200025,Jc=Sn.__private__.getLineWidth=Sn.getLineWidth=function(){return Pu},Ld=Sn.__private__.setLineWidth=Sn.setLineWidth=function(ai){return Pu=ai,tr(Ai(li(ai))+" w"),this};Sn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(ai,Vi){if(ai=ai||[],Vi=Vi||0,isNaN(Vi)||!Array.isArray(ai))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ai=ai.map(function(Cr){return Ai(li(Cr))}).join(" "),Vi=Ai(li(Vi)),tr("["+ai+"] "+Vi+" d"),this};var Rd=Sn.__private__.getLineHeight=Sn.getLineHeight=function(){return kr*Oc};Sn.__private__.getLineHeight=Sn.getLineHeight=function(){return kr*Oc};var Md=Sn.__private__.setLineHeightFactor=Sn.setLineHeightFactor=function(ai){return typeof(ai=ai||1.15)=="number"&&(Oc=ai),this},kd=Sn.__private__.getLineHeightFactor=Sn.getLineHeightFactor=function(){return Oc};Md(Ae.lineHeight);var tc=Sn.__private__.getHorizontalCoordinate=function(ai){return li(ai)},sc=Sn.__private__.getVerticalCoordinate=function(ai){return si===ii.ADVANCED?ai:ws[cr].mediaBox.topRightY-ws[cr].mediaBox.bottomLeftY-li(ai)},Oh=Sn.__private__.getHorizontalCoordinateString=Sn.getHorizontalCoordinateString=function(ai){return Ai(tc(ai))},mc=Sn.__private__.getVerticalCoordinateString=Sn.getVerticalCoordinateString=function(ai){return Ai(sc(ai))},Dl=Ae.strokeColor||"0 G";Sn.__private__.getStrokeColor=Sn.getDrawColor=function(){return Za(Dl)},Sn.__private__.setStrokeColor=Sn.setDrawColor=function(ai,Vi,Cr,Lr){return Dl=Ha({ch1:ai,ch2:Vi,ch3:Cr,ch4:Lr,pdfColorType:"draw",precision:2}),tr(Dl),this};var xu=Ae.fillColor||"0 g";Sn.__private__.getFillColor=Sn.getFillColor=function(){return Za(xu)},Sn.__private__.setFillColor=Sn.setFillColor=function(ai,Vi,Cr,Lr){return xu=Ha({ch1:ai,ch2:Vi,ch3:Cr,ch4:Lr,pdfColorType:"fill",precision:2}),tr(xu),this};var kc=Ae.textColor||"0 g",kh=Sn.__private__.getTextColor=Sn.getTextColor=function(){return Za(kc)};Sn.__private__.setTextColor=Sn.setTextColor=function(ai,Vi,Cr,Lr){return kc=Ha({ch1:ai,ch2:Vi,ch3:Cr,ch4:Lr,pdfColorType:"text",precision:3}),this};var Qc=Ae.charSpace,Nh=Sn.__private__.getCharSpace=Sn.getCharSpace=function(){return parseFloat(Qc||0)};Sn.__private__.setCharSpace=Sn.setCharSpace=function(ai){if(isNaN(ai))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Qc=ai,this};var Lu=0;Sn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Sn.__private__.setLineCap=Sn.setLineCap=function(ai){var Vi=Sn.CapJoinStyles[ai];if(Vi===void 0)throw new Error("Line cap style of '"+ai+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Lu=Vi,tr(Vi+" J"),this};var Ru=0;Sn.__private__.setLineJoin=Sn.setLineJoin=function(ai){var Vi=Sn.CapJoinStyles[ai];if(Vi===void 0)throw new Error("Line join style of '"+ai+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ru=Vi,tr(Vi+" j"),this},Sn.__private__.setLineMiterLimit=Sn.__private__.setMiterLimit=Sn.setLineMiterLimit=Sn.setMiterLimit=function(ai){if(ai=ai||0,isNaN(ai))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return tr(Ai(li(ai))+" M"),this},Sn.GState=j,Sn.setGState=function(ai){(ai=typeof ai=="string"?Ms[Qs[ai]]:Nd(null,ai)).equals(Do)||(tr("/"+ai.id+" gs"),Do=ai)};var Nd=function(ai,Vi){if(!ai||!Qs[ai]){var Cr=!1;for(var Lr in Ms)if(Ms.hasOwnProperty(Lr)&&Ms[Lr].equals(Vi)){Cr=!0;break}if(Cr)Vi=Ms[Lr];else{var Vr="GS"+(Object.keys(Ms).length+1).toString(10);Ms[Vr]=Vi,Vi.id=Vr}return ai&&(Qs[ai]=Vi.id),Ds.publish("addGState",Vi),Vi}};Sn.addGState=function(ai,Vi){return Nd(ai,Vi),this},Sn.saveGraphicsState=function(){return tr("q"),Ts.push({key:ps,size:kr,color:kc}),this},Sn.restoreGraphicsState=function(){tr("Q");var ai=Ts.pop();return ps=ai.key,kr=ai.size,kc=ai.color,Do=null,this},Sn.setCurrentTransformationMatrix=function(ai){return tr(ai.toString()+" cm"),this},Sn.comment=function(ai){return tr("#"+ai),this};var eu=function(ai,Vi){var Cr=ai||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Cr},set:function(ts){isNaN(ts)||(Cr=parseFloat(ts))}});var Lr=Vi||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Lr},set:function(ts){isNaN(ts)||(Lr=parseFloat(ts))}});var Vr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Vr},set:function(ts){Vr=ts.toString()}}),this},Mu=function(ai,Vi,Cr,Lr){eu.call(this,ai,Vi),this.type="rect";var Vr=Cr||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Vr},set:function(fs){isNaN(fs)||(Vr=parseFloat(fs))}});var ts=Lr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ts},set:function(fs){isNaN(fs)||(ts=parseFloat(fs))}}),this},Ou=function(){this.page=ks,this.currentPage=cr,this.pages=Hr.slice(0),this.pagesContext=ws.slice(0),this.x=Ps,this.y=Cs,this.matrix=Ns,this.width=Nc(cr),this.height=yc(cr),this.outputDestination=ir,this.id="",this.objectNumber=-1};Ou.prototype.restore=function(){ks=this.page,cr=this.currentPage,ws=this.pagesContext,Hr=this.pages,Ps=this.x,Cs=this.y,Ns=this.matrix,ku(cr,this.width),Nu(cr,this.height),ir=this.outputDestination};var Dd=function(ai,Vi,Cr,Lr,Vr){Os.push(new Ou),ks=cr=0,Hr=[],Ps=ai,Cs=Vi,Ns=Vr,Eu([Cr,Lr])},Dh=function(ai){if(la[ai])Os.pop().restore();else{var Vi=new Ou,Cr="Xo"+(Object.keys(Ys).length+1).toString(10);Vi.id=Cr,la[ai]=Cr,Ys[Cr]=Vi,Ds.publish("addFormObject",Vi),Os.pop().restore()}};for(var tu in Sn.beginFormObject=function(ai,Vi,Cr,Lr,Vr){return Dd(ai,Vi,Cr,Lr,Vr),this},Sn.endFormObject=function(ai){return Dh(ai),this},Sn.doFormObject=function(ai,Vi){var Cr=Ys[la[ai]];return tr("q"),tr(Vi.toString()+" cm"),tr("/"+Cr.id+" Do"),tr("Q"),this},Sn.getFormObject=function(ai){var Vi=Ys[la[ai]];return{x:Vi.x,y:Vi.y,width:Vi.width,height:Vi.height,matrix:Vi.matrix}},Sn.save=function(ai,Vi){return ai=ai||"generated.pdf",(Vi=Vi||{}).returnPromise=Vi.returnPromise||!1,Vi.returnPromise===!1?(l(Xc(rc()),ai),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Cr,Lr){try{var Vr=l(Xc(rc()),ai);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Cr(Vr)}catch(ts){Lr(ts.message)}})},E.API)E.API.hasOwnProperty(tu)&&(tu==="events"&&E.API.events.length?function(ai,Vi){var Cr,Lr,Vr;for(Vr=Vi.length-1;Vr!==-1;Vr--)Cr=Vi[Vr][0],Lr=Vi[Vr][1],ai.subscribe.apply(ai,[Cr].concat(typeof Lr=="function"?[Lr]:Lr))}(Ds,E.API.events):Sn[tu]=E.API[tu]);var Nc=Sn.getPageWidth=function(ai){return(ws[ai=ai||cr].mediaBox.topRightX-ws[ai].mediaBox.bottomLeftX)/rs},ku=Sn.setPageWidth=function(ai,Vi){ws[ai].mediaBox.topRightX=Vi*rs+ws[ai].mediaBox.bottomLeftX},yc=Sn.getPageHeight=function(ai){return(ws[ai=ai||cr].mediaBox.topRightY-ws[ai].mediaBox.bottomLeftY)/rs},Nu=Sn.setPageHeight=function(ai,Vi){ws[ai].mediaBox.topRightY=Vi*rs+ws[ai].mediaBox.bottomLeftY};return Sn.internal={pdfEscape:qa,getStyle:xd,getFont:Mh,getFontSize:Tr,getCharSpace:Nh,getTextColor:kh,getLineHeight:Rd,getLineHeightFactor:kd,getLineWidth:Jc,write:Dr,getHorizontalCoordinate:tc,getVerticalCoordinate:sc,getCoordinateString:Oh,getVerticalCoordinateString:mc,collections:{},newObject:Gs,newAdditionalObject:Ua,newObjectDeferred:zs,newObjectDeferredBegin:Hs,getFilters:va,putStream:Aa,events:Ds,scaleFactor:rs,pageSize:{getWidth:function(){return Nc(cr)},setWidth:function(ai){ku(cr,ai)},getHeight:function(){return yc(cr)},setHeight:function(ai){Nu(cr,ai)}},encryptionOptions:Cn,encryption:La,getEncryptor:wh,output:Kc,getNumberOfPages:Ah,pages:Hr,out:tr,f2:Ni,f3:ui,getPageInfo:Pd,getPageInfoByObjId:Fs,getCurrentPageInfo:Ph,getPDFVersion:Dn,Point:eu,Rectangle:Mu,Matrix:Ss,hasHotfix:wd},Object.defineProperty(Sn.internal.pageSize,"width",{get:function(){return Nc(cr)},set:function(ai){ku(cr,ai)},enumerable:!0,configurable:!0}),Object.defineProperty(Sn.internal.pageSize,"height",{get:function(){return yc(cr)},set:function(ai){Nu(cr,ai)},enumerable:!0,configurable:!0}),_h.call(Sn,Pr),ps="F1",Sd(ke,t),Ds.publish("initialized"),Sn}I.prototype.lsbFirstWord=function(Ae){return String.fromCharCode(Ae>>0&255,Ae>>8&255,Ae>>16&255,Ae>>24&255)},I.prototype.toHexString=function(Ae){return Ae.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Ae){for(var e=[],t=0;t<Ae.length;t+=2)e.push(String.fromCharCode(parseInt(Ae.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(Ae,e){return P(x(e).substr(0,5),Ae)},I.prototype.encryptor=function(Ae,e){var t=x(this.encryptionKey+String.fromCharCode(255&Ae,Ae>>8&255,Ae>>16&255,255&e,e>>8&255)).substr(0,10);return function(Oe){return P(t,Oe)}},j.prototype.equals=function(Ae){var e,t="id,objectNumber,equals";if(!Ae||_typeof(Ae)!==_typeof(this))return!1;var Oe=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!Ae.hasOwnProperty(e)||this[e]!==Ae[e])return!1;Oe++}for(e in Ae)Ae.hasOwnProperty(e)&&t.indexOf(e)<0&&Oe--;return Oe===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(Ae){return Ae.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Ae){return Ae.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Ae){return Ae.toFixed(2)},z=function(Ae){return Ae.toFixed(5)};q.__acroform__={};var H=function(Ae,e){Ae.prototype=Object.create(e.prototype),Ae.prototype.constructor=Ae},W=function(Ae){return Ae*D},V=function(Ae){var e=new ut,t=At.internal.getHeight(Ae)||0,Oe=At.internal.getWidth(Ae)||0;return e.BBox=[0,0,Number(U(Oe)),Number(U(t))],e},G=q.__acroform__.setBit=function(Ae,e){if(Ae=Ae||0,e=e||0,isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Ae|=1<<e},Y=q.__acroform__.clearBit=function(Ae,e){if(Ae=Ae||0,e=e||0,isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Ae&=~(1<<e)},J=q.__acroform__.getBit=function(Ae,e){if(isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return Ae&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(Ae,e){if(isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Ae,e-1)},K=q.__acroform__.setBitForPdf=function(Ae,e){if(isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Ae,e-1)},Z=q.__acroform__.clearBitForPdf=function(Ae,e){if(isNaN(Ae)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Ae,e-1)},$=q.__acroform__.calculateCoordinates=function(Ae,e){var t=e.internal.getHorizontalCoordinate,Oe=e.internal.getVerticalCoordinate,ke=Ae[0],Be=Ae[1],Ue=Ae[2],je=Ae[3],We={};return We.lowerLeft_X=t(ke)||0,We.lowerLeft_Y=Oe(Be+je)||0,We.upperRight_X=t(ke+Ue)||0,We.upperRight_Y=Oe(Be)||0,[Number(U(We.lowerLeft_X)),Number(U(We.lowerLeft_Y)),Number(U(We.upperRight_X)),Number(U(We.upperRight_Y))]},Q=function(Ae){if(Ae.appearanceStreamContent)return Ae.appearanceStreamContent;if(Ae.V||Ae.DV){var e=[],t=Ae._V||Ae.DV,Oe=tt(Ae,t),ke=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(Ae.scope.__private__.encodeColorString(Ae.color)),e.push("/"+ke+" "+U(Oe.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(Oe.text),e.push("ET"),e.push("Q"),e.push("EMC");var Be=V(Ae);return Be.scope=Ae.scope,Be.stream=e.join(`
`),Be}},tt=function(Ae,e){var t=Ae.fontSize===0?Ae.maxFontSize:Ae.fontSize,Oe={text:"",fontSize:""},ke=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");ke=Ae.multiline?ke.map(function(ui){return ui.split(`
`)}):ke.map(function(ui){return[ui]});var Be=t,Ue=At.internal.getHeight(Ae)||0;Ue=Ue<0?-Ue:Ue;var je=At.internal.getWidth(Ae)||0;je=je<0?-je:je;var We=function(ui,li,Ri){if(ui+1<ke.length){var Mi=li+" "+ke[ui+1][0];return et(Mi,Ae,Ri).width<=je-4}return!1};Be++;e:for(;Be>0;){e="",Be--;var Qe,Cn,An=et("3",Ae,Be).height,En=Ae.multiline?Ue-Be:(Ue-An)/2,Sn=En+=2,Tn=0,Dn=0,ti=0;if(Be<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,Ae,Be=12).width+", FieldWidth:"+je+`
`;break}for(var ni="",ii=0,si=0;si<ke.length;si++)if(ke.hasOwnProperty(si)){var oi=!1;if(ke[si].length!==1&&ti!==ke[si].length-1){if((An+2)*(ii+2)+2>Ue)continue e;ni+=ke[si][ti],oi=!0,Dn=si,si--}else{ni=(ni+=ke[si][ti]+" ").substr(ni.length-1)==" "?ni.substr(0,ni.length-1):ni;var ci=parseInt(si),Pi=We(ci,ni,Be),Ai=si>=ke.length-1;if(Pi&&!Ai){ni+=" ",ti=0;continue}if(Pi||Ai){if(Ai)Dn=ci;else if(Ae.multiline&&(An+2)*(ii+2)+2>Ue)continue e}else{if(!Ae.multiline||(An+2)*(ii+2)+2>Ue)continue e;Dn=ci}}for(var fi="",Oi=Tn;Oi<=Dn;Oi++){var Ni=ke[Oi];if(Ae.multiline){if(Oi===Dn){fi+=Ni[ti]+" ",ti=(ti+1)%Ni.length;continue}if(Oi===Tn){fi+=Ni[Ni.length-1]+" ";continue}}fi+=Ni[0]+" "}switch(fi=fi.substr(fi.length-1)==" "?fi.substr(0,fi.length-1):fi,Cn=et(fi,Ae,Be).width,Ae.textAlign){case"right":Qe=je-Cn-2;break;case"center":Qe=(je-Cn)/2;break;case"left":default:Qe=2}e+=U(Qe)+" "+U(Sn)+` Td
`,e+="("+R(fi)+`) Tj
`,e+=-U(Qe)+` 0 Td
`,Sn=-(Be+2),Cn=0,Tn=oi?Dn:Dn+1,ii++,ni=""}break}return Oe.text=e,Oe.fontSize=Be,Oe},et=function(Ae,e,t){var Oe=e.scope.internal.getFont(e.fontName,e.fontStyle),ke=e.scope.getStringUnitWidth(Ae,{font:Oe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:Oe,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:ke}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Ae,e){var t={type:"reference",object:Ae};e.internal.getPageInfo(Ae.page).pageContext.annotations.find(function(Oe){return Oe.type===t.type&&Oe.object===t.object})===void 0&&e.internal.getPageInfo(Ae.page).pageContext.annotations.push(t)},it=function(Ae,e){for(var t in Ae)if(Ae.hasOwnProperty(t)){var Oe=t,ke=Ae[t];e.internal.newObjectDeferredBegin(ke.objId,!0),_typeof(ke)==="object"&&typeof ke.putStream=="function"&&ke.putStream(),delete Ae[Oe]}},at=function(Ae,e){if(e.scope=Ae,Ae.internal!==void 0&&(Ae.internal.acroformPlugin===void 0||Ae.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Ae.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Ae.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Ae.internal.scaleFactor,Ae.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Ae.internal.acroformPlugin.acroFormDictionaryRoot.scope=Ae,Ae.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Ae.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(Ae)}),Ae.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var Oe=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=Oe[ke];Be.objId=void 0,Be.hasAnnotation&&nt(Be,t)}})(Ae)}),Ae.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Ae)}),Ae.internal.events.subscribe("postPutPages",function(t){(function(Oe,ke){var Be=!Oe;for(var Ue in Oe||(ke.internal.newObjectDeferredBegin(ke.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),ke.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),Oe=Oe||ke.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(Oe.hasOwnProperty(Ue)){var je=Oe[Ue],We=[],Qe=je.Rect;if(je.Rect&&(je.Rect=$(je.Rect,ke)),ke.internal.newObjectDeferredBegin(je.objId,!0),je.DA=At.createDefaultAppearanceStream(je),_typeof(je)==="object"&&typeof je.getKeyValueListForStream=="function"&&(We=je.getKeyValueListForStream()),je.Rect=Qe,je.hasAppearanceStream&&!je.appearanceStreamContent){var Cn=Q(je);We.push({key:"AP",value:"<</N "+Cn+">>"}),ke.internal.acroformPlugin.xForms.push(Cn)}if(je.appearanceStreamContent){var An="";for(var En in je.appearanceStreamContent)if(je.appearanceStreamContent.hasOwnProperty(En)){var Sn=je.appearanceStreamContent[En];if(An+="/"+En+" ",An+="<<",Object.keys(Sn).length>=1||Array.isArray(Sn)){for(var Ue in Sn)if(Sn.hasOwnProperty(Ue)){var Tn=Sn[Ue];typeof Tn=="function"&&(Tn=Tn.call(ke,je)),An+="/"+Ue+" "+Tn+" ",ke.internal.acroformPlugin.xForms.indexOf(Tn)>=0||ke.internal.acroformPlugin.xForms.push(Tn)}}else typeof(Tn=Sn)=="function"&&(Tn=Tn.call(ke,je)),An+="/"+Ue+" "+Tn,ke.internal.acroformPlugin.xForms.indexOf(Tn)>=0||ke.internal.acroformPlugin.xForms.push(Tn);An+=">>"}We.push({key:"AP",value:`<<
`+An+">>"})}ke.internal.putStream({additionalKeyValues:We,objectId:je.objId}),ke.internal.out("endobj")}Be&&it(ke.internal.acroformPlugin.xForms,ke)})(t,Ae)}),Ae.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Ae,e,t){var Oe=function(Ue){return Ue};if(Array.isArray(Ae)){for(var ke="[",Be=0;Be<Ae.length;Be++)switch(Be!==0&&(ke+=" "),_typeof(Ae[Be])){case"boolean":case"number":case"object":ke+=Ae[Be].toString();break;case"string":Ae[Be].substr(0,1)!=="/"?(e!==void 0&&t&&(Oe=t.internal.getEncryptor(e)),ke+="("+R(Oe(Ae[Be].toString()))+")"):ke+=Ae[Be].toString()}return ke+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Ae,e,t){var Oe=function(ke){return ke};return e!==void 0&&t&&(Oe=t.internal.getEncryptor(e)),(Ae=Ae||"").toString(),Ae="("+R(Oe(Ae))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Ae){this._objId=Ae}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Ae=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Ae,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Ae=[],e=Object.getOwnPropertyNames(this).filter(function(Be){return Be!="content"&&Be!="appearanceStreamContent"&&Be!="scope"&&Be!="objId"&&Be.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var Oe=e[t],ke=this[Oe];ke&&(Array.isArray(ke)?Ae.push({key:Oe,value:ot(ke,this.objId,this.scope)}):ke instanceof ct?(ke.scope=this.scope,Ae.push({key:Oe,value:ke.objId+" 0 R"})):typeof ke!="function"&&Ae.push({key:Oe,value:ke}))}return Ae};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Ae,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){Ae=t.trim()},get:function(){return Ae||null}})};H(ut,ct);var ht=function(){ct.call(this);var Ae,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Ae){var t=function(Oe){return Oe};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(Ae))+")"}},set:function(t){Ae=t}})};H(ht,ct);var lt=function Ae(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute F supplied.');e=ni}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(ni){ni?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute Ff supplied.');t=ni}});var Oe=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(Oe.length!==0)return Oe},set:function(ni){Oe=ni!==void 0?ni:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[0])?0:Oe[0]},set:function(ni){Oe[0]=ni}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[1])?0:Oe[1]},set:function(ni){Oe[1]=ni}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[2])?0:Oe[2]},set:function(ni){Oe[2]=ni}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!Oe||isNaN(Oe[3])?0:Oe[3]},set:function(ni){Oe[3]=ni}});var ke="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return ke},set:function(ni){switch(ni){case"/Btn":case"/Tx":case"/Ch":case"/Sig":ke=ni;break;default:throw new Error('Invalid value "'+ni+'" for attribute FT supplied.')}}});var Be=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Be||Be.length<1){if(this instanceof yt)return;Be="FieldObject"+Ae.FieldNum++}var ni=function(ii){return ii};return this.scope&&(ni=this.scope.internal.getEncryptor(this.objId)),"("+R(ni(Be))+")"},set:function(ni){Be=ni.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Be},set:function(ni){Be=ni}});var Ue="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Ue},set:function(ni){Ue=ni}});var je="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return je},set:function(ni){je=ni}});var We=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return We},set:function(ni){We=ni}});var Qe=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Qe===void 0?50/D:Qe},set:function(ni){Qe=ni}});var Cn="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Cn},set:function(ni){Cn=ni}});var An="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!An||this instanceof yt||this instanceof Nt))return st(An,this.objId,this.scope)},set:function(ni){ni=ni.toString(),An=ni}});var En=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(En)return this instanceof mt?En:st(En,this.objId,this.scope)},set:function(ni){ni=ni.toString(),En=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(En.substr(1,En.length-1)):En},set:function(ni){ni=ni.toString(),En=this instanceof mt?"/"+ni:ni}});var Sn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Sn)return Sn},set:function(ni){this.V=ni}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Sn)return this instanceof mt?Sn:st(Sn,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Sn=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Sn.substr(1,Sn.length-1)):Sn},set:function(ni){ni=ni.toString(),Sn=this instanceof mt?"/"+ni:ni}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Tn,Dn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Dn},set:function(ni){ni=!!ni,Dn=ni}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Tn)return Tn},set:function(ni){Tn=ni}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(ni){ni?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(ni){ni?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(ni){ni?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var ti=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(ti!==null)return ti},set:function(ni){if([0,1,2].indexOf(ni)===-1)throw new Error('Invalid value "'+ni+'" for attribute Q supplied.');ti=ni}}),Object.defineProperty(this,"textAlign",{get:function(){var ni;switch(ti){case 0:default:ni="left";break;case 1:ni="center";break;case 2:ni="right"}return ni},configurable:!0,enumerable:!0,set:function(ni){switch(ni){case"right":case 2:ti=2;break;case"center":case 1:ti=1;break;case"left":case 0:default:ti=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Ae=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(t){Ae=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(t){Ae=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var Oe,ke;ke=[],typeof(Oe=t)=="string"&&(ke=function(Be,Ue,je){je||(je=1);for(var We,Qe=[];We=Ue.exec(Be);)Qe.push(We[je]);return Qe}(Oe,/\((.*?)\)/g)),e=ke}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,Oe){for(Oe=Oe||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),Oe!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(t){t?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(t){t?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(t){t?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(t){t?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(t){t?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(t){t?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(t){t?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Ae,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Be){return Be};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var Oe,ke=[];for(Oe in ke.push("<<"),e)ke.push("/"+Oe+" ("+R(t(e[Oe]))+")");return ke.push(">>"),ke.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Ae},set:function(t){Ae=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Ae.substr(1,Ae.length-1)},set:function(t){Ae="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Ae=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(e){Ae=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var Ae,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Ae},set:function(ke){Ae=ke}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(ke){e=ke}});var t,Oe={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var ke=function(je){return je};this.scope&&(ke=this.scope.internal.getEncryptor(this.objId));var Be,Ue=[];for(Be in Ue.push("<<"),Oe)Ue.push("/"+Be+" ("+R(ke(Oe[Be]))+")");return Ue.push(">>"),Ue.join(`
`)},set:function(ke){_typeof(ke)==="object"&&(Oe=ke)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return Oe.CA||""},set:function(ke){typeof ke=="string"&&(Oe.CA=ke)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(ke){t=ke}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(ke){t="/"+ke}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Ae){if(!("createAppearanceStream"in Ae)||!("getCA"in Ae))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=Ae.createAppearanceStream(t.optionName),t.caption=Ae.getCA()}},bt.prototype.createOption=function(Ae){var e=new yt;return e.Parent=this,e.optionName=Ae,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Ae=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Ae},set:function(e){Ae=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Ae},set:function(e){Number.isInteger(e)&&(Ae=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(Ae){Ae?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[],Oe=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,ke=Ae.scope.__private__.encodeColorString(Ae.color),Be=tt(Ae,Ae.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+Oe+" "+U(Be.fontSize)+" Tf "+ke),t.push("BT"),t.push(Be.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,Oe=Ae.scope.__private__.encodeColorString(Ae.color),ke=[],Be=At.internal.getHeight(Ae),Ue=At.internal.getWidth(Ae),je=tt(Ae,Ae.caption);return ke.push("1 g"),ke.push("0 0 "+U(Ue)+" "+U(Be)+" re"),ke.push("f"),ke.push("q"),ke.push("0 0 1 rg"),ke.push("0 0 "+U(Ue-1)+" "+U(Be-1)+" re"),ke.push("W"),ke.push("n"),ke.push("0 g"),ke.push("BT"),ke.push("/"+t+" "+U(je.fontSize)+" Tf "+Oe),ke.push(je.text),ke.push("ET"),ke.push("Q"),e.stream=ke.join(`
`),e},OffPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(Ae){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[Ae]=At.RadioButton.Circle.YesNormal,e.D[Ae]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[],Oe=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;Oe=Number((.9*Oe).toFixed(5));var ke=At.internal.Bezier_C,Be=Number((Oe*ke).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Be+" "+Be+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Be+" "+Oe+" -"+Oe+" "+Be+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Be+" -"+Be+" -"+Oe+" 0 -"+Oe+" c"),t.push(Be+" -"+Oe+" "+Oe+" -"+Be+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[],Oe=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;Oe=Number((.9*Oe).toFixed(5));var ke=Number((2*Oe).toFixed(5)),Be=Number((ke*At.internal.Bezier_C).toFixed(5)),Ue=Number((Oe*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Ue+" "+Ue+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Ue+" "+Oe+" -"+Oe+" "+Ue+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Ue+" -"+Ue+" -"+Oe+" 0 -"+Oe+" c"),t.push(Ue+" -"+Oe+" "+Oe+" -"+Ue+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[],Oe=At.internal.getWidth(Ae)<=At.internal.getHeight(Ae)?At.internal.getWidth(Ae)/4:At.internal.getHeight(Ae)/4;Oe=Number((.9*Oe).toFixed(5));var ke=Number((2*Oe).toFixed(5)),Be=Number((ke*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Ae)/2)+" "+z(At.internal.getHeight(Ae)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(Ae){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[Ae]=At.RadioButton.Cross.YesNormal,e.D[Ae]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[],Oe=At.internal.calculateCross(Ae);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(Ae)-2)+" "+U(At.internal.getHeight(Ae)-2)+" re"),t.push("W"),t.push("n"),t.push(U(Oe.x1.x)+" "+U(Oe.x1.y)+" m"),t.push(U(Oe.x2.x)+" "+U(Oe.x2.y)+" l"),t.push(U(Oe.x4.x)+" "+U(Oe.x4.y)+" m"),t.push(U(Oe.x3.x)+" "+U(Oe.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=At.internal.calculateCross(Ae),Oe=[];return Oe.push("0.749023 g"),Oe.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),Oe.push("f"),Oe.push("q"),Oe.push("1 1 "+U(At.internal.getWidth(Ae)-2)+" "+U(At.internal.getHeight(Ae)-2)+" re"),Oe.push("W"),Oe.push("n"),Oe.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),Oe.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),Oe.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),Oe.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),Oe.push("s"),Oe.push("Q"),e.stream=Oe.join(`
`),e},OffPushDown:function(Ae){var e=V(Ae);e.scope=Ae.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Ae))+" "+U(At.internal.getHeight(Ae))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(Ae){var e=Ae.scope.internal.getFont(Ae.fontName,Ae.fontStyle).id,t=Ae.scope.__private__.encodeColorString(Ae.color);return"/"+e+" "+Ae.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(Ae){var e=At.internal.getWidth(Ae),t=At.internal.getHeight(Ae),Oe=Math.min(e,t);return{x1:{x:(e-Oe)/2,y:(t-Oe)/2+Oe},x2:{x:(e-Oe)/2+Oe,y:(t-Oe)/2},x3:{x:(e-Oe)/2,y:(t-Oe)/2},x4:{x:(e-Oe)/2+Oe,y:(t-Oe)/2+Oe}}}},At.internal.getWidth=function(Ae){var e=0;return _typeof(Ae)==="object"&&(e=W(Ae.Rect[2])),e},At.internal.getHeight=function(Ae){var e=0;return _typeof(Ae)==="object"&&(e=W(Ae.Rect[3])),e};var xt=q.addField=function(Ae){if(at(this,Ae),!(Ae instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=Ae).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),Ae.page=Ae.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(Ae){return Ae.reduce(function(e,t,Oe){return e[t]=Oe,e},{})}(function(Ae){Ae.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},Oe=Ae.__addimage__.getImageFileTypeByImageData=function(ui,li){var Ri,Mi,Bi,er,nr,lr=e;if((li=li||e)==="RGBA"||ui.data!==void 0&&ui.data instanceof Uint8ClampedArray&&"height"in ui&&"width"in ui)return"RGBA";if(Pi(ui))for(nr in t)for(Bi=t[nr],Ri=0;Ri<Bi.length;Ri+=1){for(er=!0,Mi=0;Mi<Bi[Ri].length;Mi+=1)if(Bi[Ri][Mi]!==void 0&&Bi[Ri][Mi]!==ui[Mi]){er=!1;break}if(er===!0){lr=nr;break}}else for(nr in t)for(Bi=t[nr],Ri=0;Ri<Bi.length;Ri+=1){for(er=!0,Mi=0;Mi<Bi[Ri].length;Mi+=1)if(Bi[Ri][Mi]!==void 0&&Bi[Ri][Mi]!==ui.charCodeAt(Mi)){er=!1;break}if(er===!0){lr=nr;break}}return lr===e&&li!==e&&(lr=li),lr},ke=function ui(li){for(var Ri=this.internal.write,Mi=this.internal.putStream,Bi=(0,this.internal.getFilters)();Bi.indexOf("FlateEncode")!==-1;)Bi.splice(Bi.indexOf("FlateEncode"),1);li.objectId=this.internal.newObject();var er=[];if(er.push({key:"Type",value:"/XObject"}),er.push({key:"Subtype",value:"/Image"}),er.push({key:"Width",value:li.width}),er.push({key:"Height",value:li.height}),li.colorSpace===ti.INDEXED?er.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(li.palette.length/3-1)+" "+("sMask"in li&&li.sMask!==void 0?li.objectId+2:li.objectId+1)+" 0 R]"}):(er.push({key:"ColorSpace",value:"/"+li.colorSpace}),li.colorSpace===ti.DEVICE_CMYK&&er.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),er.push({key:"BitsPerComponent",value:li.bitsPerComponent}),"decodeParameters"in li&&li.decodeParameters!==void 0&&er.push({key:"DecodeParms",value:"<<"+li.decodeParameters+">>"}),"transparency"in li&&Array.isArray(li.transparency)){for(var nr="",lr=0,hr=li.transparency.length;lr<hr;lr++)nr+=li.transparency[lr]+" "+li.transparency[lr]+" ";er.push({key:"Mask",value:"["+nr+"]"})}li.sMask!==void 0&&er.push({key:"SMask",value:li.objectId+1+" 0 R"});var ar=li.filter!==void 0?["/"+li.filter]:void 0;if(Mi({data:li.data,additionalKeyValues:er,alreadyAppliedFilters:ar,objectId:li.objectId}),Ri("endobj"),"sMask"in li&&li.sMask!==void 0){var wr="/Predictor "+li.predictor+" /Colors 1 /BitsPerComponent "+li.bitsPerComponent+" /Columns "+li.width,Fi={width:li.width,height:li.height,colorSpace:"DeviceGray",bitsPerComponent:li.bitsPerComponent,decodeParameters:wr,data:li.sMask};"filter"in li&&(Fi.filter=li.filter),ui.call(this,Fi)}if(li.colorSpace===ti.INDEXED){var cr=this.internal.newObject();Mi({data:fi(new Uint8Array(li.palette)),objectId:cr}),Ri("endobj")}},Be=function(){var ui=this.internal.collections.addImage_images;for(var li in ui)ke.call(this,ui[li])},Ue=function(){var ui,li=this.internal.collections.addImage_images,Ri=this.internal.write;for(var Mi in li)Ri("/I"+(ui=li[Mi]).index,ui.objectId,"0","R")},je=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Be),this.internal.events.subscribe("putXobjectDict",Ue))},We=function(){var ui=this.internal.collections.addImage_images;return je.call(this),ui},Qe=function(){return Object.keys(this.internal.collections.addImage_images).length},Cn=function(ui){return typeof Ae["process"+ui.toUpperCase()]=="function"},An=function(ui){return _typeof(ui)==="object"&&ui.nodeType===1},En=function(ui,li){if(ui.nodeName==="IMG"&&ui.hasAttribute("src")){var Ri=""+ui.getAttribute("src");if(Ri.indexOf("data:image/")===0)return u(unescape(Ri).split("base64,").pop());var Mi=Ae.loadFile(Ri,!0);if(Mi!==void 0)return Mi}if(ui.nodeName==="CANVAS"){if(ui.width===0||ui.height===0)throw new Error("Given canvas must have data. Canvas width: "+ui.width+", height: "+ui.height);var Bi;switch(li){case"PNG":Bi="image/png";break;case"WEBP":Bi="image/webp";break;case"JPEG":case"JPG":default:Bi="image/jpeg"}return u(ui.toDataURL(Bi,1).split("base64,").pop())}},Sn=function(ui){var li=this.internal.collections.addImage_images;if(li){for(var Ri in li)if(ui===li[Ri].alias)return li[Ri]}},Tn=function(ui,li,Ri){return ui||li||(ui=-96,li=-96),ui<0&&(ui=-1*Ri.width*72/ui/this.internal.scaleFactor),li<0&&(li=-1*Ri.height*72/li/this.internal.scaleFactor),ui===0&&(ui=li*Ri.width/Ri.height),li===0&&(li=ui*Ri.height/Ri.width),[ui,li]},Dn=function(ui,li,Ri,Mi,Bi,er){var nr=Tn.call(this,Ri,Mi,Bi),lr=this.internal.getCoordinateString,hr=this.internal.getVerticalCoordinateString,ar=We.call(this);if(Ri=nr[0],Mi=nr[1],ar[Bi.index]=Bi,er){er*=Math.PI/180;var wr=Math.cos(er),Fi=Math.sin(er),cr=function(gr){return gr.toFixed(4)},rr=[cr(wr),cr(Fi),cr(-1*Fi),cr(wr),0,0,"cm"]}this.internal.write("q"),er?(this.internal.write([1,"0","0",1,lr(ui),hr(li+Mi),"cm"].join(" ")),this.internal.write(rr.join(" ")),this.internal.write([lr(Ri),"0","0",lr(Mi),"0","0","cm"].join(" "))):this.internal.write([lr(Ri),"0","0",lr(Mi),lr(ui),hr(li+Mi),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Bi.index+" Do"),this.internal.write("Q")},ti=Ae.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Ae.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ni=Ae.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ii=Ae.__addimage__.sHashCode=function(ui){var li,Ri,Mi=0;if(typeof ui=="string")for(Ri=ui.length,li=0;li<Ri;li++)Mi=(Mi<<5)-Mi+ui.charCodeAt(li),Mi|=0;else if(Pi(ui))for(Ri=ui.byteLength/2,li=0;li<Ri;li++)Mi=(Mi<<5)-Mi+ui[li],Mi|=0;return Mi},si=Ae.__addimage__.validateStringAsBase64=function(ui){(ui=ui||"").toString().trim();var li=!0;return ui.length===0&&(li=!1),ui.length%4!=0&&(li=!1),/^[A-Za-z0-9+/]+$/.test(ui.substr(0,ui.length-2))===!1&&(li=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ui.substr(-2))===!1&&(li=!1),li},oi=Ae.__addimage__.extractImageFromDataUrl=function(ui){var li=(ui=ui||"").split("base64,"),Ri=null;if(li.length===2){var Mi=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(li[0]);Array.isArray(Mi)&&(Ri={mimeType:Mi[1],charset:Mi[2],data:li[1]})}return Ri},ci=Ae.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Ae.__addimage__.isArrayBuffer=function(ui){return ci()&&ui instanceof ArrayBuffer};var Pi=Ae.__addimage__.isArrayBufferView=function(ui){return ci()&&typeof Uint32Array<"u"&&(ui instanceof Int8Array||ui instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ui instanceof Uint8ClampedArray||ui instanceof Int16Array||ui instanceof Uint16Array||ui instanceof Int32Array||ui instanceof Uint32Array||ui instanceof Float32Array||ui instanceof Float64Array)},Ai=Ae.__addimage__.binaryStringToUint8Array=function(ui){for(var li=ui.length,Ri=new Uint8Array(li),Mi=0;Mi<li;Mi++)Ri[Mi]=ui.charCodeAt(Mi);return Ri},fi=Ae.__addimage__.arrayBufferToBinaryString=function(ui){for(var li="",Ri=Pi(ui)?ui:new Uint8Array(ui),Mi=0;Mi<Ri.length;Mi+=8192)li+=String.fromCharCode.apply(null,Ri.subarray(Mi,Mi+8192));return li};Ae.addImage=function(){var ui,li,Ri,Mi,Bi,er,nr,lr,hr;if(typeof arguments[1]=="number"?(li=e,Ri=arguments[1],Mi=arguments[2],Bi=arguments[3],er=arguments[4],nr=arguments[5],lr=arguments[6],hr=arguments[7]):(li=arguments[1],Ri=arguments[2],Mi=arguments[3],Bi=arguments[4],er=arguments[5],nr=arguments[6],lr=arguments[7],hr=arguments[8]),_typeof(ui=arguments[0])==="object"&&!An(ui)&&"imageData"in ui){var ar=ui;ui=ar.imageData,li=ar.format||li||e,Ri=ar.x||Ri||0,Mi=ar.y||Mi||0,Bi=ar.w||ar.width||Bi,er=ar.h||ar.height||er,nr=ar.alias||nr,lr=ar.compression||lr,hr=ar.rotation||ar.angle||hr}var wr=this.internal.getFilters();if(lr===void 0&&wr.indexOf("FlateEncode")!==-1&&(lr="SLOW"),isNaN(Ri)||isNaN(Mi))throw new Error("Invalid coordinates passed to jsPDF.addImage");je.call(this);var Fi=Oi.call(this,ui,li,nr,lr);return Dn.call(this,Ri,Mi,Bi,er,Fi,hr),this};var Oi=function(ui,li,Ri,Mi){var Bi,er,nr;if(typeof ui=="string"&&Oe(ui)===e){ui=unescape(ui);var lr=Ni(ui,!1);(lr!==""||(lr=Ae.loadFile(ui,!0))!==void 0)&&(ui=lr)}if(An(ui)&&(ui=En(ui,li)),li=Oe(ui,li),!Cn(li))throw new Error("addImage does not support files of type '"+li+"', please ensure that a plugin for '"+li+"' support is added.");if(((nr=Ri)==null||nr.length===0)&&(Ri=function(hr){return typeof hr=="string"||Pi(hr)?ii(hr):Pi(hr.data)?ii(hr.data):null}(ui)),(Bi=Sn.call(this,Ri))||(ci()&&(ui instanceof Uint8Array||li==="RGBA"||(er=ui,ui=Ai(ui))),Bi=this["process"+li.toUpperCase()](ui,Qe.call(this),Ri,function(hr){return hr&&typeof hr=="string"&&(hr=hr.toUpperCase()),hr in Ae.image_compression?hr:ni.NONE}(Mi),er)),!Bi)throw new Error("An unknown error occurred whilst processing the image.");return Bi},Ni=Ae.__addimage__.convertBase64ToBinaryString=function(ui,li){var Ri;li=typeof li!="boolean"||li;var Mi,Bi="";if(typeof ui=="string"){Mi=(Ri=oi(ui))!==null?Ri.data:ui;try{Bi=u(Mi)}catch(er){if(li)throw si(Mi)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+er.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Bi};Ae.getImageProperties=function(ui){var li,Ri,Mi="";if(An(ui)&&(ui=En(ui)),typeof ui=="string"&&Oe(ui)===e&&((Mi=Ni(ui,!1))===""&&(Mi=Ae.loadFile(ui)||""),ui=Mi),Ri=Oe(ui),!Cn(Ri))throw new Error("addImage does not support files of type '"+Ri+"', please ensure that a plugin for '"+Ri+"' support is added.");if(!ci()||ui instanceof Uint8Array||(ui=Ai(ui)),!(li=this["process"+Ri.toUpperCase()](ui)))throw new Error("An unknown error occurred whilst processing the image");return li.fileType=Ri,li}})(E.API),function(Ae){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Ae.events.push(["putPage",function(t){for(var Oe,ke,Be,Ue=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,We=this.internal.getPageInfoByObjId(t.objId),Qe=t.pageContext.annotations,Cn=!1,An=0;An<Qe.length&&!Cn;An++)switch((Oe=Qe[An]).type){case"link":(e(Oe.options.url)||e(Oe.options.pageNumber))&&(Cn=!0);break;case"reference":case"text":case"freetext":Cn=!0}if(Cn!=0){this.internal.write("/Annots [");for(var En=0;En<Qe.length;En++){Oe=Qe[En];var Sn=this.internal.pdfEscape,Tn=this.internal.getEncryptor(t.objId);switch(Oe.type){case"reference":this.internal.write(" "+Oe.object.objId+" 0 R ");break;case"text":var Dn=this.internal.newAdditionalObject(),ti=this.internal.newAdditionalObject(),ni=this.internal.getEncryptor(Dn.objId),ii=Oe.title||"Note";Be="<</Type /Annot /Subtype /Text "+(ke="/Rect ["+Ue(Oe.bounds.x)+" "+je(Oe.bounds.y+Oe.bounds.h)+" "+Ue(Oe.bounds.x+Oe.bounds.w)+" "+je(Oe.bounds.y)+"] ")+"/Contents ("+Sn(ni(Oe.contents))+")",Be+=" /Popup "+ti.objId+" 0 R",Be+=" /P "+We.objId+" 0 R",Be+=" /T ("+Sn(ni(ii))+") >>",Dn.content=Be;var si=Dn.objId+" 0 R";Be="<</Type /Annot /Subtype /Popup "+(ke="/Rect ["+Ue(Oe.bounds.x+30)+" "+je(Oe.bounds.y+Oe.bounds.h)+" "+Ue(Oe.bounds.x+Oe.bounds.w+30)+" "+je(Oe.bounds.y)+"] ")+" /Parent "+si,Oe.open&&(Be+=" /Open true"),Be+=" >>",ti.content=Be,this.internal.write(Dn.objId,"0 R",ti.objId,"0 R");break;case"freetext":ke="/Rect ["+Ue(Oe.bounds.x)+" "+je(Oe.bounds.y)+" "+Ue(Oe.bounds.x+Oe.bounds.w)+" "+je(Oe.bounds.y+Oe.bounds.h)+"] ";var oi=Oe.color||"#000000";Be="<</Type /Annot /Subtype /FreeText "+ke+"/Contents ("+Sn(Tn(Oe.contents))+")",Be+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+oi+")",Be+=" /Border [0 0 0]",Be+=" >>",this.internal.write(Be);break;case"link":if(Oe.options.name){var ci=this.annotations._nameMap[Oe.options.name];Oe.options.pageNumber=ci.page,Oe.options.top=ci.y}else Oe.options.top||(Oe.options.top=0);if(ke="/Rect ["+Oe.finalBounds.x+" "+Oe.finalBounds.y+" "+Oe.finalBounds.w+" "+Oe.finalBounds.h+"] ",Be="",Oe.options.url)Be="<</Type /Annot /Subtype /Link "+ke+"/Border [0 0 0] /A <</S /URI /URI ("+Sn(Tn(Oe.options.url))+") >>";else if(Oe.options.pageNumber)switch(Be="<</Type /Annot /Subtype /Link "+ke+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(Oe.options.pageNumber).objId+" 0 R",Oe.options.magFactor=Oe.options.magFactor||"XYZ",Oe.options.magFactor){case"Fit":Be+=" /Fit]";break;case"FitH":Be+=" /FitH "+Oe.options.top+"]";break;case"FitV":Oe.options.left=Oe.options.left||0,Be+=" /FitV "+Oe.options.left+"]";break;case"XYZ":default:var Pi=je(Oe.options.top);Oe.options.left=Oe.options.left||0,Oe.options.zoom===void 0&&(Oe.options.zoom=0),Be+=" /XYZ "+Oe.options.left+" "+Pi+" "+Oe.options.zoom+"]"}Be!=""&&(Be+=" >>",this.internal.write(Be))}}this.internal.write("]")}}]),Ae.createAnnotation=function(t){var Oe=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":Oe.pageContext.annotations.push(t)}},Ae.link=function(t,Oe,ke,Be,Ue){var je=this.internal.getCurrentPageInfo(),We=this.internal.getCoordinateString,Qe=this.internal.getVerticalCoordinateString;je.pageContext.annotations.push({finalBounds:{x:We(t),y:Qe(Oe),w:We(t+ke),h:Qe(Oe+Be)},options:Ue,type:"link"})},Ae.textWithLink=function(t,Oe,ke,Be){var Ue,je,We=this.getTextWidth(t),Qe=this.internal.getLineHeight()/this.internal.scaleFactor;if(Be.maxWidth!==void 0){je=Be.maxWidth;var Cn=this.splitTextToSize(t,je).length;Ue=Math.ceil(Qe*Cn)}else je=We,Ue=Qe;return this.text(t,Oe,ke,Be),ke+=.2*Qe,Be.align==="center"&&(Oe-=We/2),Be.align==="right"&&(Oe-=We),this.link(Oe,ke-Qe,je,Ue,Be),We},Ae.getTextWidth=function(t){var Oe=this.internal.getFontSize();return this.getStringUnitWidth(t)*Oe/this.internal.scaleFactor}}(E.API),function(Ae){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},Oe={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},ke=[1570,1571,1573,1575];Ae.__arabicParser__={};var Be=Ae.__arabicParser__.isInArabicSubstitutionA=function(Dn){return e[Dn.charCodeAt(0)]!==void 0},Ue=Ae.__arabicParser__.isArabicLetter=function(Dn){return typeof Dn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Dn)},je=Ae.__arabicParser__.isArabicEndLetter=function(Dn){return Ue(Dn)&&Be(Dn)&&e[Dn.charCodeAt(0)].length<=2},We=Ae.__arabicParser__.isArabicAlfLetter=function(Dn){return Ue(Dn)&&ke.indexOf(Dn.charCodeAt(0))>=0};Ae.__arabicParser__.arabicLetterHasIsolatedForm=function(Dn){return Ue(Dn)&&Be(Dn)&&e[Dn.charCodeAt(0)].length>=1};var Qe=Ae.__arabicParser__.arabicLetterHasFinalForm=function(Dn){return Ue(Dn)&&Be(Dn)&&e[Dn.charCodeAt(0)].length>=2};Ae.__arabicParser__.arabicLetterHasInitialForm=function(Dn){return Ue(Dn)&&Be(Dn)&&e[Dn.charCodeAt(0)].length>=3};var Cn=Ae.__arabicParser__.arabicLetterHasMedialForm=function(Dn){return Ue(Dn)&&Be(Dn)&&e[Dn.charCodeAt(0)].length==4},An=Ae.__arabicParser__.resolveLigatures=function(Dn){var ti=0,ni=t,ii="",si=0;for(ti=0;ti<Dn.length;ti+=1)ni[Dn.charCodeAt(ti)]!==void 0?(si++,typeof(ni=ni[Dn.charCodeAt(ti)])=="number"&&(ii+=String.fromCharCode(ni),ni=t,si=0),ti===Dn.length-1&&(ni=t,ii+=Dn.charAt(ti-(si-1)),ti-=si-1,si=0)):(ni=t,ii+=Dn.charAt(ti-si),ti-=si,si=0);return ii};Ae.__arabicParser__.isArabicDiacritic=function(Dn){return Dn!==void 0&&Oe[Dn.charCodeAt(0)]!==void 0};var En=Ae.__arabicParser__.getCorrectForm=function(Dn,ti,ni){return Ue(Dn)?Be(Dn)===!1?-1:!Qe(Dn)||!Ue(ti)&&!Ue(ni)||!Ue(ni)&&je(ti)||je(Dn)&&!Ue(ti)||je(Dn)&&We(ti)||je(Dn)&&je(ti)?0:Cn(Dn)&&Ue(ti)&&!je(ti)&&Ue(ni)&&Qe(ni)?3:je(Dn)||!Ue(ni)?1:2:-1},Sn=function(Dn){var ti=0,ni=0,ii=0,si="",oi="",ci="",Pi=(Dn=Dn||"").split("\\s+"),Ai=[];for(ti=0;ti<Pi.length;ti+=1){for(Ai.push(""),ni=0;ni<Pi[ti].length;ni+=1)si=Pi[ti][ni],oi=Pi[ti][ni-1],ci=Pi[ti][ni+1],Ue(si)?(ii=En(si,oi,ci),Ai[ti]+=ii!==-1?String.fromCharCode(e[si.charCodeAt(0)][ii]):si):Ai[ti]+=si;Ai[ti]=An(Ai[ti])}return Ai.join(" ")},Tn=Ae.__arabicParser__.processArabic=Ae.processArabic=function(){var Dn,ti=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ni=[];if(Array.isArray(ti)){var ii=0;for(ni=[],ii=0;ii<ti.length;ii+=1)Array.isArray(ti[ii])?ni.push([Sn(ti[ii][0]),ti[ii][1],ti[ii][2]]):ni.push([Sn(ti[ii])]);Dn=ni}else Dn=Sn(ti);return typeof arguments[0]=="string"?Dn:(arguments[0].text=Dn,arguments[0])};Ae.events.push(["preProcessText",Tn])}(E.API),E.API.autoPrint=function(Ae){var e;switch((Ae=Ae||{}).variant=Ae.variant||"non-conform",Ae.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(Ae){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(je){t=je}});var Oe=150;Object.defineProperty(this,"width",{get:function(){return Oe},set:function(je){Oe=isNaN(je)||Number.isInteger(je)===!1||je<0?150:je,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=Oe+1)}});var ke=300;Object.defineProperty(this,"height",{get:function(){return ke},set:function(je){ke=isNaN(je)||Number.isInteger(je)===!1||je<0?300:je,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=ke+1)}});var Be=[];Object.defineProperty(this,"childNodes",{get:function(){return Be},set:function(je){Be=je}});var Ue={};Object.defineProperty(this,"style",{get:function(){return Ue},set:function(je){Ue=je}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,Oe){var ke;if((t=t||"2d")!=="2d")return null;for(ke in Oe)this.pdf.context2d.hasOwnProperty(ke)&&(this.pdf.context2d[ke]=Oe[ke]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Ae.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(Ae){var e={left:0,top:0,bottom:0,right:0},t=!1,Oe=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),ke.call(this))},ke=function(){this.internal.__cell__.lastCell=new Be,this.internal.__cell__.pages=1},Be=function(){var We=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return We},set:function(Dn){We=Dn}});var Qe=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Qe},set:function(Dn){Qe=Dn}});var Cn=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Cn},set:function(Dn){Cn=Dn}});var An=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return An},set:function(Dn){An=Dn}});var En=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return En},set:function(Dn){En=Dn}});var Sn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Sn},set:function(Dn){Sn=Dn}});var Tn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Tn},set:function(Dn){Tn=Dn}}),this};Be.prototype.clone=function(){return new Be(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Be.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Ae.setHeaderFunction=function(We){return Oe.call(this),this.internal.__cell__.headerFunction=typeof We=="function"?We:void 0,this},Ae.getTextDimensions=function(We,Qe){Oe.call(this);var Cn=(Qe=Qe||{}).fontSize||this.getFontSize(),An=Qe.font||this.getFont(),En=Qe.scaleFactor||this.internal.scaleFactor,Sn=0,Tn=0,Dn=0,ti=this;if(!Array.isArray(We)&&typeof We!="string"){if(typeof We!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");We=String(We)}var ni=Qe.maxWidth;ni>0?typeof We=="string"?We=this.splitTextToSize(We,ni):Object.prototype.toString.call(We)==="[object Array]"&&(We=We.reduce(function(si,oi){return si.concat(ti.splitTextToSize(oi,ni))},[])):We=Array.isArray(We)?We:[We];for(var ii=0;ii<We.length;ii++)Sn<(Dn=this.getStringUnitWidth(We[ii],{font:An})*Cn)&&(Sn=Dn);return Sn!==0&&(Tn=We.length),{w:Sn/=En,h:Math.max((Tn*Cn*this.getLineHeightFactor()-Cn*(this.getLineHeightFactor()-1))/En,0)}},Ae.cellAddPage=function(){Oe.call(this),this.addPage();var We=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Be(We.left,We.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Ue=Ae.cell=function(){var We;We=arguments[0]instanceof Be?arguments[0]:new Be(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),Oe.call(this);var Qe=this.internal.__cell__.lastCell,Cn=this.internal.__cell__.padding,An=this.internal.__cell__.margins||e,En=this.internal.__cell__.tableHeaderRow,Sn=this.internal.__cell__.printHeaders;return Qe.lineNumber!==void 0&&(Qe.lineNumber===We.lineNumber?(We.x=(Qe.x||0)+(Qe.width||0),We.y=Qe.y||0):Qe.y+Qe.height+We.height+An.bottom>this.getPageHeight()?(this.cellAddPage(),We.y=An.top,Sn&&En&&(this.printHeaderRow(We.lineNumber,!0),We.y+=En[0].height)):We.y=Qe.y+Qe.height||We.y),We.text[0]!==void 0&&(this.rect(We.x,We.y,We.width,We.height,t===!0?"FD":void 0),We.align==="right"?this.text(We.text,We.x+We.width-Cn,We.y+Cn,{align:"right",baseline:"top"}):We.align==="center"?this.text(We.text,We.x+We.width/2,We.y+Cn,{align:"center",baseline:"top",maxWidth:We.width-Cn-Cn}):this.text(We.text,We.x+Cn,We.y+Cn,{align:"left",baseline:"top",maxWidth:We.width-Cn-Cn})),this.internal.__cell__.lastCell=We,this};Ae.table=function(We,Qe,Cn,An,En){if(Oe.call(this),!Cn)throw new Error("No data for PDF table.");var Sn,Tn,Dn,ti,ni=[],ii=[],si=[],oi={},ci={},Pi=[],Ai=[],fi=(En=En||{}).autoSize||!1,Oi=En.printHeaders!==!1,Ni=En.css&&En.css["font-size"]!==void 0?16*En.css["font-size"]:En.fontSize||12,ui=En.margins||Object.assign({width:this.getPageWidth()},e),li=typeof En.padding=="number"?En.padding:3,Ri=En.headerBackgroundColor||"#c8c8c8",Mi=En.headerTextColor||"#000";if(ke.call(this),this.internal.__cell__.printHeaders=Oi,this.internal.__cell__.margins=ui,this.internal.__cell__.table_font_size=Ni,this.internal.__cell__.padding=li,this.internal.__cell__.headerBackgroundColor=Ri,this.internal.__cell__.headerTextColor=Mi,this.setFontSize(Ni),An==null)ii=ni=Object.keys(Cn[0]),si=ni.map(function(){return"left"});else if(Array.isArray(An)&&_typeof(An[0])==="object")for(ni=An.map(function(ar){return ar.name}),ii=An.map(function(ar){return ar.prompt||ar.name||""}),si=An.map(function(ar){return ar.align||"left"}),Sn=0;Sn<An.length;Sn+=1)ci[An[Sn].name]=An[Sn].width*(19.049976/25.4);else Array.isArray(An)&&typeof An[0]=="string"&&(ii=ni=An,si=ni.map(function(){return"left"}));if(fi||Array.isArray(An)&&typeof An[0]=="string")for(Sn=0;Sn<ni.length;Sn+=1){for(oi[ti=ni[Sn]]=Cn.map(function(ar){return ar[ti]}),this.setFont(void 0,"bold"),Pi.push(this.getTextDimensions(ii[Sn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Tn=oi[ti],this.setFont(void 0,"normal"),Dn=0;Dn<Tn.length;Dn+=1)Pi.push(this.getTextDimensions(Tn[Dn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ci[ti]=Math.max.apply(null,Pi)+li+li,Pi=[]}if(Oi){var Bi={};for(Sn=0;Sn<ni.length;Sn+=1)Bi[ni[Sn]]={},Bi[ni[Sn]].text=ii[Sn],Bi[ni[Sn]].align=si[Sn];var er=je.call(this,Bi,ci);Ai=ni.map(function(ar){return new Be(We,Qe,ci[ar],er,Bi[ar].text,void 0,Bi[ar].align)}),this.setTableHeaderRow(Ai),this.printHeaderRow(1,!1)}var nr=An.reduce(function(ar,wr){return ar[wr.name]=wr.align,ar},{});for(Sn=0;Sn<Cn.length;Sn+=1){"rowStart"in En&&En.rowStart instanceof Function&&En.rowStart({row:Sn,data:Cn[Sn]},this);var lr=je.call(this,Cn[Sn],ci);for(Dn=0;Dn<ni.length;Dn+=1){var hr=Cn[Sn][ni[Dn]];"cellStart"in En&&En.cellStart instanceof Function&&En.cellStart({row:Sn,col:Dn,data:hr},this),Ue.call(this,new Be(We,Qe,ci[ni[Dn]],lr,hr,Sn+2,nr[ni[Dn]]))}}return this.internal.__cell__.table_x=We,this.internal.__cell__.table_y=Qe,this};var je=function(We,Qe){var Cn=this.internal.__cell__.padding,An=this.internal.__cell__.table_font_size,En=this.internal.scaleFactor;return Object.keys(We).map(function(Sn){var Tn=We[Sn];return this.splitTextToSize(Tn.hasOwnProperty("text")?Tn.text:Tn,Qe[Sn]-Cn-Cn)},this).map(function(Sn){return this.getLineHeightFactor()*Sn.length*An/En+Cn+Cn},this).reduce(function(Sn,Tn){return Math.max(Sn,Tn)},0)};Ae.setTableHeaderRow=function(We){Oe.call(this),this.internal.__cell__.tableHeaderRow=We},Ae.printHeaderRow=function(We,Qe){if(Oe.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Cn;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var An=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Be(An[0],An[1],An[2],An[3],void 0,-1)}this.setFont(void 0,"bold");for(var En=[],Sn=0;Sn<this.internal.__cell__.tableHeaderRow.length;Sn+=1){Cn=this.internal.__cell__.tableHeaderRow[Sn].clone(),Qe&&(Cn.y=this.internal.__cell__.margins.top||0,En.push(Cn)),Cn.lineNumber=We;var Tn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Ue.call(this,Cn),this.setTextColor(Tn)}En.length>0&&this.setTableHeaderRow(En),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Ae){var e=Ae.family.replace(/"|'/g,"").toLowerCase(),t=function(Be){return Pt[Be=Be||"normal"]?Be:"normal"}(Ae.style),Oe=function(Be){if(!Be)return 400;if(typeof Be=="number")return Be>=100&&Be<=900&&Be%100==0?Be:400;if(/^\d00$/.test(Be))return parseInt(Be);switch(Be){case"bold":return 700;case"normal":default:return 400}}(Ae.weight),ke=function(Be){return typeof It[Be=Be||"normal"]=="number"?Be:"normal"}(Ae.stretch);return{family:e,style:t,weight:Oe,stretch:ke,src:Ae.src||[],ref:Ae.ref||{name:e,style:[ke,t,Oe].join(" ")}}}function Ot(Ae,e,t,Oe){var ke;for(ke=t;ke>=0&&ke<e.length;ke+=Oe)if(Ae[e[ke]])return Ae[e[ke]];for(ke=t;ke>=0&&ke<e.length;ke-=Oe)if(Ae[e[ke]])return Ae[e[ke]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Ae){return[Ae.stretch,Ae.style,Ae.weight,Ae.family].join(" ")}function qt(Ae,e,t){for(var Oe=(t=t||{}).defaultFontFamily||"times",ke=Object.assign({},Bt,t.genericFontFamilies||{}),Be=null,Ue=null,je=0;je<e.length;++je)if(ke[(Be=jt(e[je])).family]&&(Be.family=ke[Be.family]),Ae.hasOwnProperty(Be.family)){Ue=Ae[Be.family];break}if(!(Ue=Ue||Ae[Oe]))throw new Error("Could not find a font-family for the rule '"+Et(Be)+"' and default family '"+Oe+"'.");if(Ue=function(We,Qe){if(Qe[We])return Qe[We];var Cn=It[We],An=Cn<=It.normal?-1:1,En=Ot(Qe,kt,Cn,An);if(!En)throw new Error("Could not find a matching font-stretch value for "+We);return En}(Be.stretch,Ue),Ue=function(We,Qe){if(Qe[We])return Qe[We];for(var Cn=Pt[We],An=0;An<Cn.length;++An)if(Qe[Cn[An]])return Qe[Cn[An]];throw new Error("Could not find a matching font-style for "+We)}(Be.style,Ue),!(Ue=function(We,Qe){if(Qe[We])return Qe[We];if(We===400&&Qe[500])return Qe[500];if(We===500&&Qe[400])return Qe[400];var Cn=Ct[We],An=Ot(Qe,Ft,Cn,We<400?-1:1);if(!An)throw new Error("Could not find a matching font-weight for value "+We);return An}(Be.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+Et(Be)+"'.");return Ue}function Dt(Ae){return Ae.trimLeft()}function Rt(Ae,e){for(var t=0;t<Ae.length;){if(Ae.charAt(t)===e)return[Ae.substring(0,t),Ae.substring(t+1)];t+=1}return null}function Tt(Ae){var e=Ae.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],Ae.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Ae){var e,t,Oe,ke,Be,Ue,je,We,Qe,Cn=function(Fi){return Fi=Fi||{},this.isStrokeTransparent=Fi.isStrokeTransparent||!1,this.strokeOpacity=Fi.strokeOpacity||1,this.strokeStyle=Fi.strokeStyle||"#000000",this.fillStyle=Fi.fillStyle||"#000000",this.isFillTransparent=Fi.isFillTransparent||!1,this.fillOpacity=Fi.fillOpacity||1,this.font=Fi.font||"10px sans-serif",this.textBaseline=Fi.textBaseline||"alphabetic",this.textAlign=Fi.textAlign||"left",this.lineWidth=Fi.lineWidth||1,this.lineJoin=Fi.lineJoin||"miter",this.lineCap=Fi.lineCap||"butt",this.path=Fi.path||[],this.transform=Fi.transform!==void 0?Fi.transform.clone():new We,this.globalCompositeOperation=Fi.globalCompositeOperation||"normal",this.globalAlpha=Fi.globalAlpha||1,this.clip_path=Fi.clip_path||[],this.currentPoint=Fi.currentPoint||new Ue,this.miterLimit=Fi.miterLimit||10,this.lastPoint=Fi.lastPoint||new Ue,this.lineDashOffset=Fi.lineDashOffset||0,this.lineDash=Fi.lineDash||[],this.margin=Fi.margin||[0,0,0,0],this.prevPageLastElemOffset=Fi.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Fi.ignoreClearRect!="boolean"||Fi.ignoreClearRect,this};Ae.events.push(["initialized",function(){this.context2d=new An(this),e=this.internal.f2,t=this.internal.getCoordinateString,Oe=this.internal.getVerticalCoordinateString,ke=this.internal.getHorizontalCoordinate,Be=this.internal.getVerticalCoordinate,Ue=this.internal.Point,je=this.internal.Rectangle,We=this.internal.Matrix,Qe=new Cn}]);var An=function(Fi){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var cr=Fi;Object.defineProperty(this,"pdf",{get:function(){return cr}});var rr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return rr},set:function(dr){rr=!!dr}});var gr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return gr},set:function(dr){gr=!!dr}});var vr=0;Object.defineProperty(this,"posX",{get:function(){return vr},set:function(dr){isNaN(dr)||(vr=dr)}});var pr=0;Object.defineProperty(this,"posY",{get:function(){return pr},set:function(dr){isNaN(dr)||(pr=dr)}}),Object.defineProperty(this,"margin",{get:function(){return Qe.margin},set:function(dr){var tr;typeof dr=="number"?tr=[dr,dr,dr,dr]:((tr=new Array(4))[0]=dr[0],tr[1]=dr.length>=2?dr[1]:tr[0],tr[2]=dr.length>=3?dr[2]:tr[0],tr[3]=dr.length>=4?dr[3]:tr[1]),Qe.margin=tr}});var _r=!1;Object.defineProperty(this,"autoPaging",{get:function(){return _r},set:function(dr){_r=dr}});var Ar=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ar},set:function(dr){Ar=dr}});var Sr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Sr},set:function(dr){Sr=dr}}),Object.defineProperty(this,"ctx",{get:function(){return Qe},set:function(dr){dr instanceof Cn&&(Qe=dr)}}),Object.defineProperty(this,"path",{get:function(){return Qe.path},set:function(dr){Qe.path=dr}});var Hr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Hr},set:function(dr){Hr=dr}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(dr){var tr;tr=En(dr),this.ctx.fillStyle=tr.style,this.ctx.isFillTransparent=tr.a===0,this.ctx.fillOpacity=tr.a,this.pdf.setFillColor(tr.r,tr.g,tr.b,{a:tr.a}),this.pdf.setTextColor(tr.r,tr.g,tr.b,{a:tr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(dr){var tr=En(dr);this.ctx.strokeStyle=tr.style,this.ctx.isStrokeTransparent=tr.a===0,this.ctx.strokeOpacity=tr.a,tr.a===0?this.pdf.setDrawColor(255,255,255):(tr.a,this.pdf.setDrawColor(tr.r,tr.g,tr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(dr){["butt","round","square"].indexOf(dr)!==-1&&(this.ctx.lineCap=dr,this.pdf.setLineCap(dr))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(dr){isNaN(dr)||(this.ctx.lineWidth=dr,this.pdf.setLineWidth(dr))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(dr){["bevel","round","miter"].indexOf(dr)!==-1&&(this.ctx.lineJoin=dr,this.pdf.setLineJoin(dr))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(dr){isNaN(dr)||(this.ctx.miterLimit=dr,this.pdf.setMiterLimit(dr))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(dr){this.ctx.textBaseline=dr}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(dr){["right","end","center","left","start"].indexOf(dr)!==-1&&(this.ctx.textAlign=dr)}});var es=null;function ir(dr,tr){if(es===null){var Dr=function(Nr){var Pr=[];return Object.keys(Nr).forEach(function(kr){Nr[kr].forEach(function(Rr){var Tr=null;switch(Rr){case"bold":Tr={family:kr,weight:"bold"};break;case"italic":Tr={family:kr,style:"italic"};break;case"bolditalic":Tr={family:kr,weight:"bold",style:"italic"};break;case"":case"normal":Tr={family:kr}}Tr!==null&&(Tr.ref={name:kr,style:Rr},Pr.push(Tr))})}),Pr}(dr.getFontList());es=function(Nr){for(var Pr={},kr=0;kr<Nr.length;++kr){var Rr=jt(Nr[kr]),Tr=Rr.family,Er=Rr.stretch,br=Rr.style,Ir=Rr.weight;Pr[Tr]=Pr[Tr]||{},Pr[Tr][Er]=Pr[Tr][Er]||{},Pr[Tr][Er][br]=Pr[Tr][Er][br]||{},Pr[Tr][Er][br][Ir]=Rr}return Pr}(Dr.concat(tr))}return es}var mr=null;Object.defineProperty(this,"fontFaces",{get:function(){return mr},set:function(dr){es=null,mr=dr}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(dr){var tr;if(this.ctx.font=dr,(tr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(dr))!==null){var Dr=tr[1],Nr=(tr[2],tr[3]),Pr=tr[4],kr=(tr[5],tr[6]),Rr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pr)[2];Pr=Math.floor(Rr==="px"?parseFloat(Pr)*this.pdf.internal.scaleFactor:Rr==="em"?parseFloat(Pr)*this.pdf.getFontSize():parseFloat(Pr)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pr);var Tr=function(Kr){var ps,rs,Ps=[],Cs=Kr.trim();if(Cs==="")return Wt;if(Cs in Mt)return[Mt[Cs]];for(;Cs!=="";){switch(rs=null,ps=(Cs=Dt(Cs)).charAt(0)){case'"':case"'":rs=Rt(Cs.substring(1),ps);break;default:rs=Tt(Cs)}if(rs===null||(Ps.push(rs[0]),(Cs=Dt(rs[1]))!==""&&Cs.charAt(0)!==","))return Wt;Cs=Cs.replace(/^,/,"")}return Ps}(kr);if(this.fontFaces){var Er=qt(ir(this.pdf,this.fontFaces),Tr.map(function(Kr){return{family:Kr,stretch:"normal",weight:Nr,style:Dr}}));this.pdf.setFont(Er.ref.name,Er.ref.style)}else{var br="";(Nr==="bold"||parseInt(Nr,10)>=700||Dr==="bold")&&(br="bold"),Dr==="italic"&&(br+="italic"),br.length===0&&(br="normal");for(var Ir="",jr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qr=0;qr<Tr.length;qr++){if(this.pdf.internal.getFont(Tr[qr],br,{noFallback:!0,disableWarning:!0})!==void 0){Ir=Tr[qr];break}if(br==="bolditalic"&&this.pdf.internal.getFont(Tr[qr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ir=Tr[qr],br="bold";else if(this.pdf.internal.getFont(Tr[qr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ir=Tr[qr],br="normal";break}}if(Ir===""){for(var Wr=0;Wr<Tr.length;Wr++)if(jr[Tr[Wr]]){Ir=jr[Tr[Wr]];break}}Ir=Ir===""?"Times":Ir,this.pdf.setFont(Ir,br)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(dr){this.ctx.globalCompositeOperation=dr}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(dr){this.ctx.globalAlpha=dr}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(dr){this.ctx.lineDashOffset=dr,wr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(dr){this.ctx.lineDash=dr,wr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(dr){this.ctx.ignoreClearRect=!!dr}})};An.prototype.setLineDash=function(Fi){this.lineDash=Fi},An.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},An.prototype.fill=function(){oi.call(this,"fill",!1)},An.prototype.stroke=function(){oi.call(this,"stroke",!1)},An.prototype.beginPath=function(){this.path=[{type:"begin"}]},An.prototype.moveTo=function(Fi,cr){if(isNaN(Fi)||isNaN(cr))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var rr=this.ctx.transform.applyToPoint(new Ue(Fi,cr));this.path.push({type:"mt",x:rr.x,y:rr.y}),this.ctx.lastPoint=new Ue(Fi,cr)},An.prototype.closePath=function(){var Fi=new Ue(0,0),cr=0;for(cr=this.path.length-1;cr!==-1;cr--)if(this.path[cr].type==="begin"&&_typeof(this.path[cr+1])==="object"&&typeof this.path[cr+1].x=="number"){Fi=new Ue(this.path[cr+1].x,this.path[cr+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Ue(Fi.x,Fi.y)},An.prototype.lineTo=function(Fi,cr){if(isNaN(Fi)||isNaN(cr))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var rr=this.ctx.transform.applyToPoint(new Ue(Fi,cr));this.path.push({type:"lt",x:rr.x,y:rr.y}),this.ctx.lastPoint=new Ue(rr.x,rr.y)},An.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),oi.call(this,null,!0)},An.prototype.quadraticCurveTo=function(Fi,cr,rr,gr){if(isNaN(rr)||isNaN(gr)||isNaN(Fi)||isNaN(cr))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var vr=this.ctx.transform.applyToPoint(new Ue(rr,gr)),pr=this.ctx.transform.applyToPoint(new Ue(Fi,cr));this.path.push({type:"qct",x1:pr.x,y1:pr.y,x:vr.x,y:vr.y}),this.ctx.lastPoint=new Ue(vr.x,vr.y)},An.prototype.bezierCurveTo=function(Fi,cr,rr,gr,vr,pr){if(isNaN(vr)||isNaN(pr)||isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var _r=this.ctx.transform.applyToPoint(new Ue(vr,pr)),Ar=this.ctx.transform.applyToPoint(new Ue(Fi,cr)),Sr=this.ctx.transform.applyToPoint(new Ue(rr,gr));this.path.push({type:"bct",x1:Ar.x,y1:Ar.y,x2:Sr.x,y2:Sr.y,x:_r.x,y:_r.y}),this.ctx.lastPoint=new Ue(_r.x,_r.y)},An.prototype.arc=function(Fi,cr,rr,gr,vr,pr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr)||isNaN(vr))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(pr=!!pr,!this.ctx.transform.isIdentity){var _r=this.ctx.transform.applyToPoint(new Ue(Fi,cr));Fi=_r.x,cr=_r.y;var Ar=this.ctx.transform.applyToPoint(new Ue(0,rr)),Sr=this.ctx.transform.applyToPoint(new Ue(0,0));rr=Math.sqrt(Math.pow(Ar.x-Sr.x,2)+Math.pow(Ar.y-Sr.y,2))}Math.abs(vr-gr)>=2*Math.PI&&(gr=0,vr=2*Math.PI),this.path.push({type:"arc",x:Fi,y:cr,radius:rr,startAngle:gr,endAngle:vr,counterclockwise:pr})},An.prototype.arcTo=function(Fi,cr,rr,gr,vr){throw new Error("arcTo not implemented.")},An.prototype.rect=function(Fi,cr,rr,gr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Fi,cr),this.lineTo(Fi+rr,cr),this.lineTo(Fi+rr,cr+gr),this.lineTo(Fi,cr+gr),this.lineTo(Fi,cr),this.lineTo(Fi+rr,cr),this.lineTo(Fi,cr)},An.prototype.fillRect=function(Fi,cr,rr,gr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Sn.call(this)){var vr={};this.lineCap!=="butt"&&(vr.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(vr.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Fi,cr,rr,gr),this.fill(),vr.hasOwnProperty("lineCap")&&(this.lineCap=vr.lineCap),vr.hasOwnProperty("lineJoin")&&(this.lineJoin=vr.lineJoin)}},An.prototype.strokeRect=function(Fi,cr,rr,gr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Tn.call(this)||(this.beginPath(),this.rect(Fi,cr,rr,gr),this.stroke())},An.prototype.clearRect=function(Fi,cr,rr,gr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Fi,cr,rr,gr))},An.prototype.save=function(Fi){Fi=typeof Fi!="boolean"||Fi;for(var cr=this.pdf.internal.getCurrentPageInfo().pageNumber,rr=0;rr<this.pdf.internal.getNumberOfPages();rr++)this.pdf.setPage(rr+1),this.pdf.internal.out("q");if(this.pdf.setPage(cr),Fi){this.ctx.fontSize=this.pdf.internal.getFontSize();var gr=new Cn(this.ctx);this.ctxStack.push(this.ctx),this.ctx=gr}},An.prototype.restore=function(Fi){Fi=typeof Fi!="boolean"||Fi;for(var cr=this.pdf.internal.getCurrentPageInfo().pageNumber,rr=0;rr<this.pdf.internal.getNumberOfPages();rr++)this.pdf.setPage(rr+1),this.pdf.internal.out("Q");this.pdf.setPage(cr),Fi&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},An.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var En=function(Fi){var cr,rr,gr,vr;if(Fi.isCanvasGradient===!0&&(Fi=Fi.getColor()),!Fi)return{r:0,g:0,b:0,a:0,style:Fi};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Fi))cr=0,rr=0,gr=0,vr=0;else{var pr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Fi);if(pr!==null)cr=parseInt(pr[1]),rr=parseInt(pr[2]),gr=parseInt(pr[3]),vr=1;else if((pr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Fi))!==null)cr=parseInt(pr[1]),rr=parseInt(pr[2]),gr=parseInt(pr[3]),vr=parseFloat(pr[4]);else{if(vr=1,typeof Fi=="string"&&Fi.charAt(0)!=="#"){var _r=new f(Fi);Fi=_r.ok?_r.toHex():"#000000"}Fi.length===4?(cr=Fi.substring(1,2),cr+=cr,rr=Fi.substring(2,3),rr+=rr,gr=Fi.substring(3,4),gr+=gr):(cr=Fi.substring(1,3),rr=Fi.substring(3,5),gr=Fi.substring(5,7)),cr=parseInt(cr,16),rr=parseInt(rr,16),gr=parseInt(gr,16)}}return{r:cr,g:rr,b:gr,a:vr,style:Fi}},Sn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Tn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};An.prototype.fillText=function(Fi,cr,rr,gr){if(isNaN(cr)||isNaN(rr)||typeof Fi!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(gr=isNaN(gr)?void 0:gr,!Sn.call(this)){var vr=lr(this.ctx.transform.rotation),pr=this.ctx.transform.scaleX;li.call(this,{text:Fi,x:cr,y:rr,scale:pr,angle:vr,align:this.textAlign,maxWidth:gr})}},An.prototype.strokeText=function(Fi,cr,rr,gr){if(isNaN(cr)||isNaN(rr)||typeof Fi!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Tn.call(this)){gr=isNaN(gr)?void 0:gr;var vr=lr(this.ctx.transform.rotation),pr=this.ctx.transform.scaleX;li.call(this,{text:Fi,x:cr,y:rr,scale:pr,renderingMode:"stroke",angle:vr,align:this.textAlign,maxWidth:gr})}},An.prototype.measureText=function(Fi){if(typeof Fi!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var cr=this.pdf,rr=this.pdf.internal.scaleFactor,gr=cr.internal.getFontSize(),vr=cr.getStringUnitWidth(Fi)*gr/cr.internal.scaleFactor,pr=function(_r){var Ar=(_r=_r||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ar}}),this};return new pr({width:vr*=Math.round(96*rr/72*1e4)/1e4})},An.prototype.scale=function(Fi,cr){if(isNaN(Fi)||isNaN(cr))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var rr=new We(Fi,0,0,cr,0,0);this.ctx.transform=this.ctx.transform.multiply(rr)},An.prototype.rotate=function(Fi){if(isNaN(Fi))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var cr=new We(Math.cos(Fi),Math.sin(Fi),-Math.sin(Fi),Math.cos(Fi),0,0);this.ctx.transform=this.ctx.transform.multiply(cr)},An.prototype.translate=function(Fi,cr){if(isNaN(Fi)||isNaN(cr))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var rr=new We(1,0,0,1,Fi,cr);this.ctx.transform=this.ctx.transform.multiply(rr)},An.prototype.transform=function(Fi,cr,rr,gr,vr,pr){if(isNaN(Fi)||isNaN(cr)||isNaN(rr)||isNaN(gr)||isNaN(vr)||isNaN(pr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var _r=new We(Fi,cr,rr,gr,vr,pr);this.ctx.transform=this.ctx.transform.multiply(_r)},An.prototype.setTransform=function(Fi,cr,rr,gr,vr,pr){Fi=isNaN(Fi)?1:Fi,cr=isNaN(cr)?0:cr,rr=isNaN(rr)?0:rr,gr=isNaN(gr)?1:gr,vr=isNaN(vr)?0:vr,pr=isNaN(pr)?0:pr,this.ctx.transform=new We(Fi,cr,rr,gr,vr,pr)};var Dn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};An.prototype.drawImage=function(Fi,cr,rr,gr,vr,pr,_r,Ar,Sr){var Hr=this.pdf.getImageProperties(Fi),es=1,ir=1,mr=1,dr=1;gr!==void 0&&Ar!==void 0&&(mr=Ar/gr,dr=Sr/vr,es=Hr.width/gr*Ar/gr,ir=Hr.height/vr*Sr/vr),pr===void 0&&(pr=cr,_r=rr,cr=0,rr=0),gr!==void 0&&Ar===void 0&&(Ar=gr,Sr=vr),gr===void 0&&Ar===void 0&&(Ar=Hr.width,Sr=Hr.height);for(var tr,Dr=this.ctx.transform.decompose(),Nr=lr(Dr.rotate.shx),Pr=new We,kr=(Pr=(Pr=(Pr=Pr.multiply(Dr.translate)).multiply(Dr.skew)).multiply(Dr.scale)).applyToRectangle(new je(pr-cr*mr,_r-rr*dr,gr*es,vr*ir)),Rr=ti.call(this,kr),Tr=[],Er=0;Er<Rr.length;Er+=1)Tr.indexOf(Rr[Er])===-1&&Tr.push(Rr[Er]);if(si(Tr),this.autoPaging)for(var br=Tr[0],Ir=Tr[Tr.length-1],jr=br;jr<Ir+1;jr++){this.pdf.setPage(jr);var qr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Wr=jr===1?this.posY+this.margin[0]:this.margin[0],Kr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ps=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],rs=jr===1?0:Kr+(jr-2)*ps;if(this.ctx.clip_path.length!==0){var Ps=this.path;tr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(tr,this.posX+this.margin[3],-rs+Wr+this.ctx.prevPageLastElemOffset),ci.call(this,"fill",!0),this.path=Ps}var Cs=JSON.parse(JSON.stringify(kr));Cs=ii([Cs],this.posX+this.margin[3],-rs+Wr+this.ctx.prevPageLastElemOffset)[0];var Ns=(jr>br||jr<Ir)&&Dn.call(this);Ns&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qr,ps,null).clip().discardPath()),this.pdf.addImage(Fi,"JPEG",Cs.x,Cs.y,Cs.w,Cs.h,null,null,Nr),Ns&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Fi,"JPEG",kr.x,kr.y,kr.w,kr.h,null,null,Nr)};var ti=function(Fi,cr,rr){var gr=[];cr=cr||this.pdf.internal.pageSize.width,rr=rr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var vr=this.posY+this.ctx.prevPageLastElemOffset;switch(Fi.type){default:case"mt":case"lt":gr.push(Math.floor((Fi.y+vr)/rr)+1);break;case"arc":gr.push(Math.floor((Fi.y+vr-Fi.radius)/rr)+1),gr.push(Math.floor((Fi.y+vr+Fi.radius)/rr)+1);break;case"qct":var pr=hr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Fi.x1,Fi.y1,Fi.x,Fi.y);gr.push(Math.floor((pr.y+vr)/rr)+1),gr.push(Math.floor((pr.y+pr.h+vr)/rr)+1);break;case"bct":var _r=ar(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Fi.x1,Fi.y1,Fi.x2,Fi.y2,Fi.x,Fi.y);gr.push(Math.floor((_r.y+vr)/rr)+1),gr.push(Math.floor((_r.y+_r.h+vr)/rr)+1);break;case"rect":gr.push(Math.floor((Fi.y+vr)/rr)+1),gr.push(Math.floor((Fi.y+Fi.h+vr)/rr)+1)}for(var Ar=0;Ar<gr.length;Ar+=1)for(;this.pdf.internal.getNumberOfPages()<gr[Ar];)ni.call(this);return gr},ni=function(){var Fi=this.fillStyle,cr=this.strokeStyle,rr=this.font,gr=this.lineCap,vr=this.lineWidth,pr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Fi,this.strokeStyle=cr,this.font=rr,this.lineCap=gr,this.lineWidth=vr,this.lineJoin=pr},ii=function(Fi,cr,rr){for(var gr=0;gr<Fi.length;gr++)switch(Fi[gr].type){case"bct":Fi[gr].x2+=cr,Fi[gr].y2+=rr;case"qct":Fi[gr].x1+=cr,Fi[gr].y1+=rr;case"mt":case"lt":case"arc":default:Fi[gr].x+=cr,Fi[gr].y+=rr}return Fi},si=function(Fi){return Fi.sort(function(cr,rr){return cr-rr})},oi=function(Fi,cr){for(var rr,gr,vr=this.fillStyle,pr=this.strokeStyle,_r=this.lineCap,Ar=this.lineWidth,Sr=Math.abs(Ar*this.ctx.transform.scaleX),Hr=this.lineJoin,es=JSON.parse(JSON.stringify(this.path)),ir=JSON.parse(JSON.stringify(this.path)),mr=[],dr=0;dr<ir.length;dr++)if(ir[dr].x!==void 0)for(var tr=ti.call(this,ir[dr]),Dr=0;Dr<tr.length;Dr+=1)mr.indexOf(tr[Dr])===-1&&mr.push(tr[Dr]);for(var Nr=0;Nr<mr.length;Nr++)for(;this.pdf.internal.getNumberOfPages()<mr[Nr];)ni.call(this);if(si(mr),this.autoPaging)for(var Pr=mr[0],kr=mr[mr.length-1],Rr=Pr;Rr<kr+1;Rr++){this.pdf.setPage(Rr),this.fillStyle=vr,this.strokeStyle=pr,this.lineCap=_r,this.lineWidth=Sr,this.lineJoin=Hr;var Tr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Er=Rr===1?this.posY+this.margin[0]:this.margin[0],br=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ir=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],jr=Rr===1?0:br+(Rr-2)*Ir;if(this.ctx.clip_path.length!==0){var qr=this.path;rr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(rr,this.posX+this.margin[3],-jr+Er+this.ctx.prevPageLastElemOffset),ci.call(this,Fi,!0),this.path=qr}if(gr=JSON.parse(JSON.stringify(es)),this.path=ii(gr,this.posX+this.margin[3],-jr+Er+this.ctx.prevPageLastElemOffset),cr===!1||Rr===0){var Wr=(Rr>Pr||Rr<kr)&&Dn.call(this);Wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Tr,Ir,null).clip().discardPath()),ci.call(this,Fi,cr),Wr&&this.pdf.restoreGraphicsState()}this.lineWidth=Ar}else this.lineWidth=Sr,ci.call(this,Fi,cr),this.lineWidth=Ar;this.path=es},ci=function(Fi,cr){if((Fi!=="stroke"||cr||!Tn.call(this))&&(Fi==="stroke"||cr||!Sn.call(this))){for(var rr,gr,vr=[],pr=this.path,_r=0;_r<pr.length;_r++){var Ar=pr[_r];switch(Ar.type){case"begin":vr.push({begin:!0});break;case"close":vr.push({close:!0});break;case"mt":vr.push({start:Ar,deltas:[],abs:[]});break;case"lt":var Sr=vr.length;if(pr[_r-1]&&!isNaN(pr[_r-1].x)&&(rr=[Ar.x-pr[_r-1].x,Ar.y-pr[_r-1].y],Sr>0)){for(;Sr>=0;Sr--)if(vr[Sr-1].close!==!0&&vr[Sr-1].begin!==!0){vr[Sr-1].deltas.push(rr),vr[Sr-1].abs.push(Ar);break}}break;case"bct":rr=[Ar.x1-pr[_r-1].x,Ar.y1-pr[_r-1].y,Ar.x2-pr[_r-1].x,Ar.y2-pr[_r-1].y,Ar.x-pr[_r-1].x,Ar.y-pr[_r-1].y],vr[vr.length-1].deltas.push(rr);break;case"qct":var Hr=pr[_r-1].x+2/3*(Ar.x1-pr[_r-1].x),es=pr[_r-1].y+2/3*(Ar.y1-pr[_r-1].y),ir=Ar.x+2/3*(Ar.x1-Ar.x),mr=Ar.y+2/3*(Ar.y1-Ar.y),dr=Ar.x,tr=Ar.y;rr=[Hr-pr[_r-1].x,es-pr[_r-1].y,ir-pr[_r-1].x,mr-pr[_r-1].y,dr-pr[_r-1].x,tr-pr[_r-1].y],vr[vr.length-1].deltas.push(rr);break;case"arc":vr.push({deltas:[],abs:[],arc:!0}),Array.isArray(vr[vr.length-1].abs)&&vr[vr.length-1].abs.push(Ar)}}gr=cr?null:Fi==="stroke"?"stroke":"fill";for(var Dr=!1,Nr=0;Nr<vr.length;Nr++)if(vr[Nr].arc)for(var Pr=vr[Nr].abs,kr=0;kr<Pr.length;kr++){var Rr=Pr[kr];Rr.type==="arc"?fi.call(this,Rr.x,Rr.y,Rr.radius,Rr.startAngle,Rr.endAngle,Rr.counterclockwise,void 0,cr,!Dr):Ri.call(this,Rr.x,Rr.y),Dr=!0}else if(vr[Nr].close===!0)this.pdf.internal.out("h"),Dr=!1;else if(vr[Nr].begin!==!0){var Tr=vr[Nr].start.x,Er=vr[Nr].start.y;Mi.call(this,vr[Nr].deltas,Tr,Er),Dr=!0}gr&&Oi.call(this,gr),cr&&Ni.call(this)}},Pi=function(Fi){var cr=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,rr=cr*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Fi-rr;case"top":return Fi+cr-rr;case"hanging":return Fi+cr-2*rr;case"middle":return Fi+cr/2-rr;case"ideographic":return Fi;case"alphabetic":default:return Fi}},Ai=function(Fi){return Fi+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};An.prototype.createLinearGradient=function(){var Fi=function(){};return Fi.colorStops=[],Fi.addColorStop=function(cr,rr){this.colorStops.push([cr,rr])},Fi.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Fi.isCanvasGradient=!0,Fi},An.prototype.createPattern=function(){return this.createLinearGradient()},An.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fi=function(Fi,cr,rr,gr,vr,pr,_r,Ar,Sr){for(var Hr=er.call(this,rr,gr,vr,pr),es=0;es<Hr.length;es++){var ir=Hr[es];es===0&&(Sr?ui.call(this,ir.x1+Fi,ir.y1+cr):Ri.call(this,ir.x1+Fi,ir.y1+cr)),Bi.call(this,Fi,cr,ir.x2,ir.y2,ir.x3,ir.y3,ir.x4,ir.y4)}Ar?Ni.call(this):Oi.call(this,_r)},Oi=function(Fi){switch(Fi){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Ni=function(){this.pdf.clip(),this.pdf.discardPath()},ui=function(Fi,cr){this.pdf.internal.out(t(Fi)+" "+Oe(cr)+" m")},li=function(Fi){var cr;switch(Fi.align){case"right":case"end":cr="right";break;case"center":cr="center";break;case"left":case"start":default:cr="left"}var rr=this.pdf.getTextDimensions(Fi.text),gr=Pi.call(this,Fi.y),vr=Ai.call(this,gr)-rr.h,pr=this.ctx.transform.applyToPoint(new Ue(Fi.x,gr)),_r=this.ctx.transform.decompose(),Ar=new We;Ar=(Ar=(Ar=Ar.multiply(_r.translate)).multiply(_r.skew)).multiply(_r.scale);for(var Sr,Hr,es,ir=this.ctx.transform.applyToRectangle(new je(Fi.x,gr,rr.w,rr.h)),mr=Ar.applyToRectangle(new je(Fi.x,vr,rr.w,rr.h)),dr=ti.call(this,mr),tr=[],Dr=0;Dr<dr.length;Dr+=1)tr.indexOf(dr[Dr])===-1&&tr.push(dr[Dr]);if(si(tr),this.autoPaging)for(var Nr=tr[0],Pr=tr[tr.length-1],kr=Nr;kr<Pr+1;kr++){this.pdf.setPage(kr);var Rr=kr===1?this.posY+this.margin[0]:this.margin[0],Tr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Er=this.pdf.internal.pageSize.height-this.margin[2],br=Er-this.margin[0],Ir=this.pdf.internal.pageSize.width-this.margin[1],jr=Ir-this.margin[3],qr=kr===1?0:Tr+(kr-2)*br;if(this.ctx.clip_path.length!==0){var Wr=this.path;Sr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ii(Sr,this.posX+this.margin[3],-1*qr+Rr),ci.call(this,"fill",!0),this.path=Wr}var Kr=ii([JSON.parse(JSON.stringify(mr))],this.posX+this.margin[3],-qr+Rr+this.ctx.prevPageLastElemOffset)[0];Fi.scale>=.01&&(Hr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Hr*Fi.scale),es=this.lineWidth,this.lineWidth=es*Fi.scale);var ps=this.autoPaging!=="text";if(ps||Kr.y+Kr.h<=Er){if(ps||Kr.y>=Rr&&Kr.x<=Ir){var rs=ps?Fi.text:this.pdf.splitTextToSize(Fi.text,Fi.maxWidth||Ir-Kr.x)[0],Ps=ii([JSON.parse(JSON.stringify(ir))],this.posX+this.margin[3],-qr+Rr+this.ctx.prevPageLastElemOffset)[0],Cs=ps&&(kr>Nr||kr<Pr)&&Dn.call(this);Cs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],jr,br,null).clip().discardPath()),this.pdf.text(rs,Ps.x,Ps.y,{angle:Fi.angle,align:cr,renderingMode:Fi.renderingMode}),Cs&&this.pdf.restoreGraphicsState()}}else Kr.y<Er&&(this.ctx.prevPageLastElemOffset+=Er-Kr.y);Fi.scale>=.01&&(this.pdf.setFontSize(Hr),this.lineWidth=es)}else Fi.scale>=.01&&(Hr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Hr*Fi.scale),es=this.lineWidth,this.lineWidth=es*Fi.scale),this.pdf.text(Fi.text,pr.x+this.posX,pr.y+this.posY,{angle:Fi.angle,align:cr,renderingMode:Fi.renderingMode,maxWidth:Fi.maxWidth}),Fi.scale>=.01&&(this.pdf.setFontSize(Hr),this.lineWidth=es)},Ri=function(Fi,cr,rr,gr){rr=rr||0,gr=gr||0,this.pdf.internal.out(t(Fi+rr)+" "+Oe(cr+gr)+" l")},Mi=function(Fi,cr,rr){return this.pdf.lines(Fi,cr,rr,null,null)},Bi=function(Fi,cr,rr,gr,vr,pr,_r,Ar){this.pdf.internal.out([e(ke(rr+Fi)),e(Be(gr+cr)),e(ke(vr+Fi)),e(Be(pr+cr)),e(ke(_r+Fi)),e(Be(Ar+cr)),"c"].join(" "))},er=function(Fi,cr,rr,gr){for(var vr=2*Math.PI,pr=Math.PI/2;cr>rr;)cr-=vr;var _r=Math.abs(rr-cr);_r<vr&&gr&&(_r=vr-_r);for(var Ar=[],Sr=gr?-1:1,Hr=cr;_r>1e-5;){var es=Hr+Sr*Math.min(_r,pr);Ar.push(nr.call(this,Fi,Hr,es)),_r-=Math.abs(es-Hr),Hr=es}return Ar},nr=function(Fi,cr,rr){var gr=(rr-cr)/2,vr=Fi*Math.cos(gr),pr=Fi*Math.sin(gr),_r=vr,Ar=-pr,Sr=_r*_r+Ar*Ar,Hr=Sr+_r*vr+Ar*pr,es=4/3*(Math.sqrt(2*Sr*Hr)-Hr)/(_r*pr-Ar*vr),ir=_r-es*Ar,mr=Ar+es*_r,dr=ir,tr=-mr,Dr=gr+cr,Nr=Math.cos(Dr),Pr=Math.sin(Dr);return{x1:Fi*Math.cos(cr),y1:Fi*Math.sin(cr),x2:ir*Nr-mr*Pr,y2:ir*Pr+mr*Nr,x3:dr*Nr-tr*Pr,y3:dr*Pr+tr*Nr,x4:Fi*Math.cos(rr),y4:Fi*Math.sin(rr)}},lr=function(Fi){return 180*Fi/Math.PI},hr=function(Fi,cr,rr,gr,vr,pr){var _r=Fi+.5*(rr-Fi),Ar=cr+.5*(gr-cr),Sr=vr+.5*(rr-vr),Hr=pr+.5*(gr-pr),es=Math.min(Fi,vr,_r,Sr),ir=Math.max(Fi,vr,_r,Sr),mr=Math.min(cr,pr,Ar,Hr),dr=Math.max(cr,pr,Ar,Hr);return new je(es,mr,ir-es,dr-mr)},ar=function(Fi,cr,rr,gr,vr,pr,_r,Ar){var Sr,Hr,es,ir,mr,dr,tr,Dr,Nr,Pr,kr,Rr,Tr,Er,br=rr-Fi,Ir=gr-cr,jr=vr-rr,qr=pr-gr,Wr=_r-vr,Kr=Ar-pr;for(Hr=0;Hr<41;Hr++)Nr=(tr=(es=Fi+(Sr=Hr/40)*br)+Sr*((mr=rr+Sr*jr)-es))+Sr*(mr+Sr*(vr+Sr*Wr-mr)-tr),Pr=(Dr=(ir=cr+Sr*Ir)+Sr*((dr=gr+Sr*qr)-ir))+Sr*(dr+Sr*(pr+Sr*Kr-dr)-Dr),Hr==0?(kr=Nr,Rr=Pr,Tr=Nr,Er=Pr):(kr=Math.min(kr,Nr),Rr=Math.min(Rr,Pr),Tr=Math.max(Tr,Nr),Er=Math.max(Er,Pr));return new je(Math.round(kr),Math.round(Rr),Math.round(Tr-kr),Math.round(Er-Rr))},wr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Fi,cr,rr=(Fi=this.ctx.lineDash,cr=this.ctx.lineDashOffset,JSON.stringify({lineDash:Fi,lineDashOffset:cr}));this.prevLineDash!==rr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=rr)}}})(E.API),function(Ae){var e=function(Be){var Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn;for(je=[],We=0,Qe=(Be+=Ue="\0\0\0\0".slice(Be.length%4||4)).length;Qe>We;We+=4)(Cn=(Be.charCodeAt(We)<<24)+(Be.charCodeAt(We+1)<<16)+(Be.charCodeAt(We+2)<<8)+Be.charCodeAt(We+3))!==0?(An=(Cn=((Cn=((Cn=((Cn=(Cn-(Dn=Cn%85))/85)-(Tn=Cn%85))/85)-(Sn=Cn%85))/85)-(En=Cn%85))/85)%85,je.push(An+33,En+33,Sn+33,Tn+33,Dn+33)):je.push(122);return function(ti,ni){for(var ii=ni;ii>0;ii--)ti.pop()}(je,Ue.length),String.fromCharCode.apply(String,je)+"~>"},t=function(Be){var Ue,je,We,Qe,Cn,An=String,En="length",Sn=255,Tn="charCodeAt",Dn="slice",ti="replace";for(Be[Dn](-2),Be=Be[Dn](0,-2)[ti](/\s/g,"")[ti]("z","!!!!!"),We=[],Qe=0,Cn=(Be+=Ue="uuuuu"[Dn](Be[En]%5||5))[En];Cn>Qe;Qe+=5)je=52200625*(Be[Tn](Qe)-33)+614125*(Be[Tn](Qe+1)-33)+7225*(Be[Tn](Qe+2)-33)+85*(Be[Tn](Qe+3)-33)+(Be[Tn](Qe+4)-33),We.push(Sn&je>>24,Sn&je>>16,Sn&je>>8,Sn&je);return function(ni,ii){for(var si=ii;si>0;si--)ni.pop()}(We,Ue[En]),An.fromCharCode.apply(An,We)},Oe=function(Be){var Ue=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Be=Be.replace(/\s/g,"")).indexOf(">")!==-1&&(Be=Be.substr(0,Be.indexOf(">"))),Be.length%2&&(Be+="0"),Ue.test(Be)===!1)return"";for(var je="",We=0;We<Be.length;We+=2)je+=String.fromCharCode("0x"+(Be[We]+Be[We+1]));return je},ke=function(Be){for(var Ue=new Uint8Array(Be.length),je=Be.length;je--;)Ue[je]=Be.charCodeAt(je);return Be=(Ue=zlibSync(Ue)).reduce(function(We,Qe){return We+String.fromCharCode(Qe)},"")};Ae.processDataByFilters=function(Be,Ue){var je=0,We=Be||"",Qe=[];for(typeof(Ue=Ue||[])=="string"&&(Ue=[Ue]),je=0;je<Ue.length;je+=1)switch(Ue[je]){case"ASCII85Decode":case"/ASCII85Decode":We=t(We),Qe.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":We=e(We),Qe.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":We=Oe(We),Qe.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":We=We.split("").map(function(Cn){return("0"+Cn.charCodeAt().toString(16)).slice(-2)}).join("")+">",Qe.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":We=ke(We),Qe.push("/FlateDecode");break;default:throw new Error('The filter: "'+Ue[je]+'" is not implemented')}return{data:We,reverseChain:Qe.reverse().join(" ")}}}(E.API),function(Ae){Ae.loadFile=function(e,t,Oe){return function(ke,Be,Ue){Be=Be!==!1,Ue=typeof Ue=="function"?Ue:function(){};var je=void 0;try{je=function(We,Qe,Cn){var An=new XMLHttpRequest,En=0,Sn=function(Tn){var Dn=Tn.length,ti=[],ni=String.fromCharCode;for(En=0;En<Dn;En+=1)ti.push(ni(255&Tn.charCodeAt(En)));return ti.join("")};if(An.open("GET",We,!Qe),An.overrideMimeType("text/plain; charset=x-user-defined"),Qe===!1&&(An.onload=function(){An.status===200?Cn(Sn(this.responseText)):Cn(void 0)}),An.send(null),Qe&&An.status===200)return Sn(An.responseText)}(ke,Be,Ue)}catch{}return je}(e,t,Oe)},Ae.loadImageFile=Ae.loadFile}(E.API),function(Ae){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-DtF4syFK.js"),[])).catch(function(Ue){return Promise.reject(new Error("Could not load html2canvas: "+Ue))}).then(function(Ue){return Ue.default?Ue.default:Ue})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(Ue){return Promise.reject(new Error("Could not load dompurify: "+Ue))}).then(function(Ue){return Ue.default?Ue.default:Ue})}var Oe=function(Ue){var je=_typeof(Ue);return je==="undefined"?"undefined":je==="string"||Ue instanceof String?"string":je==="number"||Ue instanceof Number?"number":je==="function"||Ue instanceof Function?"function":Ue&&Ue.constructor===Array?"array":Ue&&Ue.nodeType===1?"element":je==="object"?"object":"unknown"},ke=function(Ue,je){var We=document.createElement(Ue);for(var Qe in je.className&&(We.className=je.className),je.innerHTML&&je.dompurify&&(We.innerHTML=je.dompurify.sanitize(je.innerHTML)),je.style)We.style[Qe]=je.style[Qe];return We},Be=function Ue(je){var We=Object.assign(Ue.convert(Promise.resolve()),JSON.parse(JSON.stringify(Ue.template))),Qe=Ue.convert(Promise.resolve(),We);return Qe=(Qe=Qe.setProgress(1,Ue,1,[Ue])).set(je)};(Be.prototype=Object.create(Promise.prototype)).constructor=Be,Be.convert=function(Ue,je){return Ue.__proto__=je||Be.prototype,Ue},Be.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Be.prototype.from=function(Ue,je){return this.then(function(){switch(je=je||function(We){switch(Oe(We)){case"string":return"string";case"element":return We.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Ue)){case"string":return this.then(t).then(function(We){return this.set({src:ke("div",{innerHTML:Ue,dompurify:We})})});case"element":return this.set({src:Ue});case"canvas":return this.set({canvas:Ue});case"img":return this.set({img:Ue});default:return this.error("Unknown source type.")}})},Be.prototype.to=function(Ue){switch(Ue){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Be.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Ue={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},je=function We(Qe,Cn){for(var An=Qe.nodeType===3?document.createTextNode(Qe.nodeValue):Qe.cloneNode(!1),En=Qe.firstChild;En;En=En.nextSibling)Cn!==!0&&En.nodeType===1&&En.nodeName==="SCRIPT"||An.appendChild(We(En,Cn));return Qe.nodeType===1&&(Qe.nodeName==="CANVAS"?(An.width=Qe.width,An.height=Qe.height,An.getContext("2d").drawImage(Qe,0,0)):Qe.nodeName!=="TEXTAREA"&&Qe.nodeName!=="SELECT"||(An.value=Qe.value),An.addEventListener("load",function(){An.scrollTop=Qe.scrollTop,An.scrollLeft=Qe.scrollLeft},!0)),An}(this.prop.src,this.opt.html2canvas.javascriptEnabled);je.tagName==="BODY"&&(Ue.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=ke("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=ke("div",{className:"html2pdf__container",style:Ue}),this.prop.container.appendChild(je),this.prop.container.firstChild.appendChild(ke("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Be.prototype.toCanvas=function(){var Ue=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ue).then(e).then(function(je){var We=Object.assign({},this.opt.html2canvas);return delete We.onrendered,je(this.prop.container,We)}).then(function(je){(this.opt.html2canvas.onrendered||function(){})(je),this.prop.canvas=je,document.body.removeChild(this.prop.overlay)})},Be.prototype.toContext2d=function(){var Ue=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Ue).then(e).then(function(je){var We=this.opt.jsPDF,Qe=this.opt.fontFaces,Cn=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,An=Object.assign({async:!0,allowTaint:!0,scale:Cn,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete An.onrendered,We.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,We.context2d.posX=this.opt.x,We.context2d.posY=this.opt.y,We.context2d.margin=this.opt.margin,We.context2d.fontFaces=Qe,Qe)for(var En=0;En<Qe.length;++En){var Sn=Qe[En],Tn=Sn.src.find(function(Dn){return Dn.format==="truetype"});Tn&&We.addFont(Tn.url,Sn.ref.name,Sn.ref.style)}return An.windowHeight=An.windowHeight||0,An.windowHeight=An.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):An.windowHeight,We.context2d.save(!0),je(this.prop.container,An)}).then(function(je){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(je),this.prop.canvas=je,document.body.removeChild(this.prop.overlay)})},Be.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Ue=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Ue})},Be.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Be.prototype.output=function(Ue,je,We){return(We=We||"pdf").toLowerCase()==="img"||We.toLowerCase()==="image"?this.outputImg(Ue,je):this.outputPdf(Ue,je)},Be.prototype.outputPdf=function(Ue,je){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Ue,je)})},Be.prototype.outputImg=function(Ue){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Ue){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Ue+'" is not supported.'}})},Be.prototype.save=function(Ue){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Ue?{filename:Ue}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Be.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Be.prototype.set=function(Ue){if(Oe(Ue)!=="object")return this;var je=Object.keys(Ue||{}).map(function(We){if(We in Be.template.prop)return function(){this.prop[We]=Ue[We]};switch(We){case"margin":return this.setMargin.bind(this,Ue.margin);case"jsPDF":return function(){return this.opt.jsPDF=Ue.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Ue.pageSize);default:return function(){this.opt[We]=Ue[We]}}},this);return this.then(function(){return this.thenList(je)})},Be.prototype.get=function(Ue,je){return this.then(function(){var We=Ue in Be.template.prop?this.prop[Ue]:this.opt[Ue];return je?je(We):We})},Be.prototype.setMargin=function(Ue){return this.then(function(){switch(Oe(Ue)){case"number":Ue=[Ue,Ue,Ue,Ue];case"array":if(Ue.length===2&&(Ue=[Ue[0],Ue[1],Ue[0],Ue[1]]),Ue.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Ue}).then(this.setPageSize)},Be.prototype.setPageSize=function(Ue){function je(We,Qe){return Math.floor(We*Qe/72*96)}return this.then(function(){(Ue=Ue||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Ue.inner={width:Ue.width-this.opt.margin[1]-this.opt.margin[3],height:Ue.height-this.opt.margin[0]-this.opt.margin[2]},Ue.inner.px={width:je(Ue.inner.width,Ue.k),height:je(Ue.inner.height,Ue.k)},Ue.inner.ratio=Ue.inner.height/Ue.inner.width),this.prop.pageSize=Ue})},Be.prototype.setProgress=function(Ue,je,We,Qe){return Ue!=null&&(this.progress.val=Ue),je!=null&&(this.progress.state=je),We!=null&&(this.progress.n=We),Qe!=null&&(this.progress.stack=Qe),this.progress.ratio=this.progress.val/this.progress.state,this},Be.prototype.updateProgress=function(Ue,je,We,Qe){return this.setProgress(Ue?this.progress.val+Ue:null,je||null,We?this.progress.n+We:null,Qe?this.progress.stack.concat(Qe):null)},Be.prototype.then=function(Ue,je){var We=this;return this.thenCore(Ue,je,function(Qe,Cn){return We.updateProgress(null,null,1,[Qe]),Promise.prototype.then.call(this,function(An){return We.updateProgress(null,Qe),An}).then(Qe,Cn).then(function(An){return We.updateProgress(1),An})})},Be.prototype.thenCore=function(Ue,je,We){We=We||Promise.prototype.then,Ue&&(Ue=Ue.bind(this)),je&&(je=je.bind(this));var Qe=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Be.convert(Object.assign({},this),Promise.prototype),Cn=We.call(Qe,Ue,je);return Be.convert(Cn,this.__proto__)},Be.prototype.thenExternal=function(Ue,je){return Promise.prototype.then.call(this,Ue,je)},Be.prototype.thenList=function(Ue){var je=this;return Ue.forEach(function(We){je=je.thenCore(We)}),je},Be.prototype.catch=function(Ue){Ue&&(Ue=Ue.bind(this));var je=Promise.prototype.catch.call(this,Ue);return Be.convert(je,this)},Be.prototype.catchExternal=function(Ue){return Promise.prototype.catch.call(this,Ue)},Be.prototype.error=function(Ue){return this.then(function(){throw new Error(Ue)})},Be.prototype.using=Be.prototype.set,Be.prototype.saveAs=Be.prototype.save,Be.prototype.export=Be.prototype.output,Be.prototype.run=Be.prototype.then,E.getPageSize=function(Ue,je,We){if(_typeof(Ue)==="object"){var Qe=Ue;Ue=Qe.orientation,je=Qe.unit||je,We=Qe.format||We}je=je||"mm",We=We||"a4",Ue=(""+(Ue||"P")).toLowerCase();var Cn,An=(""+We).toLowerCase(),En={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(je){case"pt":Cn=1;break;case"mm":Cn=72/25.4;break;case"cm":Cn=72/2.54;break;case"in":Cn=72;break;case"px":Cn=.75;break;case"pc":case"em":Cn=12;break;case"ex":Cn=6;break;default:throw"Invalid unit: "+je}var Sn,Tn=0,Dn=0;if(En.hasOwnProperty(An))Tn=En[An][1]/Cn,Dn=En[An][0]/Cn;else try{Tn=We[1],Dn=We[0]}catch{throw new Error("Invalid format: "+We)}if(Ue==="p"||Ue==="portrait")Ue="p",Dn>Tn&&(Sn=Dn,Dn=Tn,Tn=Sn);else{if(Ue!=="l"&&Ue!=="landscape")throw"Invalid orientation: "+Ue;Ue="l",Tn>Dn&&(Sn=Dn,Dn=Tn,Tn=Sn)}return{width:Dn,height:Tn,unit:je,k:Cn,orientation:Ue}},Ae.html=function(Ue,je){(je=je||{}).callback=je.callback||function(){},je.html2canvas=je.html2canvas||{},je.html2canvas.canvas=je.html2canvas.canvas||this.canvas,je.jsPDF=je.jsPDF||this,je.fontFaces=je.fontFaces?je.fontFaces.map(jt):null;var We=new Be(je);return je.worker?We:We.from(Ue).doCallback()}}(E.API),E.API.addJS=function(Ae){return Ht=Ae,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Ae){var e;Ae.events.push(["postPutResources",function(){var t=this,Oe=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var ke=t.outline.render().split(/\r\n/),Be=0;Be<ke.length;Be++){var Ue=ke[Be],je=Oe.exec(Ue);if(je!=null){var We=je[1];t.internal.newObjectDeferredBegin(We,!1)}t.internal.write(Ue)}if(this.outline.createNamedDestinations){var Qe=this.internal.pages.length,Cn=[];for(Be=0;Be<Qe;Be++){var An=t.internal.newObject();Cn.push(An);var En=t.internal.getPageInfo(Be+1);t.internal.write("<< /D["+En.objId+" 0 R /XYZ null null null]>> endobj")}var Sn=t.internal.newObject();for(t.internal.write("<< /Names [ "),Be=0;Be<Cn.length;Be++)t.internal.write("(page_"+(Be+1)+")"+Cn[Be]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+Sn+" 0 R"),t.internal.write(">>","endobj")}}]),Ae.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),Ae.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(Oe,ke,Be){var Ue={title:ke,options:Be,children:[]};return Oe==null&&(Oe=this.root),Oe.children.push(Ue),Ue},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(Oe){Oe.id=t.internal.newObjectDeferred();for(var ke=0;ke<Oe.children.length;ke++)this.genIds_r(Oe.children[ke])},t.outline.renderRoot=function(Oe){this.objStart(Oe),this.line("/Type /Outlines"),Oe.children.length>0&&(this.line("/First "+this.makeRef(Oe.children[0])),this.line("/Last "+this.makeRef(Oe.children[Oe.children.length-1]))),this.line("/Count "+this.count_r({count:0},Oe)),this.objEnd()},t.outline.renderItems=function(Oe){for(var ke=this.ctx.pdf.internal.getVerticalCoordinateString,Be=0;Be<Oe.children.length;Be++){var Ue=Oe.children[Be];this.objStart(Ue),this.line("/Title "+this.makeString(Ue.title)),this.line("/Parent "+this.makeRef(Oe)),Be>0&&this.line("/Prev "+this.makeRef(Oe.children[Be-1])),Be<Oe.children.length-1&&this.line("/Next "+this.makeRef(Oe.children[Be+1])),Ue.children.length>0&&(this.line("/First "+this.makeRef(Ue.children[0])),this.line("/Last "+this.makeRef(Ue.children[Ue.children.length-1])));var je=this.count=this.count_r({count:0},Ue);if(je>0&&this.line("/Count "+je),Ue.options&&Ue.options.pageNumber){var We=t.internal.getPageInfo(Ue.options.pageNumber);this.line("/Dest ["+We.objId+" 0 R /XYZ 0 "+ke(0)+" 0]")}this.objEnd()}for(var Qe=0;Qe<Oe.children.length;Qe++)this.renderItems(Oe.children[Qe])},t.outline.line=function(Oe){this.ctx.val+=Oe+`\r
`},t.outline.makeRef=function(Oe){return Oe.id+" 0 R"},t.outline.makeString=function(Oe){return"("+t.internal.pdfEscape(Oe)+")"},t.outline.objStart=function(Oe){this.ctx.val+=`\r
`+Oe.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(Oe,ke){for(var Be=0;Be<ke.children.length;Be++)Oe.count++,this.count_r(Oe,ke.children[Be]);return Oe.count}}])}(E.API),function(Ae){var e=[192,193,194,195,196,197,198,199];Ae.processJPEG=function(t,Oe,ke,Be,Ue,je){var We,Qe=this.decode.DCT_DECODE,Cn=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Ue||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(We=function(An){for(var En,Sn=256*An.charCodeAt(4)+An.charCodeAt(5),Tn=An.length,Dn={width:0,height:0,numcomponents:1},ti=4;ti<Tn;ti+=2){if(ti+=Sn,e.indexOf(An.charCodeAt(ti+1))!==-1){En=256*An.charCodeAt(ti+5)+An.charCodeAt(ti+6),Dn={width:256*An.charCodeAt(ti+7)+An.charCodeAt(ti+8),height:En,numcomponents:An.charCodeAt(ti+9)};break}Sn=256*An.charCodeAt(ti+2)+An.charCodeAt(ti+3)}return Dn}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:je=this.color_spaces.DEVICE_GRAY;break;case 4:je=this.color_spaces.DEVICE_CMYK;break;case 3:je=this.color_spaces.DEVICE_RGB}Cn={data:t,width:We.width,height:We.height,colorSpace:je,bitsPerComponent:8,filter:Qe,index:Oe,alias:ke}}return Cn}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Ae,e,t;function Oe(Be){var Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si;for(this.data=Be,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},An=null;;){switch(Ue=this.readUInt32(),Tn=(function(){var oi,ci;for(ci=[],oi=0;oi<4;++oi)ci.push(String.fromCharCode(this.data[this.pos++]));return ci}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Ue);break;case"fcTL":An&&this.animation.frames.push(An),this.pos+=4,An={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Cn=this.readUInt16(),Qe=this.readUInt16()||100,An.delay=1e3*Cn/Qe,An.disposeOp=this.data[this.pos++],An.blendOp=this.data[this.pos++],An.data=[];break;case"IDAT":case"fdAT":for(Tn==="fdAT"&&(this.pos+=4,Ue-=4),Be=(An!=null?An.data:void 0)||this.imgData,ni=0;0<=Ue?ni<Ue:ni>Ue;0<=Ue?++ni:--ni)Be.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(We=this.palette.length/3,this.transparency.indexed=this.read(Ue),this.transparency.indexed.length>We)throw new Error("More transparent colors than palette size");if((Dn=We-this.transparency.indexed.length)>0)for(ii=0;0<=Dn?ii<Dn:ii>Dn;0<=Dn?++ii:--ii)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Ue)[0];break;case 2:this.transparency.rgb=this.read(Ue)}break;case"tEXt":En=(ti=this.read(Ue)).indexOf(0),Sn=String.fromCharCode.apply(String,ti.slice(0,En)),this.text[Sn]=String.fromCharCode.apply(String,ti.slice(En+1));break;case"IEND":return An&&this.animation.frames.push(An),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(si=this.colorType)===4||si===6,je=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*je,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Ue}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}Oe.prototype.read=function(Be){var Ue,je;for(je=[],Ue=0;0<=Be?Ue<Be:Ue>Be;0<=Be?++Ue:--Ue)je.push(this.data[this.pos++]);return je},Oe.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},Oe.prototype.decodePixels=function(Be){var Ue=this.pixelBitlength/8,je=new Uint8Array(this.width*this.height*Ue),We=0,Qe=this;if(Be==null&&(Be=this.imgData),Be.length===0)return new Uint8Array(0);function Cn(An,En,Sn,Tn){var Dn,ti,ni,ii,si,oi,ci,Pi,Ai,fi,Oi,Ni,ui,li,Ri,Mi,Bi,er,nr,lr,hr,ar=Math.ceil((Qe.width-An)/Sn),wr=Math.ceil((Qe.height-En)/Tn),Fi=Qe.width==ar&&Qe.height==wr;for(li=Ue*ar,Ni=Fi?je:new Uint8Array(li*wr),oi=Be.length,ui=0,ti=0;ui<wr&&We<oi;){switch(Be[We++]){case 0:for(ii=Bi=0;Bi<li;ii=Bi+=1)Ni[ti++]=Be[We++];break;case 1:for(ii=er=0;er<li;ii=er+=1)Dn=Be[We++],si=ii<Ue?0:Ni[ti-Ue],Ni[ti++]=(Dn+si)%256;break;case 2:for(ii=nr=0;nr<li;ii=nr+=1)Dn=Be[We++],ni=(ii-ii%Ue)/Ue,Ri=ui&&Ni[(ui-1)*li+ni*Ue+ii%Ue],Ni[ti++]=(Ri+Dn)%256;break;case 3:for(ii=lr=0;lr<li;ii=lr+=1)Dn=Be[We++],ni=(ii-ii%Ue)/Ue,si=ii<Ue?0:Ni[ti-Ue],Ri=ui&&Ni[(ui-1)*li+ni*Ue+ii%Ue],Ni[ti++]=(Dn+Math.floor((si+Ri)/2))%256;break;case 4:for(ii=hr=0;hr<li;ii=hr+=1)Dn=Be[We++],ni=(ii-ii%Ue)/Ue,si=ii<Ue?0:Ni[ti-Ue],ui===0?Ri=Mi=0:(Ri=Ni[(ui-1)*li+ni*Ue+ii%Ue],Mi=ni&&Ni[(ui-1)*li+(ni-1)*Ue+ii%Ue]),ci=si+Ri-Mi,Pi=Math.abs(ci-si),fi=Math.abs(ci-Ri),Oi=Math.abs(ci-Mi),Ai=Pi<=fi&&Pi<=Oi?si:fi<=Oi?Ri:Mi,Ni[ti++]=(Dn+Ai)%256;break;default:throw new Error("Invalid filter algorithm: "+Be[We-1])}if(!Fi){var cr=((En+ui*Tn)*Qe.width+An)*Ue,rr=ui*li;for(ii=0;ii<ar;ii+=1){for(var gr=0;gr<Ue;gr+=1)je[cr++]=Ni[rr++];cr+=(Sn-1)*Ue}}ui++}}return Be=unzlibSync(Be),Qe.interlaceMethod==1?(Cn(0,0,8,8),Cn(4,0,8,8),Cn(0,4,4,8),Cn(2,0,4,4),Cn(0,2,2,4),Cn(1,0,2,2),Cn(0,1,1,2)):Cn(0,0,1,1),je},Oe.prototype.decodePalette=function(){var Be,Ue,je,We,Qe,Cn,An,En,Sn;for(je=this.palette,Cn=this.transparency.indexed||[],Qe=new Uint8Array((Cn.length||0)+je.length),We=0,Be=0,Ue=An=0,En=je.length;An<En;Ue=An+=3)Qe[We++]=je[Ue],Qe[We++]=je[Ue+1],Qe[We++]=je[Ue+2],Qe[We++]=(Sn=Cn[Be++])!=null?Sn:255;return Qe},Oe.prototype.copyToImageData=function(Be,Ue){var je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni;if(We=this.colors,Dn=null,je=this.hasAlphaChannel,this.palette.length&&(Dn=(ni=this._decodedPalette)!=null?ni:this._decodedPalette=this.decodePalette(),We=4,je=!0),Tn=(Qe=Be.data||Be).length,An=Dn||Ue,Cn=En=0,We===1)for(;Cn<Tn;)Sn=Dn?4*Ue[Cn/4]:En,ti=An[Sn++],Qe[Cn++]=ti,Qe[Cn++]=ti,Qe[Cn++]=ti,Qe[Cn++]=je?An[Sn++]:255,En=Sn;else for(;Cn<Tn;)Sn=Dn?4*Ue[Cn/4]:En,Qe[Cn++]=An[Sn++],Qe[Cn++]=An[Sn++],Qe[Cn++]=An[Sn++],Qe[Cn++]=je?An[Sn++]:255,En=Sn},Oe.prototype.decode=function(){var Be;return Be=new Uint8Array(this.width*this.height*4),this.copyToImageData(Be,this.decodePixels()),Be};var ke=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return ke(),Ae=function(Be){var Ue;if(ke()===!0)return t.width=Be.width,t.height=Be.height,t.clearRect(0,0,Be.width,Be.height),t.putImageData(Be,0,0),(Ue=new Image).src=e.toDataURL(),Ue;throw new Error("This method requires a Browser with Canvas-capability.")},Oe.prototype.decodeFrames=function(Be){var Ue,je,We,Qe,Cn,An,En,Sn;if(this.animation){for(Sn=[],je=Cn=0,An=(En=this.animation.frames).length;Cn<An;je=++Cn)Ue=En[je],We=Be.createImageData(Ue.width,Ue.height),Qe=this.decodePixels(new Uint8Array(Ue.data)),this.copyToImageData(We,Qe),Ue.imageData=We,Sn.push(Ue.image=Ae(We));return Sn}},Oe.prototype.renderFrame=function(Be,Ue){var je,We,Qe;return je=(We=this.animation.frames)[Ue],Qe=We[Ue-1],Ue===0&&Be.clearRect(0,0,this.width,this.height),(Qe!=null?Qe.disposeOp:void 0)===1?Be.clearRect(Qe.xOffset,Qe.yOffset,Qe.width,Qe.height):(Qe!=null?Qe.disposeOp:void 0)===2&&Be.putImageData(Qe.imageData,Qe.xOffset,Qe.yOffset),je.blendOp===0&&Be.clearRect(je.xOffset,je.yOffset,je.width,je.height),Be.drawImage(je.image,je.xOffset,je.yOffset)},Oe.prototype.animate=function(Be){var Ue,je,We,Qe,Cn,An,En=this;return je=0,An=this.animation,Qe=An.numFrames,We=An.frames,Cn=An.numPlays,(Ue=function(){var Sn,Tn;if(Sn=je++%Qe,Tn=We[Sn],En.renderFrame(Be,Sn),Qe>1&&je/Qe<Cn)return En.animation._timeout=setTimeout(Ue,Tn.delay)})()},Oe.prototype.stopAnimation=function(){var Be;return clearTimeout((Be=this.animation)!=null?Be._timeout:void 0)},Oe.prototype.render=function(Be){var Ue,je;return Be._png&&Be._png.stopAnimation(),Be._png=this,Be.width=this.width,Be.height=this.height,Ue=Be.getContext("2d"),this.animation?(this.decodeFrames(Ue),this.animate(Ue)):(je=Ue.createImageData(this.width,this.height),this.copyToImageData(je,this.decodePixels()),Ue.putImageData(je,0,0))},Oe}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Ae){var e=0;if(Ae[e++]!==71||Ae[e++]!==73||Ae[e++]!==70||Ae[e++]!==56||(Ae[e++]+1&253)!=56||Ae[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=Ae[e++]|Ae[e++]<<8,Oe=Ae[e++]|Ae[e++]<<8,ke=Ae[e++],Be=ke>>7,Ue=1<<(7&ke)+1;Ae[e++],Ae[e++];var je=null,We=null;Be&&(je=e,We=Ue,e+=3*Ue);var Qe=!0,Cn=[],An=0,En=null,Sn=0,Tn=null;for(this.width=t,this.height=Oe;Qe&&e<Ae.length;)switch(Ae[e++]){case 33:switch(Ae[e++]){case 255:if(Ae[e]!==11||Ae[e+1]==78&&Ae[e+2]==69&&Ae[e+3]==84&&Ae[e+4]==83&&Ae[e+5]==67&&Ae[e+6]==65&&Ae[e+7]==80&&Ae[e+8]==69&&Ae[e+9]==50&&Ae[e+10]==46&&Ae[e+11]==48&&Ae[e+12]==3&&Ae[e+13]==1&&Ae[e+16]==0)e+=14,Tn=Ae[e++]|Ae[e++]<<8,e++;else for(e+=12;;){if(!((ui=Ae[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}break;case 249:if(Ae[e++]!==4||Ae[e+4]!==0)throw new Error("Invalid graphics extension block.");var Dn=Ae[e++];An=Ae[e++]|Ae[e++]<<8,En=Ae[e++],!(1&Dn)&&(En=null),Sn=Dn>>2&7,e++;break;case 254:for(;;){if(!((ui=Ae[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}break;default:throw new Error("Unknown graphic control label: 0x"+Ae[e-1].toString(16))}break;case 44:var ti=Ae[e++]|Ae[e++]<<8,ni=Ae[e++]|Ae[e++]<<8,ii=Ae[e++]|Ae[e++]<<8,si=Ae[e++]|Ae[e++]<<8,oi=Ae[e++],ci=oi>>6&1,Pi=1<<(7&oi)+1,Ai=je,fi=We,Oi=!1;oi>>7&&(Oi=!0,Ai=e,fi=Pi,e+=3*Pi);var Ni=e;for(e++;;){var ui;if(!((ui=Ae[e++])>=0))throw Error("Invalid block size");if(ui===0)break;e+=ui}Cn.push({x:ti,y:ni,width:ii,height:si,has_local_palette:Oi,palette_offset:Ai,palette_size:fi,data_offset:Ni,data_length:e-Ni,transparent_index:En,interlaced:!!ci,delay:An,disposal:Sn});break;case 59:Qe=!1;break;default:throw new Error("Unknown gif block: 0x"+Ae[e-1].toString(16))}this.numFrames=function(){return Cn.length},this.loopCount=function(){return Tn},this.frameInfo=function(li){if(li<0||li>=Cn.length)throw new Error("Frame index out of range.");return Cn[li]},this.decodeAndBlitFrameBGRA=function(li,Ri){var Mi=this.frameInfo(li),Bi=Mi.width*Mi.height,er=new Uint8Array(Bi);$t(Ae,Mi.data_offset,er,Bi);var nr=Mi.palette_offset,lr=Mi.transparent_index;lr===null&&(lr=256);var hr=Mi.width,ar=t-hr,wr=hr,Fi=4*(Mi.y*t+Mi.x),cr=4*((Mi.y+Mi.height)*t+Mi.x),rr=Fi,gr=4*ar;Mi.interlaced===!0&&(gr+=4*t*7);for(var vr=8,pr=0,_r=er.length;pr<_r;++pr){var Ar=er[pr];if(wr===0&&(wr=hr,(rr+=gr)>=cr&&(gr=4*ar+4*t*(vr-1),rr=Fi+(hr+ar)*(vr<<1),vr>>=1)),Ar===lr)rr+=4;else{var Sr=Ae[nr+3*Ar],Hr=Ae[nr+3*Ar+1],es=Ae[nr+3*Ar+2];Ri[rr++]=es,Ri[rr++]=Hr,Ri[rr++]=Sr,Ri[rr++]=255}--wr}},this.decodeAndBlitFrameRGBA=function(li,Ri){var Mi=this.frameInfo(li),Bi=Mi.width*Mi.height,er=new Uint8Array(Bi);$t(Ae,Mi.data_offset,er,Bi);var nr=Mi.palette_offset,lr=Mi.transparent_index;lr===null&&(lr=256);var hr=Mi.width,ar=t-hr,wr=hr,Fi=4*(Mi.y*t+Mi.x),cr=4*((Mi.y+Mi.height)*t+Mi.x),rr=Fi,gr=4*ar;Mi.interlaced===!0&&(gr+=4*t*7);for(var vr=8,pr=0,_r=er.length;pr<_r;++pr){var Ar=er[pr];if(wr===0&&(wr=hr,(rr+=gr)>=cr&&(gr=4*ar+4*t*(vr-1),rr=Fi+(hr+ar)*(vr<<1),vr>>=1)),Ar===lr)rr+=4;else{var Sr=Ae[nr+3*Ar],Hr=Ae[nr+3*Ar+1],es=Ae[nr+3*Ar+2];Ri[rr++]=Sr,Ri[rr++]=Hr,Ri[rr++]=es,Ri[rr++]=255}--wr}}}function $t(Ae,e,t,Oe){for(var ke=Ae[e++],Be=1<<ke,Ue=Be+1,je=Ue+1,We=ke+1,Qe=(1<<We)-1,Cn=0,An=0,En=0,Sn=Ae[e++],Tn=new Int32Array(4096),Dn=null;;){for(;Cn<16&&Sn!==0;)An|=Ae[e++]<<Cn,Cn+=8,Sn===1?Sn=Ae[e++]:--Sn;if(Cn<We)break;var ti=An&Qe;if(An>>=We,Cn-=We,ti!==Be){if(ti===Ue)break;for(var ni=ti<je?ti:Dn,ii=0,si=ni;si>Be;)si=Tn[si]>>8,++ii;var oi=si;if(En+ii+(ni!==ti?1:0)>Oe)return void a.log("Warning, gif stream longer than expected.");t[En++]=oi;var ci=En+=ii;for(ni!==ti&&(t[En++]=oi),si=ni;ii--;)si=Tn[si],t[--ci]=255&si,si>>=8;Dn!==null&&je<4096&&(Tn[je++]=Dn<<8|oi,je>=Qe+1&&We<12&&(++We,Qe=Qe<<1|1)),Dn=ti}else je=Ue+1,Qe=(1<<(We=ke+1))-1,Dn=null}return En!==Oe&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Ae){var e,t,Oe,ke,Be,Ue=Math.floor,je=new Array(64),We=new Array(64),Qe=new Array(64),Cn=new Array(64),An=new Array(65535),En=new Array(65535),Sn=new Array(64),Tn=new Array(64),Dn=[],ti=0,ni=7,ii=new Array(64),si=new Array(64),oi=new Array(64),ci=new Array(256),Pi=new Array(2048),Ai=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fi=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Oi=[0,1,2,3,4,5,6,7,8,9,10,11],Ni=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ui=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],li=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ri=[0,1,2,3,4,5,6,7,8,9,10,11],Mi=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Bi=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function er(Fi,cr){for(var rr=0,gr=0,vr=new Array,pr=1;pr<=16;pr++){for(var _r=1;_r<=Fi[pr];_r++)vr[cr[gr]]=[],vr[cr[gr]][0]=rr,vr[cr[gr]][1]=pr,gr++,rr++;rr*=2}return vr}function nr(Fi){for(var cr=Fi[0],rr=Fi[1]-1;rr>=0;)cr&1<<rr&&(ti|=1<<ni),rr--,--ni<0&&(ti==255?(lr(255),lr(0)):lr(ti),ni=7,ti=0)}function lr(Fi){Dn.push(Fi)}function hr(Fi){lr(Fi>>8&255),lr(255&Fi)}function ar(Fi,cr,rr,gr,vr){for(var pr,_r=vr[0],Ar=vr[240],Sr=function(Pr,kr){var Rr,Tr,Er,br,Ir,jr,qr,Wr,Kr,ps,rs=0;for(Kr=0;Kr<8;++Kr){Rr=Pr[rs],Tr=Pr[rs+1],Er=Pr[rs+2],br=Pr[rs+3],Ir=Pr[rs+4],jr=Pr[rs+5],qr=Pr[rs+6];var Ps=Rr+(Wr=Pr[rs+7]),Cs=Rr-Wr,Ns=Tr+qr,Rs=Tr-qr,vs=Er+jr,Ts=Er-jr,Is=br+Ir,js=br-Ir,Ms=Ps+Is,Qs=Ps-Is,Do=Ns+vs,ks=Ns-vs;Pr[rs]=Ms+Do,Pr[rs+4]=Ms-Do;var ws=.707106781*(ks+Qs);Pr[rs+2]=Qs+ws,Pr[rs+6]=Qs-ws;var Ds=.382683433*((Ms=js+Ts)-(ks=Rs+Cs)),ml=.5411961*Ms+Ds,Ys=1.306562965*ks+Ds,la=.707106781*(Do=Ts+Rs),Os=Cs+la,Ss=Cs-la;Pr[rs+5]=Ss+ml,Pr[rs+3]=Ss-ml,Pr[rs+1]=Os+Ys,Pr[rs+7]=Os-Ys,rs+=8}for(rs=0,Kr=0;Kr<8;++Kr){Rr=Pr[rs],Tr=Pr[rs+8],Er=Pr[rs+16],br=Pr[rs+24],Ir=Pr[rs+32],jr=Pr[rs+40],qr=Pr[rs+48];var _o=Rr+(Wr=Pr[rs+56]),$o=Rr-Wr,ho=Tr+qr,Gs=Tr-qr,zs=Er+jr,Hs=Er-jr,Ua=br+Ir,Na=br-Ir,za=_o+Ua,Za=_o-Ua,Ha=ho+zs,va=ho-zs;Pr[rs]=za+Ha,Pr[rs+32]=za-Ha;var Aa=.707106781*(va+Za);Pr[rs+16]=Za+Aa,Pr[rs+48]=Za-Aa;var Zl=.382683433*((za=Na+Hs)-(va=Gs+$o)),Rc=.5411961*za+Zl,Vc=1.306562965*va+Zl,zc=.707106781*(Ha=Hs+Gs),$c=$o+zc,Hc=$o-zc;Pr[rs+40]=Hc+Rc,Pr[rs+24]=Hc-Rc,Pr[rs+8]=$c+Vc,Pr[rs+56]=$c-Vc,rs++}for(Kr=0;Kr<64;++Kr)ps=Pr[Kr]*kr[Kr],Sn[Kr]=ps>0?ps+.5|0:ps-.5|0;return Sn}(Fi,cr),Hr=0;Hr<64;++Hr)Tn[Ai[Hr]]=Sr[Hr];var es=Tn[0]-rr;rr=Tn[0],es==0?nr(gr[0]):(nr(gr[En[pr=32767+es]]),nr(An[pr]));for(var ir=63;ir>0&&Tn[ir]==0;)ir--;if(ir==0)return nr(_r),rr;for(var mr,dr=1;dr<=ir;){for(var tr=dr;Tn[dr]==0&&dr<=ir;)++dr;var Dr=dr-tr;if(Dr>=16){mr=Dr>>4;for(var Nr=1;Nr<=mr;++Nr)nr(Ar);Dr&=15}pr=32767+Tn[dr],nr(vr[(Dr<<4)+En[pr]]),nr(An[pr]),dr++}return ir!=63&&nr(_r),rr}function wr(Fi){Fi=Math.min(Math.max(Fi,1),100),Be!=Fi&&(function(cr){for(var rr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],gr=0;gr<64;gr++){var vr=Ue((rr[gr]*cr+50)/100);vr=Math.min(Math.max(vr,1),255),je[Ai[gr]]=vr}for(var pr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],_r=0;_r<64;_r++){var Ar=Ue((pr[_r]*cr+50)/100);Ar=Math.min(Math.max(Ar,1),255),We[Ai[_r]]=Ar}for(var Sr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Hr=0,es=0;es<8;es++)for(var ir=0;ir<8;ir++)Qe[Hr]=1/(je[Ai[Hr]]*Sr[es]*Sr[ir]*8),Cn[Hr]=1/(We[Ai[Hr]]*Sr[es]*Sr[ir]*8),Hr++}(Fi<50?Math.floor(5e3/Fi):Math.floor(200-2*Fi)),Be=Fi)}this.encode=function(Fi,cr){cr&&wr(cr),Dn=new Array,ti=0,ni=7,hr(65496),hr(65504),hr(16),lr(74),lr(70),lr(73),lr(70),lr(0),lr(1),lr(1),lr(0),hr(1),hr(1),lr(0),lr(0),function(){hr(65499),hr(132),lr(0);for(var Tr=0;Tr<64;Tr++)lr(je[Tr]);lr(1);for(var Er=0;Er<64;Er++)lr(We[Er])}(),function(Tr,Er){hr(65472),hr(17),lr(8),hr(Er),hr(Tr),lr(3),lr(1),lr(17),lr(0),lr(2),lr(17),lr(1),lr(3),lr(17),lr(1)}(Fi.width,Fi.height),function(){hr(65476),hr(418),lr(0);for(var Tr=0;Tr<16;Tr++)lr(fi[Tr+1]);for(var Er=0;Er<=11;Er++)lr(Oi[Er]);lr(16);for(var br=0;br<16;br++)lr(Ni[br+1]);for(var Ir=0;Ir<=161;Ir++)lr(ui[Ir]);lr(1);for(var jr=0;jr<16;jr++)lr(li[jr+1]);for(var qr=0;qr<=11;qr++)lr(Ri[qr]);lr(17);for(var Wr=0;Wr<16;Wr++)lr(Mi[Wr+1]);for(var Kr=0;Kr<=161;Kr++)lr(Bi[Kr])}(),hr(65498),hr(12),lr(3),lr(1),lr(0),lr(2),lr(17),lr(3),lr(17),lr(0),lr(63),lr(0);var rr=0,gr=0,vr=0;ti=0,ni=7,this.encode.displayName="_encode_";for(var pr,_r,Ar,Sr,Hr,es,ir,mr,dr,tr=Fi.data,Dr=Fi.width,Nr=Fi.height,Pr=4*Dr,kr=0;kr<Nr;){for(pr=0;pr<Pr;){for(Hr=Pr*kr+pr,ir=-1,mr=0,dr=0;dr<64;dr++)es=Hr+(mr=dr>>3)*Pr+(ir=4*(7&dr)),kr+mr>=Nr&&(es-=Pr*(kr+1+mr-Nr)),pr+ir>=Pr&&(es-=pr+ir-Pr+4),_r=tr[es++],Ar=tr[es++],Sr=tr[es++],ii[dr]=(Pi[_r]+Pi[Ar+256>>0]+Pi[Sr+512>>0]>>16)-128,si[dr]=(Pi[_r+768>>0]+Pi[Ar+1024>>0]+Pi[Sr+1280>>0]>>16)-128,oi[dr]=(Pi[_r+1280>>0]+Pi[Ar+1536>>0]+Pi[Sr+1792>>0]>>16)-128;rr=ar(ii,Qe,rr,e,Oe),gr=ar(si,Cn,gr,t,ke),vr=ar(oi,Cn,vr,t,ke),pr+=32}kr+=8}if(ni>=0){var Rr=[];Rr[1]=ni+1,Rr[0]=(1<<ni+1)-1,nr(Rr)}return hr(65497),new Uint8Array(Dn)},Ae=Ae||50,function(){for(var Fi=String.fromCharCode,cr=0;cr<256;cr++)ci[cr]=Fi(cr)}(),e=er(fi,Oi),t=er(li,Ri),Oe=er(Ni,ui),ke=er(Mi,Bi),function(){for(var Fi=1,cr=2,rr=1;rr<=15;rr++){for(var gr=Fi;gr<cr;gr++)En[32767+gr]=rr,An[32767+gr]=[],An[32767+gr][1]=rr,An[32767+gr][0]=gr;for(var vr=-(cr-1);vr<=-Fi;vr++)En[32767+vr]=rr,An[32767+vr]=[],An[32767+vr][1]=rr,An[32767+vr][0]=cr-1+vr;Fi<<=1,cr<<=1}}(),function(){for(var Fi=0;Fi<256;Fi++)Pi[Fi]=19595*Fi,Pi[Fi+256>>0]=38470*Fi,Pi[Fi+512>>0]=7471*Fi+32768,Pi[Fi+768>>0]=-11059*Fi,Pi[Fi+1024>>0]=-21709*Fi,Pi[Fi+1280>>0]=32768*Fi+8421375,Pi[Fi+1536>>0]=-27439*Fi,Pi[Fi+1792>>0]=-5329*Fi}(),wr(Ae)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Ae,e){if(this.pos=0,this.buffer=Ae,this.datav=new DataView(Ae.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Ae){function e(fi){if(!fi)throw Error("assert :P")}function t(fi,Oi,Ni){for(var ui=0;4>ui;ui++)if(fi[Oi+ui]!=Ni.charCodeAt(ui))return!0;return!1}function Oe(fi,Oi,Ni,ui,li){for(var Ri=0;Ri<li;Ri++)fi[Oi+Ri]=Ni[ui+Ri]}function ke(fi,Oi,Ni,ui){for(var li=0;li<ui;li++)fi[Oi+li]=Ni}function Be(fi){return new Int32Array(fi)}function Ue(fi,Oi){for(var Ni=[],ui=0;ui<fi;ui++)Ni.push(new Oi);return Ni}function je(fi,Oi){var Ni=[];return function ui(li,Ri,Mi){for(var Bi=Mi[Ri],er=0;er<Bi&&(li.push(Mi.length>Ri+1?[]:new Oi),!(Mi.length<Ri+1));er++)ui(li[er],Ri+1,Mi)}(Ni,0,fi),Ni}var We=function(){var fi=this;function Oi(ei,ri){for(var di=1<<ri-1>>>0;ei&di;)di>>>=1;return di?(ei&di-1)+di:ei}function Ni(ei,ri,di,Li,ji){e(!(Li%di));do ei[ri+(Li-=di)]=ji;while(0<Li)}function ui(ei,ri,di,Li,ji){if(e(2328>=ji),512>=ji)var sr=Be(512);else if((sr=Be(ji))==null)return 0;return function(or,ur,fr,yr,Mr,zr){var $r,Br,cs=ur,Qr=1<<fr,Or=Be(16),Fr=Be(16);for(e(Mr!=0),e(yr!=null),e(or!=null),e(0<fr),Br=0;Br<Mr;++Br){if(15<yr[Br])return 0;++Or[yr[Br]]}if(Or[0]==Mr)return 0;for(Fr[1]=0,$r=1;15>$r;++$r){if(Or[$r]>1<<$r)return 0;Fr[$r+1]=Fr[$r]+Or[$r]}for(Br=0;Br<Mr;++Br)$r=yr[Br],0<yr[Br]&&(zr[Fr[$r]++]=Br);if(Fr[15]==1)return(yr=new li).g=0,yr.value=zr[0],Ni(or,cs,1,Qr,yr),Qr;var ss,us=-1,as=Qr-1,Es=0,ms=1,Ls=1,_s=1<<fr;for(Br=0,$r=1,Mr=2;$r<=fr;++$r,Mr<<=1){if(ms+=Ls<<=1,0>(Ls-=Or[$r]))return 0;for(;0<Or[$r];--Or[$r])(yr=new li).g=$r,yr.value=zr[Br++],Ni(or,cs+Es,Mr,_s,yr),Es=Oi(Es,$r)}for($r=fr+1,Mr=2;15>=$r;++$r,Mr<<=1){if(ms+=Ls<<=1,0>(Ls-=Or[$r]))return 0;for(;0<Or[$r];--Or[$r]){if(yr=new li,(Es&as)!=us){for(cs+=_s,ss=1<<(us=$r)-fr;15>us&&!(0>=(ss-=Or[us]));)++us,ss<<=1;Qr+=_s=1<<(ss=us-fr),or[ur+(us=Es&as)].g=ss+fr,or[ur+us].value=cs-ur-us}yr.g=$r-fr,yr.value=zr[Br++],Ni(or,cs+(Es>>fr),Mr,_s,yr),Es=Oi(Es,$r)}}return ms!=2*Fr[15]-1?0:Qr}(ei,ri,di,Li,ji,sr)}function li(){this.value=this.g=0}function Ri(){this.value=this.g=0}function Mi(){this.G=Ue(5,li),this.H=Be(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Ue(Sa,Ri)}function Bi(ei,ri,di,Li){e(ei!=null),e(ri!=null),e(2147483648>Li),ei.Ca=254,ei.I=0,ei.b=-8,ei.Ka=0,ei.oa=ri,ei.pa=di,ei.Jd=ri,ei.Yc=di+Li,ei.Zc=4<=Li?di+Li-4+1:di,pr(ei)}function er(ei,ri){for(var di=0;0<ri--;)di|=Ar(ei,128)<<ri;return di}function nr(ei,ri){var di=er(ei,ri);return _r(ei)?-di:di}function lr(ei,ri,di,Li){var ji,sr=0;for(e(ei!=null),e(ri!=null),e(4294967288>Li),ei.Sb=Li,ei.Ra=0,ei.u=0,ei.h=0,4<Li&&(Li=4),ji=0;ji<Li;++ji)sr+=ri[di+ji]<<8*ji;ei.Ra=sr,ei.bb=Li,ei.oa=ri,ei.pa=di}function hr(ei){for(;8<=ei.u&&ei.bb<ei.Sb;)ei.Ra>>>=8,ei.Ra+=ei.oa[ei.pa+ei.bb]<<lu-8>>>0,++ei.bb,ei.u-=8;rr(ei)&&(ei.h=1,ei.u=0)}function ar(ei,ri){if(e(0<=ri),!ei.h&&ri<=au){var di=cr(ei)&ou[ri];return ei.u+=ri,hr(ei),di}return ei.h=1,ei.u=0}function wr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Fi(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function cr(ei){return ei.Ra>>>(ei.u&lu-1)>>>0}function rr(ei){return e(ei.bb<=ei.Sb),ei.h||ei.bb==ei.Sb&&ei.u>lu}function gr(ei,ri){ei.u=ri,ei.h=rr(ei)}function vr(ei){ei.u>=ju&&(e(ei.u>=ju),hr(ei))}function pr(ei){e(ei!=null&&ei.oa!=null),ei.pa<ei.Zc?(ei.I=(ei.oa[ei.pa++]|ei.I<<8)>>>0,ei.b+=8):(e(ei!=null&&ei.oa!=null),ei.pa<ei.Yc?(ei.b+=8,ei.I=ei.oa[ei.pa++]|ei.I<<8):ei.Ka?ei.b=0:(ei.I<<=8,ei.b+=8,ei.Ka=1))}function _r(ei){return er(ei,1)}function Ar(ei,ri){var di=ei.Ca;0>ei.b&&pr(ei);var Li=ei.b,ji=di*ri>>>8,sr=(ei.I>>>Li>ji)+0;for(sr?(di-=ji,ei.I-=ji+1<<Li>>>0):di=ji+1,Li=di,ji=0;256<=Li;)ji+=8,Li>>=8;return Li=7^ji+Wa[Li],ei.b-=Li,ei.Ca=(di<<Li)-1,sr}function Sr(ei,ri,di){ei[ri+0]=di>>24&255,ei[ri+1]=di>>16&255,ei[ri+2]=di>>8&255,ei[ri+3]=di>>0&255}function Hr(ei,ri){return ei[ri+0]<<0|ei[ri+1]<<8}function es(ei,ri){return Hr(ei,ri)|ei[ri+2]<<16}function ir(ei,ri){return Hr(ei,ri)|Hr(ei,ri+2)<<16}function mr(ei,ri){var di=1<<ri;return e(ei!=null),e(0<ri),ei.X=Be(di),ei.X==null?0:(ei.Mb=32-ri,ei.Xa=ri,1)}function dr(ei,ri){e(ei!=null),e(ri!=null),e(ei.Xa==ri.Xa),Oe(ri.X,0,ei.X,0,1<<ri.Xa)}function tr(){this.X=[],this.Xa=this.Mb=0}function Dr(ei,ri,di,Li){e(di!=null),e(Li!=null);var ji=di[0],sr=Li[0];return ji==0&&(ji=(ei*sr+ri/2)/ri),sr==0&&(sr=(ri*ji+ei/2)/ei),0>=ji||0>=sr?0:(di[0]=ji,Li[0]=sr,1)}function Nr(ei,ri){return ei+(1<<ri)-1>>>ri}function Pr(ei,ri){return((4278255360&ei)+(4278255360&ri)>>>0&4278255360)+((16711935&ei)+(16711935&ri)>>>0&16711935)>>>0}function kr(ei,ri){fi[ri]=function(di,Li,ji,sr,or,ur,fr){var yr;for(yr=0;yr<or;++yr){var Mr=fi[ei](ur[fr+yr-1],ji,sr+yr);ur[fr+yr]=Pr(di[Li+yr],Mr)}}}function Rr(){this.ud=this.hd=this.jd=0}function Tr(ei,ri){return((4278124286&(ei^ri))>>>1)+(ei&ri)>>>0}function Er(ei){return 0<=ei&&256>ei?ei:0>ei?0:255<ei?255:void 0}function br(ei,ri){return Er(ei+(ei-ri+.5>>1))}function Ir(ei,ri,di){return Math.abs(ri-di)-Math.abs(ei-di)}function jr(ei,ri,di,Li,ji,sr,or){for(Li=sr[or-1],di=0;di<ji;++di)sr[or+di]=Li=Pr(ei[ri+di],Li)}function qr(ei,ri,di,Li,ji){var sr;for(sr=0;sr<di;++sr){var or=ei[ri+sr],ur=or>>8&255,fr=16711935&(fr=(fr=16711935&or)+((ur<<16)+ur));Li[ji+sr]=(4278255360&or)+fr>>>0}}function Wr(ei,ri){ri.jd=ei>>0&255,ri.hd=ei>>8&255,ri.ud=ei>>16&255}function Kr(ei,ri,di,Li,ji,sr){var or;for(or=0;or<Li;++or){var ur=ri[di+or],fr=ur>>>8,yr=ur,Mr=255&(Mr=(Mr=ur>>>16)+((ei.jd<<24>>24)*(fr<<24>>24)>>>5));yr=255&(yr=(yr=yr+((ei.hd<<24>>24)*(fr<<24>>24)>>>5))+((ei.ud<<24>>24)*(Mr<<24>>24)>>>5)),ji[sr+or]=(4278255360&ur)+(Mr<<16)+yr}}function ps(ei,ri,di,Li,ji){fi[ri]=function(sr,or,ur,fr,yr,Mr,zr,$r,Br){for(fr=zr;fr<$r;++fr)for(zr=0;zr<Br;++zr)yr[Mr++]=ji(ur[Li(sr[or++])])},fi[ei]=function(sr,or,ur,fr,yr,Mr,zr){var $r=8>>sr.b,Br=sr.Ea,cs=sr.K[0],Qr=sr.w;if(8>$r)for(sr=(1<<sr.b)-1,Qr=(1<<$r)-1;or<ur;++or){var Or,Fr=0;for(Or=0;Or<Br;++Or)Or&sr||(Fr=Li(fr[yr++])),Mr[zr++]=ji(cs[Fr&Qr]),Fr>>=$r}else fi["VP8LMapColor"+di](fr,yr,cs,Qr,Mr,zr,or,ur,Br)}}function rs(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var sr=ei[ri++];Li[ji++]=sr>>16&255,Li[ji++]=sr>>8&255,Li[ji++]=sr>>0&255}}function Ps(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var sr=ei[ri++];Li[ji++]=sr>>16&255,Li[ji++]=sr>>8&255,Li[ji++]=sr>>0&255,Li[ji++]=sr>>24&255}}function Cs(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var sr=(or=ei[ri++])>>16&240|or>>12&15,or=or>>0&240|or>>28&15;Li[ji++]=sr,Li[ji++]=or}}function Ns(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var sr=(or=ei[ri++])>>16&248|or>>13&7,or=or>>5&224|or>>3&31;Li[ji++]=sr,Li[ji++]=or}}function Rs(ei,ri,di,Li,ji){for(di=ri+di;ri<di;){var sr=ei[ri++];Li[ji++]=sr>>0&255,Li[ji++]=sr>>8&255,Li[ji++]=sr>>16&255}}function vs(ei,ri,di,Li,ji,sr){if(sr==0)for(di=ri+di;ri<di;)Sr(Li,((sr=ei[ri++])[0]>>24|sr[1]>>8&65280|sr[2]<<8&16711680|sr[3]<<24)>>>0),ji+=32;else Oe(Li,ji,ei,ri,di)}function Ts(ei,ri){fi[ri][0]=fi[ei+"0"],fi[ri][1]=fi[ei+"1"],fi[ri][2]=fi[ei+"2"],fi[ri][3]=fi[ei+"3"],fi[ri][4]=fi[ei+"4"],fi[ri][5]=fi[ei+"5"],fi[ri][6]=fi[ei+"6"],fi[ri][7]=fi[ei+"7"],fi[ri][8]=fi[ei+"8"],fi[ri][9]=fi[ei+"9"],fi[ri][10]=fi[ei+"10"],fi[ri][11]=fi[ei+"11"],fi[ri][12]=fi[ei+"12"],fi[ri][13]=fi[ei+"13"],fi[ri][14]=fi[ei+"0"],fi[ri][15]=fi[ei+"0"]}function Is(ei){return ei==Uh||ei==jh||ei==Jd||ei==Vh}function js(){this.eb=[],this.size=this.A=this.fb=0}function Ms(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new js,this.f.kb=new Ms,this.sd=null}function Do(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ks(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ws(ei){return alert("todo:WebPSamplerProcessPlane"),ei.T}function Ds(ei,ri){var di=ei.T,Li=ri.ba.f.RGBA,ji=Li.eb,sr=Li.fb+ei.ka*Li.A,or=wl[ri.ba.S],ur=ei.y,fr=ei.O,yr=ei.f,Mr=ei.N,zr=ei.ea,$r=ei.W,Br=ri.cc,cs=ri.dc,Qr=ri.Mc,Or=ri.Nc,Fr=ei.ka,ss=ei.ka+ei.T,us=ei.U,as=us+1>>1;for(Fr==0?or(ur,fr,null,null,yr,Mr,zr,$r,yr,Mr,zr,$r,ji,sr,null,null,us):(or(ri.ec,ri.fc,ur,fr,Br,cs,Qr,Or,yr,Mr,zr,$r,ji,sr-Li.A,ji,sr,us),++di);Fr+2<ss;Fr+=2)Br=yr,cs=Mr,Qr=zr,Or=$r,Mr+=ei.Rc,$r+=ei.Rc,sr+=2*Li.A,or(ur,(fr+=2*ei.fa)-ei.fa,ur,fr,Br,cs,Qr,Or,yr,Mr,zr,$r,ji,sr-Li.A,ji,sr,us);return fr+=ei.fa,ei.j+ss<ei.o?(Oe(ri.ec,ri.fc,ur,fr,us),Oe(ri.cc,ri.dc,yr,Mr,as),Oe(ri.Mc,ri.Nc,zr,$r,as),di--):1&ss||or(ur,fr,null,null,yr,Mr,zr,$r,yr,Mr,zr,$r,ji,sr+Li.A,null,null,us),di}function ml(ei,ri,di){var Li=ei.F,ji=[ei.J];if(Li!=null){var sr=ei.U,or=ri.ba.S,ur=or==Zd||or==Jd;ri=ri.ba.f.RGBA;var fr=[0],yr=ei.ka;fr[0]=ei.T,ei.Kb&&(yr==0?--fr[0]:(--yr,ji[0]-=ei.width),ei.j+ei.ka+ei.T==ei.o&&(fr[0]=ei.o-ei.j-yr));var Mr=ri.eb;yr=ri.fb+yr*ri.A,ei=ko(Li,ji[0],ei.width,sr,fr,Mr,yr+(ur?0:3),ri.A),e(di==fr),ei&&Is(or)&&bl(Mr,yr,ur,sr,fr,ri.A)}return 0}function Ys(ei){var ri=ei.ma,di=ri.ba.S,Li=11>di,ji=di==Yd||di==Xd||di==Zd||di==Bh||di==12||Is(di);if(ri.memory=null,ri.Ib=null,ri.Jb=null,ri.Nd=null,!Bu(ri.Oa,ei,ji?11:12))return 0;if(ji&&Is(di)&&fs(),ei.da)alert("todo:use_scaling");else{if(Li){if(ri.Ib=ws,ei.Kb){if(di=ei.U+1>>1,ri.memory=Be(ei.U+2*di),ri.memory==null)return 0;ri.ec=ri.memory,ri.fc=0,ri.cc=ri.ec,ri.dc=ri.fc+ei.U,ri.Mc=ri.cc,ri.Nc=ri.dc+di,ri.Ib=Ds,fs()}}else alert("todo:EmitYUV");ji&&(ri.Jb=ml,Li&&Vr())}if(Li&&!pf){for(ei=0;256>ei;++ei)bp[ei]=89858*(ei-128)+eh>>Qd,Pp[ei]=-22014*(ei-128)+eh,wp[ei]=-45773*(ei-128),Ip[ei]=113618*(ei-128)+eh>>Qd;for(ei=Yu;ei<Hh;++ei)ri=76283*(ei-16)+eh>>Qd,xp[ei-Yu]=Ja(ri,255),Tp[ei-Yu]=Ja(ri+8>>4,15);pf=1}return 1}function la(ei){var ri=ei.ma,di=ei.U,Li=ei.T;return e(!(1&ei.ka)),0>=di||0>=Li?0:(di=ri.Ib(ei,ri),ri.Jb!=null&&ri.Jb(ei,ri,di),ri.Dc+=di,1)}function Os(ei){ei.ma.memory=null}function Ss(ei,ri,di,Li){return ar(ei,8)!=47?0:(ri[0]=ar(ei,14)+1,di[0]=ar(ei,14)+1,Li[0]=ar(ei,1),ar(ei,3)!=0?0:!ei.h)}function _o(ei,ri){if(4>ei)return ei+1;var di=ei-2>>1;return(2+(1&ei)<<di)+ar(ri,di)+1}function $o(ei,ri){return 120<ri?ri-120:1<=(di=((di=up[ri-1])>>4)*ei+(8-(15&di)))?di:1;var di}function ho(ei,ri,di){var Li=cr(di),ji=ei[ri+=255&Li].g-8;return 0<ji&&(gr(di,di.u+8),Li=cr(di),ri+=ei[ri].value,ri+=Li&(1<<ji)-1),gr(di,di.u+ei[ri].g),ei[ri].value}function Gs(ei,ri,di){return di.g+=ei.g,di.value+=ei.value<<ri>>>0,e(8>=di.g),ei.g}function zs(ei,ri,di){var Li=ei.xc;return e((ri=Li==0?0:ei.vc[ei.md*(di>>Li)+(ri>>Li)])<ei.Wb),ei.Ya[ri]}function Hs(ei,ri,di,Li){var ji=ei.ab,sr=ei.c*ri,or=ei.C;ri=or+ri;var ur=di,fr=Li;for(Li=ei.Ta,di=ei.Ua;0<ji--;){var yr=ei.gc[ji],Mr=or,zr=ri,$r=ur,Br=fr,cs=(fr=Li,ur=di,yr.Ea);switch(e(Mr<zr),e(zr<=yr.nc),yr.hc){case 2:Fd($r,Br,(zr-Mr)*cs,fr,ur);break;case 0:var Qr=Mr,Or=zr,Fr=fr,ss=ur,us=(_s=yr).Ea;Qr==0&&(Gh($r,Br,null,null,1,Fr,ss),jr($r,Br+1,0,0,us-1,Fr,ss+1),Br+=us,ss+=us,++Qr);for(var as=1<<_s.b,Es=as-1,ms=Nr(us,_s.b),Ls=_s.K,_s=_s.w+(Qr>>_s.b)*ms;Qr<Or;){var Xs=Ls,Ks=_s,Ws=1;for(Vu($r,Br,Fr,ss-us,1,Fr,ss);Ws<us;){var $s=(Ws&~Es)+as;$s>us&&($s=us),(0,vc[Xs[Ks++]>>8&15])($r,Br+ +Ws,Fr,ss+Ws-us,$s-Ws,Fr,ss+Ws),Ws=$s}Br+=us,ss+=us,++Qr&Es||(_s+=ms)}zr!=yr.nc&&Oe(fr,ur-cs,fr,ur+(zr-Mr-1)*cs,cs);break;case 1:for(cs=$r,Or=Br,us=($r=yr.Ea)-(ss=$r&~(Fr=(Br=1<<yr.b)-1)),Qr=Nr($r,yr.b),as=yr.K,yr=yr.w+(Mr>>yr.b)*Qr;Mr<zr;){for(Es=as,ms=yr,Ls=new Rr,_s=Or+ss,Xs=Or+$r;Or<_s;)Wr(Es[ms++],Ls),Dc(Ls,cs,Or,Br,fr,ur),Or+=Br,ur+=Br;Or<Xs&&(Wr(Es[ms++],Ls),Dc(Ls,cs,Or,us,fr,ur),Or+=us,ur+=us),++Mr&Fr||(yr+=Qr)}break;case 3:if($r==fr&&Br==ur&&0<yr.b){for(Or=fr,$r=cs=ur+(zr-Mr)*cs-(ss=(zr-Mr)*Nr(yr.Ea,yr.b)),Br=fr,Fr=ur,Qr=[],ss=(us=ss)-1;0<=ss;--ss)Qr[ss]=Br[Fr+ss];for(ss=us-1;0<=ss;--ss)Or[$r+ss]=Qr[ss];yl(yr,Mr,zr,fr,cs,fr,ur)}else yl(yr,Mr,zr,$r,Br,fr,ur)}ur=Li,fr=di}fr!=di&&Oe(Li,di,ur,fr,sr)}function Ua(ei,ri){var di=ei.V,Li=ei.Ba+ei.c*ei.C,ji=ri-ei.C;if(e(ri<=ei.l.o),e(16>=ji),0<ji){var sr=ei.l,or=ei.Ta,ur=ei.Ua,fr=sr.width;if(Hs(ei,ji,di,Li),ji=ur=[ur],e((di=ei.C)<(Li=ri)),e(sr.v<sr.va),Li>sr.o&&(Li=sr.o),di<sr.j){var yr=sr.j-di;di=sr.j,ji[0]+=yr*fr}if(di>=Li?di=0:(ji[0]+=4*sr.v,sr.ka=di-sr.j,sr.U=sr.va-sr.v,sr.T=Li-di,di=1),di){if(ur=ur[0],11>(di=ei.ca).S){var Mr=di.f.RGBA,zr=(Li=di.S,ji=sr.U,sr=sr.T,yr=Mr.eb,Mr.A),$r=sr;for(Mr=Mr.fb+ei.Ma*Mr.A;0<$r--;){var Br=or,cs=ur,Qr=ji,Or=yr,Fr=Mr;switch(Li){case Wd:Ya(Br,cs,Qr,Or,Fr);break;case Yd:Ga(Br,cs,Qr,Or,Fr);break;case Uh:Ga(Br,cs,Qr,Or,Fr),bl(Or,Fr,0,Qr,1,0);break;case sf:ac(Br,cs,Qr,Or,Fr);break;case Xd:vs(Br,cs,Qr,Or,Fr,1);break;case jh:vs(Br,cs,Qr,Or,Fr,1),bl(Or,Fr,0,Qr,1,0);break;case Zd:vs(Br,cs,Qr,Or,Fr,0);break;case Jd:vs(Br,cs,Qr,Or,Fr,0),bl(Or,Fr,1,Qr,1,0);break;case Bh:_c(Br,cs,Qr,Or,Fr);break;case Vh:_c(Br,cs,Qr,Or,Fr),wo(Or,Fr,Qr,1,0);break;case of:oc(Br,cs,Qr,Or,Fr);break;default:e(0)}ur+=fr,Mr+=zr}ei.Ma+=sr}else alert("todo:EmitRescaledRowsYUVA");e(ei.Ma<=di.height)}}ei.C=ri,e(ei.C<=ei.i)}function Na(ei){var ri;if(0<ei.ua)return 0;for(ri=0;ri<ei.Wb;++ri){var di=ei.Ya[ri].G,Li=ei.Ya[ri].H;if(0<di[1][Li[1]+0].g||0<di[2][Li[2]+0].g||0<di[3][Li[3]+0].g)return 0}return 1}function za(ei,ri,di,Li,ji,sr){if(ei.Z!=0){var or=ei.qd,ur=ei.rd;for(e(Sc[ei.Z]!=null);ri<di;++ri)Sc[ei.Z](or,ur,Li,ji,Li,ji,sr),or=Li,ur=ji,ji+=sr;ei.qd=or,ei.rd=ur}}function Za(ei,ri){var di=ei.l.ma,Li=di.Z==0||di.Z==1?ei.l.j:ei.C;if(Li=ei.C<Li?Li:ei.C,e(ri<=ei.l.o),ri>Li){var ji=ei.l.width,sr=di.ca,or=di.tb+ji*Li,ur=ei.V,fr=ei.Ba+ei.c*Li,yr=ei.gc;e(ei.ab==1),e(yr[0].hc==3),Bd(yr[0],Li,ri,ur,fr,sr,or),za(di,Li,ri,sr,or,ji)}ei.C=ei.Ma=ri}function Ha(ei,ri,di,Li,ji,sr,or){var ur=ei.$/Li,fr=ei.$%Li,yr=ei.m,Mr=ei.s,zr=di+ei.$,$r=zr;ji=di+Li*ji;var Br=di+Li*sr,cs=280+Mr.ua,Qr=ei.Pb?ur:16777216,Or=0<Mr.ua?Mr.Wa:null,Fr=Mr.wc,ss=zr<Br?zs(Mr,fr,ur):null;e(ei.C<sr),e(Br<=ji);var us=!1;e:for(;;){for(;us||zr<Br;){var as=0;if(ur>=Qr){var Es=zr-di;e((Qr=ei).Pb),Qr.wd=Qr.m,Qr.xd=Es,0<Qr.s.ua&&dr(Qr.s.Wa,Qr.s.vb),Qr=ur+hp}if(fr&Fr||(ss=zs(Mr,fr,ur)),e(ss!=null),ss.Qb&&(ri[zr]=ss.qb,us=!0),!us)if(vr(yr),ss.jc){as=yr,Es=ri;var ms=zr,Ls=ss.pd[cr(as)&Sa-1];e(ss.jc),256>Ls.g?(gr(as,as.u+Ls.g),Es[ms]=Ls.value,as=0):(gr(as,as.u+Ls.g-256),e(256<=Ls.value),as=Ls.value),as==0&&(us=!0)}else as=ho(ss.G[0],ss.H[0],yr);if(yr.h)break;if(us||256>as){if(!us)if(ss.nd)ri[zr]=(ss.qb|as<<8)>>>0;else{if(vr(yr),us=ho(ss.G[1],ss.H[1],yr),vr(yr),Es=ho(ss.G[2],ss.H[2],yr),ms=ho(ss.G[3],ss.H[3],yr),yr.h)break;ri[zr]=(ms<<24|us<<16|as<<8|Es)>>>0}if(us=!1,++zr,++fr>=Li&&(fr=0,++ur,or!=null&&ur<=sr&&!(ur%16)&&or(ei,ur),Or!=null))for(;$r<zr;)as=ri[$r++],Or.X[(506832829*as&4294967295)>>>Or.Mb]=as}else if(280>as){if(as=_o(as-256,yr),Es=ho(ss.G[4],ss.H[4],yr),vr(yr),Es=$o(Li,Es=_o(Es,yr)),yr.h)break;if(zr-di<Es||ji-zr<as)break e;for(ms=0;ms<as;++ms)ri[zr+ms]=ri[zr+ms-Es];for(zr+=as,fr+=as;fr>=Li;)fr-=Li,++ur,or!=null&&ur<=sr&&!(ur%16)&&or(ei,ur);if(e(zr<=ji),fr&Fr&&(ss=zs(Mr,fr,ur)),Or!=null)for(;$r<zr;)as=ri[$r++],Or.X[(506832829*as&4294967295)>>>Or.Mb]=as}else{if(!(as<cs))break e;for(us=as-280,e(Or!=null);$r<zr;)as=ri[$r++],Or.X[(506832829*as&4294967295)>>>Or.Mb]=as;as=zr,e(!(us>>>(Es=Or).Xa)),ri[as]=Es.X[us],us=!0}us||e(yr.h==rr(yr))}if(ei.Pb&&yr.h&&zr<ji)e(ei.m.h),ei.a=5,ei.m=ei.wd,ei.$=ei.xd,0<ei.s.ua&&dr(ei.s.vb,ei.s.Wa);else{if(yr.h)break e;or!=null&&or(ei,ur>sr?sr:ur),ei.a=0,ei.$=zr-di}return 1}return ei.a=3,0}function va(ei){e(ei!=null),ei.vc=null,ei.yc=null,ei.Ya=null;var ri=ei.Wa;ri!=null&&(ri.X=null),ei.vb=null,e(ei!=null)}function Aa(){var ei=new Dh;return ei==null?null:(ei.a=0,ei.xb=cf,Ts("Predictor","VP8LPredictors"),Ts("Predictor","VP8LPredictors_C"),Ts("PredictorAdd","VP8LPredictorsAdd"),Ts("PredictorAdd","VP8LPredictorsAdd_C"),Fd=qr,Dc=Kr,Ya=rs,Ga=Ps,_c=Cs,oc=Ns,ac=Rs,fi.VP8LMapColor32b=cu,fi.VP8LMapColor8b=Ud,ei)}function Zl(ei,ri,di,Li,ji){var sr=1,or=[ei],ur=[ri],fr=Li.m,yr=Li.s,Mr=null,zr=0;e:for(;;){if(di)for(;sr&&ar(fr,1);){var $r=or,Br=ur,cs=Li,Qr=1,Or=cs.m,Fr=cs.gc[cs.ab],ss=ar(Or,2);if(cs.Oc&1<<ss)sr=0;else{switch(cs.Oc|=1<<ss,Fr.hc=ss,Fr.Ea=$r[0],Fr.nc=Br[0],Fr.K=[null],++cs.ab,e(4>=cs.ab),ss){case 0:case 1:Fr.b=ar(Or,3)+2,Qr=Zl(Nr(Fr.Ea,Fr.b),Nr(Fr.nc,Fr.b),0,cs,Fr.K),Fr.K=Fr.K[0];break;case 3:var us,as=ar(Or,8)+1,Es=16<as?0:4<as?1:2<as?2:3;if($r[0]=Nr(Fr.Ea,Es),Fr.b=Es,us=Qr=Zl(as,1,0,cs,Fr.K)){var ms,Ls=as,_s=Fr,Xs=1<<(8>>_s.b),Ks=Be(Xs);if(Ks==null)us=0;else{var Ws=_s.K[0],$s=_s.w;for(Ks[0]=_s.K[0][0],ms=1;ms<1*Ls;++ms)Ks[ms]=Pr(Ws[$s+ms],Ks[ms-1]);for(;ms<4*Xs;++ms)Ks[ms]=0;_s.K[0]=null,_s.K[0]=Ks,us=1}}Qr=us;break;case 2:break;default:e(0)}sr=Qr}}if(or=or[0],ur=ur[0],sr&&ar(fr,1)&&!(sr=1<=(zr=ar(fr,4))&&11>=zr)){Li.a=3;break e}var yo;if(yo=sr)t:{var Js,Vs,da,Xa=Li,ha=or,Ka=ur,Zs=zr,hl=di,gl=Xa.m,ma=Xa.s,Pa=[null],Ba=1,xl=0,ic=dp[Zs];n:for(;;){if(hl&&ar(gl,1)){var ya=ar(gl,3)+2,hc=Nr(ha,ya),jc=Nr(Ka,ya),pu=hc*jc;if(!Zl(hc,jc,0,Xa,Pa))break n;for(Pa=Pa[0],ma.xc=ya,Js=0;Js<pu;++Js){var bc=Pa[Js]>>8&65535;Pa[Js]=bc,bc>=Ba&&(Ba=bc+1)}}if(gl.h)break n;for(Vs=0;5>Vs;++Vs){var ia=af[Vs];!Vs&&0<Zs&&(ia+=1<<Zs),xl<ia&&(xl=ia)}var qh=Ue(Ba*ic,li),yf=Ba,vf=Ue(yf,Mi);if(vf==null)var nh=null;else e(65536>=yf),nh=vf;var Xu=Be(xl);if(nh==null||Xu==null||qh==null){Xa.a=1;break n}var ih=qh;for(Js=da=0;Js<Ba;++Js){var Yl=nh[Js],gu=Yl.G,mu=Yl.H,_f=0,rh=1,Cf=0;for(Vs=0;5>Vs;++Vs){ia=af[Vs],gu[Vs]=ih,mu[Vs]=da,!Vs&&0<Zs&&(ia+=1<<Zs);r:{var sh,Wh=ia,oh=Xa,Ku=Xu,Mp=ih,Op=da,Yh=0,Ic=oh.m,kp=ar(Ic,1);if(ke(Ku,0,0,Wh),kp){var Np=ar(Ic,1)+1,Dp=ar(Ic,1),Af=ar(Ic,Dp==0?1:8);Ku[Af]=1,Np==2&&(Ku[Af=ar(Ic,8)]=1);var ah=1}else{var Ef=Be(19),Sf=ar(Ic,4)+4;if(19<Sf){oh.a=3;var lh=0;break r}for(sh=0;sh<Sf;++sh)Ef[cp[sh]]=ar(Ic,3);var Xh=void 0,Zu=void 0,bf=oh,Fp=Ef,ch=Wh,If=Ku,Kh=0,wc=bf.m,wf=8,Pf=Ue(128,li);i:for(;ui(Pf,0,7,Fp,19);){if(ar(wc,1)){var Bp=2+2*ar(wc,3);if((Xh=2+ar(wc,Bp))>ch)break i}else Xh=ch;for(Zu=0;Zu<ch&&Xh--;){vr(wc);var xf=Pf[0+(127&cr(wc))];gr(wc,wc.u+xf.g);var yu=xf.value;if(16>yu)If[Zu++]=yu,yu!=0&&(wf=yu);else{var Up=yu==16,Tf=yu-16,jp=ap[Tf],Lf=ar(wc,op[Tf])+jp;if(Zu+Lf>ch)break i;for(var Vp=Up?wf:0;0<Lf--;)If[Zu++]=Vp}}Kh=1;break i}Kh||(bf.a=3),ah=Kh}(ah=ah&&!Ic.h)&&(Yh=ui(Mp,Op,8,Ku,Wh)),ah&&Yh!=0?lh=Yh:(oh.a=3,lh=0)}if(lh==0)break n;if(rh&&lp[Vs]==1&&(rh=ih[da].g==0),_f+=ih[da].g,da+=lh,3>=Vs){var Qu,Zh=Xu[0];for(Qu=1;Qu<ia;++Qu)Xu[Qu]>Zh&&(Zh=Xu[Qu]);Cf+=Zh}}if(Yl.nd=rh,Yl.Qb=0,rh&&(Yl.qb=(gu[3][mu[3]+0].value<<24|gu[1][mu[1]+0].value<<16|gu[2][mu[2]+0].value)>>>0,_f==0&&256>gu[0][mu[0]+0].value&&(Yl.Qb=1,Yl.qb+=gu[0][mu[0]+0].value<<8)),Yl.jc=!Yl.Qb&&6>Cf,Yl.jc){var uh,fc=Yl;for(uh=0;uh<Sa;++uh){var Pc=uh,xc=fc.pd[Pc],dh=fc.G[0][fc.H[0]+Pc];256<=dh.value?(xc.g=dh.g+256,xc.value=dh.value):(xc.g=0,xc.value=0,Pc>>=Gs(dh,8,xc),Pc>>=Gs(fc.G[1][fc.H[1]+Pc],16,xc),Pc>>=Gs(fc.G[2][fc.H[2]+Pc],0,xc),Gs(fc.G[3][fc.H[3]+Pc],24,xc))}}}ma.vc=Pa,ma.Wb=Ba,ma.Ya=nh,ma.yc=qh,yo=1;break t}yo=0}if(!(sr=yo)){Li.a=3;break e}if(0<zr){if(yr.ua=1<<zr,!mr(yr.Wa,zr)){Li.a=1,sr=0;break e}}else yr.ua=0;var Jh=Li,Rf=or,zp=ur,Qh=Jh.s,ef=Qh.xc;if(Jh.c=Rf,Jh.i=zp,Qh.md=Nr(Rf,ef),Qh.wc=ef==0?-1:(1<<ef)-1,di){Li.xb=_p;break e}if((Mr=Be(or*ur))==null){Li.a=1,sr=0;break e}sr=(sr=Ha(Li,Mr,0,or,ur,ur,null))&&!fr.h;break e}return sr?(ji!=null?ji[0]=Mr:(e(Mr==null),e(di)),Li.$=0,di||va(yr)):va(yr),sr}function Rc(ei,ri){var di=ei.c*ei.i,Li=di+ri+16*ri;return e(ei.c<=ri),ei.V=Be(Li),ei.V==null?(ei.Ta=null,ei.Ua=0,ei.a=1,0):(ei.Ta=ei.V,ei.Ua=ei.Ba+di+ri,1)}function Vc(ei,ri){var di=ei.C,Li=ri-di,ji=ei.V,sr=ei.Ba+ei.c*di;for(e(ri<=ei.l.o);0<Li;){var or=16<Li?16:Li,ur=ei.l.ma,fr=ei.l.width,yr=fr*or,Mr=ur.ca,zr=ur.tb+fr*di,$r=ei.Ta,Br=ei.Ua;Hs(ei,or,ji,sr),oa($r,Br,Mr,zr,yr),za(ur,di,di+or,Mr,zr,fr),Li-=or,ji+=or*ei.c,di+=or}e(di==ri),ei.C=ei.Ma=ri}function zc(){this.ub=this.yd=this.td=this.Rb=0}function $c(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hc(){this.Fb=this.Bb=this.Cb=0,this.Zb=Be(4),this.Lb=Be(4)}function yd(){this.Yb=function(){var ei=[];return function ri(di,Li,ji){for(var sr=ji[Li],or=0;or<sr&&(di.push(ji.length>Li+1?[]:0),!(ji.length<Li+1));or++)ri(di[or],Li+1,ji)}(ei,0,[3,11]),ei}()}function fh(){this.jb=Be(3),this.Wc=je([4,8],yd),this.Xc=je([4,17],yd)}function ph(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Be(4),this.od=new Be(4)}function qc(){this.ld=this.La=this.dd=this.tc=0}function vd(){this.Na=this.la=0}function gh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _u(){this.ad=Be(384),this.Za=0,this.Ob=Be(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mh(){this.uc=this.M=this.Nb=0,this.wa=Array(new qc),this.Y=0,this.ya=Array(new _u),this.aa=0,this.l=new Wc}function _d(){this.y=Be(16),this.f=Be(8),this.ea=Be(8)}function yh(){this.cb=this.a=0,this.sc="",this.m=new wr,this.Od=new zc,this.Kc=new $c,this.ed=new ph,this.Qa=new Hc,this.Ic=this.$c=this.Aa=0,this.D=new mh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Ue(8,wr),this.ia=0,this.pb=Ue(4,gh),this.Pa=new fh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _d),this.Hd=0,this.rb=Array(new vd),this.sb=0,this.wa=Array(new qc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _u),this.L=this.aa=0,this.gd=je([4,2],qc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vh(){var ei=new yh;return ei!=null&&(ei.a=0,ei.sc="OK",ei.cb=0,ei.Xb=0,Wu||(Wu=Ed)),ei}function ra(ei,ri,di){return ei.a==0&&(ei.a=ri,ei.sc=di,ei.cb=0),0}function Cd(ei,ri,di){return 3<=di&&ei[ri+0]==157&&ei[ri+1]==1&&ei[ri+2]==42}function Ad(ei,ri){if(ei==null)return 0;if(ei.a=0,ei.sc="OK",ri==null)return ra(ei,2,"null VP8Io passed to VP8GetHeaders()");var di=ri.data,Li=ri.w,ji=ri.ha;if(4>ji)return ra(ei,7,"Truncated header.");var sr=di[Li+0]|di[Li+1]<<8|di[Li+2]<<16,or=ei.Od;if(or.Rb=!(1&sr),or.td=sr>>1&7,or.yd=sr>>4&1,or.ub=sr>>5,3<or.td)return ra(ei,3,"Incorrect keyframe parameters.");if(!or.yd)return ra(ei,4,"Frame not displayable.");Li+=3,ji-=3;var ur=ei.Kc;if(or.Rb){if(7>ji)return ra(ei,7,"cannot parse picture header");if(!Cd(di,Li,ji))return ra(ei,3,"Bad code word");ur.c=16383&(di[Li+4]<<8|di[Li+3]),ur.Td=di[Li+4]>>6,ur.i=16383&(di[Li+6]<<8|di[Li+5]),ur.Ud=di[Li+6]>>6,Li+=7,ji-=7,ei.za=ur.c+15>>4,ei.Ub=ur.i+15>>4,ri.width=ur.c,ri.height=ur.i,ri.Da=0,ri.j=0,ri.v=0,ri.va=ri.width,ri.o=ri.height,ri.da=0,ri.ib=ri.width,ri.hb=ri.height,ri.U=ri.width,ri.T=ri.height,ke((sr=ei.Pa).jb,0,255,sr.jb.length),e((sr=ei.Qa)!=null),sr.Cb=0,sr.Bb=0,sr.Fb=1,ke(sr.Zb,0,0,sr.Zb.length),ke(sr.Lb,0,0,sr.Lb)}if(or.ub>ji)return ra(ei,7,"bad partition length");Bi(sr=ei.m,di,Li,or.ub),Li+=or.ub,ji-=or.ub,or.Rb&&(ur.Ld=_r(sr),ur.Kd=_r(sr)),ur=ei.Qa;var fr,yr=ei.Pa;if(e(sr!=null),e(ur!=null),ur.Cb=_r(sr),ur.Cb){if(ur.Bb=_r(sr),_r(sr)){for(ur.Fb=_r(sr),fr=0;4>fr;++fr)ur.Zb[fr]=_r(sr)?nr(sr,7):0;for(fr=0;4>fr;++fr)ur.Lb[fr]=_r(sr)?nr(sr,6):0}if(ur.Bb)for(fr=0;3>fr;++fr)yr.jb[fr]=_r(sr)?er(sr,8):255}else ur.Bb=0;if(sr.Ka)return ra(ei,3,"cannot parse segment header");if((ur=ei.ed).zd=_r(sr),ur.Tb=er(sr,6),ur.wb=er(sr,3),ur.Pc=_r(sr),ur.Pc&&_r(sr)){for(yr=0;4>yr;++yr)_r(sr)&&(ur.vd[yr]=nr(sr,6));for(yr=0;4>yr;++yr)_r(sr)&&(ur.od[yr]=nr(sr,6))}if(ei.L=ur.Tb==0?0:ur.zd?1:2,sr.Ka)return ra(ei,3,"cannot parse filter header");var Mr=ji;if(ji=fr=Li,Li=fr+Mr,ur=Mr,ei.Xb=(1<<er(ei.m,2))-1,Mr<3*(yr=ei.Xb))di=7;else{for(fr+=3*yr,ur-=3*yr,Mr=0;Mr<yr;++Mr){var zr=di[ji+0]|di[ji+1]<<8|di[ji+2]<<16;zr>ur&&(zr=ur),Bi(ei.Jc[+Mr],di,fr,zr),fr+=zr,ur-=zr,ji+=3}Bi(ei.Jc[+yr],di,fr,ur),di=fr<Li?0:5}if(di!=0)return ra(ei,di,"cannot parse partitions");for(di=er(fr=ei.m,7),ji=_r(fr)?nr(fr,4):0,Li=_r(fr)?nr(fr,4):0,ur=_r(fr)?nr(fr,4):0,yr=_r(fr)?nr(fr,4):0,fr=_r(fr)?nr(fr,4):0,Mr=ei.Qa,zr=0;4>zr;++zr){if(Mr.Cb){var $r=Mr.Zb[zr];Mr.Fb||($r+=di)}else{if(0<zr){ei.pb[zr]=ei.pb[0];continue}$r=di}var Br=ei.pb[zr];Br.Sc[0]=zh[Ja($r+ji,127)],Br.Sc[1]=$h[Ja($r+0,127)],Br.Eb[0]=2*zh[Ja($r+Li,127)],Br.Eb[1]=101581*$h[Ja($r+ur,127)]>>16,8>Br.Eb[1]&&(Br.Eb[1]=8),Br.Qc[0]=zh[Ja($r+yr,117)],Br.Qc[1]=$h[Ja($r+fr,127)],Br.lc=$r+fr}if(!or.Rb)return ra(ei,4,"Not a key frame.");for(_r(sr),or=ei.Pa,di=0;4>di;++di){for(ji=0;8>ji;++ji)for(Li=0;3>Li;++Li)for(ur=0;11>ur;++ur)yr=Ar(sr,yp[di][ji][Li][ur])?er(sr,8):gp[di][ji][Li][ur],or.Wc[di][ji].Yb[Li][ur]=yr;for(ji=0;17>ji;++ji)or.Xc[di][ji]=or.Wc[di][vp[ji]]}return ei.kc=_r(sr),ei.kc&&(ei.Bd=er(sr,8)),ei.cb=1}function Ed(ei,ri,di,Li,ji,sr,or){var ur=ri[ji].Yb[di];for(di=0;16>ji;++ji){if(!Ar(ei,ur[di+0]))return ji;for(;!Ar(ei,ur[di+1]);)if(ur=ri[++ji].Yb[0],di=0,ji==16)return 16;var fr=ri[ji+1].Yb;if(Ar(ei,ur[di+2])){var yr=ei,Mr=0;if(Ar(yr,($r=ur)[(zr=di)+3]))if(Ar(yr,$r[zr+6])){for(ur=0,zr=2*(Mr=Ar(yr,$r[zr+8]))+($r=Ar(yr,$r[zr+9+Mr])),Mr=0,$r=fp[zr];$r[ur];++ur)Mr+=Mr+Ar(yr,$r[ur]);Mr+=3+(8<<zr)}else Ar(yr,$r[zr+7])?(Mr=7+2*Ar(yr,165),Mr+=Ar(yr,145)):Mr=5+Ar(yr,159);else Mr=Ar(yr,$r[zr+4])?3+Ar(yr,$r[zr+5]):2;ur=fr[2]}else Mr=1,ur=fr[1];fr=or+pp[ji],0>(yr=ei).b&&pr(yr);var zr,$r=yr.b,Br=(zr=yr.Ca>>1)-(yr.I>>$r)>>31;--yr.b,yr.Ca+=Br,yr.Ca|=1,yr.I-=(zr+1&Br)<<$r,sr[fr]=((Mr^Br)-Br)*Li[(0<ji)+0]}return 16}function Au(ei){var ri=ei.rb[ei.sb-1];ri.la=0,ri.Na=0,ke(ei.zc,0,0,ei.zc.length),ei.ja=0}function _h(ei,ri){if(ei==null)return 0;if(ri==null)return ra(ei,2,"NULL VP8Io parameter in VP8Decode().");if(!ei.cb&&!Ad(ei,ri))return 0;if(e(ei.cb),ri.ac==null||ri.ac(ri)){ri.ob&&(ei.L=0);var di=th[ei.L];if(ei.L==2?(ei.yb=0,ei.zb=0):(ei.yb=ri.v-di>>4,ei.zb=ri.j-di>>4,0>ei.yb&&(ei.yb=0),0>ei.zb&&(ei.zb=0)),ei.Va=ri.o+15+di>>4,ei.Hb=ri.va+15+di>>4,ei.Hb>ei.za&&(ei.Hb=ei.za),ei.Va>ei.Ub&&(ei.Va=ei.Ub),0<ei.L){var Li=ei.ed;for(di=0;4>di;++di){var ji;if(ei.Qa.Cb){var sr=ei.Qa.Lb[di];ei.Qa.Fb||(sr+=Li.Tb)}else sr=Li.Tb;for(ji=0;1>=ji;++ji){var or=ei.gd[di][ji],ur=sr;if(Li.Pc&&(ur+=Li.vd[0],ji&&(ur+=Li.od[0])),0<(ur=0>ur?0:63<ur?63:ur)){var fr=ur;0<Li.wb&&(fr=4<Li.wb?fr>>2:fr>>1)>9-Li.wb&&(fr=9-Li.wb),1>fr&&(fr=1),or.dd=fr,or.tc=2*ur+fr,or.ld=40<=ur?2:15<=ur?1:0}else or.tc=0;or.La=ji}}}di=0}else ra(ei,6,"Frame setup failed"),di=ei.a;if(di=di==0){if(di){ei.$c=0,0<ei.Aa||(ei.Ic=Rp);e:{di=ei.Ic,Li=4*(fr=ei.za);var yr=32*fr,Mr=fr+1,zr=0<ei.L?fr*(0<ei.Aa?2:1):0,$r=(ei.Aa==2?2:1)*fr;if((or=Li+832+(ji=3*(16*di+th[ei.L])/2*yr)+(sr=ei.Fa!=null&&0<ei.Fa.length?ei.Kc.c*ei.Kc.i:0))!=or)di=0;else{if(or>ei.Vb){if(ei.Vb=0,ei.Ec=Be(or),ei.Fc=0,ei.Ec==null){di=ra(ei,1,"no memory during frame initialization.");break e}ei.Vb=or}or=ei.Ec,ur=ei.Fc,ei.Ac=or,ei.Bc=ur,ur+=Li,ei.Gd=Ue(yr,_d),ei.Hd=0,ei.rb=Ue(Mr+1,vd),ei.sb=1,ei.wa=zr?Ue(zr,qc):null,ei.Y=0,ei.D.Nb=0,ei.D.wa=ei.wa,ei.D.Y=ei.Y,0<ei.Aa&&(ei.D.Y+=fr),e(!0),ei.oc=or,ei.pc=ur,ur+=832,ei.ya=Ue($r,_u),ei.aa=0,ei.D.ya=ei.ya,ei.D.aa=ei.aa,ei.Aa==2&&(ei.D.aa+=fr),ei.R=16*fr,ei.B=8*fr,fr=(yr=th[ei.L])*ei.R,yr=yr/2*ei.B,ei.sa=or,ei.ta=ur+fr,ei.qa=ei.sa,ei.ra=ei.ta+16*di*ei.R+yr,ei.Ha=ei.qa,ei.Ia=ei.ra+8*di*ei.B+yr,ei.$c=0,ur+=ji,ei.mb=sr?or:null,ei.nb=sr?ur:null,e(ur+sr<=ei.Fc+ei.Vb),Au(ei),ke(ei.Ac,ei.Bc,0,Li),di=1}}if(di){if(ri.ka=0,ri.y=ei.sa,ri.O=ei.ta,ri.f=ei.qa,ri.N=ei.ra,ri.ea=ei.Ha,ri.Vd=ei.Ia,ri.fa=ei.R,ri.Rc=ei.B,ri.F=null,ri.J=0,!zd){for(di=-255;255>=di;++di)fa[255+di]=0>di?-di:di;for(di=-1020;1020>=di;++di)uc[1020+di]=-128>di?-128:127<di?127:di;for(di=-112;112>=di;++di)qu[112+di]=-16>di?-16:15<di?15:di;for(di=-255;510>=di;++di)fu[255+di]=0>di?0:255<di?255:di;zd=1}uu=Eh,cc=Ch,zu=bd,Fa=Ah,vl=Id,sa=Sd,du=xu,Vd=kc,$u=Nh,Gc=Lu,Fc=kh,Cc=Qc,Bc=Ru,hu=Nd,Uc=kd,Ac=tc,Hu=sc,_l=Oh,$l[0]=Jl,$l[1]=Sh,$l[2]=Ph,$l[3]=xh,$l[4]=xd,$l[5]=Zc,$l[6]=Td,$l[7]=bu,$l[8]=Lh,$l[9]=Th,Ec[0]=wd,Ec[1]=Ih,Ec[2]=rc,Ec[3]=Xc,Ec[4]=La,Ec[5]=wh,Ec[6]=Pd,dc[0]=gc,dc[1]=bh,dc[2]=Rh,dc[3]=wu,dc[4]=Oc,dc[5]=Mh,dc[6]=Pu,di=1}else di=0}di&&(di=function(Br,cs){for(Br.M=0;Br.M<Br.Va;++Br.M){var Qr,Or=Br.Jc[Br.M&Br.Xb],Fr=Br.m,ss=Br;for(Qr=0;Qr<ss.za;++Qr){var us=Fr,as=ss,Es=as.Ac,ms=as.Bc+4*Qr,Ls=as.zc,_s=as.ya[as.aa+Qr];if(as.Qa.Bb?_s.$b=Ar(us,as.Pa.jb[0])?2+Ar(us,as.Pa.jb[2]):Ar(us,as.Pa.jb[1]):_s.$b=0,as.kc&&(_s.Ad=Ar(us,as.Bd)),_s.Za=!Ar(us,145)+0,_s.Za){var Xs=_s.Ob,Ks=0;for(as=0;4>as;++as){var Ws,$s=Ls[0+as];for(Ws=0;4>Ws;++Ws){$s=mp[Es[ms+Ws]][$s];for(var yo=lf[Ar(us,$s[0])];0<yo;)yo=lf[2*yo+Ar(us,$s[yo])];$s=-yo,Es[ms+Ws]=$s}Oe(Xs,Ks,Es,ms,4),Ks+=4,Ls[0+as]=$s}}else $s=Ar(us,156)?Ar(us,128)?1:3:Ar(us,163)?2:0,_s.Ob[0]=$s,ke(Es,ms,$s,4),ke(Ls,0,$s,4);_s.Dd=Ar(us,142)?Ar(us,114)?Ar(us,183)?1:3:2:0}if(ss.m.Ka)return ra(Br,7,"Premature end-of-partition0 encountered.");for(;Br.ja<Br.za;++Br.ja){if(ss=Or,us=(Fr=Br).rb[Fr.sb-1],Es=Fr.rb[Fr.sb+Fr.ja],Qr=Fr.ya[Fr.aa+Fr.ja],ms=Fr.kc?Qr.Ad:0)us.la=Es.la=0,Qr.Za||(us.Na=Es.Na=0),Qr.Hc=0,Qr.Gc=0,Qr.ia=0;else{var Js,Vs;if(us=Es,Es=ss,ms=Fr.Pa.Xc,Ls=Fr.ya[Fr.aa+Fr.ja],_s=Fr.pb[Ls.$b],as=Ls.ad,Xs=0,Ks=Fr.rb[Fr.sb-1],$s=Ws=0,ke(as,Xs,0,384),Ls.Za)var da=0,Xa=ms[3];else{yo=Be(16);var ha=us.Na+Ks.Na;if(ha=Wu(Es,ms[1],ha,_s.Eb,0,yo,0),us.Na=Ks.Na=(0<ha)+0,1<ha)uu(yo,0,as,Xs);else{var Ka=yo[0]+3>>3;for(yo=0;256>yo;yo+=16)as[Xs+yo]=Ka}da=1,Xa=ms[0]}var Zs=15&us.la,hl=15&Ks.la;for(yo=0;4>yo;++yo){var gl=1&hl;for(Ka=Vs=0;4>Ka;++Ka)Zs=Zs>>1|(gl=(ha=Wu(Es,Xa,ha=gl+(1&Zs),_s.Sc,da,as,Xs))>da)<<7,Vs=Vs<<2|(3<ha?3:1<ha?2:as[Xs+0]!=0),Xs+=16;Zs>>=4,hl=hl>>1|gl<<7,Ws=(Ws<<8|Vs)>>>0}for(Xa=Zs,da=hl>>4,Js=0;4>Js;Js+=2){for(Vs=0,Zs=us.la>>4+Js,hl=Ks.la>>4+Js,yo=0;2>yo;++yo){for(gl=1&hl,Ka=0;2>Ka;++Ka)ha=gl+(1&Zs),Zs=Zs>>1|(gl=0<(ha=Wu(Es,ms[2],ha,_s.Qc,0,as,Xs)))<<3,Vs=Vs<<2|(3<ha?3:1<ha?2:as[Xs+0]!=0),Xs+=16;Zs>>=2,hl=hl>>1|gl<<5}$s|=Vs<<4*Js,Xa|=Zs<<4<<Js,da|=(240&hl)<<Js}us.la=Xa,Ks.la=da,Ls.Hc=Ws,Ls.Gc=$s,Ls.ia=43690&$s?0:_s.ia,ms=!(Ws|$s)}if(0<Fr.L&&(Fr.wa[Fr.Y+Fr.ja]=Fr.gd[Qr.$b][Qr.Za],Fr.wa[Fr.Y+Fr.ja].La|=!ms),ss.Ka)return ra(Br,7,"Premature end-of-file encountered.")}if(Au(Br),Fr=cs,ss=1,Qr=(Or=Br).D,us=0<Or.L&&Or.M>=Or.zb&&Or.M<=Or.Va,Or.Aa==0)e:{if(Qr.M=Or.M,Qr.uc=us,Fu(Or,Qr),ss=1,Qr=(Vs=Or.D).Nb,us=($s=th[Or.L])*Or.R,Es=$s/2*Or.B,yo=16*Qr*Or.R,Ka=8*Qr*Or.B,ms=Or.sa,Ls=Or.ta-us+yo,_s=Or.qa,as=Or.ra-Es+Ka,Xs=Or.Ha,Ks=Or.Ia-Es+Ka,hl=(Zs=Vs.M)==0,Ws=Zs>=Or.Va-1,Or.Aa==2&&Fu(Or,Vs),Vs.uc)for(gl=(ha=Or).D.M,e(ha.D.uc),Vs=ha.yb;Vs<ha.Hb;++Vs){da=Vs,Xa=gl;var ma=(Pa=(ia=ha).D).Nb;Js=ia.R;var Pa=Pa.wa[Pa.Y+da],Ba=ia.sa,xl=ia.ta+16*ma*Js+16*da,ic=Pa.dd,ya=Pa.tc;if(ya!=0)if(e(3<=ya),ia.L==1)0<da&&Ac(Ba,xl,Js,ya+4),Pa.La&&_l(Ba,xl,Js,ya),0<Xa&&Uc(Ba,xl,Js,ya+4),Pa.La&&Hu(Ba,xl,Js,ya);else{var hc=ia.B,jc=ia.qa,pu=ia.ra+8*ma*hc+8*da,bc=ia.Ha,ia=ia.Ia+8*ma*hc+8*da;ma=Pa.ld,0<da&&(Vd(Ba,xl,Js,ya+4,ic,ma),Gc(jc,pu,bc,ia,hc,ya+4,ic,ma)),Pa.La&&(Cc(Ba,xl,Js,ya,ic,ma),hu(jc,pu,bc,ia,hc,ya,ic,ma)),0<Xa&&(du(Ba,xl,Js,ya+4,ic,ma),$u(jc,pu,bc,ia,hc,ya+4,ic,ma)),Pa.La&&(Fc(Ba,xl,Js,ya,ic,ma),Bc(jc,pu,bc,ia,hc,ya,ic,ma))}}if(Or.ia&&alert("todo:DitherRow"),Fr.put!=null){if(Vs=16*Zs,Zs=16*(Zs+1),hl?(Fr.y=Or.sa,Fr.O=Or.ta+yo,Fr.f=Or.qa,Fr.N=Or.ra+Ka,Fr.ea=Or.Ha,Fr.W=Or.Ia+Ka):(Vs-=$s,Fr.y=ms,Fr.O=Ls,Fr.f=_s,Fr.N=as,Fr.ea=Xs,Fr.W=Ks),Ws||(Zs-=$s),Zs>Fr.o&&(Zs=Fr.o),Fr.F=null,Fr.J=null,Or.Fa!=null&&0<Or.Fa.length&&Vs<Zs&&(Fr.J=Nu(Or,Fr,Vs,Zs-Vs),Fr.F=Or.mb,Fr.F==null&&Fr.F.length==0)){ss=ra(Or,3,"Could not decode alpha data.");break e}Vs<Fr.j&&($s=Fr.j-Vs,Vs=Fr.j,e(!(1&$s)),Fr.O+=Or.R*$s,Fr.N+=Or.B*($s>>1),Fr.W+=Or.B*($s>>1),Fr.F!=null&&(Fr.J+=Fr.width*$s)),Vs<Zs&&(Fr.O+=Fr.v,Fr.N+=Fr.v>>1,Fr.W+=Fr.v>>1,Fr.F!=null&&(Fr.J+=Fr.v),Fr.ka=Vs-Fr.j,Fr.U=Fr.va-Fr.v,Fr.T=Zs-Vs,ss=Fr.put(Fr))}Qr+1!=Or.Ic||Ws||(Oe(Or.sa,Or.ta-us,ms,Ls+16*Or.R,us),Oe(Or.qa,Or.ra-Es,_s,as+8*Or.B,Es),Oe(Or.Ha,Or.Ia-Es,Xs,Ks+8*Or.B,Es))}if(!ss)return ra(Br,6,"Output aborted.")}return 1}(ei,ri)),ri.bc!=null&&ri.bc(ri),di&=1}return di?(ei.cb=0,di):0}function kl(ei,ri,di,Li,ji){ji=ei[ri+di+32*Li]+(ji>>3),ei[ri+di+32*Li]=-256&ji?0>ji?0:255:ji}function Yc(ei,ri,di,Li,ji,sr){kl(ei,ri,0,di,Li+ji),kl(ei,ri,1,di,Li+sr),kl(ei,ri,2,di,Li-sr),kl(ei,ri,3,di,Li-ji)}function qa(ei){return(20091*ei>>16)+ei}function Eu(ei,ri,di,Li){var ji,sr=0,or=Be(16);for(ji=0;4>ji;++ji){var ur=ei[ri+0]+ei[ri+8],fr=ei[ri+0]-ei[ri+8],yr=(35468*ei[ri+4]>>16)-qa(ei[ri+12]),Mr=qa(ei[ri+4])+(35468*ei[ri+12]>>16);or[sr+0]=ur+Mr,or[sr+1]=fr+yr,or[sr+2]=fr-yr,or[sr+3]=ur-Mr,sr+=4,ri++}for(ji=sr=0;4>ji;++ji)ur=(ei=or[sr+0]+4)+or[sr+8],fr=ei-or[sr+8],yr=(35468*or[sr+4]>>16)-qa(or[sr+12]),kl(di,Li,0,0,ur+(Mr=qa(or[sr+4])+(35468*or[sr+12]>>16))),kl(di,Li,1,0,fr+yr),kl(di,Li,2,0,fr-yr),kl(di,Li,3,0,ur-Mr),sr++,Li+=32}function Sd(ei,ri,di,Li){var ji=ei[ri+0]+4,sr=35468*ei[ri+4]>>16,or=qa(ei[ri+4]),ur=35468*ei[ri+1]>>16;Yc(di,Li,0,ji+or,ei=qa(ei[ri+1]),ur),Yc(di,Li,1,ji+sr,ei,ur),Yc(di,Li,2,ji-sr,ei,ur),Yc(di,Li,3,ji-or,ei,ur)}function Ch(ei,ri,di,Li,ji){Eu(ei,ri,di,Li),ji&&Eu(ei,ri+16,di,Li+4)}function bd(ei,ri,di,Li){cc(ei,ri+0,di,Li,1),cc(ei,ri+32,di,Li+128,1)}function Ah(ei,ri,di,Li){var ji;for(ei=ei[ri+0]+4,ji=0;4>ji;++ji)for(ri=0;4>ri;++ri)kl(di,Li,ri,ji,ei)}function Id(ei,ri,di,Li){ei[ri+0]&&Fa(ei,ri+0,di,Li),ei[ri+16]&&Fa(ei,ri+16,di,Li+4),ei[ri+32]&&Fa(ei,ri+32,di,Li+128),ei[ri+48]&&Fa(ei,ri+48,di,Li+128+4)}function Eh(ei,ri,di,Li){var ji,sr=Be(16);for(ji=0;4>ji;++ji){var or=ei[ri+0+ji]+ei[ri+12+ji],ur=ei[ri+4+ji]+ei[ri+8+ji],fr=ei[ri+4+ji]-ei[ri+8+ji],yr=ei[ri+0+ji]-ei[ri+12+ji];sr[0+ji]=or+ur,sr[8+ji]=or-ur,sr[4+ji]=yr+fr,sr[12+ji]=yr-fr}for(ji=0;4>ji;++ji)or=(ei=sr[0+4*ji]+3)+sr[3+4*ji],ur=sr[1+4*ji]+sr[2+4*ji],fr=sr[1+4*ji]-sr[2+4*ji],yr=ei-sr[3+4*ji],di[Li+0]=or+ur>>3,di[Li+16]=yr+fr>>3,di[Li+32]=or-ur>>3,di[Li+48]=yr-fr>>3,Li+=64}function Su(ei,ri,di){var Li,ji=ri-32,sr=Qa,or=255-ei[ji-1];for(Li=0;Li<di;++Li){var ur,fr=sr,yr=or+ei[ri-1];for(ur=0;ur<di;++ur)ei[ri+ur]=fr[yr+ei[ji+ur]];ri+=32}}function Sh(ei,ri){Su(ei,ri,4)}function bh(ei,ri){Su(ei,ri,8)}function Ih(ei,ri){Su(ei,ri,16)}function rc(ei,ri){var di;for(di=0;16>di;++di)Oe(ei,ri+32*di,ei,ri-32,16)}function Xc(ei,ri){var di;for(di=16;0<di;--di)ke(ei,ri,ei[ri-1],16),ri+=32}function Kc(ei,ri,di){var Li;for(Li=0;16>Li;++Li)ke(ri,di+32*Li,ei,16)}function wd(ei,ri){var di,Li=16;for(di=0;16>di;++di)Li+=ei[ri-1+32*di]+ei[ri+di-32];Kc(Li>>5,ei,ri)}function La(ei,ri){var di,Li=8;for(di=0;16>di;++di)Li+=ei[ri-1+32*di];Kc(Li>>4,ei,ri)}function wh(ei,ri){var di,Li=8;for(di=0;16>di;++di)Li+=ei[ri+di-32];Kc(Li>>4,ei,ri)}function Pd(ei,ri){Kc(128,ei,ri)}function Fs(ei,ri,di){return ei+2*ri+di+2>>2}function Ph(ei,ri){var di,Li=ri-32;for(Li=new Uint8Array([Fs(ei[Li-1],ei[Li+0],ei[Li+1]),Fs(ei[Li+0],ei[Li+1],ei[Li+2]),Fs(ei[Li+1],ei[Li+2],ei[Li+3]),Fs(ei[Li+2],ei[Li+3],ei[Li+4])]),di=0;4>di;++di)Oe(ei,ri+32*di,Li,0,Li.length)}function xh(ei,ri){var di=ei[ri-1],Li=ei[ri-1+32],ji=ei[ri-1+64],sr=ei[ri-1+96];Sr(ei,ri+0,16843009*Fs(ei[ri-1-32],di,Li)),Sr(ei,ri+32,16843009*Fs(di,Li,ji)),Sr(ei,ri+64,16843009*Fs(Li,ji,sr)),Sr(ei,ri+96,16843009*Fs(ji,sr,sr))}function Jl(ei,ri){var di,Li=4;for(di=0;4>di;++di)Li+=ei[ri+di-32]+ei[ri-1+32*di];for(Li>>=3,di=0;4>di;++di)ke(ei,ri+32*di,Li,4)}function xd(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],sr=ei[ri-1-32],or=ei[ri+0-32],ur=ei[ri+1-32],fr=ei[ri+2-32],yr=ei[ri+3-32];ei[ri+0+96]=Fs(Li,ji,ei[ri-1+96]),ei[ri+1+96]=ei[ri+0+64]=Fs(di,Li,ji),ei[ri+2+96]=ei[ri+1+64]=ei[ri+0+32]=Fs(sr,di,Li),ei[ri+3+96]=ei[ri+2+64]=ei[ri+1+32]=ei[ri+0+0]=Fs(or,sr,di),ei[ri+3+64]=ei[ri+2+32]=ei[ri+1+0]=Fs(ur,or,sr),ei[ri+3+32]=ei[ri+2+0]=Fs(fr,ur,or),ei[ri+3+0]=Fs(yr,fr,ur)}function Td(ei,ri){var di=ei[ri+1-32],Li=ei[ri+2-32],ji=ei[ri+3-32],sr=ei[ri+4-32],or=ei[ri+5-32],ur=ei[ri+6-32],fr=ei[ri+7-32];ei[ri+0+0]=Fs(ei[ri+0-32],di,Li),ei[ri+1+0]=ei[ri+0+32]=Fs(di,Li,ji),ei[ri+2+0]=ei[ri+1+32]=ei[ri+0+64]=Fs(Li,ji,sr),ei[ri+3+0]=ei[ri+2+32]=ei[ri+1+64]=ei[ri+0+96]=Fs(ji,sr,or),ei[ri+3+32]=ei[ri+2+64]=ei[ri+1+96]=Fs(sr,or,ur),ei[ri+3+64]=ei[ri+2+96]=Fs(or,ur,fr),ei[ri+3+96]=Fs(ur,fr,fr)}function Zc(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],sr=ei[ri-1-32],or=ei[ri+0-32],ur=ei[ri+1-32],fr=ei[ri+2-32],yr=ei[ri+3-32];ei[ri+0+0]=ei[ri+1+64]=sr+or+1>>1,ei[ri+1+0]=ei[ri+2+64]=or+ur+1>>1,ei[ri+2+0]=ei[ri+3+64]=ur+fr+1>>1,ei[ri+3+0]=fr+yr+1>>1,ei[ri+0+96]=Fs(ji,Li,di),ei[ri+0+64]=Fs(Li,di,sr),ei[ri+0+32]=ei[ri+1+96]=Fs(di,sr,or),ei[ri+1+32]=ei[ri+2+96]=Fs(sr,or,ur),ei[ri+2+32]=ei[ri+3+96]=Fs(or,ur,fr),ei[ri+3+32]=Fs(ur,fr,yr)}function bu(ei,ri){var di=ei[ri+0-32],Li=ei[ri+1-32],ji=ei[ri+2-32],sr=ei[ri+3-32],or=ei[ri+4-32],ur=ei[ri+5-32],fr=ei[ri+6-32],yr=ei[ri+7-32];ei[ri+0+0]=di+Li+1>>1,ei[ri+1+0]=ei[ri+0+64]=Li+ji+1>>1,ei[ri+2+0]=ei[ri+1+64]=ji+sr+1>>1,ei[ri+3+0]=ei[ri+2+64]=sr+or+1>>1,ei[ri+0+32]=Fs(di,Li,ji),ei[ri+1+32]=ei[ri+0+96]=Fs(Li,ji,sr),ei[ri+2+32]=ei[ri+1+96]=Fs(ji,sr,or),ei[ri+3+32]=ei[ri+2+96]=Fs(sr,or,ur),ei[ri+3+64]=Fs(or,ur,fr),ei[ri+3+96]=Fs(ur,fr,yr)}function Th(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],sr=ei[ri-1+96];ei[ri+0+0]=di+Li+1>>1,ei[ri+2+0]=ei[ri+0+32]=Li+ji+1>>1,ei[ri+2+32]=ei[ri+0+64]=ji+sr+1>>1,ei[ri+1+0]=Fs(di,Li,ji),ei[ri+3+0]=ei[ri+1+32]=Fs(Li,ji,sr),ei[ri+3+32]=ei[ri+1+64]=Fs(ji,sr,sr),ei[ri+3+64]=ei[ri+2+64]=ei[ri+0+96]=ei[ri+1+96]=ei[ri+2+96]=ei[ri+3+96]=sr}function Lh(ei,ri){var di=ei[ri-1+0],Li=ei[ri-1+32],ji=ei[ri-1+64],sr=ei[ri-1+96],or=ei[ri-1-32],ur=ei[ri+0-32],fr=ei[ri+1-32],yr=ei[ri+2-32];ei[ri+0+0]=ei[ri+2+32]=di+or+1>>1,ei[ri+0+32]=ei[ri+2+64]=Li+di+1>>1,ei[ri+0+64]=ei[ri+2+96]=ji+Li+1>>1,ei[ri+0+96]=sr+ji+1>>1,ei[ri+3+0]=Fs(ur,fr,yr),ei[ri+2+0]=Fs(or,ur,fr),ei[ri+1+0]=ei[ri+3+32]=Fs(di,or,ur),ei[ri+1+32]=ei[ri+3+64]=Fs(Li,di,or),ei[ri+1+64]=ei[ri+3+96]=Fs(ji,Li,di),ei[ri+1+96]=Fs(sr,ji,Li)}function Rh(ei,ri){var di;for(di=0;8>di;++di)Oe(ei,ri+32*di,ei,ri-32,8)}function wu(ei,ri){var di;for(di=0;8>di;++di)ke(ei,ri,ei[ri-1],8),ri+=32}function Mc(ei,ri,di){var Li;for(Li=0;8>Li;++Li)ke(ri,di+32*Li,ei,8)}function gc(ei,ri){var di,Li=8;for(di=0;8>di;++di)Li+=ei[ri+di-32]+ei[ri-1+32*di];Mc(Li>>4,ei,ri)}function Mh(ei,ri){var di,Li=4;for(di=0;8>di;++di)Li+=ei[ri+di-32];Mc(Li>>3,ei,ri)}function Oc(ei,ri){var di,Li=4;for(di=0;8>di;++di)Li+=ei[ri-1+32*di];Mc(Li>>3,ei,ri)}function Pu(ei,ri){Mc(128,ei,ri)}function Jc(ei,ri,di){var Li=ei[ri-di],ji=ei[ri+0],sr=3*(ji-Li)+Fh[1020+ei[ri-2*di]-ei[ri+di]],or=$d[112+(sr+4>>3)];ei[ri-di]=Qa[255+Li+$d[112+(sr+3>>3)]],ei[ri+0]=Qa[255+ji-or]}function Ld(ei,ri,di,Li){var ji=ei[ri+0],sr=ei[ri+di];return Il[255+ei[ri-2*di]-ei[ri-di]]>Li||Il[255+sr-ji]>Li}function Rd(ei,ri,di,Li){return 4*Il[255+ei[ri-di]-ei[ri+0]]+Il[255+ei[ri-2*di]-ei[ri+di]]<=Li}function Md(ei,ri,di,Li,ji){var sr=ei[ri-3*di],or=ei[ri-2*di],ur=ei[ri-di],fr=ei[ri+0],yr=ei[ri+di],Mr=ei[ri+2*di],zr=ei[ri+3*di];return 4*Il[255+ur-fr]+Il[255+or-yr]>Li?0:Il[255+ei[ri-4*di]-sr]<=ji&&Il[255+sr-or]<=ji&&Il[255+or-ur]<=ji&&Il[255+zr-Mr]<=ji&&Il[255+Mr-yr]<=ji&&Il[255+yr-fr]<=ji}function kd(ei,ri,di,Li){var ji=2*Li+1;for(Li=0;16>Li;++Li)Rd(ei,ri+Li,di,ji)&&Jc(ei,ri+Li,di)}function tc(ei,ri,di,Li){var ji=2*Li+1;for(Li=0;16>Li;++Li)Rd(ei,ri+Li*di,1,ji)&&Jc(ei,ri+Li*di,1)}function sc(ei,ri,di,Li){var ji;for(ji=3;0<ji;--ji)kd(ei,ri+=4*di,di,Li)}function Oh(ei,ri,di,Li){var ji;for(ji=3;0<ji;--ji)tc(ei,ri+=4,di,Li)}function mc(ei,ri,di,Li,ji,sr,or,ur){for(sr=2*sr+1;0<ji--;){if(Md(ei,ri,di,sr,or))if(Ld(ei,ri,di,ur))Jc(ei,ri,di);else{var fr=ei,yr=ri,Mr=di,zr=fr[yr-2*Mr],$r=fr[yr-Mr],Br=fr[yr+0],cs=fr[yr+Mr],Qr=fr[yr+2*Mr],Or=27*(ss=Fh[1020+3*(Br-$r)+Fh[1020+zr-cs]])+63>>7,Fr=18*ss+63>>7,ss=9*ss+63>>7;fr[yr-3*Mr]=Qa[255+fr[yr-3*Mr]+ss],fr[yr-2*Mr]=Qa[255+zr+Fr],fr[yr-Mr]=Qa[255+$r+Or],fr[yr+0]=Qa[255+Br-Or],fr[yr+Mr]=Qa[255+cs-Fr],fr[yr+2*Mr]=Qa[255+Qr-ss]}ri+=Li}}function Dl(ei,ri,di,Li,ji,sr,or,ur){for(sr=2*sr+1;0<ji--;){if(Md(ei,ri,di,sr,or))if(Ld(ei,ri,di,ur))Jc(ei,ri,di);else{var fr=ei,yr=ri,Mr=di,zr=fr[yr-Mr],$r=fr[yr+0],Br=fr[yr+Mr],cs=$d[112+((Qr=3*($r-zr))+4>>3)],Qr=$d[112+(Qr+3>>3)],Or=cs+1>>1;fr[yr-2*Mr]=Qa[255+fr[yr-2*Mr]+Or],fr[yr-Mr]=Qa[255+zr+Qr],fr[yr+0]=Qa[255+$r-cs],fr[yr+Mr]=Qa[255+Br-Or]}ri+=Li}}function xu(ei,ri,di,Li,ji,sr){mc(ei,ri,di,1,16,Li,ji,sr)}function kc(ei,ri,di,Li,ji,sr){mc(ei,ri,1,di,16,Li,ji,sr)}function kh(ei,ri,di,Li,ji,sr){var or;for(or=3;0<or;--or)Dl(ei,ri+=4*di,di,1,16,Li,ji,sr)}function Qc(ei,ri,di,Li,ji,sr){var or;for(or=3;0<or;--or)Dl(ei,ri+=4,1,di,16,Li,ji,sr)}function Nh(ei,ri,di,Li,ji,sr,or,ur){mc(ei,ri,ji,1,8,sr,or,ur),mc(di,Li,ji,1,8,sr,or,ur)}function Lu(ei,ri,di,Li,ji,sr,or,ur){mc(ei,ri,1,ji,8,sr,or,ur),mc(di,Li,1,ji,8,sr,or,ur)}function Ru(ei,ri,di,Li,ji,sr,or,ur){Dl(ei,ri+4*ji,ji,1,8,sr,or,ur),Dl(di,Li+4*ji,ji,1,8,sr,or,ur)}function Nd(ei,ri,di,Li,ji,sr,or,ur){Dl(ei,ri+4,1,ji,8,sr,or,ur),Dl(di,Li+4,1,ji,8,sr,or,ur)}function eu(){this.ba=new Qs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ks,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Mu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ou(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Dd(){this.ua=0,this.Wa=new tr,this.vb=new tr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Mi,this.yc=new li}function Dh(){this.xb=this.a=0,this.l=new Wc,this.ca=new Qs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Fi,this.Pb=0,this.wd=new Fi,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Dd,this.ab=0,this.gc=Ue(4,Ou),this.Oc=0}function tu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Wc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Nc(ei,ri,di,Li,ji,sr,or){for(ei=ei==null?0:ei[ri+0],ri=0;ri<or;++ri)ji[sr+ri]=ei+di[Li+ri]&255,ei=ji[sr+ri]}function ku(ei,ri,di,Li,ji,sr,or){var ur;if(ei==null)Nc(null,null,di,Li,ji,sr,or);else for(ur=0;ur<or;++ur)ji[sr+ur]=ei[ri+ur]+di[Li+ur]&255}function yc(ei,ri,di,Li,ji,sr,or){if(ei==null)Nc(null,null,di,Li,ji,sr,or);else{var ur,fr=ei[ri+0],yr=fr,Mr=fr;for(ur=0;ur<or;++ur)yr=Mr+(fr=ei[ri+ur])-yr,Mr=di[Li+ur]+(-256&yr?0>yr?0:255:yr)&255,yr=fr,ji[sr+ur]=Mr}}function Nu(ei,ri,di,Li){var ji=ri.width,sr=ri.o;if(e(ei!=null&&ri!=null),0>di||0>=Li||di+Li>sr)return null;if(!ei.Cc){if(ei.ga==null){var or;if(ei.ga=new tu,(or=ei.ga==null)||(or=ri.width*ri.o,e(ei.Gb.length==0),ei.Gb=Be(or),ei.Uc=0,ei.Gb==null?or=0:(ei.mb=ei.Gb,ei.nb=ei.Uc,ei.rc=null,or=1),or=!or),!or){or=ei.ga;var ur=ei.Fa,fr=ei.P,yr=ei.qc,Mr=ei.mb,zr=ei.nb,$r=fr+1,Br=yr-1,cs=or.l;if(e(ur!=null&&Mr!=null&&ri!=null),Sc[0]=null,Sc[1]=Nc,Sc[2]=ku,Sc[3]=yc,or.ca=Mr,or.tb=zr,or.c=ri.width,or.i=ri.height,e(0<or.c&&0<or.i),1>=yr)ri=0;else if(or.$a=ur[fr+0]>>0&3,or.Z=ur[fr+0]>>2&3,or.Lc=ur[fr+0]>>4&3,fr=ur[fr+0]>>6&3,0>or.$a||1<or.$a||4<=or.Z||1<or.Lc||fr)ri=0;else if(cs.put=la,cs.ac=Ys,cs.bc=Os,cs.ma=or,cs.width=ri.width,cs.height=ri.height,cs.Da=ri.Da,cs.v=ri.v,cs.va=ri.va,cs.j=ri.j,cs.o=ri.o,or.$a)e:{e(or.$a==1),ri=Aa();t:for(;;){if(ri==null){ri=0;break e}if(e(or!=null),or.mc=ri,ri.c=or.c,ri.i=or.i,ri.l=or.l,ri.l.ma=or,ri.l.width=or.c,ri.l.height=or.i,ri.a=0,lr(ri.m,ur,$r,Br),!Zl(or.c,or.i,1,ri,null)||(ri.ab==1&&ri.gc[0].hc==3&&Na(ri.s)?(or.ic=1,ur=ri.c*ri.i,ri.Ta=null,ri.Ua=0,ri.V=Be(ur),ri.Ba=0,ri.V==null?(ri.a=1,ri=0):ri=1):(or.ic=0,ri=Rc(ri,or.c)),!ri))break t;ri=1;break e}or.mc=null,ri=0}else ri=Br>=or.c*or.i;or=!ri}if(or)return null;ei.ga.Lc!=1?ei.Ga=0:Li=sr-di}e(ei.ga!=null),e(di+Li<=sr);e:{if(ri=(ur=ei.ga).c,sr=ur.l.o,ur.$a==0){if($r=ei.rc,Br=ei.Vc,cs=ei.Fa,fr=ei.P+1+di*ri,yr=ei.mb,Mr=ei.nb+di*ri,e(fr<=ei.P+ei.qc),ur.Z!=0)for(e(Sc[ur.Z]!=null),or=0;or<Li;++or)Sc[ur.Z]($r,Br,cs,fr,yr,Mr,ri),$r=yr,Br=Mr,Mr+=ri,fr+=ri;else for(or=0;or<Li;++or)Oe(yr,Mr,cs,fr,ri),$r=yr,Br=Mr,Mr+=ri,fr+=ri;ei.rc=$r,ei.Vc=Br}else{if(e(ur.mc!=null),ri=di+Li,e((or=ur.mc)!=null),e(ri<=or.i),or.C>=ri)ri=1;else if(ur.ic||Vr(),ur.ic){ur=or.V,$r=or.Ba,Br=or.c;var Qr=or.i,Or=(cs=1,fr=or.$/Br,yr=or.$%Br,Mr=or.m,zr=or.s,or.$),Fr=Br*Qr,ss=Br*ri,us=zr.wc,as=Or<ss?zs(zr,yr,fr):null;e(Or<=Fr),e(ri<=Qr),e(Na(zr));t:for(;;){for(;!Mr.h&&Or<ss;){if(yr&us||(as=zs(zr,yr,fr)),e(as!=null),vr(Mr),256>(Qr=ho(as.G[0],as.H[0],Mr)))ur[$r+Or]=Qr,++Or,++yr>=Br&&(yr=0,++fr<=ri&&!(fr%16)&&Za(or,fr));else{if(!(280>Qr)){cs=0;break t}Qr=_o(Qr-256,Mr);var Es,ms=ho(as.G[4],as.H[4],Mr);if(vr(Mr),!(Or>=(ms=$o(Br,ms=_o(ms,Mr)))&&Fr-Or>=Qr)){cs=0;break t}for(Es=0;Es<Qr;++Es)ur[$r+Or+Es]=ur[$r+Or+Es-ms];for(Or+=Qr,yr+=Qr;yr>=Br;)yr-=Br,++fr<=ri&&!(fr%16)&&Za(or,fr);Or<ss&&yr&us&&(as=zs(zr,yr,fr))}e(Mr.h==rr(Mr))}Za(or,fr>ri?ri:fr);break t}!cs||Mr.h&&Or<Fr?(cs=0,or.a=Mr.h?5:3):or.$=Or,ri=cs}else ri=Ha(or,or.V,or.Ba,or.c,or.i,ri,Vc);if(!ri){Li=0;break e}}di+Li>=sr&&(ei.Cc=1),Li=1}if(!Li)return null;if(ei.Cc&&((Li=ei.ga)!=null&&(Li.mc=null),ei.ga=null,0<ei.Ga))return alert("todo:WebPDequantizeLevels"),null}return ei.nb+di*ji}function ai(ei,ri,di,Li,ji,sr){for(;0<ji--;){var or,ur=ei,fr=ri+(di?1:0),yr=ei,Mr=ri+(di?0:3);for(or=0;or<Li;++or){var zr=yr[Mr+4*or];zr!=255&&(zr*=32897,ur[fr+4*or+0]=ur[fr+4*or+0]*zr>>23,ur[fr+4*or+1]=ur[fr+4*or+1]*zr>>23,ur[fr+4*or+2]=ur[fr+4*or+2]*zr>>23)}ri+=sr}}function Vi(ei,ri,di,Li,ji){for(;0<Li--;){var sr;for(sr=0;sr<di;++sr){var or=ei[ri+2*sr+0],ur=15&(yr=ei[ri+2*sr+1]),fr=4369*ur,yr=(240&yr|yr>>4)*fr>>16;ei[ri+2*sr+0]=(240&or|or>>4)*fr>>16&240|(15&or|or<<4)*fr>>16>>4&15,ei[ri+2*sr+1]=240&yr|ur}ri+=ji}}function Cr(ei,ri,di,Li,ji,sr,or,ur){var fr,yr,Mr=255;for(yr=0;yr<ji;++yr){for(fr=0;fr<Li;++fr){var zr=ei[ri+fr];sr[or+4*fr]=zr,Mr&=zr}ri+=di,or+=ur}return Mr!=255}function Lr(ei,ri,di,Li,ji){var sr;for(sr=0;sr<ji;++sr)di[Li+sr]=ei[ri+sr]>>8}function Vr(){bl=ai,wo=Vi,ko=Cr,oa=Lr}function ts(ei,ri,di){fi[ei]=function(Li,ji,sr,or,ur,fr,yr,Mr,zr,$r,Br,cs,Qr,Or,Fr,ss,us){var as,Es=us-1>>1,ms=ur[fr+0]|yr[Mr+0]<<16,Ls=zr[$r+0]|Br[cs+0]<<16;e(Li!=null);var _s=3*ms+Ls+131074>>2;for(ri(Li[ji+0],255&_s,_s>>16,Qr,Or),sr!=null&&(_s=3*Ls+ms+131074>>2,ri(sr[or+0],255&_s,_s>>16,Fr,ss)),as=1;as<=Es;++as){var Xs=ur[fr+as]|yr[Mr+as]<<16,Ks=zr[$r+as]|Br[cs+as]<<16,Ws=ms+Xs+Ls+Ks+524296,$s=Ws+2*(Xs+Ls)>>3;_s=$s+ms>>1,ms=(Ws=Ws+2*(ms+Ks)>>3)+Xs>>1,ri(Li[ji+2*as-1],255&_s,_s>>16,Qr,Or+(2*as-1)*di),ri(Li[ji+2*as-0],255&ms,ms>>16,Qr,Or+(2*as-0)*di),sr!=null&&(_s=Ws+Ls>>1,ms=$s+Ks>>1,ri(sr[or+2*as-1],255&_s,_s>>16,Fr,ss+(2*as-1)*di),ri(sr[or+2*as+0],255&ms,ms>>16,Fr,ss+(2*as+0)*di)),ms=Xs,Ls=Ks}1&us||(_s=3*ms+Ls+131074>>2,ri(Li[ji+us-1],255&_s,_s>>16,Qr,Or+(us-1)*di),sr!=null&&(_s=3*Ls+ms+131074>>2,ri(sr[or+us-1],255&_s,_s>>16,Fr,ss+(us-1)*di)))}}function fs(){wl[Wd]=Cp,wl[Yd]=uf,wl[sf]=Ap,wl[Xd]=df,wl[Zd]=hf,wl[Bh]=ff,wl[of]=Ep,wl[Uh]=uf,wl[jh]=df,wl[Jd]=hf,wl[Vh]=ff}function As(ei){return ei&-16384?0>ei?0:255:ei>>Sp}function xs(ei,ri){return As((19077*ei>>8)+(26149*ri>>8)-14234)}function Us(ei,ri,di){return As((19077*ei>>8)-(6419*ri>>8)-(13320*di>>8)+8708)}function Bs(ei,ri){return As((19077*ei>>8)+(33050*ri>>8)-17685)}function qs(ei,ri,di,Li,ji){Li[ji+0]=xs(ei,di),Li[ji+1]=Us(ei,ri,di),Li[ji+2]=Bs(ei,ri)}function ea(ei,ri,di,Li,ji){Li[ji+0]=Bs(ei,ri),Li[ji+1]=Us(ei,ri,di),Li[ji+2]=xs(ei,di)}function na(ei,ri,di,Li,ji){var sr=Us(ei,ri,di);ri=sr<<3&224|Bs(ei,ri)>>3,Li[ji+0]=248&xs(ei,di)|sr>>5,Li[ji+1]=ri}function ca(ei,ri,di,Li,ji){var sr=240&Bs(ei,ri)|15;Li[ji+0]=240&xs(ei,di)|Us(ei,ri,di)>>4,Li[ji+1]=sr}function Ma(ei,ri,di,Li,ji){Li[ji+0]=255,qs(ei,ri,di,Li,ji+1)}function pa(ei,ri,di,Li,ji){ea(ei,ri,di,Li,ji),Li[ji+3]=255}function Ul(ei,ri,di,Li,ji){qs(ei,ri,di,Li,ji),Li[ji+3]=255}function Ja(ei,ri){return 0>ei?0:ei>ri?ri:ei}function nc(ei,ri,di){fi[ei]=function(Li,ji,sr,or,ur,fr,yr,Mr,zr){for(var $r=Mr+(-2&zr)*di;Mr!=$r;)ri(Li[ji+0],sr[or+0],ur[fr+0],yr,Mr),ri(Li[ji+1],sr[or+0],ur[fr+0],yr,Mr+di),ji+=2,++or,++fr,Mr+=2*di;1&zr&&ri(Li[ji+0],sr[or+0],ur[fr+0],yr,Mr)}}function Gd(ei,ri,di){return di==0?ei==0?ri==0?6:5:ri==0?4:0:di}function Gu(ei,ri,di,Li,ji){switch(ei>>>30){case 3:cc(ri,di,Li,ji,0);break;case 2:sa(ri,di,Li,ji);break;case 1:Fa(ri,di,Li,ji)}}function Fu(ei,ri){var di,Li,ji=ri.M,sr=ri.Nb,or=ei.oc,ur=ei.pc+40,fr=ei.oc,yr=ei.pc+584,Mr=ei.oc,zr=ei.pc+600;for(di=0;16>di;++di)or[ur+32*di-1]=129;for(di=0;8>di;++di)fr[yr+32*di-1]=129,Mr[zr+32*di-1]=129;for(0<ji?or[ur-1-32]=fr[yr-1-32]=Mr[zr-1-32]=129:(ke(or,ur-32-1,127,21),ke(fr,yr-32-1,127,9),ke(Mr,zr-32-1,127,9)),Li=0;Li<ei.za;++Li){var $r=ri.ya[ri.aa+Li];if(0<Li){for(di=-1;16>di;++di)Oe(or,ur+32*di-4,or,ur+32*di+12,4);for(di=-1;8>di;++di)Oe(fr,yr+32*di-4,fr,yr+32*di+4,4),Oe(Mr,zr+32*di-4,Mr,zr+32*di+4,4)}var Br=ei.Gd,cs=ei.Hd+Li,Qr=$r.ad,Or=$r.Hc;if(0<ji&&(Oe(or,ur-32,Br[cs].y,0,16),Oe(fr,yr-32,Br[cs].f,0,8),Oe(Mr,zr-32,Br[cs].ea,0,8)),$r.Za){var Fr=or,ss=ur-32+16;for(0<ji&&(Li>=ei.za-1?ke(Fr,ss,Br[cs].y[15],4):Oe(Fr,ss,Br[cs+1].y,0,4)),di=0;4>di;di++)Fr[ss+128+di]=Fr[ss+256+di]=Fr[ss+384+di]=Fr[ss+0+di];for(di=0;16>di;++di,Or<<=2)Fr=or,ss=ur+gf[di],$l[$r.Ob[di]](Fr,ss),Gu(Or,Qr,16*+di,Fr,ss)}else if(Fr=Gd(Li,ji,$r.Ob[0]),Ec[Fr](or,ur),Or!=0)for(di=0;16>di;++di,Or<<=2)Gu(Or,Qr,16*+di,or,ur+gf[di]);for(di=$r.Gc,Fr=Gd(Li,ji,$r.Dd),dc[Fr](fr,yr),dc[Fr](Mr,zr),Or=Qr,Fr=fr,ss=yr,255&($r=di>>0)&&(170&$r?zu(Or,256,Fr,ss):vl(Or,256,Fr,ss)),$r=Mr,Or=zr,255&(di>>=8)&&(170&di?zu(Qr,320,$r,Or):vl(Qr,320,$r,Or)),ji<ei.Ub-1&&(Oe(Br[cs].y,0,or,ur+480,16),Oe(Br[cs].f,0,fr,yr+224,8),Oe(Br[cs].ea,0,Mr,zr+224,8)),di=8*sr*ei.B,Br=ei.sa,cs=ei.ta+16*Li+16*sr*ei.R,Qr=ei.qa,$r=ei.ra+8*Li+di,Or=ei.Ha,Fr=ei.Ia+8*Li+di,di=0;16>di;++di)Oe(Br,cs+di*ei.R,or,ur+32*di,16);for(di=0;8>di;++di)Oe(Qr,$r+di*ei.B,fr,yr+32*di,8),Oe(Or,Fr+di*ei.B,Mr,zr+32*di,8)}}function iu(ei,ri,di,Li,ji,sr,or,ur,fr){var yr=[0],Mr=[0],zr=0,$r=fr!=null?fr.kd:0,Br=fr??new Mu;if(ei==null||12>di)return 7;Br.data=ei,Br.w=ri,Br.ha=di,ri=[ri],di=[di],Br.gb=[Br.gb];e:{var cs=ri,Qr=di,Or=Br.gb;if(e(ei!=null),e(Qr!=null),e(Or!=null),Or[0]=0,12<=Qr[0]&&!t(ei,cs[0],"RIFF")){if(t(ei,cs[0]+8,"WEBP")){Or=3;break e}var Fr=ir(ei,cs[0]+4);if(12>Fr||4294967286<Fr){Or=3;break e}if($r&&Fr>Qr[0]-8){Or=7;break e}Or[0]=Fr,cs[0]+=12,Qr[0]-=12}Or=0}if(Or!=0)return Or;for(Fr=0<Br.gb[0],di=di[0];;){e:{var ss=ei;Qr=ri,Or=di;var us=yr,as=Mr,Es=cs=[0];if((_s=zr=[zr])[0]=0,8>Or[0])Or=7;else{if(!t(ss,Qr[0],"VP8X")){if(ir(ss,Qr[0]+4)!=10){Or=3;break e}if(18>Or[0]){Or=7;break e}var ms=ir(ss,Qr[0]+8),Ls=1+es(ss,Qr[0]+12);if(2147483648<=Ls*(ss=1+es(ss,Qr[0]+15))){Or=3;break e}Es!=null&&(Es[0]=ms),us!=null&&(us[0]=Ls),as!=null&&(as[0]=ss),Qr[0]+=18,Or[0]-=18,_s[0]=1}Or=0}}if(zr=zr[0],cs=cs[0],Or!=0)return Or;if(Qr=!!(2&cs),!Fr&&zr)return 3;if(sr!=null&&(sr[0]=!!(16&cs)),or!=null&&(or[0]=Qr),ur!=null&&(ur[0]=0),or=yr[0],cs=Mr[0],zr&&Qr&&fr==null){Or=0;break}if(4>di){Or=7;break}if(Fr&&zr||!Fr&&!zr&&!t(ei,ri[0],"ALPH")){di=[di],Br.na=[Br.na],Br.P=[Br.P],Br.Sa=[Br.Sa];e:{ms=ei,Or=ri,Fr=di;var _s=Br.gb;us=Br.na,as=Br.P,Es=Br.Sa,Ls=22,e(ms!=null),e(Fr!=null),ss=Or[0];var Xs=Fr[0];for(e(us!=null),e(Es!=null),us[0]=null,as[0]=null,Es[0]=0;;){if(Or[0]=ss,Fr[0]=Xs,8>Xs){Or=7;break e}var Ks=ir(ms,ss+4);if(4294967286<Ks){Or=3;break e}var Ws=8+Ks+1&-2;if(Ls+=Ws,0<_s&&Ls>_s){Or=3;break e}if(!t(ms,ss,"VP8 ")||!t(ms,ss,"VP8L")){Or=0;break e}if(Xs[0]<Ws){Or=7;break e}t(ms,ss,"ALPH")||(us[0]=ms,as[0]=ss+8,Es[0]=Ks),ss+=Ws,Xs-=Ws}}if(di=di[0],Br.na=Br.na[0],Br.P=Br.P[0],Br.Sa=Br.Sa[0],Or!=0)break}di=[di],Br.Ja=[Br.Ja],Br.xa=[Br.xa];e:if(_s=ei,Or=ri,Fr=di,us=Br.gb[0],as=Br.Ja,Es=Br.xa,ms=Or[0],ss=!t(_s,ms,"VP8 "),Ls=!t(_s,ms,"VP8L"),e(_s!=null),e(Fr!=null),e(as!=null),e(Es!=null),8>Fr[0])Or=7;else{if(ss||Ls){if(_s=ir(_s,ms+4),12<=us&&_s>us-12){Or=3;break e}if($r&&_s>Fr[0]-8){Or=7;break e}as[0]=_s,Or[0]+=8,Fr[0]-=8,Es[0]=Ls}else Es[0]=5<=Fr[0]&&_s[ms+0]==47&&!(_s[ms+4]>>5),as[0]=Fr[0];Or=0}if(di=di[0],Br.Ja=Br.Ja[0],Br.xa=Br.xa[0],ri=ri[0],Or!=0)break;if(4294967286<Br.Ja)return 3;if(ur==null||Qr||(ur[0]=Br.xa?2:1),or=[or],cs=[cs],Br.xa){if(5>di){Or=7;break}ur=or,$r=cs,Qr=sr,ei==null||5>di?ei=0:5<=di&&ei[ri+0]==47&&!(ei[ri+4]>>5)?(Fr=[0],_s=[0],us=[0],lr(as=new Fi,ei,ri,di),Ss(as,Fr,_s,us)?(ur!=null&&(ur[0]=Fr[0]),$r!=null&&($r[0]=_s[0]),Qr!=null&&(Qr[0]=us[0]),ei=1):ei=0):ei=0}else{if(10>di){Or=7;break}ur=cs,ei==null||10>di||!Cd(ei,ri+3,di-3)?ei=0:($r=ei[ri+0]|ei[ri+1]<<8|ei[ri+2]<<16,Qr=16383&(ei[ri+7]<<8|ei[ri+6]),ei=16383&(ei[ri+9]<<8|ei[ri+8]),1&$r||3<($r>>1&7)||!($r>>4&1)||$r>>5>=Br.Ja||!Qr||!ei?ei=0:(or&&(or[0]=Qr),ur&&(ur[0]=ei),ei=1))}if(!ei||(or=or[0],cs=cs[0],zr&&(yr[0]!=or||Mr[0]!=cs)))return 3;fr!=null&&(fr[0]=Br,fr.offset=ri-fr.w,e(4294967286>ri-fr.w),e(fr.offset==fr.ha-di));break}return Or==0||Or==7&&zr&&fr==null?(sr!=null&&(sr[0]|=Br.na!=null&&0<Br.na.length),Li!=null&&(Li[0]=or),ji!=null&&(ji[0]=cs),0):Or}function Bu(ei,ri,di){var Li=ri.width,ji=ri.height,sr=0,or=0,ur=Li,fr=ji;if(ri.Da=ei!=null&&0<ei.Da,ri.Da&&(ur=ei.cd,fr=ei.bd,sr=ei.v,or=ei.j,11>di||(sr&=-2,or&=-2),0>sr||0>or||0>=ur||0>=fr||sr+ur>Li||or+fr>ji))return 0;if(ri.v=sr,ri.j=or,ri.va=sr+ur,ri.o=or+fr,ri.U=ur,ri.T=fr,ri.da=ei!=null&&0<ei.da,ri.da){if(!Dr(ur,fr,di=[ei.ib],sr=[ei.hb]))return 0;ri.ib=di[0],ri.hb=sr[0]}return ri.ob=ei!=null&&ei.ob,ri.Kb=ei==null||!ei.Sd,ri.da&&(ri.ob=ri.ib<3*Li/4&&ri.hb<3*ji/4,ri.Kb=0),1}function Uu(ei){if(ei==null)return 2;if(11>ei.S){var ri=ei.f.RGBA;ri.fb+=(ei.height-1)*ri.A,ri.A=-ri.A}else ri=ei.f.kb,ei=ei.height,ri.O+=(ei-1)*ri.fa,ri.fa=-ri.fa,ri.N+=(ei-1>>1)*ri.Ab,ri.Ab=-ri.Ab,ri.W+=(ei-1>>1)*ri.Db,ri.Db=-ri.Db,ri.F!=null&&(ri.J+=(ei-1)*ri.lb,ri.lb=-ri.lb);return 0}function su(ei,ri,di,Li){if(Li==null||0>=ei||0>=ri)return 2;if(di!=null){if(di.Da){var ji=di.cd,sr=di.bd,or=-2&di.v,ur=-2&di.j;if(0>or||0>ur||0>=ji||0>=sr||or+ji>ei||ur+sr>ri)return 2;ei=ji,ri=sr}if(di.da){if(!Dr(ei,ri,ji=[di.ib],sr=[di.hb]))return 2;ei=ji[0],ri=sr[0]}}Li.width=ei,Li.height=ri;e:{var fr=Li.width,yr=Li.height;if(ei=Li.S,0>=fr||0>=yr||!(ei>=Wd&&13>ei))ei=2;else{if(0>=Li.Rd&&Li.sd==null){or=sr=ji=ri=0;var Mr=(ur=fr*mf[ei])*yr;if(11>ei||(sr=(yr+1)/2*(ri=(fr+1)/2),ei==12&&(or=(ji=fr)*yr)),(yr=Be(Mr+2*sr+or))==null){ei=1;break e}Li.sd=yr,11>ei?((fr=Li.f.RGBA).eb=yr,fr.fb=0,fr.A=ur,fr.size=Mr):((fr=Li.f.kb).y=yr,fr.O=0,fr.fa=ur,fr.Fd=Mr,fr.f=yr,fr.N=0+Mr,fr.Ab=ri,fr.Cd=sr,fr.ea=yr,fr.W=0+Mr+sr,fr.Db=ri,fr.Ed=sr,ei==12&&(fr.F=yr,fr.J=0+Mr+2*sr),fr.Tc=or,fr.lb=ji)}if(ri=1,ji=Li.S,sr=Li.width,or=Li.height,ji>=Wd&&13>ji)if(11>ji)ei=Li.f.RGBA,ri&=(ur=Math.abs(ei.A))*(or-1)+sr<=ei.size,ri&=ur>=sr*mf[ji],ri&=ei.eb!=null;else{ei=Li.f.kb,ur=(sr+1)/2,Mr=(or+1)/2,fr=Math.abs(ei.fa),yr=Math.abs(ei.Ab);var zr=Math.abs(ei.Db),$r=Math.abs(ei.lb),Br=$r*(or-1)+sr;ri&=fr*(or-1)+sr<=ei.Fd,ri&=yr*(Mr-1)+ur<=ei.Cd,ri=(ri&=zr*(Mr-1)+ur<=ei.Ed)&fr>=sr&yr>=ur&zr>=ur,ri&=ei.y!=null,ri&=ei.f!=null,ri&=ei.ea!=null,ji==12&&(ri&=$r>=sr,ri&=Br<=ei.Tc,ri&=ei.F!=null)}else ri=0;ei=ri?0:2}}return ei!=0||di!=null&&di.fd&&(ei=Uu(Li)),ei}var Sa=64,ou=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],au=24,lu=32,ju=8,Wa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kr("Predictor0","PredictorAdd0"),fi.Predictor0=function(){return 4278190080},fi.Predictor1=function(ei){return ei},fi.Predictor2=function(ei,ri,di){return ri[di+0]},fi.Predictor3=function(ei,ri,di){return ri[di+1]},fi.Predictor4=function(ei,ri,di){return ri[di-1]},fi.Predictor5=function(ei,ri,di){return Tr(Tr(ei,ri[di+1]),ri[di+0])},fi.Predictor6=function(ei,ri,di){return Tr(ei,ri[di-1])},fi.Predictor7=function(ei,ri,di){return Tr(ei,ri[di+0])},fi.Predictor8=function(ei,ri,di){return Tr(ri[di-1],ri[di+0])},fi.Predictor9=function(ei,ri,di){return Tr(ri[di+0],ri[di+1])},fi.Predictor10=function(ei,ri,di){return Tr(Tr(ei,ri[di-1]),Tr(ri[di+0],ri[di+1]))},fi.Predictor11=function(ei,ri,di){var Li=ri[di+0];return 0>=Ir(Li>>24&255,ei>>24&255,(ri=ri[di-1])>>24&255)+Ir(Li>>16&255,ei>>16&255,ri>>16&255)+Ir(Li>>8&255,ei>>8&255,ri>>8&255)+Ir(255&Li,255&ei,255&ri)?Li:ei},fi.Predictor12=function(ei,ri,di){var Li=ri[di+0];return(Er((ei>>24&255)+(Li>>24&255)-((ri=ri[di-1])>>24&255))<<24|Er((ei>>16&255)+(Li>>16&255)-(ri>>16&255))<<16|Er((ei>>8&255)+(Li>>8&255)-(ri>>8&255))<<8|Er((255&ei)+(255&Li)-(255&ri)))>>>0},fi.Predictor13=function(ei,ri,di){var Li=ri[di-1];return(br((ei=Tr(ei,ri[di+0]))>>24&255,Li>>24&255)<<24|br(ei>>16&255,Li>>16&255)<<16|br(ei>>8&255,Li>>8&255)<<8|br(ei>>0&255,Li>>0&255))>>>0};var Gh=fi.PredictorAdd0;fi.PredictorAdd1=jr,kr("Predictor2","PredictorAdd2"),kr("Predictor3","PredictorAdd3"),kr("Predictor4","PredictorAdd4"),kr("Predictor5","PredictorAdd5"),kr("Predictor6","PredictorAdd6"),kr("Predictor7","PredictorAdd7"),kr("Predictor8","PredictorAdd8"),kr("Predictor9","PredictorAdd9"),kr("Predictor10","PredictorAdd10"),kr("Predictor11","PredictorAdd11"),kr("Predictor12","PredictorAdd12"),kr("Predictor13","PredictorAdd13");var Vu=fi.PredictorAdd2;ps("ColorIndexInverseTransform","MapARGB","32b",function(ei){return ei>>8&255},function(ei){return ei}),ps("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(ei){return ei},function(ei){return ei>>8&255});var Fd,yl=fi.ColorIndexInverseTransform,cu=fi.MapARGB,Bd=fi.VP8LColorIndexInverseTransformAlpha,Ud=fi.MapAlpha,vc=fi.VP8LPredictorsAdd=[];vc.length=16,(fi.VP8LPredictors=[]).length=16,(fi.VP8LPredictorsAdd_C=[]).length=16,(fi.VP8LPredictors_C=[]).length=16;var Dc,Ya,Ga,_c,oc,ac,uu,cc,sa,zu,Fa,vl,du,Vd,$u,Gc,Fc,Cc,Bc,hu,Uc,Ac,Hu,_l,bl,wo,ko,oa,fa=Be(511),uc=Be(2041),qu=Be(225),fu=Be(767),zd=0,Fh=uc,$d=qu,Qa=fu,Il=fa,Wd=0,Yd=1,sf=2,Xd=3,Zd=4,Bh=5,of=6,Uh=7,jh=8,Jd=9,Vh=10,op=[2,3,7],ap=[3,3,11],af=[280,256,256,256,40],lp=[0,1,1,1,0],cp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],up=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],dp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],hp=8,zh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],$h=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wu=null,fp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],mp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],yp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],vp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ec=[],$l=[],dc=[],_p=1,cf=2,Sc=[],wl=[];ts("UpsampleRgbLinePair",qs,3),ts("UpsampleBgrLinePair",ea,3),ts("UpsampleRgbaLinePair",Ul,4),ts("UpsampleBgraLinePair",pa,4),ts("UpsampleArgbLinePair",Ma,4),ts("UpsampleRgba4444LinePair",ca,2),ts("UpsampleRgb565LinePair",na,2);var Cp=fi.UpsampleRgbLinePair,Ap=fi.UpsampleBgrLinePair,uf=fi.UpsampleRgbaLinePair,df=fi.UpsampleBgraLinePair,hf=fi.UpsampleArgbLinePair,ff=fi.UpsampleRgba4444LinePair,Ep=fi.UpsampleRgb565LinePair,Qd=16,eh=1<<Qd-1,Yu=-227,Hh=482,Sp=6,pf=0,bp=Be(256),Ip=Be(256),wp=Be(256),Pp=Be(256),xp=Be(Hh-Yu),Tp=Be(Hh-Yu);nc("YuvToRgbRow",qs,3),nc("YuvToBgrRow",ea,3),nc("YuvToRgbaRow",Ul,4),nc("YuvToBgraRow",pa,4),nc("YuvToArgbRow",Ma,4),nc("YuvToRgba4444Row",ca,2),nc("YuvToRgb565Row",na,2);var gf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],th=[0,2,8],Lp=[8,7,6,4,4,2,2,2,1,1,1,1],Rp=1;this.WebPDecodeRGBA=function(ei,ri,di,Li,ji){var sr=Yd,or=new eu,ur=new Qs;or.ba=ur,ur.S=sr,ur.width=[ur.width],ur.height=[ur.height];var fr=ur.width,yr=ur.height,Mr=new Do;if(Mr==null||ei==null)var zr=2;else e(Mr!=null),zr=iu(ei,ri,di,Mr.width,Mr.height,Mr.Pd,Mr.Qd,Mr.format,null);if(zr!=0?fr=0:(fr!=null&&(fr[0]=Mr.width[0]),yr!=null&&(yr[0]=Mr.height[0]),fr=1),fr){ur.width=ur.width[0],ur.height=ur.height[0],Li!=null&&(Li[0]=ur.width),ji!=null&&(ji[0]=ur.height);e:{if(Li=new Wc,(ji=new Mu).data=ei,ji.w=ri,ji.ha=di,ji.kd=1,ri=[0],e(ji!=null),((ei=iu(ji.data,ji.w,ji.ha,null,null,null,ri,null,ji))==0||ei==7)&&ri[0]&&(ei=4),(ri=ei)==0){if(e(or!=null),Li.data=ji.data,Li.w=ji.w+ji.offset,Li.ha=ji.ha-ji.offset,Li.put=la,Li.ac=Ys,Li.bc=Os,Li.ma=or,ji.xa){if((ei=Aa())==null){or=1;break e}if(function($r,Br){var cs=[0],Qr=[0],Or=[0];t:for(;;){if($r==null)return 0;if(Br==null)return $r.a=2,0;if($r.l=Br,$r.a=0,lr($r.m,Br.data,Br.w,Br.ha),!Ss($r.m,cs,Qr,Or)){$r.a=3;break t}if($r.xb=cf,Br.width=cs[0],Br.height=Qr[0],!Zl(cs[0],Qr[0],1,$r,null))break t;return 1}return e($r.a!=0),0}(ei,Li)){if(Li=(ri=su(Li.width,Li.height,or.Oa,or.ba))==0){t:{Li=ei;n:for(;;){if(Li==null){Li=0;break t}if(e(Li.s.yc!=null),e(Li.s.Ya!=null),e(0<Li.s.Wb),e((di=Li.l)!=null),e((ji=di.ma)!=null),Li.xb!=0){if(Li.ca=ji.ba,Li.tb=ji.tb,e(Li.ca!=null),!Bu(ji.Oa,di,Xd)){Li.a=2;break n}if(!Rc(Li,di.width)||di.da)break n;if((di.da||Is(Li.ca.S))&&Vr(),11>Li.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Li.ca.f.kb.F!=null&&Vr()),Li.Pb&&0<Li.s.ua&&Li.s.vb.X==null&&!mr(Li.s.vb,Li.s.Wa.Xa)){Li.a=1;break n}Li.xb=0}if(!Ha(Li,Li.V,Li.Ba,Li.c,Li.i,di.o,Ua))break n;ji.Dc=Li.Ma,Li=1;break t}e(Li.a!=0),Li=0}Li=!Li}Li&&(ri=ei.a)}else ri=ei.a}else{if((ei=new vh)==null){or=1;break e}if(ei.Fa=ji.na,ei.P=ji.P,ei.qc=ji.Sa,Ad(ei,Li)){if((ri=su(Li.width,Li.height,or.Oa,or.ba))==0){if(ei.Aa=0,di=or.Oa,e((ji=ei)!=null),di!=null){if(0<(fr=0>(fr=di.Md)?0:100<fr?255:255*fr/100)){for(yr=Mr=0;4>yr;++yr)12>(zr=ji.pb[yr]).lc&&(zr.ia=fr*Lp[0>zr.lc?0:zr.lc]>>3),Mr|=zr.ia;Mr&&(alert("todo:VP8InitRandom"),ji.ia=1)}ji.Ga=di.Id,100<ji.Ga?ji.Ga=100:0>ji.Ga&&(ji.Ga=0)}_h(ei,Li)||(ri=ei.a)}}else ri=ei.a}ri==0&&or.Oa!=null&&or.Oa.fd&&(ri=Uu(or.ba))}or=ri}sr=or!=0?null:11>sr?ur.f.RGBA.eb:ur.f.kb.y}else sr=null;return sr};var mf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Qe(fi,Oi){for(var Ni="",ui=0;ui<4;ui++)Ni+=String.fromCharCode(fi[Oi++]);return Ni}function Cn(fi,Oi){return(fi[Oi+0]<<0|fi[Oi+1]<<8|fi[Oi+2]<<16)>>>0}function An(fi,Oi){return(fi[Oi+0]<<0|fi[Oi+1]<<8|fi[Oi+2]<<16|fi[Oi+3]<<24)>>>0}new We;var En=[0],Sn=[0],Tn=[],Dn=new We,ti=Ae,ni=function(fi,Oi){var Ni={},ui=0,li=!1,Ri=0,Mi=0;if(Ni.frames=[],!function(cr,rr,gr,vr){for(var pr=0;pr<vr;pr++)if(cr[rr+pr]!=gr.charCodeAt(pr))return!0;return!1}(fi,Oi,"RIFF",4)){var Bi,er;for(An(fi,Oi+=4),Oi+=8;Oi<fi.length;){var nr=Qe(fi,Oi),lr=An(fi,Oi+=4);Oi+=4;var hr=lr+(1&lr);switch(nr){case"VP8 ":case"VP8L":Ni.frames[ui]===void 0&&(Ni.frames[ui]={}),(Fi=Ni.frames[ui]).src_off=li?Mi:Oi-8,Fi.src_size=Ri+lr+8,ui++,li&&(li=!1,Ri=0,Mi=0);break;case"VP8X":(Fi=Ni.header={}).feature_flags=fi[Oi];var ar=Oi+4;Fi.canvas_width=1+Cn(fi,ar),ar+=3,Fi.canvas_height=1+Cn(fi,ar),ar+=3;break;case"ALPH":li=!0,Ri=hr+8,Mi=Oi-8;break;case"ANIM":(Fi=Ni.header).bgcolor=An(fi,Oi),ar=Oi+4,Fi.loop_count=(Bi=fi)[(er=ar)+0]<<0|Bi[er+1]<<8,ar+=2;break;case"ANMF":var wr,Fi;(Fi=Ni.frames[ui]={}).offset_x=2*Cn(fi,Oi),Oi+=3,Fi.offset_y=2*Cn(fi,Oi),Oi+=3,Fi.width=1+Cn(fi,Oi),Oi+=3,Fi.height=1+Cn(fi,Oi),Oi+=3,Fi.duration=Cn(fi,Oi),Oi+=3,wr=fi[Oi++],Fi.dispose=1&wr,Fi.blend=wr>>1&1}nr!="ANMF"&&(Oi+=hr)}return Ni}}(ti,0);ni.response=ti,ni.rgbaoutput=!0,ni.dataurl=!1;var ii=ni.header?ni.header:null,si=ni.frames?ni.frames:null;if(ii){ii.loop_counter=ii.loop_count,En=[ii.canvas_height],Sn=[ii.canvas_width];for(var oi=0;oi<si.length&&si[oi].blend!=0;oi++);}var ci=si[0],Pi=Dn.WebPDecodeRGBA(ti,ci.src_off,ci.src_size,Sn,En);ci.rgba=Pi,ci.imgwidth=Sn[0],ci.imgheight=En[0];for(var Ai=0;Ai<Sn[0]*En[0]*4;Ai++)Tn[Ai]=Pi[Ai];return this.width=Sn,this.height=En,this.data=Tn,this}(function(Ae){var e=function(){return typeof zlibSync=="function"},t=function(En,Sn,Tn,Dn){var ti=4,ni=Ue;switch(Dn){case Ae.image_compression.FAST:ti=1,ni=Be;break;case Ae.image_compression.MEDIUM:ti=6,ni=je;break;case Ae.image_compression.SLOW:ti=9,ni=We}En=Oe(En,Sn,Tn,ni);var ii=zlibSync(En,{level:ti});return Ae.__addimage__.arrayBufferToBinaryString(ii)},Oe=function(En,Sn,Tn,Dn){for(var ti,ni,ii,si=En.length/Sn,oi=new Uint8Array(En.length+si),ci=Cn(),Pi=0;Pi<si;Pi+=1){if(ii=Pi*Sn,ti=En.subarray(ii,ii+Sn),Dn)oi.set(Dn(ti,Tn,ni),ii+Pi);else{for(var Ai,fi=ci.length,Oi=[];Ai<fi;Ai+=1)Oi[Ai]=ci[Ai](ti,Tn,ni);var Ni=An(Oi.concat());oi.set(Oi[Ni],ii+Pi)}ni=ti}return oi},ke=function(En){var Sn=Array.apply([],En);return Sn.unshift(0),Sn},Be=function(En,Sn){var Tn,Dn=[],ti=En.length;Dn[0]=1;for(var ni=0;ni<ti;ni+=1)Tn=En[ni-Sn]||0,Dn[ni+1]=En[ni]-Tn+256&255;return Dn},Ue=function(En,Sn,Tn){var Dn,ti=[],ni=En.length;ti[0]=2;for(var ii=0;ii<ni;ii+=1)Dn=Tn&&Tn[ii]||0,ti[ii+1]=En[ii]-Dn+256&255;return ti},je=function(En,Sn,Tn){var Dn,ti,ni=[],ii=En.length;ni[0]=3;for(var si=0;si<ii;si+=1)Dn=En[si-Sn]||0,ti=Tn&&Tn[si]||0,ni[si+1]=En[si]+256-(Dn+ti>>>1)&255;return ni},We=function(En,Sn,Tn){var Dn,ti,ni,ii,si=[],oi=En.length;si[0]=4;for(var ci=0;ci<oi;ci+=1)Dn=En[ci-Sn]||0,ti=Tn&&Tn[ci]||0,ni=Tn&&Tn[ci-Sn]||0,ii=Qe(Dn,ti,ni),si[ci+1]=En[ci]-ii+256&255;return si},Qe=function(En,Sn,Tn){if(En===Sn&&Sn===Tn)return En;var Dn=Math.abs(Sn-Tn),ti=Math.abs(En-Tn),ni=Math.abs(En+Sn-Tn-Tn);return Dn<=ti&&Dn<=ni?En:ti<=ni?Sn:Tn},Cn=function(){return[ke,Be,Ue,je,We]},An=function(En){var Sn=En.map(function(Tn){return Tn.reduce(function(Dn,ti){return Dn+Math.abs(ti)},0)});return Sn.indexOf(Math.min.apply(null,Sn))};Ae.processPNG=function(En,Sn,Tn,Dn){var ti,ni,ii,si,oi,ci,Pi,Ai,fi,Oi,Ni,ui,li,Ri,Mi,Bi=this.decode.FLATE_DECODE,er="";if(this.__addimage__.isArrayBuffer(En)&&(En=new Uint8Array(En)),this.__addimage__.isArrayBufferView(En)){if(En=(ii=new Kt(En)).imgData,ni=ii.bits,ti=ii.colorSpace,oi=ii.colors,[4,6].indexOf(ii.colorType)!==-1){if(ii.bits===8){fi=(Ai=ii.pixelBitlength==32?new Uint32Array(ii.decodePixels().buffer):ii.pixelBitlength==16?new Uint16Array(ii.decodePixels().buffer):new Uint8Array(ii.decodePixels().buffer)).length,Ni=new Uint8Array(fi*ii.colors),Oi=new Uint8Array(fi);var nr,lr=ii.pixelBitlength-ii.bits;for(Ri=0,Mi=0;Ri<fi;Ri++){for(li=Ai[Ri],nr=0;nr<lr;)Ni[Mi++]=li>>>nr&255,nr+=ii.bits;Oi[Ri]=li>>>nr&255}}if(ii.bits===16){fi=(Ai=new Uint32Array(ii.decodePixels().buffer)).length,Ni=new Uint8Array(fi*(32/ii.pixelBitlength)*ii.colors),Oi=new Uint8Array(fi*(32/ii.pixelBitlength)),ui=ii.colors>1,Ri=0,Mi=0;for(var hr=0;Ri<fi;)li=Ai[Ri++],Ni[Mi++]=li>>>0&255,ui&&(Ni[Mi++]=li>>>16&255,li=Ai[Ri++],Ni[Mi++]=li>>>0&255),Oi[hr++]=li>>>16&255;ni=8}Dn!==Ae.image_compression.NONE&&e()?(En=t(Ni,ii.width*ii.colors,ii.colors,Dn),Pi=t(Oi,ii.width,1,Dn)):(En=Ni,Pi=Oi,Bi=void 0)}if(ii.colorType===3&&(ti=this.color_spaces.INDEXED,ci=ii.palette,ii.transparency.indexed)){var ar=ii.transparency.indexed,wr=0;for(Ri=0,fi=ar.length;Ri<fi;++Ri)wr+=ar[Ri];if((wr/=255)===fi-1&&ar.indexOf(0)!==-1)si=[ar.indexOf(0)];else if(wr!==fi){for(Ai=ii.decodePixels(),Oi=new Uint8Array(Ai.length),Ri=0,fi=Ai.length;Ri<fi;Ri++)Oi[Ri]=ar[Ai[Ri]];Pi=t(Oi,ii.width,1)}}var Fi=function(cr){var rr;switch(cr){case Ae.image_compression.FAST:rr=11;break;case Ae.image_compression.MEDIUM:rr=13;break;case Ae.image_compression.SLOW:rr=14;break;default:rr=12}return rr}(Dn);return Bi===this.decode.FLATE_DECODE&&(er="/Predictor "+Fi+" "),er+="/Colors "+oi+" /BitsPerComponent "+ni+" /Columns "+ii.width,(this.__addimage__.isArrayBuffer(En)||this.__addimage__.isArrayBufferView(En))&&(En=this.__addimage__.arrayBufferToBinaryString(En)),(Pi&&this.__addimage__.isArrayBuffer(Pi)||this.__addimage__.isArrayBufferView(Pi))&&(Pi=this.__addimage__.arrayBufferToBinaryString(Pi)),{alias:Tn,data:En,index:Sn,filter:Bi,decodeParameters:er,transparency:si,palette:ci,sMask:Pi,predictor:Fi,width:ii.width,height:ii.height,bitsPerComponent:ni,colorSpace:ti}}}})(E.API),function(Ae){Ae.processGIF89A=function(e,t,Oe,ke){var Be=new Zt(e),Ue=Be.width,je=Be.height,We=[];Be.decodeAndBlitFrameRGBA(0,We);var Qe={data:We,width:Ue,height:je},Cn=new Qt(100).encode(Qe,100);return Ae.processJPEG.call(this,Cn,t,Oe,ke)},Ae.processGIF87A=Ae.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Ae=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Ae);for(var e=0;e<Ae;e++){var t=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:ke,green:Oe,blue:t,quad:Be}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Ae="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[Ae]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var Ae,e=Math.ceil(this.width/8),t=e%4;for(Ae=this.height-1;Ae>=0;Ae--){for(var Oe=this.bottom_up?Ae:this.height-1-Ae,ke=0;ke<e;ke++)for(var Be=this.datav.getUint8(this.pos++,!0),Ue=Oe*this.width*4+8*ke*4,je=0;je<8&&8*ke+je<this.width;je++){var We=this.palette[Be>>7-je&1];this.data[Ue+4*je]=We.blue,this.data[Ue+4*je+1]=We.green,this.data[Ue+4*je+2]=We.red,this.data[Ue+4*je+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var Ae=Math.ceil(this.width/2),e=Ae%4,t=this.height-1;t>=0;t--){for(var Oe=this.bottom_up?t:this.height-1-t,ke=0;ke<Ae;ke++){var Be=this.datav.getUint8(this.pos++,!0),Ue=Oe*this.width*4+2*ke*4,je=Be>>4,We=15&Be,Qe=this.palette[je];if(this.data[Ue]=Qe.blue,this.data[Ue+1]=Qe.green,this.data[Ue+2]=Qe.red,this.data[Ue+3]=255,2*ke+1>=this.width)break;Qe=this.palette[We],this.data[Ue+4]=Qe.blue,this.data[Ue+4+1]=Qe.green,this.data[Ue+4+2]=Qe.red,this.data[Ue+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var Ae=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,Oe=0;Oe<this.width;Oe++){var ke=this.datav.getUint8(this.pos++,!0),Be=t*this.width*4+4*Oe;if(ke<this.palette.length){var Ue=this.palette[ke];this.data[Be]=Ue.red,this.data[Be+1]=Ue.green,this.data[Be+2]=Ue.blue,this.data[Be+3]=255}else this.data[Be]=255,this.data[Be+1]=255,this.data[Be+2]=255,this.data[Be+3]=255}Ae!==0&&(this.pos+=4-Ae)}},te.prototype.bit15=function(){for(var Ae=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var Oe=this.bottom_up?t:this.height-1-t,ke=0;ke<this.width;ke++){var Be=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ue=(Be&e)/e*255|0,je=(Be>>5&e)/e*255|0,We=(Be>>10&e)/e*255|0,Qe=Be>>15?255:0,Cn=Oe*this.width*4+4*ke;this.data[Cn]=We,this.data[Cn+1]=je,this.data[Cn+2]=Ue,this.data[Cn+3]=Qe}this.pos+=Ae}},te.prototype.bit16=function(){for(var Ae=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),Oe=this.height-1;Oe>=0;Oe--){for(var ke=this.bottom_up?Oe:this.height-1-Oe,Be=0;Be<this.width;Be++){var Ue=this.datav.getUint16(this.pos,!0);this.pos+=2;var je=(Ue&e)/e*255|0,We=(Ue>>5&t)/t*255|0,Qe=(Ue>>11)/e*255|0,Cn=ke*this.width*4+4*Be;this.data[Cn]=Qe,this.data[Cn+1]=We,this.data[Cn+2]=je,this.data[Cn+3]=255}this.pos+=Ae}},te.prototype.bit24=function(){for(var Ae=this.height-1;Ae>=0;Ae--){for(var e=this.bottom_up?Ae:this.height-1-Ae,t=0;t<this.width;t++){var Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=e*this.width*4+4*t;this.data[Ue]=Be,this.data[Ue+1]=ke,this.data[Ue+2]=Oe,this.data[Ue+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Ae=this.height-1;Ae>=0;Ae--)for(var e=this.bottom_up?Ae:this.height-1-Ae,t=0;t<this.width;t++){var Oe=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),je=e*this.width*4+4*t;this.data[je]=Be,this.data[je+1]=ke,this.data[je+2]=Oe,this.data[je+3]=Ue}},te.prototype.getData=function(){return this.data},function(Ae){Ae.processBMP=function(e,t,Oe,ke){var Be=new te(e,!1),Ue=Be.width,je=Be.height,We={data:Be.getData(),width:Ue,height:je},Qe=new Qt(100).encode(We,100);return Ae.processJPEG.call(this,Qe,t,Oe,ke)}}(E.API),ee.prototype.getData=function(){return this.data},function(Ae){Ae.processWEBP=function(e,t,Oe,ke){var Be=new ee(e),Ue=Be.width,je=Be.height,We={data:Be.getData(),width:Ue,height:je},Qe=new Qt(100).encode(We,100);return Ae.processJPEG.call(this,Qe,t,Oe,ke)}}(E.API),E.API.processRGBA=function(Ae,e,t){for(var Oe=Ae.data,ke=Oe.length,Be=new Uint8Array(ke/4*3),Ue=new Uint8Array(ke/4),je=0,We=0,Qe=0;Qe<ke;Qe+=4){var Cn=Oe[Qe],An=Oe[Qe+1],En=Oe[Qe+2],Sn=Oe[Qe+3];Be[je++]=Cn,Be[je++]=An,Be[je++]=En,Ue[We++]=Sn}var Tn=this.__addimage__.arrayBufferToBinaryString(Be);return{alpha:this.__addimage__.arrayBufferToBinaryString(Ue),data:Tn,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Ae.width,height:Ae.height}},E.API.setLanguage=function(Ae){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Ae]!==void 0&&(this.internal.languageSettings.languageCode=Ae,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Ae,e){var t,Oe,ke=(e=e||{}).font||this.internal.getFont(),Be=e.fontSize||this.internal.getFontSize(),Ue=e.charSpace||this.internal.getCharSpace(),je=e.widths?e.widths:ke.metadata.Unicode.widths,We=je.fof?je.fof:1,Qe=e.kerning?e.kerning:ke.metadata.Unicode.kerning,Cn=Qe.fof?Qe.fof:1,An=e.doKerning!==!1,En=0,Sn=Ae.length,Tn=0,Dn=je[0]||We,ti=[];for(t=0;t<Sn;t++)Oe=Ae.charCodeAt(t),typeof ke.metadata.widthOfString=="function"?ti.push((ke.metadata.widthOfGlyph(ke.metadata.characterToGlyph(Oe))+Ue*(1e3/Be)||0)/1e3):(En=An&&_typeof(Qe[Oe])==="object"&&!isNaN(parseInt(Qe[Oe][Tn],10))?Qe[Oe][Tn]/Cn:0,ti.push((je[Oe]||Dn)/We+En)),Tn=Oe;return ti},Yt=Vt.getStringUnitWidth=function(Ae,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),Oe=e.font||this.internal.getFont(),ke=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Ae=Vt.processArabic(Ae)),typeof Oe.metadata.widthOfString=="function"?Oe.metadata.widthOfString(Ae,t,ke)/t:Gt.apply(this,arguments).reduce(function(Be,Ue){return Be+Ue},0)},Jt=function(Ae,e,t,Oe){for(var ke=[],Be=0,Ue=Ae.length,je=0;Be!==Ue&&je+e[Be]<t;)je+=e[Be],Be++;ke.push(Ae.slice(0,Be));var We=Be;for(je=0;Be!==Ue;)je+e[Be]>Oe&&(ke.push(Ae.slice(We,Be)),je=0,We=Be),je+=e[Be],Be++;return We!==Be&&ke.push(Ae.slice(We,Be)),ke},Xt=function(Ae,e,t){t||(t={});var Oe,ke,Be,Ue,je,We,Qe,Cn=[],An=[Cn],En=t.textIndent||0,Sn=0,Tn=0,Dn=Ae.split(" "),ti=Gt.apply(this,[" ",t])[0];if(We=t.lineIndent===-1?Dn[0].length+2:t.lineIndent||0){var ni=Array(We).join(" "),ii=[];Dn.map(function(oi){(oi=oi.split(/\s*\n/)).length>1?ii=ii.concat(oi.map(function(ci,Pi){return(Pi&&ci.length?`
`:"")+ci})):ii.push(oi[0])}),Dn=ii,We=Yt.apply(this,[ni,t])}for(Be=0,Ue=Dn.length;Be<Ue;Be++){var si=0;if(Oe=Dn[Be],We&&Oe[0]==`
`&&(Oe=Oe.substr(1),si=1),En+Sn+(Tn=(ke=Gt.apply(this,[Oe,t])).reduce(function(oi,ci){return oi+ci},0))>e||si){if(Tn>e){for(je=Jt.apply(this,[Oe,ke,e-(En+Sn),e]),Cn.push(je.shift()),Cn=[je.pop()];je.length;)An.push([je.shift()]);Tn=ke.slice(Oe.length-(Cn[0]?Cn[0].length:0)).reduce(function(oi,ci){return oi+ci},0)}else Cn=[Oe];An.push(Cn),En=Tn+We,Sn=ti}else Cn.push(Oe),En+=Sn+Tn,Sn=ti}return Qe=We?function(oi,ci){return(ci?ni:"")+oi.join(" ")}:function(oi){return oi.join(" ")},An.map(Qe)},Vt.splitTextToSize=function(Ae,e,t){var Oe,ke=(t=t||{}).fontSize||this.internal.getFontSize(),Be=(function(Cn){if(Cn.widths&&Cn.kerning)return{widths:Cn.widths,kerning:Cn.kerning};var An=this.internal.getFont(Cn.fontName,Cn.fontStyle);return An.metadata.Unicode?{widths:An.metadata.Unicode.widths||{0:1},kerning:An.metadata.Unicode.kerning||{}}:{font:An.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);Oe=Array.isArray(Ae)?Ae:String(Ae).split(/\r?\n/);var Ue=1*this.internal.scaleFactor*e/ke;Be.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/ke:0,Be.lineIndent=t.lineIndent;var je,We,Qe=[];for(je=0,We=Oe.length;je<We;je++)Qe=Qe.concat(Xt.apply(this,[Oe[je],Ue,Be]));return Qe},function(Ae){Ae.__fontmetrics__=Ae.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},Oe={},ke=0;ke<e.length;ke++)t[e[ke]]="0123456789abcdef"[ke],Oe["0123456789abcdef"[ke]]=e[ke];var Be=function(An){return"0x"+parseInt(An,10).toString(16)},Ue=Ae.__fontmetrics__.compress=function(An){var En,Sn,Tn,Dn,ti=["{"];for(var ni in An){if(En=An[ni],isNaN(parseInt(ni,10))?Sn="'"+ni+"'":(ni=parseInt(ni,10),Sn=(Sn=Be(ni).slice(2)).slice(0,-1)+Oe[Sn.slice(-1)]),typeof En=="number")En<0?(Tn=Be(En).slice(3),Dn="-"):(Tn=Be(En).slice(2),Dn=""),Tn=Dn+Tn.slice(0,-1)+Oe[Tn.slice(-1)];else{if(_typeof(En)!=="object")throw new Error("Don't know what to do with value type "+_typeof(En)+".");Tn=Ue(En)}ti.push(Sn+Tn)}return ti.push("}"),ti.join("")},je=Ae.__fontmetrics__.uncompress=function(An){if(typeof An!="string")throw new Error("Invalid argument passed to uncompress.");for(var En,Sn,Tn,Dn,ti={},ni=1,ii=ti,si=[],oi="",ci="",Pi=An.length-1,Ai=1;Ai<Pi;Ai+=1)(Dn=An[Ai])=="'"?En?(Tn=En.join(""),En=void 0):En=[]:En?En.push(Dn):Dn=="{"?(si.push([ii,Tn]),ii={},Tn=void 0):Dn=="}"?((Sn=si.pop())[0][Sn[1]]=ii,Tn=void 0,ii=Sn[0]):Dn=="-"?ni=-1:Tn===void 0?t.hasOwnProperty(Dn)?(oi+=t[Dn],Tn=parseInt(oi,16)*ni,ni=1,oi=""):oi+=Dn:t.hasOwnProperty(Dn)?(ci+=t[Dn],ii[Tn]=parseInt(ci,16)*ni,ni=1,Tn=void 0,ci=""):ci+=Dn;return ti},We={codePages:["WinAnsiEncoding"],WinAnsiEncoding:je("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Qe={Unicode:{Courier:We,"Courier-Bold":We,"Courier-BoldOblique":We,"Courier-Oblique":We,Helvetica:We,"Helvetica-Bold":We,"Helvetica-BoldOblique":We,"Helvetica-Oblique":We,"Times-Roman":We,"Times-Bold":We,"Times-BoldItalic":We,"Times-Italic":We}},Cn={Unicode:{"Courier-Oblique":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":je("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":je("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":je("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:je("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:je("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":je("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:je("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":je("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":je("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":je("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Ae.events.push(["addFont",function(An){var En=An.font,Sn=Cn.Unicode[En.postScriptName];Sn&&(En.metadata.Unicode={},En.metadata.Unicode.widths=Sn.widths,En.metadata.Unicode.kerning=Sn.kerning);var Tn=Qe.Unicode[En.postScriptName];Tn&&(En.metadata.Unicode.encoding=Tn,En.encoding=Tn.codePages[0])}])}(E.API),function(Ae){var e=function(t){for(var Oe=t.length,ke=new Uint8Array(Oe),Be=0;Be<Oe;Be++)ke[Be]=t.charCodeAt(Be);return ke};Ae.API.events.push(["addFont",function(t){var Oe=void 0,ke=t.font,Be=t.instance;if(!ke.isStandardFont){if(Be===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+ke.postScriptName+"').");if(typeof(Oe=Be.existsFileInVFS(ke.postScriptName)===!1?Be.loadFile(ke.postScriptName):Be.getFileFromVFS(ke.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+ke.postScriptName+"').");(function(Ue,je){je=/^\x00\x01\x00\x00/.test(je)?e(je):e(u(je)),Ue.metadata=Ae.API.TTFFont.open(je),Ue.metadata.Unicode=Ue.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Ue.metadata.glyIdsUsed=[0]})(ke,Oe)}}])}(E),function(Ae){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es--HdZdgBg.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,Oe,ke,Be,Ue,je,We,Qe){if(isNaN(Oe)||isNaN(ke))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Be)||isNaN(Ue))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Cn=document.createElement("canvas");Cn.width=Be,Cn.height=Ue;var An=Cn.getContext("2d");An.fillStyle="#fff",An.fillRect(0,0,Cn.width,Cn.height);var En={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Sn=this;return e().then(function(Tn){return Tn.fromString(An,t,En)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Tn){return Tn.render(En)}).then(function(){Sn.addImage(Cn.toDataURL("image/jpeg",1),Oe,ke,Be,Ue,We,Qe)})}}(),E.API.putTotalPages=function(Ae){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(Ae,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(Ae,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var Oe=1;Oe<=this.internal.getNumberOfPages();Oe++)for(var ke=0;ke<this.internal.pages[Oe].length;ke++)this.internal.pages[Oe][ke]=this.internal.pages[Oe][ke].replace(e,t);return this},E.API.viewerPreferences=function(Ae,e){var t;Ae=Ae||{},e=e||!1;var Oe,ke,Be,Ue={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},je=Object.keys(Ue),We=[],Qe=0,Cn=0,An=0;function En(Tn,Dn){var ti,ni=!1;for(ti=0;ti<Tn.length;ti+=1)Tn[ti]===Dn&&(ni=!0);return ni}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Ue)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,Ae==="reset"||e===!0){var Sn=je.length;for(An=0;An<Sn;An+=1)t[je[An]].value=t[je[An]].defaultValue,t[je[An]].explicitSet=!1}if(_typeof(Ae)==="object"){for(ke in Ae)if(Be=Ae[ke],En(je,ke)&&Be!==void 0){if(t[ke].type==="boolean"&&typeof Be=="boolean")t[ke].value=Be;else if(t[ke].type==="name"&&En(t[ke].valueSet,Be))t[ke].value=Be;else if(t[ke].type==="integer"&&Number.isInteger(Be))t[ke].value=Be;else if(t[ke].type==="array"){for(Qe=0;Qe<Be.length;Qe+=1)if(Oe=!0,Be[Qe].length===1&&typeof Be[Qe][0]=="number")We.push(String(Be[Qe]-1));else if(Be[Qe].length>1){for(Cn=0;Cn<Be[Qe].length;Cn+=1)typeof Be[Qe][Cn]!="number"&&(Oe=!1);Oe===!0&&We.push([Be[Qe][0]-1,Be[Qe][1]-1].join(" "))}t[ke].value="["+We.join(" ")+"]"}else t[ke].value=t[ke].defaultValue;t[ke].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Tn,Dn=[];for(Tn in t)t[Tn].explicitSet===!0&&(t[Tn].type==="name"?Dn.push("/"+Tn+" /"+t[Tn].value):Dn.push("/"+Tn+" "+t[Tn].value));Dn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Dn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(Ae){var e=function(){var Oe='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',ke=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Be=unescape(encodeURIComponent(Oe)),Ue=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),je=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),We=unescape(encodeURIComponent("</x:xmpmeta>")),Qe=Be.length+Ue.length+je.length+ke.length+We.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Qe+" >>"),this.internal.write("stream"),this.internal.write(ke+Be+Ue+je+We),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Ae.addMetadata=function(Oe,ke){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:Oe,namespaceuri:ke||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(Ae){var e=Ae.API,t=e.pdfEscape16=function(Be,Ue){for(var je,We=Ue.metadata.Unicode.widths,Qe=["","0","00","000","0000"],Cn=[""],An=0,En=Be.length;An<En;++An){if(je=Ue.metadata.characterToGlyph(Be.charCodeAt(An)),Ue.metadata.glyIdsUsed.push(je),Ue.metadata.toUnicode[je]=Be.charCodeAt(An),We.indexOf(je)==-1&&(We.push(je),We.push([parseInt(Ue.metadata.widthOfGlyph(je),10)])),je=="0")return Cn.join("");je=je.toString(16),Cn.push(Qe[4-je.length],je)}return Cn.join("")},Oe=function(Be){var Ue,je,We,Qe,Cn,An,En;for(Cn=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,We=[],An=0,En=(je=Object.keys(Be).sort(function(Sn,Tn){return Sn-Tn})).length;An<En;An++)Ue=je[An],We.length>=100&&(Cn+=`
`+We.length+` beginbfchar
`+We.join(`
`)+`
endbfchar`,We=[]),Be[Ue]!==void 0&&Be[Ue]!==null&&typeof Be[Ue].toString=="function"&&(Qe=("0000"+Be[Ue].toString(16)).slice(-4),Ue=("0000"+(+Ue).toString(16)).slice(-4),We.push("<"+Ue+"><"+Qe+">"));return We.length&&(Cn+=`
`+We.length+` beginbfchar
`+We.join(`
`)+`
endbfchar
`),Cn+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Be){(function(Ue){var je=Ue.font,We=Ue.out,Qe=Ue.newObject,Cn=Ue.putStream;if(je.metadata instanceof Ae.API.TTFFont&&je.encoding==="Identity-H"){for(var An=je.metadata.Unicode.widths,En=je.metadata.subset.encode(je.metadata.glyIdsUsed,1),Sn="",Tn=0;Tn<En.length;Tn++)Sn+=String.fromCharCode(En[Tn]);var Dn=Qe();Cn({data:Sn,addLength1:!0,objectId:Dn}),We("endobj");var ti=Qe();Cn({data:Oe(je.metadata.toUnicode),addLength1:!0,objectId:ti}),We("endobj");var ni=Qe();We("<<"),We("/Type /FontDescriptor"),We("/FontName /"+F(je.fontName)),We("/FontFile2 "+Dn+" 0 R"),We("/FontBBox "+Ae.API.PDFObject.convert(je.metadata.bbox)),We("/Flags "+je.metadata.flags),We("/StemV "+je.metadata.stemV),We("/ItalicAngle "+je.metadata.italicAngle),We("/Ascent "+je.metadata.ascender),We("/Descent "+je.metadata.decender),We("/CapHeight "+je.metadata.capHeight),We(">>"),We("endobj");var ii=Qe();We("<<"),We("/Type /Font"),We("/BaseFont /"+F(je.fontName)),We("/FontDescriptor "+ni+" 0 R"),We("/W "+Ae.API.PDFObject.convert(An)),We("/CIDToGIDMap /Identity"),We("/DW 1000"),We("/Subtype /CIDFontType2"),We("/CIDSystemInfo"),We("<<"),We("/Supplement 0"),We("/Registry (Adobe)"),We("/Ordering ("+je.encoding+")"),We(">>"),We(">>"),We("endobj"),je.objectNumber=Qe(),We("<<"),We("/Type /Font"),We("/Subtype /Type0"),We("/ToUnicode "+ti+" 0 R"),We("/BaseFont /"+F(je.fontName)),We("/Encoding /"+je.encoding),We("/DescendantFonts ["+ii+" 0 R]"),We(">>"),We("endobj"),je.isAlreadyPutted=!0}})(Be)}]),e.events.push(["putFont",function(Be){(function(Ue){var je=Ue.font,We=Ue.out,Qe=Ue.newObject,Cn=Ue.putStream;if(je.metadata instanceof Ae.API.TTFFont&&je.encoding==="WinAnsiEncoding"){for(var An=je.metadata.rawData,En="",Sn=0;Sn<An.length;Sn++)En+=String.fromCharCode(An[Sn]);var Tn=Qe();Cn({data:En,addLength1:!0,objectId:Tn}),We("endobj");var Dn=Qe();Cn({data:Oe(je.metadata.toUnicode),addLength1:!0,objectId:Dn}),We("endobj");var ti=Qe();We("<<"),We("/Descent "+je.metadata.decender),We("/CapHeight "+je.metadata.capHeight),We("/StemV "+je.metadata.stemV),We("/Type /FontDescriptor"),We("/FontFile2 "+Tn+" 0 R"),We("/Flags 96"),We("/FontBBox "+Ae.API.PDFObject.convert(je.metadata.bbox)),We("/FontName /"+F(je.fontName)),We("/ItalicAngle "+je.metadata.italicAngle),We("/Ascent "+je.metadata.ascender),We(">>"),We("endobj"),je.objectNumber=Qe();for(var ni=0;ni<je.metadata.hmtx.widths.length;ni++)je.metadata.hmtx.widths[ni]=parseInt(je.metadata.hmtx.widths[ni]*(1e3/je.metadata.head.unitsPerEm));We("<</Subtype/TrueType/Type/Font/ToUnicode "+Dn+" 0 R/BaseFont/"+F(je.fontName)+"/FontDescriptor "+ti+" 0 R/Encoding/"+je.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Ae.API.PDFObject.convert(je.metadata.hmtx.widths)+">>"),We("endobj"),je.isAlreadyPutted=!0}})(Be)}]);var ke=function(Be){var Ue,je=Be.text||"",We=Be.x,Qe=Be.y,Cn=Be.options||{},An=Be.mutex||{},En=An.pdfEscape,Sn=An.activeFontKey,Tn=An.fonts,Dn=Sn,ti="",ni=0,ii="",si=Tn[Dn].encoding;if(Tn[Dn].encoding!=="Identity-H")return{text:je,x:We,y:Qe,options:Cn,mutex:An};for(ii=je,Dn=Sn,Array.isArray(je)&&(ii=je[0]),ni=0;ni<ii.length;ni+=1)Tn[Dn].metadata.hasOwnProperty("cmap")&&(Ue=Tn[Dn].metadata.cmap.unicode.codeMap[ii[ni].charCodeAt(0)]),Ue||ii[ni].charCodeAt(0)<256&&Tn[Dn].metadata.hasOwnProperty("Unicode")?ti+=ii[ni]:ti+="";var oi="";return parseInt(Dn.slice(1))<14||si==="WinAnsiEncoding"?oi=En(ti,Dn).split("").map(function(ci){return ci.charCodeAt(0).toString(16)}).join(""):si==="Identity-H"&&(oi=t(ti,Tn[Dn])),An.isHex=!0,{text:oi,x:We,y:Qe,options:Cn,mutex:An}};e.events.push(["postProcessText",function(Be){var Ue=Be.text||"",je=[],We={text:Ue,x:Be.x,y:Be.y,options:Be.options,mutex:Be.mutex};if(Array.isArray(Ue)){var Qe=0;for(Qe=0;Qe<Ue.length;Qe+=1)Array.isArray(Ue[Qe])&&Ue[Qe].length===3?je.push([ke(Object.assign({},We,{text:Ue[Qe][0]})).text,Ue[Qe][1],Ue[Qe][2]]):je.push(ke(Object.assign({},We,{text:Ue[Qe]})).text);Be.text=je}else Be.text=ke(Object.assign({},We,{text:Ue})).text}])}(E),function(Ae){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Ae.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},Ae.addFileToVFS=function(t,Oe){return e.call(this),this.internal.vFS[t]=Oe,this},Ae.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(Ae){Ae.__bidiEngine__=Ae.prototype.__bidiEngine__=function(Oe){var ke,Be,Ue,je,We,Qe,Cn,An=e,En=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Sn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Tn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Dn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},ti=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],ni=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ii=!1,si=0;this.__bidiEngine__={};var oi=function(ui){var li=ui.charCodeAt(),Ri=li>>8,Mi=Dn[Ri];return Mi!==void 0?An[256*Mi+(255&li)]:Ri===252||Ri===253?"AL":ni.test(Ri)?"L":Ri===8?"R":"N"},ci=function(ui){for(var li,Ri=0;Ri<ui.length;Ri++){if((li=oi(ui.charAt(Ri)))==="L")return!1;if(li==="R")return!0}return!1},Pi=function(ui,li,Ri,Mi){var Bi,er,nr,lr,hr=li[Mi];switch(hr){case"L":case"R":ii=!1;break;case"N":case"AN":break;case"EN":ii&&(hr="AN");break;case"AL":ii=!0,hr="R";break;case"WS":hr="N";break;case"CS":Mi<1||Mi+1>=li.length||(Bi=Ri[Mi-1])!=="EN"&&Bi!=="AN"||(er=li[Mi+1])!=="EN"&&er!=="AN"?hr="N":ii&&(er="AN"),hr=er===Bi?er:"N";break;case"ES":hr=(Bi=Mi>0?Ri[Mi-1]:"B")==="EN"&&Mi+1<li.length&&li[Mi+1]==="EN"?"EN":"N";break;case"ET":if(Mi>0&&Ri[Mi-1]==="EN"){hr="EN";break}if(ii){hr="N";break}for(nr=Mi+1,lr=li.length;nr<lr&&li[nr]==="ET";)nr++;hr=nr<lr&&li[nr]==="EN"?"EN":"N";break;case"NSM":if(Ue&&!je){for(lr=li.length,nr=Mi+1;nr<lr&&li[nr]==="NSM";)nr++;if(nr<lr){var ar=ui[Mi],wr=ar>=1425&&ar<=2303||ar===64286;if(Bi=li[nr],wr&&(Bi==="R"||Bi==="AL")){hr="R";break}}}hr=Mi<1||(Bi=li[Mi-1])==="B"?"N":Ri[Mi-1];break;case"B":ii=!1,ke=!0,hr=si;break;case"S":Be=!0,hr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ii=!1;break;case"BN":hr="N"}return hr},Ai=function(ui,li,Ri){var Mi=ui.split("");return Ri&&fi(Mi,Ri,{hiLevel:si}),Mi.reverse(),li&&li.reverse(),Mi.join("")},fi=function(ui,li,Ri){var Mi,Bi,er,nr,lr,hr=-1,ar=ui.length,wr=0,Fi=[],cr=si?Sn:En,rr=[];for(ii=!1,ke=!1,Be=!1,Bi=0;Bi<ar;Bi++)rr[Bi]=oi(ui[Bi]);for(er=0;er<ar;er++){if(lr=wr,Fi[er]=Pi(ui,rr,Fi,er),Mi=240&(wr=cr[lr][Tn[Fi[er]]]),wr&=15,li[er]=nr=cr[wr][5],Mi>0)if(Mi===16){for(Bi=hr;Bi<er;Bi++)li[Bi]=1;hr=-1}else hr=-1;if(cr[wr][6])hr===-1&&(hr=er);else if(hr>-1){for(Bi=hr;Bi<er;Bi++)li[Bi]=nr;hr=-1}rr[er]==="B"&&(li[er]=0),Ri.hiLevel|=nr}Be&&function(gr,vr,pr){for(var _r=0;_r<pr;_r++)if(gr[_r]==="S"){vr[_r]=si;for(var Ar=_r-1;Ar>=0&&gr[Ar]==="WS";Ar--)vr[Ar]=si}}(rr,li,ar)},Oi=function(ui,li,Ri,Mi,Bi){if(!(Bi.hiLevel<ui)){if(ui===1&&si===1&&!ke)return li.reverse(),void(Ri&&Ri.reverse());for(var er,nr,lr,hr,ar=li.length,wr=0;wr<ar;){if(Mi[wr]>=ui){for(lr=wr+1;lr<ar&&Mi[lr]>=ui;)lr++;for(hr=wr,nr=lr-1;hr<nr;hr++,nr--)er=li[hr],li[hr]=li[nr],li[nr]=er,Ri&&(er=Ri[hr],Ri[hr]=Ri[nr],Ri[nr]=er);wr=lr}wr++}}},Ni=function(ui,li,Ri){var Mi=ui.split(""),Bi={hiLevel:si};return Ri||(Ri=[]),fi(Mi,Ri,Bi),function(er,nr,lr){if(lr.hiLevel!==0&&Cn)for(var hr,ar=0;ar<er.length;ar++)nr[ar]===1&&(hr=ti.indexOf(er[ar]))>=0&&(er[ar]=ti[hr+1])}(Mi,Ri,Bi),Oi(2,Mi,li,Ri,Bi),Oi(1,Mi,li,Ri,Bi),Mi.join("")};return this.__bidiEngine__.doBidiReorder=function(ui,li,Ri){if(function(Bi,er){if(er)for(var nr=0;nr<Bi.length;nr++)er[nr]=nr;je===void 0&&(je=ci(Bi)),Qe===void 0&&(Qe=ci(Bi))}(ui,li),Ue||!We||Qe)if(Ue&&We&&je^Qe)si=je?1:0,ui=Ai(ui,li,Ri);else if(!Ue&&We&&Qe)si=je?1:0,ui=Ni(ui,li,Ri),ui=Ai(ui,li);else if(!Ue||je||We||Qe){if(Ue&&!We&&je^Qe)ui=Ai(ui,li),je?(si=0,ui=Ni(ui,li,Ri)):(si=1,ui=Ni(ui,li,Ri),ui=Ai(ui,li));else if(Ue&&je&&!We&&Qe)si=1,ui=Ni(ui,li,Ri),ui=Ai(ui,li);else if(!Ue&&!We&&je^Qe){var Mi=Cn;je?(si=1,ui=Ni(ui,li,Ri),si=0,Cn=!1,ui=Ni(ui,li,Ri),Cn=Mi):(si=0,ui=Ni(ui,li,Ri),ui=Ai(ui,li),si=1,Cn=!1,ui=Ni(ui,li,Ri),Cn=Mi,ui=Ai(ui,li))}}else si=0,ui=Ni(ui,li,Ri);else si=je?1:0,ui=Ni(ui,li,Ri);return ui},this.__bidiEngine__.setOptions=function(ui){ui&&(Ue=ui.isInputVisual,We=ui.isOutputVisual,je=ui.isInputRtl,Qe=ui.isOutputRtl,Cn=ui.isSymmetricSwapping)},this.__bidiEngine__.setOptions(Oe),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new Ae.__bidiEngine__({isInputVisual:!0});Ae.API.events.push(["postProcessText",function(Oe){var ke=Oe.text,Be=(Oe.x,Oe.y,Oe.options||{}),Ue=(Oe.mutex,Be.lang,[]);if(Be.isInputVisual=typeof Be.isInputVisual!="boolean"||Be.isInputVisual,t.setOptions(Be),Object.prototype.toString.call(ke)==="[object Array]"){var je=0;for(Ue=[],je=0;je<ke.length;je+=1)Object.prototype.toString.call(ke[je])==="[object Array]"?Ue.push([t.doBidiReorder(ke[je][0]),ke[je][1],ke[je][2]]):Ue.push([t.doBidiReorder(ke[je])]);Oe.text=Ue}else Oe.text=t.doBidiReorder(ke);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Ae(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Ae.open=function(e){return new Ae(e)},Ae.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Ae.prototype.registerTTF=function(){var e,t,Oe,ke,Be;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Ue,je,We,Qe;for(Qe=[],Ue=0,je=(We=this.bbox).length;Ue<je;Ue++)e=We[Ue],Qe.push(Math.round(e*this.scaleFactor));return Qe}).call(this),this.stemV=0,this.post.exists?(Oe=255&(ke=this.post.italic_angle),32768&(t=ke>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+Oe)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Be=this.familyClass)===1||Be===2||Be===3||Be===4||Be===5||Be===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Ae.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},Ae.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},Ae.prototype.widthOfString=function(e,t,Oe){var ke,Be,Ue,je;for(Ue=0,Be=0,je=(e=""+e).length;0<=je?Be<je:Be>je;Be=0<=je?++Be:--Be)ke=e.charCodeAt(Be),Ue+=this.widthOfGlyph(this.characterToGlyph(ke))+Oe*(1e3/t)||0;return Ue*(t/1e3)},Ae.prototype.lineHeight=function(e,t){var Oe;return t==null&&(t=!1),Oe=t?this.lineGap:0,(this.ascender+Oe-this.decender)/1e3*e},Ae}();var re,ne=function(){function Ae(e){this.data=e??[],this.pos=0,this.length=this.data.length}return Ae.prototype.readByte=function(){return this.data[this.pos++]},Ae.prototype.writeByte=function(e){return this.data[this.pos++]=e},Ae.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Ae.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Ae.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},Ae.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},Ae.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Ae.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},Ae.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},Ae.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},Ae.prototype.readString=function(e){var t,Oe;for(Oe=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)Oe[t]=String.fromCharCode(this.readByte());return Oe.join("")},Ae.prototype.writeString=function(e){var t,Oe,ke;for(ke=[],t=0,Oe=e.length;0<=Oe?t<Oe:t>Oe;t=0<=Oe?++t:--t)ke.push(this.writeByte(e.charCodeAt(t)));return ke},Ae.prototype.readShort=function(){return this.readInt16()},Ae.prototype.writeShort=function(e){return this.writeInt16(e)},Ae.prototype.readLongLong=function(){var e,t,Oe,ke,Be,Ue,je,We;return e=this.readByte(),t=this.readByte(),Oe=this.readByte(),ke=this.readByte(),Be=this.readByte(),Ue=this.readByte(),je=this.readByte(),We=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^Oe)+4294967296*(255^ke)+16777216*(255^Be)+65536*(255^Ue)+256*(255^je)+(255^We)+1):72057594037927940*e+281474976710656*t+1099511627776*Oe+4294967296*ke+16777216*Be+65536*Ue+256*je+We},Ae.prototype.writeLongLong=function(e){var t,Oe;return t=Math.floor(e/4294967296),Oe=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(Oe>>24&255),this.writeByte(Oe>>16&255),this.writeByte(Oe>>8&255),this.writeByte(255&Oe)},Ae.prototype.readInt=function(){return this.readInt32()},Ae.prototype.writeInt=function(e){return this.writeInt32(e)},Ae.prototype.read=function(e){var t,Oe;for(t=[],Oe=0;0<=e?Oe<e:Oe>e;Oe=0<=e?++Oe:--Oe)t.push(this.readByte());return t},Ae.prototype.write=function(e){var t,Oe,ke,Be;for(Be=[],Oe=0,ke=e.length;Oe<ke;Oe++)t=e[Oe],Be.push(this.writeByte(t));return Be},Ae}(),ie=function(){var Ae;function e(t){var Oe,ke,Be;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},ke=0,Be=this.tableCount;0<=Be?ke<Be:ke>Be;ke=0<=Be?++ke:--ke)Oe={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[Oe.tag]=Oe}return e.prototype.encode=function(t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn;for(Dn in Sn=Object.keys(t).length,We=Math.log(2),An=16*Math.floor(Math.log(Sn)/We),Ue=Math.floor(An/We),Cn=16*Sn-An,(ke=new ne).writeInt(this.scalarType),ke.writeShort(Sn),ke.writeShort(An),ke.writeShort(Ue),ke.writeShort(Cn),Be=16*Sn,Qe=ke.pos+Be,je=null,Tn=[],t)for(En=t[Dn],ke.writeString(Dn),ke.writeInt(Ae(En)),ke.writeInt(Qe),ke.writeInt(En.length),Tn=Tn.concat(En),Dn==="head"&&(je=Qe),Qe+=En.length;Qe%4;)Tn.push(0),Qe++;return ke.write(Tn),Oe=2981146554-Ae(ke.data),ke.pos=je+8,ke.writeUInt32(Oe),ke.data},Ae=function(t){var Oe,ke,Be,Ue;for(t=ve.call(t);t.length%4;)t.push(0);for(Be=new ne(t),ke=0,Oe=0,Ue=t.length;Oe<Ue;Oe=Oe+=4)ke+=Be.readUInt32();return 4294967295&ke},e}(),ae={}.hasOwnProperty,oe=function(Ae,e){for(var t in e)ae.call(e,t)&&(Ae[t]=e[t]);function Oe(){this.constructor=Ae}return Oe.prototype=e.prototype,Ae.prototype=new Oe,Ae.__super__=e.prototype,Ae};re=function(){function Ae(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return Ae.prototype.parse=function(){},Ae.prototype.encode=function(){},Ae.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Ae}();var se=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var Oe;return(Oe=new ne).writeInt(this.version),Oe.writeInt(this.revision),Oe.writeInt(this.checkSumAdjustment),Oe.writeInt(this.magicNumber),Oe.writeShort(this.flags),Oe.writeShort(this.unitsPerEm),Oe.writeLongLong(this.created),Oe.writeLongLong(this.modified),Oe.writeShort(this.xMin),Oe.writeShort(this.yMin),Oe.writeShort(this.xMax),Oe.writeShort(this.yMax),Oe.writeShort(this.macStyle),Oe.writeShort(this.lowestRecPPEM),Oe.writeShort(this.fontDirectionHint),Oe.writeShort(t),Oe.writeShort(this.glyphDataFormat),Oe.data},e}(),ce=function(){function Ae(e,t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),An=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(We=0;We<256;++We)this.codeMap[We]=e.readByte();break;case 4:for(Sn=e.readUInt16(),En=Sn/2,e.pos+=6,Be=function(){var oi,ci;for(ci=[],We=oi=0;0<=En?oi<En:oi>En;We=0<=En?++oi:--oi)ci.push(e.readUInt16());return ci}(),e.pos+=2,Dn=function(){var oi,ci;for(ci=[],We=oi=0;0<=En?oi<En:oi>En;We=0<=En?++oi:--oi)ci.push(e.readUInt16());return ci}(),Qe=function(){var oi,ci;for(ci=[],We=oi=0;0<=En?oi<En:oi>En;We=0<=En?++oi:--oi)ci.push(e.readUInt16());return ci}(),Cn=function(){var oi,ci;for(ci=[],We=oi=0;0<=En?oi<En:oi>En;We=0<=En?++oi:--oi)ci.push(e.readUInt16());return ci}(),ke=(this.length-e.pos+this.offset)/2,je=function(){var oi,ci;for(ci=[],We=oi=0;0<=ke?oi<ke:oi>ke;We=0<=ke?++oi:--oi)ci.push(e.readUInt16());return ci}(),We=ni=0,si=Be.length;ni<si;We=++ni)for(ti=Be[We],Oe=ii=Tn=Dn[We];Tn<=ti?ii<=ti:ii>=ti;Oe=Tn<=ti?++ii:--ii)Cn[We]===0?Ue=Oe+Qe[We]:(Ue=je[Cn[We]/2+(Oe-Tn)-(En-We)]||0)!==0&&(Ue+=Qe[We]),this.codeMap[Oe]=65535&Ue}e.pos=An}return Ae.encode=function(e,t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni,ii,si,oi,ci,Pi,Ai,fi,Oi,Ni,ui,li,Ri,Mi,Bi,er,nr,lr,hr,ar,wr,Fi,cr,rr,gr,vr,pr,_r,Ar,Sr,Hr,es;switch(Mi=new ne,Ue=Object.keys(e).sort(function(ir,mr){return ir-mr}),t){case"macroman":for(Dn=0,ti=function(){var ir=[];for(Tn=0;Tn<256;++Tn)ir.push(0);return ir}(),ii={0:0},Be={},Bi=0,hr=Ue.length;Bi<hr;Bi++)ii[Ar=e[ke=Ue[Bi]]]==null&&(ii[Ar]=++Dn),Be[ke]={old:e[ke],new:ii[e[ke]]},ti[ke]=ii[e[ke]];return Mi.writeUInt16(1),Mi.writeUInt16(0),Mi.writeUInt32(12),Mi.writeUInt16(0),Mi.writeUInt16(262),Mi.writeUInt16(0),Mi.write(ti),{charMap:Be,subtable:Mi.data,maxGlyphID:Dn+1};case"unicode":for(li=[],An=[],si=0,ii={},Oe={},ni=Qe=null,er=0,ar=Ue.length;er<ar;er++)ii[ci=e[ke=Ue[er]]]==null&&(ii[ci]=++si),Oe[ke]={old:ci,new:ii[ci]},je=ii[ci]-ke,ni!=null&&je===Qe||(ni&&An.push(ni),li.push(ke),Qe=je),ni=ke;for(ni&&An.push(ni),An.push(65535),li.push(65535),Ni=2*(Oi=li.length),fi=2*Math.pow(Math.log(Oi)/Math.LN2,2),En=Math.log(fi/2)/Math.LN2,Ai=2*Oi-fi,We=[],Pi=[],Sn=[],Tn=nr=0,wr=li.length;nr<wr;Tn=++nr){if(ui=li[Tn],Cn=An[Tn],ui===65535){We.push(0),Pi.push(0);break}if(ui-(Ri=Oe[ui].new)>=32768)for(We.push(0),Pi.push(2*(Sn.length+Oi-Tn)),ke=lr=ui;ui<=Cn?lr<=Cn:lr>=Cn;ke=ui<=Cn?++lr:--lr)Sn.push(Oe[ke].new);else We.push(Ri-ui),Pi.push(0)}for(Mi.writeUInt16(3),Mi.writeUInt16(1),Mi.writeUInt32(12),Mi.writeUInt16(4),Mi.writeUInt16(16+8*Oi+2*Sn.length),Mi.writeUInt16(0),Mi.writeUInt16(Ni),Mi.writeUInt16(fi),Mi.writeUInt16(En),Mi.writeUInt16(Ai),pr=0,Fi=An.length;pr<Fi;pr++)ke=An[pr],Mi.writeUInt16(ke);for(Mi.writeUInt16(0),_r=0,cr=li.length;_r<cr;_r++)ke=li[_r],Mi.writeUInt16(ke);for(Sr=0,rr=We.length;Sr<rr;Sr++)je=We[Sr],Mi.writeUInt16(je);for(Hr=0,gr=Pi.length;Hr<gr;Hr++)oi=Pi[Hr],Mi.writeUInt16(oi);for(es=0,vr=Sn.length;es<vr;es++)Dn=Sn[es],Mi.writeUInt16(Dn);return{charMap:Oe,subtable:Mi.data,maxGlyphID:si+1}}},Ae}(),ue=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(t){var Oe,ke,Be;for(t.pos=this.offset,this.version=t.readUInt16(),Be=t.readUInt16(),this.tables=[],this.unicode=null,ke=0;0<=Be?ke<Be:ke>Be;ke=0<=Be?++ke:--ke)Oe=new ce(t,this.offset),this.tables.push(Oe),Oe.isUnicode&&this.unicode==null&&(this.unicode=Oe);return!0},e.encode=function(t,Oe){var ke,Be;return Oe==null&&(Oe="macroman"),ke=ce.encode(t,Oe),(Be=new ne).writeUInt16(0),Be.writeUInt16(1),ke.table=Be.data.concat(ke.subtable),ke},e}(),he=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var Oe,ke;for(ke=[],Oe=0;Oe<10;++Oe)ke.push(t.readByte());return ke}(),this.charRange=function(){var Oe,ke;for(ke=[],Oe=0;Oe<4;++Oe)ke.push(t.readInt());return ke}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var Oe,ke;for(ke=[],Oe=0;Oe<2;Oe=++Oe)ke.push(t.readInt());return ke}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(t){var Oe,ke,Be;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var Ue;for(ke=t.readUInt16(),this.glyphNameIndex=[],Ue=0;0<=ke?Ue<ke:Ue>ke;Ue=0<=ke?++Ue:--Ue)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Be=[];t.pos<this.offset+this.length;)Oe=t.readByte(),Be.push(this.names.push(t.readString(Oe)));return Be;case 151552:return ke=t.readUInt16(),this.offsets=t.read(ke);case 196608:break;case 262144:return this.map=(function(){var je,We,Qe;for(Qe=[],Ue=je=0,We=this.file.maxp.numGlyphs;0<=We?je<We:je>We;Ue=0<=We?++je:--je)Qe.push(t.readUInt32());return Qe}).call(this)}},e}(),de=function(Ae,e){this.raw=Ae,this.length=Ae.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn;for(t.pos=this.offset,t.readShort(),Oe=t.readShort(),We=t.readShort(),ke=[],Ue=0;0<=Oe?Ue<Oe:Ue>Oe;Ue=0<=Oe?++Ue:--Ue)ke.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+We+t.readShort()});for(Qe={},Ue=An=0,En=ke.length;An<En;Ue=++An)Be=ke[Ue],t.pos=Be.offset,Cn=t.readString(Be.length),je=new de(Cn,Be),Qe[Sn=Be.nameID]==null&&(Qe[Sn]=[]),Qe[Be.nameID].push(je);this.strings=Qe,this.copyright=Qe[0],this.fontFamily=Qe[1],this.fontSubfamily=Qe[2],this.uniqueSubfamily=Qe[3],this.fontName=Qe[4],this.version=Qe[5];try{this.postscriptName=Qe[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Qe[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Qe[7],this.manufacturer=Qe[8],this.designer=Qe[9],this.description=Qe[10],this.vendorUrl=Qe[11],this.designerUrl=Qe[12],this.license=Qe[13],this.licenseUrl=Qe[14],this.preferredFamily=Qe[15],this.preferredSubfamily=Qe[17],this.compatibleFull=Qe[18],this.sampleText=Qe[19]},e}(),ge=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(t){var Oe,ke,Be,Ue,je,We,Qe;for(t.pos=this.offset,this.metrics=[],Oe=0,We=this.file.hhea.numberOfMetrics;0<=We?Oe<We:Oe>We;Oe=0<=We?++Oe:--Oe)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Be=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Cn,An;for(An=[],Oe=Cn=0;0<=Be?Cn<Be:Cn>Be;Oe=0<=Be?++Cn:--Cn)An.push(t.readInt16());return An}(),this.widths=(function(){var Cn,An,En,Sn;for(Sn=[],Cn=0,An=(En=this.metrics).length;Cn<An;Cn++)Ue=En[Cn],Sn.push(Ue.advance);return Sn}).call(this),ke=this.widths[this.widths.length-1],Qe=[],Oe=je=0;0<=Be?je<Be:je>Be;Oe=0<=Be?++je:--je)Qe.push(this.widths.push(ke));return Qe},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En;return t in this.cache?this.cache[t]:(Ue=this.file.loca,Oe=this.file.contents,ke=Ue.indexOf(t),(Be=Ue.lengthOf(t))===0?this.cache[t]=null:(Oe.pos=this.offset+ke,je=(We=new ne(Oe.read(Be))).readShort(),Cn=We.readShort(),En=We.readShort(),Qe=We.readShort(),An=We.readShort(),this.cache[t]=je===-1?new we(We,Cn,En,Qe,An):new ye(We,je,Cn,En,Qe,An),this.cache[t]))},e.prototype.encode=function(t,Oe,ke){var Be,Ue,je,We,Qe;for(je=[],Ue=[],We=0,Qe=Oe.length;We<Qe;We++)Be=t[Oe[We]],Ue.push(je.length),Be&&(je=je.concat(Be.encode(ke)));return Ue.push(je.length),{table:je,offsets:Ue}},e}(),ye=function(){function Ae(e,t,Oe,ke,Be,Ue){this.raw=e,this.numberOfContours=t,this.xMin=Oe,this.yMin=ke,this.xMax=Be,this.yMax=Ue,this.compound=!1}return Ae.prototype.encode=function(){return this.raw.data},Ae}(),we=function(){function Ae(e,t,Oe,ke,Be){var Ue,je;for(this.raw=e,this.xMin=t,this.yMin=Oe,this.xMax=ke,this.yMax=Be,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Ue=this.raw;je=Ue.readShort(),this.glyphOffsets.push(Ue.pos),this.glyphIDs.push(Ue.readUInt16()),32&je;)Ue.pos+=1&je?4:2,128&je?Ue.pos+=8:64&je?Ue.pos+=4:8&je&&(Ue.pos+=2)}return Ae.prototype.encode=function(){var e,t,Oe;for(t=new ne(ve.call(this.raw.data)),e=0,Oe=this.glyphIDs.length;e<Oe;++e)t.pos=this.glyphOffsets[e];return t.data},Ae}(),Ne=function(Ae){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(t){var Oe,ke;return t.pos=this.offset,Oe=this.file.head.indexToLocFormat,this.offsets=Oe===0?(function(){var Be,Ue;for(Ue=[],ke=0,Be=this.length;ke<Be;ke+=2)Ue.push(2*t.readUInt16());return Ue}).call(this):(function(){var Be,Ue;for(Ue=[],ke=0,Be=this.length;ke<Be;ke+=4)Ue.push(t.readUInt32());return Ue}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,Oe){for(var ke=new Uint32Array(this.offsets.length),Be=0,Ue=0,je=0;je<ke.length;++je)if(ke[je]=Be,Ue<Oe.length&&Oe[Ue]==je){++Ue,ke[je]=Be;var We=this.offsets[je],Qe=this.offsets[je+1]-We;Qe>0&&(Be+=Qe)}for(var Cn=new Array(4*ke.length),An=0;An<ke.length;++An)Cn[4*An+3]=255&ke[An],Cn[4*An+2]=(65280&ke[An])>>8,Cn[4*An+1]=(16711680&ke[An])>>16,Cn[4*An]=(4278190080&ke[An])>>24;return Cn},e}(),Le=function(){function Ae(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return Ae.prototype.generateCmap=function(){var e,t,Oe,ke,Be;for(t in ke=this.font.cmap.tables[0].codeMap,e={},Be=this.subset)Oe=Be[t],e[t]=ke[Oe];return e},Ae.prototype.glyphsFor=function(e){var t,Oe,ke,Be,Ue,je,We;for(ke={},Ue=0,je=e.length;Ue<je;Ue++)ke[Be=e[Ue]]=this.font.glyf.glyphFor(Be);for(Be in t=[],ke)(Oe=ke[Be])!=null&&Oe.compound&&t.push.apply(t,Oe.glyphIDs);if(t.length>0)for(Be in We=this.glyphsFor(t))Oe=We[Be],ke[Be]=Oe;return ke},Ae.prototype.encode=function(e,t){var Oe,ke,Be,Ue,je,We,Qe,Cn,An,En,Sn,Tn,Dn,ti,ni;for(ke in Oe=ue.encode(this.generateCmap(),"unicode"),Ue=this.glyphsFor(e),Sn={0:0},ni=Oe.charMap)Sn[(We=ni[ke]).old]=We.new;for(Tn in En=Oe.maxGlyphID,Ue)Tn in Sn||(Sn[Tn]=En++);return Cn=function(ii){var si,oi;for(si in oi={},ii)oi[ii[si]]=si;return oi}(Sn),An=Object.keys(Cn).sort(function(ii,si){return ii-si}),Dn=function(){var ii,si,oi;for(oi=[],ii=0,si=An.length;ii<si;ii++)je=An[ii],oi.push(Cn[je]);return oi}(),Be=this.font.glyf.encode(Ue,Dn,Sn),Qe=this.font.loca.encode(Be.offsets,Dn),ti={cmap:this.font.cmap.raw(),glyf:Be.table,loca:Qe,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(ti["OS/2"]=this.font.os2.raw()),this.font.directory.encode(ti)},Ae}();E.API.PDFObject=function(){var Ae;function e(){}return Ae=function(t,Oe){return(Array(Oe+1).join("0")+t).slice(-Oe)},e.convert=function(t){var Oe,ke,Be,Ue;if(Array.isArray(t))return"["+function(){var je,We,Qe;for(Qe=[],je=0,We=t.length;je<We;je++)Oe=t[je],Qe.push(e.convert(Oe));return Qe}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+Ae(t.getUTCFullYear(),4)+Ae(t.getUTCMonth(),2)+Ae(t.getUTCDate(),2)+Ae(t.getUTCHours(),2)+Ae(t.getUTCMinutes(),2)+Ae(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(ke in Be=["<<"],t)Ue=t[ke],Be.push("/"+ke+" "+e.convert(Ue));return Be.push(">>"),Be.join(`
`)}return""+t},e}();const _export_sfc=(Ae,e)=>{const t=Ae.__vccOpts||Ae;for(const[Oe,ke]of e)t[Oe]=ke;return t},_hoisted_1$c={class:"mt-10"},_hoisted_2$6={class:"print-preview-container"},__default__$i={},_sfc_main$o=Object.assign(__default__$i,{__name:"PrintModal",props:{visibility:Boolean,printOptions:Object},setup(Ae,{expose:e}){useCssVars(hr=>({"6f67f528":unref(er),"2765ae41":unref(Bi),"03aea05c":ti,"602ad150":unref(Mi),"139959d5":unref(Ri),c1f4adaa:unref(li)}));const t=useEulerian(),Oe=useMapStore(),ke=inject("selectedLayers"),Be="Imprimer une carte",Ue="xl",je=[{label:"Portrait",value:"portrait",icon:"md-cropportrait-sharp"},{label:"Paysage",value:"landscape",icon:"md-croplandscape-sharp"}],We=ref(!1),Qe=()=>{We.value=!0,t.pause()},Cn=()=>{We.value=!1,t.resume()};e({onModalPrintClose:Cn,onModalPrintOpen:Qe});const An=ref(null),En=ref(null),Sn=ref(null),Tn=ref(null),Dn=ref(null),ti="10px",ni=.264583333,ii=ref(!0),si=ref(!1),oi=ref("Ma carte"),ci=ref("portrait"),Pi=ref(0),Ai=ref("A4"),fi=computed(()=>{let hr={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};return{width:hr[Ai.value].width,height:hr[Ai.value].height}}),Oi=reactive(useElementSize(Sn,{width:0,height:0},{box:"border-box"})),Ni=reactive(useElementSize(Tn,{width:0,height:0},{box:"border-box"})),ui=reactive(useElementSize(En,{width:0,height:0},{box:"border-box"})),li=computed(()=>{if(ci.value=="portrait")return Math.floor((Oi.height-ui.height)*ni)/fi.value.height;if(ci.value=="landscape"){let hr=Math.floor((Oi.width-Ni.width-parseInt(ti))*ni)/fi.value.height;return fi.value.height*hr+ui.height<Oi.height?Math.floor((Oi.height-ui.height)*ni)/fi.value.width:hr}}),Ri=computed(()=>{if(ci.value=="portrait")return fi.value.height+"mm";if(ci.value=="landscape")return fi.value.width+"mm"}),Mi=computed(()=>{if(ci.value=="portrait")return fi.value.width+"mm";if(ci.value=="landscape")return fi.value.height+"mm"}),Bi=computed(()=>Oi.height+"px"),er=computed(()=>{if(ci.value=="portrait")return fi.value.width*li.value/ni+"px";if(ci.value=="landscape")return fi.value.height*li.value/ni+"px"}),nr=()=>{const hr={orientation:ci.value,unit:"mm",format:[parseInt(Ri.value),parseInt(Mi.value)]},ar=new E(hr),wr=parseInt(Pi.value),Fi=An.value.mapRef.getElementsByTagName("canvas")[0].width,cr=An.value.mapRef.getElementsByTagName("canvas")[0].height,rr=An.value.mapRef.getElementsByTagName("canvas")[0];if(An.value.mapRef.getElementsByTagName("canvas").length<2){var gr=document.createElement("canvas");gr.classList=["fixedoverlay"],gr.width=Fi,gr.height=cr,An.value.mapRef.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",gr)}else var gr=An.value.mapRef.getElementsByTagName("canvas")[1];gr.style.display="none",gr.getContext("2d").reset();const pr=rr.toDataURL("image/png"),_r=Fi*ni-wr*2,Ar=(cr-ui.height)*ni-wr*2,Sr=wr,Hr=ui.height*ni+wr;if(ar.addImage(pr,"PNG",Sr,Hr,_r,Ar),ii.value){const es=An.value.mapRef.getElementsByClassName("ol-scale-line")[0],ir=es.children[0],mr=getComputedStyle(es),dr=getComputedStyle(ir),tr=parseInt(mr.left),Dr=parseInt(mr.bottom),Nr=ir.innerHTML,Pr=parseInt(dr.width),kr=parseInt(dr.lineHeight),Rr=cr-Dr-kr,Tr=gr.getContext("2d");Tr.beginPath(),Tr.fillStyle="rgba(255, 255, 255, 0.75)",Tr.rect(tr,Rr,Pr,kr),Tr.fillRect(tr,Rr,Pr,kr),Tr.font=dr.font,Tr.textAlign="center",Tr.fillStyle="#000000",Tr.fillText(Nr,tr+Pr/2,Rr+kr/2),Tr.beginPath(),Tr.moveTo(tr,Rr),Tr.lineTo(tr,Rr+kr),Tr.lineTo(tr,Rr+kr),Tr.lineTo(tr+Pr,Rr+kr),Tr.lineTo(tr+Pr,Rr),Tr.lineWidth=1,Tr.lineCap="round",Tr.strokeStyle="#666666",Tr.stroke();const Er=gr.toDataURL("image/png");ar.addImage(Er,"PNG",Sr,Hr,_r,Ar)}ar.save("carte.pdf")},lr={id:"4",units:"metric",bar:!1};return(hr,ar)=>{const wr=Yi,Fi=rd,cr=nt$1,rr=Ie,gr=_sfc_main$p,vr=_sfc_main$I,pr=Vt$1;return openBlock(),createBlock(pr,{opened:unref(We),title:Be,size:Ue,onClose:Cn},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:Sn,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:Tn,class:"print-form"},[createVNode(wr,{inline:!1,modelValue:unref(ci),"onUpdate:modelValue":ar[0]||(ar[0]=_r=>isRef(ci)?ci.value=_r:null),options:je,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>ar[3]||(ar[3]=[createTextVNode("Mise en Page")])),_:1},8,["modelValue"]),createVNode(Fi,{modelValue:unref(Ai),"onUpdate:modelValue":ar[1]||(ar[1]=_r=>isRef(Ai)?Ai.value=_r:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createBaseVNode("div",_hoisted_1$c,[createVNode(cr,{modelValue:unref(ii),"onUpdate:modelValue":ar[2]||(ar[2]=_r=>isRef(ii)?ii.value=_r:null),name:"checkbox-simple",label:unref(ii)?"Désactiver l'échelle":"Afficher l'échelle"},null,8,["modelValue","label"])]),createVNode(rr,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:nr})],512),createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",{ref_key:"printPreview",ref:Dn,class:"print-preview"},[unref(si)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:En,class:"map-title"},toDisplayString(unref(oi)),513)):createCommentVNode("",!0),unref(We)?(openBlock(),createBlock(_sfc_main$N,{key:1,class:"map",ref_key:"refMap",ref:An,"map-Id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(printMap),center:unref(Oe).center,zoom:unref(Oe).zoom},null,8,["map-Id","center","zoom"]),createVNode(gr,{"map-Id":unref(printMap),"selected-layers":unref(ke)},null,8,["map-Id","selected-layers"]),createVNode(vr,{visibility:unref(ii),"scale-line-options":lr,"map-id":unref(printMap)},null,8,["visibility","map-id"])]),_:1},8,["map-Id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])}}}),PrintModal=_export_sfc(_sfc_main$o,[["__scopeId","data-v-89871f69"]]),__default__$h={},_sfc_main$n=Object.assign(__default__$h,{__name:"ShareModal",setup(Ae,{expose:e}){const t=useEulerian(),Oe=useDataStore(),ke=useMapStore(),Be="Partager une carte",Ue="lg",je=ref(!1),We=()=>{je.value=!0,t.pause()},Qe=()=>{je.value=!1,t.resume()},Cn=Oe.getContacts(),An=computed(()=>encodeURI(ke.permalink).replaceAll("&","%26")),En=computed(()=>({address:Cn.mail,subject:"Cartes à consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A${An.value}`})),Sn=computed(()=>({to:`mailto:${En.value.address}?subject=${En.value.subject}&body=${En.value.body}`,label:"Envoyer un mail"})),Tn=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:Cn.networks.facebook+"?display=popup&u="+ke.permalink},{name:"linkedin",label:"Partager sur LinkedIn",url:Cn.networks.linkedin+"?url="+ke.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:Cn.networks.instagram}]),Dn=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${ke.permalinkShare}"
    allowfullscreen>
  </iframe>`);ref("");const{copy:ti}=useClipboard({});ref(null);const ni="cil:copy",ii=ref(.8325),si=computed(()=>({scale:ii.value,name:ni}));return onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),e({onModalShareOpen:We,onModalShareClose:Qe}),(oi,ci)=>{const Pi=fd$1,Ai=Ie,fi=qe,Oi=Vt$1;return openBlock(),createBlock(Oi,{opened:unref(je),title:Be,size:Ue,onClose:Qe},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(Pi,{copyLabel:"Copier dans le presse-papier",mail:unref(Sn),networks:unref(Tn),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(fi,{modelValue:unref(ke).permalink,"onUpdate:modelValue":ci[1]||(ci[1]=Ni=>unref(ke).permalink=Ni),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"",descriptionId:""},{label:withCtx(()=>[ci[4]||(ci[4]=createTextVNode(" Lien permanent vers la carte ")),createVNode(Ai,{tertiary:"",noOutline:!0,onClick:ci[0]||(ci[0]=Ni=>unref(ti)(unref(ke).permalink))},{default:withCtx(()=>[createVNode(unref(le$1),normalizeProps(guardReactiveProps(unref(si))),null,16)]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(fi,{modelValue:unref(Dn),"onUpdate:modelValue":ci[3]||(ci[3]=Ni=>isRef(Dn)?Dn.value=Ni:null),placeholder:"",isTextarea:"","label-visible":"",readonly:"",descriptionId:"",style:{height:"200px"}},{label:withCtx(()=>[ci[5]||(ci[5]=createTextVNode(" Copiez le code HTML pour intégrer la carte dans un site ")),createVNode(Ai,{tertiary:"",noOutline:!0,onClick:ci[2]||(ci[2]=Ni=>unref(ti)(unref(Dn)))},{default:withCtx(()=>[createVNode(unref(le$1),normalizeProps(guardReactiveProps(unref(si))),null,16)]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])}}}),ShareModal=_export_sfc(_sfc_main$n,[["__scopeId","data-v-dd1ffb30"]]),__default__$g={name:"Controls"},_sfc_main$m=Object.assign(__default__$g,{props:{controlOptions:Array,mapId:String},setup(Ae){const e=Ae,t=useMapStore(),Oe=useDataStore();dist.useLogger().debug(e.controlOptions);const Be={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:"WMTS,WMS,TMS",filterWMTSPriority:!0,filterLayersPriority:Oe.getFeatured().toString(),serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:10},prettifyResults:!0,maximumEntries:5},markerUrl:IconGeolocationSVG},Ue={options:{id:"2",position:useControlsExtensionPosition().layerSwitcherOptions,collapsed:!0,panel:!0,counter:!0}},je={id:"3",position:useControlsExtensionPosition().legendsOptions,panel:!0,auto:!0,draggable:!1},We={id:"4",units:"metric",bar:!1},Qe={id:"5",position:useControlsExtensionPosition().territoriesOptions,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},Cn={id:"6",position:useControlsExtensionPosition().getFeatureInfoOptions},An={id:"7",position:useControlsExtensionPosition().overviewMapOptions},En={id:"8",position:useControlsExtensionPosition().fullscreenOptions},Sn={position:useControlsExtensionPosition().zoomOptions,id:"9"},Tn={position:useControlsExtensionPosition().controlListOptions,id:"10",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},Dn={id:"11",position:"top-right",gutter:!1,listable:!0},ti={id:"12",position:useControlsExtensionPosition().reverseGeocodeOptions,gutter:!1,listable:!0},ni={position:useControlsExtensionPosition().isocurveOptions,id:"13",gutter:!1,listable:!0},ii={position:useControlsExtensionPosition().routeOptions,id:"14",gutter:!1,listable:!0},si={id:"15",position:useControlsExtensionPosition().measureLengthOptions,gutter:!1,listable:!0},oi={position:useControlsExtensionPosition().measureAreaOptions,id:"16",gutter:!1,listable:!0},ci={position:useControlsExtensionPosition().measureAzimuthOptions,gutter:!1,listable:!0,id:"17"},Pi={position:useControlsExtensionPosition().mousePositionOptions,id:"18",gutter:!1,listable:!0,systems:[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France métropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France métropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France métropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Réunion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynésie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynésie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynésie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynésie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (Île de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (Îles Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (Îles Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (Îles St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Stéréographique polaire (Terre Adélie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Calédonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},Ai={id:"19",position:useControlsExtensionPosition().elevationPathOptions,gutter:!1,listable:!0},fi={id:"20",position:useControlsExtensionPosition().layerImportOptions,gutter:!1,listable:!0},Oi=inject("refPrintModal"),Ni=inject("modalShareRef"),ui=computed(()=>({contextMenuItemsOptions:[{text:"Imprimer la carte",callback:function(){Oi.value.onModalPrintOpen()}},{text:"Partager la carte",callback:function(){Ni.value.onModalShareOpen()}},{text:"Ajouter des données",callback:()=>{t.getmenuCatalogueButton().firstChild.click()}}]}));return(li,Ri)=>{const Mi=_sfc_main$K,Bi=_sfc_main$L;return openBlock(),createElementBlock(Fragment,null,[Ae.controlOptions?(openBlock(),createBlock(_sfc_main$F,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":Ue,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":je,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":ii,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":ni,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(Mi,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":ti,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(Bi,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":En,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$G,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":Sn,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$J,{key:7,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Be,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$u,{key:8,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":Cn,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$I,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":We,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$H,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":An,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$v,{key:11,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":Qe,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":si,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":oi,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$y,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":ci,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$x,{key:15,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":Pi,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:16,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":Dn,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$w,{key:17,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":Ai,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$t,{key:18,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":fi,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$s,{key:19,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":Tn,"map-id":Ae.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Ae.controlOptions?(openBlock(),createBlock(_sfc_main$r,{key:20,visibility:e.controlOptions.includes(unref(useControls).ContextMenu.id),analytic:unref(useControls).ContextMenu.analytic,"context-menu-options":unref(ui),"map-id":Ae.mapId},null,8,["visibility","analytic","context-menu-options","map-id"])):createCommentVNode("",!0)],64)}}}),__default__$f={name:"Carto"},_sfc_main$l=Object.assign(__default__$f,{props:{selectedControls:Array,selectedLayers:Object},setup(Ae){const e=Ae,t=useMapStore(),Oe=ref(null),ke=computed(()=>Oe.value&&Oe.value.mapRef);return(Be,Ue)=>(openBlock(),createBlock(_sfc_main$N,{class:"map",ref_key:"refMap",ref:Oe,mapId:unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(mainMap),center:unref(t).center,zoom:unref(t).zoom},null,8,["map-Id","center","zoom"]),unref(ke)?(openBlock(),createBlock(_sfc_main$m,{key:0,"control-options":e.selectedControls,"map-id":unref(mainMap)},null,8,["control-options","map-id"])):createCommentVNode("",!0),createVNode(_sfc_main$p,{"map-Id":unref(mainMap),"selected-layers":e.selectedLayers},null,8,["map-Id","selected-layers"])]),_:1},8,["mapId"]))}}),Carto=_export_sfc(_sfc_main$l,[["__scopeId","data-v-9583e6b7"]]),_hoisted_1$b={class:"menu-content-list"},_hoisted_2$5={class:"menu-collapse-icon-wrapper"},_hoisted_3$1={class:"menu-content"},__default__$e={name:"MenuLateralWrapper"},_sfc_main$k=Object.assign(__default__$e,{props:mergeModels({side:String,visibility:Boolean,id:String,width:Number,padding:Number},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(Ae,{expose:e}){useCssVars(ni=>({"53bd0b13":unref(An),"513a3e5f":unref(En),"6c36b5e6":unref(Sn)}));const t=Ae,Oe="ion:close",ke=.8325,Be=computed(()=>({scale:ke.value,name:Oe})),Ue=t.width||550,je=t.padding||30,We=useModel(Ae,"modelValue",!1),Qe=ref(Ue),Cn=ref(je),An=computed(()=>Qe.value+"px"),En=computed(()=>Cn.value+"px"),Sn=computed(()=>Qe.value-Cn.value+"px"),Tn=ref();function Dn(){We.value=!1}function ti(){We.value=!0}return e({closeMenu:Dn,openMenu:ti}),(ni,ii)=>{const si=Ie;return Ae.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${We.value&&"is_expanded"} ${t.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:Tn,class:"menu-logo-list"},[renderSlot(ni.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$5,[createVNode(si,{id:t.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:Dn},{default:withCtx(()=>[ii[0]||(ii[0]=createTextVNode(" Fermer ")),createVNode(unref(le$1),normalizeProps(guardReactiveProps(unref(Be))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$1,[renderSlot(ni.$slots,"content",{},void 0,!0)])],512),[[vShow,We.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_2=_export_sfc(_sfc_main$k,[["__scopeId","data-v-6e6e7e2a"]]),__default__$d={name:"MenuLateralButton"},_sfc_main$j=Object.assign(__default__$d,{props:{icon:String,id:String,active:Boolean,title:String,side:String,visibility:Boolean},emits:["tabClicked"],setup(Ae,{expose:e,emit:t}){const Oe=useMapStore(),ke=Ae,Be=ke.icon,Ue=t,je=()=>{ke.side=="left"&&An(),ke.side=="right"&&Cn(),Ue("tabClicked",ke.id)},We=useControlsPosition();function Qe(Dn){let ti=[...Dn.element.children].filter(ni=>{if(ni.className.includes("GPshowOpen"))return ni});ti[0].getAttribute("aria-pressed")==="true"&&ti[0].click()}function Cn(Dn){Oe.getMap().getControls().getArray().forEach(ti=>{We.right.includes(ti.CLASSNAME)&&Qe(ti)})}function An(){Oe.getMap().getControls().getArray().forEach(Dn=>{We.left.includes(Dn.CLASSNAME)&&Qe(Dn)})}function En(){console.log("click on button"+ke.id),Sn.click()}const Sn=ref(null),Tn=ref(ke.id);return e({clickButton:En,button:Sn,id:Tn}),onMounted(()=>{ke.id=="MenuCatalogue"&&Oe.setmenuCatalogueButton(Sn.value)}),(Dn,ti)=>{const ni=Ie;return openBlock(),createElementBlock("div",{ref_key:"button",ref:Sn},[createVNode(ni,{id:unref(Tn),secondary:"","aria-label":Ae.title,class:normalizeClass(`${Ae.active?"active":""}  navBarIcon ${Ae.visibility?"":"invisibleNavButton"} navButton`),icon:unref(Be),iconOnly:!0,onClick:je},null,8,["id","aria-label","class","icon"])],512)}}}),__unplugin_components_1=_export_sfc(_sfc_main$j,[["__scopeId","data-v-465f99a4"]]),_hoisted_1$a={class:"container"},__default__$c={name:"MenuTierce"},_sfc_main$i=Object.assign(__default__$c,{emits:["openControl","onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onEnregistrementOpen"],setup(Ae,{emit:e}){const t=useMapStore(),Oe=e;function ke(je){t.getMap().getControls().getArray().forEach(We=>{We.CLASSNAME==je&&([...We.element.children].filter(Cn=>{if(Cn.className.includes("GPshowOpen"))return Cn})[0].click(),Oe("openControl"))})}const Be="mingcute:file-import-line",Ue=.8325;return computed(()=>({scale:Ue.value,name:Be})),(je,We)=>{const Qe=Ie;return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(Qe,{tertiary:"","no-outline":"",icon:"mingcute:file-import-line",onClick:We[0]||(We[0]=Cn=>ke("LayerImport"))},{default:withCtx(()=>We[4]||(We[4]=[createTextVNode(" Importer des données ")])),_:1}),createVNode(Qe,{tertiary:"","no-outline":"",icon:"ant-design:link-outlined",onClick:We[1]||(We[1]=Cn=>je.$emit("onModalShareOpen"))},{default:withCtx(()=>We[5]||(We[5]=[createTextVNode(" Partager, intégrer la carte ")])),_:1}),createVNode(Qe,{tertiary:"","no-outline":"",icon:"material-symbols:print-outline",onClick:We[2]||(We[2]=Cn=>je.$emit("onModalPrintOpen")),class:"tierce-print"},{default:withCtx(()=>We[6]||(We[6]=[createTextVNode(" Imprimer ")])),_:1}),createVNode(Qe,{tertiary:"","no-outline":"",onClick:We[3]||(We[3]=Cn=>je.$emit("onModalThemeOpen"))},{default:withCtx(()=>We[7]||(We[7]=[createBaseVNode("span",{class:"fr-icon-theme-fill fr-link--icon-left"},null,-1),createTextVNode(" Paramètres d'affichage ")])),_:1})])}}}),MenuTierce=_export_sfc(_sfc_main$i,[["__scopeId","data-v-6b004055"]]),side$1="left",_sfc_main$h={__name:"LeftMenuTool",props:{},emits:["onModalShareOpen","onModalPrintOpen","onModalThemeOpen"],setup(Ae,{emit:e}){const t=ref(),Oe=computed(()=>[{componentName:"MenuTierce",icon:"ri-menu-fill",title:"Menu Tierce",visibility:!0},{componentName:"Enregistrement",icon:"ri-bookmark-line",title:"Mes Enregistrements",visibility:!1}]),ke=ref("MenuCatalogueContent"),Be=ref(null);function Ue(Cn){je(Cn)&&t.value?Be.value.closeMenu():(ke.value=Cn+"Content",Be.value.openMenu())}function je(Cn){return ke.value.replace("Content","")===Cn}function We(){Qe.value.filter(Cn=>Cn.id=="Enregistrement")[0].button.children[0].click()}const Qe=useTemplateRef("tabs");return(Cn,An)=>{const En=__unplugin_components_1,Sn=__unplugin_components_2;return openBlock(),createBlock(Sn,{side:side$1,visibility:!0,width:300,padding:16,id:"MenuCatalogueContentClose",modelValue:unref(t),"onUpdate:modelValue":An[3]||(An[3]=Tn=>isRef(t)?t.value=Tn:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuTierceContent",class:normalizeClass([unref(ke)==="MenuTierceContent"?"activeTab":"inactiveTab"])},[createVNode(MenuTierce,{onOnModalShareOpen:An[0]||(An[0]=Tn=>Cn.$emit("onModalShareOpen")),onOnModalPrintOpen:An[1]||(An[1]=Tn=>Cn.$emit("onModalPrintOpen")),onOnModalThemeOpen:An[2]||(An[2]=Tn=>Cn.$emit("onModalThemeOpen")),onOnEnregistrementOpen:We})],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Oe),Tn=>(openBlock(),createBlock(En,{ref_for:!0,ref:"tabs",side:side$1,icon:Tn.icon,visibility:Tn.visibility,id:Tn.componentName,active:je(Tn.componentName),title:Tn.title,onTabClicked:Ue},null,8,["icon","visibility","id","active","title"]))),256))]),_:1},8,["modelValue"])}}},LeftMenuTool=_export_sfc(_sfc_main$h,[["__scopeId","data-v-96595704"]]),_hoisted_1$9=["innerHTML"],__default__$b={name:"LayerCatalogue"},_sfc_main$g=Object.assign(__default__$b,{props:{layer:Object,active:Boolean},setup(Ae){const e=useMapStore(),t=Ae,Oe=ref(t.active);function ke(Be,Ue){Oe.value=Be,Oe.value?e.addLayer(Ue.key):e.removeLayer(Ue.key)}return onUpdated(()=>{Oe.value=t.active}),(Be,Ue)=>{const je=nt$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(je,{"model-value":unref(Oe),label:Ae.layer.title,id:Ae.layer.id,"onUpdate:modelValue":Ue[0]||(Ue[0]=We=>ke(We,Ae.layer))},null,8,["model-value","label","id"]),createBaseVNode("div",{class:"layer-description",innerHTML:Ae.layer.description},null,8,_hoisted_1$9)],64)}}}),__default__$a={name:"LayerList"},_sfc_main$f=Object.assign(__default__$a,{props:{layers:Object,selectedLayers:Object,listName:String},setup(Ae){return(e,t)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(Ae.layers,Oe=>(openBlock(),createBlock(_sfc_main$g,{key:`${Oe.key}-${Ae.listName}`,active:Ae.selectedLayers?Ae.selectedLayers.filter(ke=>ke.key==Oe.key).length>0:!1,layer:Oe},null,8,["active","layer"]))),128))}}),__default__$9={name:"MenuCatalogueThematique"},_sfc_main$e=Object.assign(__default__$9,{props:{thematicLabel:String,id:Number,layersCount:Number},setup(Ae){const e=Ae,t=computed(()=>e.thematicLabel+` (${e.layersCount})`);return(Oe,ke)=>{const Be=_a$1;return openBlock(),createBlock(Be,{id:"accordion-"+Ae.id,title:unref(t)},{default:withCtx(()=>[renderSlot(Oe.$slots,"default")]),_:3},8,["id","title"])}}});function useSearchInArray(Ae,e,t){return Ae.filter(Oe=>{if(t.map(ke=>{if(Oe.hasOwnProperty(ke)&&Oe[ke]&&Oe[ke].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return Oe})}const _hoisted_1$8={class:"catalogue-content-with-radio-btn"},__default__$8={name:"DataLayerCatalogue"},_sfc_main$d=Object.assign(__default__$8,{props:{dataLayers:Object,currDataFilter:String,searchString:String,selectedLayers:Object},setup(Ae){const e=Ae,t=computed(()=>ke(e.dataLayers)),Oe=computed(()=>Be(e.dataLayers));function ke(We){let Qe=[...new Set(Object.values(We).filter(Cn=>{if(Cn.hasOwnProperty("thematic")&&Cn.thematic.length>0)return Cn.thematic}).map(Cn=>Cn.thematic))].map(Cn=>({thematicLabel:Cn,layers:useSearchInArray(Object.values(We).filter(An=>An.hasOwnProperty("thematic")&&Cn===An.thematic).map(An=>An),e.searchString,["title","description","name"])}));return Qe.push({thematicLabel:"Autres",layers:useSearchInArray(Object.values(We).filter(Cn=>{if(!Cn.hasOwnProperty("thematic")||Cn.thematic.length===0)return Cn}),e.searchString,["title","description","name"])}),Qe}function Be(We){let Qe=[...new Set(Object.values(We).filter(Cn=>{if(Cn.hasOwnProperty("producer")&&Cn.producer.length>0)return Cn.producer}).map(Cn=>Cn.producer))].map(Cn=>({producerLabel:Cn,layers:useSearchInArray(Object.values(We).filter(An=>An.hasOwnProperty("producer")&&Cn===An.producer).map(An=>An),e.searchString,["title","description","name"])}));return Qe.push({producerLabel:"IGN",layers:useSearchInArray(Object.values(We).filter(Cn=>{if(!Cn.hasOwnProperty("producer")||Cn.producer.length==0)return Cn}),e.searchString,["title","description","name"])}),Qe}const Ue=ref(-1),je=ref(-1);return(We,Qe)=>{const Cn=_sfc_main$f,An=_sfc_main$e,En=Ia;return openBlock(),createElementBlock("div",_hoisted_1$8,[createVNode(En,{modelValue:unref(Ue),"onUpdate:modelValue":Qe[0]||(Qe[0]=Sn=>isRef(Ue)?Ue.value=Sn:null)},{default:withCtx(()=>[Ae.currDataFilter==="producteur"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(Oe),(Sn,Tn)=>(openBlock(),createElementBlock(Fragment,{key:Sn.producerLabel},[Sn.layers.length>0?(openBlock(),createBlock(An,{id:Tn,"thematic-label":Sn.producerLabel,"layers-count":Sn.layers.length,key:Sn.producerLabel},{default:withCtx(()=>[(openBlock(),createBlock(Cn,{"list-name":Ae.currDataFilter,"selected-layers":Ae.selectedLayers,layers:Sn.layers,key:Sn.producerLabel},null,8,["list-name","selected-layers","layers"]))]),_:2},1032,["id","thematic-label","layers-count"])):createCommentVNode("",!0)],64))),128)):createCommentVNode("",!0)]),_:1},8,["modelValue"]),createVNode(En,{modelValue:unref(je),"onUpdate:modelValue":Qe[1]||(Qe[1]=Sn=>isRef(je)?je.value=Sn:null)},{default:withCtx(()=>[Ae.currDataFilter==="theme"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(t),(Sn,Tn)=>(openBlock(),createElementBlock(Fragment,{key:Sn.thematicLabel},[Sn.layers.length>0?(openBlock(),createBlock(An,{key:0,id:Tn,"thematic-label":Sn.thematicLabel,"layers-count":Sn.layers.length},{default:withCtx(()=>[createVNode(Cn,{"list-name":Ae.currDataFilter,"selected-layers":Ae.selectedLayers,layers:Sn.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["id","thematic-label","layers-count"])):createCommentVNode("",!0)],64))),128)):createCommentVNode("",!0)]),_:1},8,["modelValue"]),Ae.currDataFilter=="tout"?(openBlock(),createBlock(Cn,{key:0,"list-name":Ae.currDataFilter,"selected-layers":Ae.selectedLayers,layers:unref(useSearchInArray)(e.dataLayers,Ae.searchString,["title","description","name"])},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)])}}}),_hoisted_1$7={class:"catalogue-container"},_hoisted_2$4={class:"catalogue-search-bar"},__default__$7={name:"CatalogueMenu"},_sfc_main$c=Object.assign(__default__$7,{props:{layers:Object,selectedLayers:Object},setup(Ae){const e=dist.useLogger();useMapStore();const t=Ae;e.debug(t.layers);const Oe=ref(""),ke=computed(()=>Object.values(t.layers).filter(Sn=>{if(Sn.hasOwnProperty("base")&&Sn.base)return Sn})),Be=computed(()=>Object.values(t.layers).filter(Sn=>{if(!Sn.hasOwnProperty("base")||!Sn.base)return Sn})),Ue="Liste des couches",je=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Données",tabId:"tab-1",panelId:"tab-content-10"}],We=ref(!0),Qe=ref(0);function Cn(Sn){Oe.value=Sn}const An=[{label:"Producteur",value:"producteur"},{label:"Thème",value:"theme"},{label:"Tout",value:"tout"}],En=ref("producteur");return(Sn,Tn)=>{const Dn=Ze,ti=Ut$1,ni=Si,ii=nu;return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$4,[createVNode(Dn,{"model-value":unref(Oe),"onUpdate:modelValue":Cn},null,8,["model-value"])]),createVNode(ii,{"tab-list-name":Ue,"tab-titles":je,modelValue:unref(Qe),"onUpdate:modelValue":Tn[1]||(Tn[1]=si=>isRef(Qe)?Qe.value=si:null)},{default:withCtx(()=>[createVNode(ti,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",asc:unref(We)},{default:withCtx(()=>[createVNode(_sfc_main$f,{"list-name":"dataLayer","selected-layers":Ae.selectedLayers,layers:unref(useSearchInArray)(unref(ke),unref(Oe),["title","description","name"])},null,8,["selected-layers","layers"])]),_:1},8,["asc"]),createVNode(ti,{"panel-id":"tab-content-1","tab-id":"tab-1",asc:unref(We)},{default:withCtx(()=>[createVNode(ni,{inline:!0,"model-value":unref(En),small:!0,name:"filtre",options:An,"onUpdate:modelValue":Tn[0]||(Tn[0]=si=>En.value=si)},null,8,["model-value"]),createVNode(_sfc_main$d,{"data-layers":unref(Be),"curr-data-filter":unref(En),"search-string":unref(Oe),"selected-layers":Ae.selectedLayers},null,8,["data-layers","curr-data-filter","search-string","selected-layers"])]),_:1},8,["asc"])]),_:1},8,["modelValue"])])}}}),__unplugin_components_0=_export_sfc(_sfc_main$c,[["__scopeId","data-v-ffd0e87a"]]),_hoisted_1$6={class:"control-list-element"},__default__$6={name:"ControlListElement"},_sfc_main$b=Object.assign(__default__$6,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Ae){const e=Ae,t=useModel(Ae,"modelValue"),Oe=ref();return watch(Oe,ke=>{ke===!0&&!t.value.includes(e.controlListElementOptions.name)&&(t.value=[...t.value,e.controlListElementOptions.name]),ke===!1&&(t.value=t.value.filter(Be=>Be!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(ke,Be)=>{const Ue=Cu;return openBlock(),createElementBlock("tr",_hoisted_1$6,[Be[1]||(Be[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(Ue,mergeProps({disabled:Ae.controlListElementOptions.disabled,hint:Ae.controlListElementOptions.hint,inputId:Ae.controlListElementOptions.id,label:Ae.controlListElementOptions.label,labelLeft:"",modelValue:t.value===!0||Array.isArray(t.value)&&t.value.includes(Ae.controlListElementOptions.name),"onUpdate:modelValue":Be[0]||(Be[0]=je=>isRef(Oe)?Oe.value=je:null)},ke.$attrs),null,16,["disabled","hint","inputId","label","modelValue"])])])}}}),ControlListElement=_export_sfc(_sfc_main$b,[["__scopeId","data-v-c8a00218"]]),_hoisted_1$5={class:"control-container"},_hoisted_2$3={class:"control-search-bar"},_hoisted_3={class:"control-content"},__default__$5={name:"MenuControl"},_sfc_main$a=Object.assign(__default__$5,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Ae){dist.useLogger();const e=useMapStore(),t=Ae,Oe=useModel(Ae,"modelValue"),ke=useControlsMenuOptions(),Be=computed(()=>ke.filter(We=>{if(We.label.toLowerCase().includes(Ue.value.toLowerCase())||We.hint.toLowerCase().includes(Ue.value.toLowerCase())||We.name.toLowerCase().includes(Ue.value.toLowerCase()))return We}));computed(()=>t.selectedControls?Be.value.filter(We=>{if(t.selectedControls.includes(We.name))return We}):[]),ref(0),ref(!0);const Ue=ref("");function je(We){Ue.value=We}return watch(Oe,We=>{e.cleanControls();for(let Qe=0;Qe<We.length;Qe++){const Cn=We[Qe];e.addControl(Cn)}}),onMounted(()=>{}),onUpdated(()=>{}),(We,Qe)=>{const Cn=Ze;return openBlock(),createElementBlock("div",_hoisted_1$5,[Qe[1]||(Qe[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$3,[createVNode(Cn,{"model-value":unref(Ue),"onUpdate:modelValue":je},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),(An,En)=>(openBlock(),createBlock(ControlListElement,{key:En,modelValue:Oe.value,"onUpdate:modelValue":Qe[0]||(Qe[0]=Sn=>Oe.value=Sn),"model-value":t.selectedControls,"control-list-element-options":An},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$a,[["__scopeId","data-v-27e46f0d"]]),side="right",_sfc_main$9={__name:"RightMenuTool",props:{selectedControls:{Object},selectedLayers:{Object}},setup(Ae){const e=useDataStore(),t=computed(()=>[{componentName:"MenuCatalogue",icon:"octicon:book-24",title:"Catalogue de données",visibility:!0},{componentName:"MenuControl",icon:"ri:tools-line",title:"Catalogue d'outils",visibility:!0}]),Oe=ref("MenuControlContent"),ke=ref(),Be=ref(null);function Ue(We){je(We)&&ke.value?Be.value.closeMenu():(Oe.value=We+"Content",Be.value.openMenu())}function je(We){return Oe.value.replace("Content","")===We}return(We,Qe)=>{const Cn=__unplugin_components_0,An=__unplugin_components_1,En=__unplugin_components_2;return openBlock(),createBlock(En,{side,visibility:!0,id:unref(Oe),modelValue:unref(ke),"onUpdate:modelValue":Qe[0]||(Qe[0]=Sn=>isRef(ke)?ke.value=Sn:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(Oe)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[createVNode(Cn,{"selected-layers":Ae.selectedLayers,layers:unref(e).getLayers()},null,8,["selected-layers","layers"])],2),createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(Oe)==="MenuControlContent"?"activeTab":"inactiveTab"])},[createVNode(MenuControl,{"selected-controls":Ae.selectedControls},null,8,["selected-controls"])],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Sn=>(openBlock(),createBlock(An,{visibility:Sn.visibility,side,icon:Sn.icon,id:Sn.componentName,active:je(Sn.componentName),title:Sn.title,onTabClicked:Ue},null,8,["visibility","icon","id","active","title"]))),256))]),_:1},8,["id","modelValue"])}}},RightMenuTool=_export_sfc(_sfc_main$9,[["__scopeId","data-v-36202f18"]]),_hoisted_1$4={id:"map-and-tools-container"},_hoisted_2$2={class:"modal-container"},_sfc_main$8=defineComponent({__name:"CartoAndTools",setup(Ae){const e=useMapStore(),t=useDataStore(),Oe=ref(null),ke=ref(null),Be=ref(null);provide("refPrintModal",Be),provide("modalShareRef",ke);const Ue=()=>{ke.value.onModalShareOpen()},je=()=>{Oe.value.openModalTheme()},We=()=>{Be.value.onModalPrintOpen()},Qe=computed(()=>e.getLayers().map(Sn=>{var Tn=t.getLayerByID(Sn),Dn=e.getLayerProperty(Sn);return Tn.opacity=Dn.opacity,Tn.visible=Dn.visible,Tn.gray=Dn.gray,Tn})),Cn=computed(()=>e.getControls()),An=ref(null);return provide("selectedLayers",Qe),(En,Sn)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(LeftMenuTool,{onOnModalShareOpen:Ue,onOnModalPrintOpen:We,onOnModalThemeOpen:je}),createVNode(Carto,{ref_key:"cartoRef",ref:An,"selected-layers":unref(Qe),"selected-controls":unref(Cn)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,{"selected-layers":unref(Qe),"selected-controls":unref(Cn)},null,8,["selected-layers","selected-controls"]),createBaseVNode("div",_hoisted_2$2,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:Oe},null,512),createVNode(PrintModal,{ref_key:"refPrintModal",ref:Be},null,512),createVNode(ShareModal,{ref_key:"modalShareRef",ref:ke},null,512)])]))}}),CartoAndTools=_export_sfc(_sfc_main$8,[["__scopeId","data-v-5c733fc8"]]),_sfc_main$7={},_hoisted_1$3={class:"loader"};function _sfc_render(Ae,e){return openBlock(),createElementBlock("span",_hoisted_1$3)}const Patience=_export_sfc(_sfc_main$7,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$6={__name:"StoreData",props:{},async setup(Ae){let e,t;const Oe=dist.useLogger(),ke=useDataStore(),{fetchData:Be}=ke,Ue=([e,t]=withAsyncContext(()=>Be()),e=await e,t(),e);return Oe.debug(Ue),(je,We)=>unref(ke).isLoaded&&!unref(ke).error?renderSlot(je.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$4={},_sfc_main$5=Object.assign(__default__$4,{__name:"ModalInformation",setup(Ae){const e=useEulerian(),t=useMapStore(),ke=useDataStore().getInformations(),Be=ke.title,Ue=ke.description,je=ke.type,We=ke.version,Qe=ref(ke.opened&&We!==parseInt(t.noInformation,10));Qe.value&&e.pause();const Cn=()=>{Qe.value=!1,e.resume()},An=()=>{Qe.value=!1,t.noInformation=We,e.resume()};return(En,Sn)=>{const Tn=Ea,Dn=Vt$1;return openBlock(),createBlock(Dn,{opened:unref(Qe),title:unref(Be),size:"md",onClose:Cn},{default:withCtx(()=>[createVNode(Tn,{description:unref(Ue),type:unref(je)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:An},Sn[0]||(Sn[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$2={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$4=defineComponent({__name:"Load",setup(Ae){return(e,t)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(_sfc_main$5)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1$1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__$3={},_sfc_main$3=Object.assign(__default__$3,{__name:"Embed",setup(Ae){const e=useMapStore(),t=useDataStore(),Oe=computed(()=>e.getLayers().map(We=>{var Qe=t.getLayerByID(We),Cn=e.getLayerProperty(We);return Qe.opacity=Cn.opacity,Qe.visible=Cn.visible,Qe.gray=Cn.gray,Qe})),ke=["ScaleLine","Zoom"];function Be(){var je=document.querySelector(".fr-header");je.classList.add("gpf-hidden")}function Ue(){var je=document.querySelector(".fr-footer");je.classList.add("gpf-hidden")}return onMounted(()=>{Be(),Ue()}),(je,We)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(Carto,{"selected-layers":unref(Oe),"selected-controls":ke},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),__default__$2={},_sfc_main$2=Object.assign(__default__$2,{__name:"Login",setup(Ae){const e=useRouter(),t=inject("services");return onMounted(()=>{const Oe=location.search,ke=new URLSearchParams(Oe);var Be=ke.get("code"),Ue=ke.get("session_state"),je=ke.get("state");Oe||t.getAccessLogin().then(We=>{location.href=We}),Be&&Ue&&je&&e.push({path:"/"})}),(Oe,ke)=>renderSlot(Oe.$slots,"default")}}),__default__$1={},_sfc_main$1=Object.assign(__default__$1,{__name:"Logout",setup(Ae){const e=useRouter(),t=inject("services");return onMounted(()=>{const Oe=location.search;var Be=new URLSearchParams(Oe).get("session_state");Oe||t.getAccessLogout().then(Ue=>{location.href=Ue}),Be&&e.push({path:"/"})}),(Oe,ke)=>renderSlot(Oe.$slots,"default")}}),_hoisted_1={class:"fr-container fr-p-2w"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Bookmarks",setup(Ae){useRouter(),inject("services");const e="Favoris",t="Not yet implemented !";return onBeforeMount(()=>{}),onMounted(()=>{}),(Oe,ke)=>{const Be=Ea;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",null,toDisplayString(e)),createVNode(Be,{type:"info",title:"Information",description:t,closed:!1,closeable:!1})]),renderSlot(Oe.$slots,"default")],64)}}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/embed",name:"Carte embarquée",component:_sfc_main$3},{path:"/login",name:"Se connecter",component:_sfc_main$2},{path:"/logout",name:"Se deconnecter",component:_sfc_main$1},{path:"/bookmarks",name:"Favoris",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(Ae=>{if(Ae.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(Ae.href),!1;const e=Ae.meta.title?`${Ae.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});async function waitingPrepareApp(){return Promise.resolve()}var storage=localStorage.getItem("service");const services=createServices(storage?JSON.parse(storage).connexion:{}),eulerian=createEulerian({verbose:!0,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia(),store=storePlugin({stores:["service"],storage:localStorage});pinia.use(store);const app=createApp(_sfc_main$O);app.use(pinia);app.use(router);app.use(logger);app.use(eulerian);app.use(services);waitingPrepareApp().then(()=>{app.mount("#app")});export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g};
