{"version":3,"file":"Embed-C59t5PjO.js","sources":["../../src/views/Embed.vue"],"sourcesContent":["<script lang=\"js\">\n/**\n * @description\n * Cartographie intégrée pour partage\n * \n */\nexport default {};\n</script>\n\n<script setup lang=\"js\">\nimport Carto from '@/components/carte/Carto.vue';\nimport Patience from '@/components/utils/Patience.vue'\nimport StoreData from '@/components/StoreData.vue';\n\nimport { useMapStore } from \"@/stores/mapStore\";\nimport { useDataStore } from \"@/stores/dataStore\";\n\n\nconst mapStore = useMapStore();\nconst dataStore = useDataStore();\n\n// On récupère les couches du mapStore\nconst selectedLayers = computed(() => {\n  let layers = mapStore.getLayers();\n  return layers.map((layerId) => {\n    var layer = dataStore.getLayerByID(layerId);\n    // les options de la couche sont récuperées dans le mapStore (permalink)\n    var props = mapStore.getLayerProperty(layerId);\n    layer.opacity = props.opacity;\n    layer.visible = props.visible;\n    layer.grayscale = props.grayscale;\n    return layer;\n  });\n});\n\n// Contrôles fixés par defaut\nconst selectedControls = [\n  \"ScaleLine\", \n  // \"OverviewMap\",\n  \"Zoom\"\n];\n\nfunction hideHeader () {\n  var header = document.querySelector(\".fr-header\");\n  header.classList.add(\"gpf-hidden\");\n}\n\nfunction hideFooter () {\n  var footer = document.querySelector(\".fr-footer\");\n  footer.classList.add(\"gpf-hidden\");\n}\n\nonMounted(() => {\n  hideHeader();\n  hideFooter();\n});\n\n</script>\n\n<template>\n  <Suspense>\n    <!-- Chargement du dataStore avec une patience avant affichage de la cartographie -->\n    <StoreData>\n      <div class=\"map-container\">\n        <Carto \n          :selected-layers=\"selectedLayers\"\n          :selected-controls=\"selectedControls\"\n          :selected-bookmarks=\"[]\"\n        />\n      </div>\n    </StoreData>\n\n    <!-- loading state via #fallback slot -->\n    <template #fallback>\n      <div class=\"patience-container\">\n        <Patience />\n      </div>\n    </template>\n  </Suspense>\n</template>\n\n<style>\n  .map-container,\n  .patience-container {\n    margin-left: 0;\n    width: inherit;\n    height: 100vh;\n    display: flex;\n  }\n</style>"],"names":["__default__","mapStore","useMapStore","dataStore","useDataStore","selectedLayers","computed","layerId","layer","props","selectedControls","hideHeader","header","hideFooter","footer","onMounted","_createBlock","_Suspense","_createElementVNode","_hoisted_2","_createVNode","Patience","StoreData","_hoisted_1","Carto","_unref"],"mappings":"wOAMAA,EAAe,CAAA,6CAYf,MAAMC,EAAWC,EAAW,EACtBC,EAAYC,EAAY,EAGxBC,EAAiBC,EAAS,IACjBL,EAAS,UAAS,EACjB,IAAKM,GAAY,CAC7B,IAAIC,EAAQL,EAAU,aAAaI,CAAO,EAEtCE,EAAQR,EAAS,iBAAiBM,CAAO,EAC7C,OAAAC,EAAM,QAAUC,EAAM,QACtBD,EAAM,QAAUC,EAAM,QACtBD,EAAM,UAAYC,EAAM,UACjBD,CACT,CAAC,CACF,EAGKE,EAAmB,CACvB,YAEA,MACF,EAEA,SAASC,GAAc,CACrB,IAAIC,EAAS,SAAS,cAAc,YAAY,EAChDA,EAAO,UAAU,IAAI,YAAY,CACnC,CAEA,SAASC,GAAc,CACrB,IAAIC,EAAS,SAAS,cAAc,YAAY,EAChDA,EAAO,UAAU,IAAI,YAAY,CACnC,CAEA,OAAAC,EAAU,IAAM,CACdJ,EAAU,EACVE,EAAU,CACZ,CAAC,cAKCG,EAkBWC,EAAA,KAAA,CALE,WACT,IAEM,CAFNC,EAEM,MAFNC,EAEM,CADJC,EAAYC,CAAA,gBAbhB,IAQY,CARZD,EAQYE,EAAA,KAAA,WAPV,IAMM,CANNJ,EAMM,MANNK,EAMM,CALJH,EAIEI,EAAA,CAHC,kBAAiBC,EAAApB,CAAA,EACjB,oBAAmBK,EACnB,qBAAoB,CAAA"}